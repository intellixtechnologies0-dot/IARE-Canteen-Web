(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function f2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function fS(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var sh={exports:{}},Ys={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em;function dS(){if(Em)return Ys;Em=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:s,ref:i!==void 0?i:null,props:a}}return Ys.Fragment=e,Ys.jsx=t,Ys.jsxs=t,Ys}var Am;function hS(){return Am||(Am=1,sh.exports=dS()),sh.exports}var v=hS(),lh={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function pS(){if(Cm)return Le;Cm=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(k){return k===null||typeof k!="object"?null:(k=g&&k[g]||k["@@iterator"],typeof k=="function"?k:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function E(k,I,P){this.props=k,this.context=I,this.refs=S,this.updater=P||x}E.prototype.isReactComponent={},E.prototype.setState=function(k,I){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,I,"setState")},E.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function _(){}_.prototype=E.prototype;function T(k,I,P){this.props=k,this.context=I,this.refs=S,this.updater=P||x}var C=T.prototype=new _;C.constructor=T,b(C,E.prototype),C.isPureReactComponent=!0;var O=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function L(k,I,P,q,ie,te){return P=te.ref,{$$typeof:n,type:k,key:I,ref:P!==void 0?P:null,props:te}}function H(k,I){return L(k.type,I,void 0,void 0,void 0,k.props)}function $(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function ne(k){var I={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(P){return I[P]})}var se=/\/+/g;function le(k,I){return typeof k=="object"&&k!==null&&k.key!=null?ne(""+k.key):I.toString(36)}function ue(){}function de(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(ue,ue):(k.status="pending",k.then(function(I){k.status==="pending"&&(k.status="fulfilled",k.value=I)},function(I){k.status==="pending"&&(k.status="rejected",k.reason=I)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Se(k,I,P,q,ie){var te=typeof k;(te==="undefined"||te==="boolean")&&(k=null);var J=!1;if(k===null)J=!0;else switch(te){case"bigint":case"string":case"number":J=!0;break;case"object":switch(k.$$typeof){case n:case e:J=!0;break;case p:return J=k._init,Se(J(k._payload),I,P,q,ie)}}if(J)return ie=ie(k),J=q===""?"."+le(k,0):q,O(ie)?(P="",J!=null&&(P=J.replace(se,"$&/")+"/"),Se(ie,I,P,"",function(ye){return ye})):ie!=null&&($(ie)&&(ie=H(ie,P+(ie.key==null||k&&k.key===ie.key?"":(""+ie.key).replace(se,"$&/")+"/")+J)),I.push(ie)),1;J=0;var pe=q===""?".":q+":";if(O(k))for(var ae=0;ae<k.length;ae++)q=k[ae],te=pe+le(q,ae),J+=Se(q,I,P,te,ie);else if(ae=y(k),typeof ae=="function")for(k=ae.call(k),ae=0;!(q=k.next()).done;)q=q.value,te=pe+le(q,ae++),J+=Se(q,I,P,te,ie);else if(te==="object"){if(typeof k.then=="function")return Se(de(k),I,P,q,ie);throw I=String(k),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return J}function U(k,I,P){if(k==null)return k;var q=[],ie=0;return Se(k,q,"","",function(te){return I.call(P,te,ie++)}),q}function F(k){if(k._status===-1){var I=k._result;I=I(),I.then(function(P){(k._status===0||k._status===-1)&&(k._status=1,k._result=P)},function(P){(k._status===0||k._status===-1)&&(k._status=2,k._result=P)}),k._status===-1&&(k._status=0,k._result=I)}if(k._status===1)return k._result.default;throw k._result}var K=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function he(){}return Le.Children={map:U,forEach:function(k,I,P){U(k,function(){I.apply(this,arguments)},P)},count:function(k){var I=0;return U(k,function(){I++}),I},toArray:function(k){return U(k,function(I){return I})||[]},only:function(k){if(!$(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Le.Component=E,Le.Fragment=t,Le.Profiler=i,Le.PureComponent=T,Le.StrictMode=r,Le.Suspense=f,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Le.__COMPILER_RUNTIME={__proto__:null,c:function(k){return D.H.useMemoCache(k)}},Le.cache=function(k){return function(){return k.apply(null,arguments)}},Le.cloneElement=function(k,I,P){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var q=b({},k.props),ie=k.key,te=void 0;if(I!=null)for(J in I.ref!==void 0&&(te=void 0),I.key!==void 0&&(ie=""+I.key),I)!j.call(I,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&I.ref===void 0||(q[J]=I[J]);var J=arguments.length-2;if(J===1)q.children=P;else if(1<J){for(var pe=Array(J),ae=0;ae<J;ae++)pe[ae]=arguments[ae+2];q.children=pe}return L(k.type,ie,void 0,void 0,te,q)},Le.createContext=function(k){return k={$$typeof:s,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:a,_context:k},k},Le.createElement=function(k,I,P){var q,ie={},te=null;if(I!=null)for(q in I.key!==void 0&&(te=""+I.key),I)j.call(I,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(ie[q]=I[q]);var J=arguments.length-2;if(J===1)ie.children=P;else if(1<J){for(var pe=Array(J),ae=0;ae<J;ae++)pe[ae]=arguments[ae+2];ie.children=pe}if(k&&k.defaultProps)for(q in J=k.defaultProps,J)ie[q]===void 0&&(ie[q]=J[q]);return L(k,te,void 0,void 0,null,ie)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(k){return{$$typeof:c,render:k}},Le.isValidElement=$,Le.lazy=function(k){return{$$typeof:p,_payload:{_status:-1,_result:k},_init:F}},Le.memo=function(k,I){return{$$typeof:d,type:k,compare:I===void 0?null:I}},Le.startTransition=function(k){var I=D.T,P={};D.T=P;try{var q=k(),ie=D.S;ie!==null&&ie(P,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(he,K)}catch(te){K(te)}finally{D.T=I}},Le.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Le.use=function(k){return D.H.use(k)},Le.useActionState=function(k,I,P){return D.H.useActionState(k,I,P)},Le.useCallback=function(k,I){return D.H.useCallback(k,I)},Le.useContext=function(k){return D.H.useContext(k)},Le.useDebugValue=function(){},Le.useDeferredValue=function(k,I){return D.H.useDeferredValue(k,I)},Le.useEffect=function(k,I,P){var q=D.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return q.useEffect(k,I)},Le.useId=function(){return D.H.useId()},Le.useImperativeHandle=function(k,I,P){return D.H.useImperativeHandle(k,I,P)},Le.useInsertionEffect=function(k,I){return D.H.useInsertionEffect(k,I)},Le.useLayoutEffect=function(k,I){return D.H.useLayoutEffect(k,I)},Le.useMemo=function(k,I){return D.H.useMemo(k,I)},Le.useOptimistic=function(k,I){return D.H.useOptimistic(k,I)},Le.useReducer=function(k,I,P){return D.H.useReducer(k,I,P)},Le.useRef=function(k){return D.H.useRef(k)},Le.useState=function(k){return D.H.useState(k)},Le.useSyncExternalStore=function(k,I,P){return D.H.useSyncExternalStore(k,I,P)},Le.useTransition=function(){return D.H.useTransition()},Le.version="19.1.1",Le}var Tm;function F0(){return Tm||(Tm=1,lh.exports=pS()),lh.exports}var R=F0();const d2=f2(R);var ch={exports:{}},Ks={},uh={exports:{}},fh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om;function gS(){return Om||(Om=1,(function(n){function e(U,F){var K=U.length;U.push(F);e:for(;0<K;){var he=K-1>>>1,k=U[he];if(0<i(k,F))U[he]=F,U[K]=k,K=he;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var F=U[0],K=U.pop();if(K!==F){U[0]=K;e:for(var he=0,k=U.length,I=k>>>1;he<I;){var P=2*(he+1)-1,q=U[P],ie=P+1,te=U[ie];if(0>i(q,K))ie<k&&0>i(te,q)?(U[he]=te,U[ie]=K,he=ie):(U[he]=q,U[P]=K,he=P);else if(ie<k&&0>i(te,K))U[he]=te,U[ie]=K,he=ie;else break e}}return F}function i(U,F){var K=U.sortIndex-F.sortIndex;return K!==0?K:U.id-F.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();n.unstable_now=function(){return s.now()-c}}var f=[],d=[],p=1,g=null,y=3,x=!1,b=!1,S=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(U){for(var F=t(d);F!==null;){if(F.callback===null)r(d);else if(F.startTime<=U)r(d),F.sortIndex=F.expirationTime,e(f,F);else break;F=t(d)}}function D(U){if(S=!1,O(U),!b)if(t(f)!==null)b=!0,j||(j=!0,le());else{var F=t(d);F!==null&&Se(D,F.startTime-U)}}var j=!1,L=-1,H=5,$=-1;function ne(){return E?!0:!(n.unstable_now()-$<H)}function se(){if(E=!1,j){var U=n.unstable_now();$=U;var F=!0;try{e:{b=!1,S&&(S=!1,T(L),L=-1),x=!0;var K=y;try{t:{for(O(U),g=t(f);g!==null&&!(g.expirationTime>U&&ne());){var he=g.callback;if(typeof he=="function"){g.callback=null,y=g.priorityLevel;var k=he(g.expirationTime<=U);if(U=n.unstable_now(),typeof k=="function"){g.callback=k,O(U),F=!0;break t}g===t(f)&&r(f),O(U)}else r(f);g=t(f)}if(g!==null)F=!0;else{var I=t(d);I!==null&&Se(D,I.startTime-U),F=!1}}break e}finally{g=null,y=K,x=!1}F=void 0}}finally{F?le():j=!1}}}var le;if(typeof C=="function")le=function(){C(se)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,de=ue.port2;ue.port1.onmessage=se,le=function(){de.postMessage(null)}}else le=function(){_(se,0)};function Se(U,F){L=_(function(){U(n.unstable_now())},F)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(U){switch(y){case 1:case 2:case 3:var F=3;break;default:F=y}var K=y;y=F;try{return U()}finally{y=K}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(U,F){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var K=y;y=U;try{return F()}finally{y=K}},n.unstable_scheduleCallback=function(U,F,K){var he=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?he+K:he):K=he,U){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=K+k,U={id:p++,callback:F,priorityLevel:U,startTime:K,expirationTime:k,sortIndex:-1},K>he?(U.sortIndex=K,e(d,U),t(f)===null&&U===t(d)&&(S?(T(L),L=-1):S=!0,Se(D,K-he))):(U.sortIndex=k,e(f,U),b||x||(b=!0,j||(j=!0,le()))),U},n.unstable_shouldYield=ne,n.unstable_wrapCallback=function(U){var F=y;return function(){var K=y;y=F;try{return U.apply(this,arguments)}finally{y=K}}}})(fh)),fh}var Rm;function vS(){return Rm||(Rm=1,uh.exports=gS()),uh.exports}var dh={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function mS(){if(Dm)return Tn;Dm=1;var n=F0();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:d,implementation:p}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Tn.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,p)},Tn.flushSync=function(f){var d=s.T,p=r.p;try{if(s.T=null,r.p=2,f)return f()}finally{s.T=d,r.p=p,r.d.f()}},Tn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},Tn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Tn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,g=c(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:x}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Tn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},Tn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=c(p,d.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Tn.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},Tn.requestFormReset=function(f){r.d.r(f)},Tn.unstable_batchedUpdates=function(f,d){return f(d)},Tn.useFormState=function(f,d,p){return s.H.useFormState(f,d,p)},Tn.useFormStatus=function(){return s.H.useHostTransitionStatus()},Tn.version="19.1.1",Tn}var Nm;function yS(){if(Nm)return dh.exports;Nm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dh.exports=mS(),dh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function xS(){if(Im)return Ks;Im=1;var n=vS(),e=F0(),t=yS();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var l=o,u=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(u=l.return),o=l.return;while(o)}return l.tag===3?u:null}function s(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(a(o)!==o)throw Error(r(188))}function f(o){var l=o.alternate;if(!l){if(l=a(o),l===null)throw Error(r(188));return l!==o?null:o}for(var u=o,h=l;;){var m=u.return;if(m===null)break;var w=m.alternate;if(w===null){if(h=m.return,h!==null){u=h;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===u)return c(m),o;if(w===h)return c(m),l;w=w.sibling}throw Error(r(188))}if(u.return!==h.return)u=m,h=w;else{for(var A=!1,N=m.child;N;){if(N===u){A=!0,u=m,h=w;break}if(N===h){A=!0,h=m,u=w;break}N=N.sibling}if(!A){for(N=w.child;N;){if(N===u){A=!0,u=w,h=m;break}if(N===h){A=!0,h=w,u=m;break}N=N.sibling}if(!A)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?o:l}function d(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=d(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function le(o){return o===null||typeof o!="object"?null:(o=se&&o[se]||o["@@iterator"],typeof o=="function"?o:null)}var ue=Symbol.for("react.client.reference");function de(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ue?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case E:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case j:return"SuspenseList";case $:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case C:return(o.displayName||"Context")+".Provider";case T:return(o._context.displayName||"Context")+".Consumer";case O:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case L:return l=o.displayName||null,l!==null?l:de(o.type)||"Memo";case H:l=o._payload,o=o._init;try{return de(o(l))}catch{}}return null}var Se=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},he=[],k=-1;function I(o){return{current:o}}function P(o){0>k||(o.current=he[k],he[k]=null,k--)}function q(o,l){k++,he[k]=o.current,o.current=l}var ie=I(null),te=I(null),J=I(null),pe=I(null);function ae(o,l){switch(q(J,l),q(te,o),q(ie,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?Qv(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=Qv(l),o=Jv(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}P(ie),q(ie,o)}function ye(){P(ie),P(te),P(J)}function Ce(o){o.memoizedState!==null&&q(pe,o);var l=ie.current,u=Jv(l,o.type);l!==u&&(q(te,o),q(ie,u))}function Xe(o){te.current===o&&(P(ie),P(te)),pe.current===o&&(P(pe),Gs._currentValue=K)}var Dt=Object.prototype.hasOwnProperty,Zt=n.unstable_scheduleCallback,pt=n.unstable_cancelCallback,Je=n.unstable_shouldYield,xt=n.unstable_requestPaint,rt=n.unstable_now,$t=n.unstable_getCurrentPriorityLevel,ct=n.unstable_ImmediatePriority,Pt=n.unstable_UserBlockingPriority,V=n.unstable_NormalPriority,fe=n.unstable_LowPriority,ve=n.unstable_IdlePriority,we=n.log,xe=n.unstable_setDisableYieldValue,Oe=null,Ae=null;function it(o){if(typeof we=="function"&&xe(o),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(Oe,o)}catch{}}var Ye=Math.clz32?Math.clz32:be,Pe=Math.log,Re=Math.LN2;function be(o){return o>>>=0,o===0?32:31-(Pe(o)/Re|0)|0}var Tt=256,xr=4194304;function nr(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Nr(o,l,u){var h=o.pendingLanes;if(h===0)return 0;var m=0,w=o.suspendedLanes,A=o.pingedLanes;o=o.warmLanes;var N=h&134217727;return N!==0?(h=N&~w,h!==0?m=nr(h):(A&=N,A!==0?m=nr(A):u||(u=N&~o,u!==0&&(m=nr(u))))):(N=h&~w,N!==0?m=nr(N):A!==0?m=nr(A):u||(u=h&~o,u!==0&&(m=nr(u)))),m===0?0:l!==0&&l!==m&&(l&w)===0&&(w=m&-m,u=l&-l,w>=u||w===32&&(u&4194048)!==0)?l:m}function gi(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Xu(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bl(){var o=Tt;return Tt<<=1,(Tt&4194048)===0&&(Tt=256),o}function Ll(){var o=xr;return xr<<=1,(xr&62914560)===0&&(xr=4194304),o}function Yu(o){for(var l=[],u=0;31>u;u++)l.push(o);return l}function es(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Jb(o,l,u,h,m,w){var A=o.pendingLanes;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=u,o.entangledLanes&=u,o.errorRecoveryDisabledLanes&=u,o.shellSuspendCounter=0;var N=o.entanglements,B=o.expirationTimes,X=o.hiddenUpdates;for(u=A&~u;0<u;){var re=31-Ye(u),ce=1<<re;N[re]=0,B[re]=-1;var Z=X[re];if(Z!==null)for(X[re]=null,re=0;re<Z.length;re++){var Q=Z[re];Q!==null&&(Q.lane&=-536870913)}u&=~ce}h!==0&&B1(o,h,0),w!==0&&m===0&&o.tag!==0&&(o.suspendedLanes|=w&~(A&~l))}function B1(o,l,u){o.pendingLanes|=l,o.suspendedLanes&=~l;var h=31-Ye(l);o.entangledLanes|=l,o.entanglements[h]=o.entanglements[h]|1073741824|u&4194090}function L1(o,l){var u=o.entangledLanes|=l;for(o=o.entanglements;u;){var h=31-Ye(u),m=1<<h;m&l|o[h]&l&&(o[h]|=l),u&=~m}}function Ku(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Zu(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function F1(){var o=F.p;return o!==0?o:(o=window.event,o===void 0?32:ym(o.type))}function e_(o,l){var u=F.p;try{return F.p=o,l()}finally{F.p=u}}var vi=Math.random().toString(36).slice(2),An="__reactFiber$"+vi,Ln="__reactProps$"+vi,ka="__reactContainer$"+vi,Qu="__reactEvents$"+vi,t_="__reactListeners$"+vi,n_="__reactHandles$"+vi,U1="__reactResources$"+vi,ts="__reactMarker$"+vi;function Ju(o){delete o[An],delete o[Ln],delete o[Qu],delete o[t_],delete o[n_]}function Ma(o){var l=o[An];if(l)return l;for(var u=o.parentNode;u;){if(l=u[ka]||u[An]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(o=rm(o);o!==null;){if(u=o[An])return u;o=rm(o)}return l}o=u,u=o.parentNode}return null}function ja(o){if(o=o[An]||o[ka]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function ns(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function Pa(o){var l=o[U1];return l||(l=o[U1]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function cn(o){o[ts]=!0}var z1=new Set,V1={};function Ji(o,l){Ba(o,l),Ba(o+"Capture",l)}function Ba(o,l){for(V1[o]=l,o=0;o<l.length;o++)z1.add(l[o])}var r_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),H1={},G1={};function i_(o){return Dt.call(G1,o)?!0:Dt.call(H1,o)?!1:r_.test(o)?G1[o]=!0:(H1[o]=!0,!1)}function Fl(o,l,u){if(i_(l))if(u===null)o.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var h=l.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+u)}}function Ul(o,l,u){if(u===null)o.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+u)}}function qr(o,l,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttributeNS(l,u,""+h)}}var ef,$1;function La(o){if(ef===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);ef=l&&l[1]||"",$1=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ef+o+$1}var tf=!1;function nf(o,l){if(!o||tf)return"";tf=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(l){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(Q){var Z=Q}Reflect.construct(o,[],ce)}else{try{ce.call()}catch(Q){Z=Q}o.call(ce.prototype)}}else{try{throw Error()}catch(Q){Z=Q}(ce=o())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(Q){if(Q&&Z&&typeof Q.stack=="string")return[Q.stack,Z.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),A=w[0],N=w[1];if(A&&N){var B=A.split(`
`),X=N.split(`
`);for(m=h=0;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;for(;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;if(h===B.length||m===X.length)for(h=B.length-1,m=X.length-1;1<=h&&0<=m&&B[h]!==X[m];)m--;for(;1<=h&&0<=m;h--,m--)if(B[h]!==X[m]){if(h!==1||m!==1)do if(h--,m--,0>m||B[h]!==X[m]){var re=`
`+B[h].replace(" at new "," at ");return o.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",o.displayName)),re}while(1<=h&&0<=m);break}}}finally{tf=!1,Error.prepareStackTrace=u}return(u=o?o.displayName||o.name:"")?La(u):""}function a_(o){switch(o.tag){case 26:case 27:case 5:return La(o.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 15:return nf(o.type,!1);case 11:return nf(o.type.render,!1);case 1:return nf(o.type,!0);case 31:return La("Activity");default:return""}}function q1(o){try{var l="";do l+=a_(o),o=o.return;while(o);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function rr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function W1(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function o_(o){var l=W1(o)?"checked":"value",u=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),h=""+o[l];if(!o.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,w=u.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return m.call(this)},set:function(A){h=""+A,w.call(this,A)}}),Object.defineProperty(o,l,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(A){h=""+A},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function zl(o){o._valueTracker||(o._valueTracker=o_(o))}function X1(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var u=l.getValue(),h="";return o&&(h=W1(o)?o.checked?"true":"false":o.value),o=h,o!==u?(l.setValue(o),!0):!1}function Vl(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var s_=/[\n"\\]/g;function ir(o){return o.replace(s_,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function rf(o,l,u,h,m,w,A,N){o.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.type=A:o.removeAttribute("type"),l!=null?A==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+rr(l)):o.value!==""+rr(l)&&(o.value=""+rr(l)):A!=="submit"&&A!=="reset"||o.removeAttribute("value"),l!=null?af(o,A,rr(l)):u!=null?af(o,A,rr(u)):h!=null&&o.removeAttribute("value"),m==null&&w!=null&&(o.defaultChecked=!!w),m!=null&&(o.checked=m&&typeof m!="function"&&typeof m!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?o.name=""+rr(N):o.removeAttribute("name")}function Y1(o,l,u,h,m,w,A,N){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),l!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||l!=null))return;u=u!=null?""+rr(u):"",l=l!=null?""+rr(l):u,N||l===o.value||(o.value=l),o.defaultValue=l}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,o.checked=N?o.checked:!!h,o.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.name=A)}function af(o,l,u){l==="number"&&Vl(o.ownerDocument)===o||o.defaultValue===""+u||(o.defaultValue=""+u)}function Fa(o,l,u,h){if(o=o.options,l){l={};for(var m=0;m<u.length;m++)l["$"+u[m]]=!0;for(u=0;u<o.length;u++)m=l.hasOwnProperty("$"+o[u].value),o[u].selected!==m&&(o[u].selected=m),m&&h&&(o[u].defaultSelected=!0)}else{for(u=""+rr(u),l=null,m=0;m<o.length;m++){if(o[m].value===u){o[m].selected=!0,h&&(o[m].defaultSelected=!0);return}l!==null||o[m].disabled||(l=o[m])}l!==null&&(l.selected=!0)}}function K1(o,l,u){if(l!=null&&(l=""+rr(l),l!==o.value&&(o.value=l),u==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=u!=null?""+rr(u):""}function Z1(o,l,u,h){if(l==null){if(h!=null){if(u!=null)throw Error(r(92));if(Se(h)){if(1<h.length)throw Error(r(93));h=h[0]}u=h}u==null&&(u=""),l=u}u=rr(l),o.defaultValue=u,h=o.textContent,h===u&&h!==""&&h!==null&&(o.value=h)}function Ua(o,l){if(l){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=l;return}}o.textContent=l}var l_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Q1(o,l,u){var h=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":h?o.setProperty(l,u):typeof u!="number"||u===0||l_.has(l)?l==="float"?o.cssFloat=u:o[l]=(""+u).trim():o[l]=u+"px"}function J1(o,l,u){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||l!=null&&l.hasOwnProperty(h)||(h.indexOf("--")===0?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="");for(var m in l)h=l[m],l.hasOwnProperty(m)&&u[m]!==h&&Q1(o,m,h)}else for(var w in l)l.hasOwnProperty(w)&&Q1(o,w,l[w])}function of(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),u_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hl(o){return u_.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var sf=null;function lf(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var za=null,Va=null;function ep(o){var l=ja(o);if(l&&(o=l.stateNode)){var u=o[Ln]||null;e:switch(o=l.stateNode,l.type){case"input":if(rf(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ir(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var h=u[l];if(h!==o&&h.form===o.form){var m=h[Ln]||null;if(!m)throw Error(r(90));rf(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(l=0;l<u.length;l++)h=u[l],h.form===o.form&&X1(h)}break e;case"textarea":K1(o,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&Fa(o,!!u.multiple,l,!1)}}}var cf=!1;function tp(o,l,u){if(cf)return o(l,u);cf=!0;try{var h=o(l);return h}finally{if(cf=!1,(za!==null||Va!==null)&&(Oc(),za&&(l=za,o=Va,Va=za=null,ep(l),o)))for(l=0;l<o.length;l++)ep(o[l])}}function rs(o,l){var u=o.stateNode;if(u===null)return null;var h=u[Ln]||null;if(h===null)return null;u=h[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(o=o.type,h=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!h;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(r(231,l,typeof u));return u}var Wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uf=!1;if(Wr)try{var is={};Object.defineProperty(is,"passive",{get:function(){uf=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{uf=!1}var mi=null,ff=null,Gl=null;function np(){if(Gl)return Gl;var o,l=ff,u=l.length,h,m="value"in mi?mi.value:mi.textContent,w=m.length;for(o=0;o<u&&l[o]===m[o];o++);var A=u-o;for(h=1;h<=A&&l[u-h]===m[w-h];h++);return Gl=m.slice(o,1<h?1-h:void 0)}function $l(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function ql(){return!0}function rp(){return!1}function Fn(o){function l(u,h,m,w,A){this._reactName=u,this._targetInst=m,this.type=h,this.nativeEvent=w,this.target=A,this.currentTarget=null;for(var N in o)o.hasOwnProperty(N)&&(u=o[N],this[N]=u?u(w):w[N]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ql:rp,this.isPropagationStopped=rp,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),l}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wl=Fn(ea),as=p({},ea,{view:0,detail:0}),f_=Fn(as),df,hf,os,Xl=p({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gf,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==os&&(os&&o.type==="mousemove"?(df=o.screenX-os.screenX,hf=o.screenY-os.screenY):hf=df=0,os=o),df)},movementY:function(o){return"movementY"in o?o.movementY:hf}}),ip=Fn(Xl),d_=p({},Xl,{dataTransfer:0}),h_=Fn(d_),p_=p({},as,{relatedTarget:0}),pf=Fn(p_),g_=p({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),v_=Fn(g_),m_=p({},ea,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),y_=Fn(m_),x_=p({},ea,{data:0}),ap=Fn(x_),w_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},__={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S_(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=__[o])?!!l[o]:!1}function gf(){return S_}var E_=p({},as,{key:function(o){if(o.key){var l=w_[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=$l(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?b_[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gf,charCode:function(o){return o.type==="keypress"?$l(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?$l(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),A_=Fn(E_),C_=p({},Xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),op=Fn(C_),T_=p({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gf}),O_=Fn(T_),R_=p({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),D_=Fn(R_),N_=p({},Xl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),I_=Fn(N_),k_=p({},ea,{newState:0,oldState:0}),M_=Fn(k_),j_=[9,13,27,32],vf=Wr&&"CompositionEvent"in window,ss=null;Wr&&"documentMode"in document&&(ss=document.documentMode);var P_=Wr&&"TextEvent"in window&&!ss,sp=Wr&&(!vf||ss&&8<ss&&11>=ss),lp=" ",cp=!1;function up(o,l){switch(o){case"keyup":return j_.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fp(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ha=!1;function B_(o,l){switch(o){case"compositionend":return fp(l);case"keypress":return l.which!==32?null:(cp=!0,lp);case"textInput":return o=l.data,o===lp&&cp?null:o;default:return null}}function L_(o,l){if(Ha)return o==="compositionend"||!vf&&up(o,l)?(o=np(),Gl=ff=mi=null,Ha=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return sp&&l.locale!=="ko"?null:l.data;default:return null}}var F_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dp(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!F_[o.type]:l==="textarea"}function hp(o,l,u,h){za?Va?Va.push(h):Va=[h]:za=h,l=Mc(l,"onChange"),0<l.length&&(u=new Wl("onChange","change",null,u,h),o.push({event:u,listeners:l}))}var ls=null,cs=null;function U_(o){Wv(o,0)}function Yl(o){var l=ns(o);if(X1(l))return o}function pp(o,l){if(o==="change")return l}var gp=!1;if(Wr){var mf;if(Wr){var yf="oninput"in document;if(!yf){var vp=document.createElement("div");vp.setAttribute("oninput","return;"),yf=typeof vp.oninput=="function"}mf=yf}else mf=!1;gp=mf&&(!document.documentMode||9<document.documentMode)}function mp(){ls&&(ls.detachEvent("onpropertychange",yp),cs=ls=null)}function yp(o){if(o.propertyName==="value"&&Yl(cs)){var l=[];hp(l,cs,o,lf(o)),tp(U_,l)}}function z_(o,l,u){o==="focusin"?(mp(),ls=l,cs=u,ls.attachEvent("onpropertychange",yp)):o==="focusout"&&mp()}function V_(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Yl(cs)}function H_(o,l){if(o==="click")return Yl(l)}function G_(o,l){if(o==="input"||o==="change")return Yl(l)}function $_(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Wn=typeof Object.is=="function"?Object.is:$_;function us(o,l){if(Wn(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var u=Object.keys(o),h=Object.keys(l);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var m=u[h];if(!Dt.call(l,m)||!Wn(o[m],l[m]))return!1}return!0}function xp(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function wp(o,l){var u=xp(o);o=0;for(var h;u;){if(u.nodeType===3){if(h=o+u.textContent.length,o<=l&&h>=l)return{node:u,offset:l-o};o=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=xp(u)}}function bp(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?bp(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function _p(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Vl(o.document);l instanceof o.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)o=l.contentWindow;else break;l=Vl(o.document)}return l}function xf(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var q_=Wr&&"documentMode"in document&&11>=document.documentMode,Ga=null,wf=null,fs=null,bf=!1;function Sp(o,l,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;bf||Ga==null||Ga!==Vl(h)||(h=Ga,"selectionStart"in h&&xf(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),fs&&us(fs,h)||(fs=h,h=Mc(wf,"onSelect"),0<h.length&&(l=new Wl("onSelect","select",null,l,u),o.push({event:l,listeners:h}),l.target=Ga)))}function ta(o,l){var u={};return u[o.toLowerCase()]=l.toLowerCase(),u["Webkit"+o]="webkit"+l,u["Moz"+o]="moz"+l,u}var $a={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},_f={},Ep={};Wr&&(Ep=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function na(o){if(_f[o])return _f[o];if(!$a[o])return o;var l=$a[o],u;for(u in l)if(l.hasOwnProperty(u)&&u in Ep)return _f[o]=l[u];return o}var Ap=na("animationend"),Cp=na("animationiteration"),Tp=na("animationstart"),W_=na("transitionrun"),X_=na("transitionstart"),Y_=na("transitioncancel"),Op=na("transitionend"),Rp=new Map,Sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sf.push("scrollEnd");function wr(o,l){Rp.set(o,l),Ji(l,[o])}var Dp=new WeakMap;function ar(o,l){if(typeof o=="object"&&o!==null){var u=Dp.get(o);return u!==void 0?u:(l={value:o,source:l,stack:q1(l)},Dp.set(o,l),l)}return{value:o,source:l,stack:q1(l)}}var or=[],qa=0,Ef=0;function Kl(){for(var o=qa,l=Ef=qa=0;l<o;){var u=or[l];or[l++]=null;var h=or[l];or[l++]=null;var m=or[l];or[l++]=null;var w=or[l];if(or[l++]=null,h!==null&&m!==null){var A=h.pending;A===null?m.next=m:(m.next=A.next,A.next=m),h.pending=m}w!==0&&Np(u,m,w)}}function Zl(o,l,u,h){or[qa++]=o,or[qa++]=l,or[qa++]=u,or[qa++]=h,Ef|=h,o.lanes|=h,o=o.alternate,o!==null&&(o.lanes|=h)}function Af(o,l,u,h){return Zl(o,l,u,h),Ql(o)}function Wa(o,l){return Zl(o,null,null,l),Ql(o)}function Np(o,l,u){o.lanes|=u;var h=o.alternate;h!==null&&(h.lanes|=u);for(var m=!1,w=o.return;w!==null;)w.childLanes|=u,h=w.alternate,h!==null&&(h.childLanes|=u),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(m=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,m&&l!==null&&(m=31-Ye(u),o=w.hiddenUpdates,h=o[m],h===null?o[m]=[l]:h.push(l),l.lane=u|536870912),w):null}function Ql(o){if(50<Ps)throw Ps=0,Nd=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var Xa={};function K_(o,l,u,h){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(o,l,u,h){return new K_(o,l,u,h)}function Cf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Xr(o,l){var u=o.alternate;return u===null?(u=Xn(o.tag,l,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=l,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&65011712,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,l=o.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u.refCleanup=o.refCleanup,u}function Ip(o,l){o.flags&=65011714;var u=o.alternate;return u===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,l=u.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Jl(o,l,u,h,m,w){var A=0;if(h=o,typeof o=="function")Cf(o)&&(A=1);else if(typeof o=="string")A=Q3(o,u,ie.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case $:return o=Xn(31,u,l,m),o.elementType=$,o.lanes=w,o;case b:return ra(u.children,m,w,l);case S:A=8,m|=24;break;case E:return o=Xn(12,u,l,m|2),o.elementType=E,o.lanes=w,o;case D:return o=Xn(13,u,l,m),o.elementType=D,o.lanes=w,o;case j:return o=Xn(19,u,l,m),o.elementType=j,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case _:case C:A=10;break e;case T:A=9;break e;case O:A=11;break e;case L:A=14;break e;case H:A=16,h=null;break e}A=29,u=Error(r(130,o===null?"null":typeof o,"")),h=null}return l=Xn(A,u,l,m),l.elementType=o,l.type=h,l.lanes=w,l}function ra(o,l,u,h){return o=Xn(7,o,h,l),o.lanes=u,o}function Tf(o,l,u){return o=Xn(6,o,null,l),o.lanes=u,o}function Of(o,l,u){return l=Xn(4,o.children!==null?o.children:[],o.key,l),l.lanes=u,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var Ya=[],Ka=0,ec=null,tc=0,sr=[],lr=0,ia=null,Yr=1,Kr="";function aa(o,l){Ya[Ka++]=tc,Ya[Ka++]=ec,ec=o,tc=l}function kp(o,l,u){sr[lr++]=Yr,sr[lr++]=Kr,sr[lr++]=ia,ia=o;var h=Yr;o=Kr;var m=32-Ye(h)-1;h&=~(1<<m),u+=1;var w=32-Ye(l)+m;if(30<w){var A=m-m%5;w=(h&(1<<A)-1).toString(32),h>>=A,m-=A,Yr=1<<32-Ye(l)+m|u<<m|h,Kr=w+o}else Yr=1<<w|u<<m|h,Kr=o}function Rf(o){o.return!==null&&(aa(o,1),kp(o,1,0))}function Df(o){for(;o===ec;)ec=Ya[--Ka],Ya[Ka]=null,tc=Ya[--Ka],Ya[Ka]=null;for(;o===ia;)ia=sr[--lr],sr[lr]=null,Kr=sr[--lr],sr[lr]=null,Yr=sr[--lr],sr[lr]=null}var In=null,Bt=null,at=!1,oa=null,Ir=!1,Nf=Error(r(519));function sa(o){var l=Error(r(418,""));throw ps(ar(l,o)),Nf}function Mp(o){var l=o.stateNode,u=o.type,h=o.memoizedProps;switch(l[An]=o,l[Ln]=h,u){case"dialog":qe("cancel",l),qe("close",l);break;case"iframe":case"object":case"embed":qe("load",l);break;case"video":case"audio":for(u=0;u<Ls.length;u++)qe(Ls[u],l);break;case"source":qe("error",l);break;case"img":case"image":case"link":qe("error",l),qe("load",l);break;case"details":qe("toggle",l);break;case"input":qe("invalid",l),Y1(l,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),zl(l);break;case"select":qe("invalid",l);break;case"textarea":qe("invalid",l),Z1(l,h.value,h.defaultValue,h.children),zl(l)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||h.suppressHydrationWarning===!0||Zv(l.textContent,u)?(h.popover!=null&&(qe("beforetoggle",l),qe("toggle",l)),h.onScroll!=null&&qe("scroll",l),h.onScrollEnd!=null&&qe("scrollend",l),h.onClick!=null&&(l.onclick=jc),l=!0):l=!1,l||sa(o)}function jp(o){for(In=o.return;In;)switch(In.tag){case 5:case 13:Ir=!1;return;case 27:case 3:Ir=!0;return;default:In=In.return}}function ds(o){if(o!==In)return!1;if(!at)return jp(o),at=!0,!1;var l=o.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=o.type,u=!(u!=="form"&&u!=="button")||Wd(o.type,o.memoizedProps)),u=!u),u&&Bt&&sa(o),jp(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(u=o.data,u==="/$"){if(l===0){Bt=_r(o.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;o=o.nextSibling}Bt=null}}else l===27?(l=Bt,ki(o.type)?(o=Zd,Zd=null,Bt=o):Bt=l):Bt=In?_r(o.stateNode.nextSibling):null;return!0}function hs(){Bt=In=null,at=!1}function Pp(){var o=oa;return o!==null&&(Vn===null?Vn=o:Vn.push.apply(Vn,o),oa=null),o}function ps(o){oa===null?oa=[o]:oa.push(o)}var If=I(null),la=null,Zr=null;function yi(o,l,u){q(If,l._currentValue),l._currentValue=u}function Qr(o){o._currentValue=If.current,P(If)}function kf(o,l,u){for(;o!==null;){var h=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,h!==null&&(h.childLanes|=l)):h!==null&&(h.childLanes&l)!==l&&(h.childLanes|=l),o===u)break;o=o.return}}function Mf(o,l,u,h){var m=o.child;for(m!==null&&(m.return=o);m!==null;){var w=m.dependencies;if(w!==null){var A=m.child;w=w.firstContext;e:for(;w!==null;){var N=w;w=m;for(var B=0;B<l.length;B++)if(N.context===l[B]){w.lanes|=u,N=w.alternate,N!==null&&(N.lanes|=u),kf(w.return,u,o),h||(A=null);break e}w=N.next}}else if(m.tag===18){if(A=m.return,A===null)throw Error(r(341));A.lanes|=u,w=A.alternate,w!==null&&(w.lanes|=u),kf(A,u,o),A=null}else A=m.child;if(A!==null)A.return=m;else for(A=m;A!==null;){if(A===o){A=null;break}if(m=A.sibling,m!==null){m.return=A.return,A=m;break}A=A.return}m=A}}function gs(o,l,u,h){o=null;for(var m=l,w=!1;m!==null;){if(!w){if((m.flags&524288)!==0)w=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var A=m.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var N=m.type;Wn(m.pendingProps.value,A.value)||(o!==null?o.push(N):o=[N])}}else if(m===pe.current){if(A=m.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(o!==null?o.push(Gs):o=[Gs])}m=m.return}o!==null&&Mf(l,o,u,h),l.flags|=262144}function nc(o){for(o=o.firstContext;o!==null;){if(!Wn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ca(o){la=o,Zr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Cn(o){return Bp(la,o)}function rc(o,l){return la===null&&ca(o),Bp(o,l)}function Bp(o,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},Zr===null){if(o===null)throw Error(r(308));Zr=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else Zr=Zr.next=l;return u}var Z_=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(u,h){o.push(h)}};this.abort=function(){l.aborted=!0,o.forEach(function(u){return u()})}},Q_=n.unstable_scheduleCallback,J_=n.unstable_NormalPriority,Qt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jf(){return{controller:new Z_,data:new Map,refCount:0}}function vs(o){o.refCount--,o.refCount===0&&Q_(J_,function(){o.controller.abort()})}var ms=null,Pf=0,Za=0,Qa=null;function e3(o,l){if(ms===null){var u=ms=[];Pf=0,Za=Ld(),Qa={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Pf++,l.then(Lp,Lp),l}function Lp(){if(--Pf===0&&ms!==null){Qa!==null&&(Qa.status="fulfilled");var o=ms;ms=null,Za=0,Qa=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function t3(o,l){var u=[],h={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return o.then(function(){h.status="fulfilled",h.value=l;for(var m=0;m<u.length;m++)(0,u[m])(l)},function(m){for(h.status="rejected",h.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),h}var Fp=U.S;U.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&e3(o,l),Fp!==null&&Fp(o,l)};var ua=I(null);function Bf(){var o=ua.current;return o!==null?o:bt.pooledCache}function ic(o,l){l===null?q(ua,ua.current):q(ua,l.pool)}function Up(){var o=Bf();return o===null?null:{parent:Qt._currentValue,pool:o}}var ys=Error(r(460)),zp=Error(r(474)),ac=Error(r(542)),Lf={then:function(){}};function Vp(o){return o=o.status,o==="fulfilled"||o==="rejected"}function oc(){}function Hp(o,l,u){switch(u=o[u],u===void 0?o.push(l):u!==l&&(l.then(oc,oc),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,$p(o),o;default:if(typeof l.status=="string")l.then(oc,oc);else{if(o=bt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(h){if(l.status==="pending"){var m=l;m.status="fulfilled",m.value=h}},function(h){if(l.status==="pending"){var m=l;m.status="rejected",m.reason=h}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,$p(o),o}throw xs=l,ys}}var xs=null;function Gp(){if(xs===null)throw Error(r(459));var o=xs;return xs=null,o}function $p(o){if(o===ys||o===ac)throw Error(r(483))}var xi=!1;function Ff(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function wi(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function bi(o,l,u){var h=o.updateQueue;if(h===null)return null;if(h=h.shared,(ut&2)!==0){var m=h.pending;return m===null?l.next=l:(l.next=m.next,m.next=l),h.pending=l,l=Ql(o),Np(o,null,u),l}return Zl(o,h,l,u),Ql(o)}function ws(o,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var h=l.lanes;h&=o.pendingLanes,u|=h,l.lanes=u,L1(o,u)}}function zf(o,l){var u=o.updateQueue,h=o.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var m=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?m=w=A:w=w.next=A,u=u.next}while(u!==null);w===null?m=w=l:w=w.next=l}else m=w=l;u={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=l:o.next=l,u.lastBaseUpdate=l}var Vf=!1;function bs(){if(Vf){var o=Qa;if(o!==null)throw o}}function _s(o,l,u,h){Vf=!1;var m=o.updateQueue;xi=!1;var w=m.firstBaseUpdate,A=m.lastBaseUpdate,N=m.shared.pending;if(N!==null){m.shared.pending=null;var B=N,X=B.next;B.next=null,A===null?w=X:A.next=X,A=B;var re=o.alternate;re!==null&&(re=re.updateQueue,N=re.lastBaseUpdate,N!==A&&(N===null?re.firstBaseUpdate=X:N.next=X,re.lastBaseUpdate=B))}if(w!==null){var ce=m.baseState;A=0,re=X=B=null,N=w;do{var Z=N.lane&-536870913,Q=Z!==N.lane;if(Q?(Ke&Z)===Z:(h&Z)===Z){Z!==0&&Z===Za&&(Vf=!0),re!==null&&(re=re.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Me=o,Ie=N;Z=l;var mt=u;switch(Ie.tag){case 1:if(Me=Ie.payload,typeof Me=="function"){ce=Me.call(mt,ce,Z);break e}ce=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Ie.payload,Z=typeof Me=="function"?Me.call(mt,ce,Z):Me,Z==null)break e;ce=p({},ce,Z);break e;case 2:xi=!0}}Z=N.callback,Z!==null&&(o.flags|=64,Q&&(o.flags|=8192),Q=m.callbacks,Q===null?m.callbacks=[Z]:Q.push(Z))}else Q={lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},re===null?(X=re=Q,B=ce):re=re.next=Q,A|=Z;if(N=N.next,N===null){if(N=m.shared.pending,N===null)break;Q=N,N=Q.next,Q.next=null,m.lastBaseUpdate=Q,m.shared.pending=null}}while(!0);re===null&&(B=ce),m.baseState=B,m.firstBaseUpdate=X,m.lastBaseUpdate=re,w===null&&(m.shared.lanes=0),Ri|=A,o.lanes=A,o.memoizedState=ce}}function qp(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function Wp(o,l){var u=o.callbacks;if(u!==null)for(o.callbacks=null,o=0;o<u.length;o++)qp(u[o],l)}var Ja=I(null),sc=I(0);function Xp(o,l){o=ai,q(sc,o),q(Ja,l),ai=o|l.baseLanes}function Hf(){q(sc,ai),q(Ja,Ja.current)}function Gf(){ai=sc.current,P(Ja),P(sc)}var _i=0,Ue=null,gt=null,qt=null,lc=!1,eo=!1,fa=!1,cc=0,Ss=0,to=null,n3=0;function Ut(){throw Error(r(321))}function $f(o,l){if(l===null)return!1;for(var u=0;u<l.length&&u<o.length;u++)if(!Wn(o[u],l[u]))return!1;return!0}function qf(o,l,u,h,m,w){return _i=w,Ue=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,U.H=o===null||o.memoizedState===null?Ng:Ig,fa=!1,w=u(h,m),fa=!1,eo&&(w=Kp(l,u,h,m)),Yp(o),w}function Yp(o){U.H=gc;var l=gt!==null&&gt.next!==null;if(_i=0,qt=gt=Ue=null,lc=!1,Ss=0,to=null,l)throw Error(r(300));o===null||un||(o=o.dependencies,o!==null&&nc(o)&&(un=!0))}function Kp(o,l,u,h){Ue=o;var m=0;do{if(eo&&(to=null),Ss=0,eo=!1,25<=m)throw Error(r(301));if(m+=1,qt=gt=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}U.H=c3,w=l(u,h)}while(eo);return w}function r3(){var o=U.H,l=o.useState()[0];return l=typeof l.then=="function"?Es(l):l,o=o.useState()[0],(gt!==null?gt.memoizedState:null)!==o&&(Ue.flags|=1024),l}function Wf(){var o=cc!==0;return cc=0,o}function Xf(o,l,u){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~u}function Yf(o){if(lc){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}lc=!1}_i=0,qt=gt=Ue=null,eo=!1,Ss=cc=0,to=null}function Un(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Ue.memoizedState=qt=o:qt=qt.next=o,qt}function Wt(){if(gt===null){var o=Ue.alternate;o=o!==null?o.memoizedState:null}else o=gt.next;var l=qt===null?Ue.memoizedState:qt.next;if(l!==null)qt=l,gt=o;else{if(o===null)throw Ue.alternate===null?Error(r(467)):Error(r(310));gt=o,o={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},qt===null?Ue.memoizedState=qt=o:qt=qt.next=o}return qt}function Kf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Es(o){var l=Ss;return Ss+=1,to===null&&(to=[]),o=Hp(to,o,l),l=Ue,(qt===null?l.memoizedState:qt.next)===null&&(l=l.alternate,U.H=l===null||l.memoizedState===null?Ng:Ig),o}function uc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Es(o);if(o.$$typeof===C)return Cn(o)}throw Error(r(438,String(o)))}function Zf(o){var l=null,u=Ue.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var h=Ue.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(l={data:h.data.map(function(m){return m.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Kf(),Ue.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(o),h=0;h<o;h++)u[h]=ne;return l.index++,u}function Jr(o,l){return typeof l=="function"?l(o):l}function fc(o){var l=Wt();return Qf(l,gt,o)}function Qf(o,l,u){var h=o.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var m=o.baseQueue,w=h.pending;if(w!==null){if(m!==null){var A=m.next;m.next=w.next,w.next=A}l.baseQueue=m=w,h.pending=null}if(w=o.baseState,m===null)o.memoizedState=w;else{l=m.next;var N=A=null,B=null,X=l,re=!1;do{var ce=X.lane&-536870913;if(ce!==X.lane?(Ke&ce)===ce:(_i&ce)===ce){var Z=X.revertLane;if(Z===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ce===Za&&(re=!0);else if((_i&Z)===Z){X=X.next,Z===Za&&(re=!0);continue}else ce={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(N=B=ce,A=w):B=B.next=ce,Ue.lanes|=Z,Ri|=Z;ce=X.action,fa&&u(w,ce),w=X.hasEagerState?X.eagerState:u(w,ce)}else Z={lane:ce,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(N=B=Z,A=w):B=B.next=Z,Ue.lanes|=ce,Ri|=ce;X=X.next}while(X!==null&&X!==l);if(B===null?A=w:B.next=N,!Wn(w,o.memoizedState)&&(un=!0,re&&(u=Qa,u!==null)))throw u;o.memoizedState=w,o.baseState=A,o.baseQueue=B,h.lastRenderedState=w}return m===null&&(h.lanes=0),[o.memoizedState,h.dispatch]}function Jf(o){var l=Wt(),u=l.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var h=u.dispatch,m=u.pending,w=l.memoizedState;if(m!==null){u.pending=null;var A=m=m.next;do w=o(w,A.action),A=A.next;while(A!==m);Wn(w,l.memoizedState)||(un=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),u.lastRenderedState=w}return[w,h]}function Zp(o,l,u){var h=Ue,m=Wt(),w=at;if(w){if(u===void 0)throw Error(r(407));u=u()}else u=l();var A=!Wn((gt||m).memoizedState,u);A&&(m.memoizedState=u,un=!0),m=m.queue;var N=eg.bind(null,h,m,o);if(As(2048,8,N,[o]),m.getSnapshot!==l||A||qt!==null&&qt.memoizedState.tag&1){if(h.flags|=2048,no(9,dc(),Jp.bind(null,h,m,u,l),null),bt===null)throw Error(r(349));w||(_i&124)!==0||Qp(h,l,u)}return u}function Qp(o,l,u){o.flags|=16384,o={getSnapshot:l,value:u},l=Ue.updateQueue,l===null?(l=Kf(),Ue.updateQueue=l,l.stores=[o]):(u=l.stores,u===null?l.stores=[o]:u.push(o))}function Jp(o,l,u,h){l.value=u,l.getSnapshot=h,tg(l)&&ng(o)}function eg(o,l,u){return u(function(){tg(l)&&ng(o)})}function tg(o){var l=o.getSnapshot;o=o.value;try{var u=l();return!Wn(o,u)}catch{return!0}}function ng(o){var l=Wa(o,2);l!==null&&Jn(l,o,2)}function ed(o){var l=Un();if(typeof o=="function"){var u=o;if(o=u(),fa){it(!0);try{u()}finally{it(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:o},l}function rg(o,l,u,h){return o.baseState=u,Qf(o,gt,typeof h=="function"?h:Jr)}function i3(o,l,u,h,m){if(pc(o))throw Error(r(485));if(o=l.action,o!==null){var w={payload:m,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){w.listeners.push(A)}};U.T!==null?u(!0):w.isTransition=!1,h(w),u=l.pending,u===null?(w.next=l.pending=w,ig(l,w)):(w.next=u.next,l.pending=u.next=w)}}function ig(o,l){var u=l.action,h=l.payload,m=o.state;if(l.isTransition){var w=U.T,A={};U.T=A;try{var N=u(m,h),B=U.S;B!==null&&B(A,N),ag(o,l,N)}catch(X){td(o,l,X)}finally{U.T=w}}else try{w=u(m,h),ag(o,l,w)}catch(X){td(o,l,X)}}function ag(o,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){og(o,l,h)},function(h){return td(o,l,h)}):og(o,l,u)}function og(o,l,u){l.status="fulfilled",l.value=u,sg(l),o.state=u,l=o.pending,l!==null&&(u=l.next,u===l?o.pending=null:(u=u.next,l.next=u,ig(o,u)))}function td(o,l,u){var h=o.pending;if(o.pending=null,h!==null){h=h.next;do l.status="rejected",l.reason=u,sg(l),l=l.next;while(l!==h)}o.action=null}function sg(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function lg(o,l){return l}function cg(o,l){if(at){var u=bt.formState;if(u!==null){e:{var h=Ue;if(at){if(Bt){t:{for(var m=Bt,w=Ir;m.nodeType!==8;){if(!w){m=null;break t}if(m=_r(m.nextSibling),m===null){m=null;break t}}w=m.data,m=w==="F!"||w==="F"?m:null}if(m){Bt=_r(m.nextSibling),h=m.data==="F!";break e}}sa(h)}h=!1}h&&(l=u[0])}}return u=Un(),u.memoizedState=u.baseState=l,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lg,lastRenderedState:l},u.queue=h,u=Og.bind(null,Ue,h),h.dispatch=u,h=ed(!1),w=od.bind(null,Ue,!1,h.queue),h=Un(),m={state:l,dispatch:null,action:o,pending:null},h.queue=m,u=i3.bind(null,Ue,m,w,u),m.dispatch=u,h.memoizedState=o,[l,u,!1]}function ug(o){var l=Wt();return fg(l,gt,o)}function fg(o,l,u){if(l=Qf(o,l,lg)[0],o=fc(Jr)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var h=Es(l)}catch(A){throw A===ys?ac:A}else h=l;l=Wt();var m=l.queue,w=m.dispatch;return u!==l.memoizedState&&(Ue.flags|=2048,no(9,dc(),a3.bind(null,m,u),null)),[h,w,o]}function a3(o,l){o.action=l}function dg(o){var l=Wt(),u=gt;if(u!==null)return fg(l,u,o);Wt(),l=l.memoizedState,u=Wt();var h=u.queue.dispatch;return u.memoizedState=o,[l,h,!1]}function no(o,l,u,h){return o={tag:o,create:u,deps:h,inst:l,next:null},l=Ue.updateQueue,l===null&&(l=Kf(),Ue.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=o.next=o:(h=u.next,u.next=o,o.next=h,l.lastEffect=o),o}function dc(){return{destroy:void 0,resource:void 0}}function hg(){return Wt().memoizedState}function hc(o,l,u,h){var m=Un();h=h===void 0?null:h,Ue.flags|=o,m.memoizedState=no(1|l,dc(),u,h)}function As(o,l,u,h){var m=Wt();h=h===void 0?null:h;var w=m.memoizedState.inst;gt!==null&&h!==null&&$f(h,gt.memoizedState.deps)?m.memoizedState=no(l,w,u,h):(Ue.flags|=o,m.memoizedState=no(1|l,w,u,h))}function pg(o,l){hc(8390656,8,o,l)}function gg(o,l){As(2048,8,o,l)}function vg(o,l){return As(4,2,o,l)}function mg(o,l){return As(4,4,o,l)}function yg(o,l){if(typeof l=="function"){o=o();var u=l(o);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function xg(o,l,u){u=u!=null?u.concat([o]):null,As(4,4,yg.bind(null,l,o),u)}function nd(){}function wg(o,l){var u=Wt();l=l===void 0?null:l;var h=u.memoizedState;return l!==null&&$f(l,h[1])?h[0]:(u.memoizedState=[o,l],o)}function bg(o,l){var u=Wt();l=l===void 0?null:l;var h=u.memoizedState;if(l!==null&&$f(l,h[1]))return h[0];if(h=o(),fa){it(!0);try{o()}finally{it(!1)}}return u.memoizedState=[h,l],h}function rd(o,l,u){return u===void 0||(_i&1073741824)!==0?o.memoizedState=l:(o.memoizedState=u,o=Ev(),Ue.lanes|=o,Ri|=o,u)}function _g(o,l,u,h){return Wn(u,l)?u:Ja.current!==null?(o=rd(o,u,h),Wn(o,l)||(un=!0),o):(_i&42)===0?(un=!0,o.memoizedState=u):(o=Ev(),Ue.lanes|=o,Ri|=o,l)}function Sg(o,l,u,h,m){var w=F.p;F.p=w!==0&&8>w?w:8;var A=U.T,N={};U.T=N,od(o,!1,l,u);try{var B=m(),X=U.S;if(X!==null&&X(N,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var re=t3(B,h);Cs(o,l,re,Qn(o))}else Cs(o,l,h,Qn(o))}catch(ce){Cs(o,l,{then:function(){},status:"rejected",reason:ce},Qn())}finally{F.p=w,U.T=A}}function o3(){}function id(o,l,u,h){if(o.tag!==5)throw Error(r(476));var m=Eg(o).queue;Sg(o,m,l,K,u===null?o3:function(){return Ag(o),u(h)})}function Eg(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:K},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:u},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function Ag(o){var l=Eg(o).next.queue;Cs(o,l,{},Qn())}function ad(){return Cn(Gs)}function Cg(){return Wt().memoizedState}function Tg(){return Wt().memoizedState}function s3(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var u=Qn();o=wi(u);var h=bi(l,o,u);h!==null&&(Jn(h,l,u),ws(h,l,u)),l={cache:jf()},o.payload=l;return}l=l.return}}function l3(o,l,u){var h=Qn();u={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},pc(o)?Rg(l,u):(u=Af(o,l,u,h),u!==null&&(Jn(u,o,h),Dg(u,l,h)))}function Og(o,l,u){var h=Qn();Cs(o,l,u,h)}function Cs(o,l,u,h){var m={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(pc(o))Rg(l,m);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var A=l.lastRenderedState,N=w(A,u);if(m.hasEagerState=!0,m.eagerState=N,Wn(N,A))return Zl(o,l,m,0),bt===null&&Kl(),!1}catch{}finally{}if(u=Af(o,l,m,h),u!==null)return Jn(u,o,h),Dg(u,l,h),!0}return!1}function od(o,l,u,h){if(h={lane:2,revertLane:Ld(),action:h,hasEagerState:!1,eagerState:null,next:null},pc(o)){if(l)throw Error(r(479))}else l=Af(o,u,h,2),l!==null&&Jn(l,o,2)}function pc(o){var l=o.alternate;return o===Ue||l!==null&&l===Ue}function Rg(o,l){eo=lc=!0;var u=o.pending;u===null?l.next=l:(l.next=u.next,u.next=l),o.pending=l}function Dg(o,l,u){if((u&4194048)!==0){var h=l.lanes;h&=o.pendingLanes,u|=h,l.lanes=u,L1(o,u)}}var gc={readContext:Cn,use:uc,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut},Ng={readContext:Cn,use:uc,useCallback:function(o,l){return Un().memoizedState=[o,l===void 0?null:l],o},useContext:Cn,useEffect:pg,useImperativeHandle:function(o,l,u){u=u!=null?u.concat([o]):null,hc(4194308,4,yg.bind(null,l,o),u)},useLayoutEffect:function(o,l){return hc(4194308,4,o,l)},useInsertionEffect:function(o,l){hc(4,2,o,l)},useMemo:function(o,l){var u=Un();l=l===void 0?null:l;var h=o();if(fa){it(!0);try{o()}finally{it(!1)}}return u.memoizedState=[h,l],h},useReducer:function(o,l,u){var h=Un();if(u!==void 0){var m=u(l);if(fa){it(!0);try{u(l)}finally{it(!1)}}}else m=l;return h.memoizedState=h.baseState=m,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:m},h.queue=o,o=o.dispatch=l3.bind(null,Ue,o),[h.memoizedState,o]},useRef:function(o){var l=Un();return o={current:o},l.memoizedState=o},useState:function(o){o=ed(o);var l=o.queue,u=Og.bind(null,Ue,l);return l.dispatch=u,[o.memoizedState,u]},useDebugValue:nd,useDeferredValue:function(o,l){var u=Un();return rd(u,o,l)},useTransition:function(){var o=ed(!1);return o=Sg.bind(null,Ue,o.queue,!0,!1),Un().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,u){var h=Ue,m=Un();if(at){if(u===void 0)throw Error(r(407));u=u()}else{if(u=l(),bt===null)throw Error(r(349));(Ke&124)!==0||Qp(h,l,u)}m.memoizedState=u;var w={value:u,getSnapshot:l};return m.queue=w,pg(eg.bind(null,h,w,o),[o]),h.flags|=2048,no(9,dc(),Jp.bind(null,h,w,u,l),null),u},useId:function(){var o=Un(),l=bt.identifierPrefix;if(at){var u=Kr,h=Yr;u=(h&~(1<<32-Ye(h)-1)).toString(32)+u,l="«"+l+"R"+u,u=cc++,0<u&&(l+="H"+u.toString(32)),l+="»"}else u=n3++,l="«"+l+"r"+u.toString(32)+"»";return o.memoizedState=l},useHostTransitionStatus:ad,useFormState:cg,useActionState:cg,useOptimistic:function(o){var l=Un();l.memoizedState=l.baseState=o;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=od.bind(null,Ue,!0,u),u.dispatch=l,[o,l]},useMemoCache:Zf,useCacheRefresh:function(){return Un().memoizedState=s3.bind(null,Ue)}},Ig={readContext:Cn,use:uc,useCallback:wg,useContext:Cn,useEffect:gg,useImperativeHandle:xg,useInsertionEffect:vg,useLayoutEffect:mg,useMemo:bg,useReducer:fc,useRef:hg,useState:function(){return fc(Jr)},useDebugValue:nd,useDeferredValue:function(o,l){var u=Wt();return _g(u,gt.memoizedState,o,l)},useTransition:function(){var o=fc(Jr)[0],l=Wt().memoizedState;return[typeof o=="boolean"?o:Es(o),l]},useSyncExternalStore:Zp,useId:Cg,useHostTransitionStatus:ad,useFormState:ug,useActionState:ug,useOptimistic:function(o,l){var u=Wt();return rg(u,gt,o,l)},useMemoCache:Zf,useCacheRefresh:Tg},c3={readContext:Cn,use:uc,useCallback:wg,useContext:Cn,useEffect:gg,useImperativeHandle:xg,useInsertionEffect:vg,useLayoutEffect:mg,useMemo:bg,useReducer:Jf,useRef:hg,useState:function(){return Jf(Jr)},useDebugValue:nd,useDeferredValue:function(o,l){var u=Wt();return gt===null?rd(u,o,l):_g(u,gt.memoizedState,o,l)},useTransition:function(){var o=Jf(Jr)[0],l=Wt().memoizedState;return[typeof o=="boolean"?o:Es(o),l]},useSyncExternalStore:Zp,useId:Cg,useHostTransitionStatus:ad,useFormState:dg,useActionState:dg,useOptimistic:function(o,l){var u=Wt();return gt!==null?rg(u,gt,o,l):(u.baseState=o,[o,u.queue.dispatch])},useMemoCache:Zf,useCacheRefresh:Tg},ro=null,Ts=0;function vc(o){var l=Ts;return Ts+=1,ro===null&&(ro=[]),Hp(ro,o,l)}function Os(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function mc(o,l){throw l.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function kg(o){var l=o._init;return l(o._payload)}function Mg(o){function l(G,z){if(o){var W=G.deletions;W===null?(G.deletions=[z],G.flags|=16):W.push(z)}}function u(G,z){if(!o)return null;for(;z!==null;)l(G,z),z=z.sibling;return null}function h(G){for(var z=new Map;G!==null;)G.key!==null?z.set(G.key,G):z.set(G.index,G),G=G.sibling;return z}function m(G,z){return G=Xr(G,z),G.index=0,G.sibling=null,G}function w(G,z,W){return G.index=W,o?(W=G.alternate,W!==null?(W=W.index,W<z?(G.flags|=67108866,z):W):(G.flags|=67108866,z)):(G.flags|=1048576,z)}function A(G){return o&&G.alternate===null&&(G.flags|=67108866),G}function N(G,z,W,oe){return z===null||z.tag!==6?(z=Tf(W,G.mode,oe),z.return=G,z):(z=m(z,W),z.return=G,z)}function B(G,z,W,oe){var _e=W.type;return _e===b?re(G,z,W.props.children,oe,W.key):z!==null&&(z.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===H&&kg(_e)===z.type)?(z=m(z,W.props),Os(z,W),z.return=G,z):(z=Jl(W.type,W.key,W.props,null,G.mode,oe),Os(z,W),z.return=G,z)}function X(G,z,W,oe){return z===null||z.tag!==4||z.stateNode.containerInfo!==W.containerInfo||z.stateNode.implementation!==W.implementation?(z=Of(W,G.mode,oe),z.return=G,z):(z=m(z,W.children||[]),z.return=G,z)}function re(G,z,W,oe,_e){return z===null||z.tag!==7?(z=ra(W,G.mode,oe,_e),z.return=G,z):(z=m(z,W),z.return=G,z)}function ce(G,z,W){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Tf(""+z,G.mode,W),z.return=G,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case y:return W=Jl(z.type,z.key,z.props,null,G.mode,W),Os(W,z),W.return=G,W;case x:return z=Of(z,G.mode,W),z.return=G,z;case H:var oe=z._init;return z=oe(z._payload),ce(G,z,W)}if(Se(z)||le(z))return z=ra(z,G.mode,W,null),z.return=G,z;if(typeof z.then=="function")return ce(G,vc(z),W);if(z.$$typeof===C)return ce(G,rc(G,z),W);mc(G,z)}return null}function Z(G,z,W,oe){var _e=z!==null?z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return _e!==null?null:N(G,z,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case y:return W.key===_e?B(G,z,W,oe):null;case x:return W.key===_e?X(G,z,W,oe):null;case H:return _e=W._init,W=_e(W._payload),Z(G,z,W,oe)}if(Se(W)||le(W))return _e!==null?null:re(G,z,W,oe,null);if(typeof W.then=="function")return Z(G,z,vc(W),oe);if(W.$$typeof===C)return Z(G,z,rc(G,W),oe);mc(G,W)}return null}function Q(G,z,W,oe,_e){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return G=G.get(W)||null,N(z,G,""+oe,_e);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return G=G.get(oe.key===null?W:oe.key)||null,B(z,G,oe,_e);case x:return G=G.get(oe.key===null?W:oe.key)||null,X(z,G,oe,_e);case H:var He=oe._init;return oe=He(oe._payload),Q(G,z,W,oe,_e)}if(Se(oe)||le(oe))return G=G.get(W)||null,re(z,G,oe,_e,null);if(typeof oe.then=="function")return Q(G,z,W,vc(oe),_e);if(oe.$$typeof===C)return Q(G,z,W,rc(z,oe),_e);mc(z,oe)}return null}function Me(G,z,W,oe){for(var _e=null,He=null,Te=z,ke=z=0,dn=null;Te!==null&&ke<W.length;ke++){Te.index>ke?(dn=Te,Te=null):dn=Te.sibling;var tt=Z(G,Te,W[ke],oe);if(tt===null){Te===null&&(Te=dn);break}o&&Te&&tt.alternate===null&&l(G,Te),z=w(tt,z,ke),He===null?_e=tt:He.sibling=tt,He=tt,Te=dn}if(ke===W.length)return u(G,Te),at&&aa(G,ke),_e;if(Te===null){for(;ke<W.length;ke++)Te=ce(G,W[ke],oe),Te!==null&&(z=w(Te,z,ke),He===null?_e=Te:He.sibling=Te,He=Te);return at&&aa(G,ke),_e}for(Te=h(Te);ke<W.length;ke++)dn=Q(Te,G,ke,W[ke],oe),dn!==null&&(o&&dn.alternate!==null&&Te.delete(dn.key===null?ke:dn.key),z=w(dn,z,ke),He===null?_e=dn:He.sibling=dn,He=dn);return o&&Te.forEach(function(Li){return l(G,Li)}),at&&aa(G,ke),_e}function Ie(G,z,W,oe){if(W==null)throw Error(r(151));for(var _e=null,He=null,Te=z,ke=z=0,dn=null,tt=W.next();Te!==null&&!tt.done;ke++,tt=W.next()){Te.index>ke?(dn=Te,Te=null):dn=Te.sibling;var Li=Z(G,Te,tt.value,oe);if(Li===null){Te===null&&(Te=dn);break}o&&Te&&Li.alternate===null&&l(G,Te),z=w(Li,z,ke),He===null?_e=Li:He.sibling=Li,He=Li,Te=dn}if(tt.done)return u(G,Te),at&&aa(G,ke),_e;if(Te===null){for(;!tt.done;ke++,tt=W.next())tt=ce(G,tt.value,oe),tt!==null&&(z=w(tt,z,ke),He===null?_e=tt:He.sibling=tt,He=tt);return at&&aa(G,ke),_e}for(Te=h(Te);!tt.done;ke++,tt=W.next())tt=Q(Te,G,ke,tt.value,oe),tt!==null&&(o&&tt.alternate!==null&&Te.delete(tt.key===null?ke:tt.key),z=w(tt,z,ke),He===null?_e=tt:He.sibling=tt,He=tt);return o&&Te.forEach(function(uS){return l(G,uS)}),at&&aa(G,ke),_e}function mt(G,z,W,oe){if(typeof W=="object"&&W!==null&&W.type===b&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case y:e:{for(var _e=W.key;z!==null;){if(z.key===_e){if(_e=W.type,_e===b){if(z.tag===7){u(G,z.sibling),oe=m(z,W.props.children),oe.return=G,G=oe;break e}}else if(z.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===H&&kg(_e)===z.type){u(G,z.sibling),oe=m(z,W.props),Os(oe,W),oe.return=G,G=oe;break e}u(G,z);break}else l(G,z);z=z.sibling}W.type===b?(oe=ra(W.props.children,G.mode,oe,W.key),oe.return=G,G=oe):(oe=Jl(W.type,W.key,W.props,null,G.mode,oe),Os(oe,W),oe.return=G,G=oe)}return A(G);case x:e:{for(_e=W.key;z!==null;){if(z.key===_e)if(z.tag===4&&z.stateNode.containerInfo===W.containerInfo&&z.stateNode.implementation===W.implementation){u(G,z.sibling),oe=m(z,W.children||[]),oe.return=G,G=oe;break e}else{u(G,z);break}else l(G,z);z=z.sibling}oe=Of(W,G.mode,oe),oe.return=G,G=oe}return A(G);case H:return _e=W._init,W=_e(W._payload),mt(G,z,W,oe)}if(Se(W))return Me(G,z,W,oe);if(le(W)){if(_e=le(W),typeof _e!="function")throw Error(r(150));return W=_e.call(W),Ie(G,z,W,oe)}if(typeof W.then=="function")return mt(G,z,vc(W),oe);if(W.$$typeof===C)return mt(G,z,rc(G,W),oe);mc(G,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,z!==null&&z.tag===6?(u(G,z.sibling),oe=m(z,W),oe.return=G,G=oe):(u(G,z),oe=Tf(W,G.mode,oe),oe.return=G,G=oe),A(G)):u(G,z)}return function(G,z,W,oe){try{Ts=0;var _e=mt(G,z,W,oe);return ro=null,_e}catch(Te){if(Te===ys||Te===ac)throw Te;var He=Xn(29,Te,null,G.mode);return He.lanes=oe,He.return=G,He}finally{}}}var io=Mg(!0),jg=Mg(!1),cr=I(null),kr=null;function Si(o){var l=o.alternate;q(Jt,Jt.current&1),q(cr,o),kr===null&&(l===null||Ja.current!==null||l.memoizedState!==null)&&(kr=o)}function Pg(o){if(o.tag===22){if(q(Jt,Jt.current),q(cr,o),kr===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(kr=o)}}else Ei()}function Ei(){q(Jt,Jt.current),q(cr,cr.current)}function ei(o){P(cr),kr===o&&(kr=null),P(Jt)}var Jt=I(0);function yc(o){for(var l=o;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Kd(u)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function sd(o,l,u,h){l=o.memoizedState,u=u(h,l),u=u==null?l:p({},l,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var ld={enqueueSetState:function(o,l,u){o=o._reactInternals;var h=Qn(),m=wi(h);m.payload=l,u!=null&&(m.callback=u),l=bi(o,m,h),l!==null&&(Jn(l,o,h),ws(l,o,h))},enqueueReplaceState:function(o,l,u){o=o._reactInternals;var h=Qn(),m=wi(h);m.tag=1,m.payload=l,u!=null&&(m.callback=u),l=bi(o,m,h),l!==null&&(Jn(l,o,h),ws(l,o,h))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var u=Qn(),h=wi(u);h.tag=2,l!=null&&(h.callback=l),l=bi(o,h,u),l!==null&&(Jn(l,o,u),ws(l,o,u))}};function Bg(o,l,u,h,m,w,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(h,w,A):l.prototype&&l.prototype.isPureReactComponent?!us(u,h)||!us(m,w):!0}function Lg(o,l,u,h){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,h),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,h),l.state!==o&&ld.enqueueReplaceState(l,l.state,null)}function da(o,l){var u=l;if("ref"in l){u={};for(var h in l)h!=="ref"&&(u[h]=l[h])}if(o=o.defaultProps){u===l&&(u=p({},u));for(var m in o)u[m]===void 0&&(u[m]=o[m])}return u}var xc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Fg(o){xc(o)}function Ug(o){console.error(o)}function zg(o){xc(o)}function wc(o,l){try{var u=o.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(h){setTimeout(function(){throw h})}}function Vg(o,l,u){try{var h=o.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function cd(o,l,u){return u=wi(u),u.tag=3,u.payload={element:null},u.callback=function(){wc(o,l)},u}function Hg(o){return o=wi(o),o.tag=3,o}function Gg(o,l,u,h){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var w=h.value;o.payload=function(){return m(w)},o.callback=function(){Vg(l,u,h)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(o.callback=function(){Vg(l,u,h),typeof m!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var N=h.stack;this.componentDidCatch(h.value,{componentStack:N!==null?N:""})})}function u3(o,l,u,h,m){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(l=u.alternate,l!==null&&gs(l,u,m,!0),u=cr.current,u!==null){switch(u.tag){case 13:return kr===null?kd():u.alternate===null&&Lt===0&&(Lt=3),u.flags&=-257,u.flags|=65536,u.lanes=m,h===Lf?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([h]):l.add(h),jd(o,h,m)),!1;case 22:return u.flags|=65536,h===Lf?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([h]):u.add(h)),jd(o,h,m)),!1}throw Error(r(435,u.tag))}return jd(o,h,m),kd(),!1}if(at)return l=cr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=m,h!==Nf&&(o=Error(r(422),{cause:h}),ps(ar(o,u)))):(h!==Nf&&(l=Error(r(423),{cause:h}),ps(ar(l,u))),o=o.current.alternate,o.flags|=65536,m&=-m,o.lanes|=m,h=ar(h,u),m=cd(o.stateNode,h,m),zf(o,m),Lt!==4&&(Lt=2)),!1;var w=Error(r(520),{cause:h});if(w=ar(w,u),js===null?js=[w]:js.push(w),Lt!==4&&(Lt=2),l===null)return!0;h=ar(h,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,o=m&-m,u.lanes|=o,o=cd(u.stateNode,h,o),zf(u,o),!1;case 1:if(l=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Di===null||!Di.has(w))))return u.flags|=65536,m&=-m,u.lanes|=m,m=Hg(m),Gg(m,o,u,h),zf(u,m),!1}u=u.return}while(u!==null);return!1}var $g=Error(r(461)),un=!1;function yn(o,l,u,h){l.child=o===null?jg(l,null,u,h):io(l,o.child,u,h)}function qg(o,l,u,h,m){u=u.render;var w=l.ref;if("ref"in h){var A={};for(var N in h)N!=="ref"&&(A[N]=h[N])}else A=h;return ca(l),h=qf(o,l,u,A,w,m),N=Wf(),o!==null&&!un?(Xf(o,l,m),ti(o,l,m)):(at&&N&&Rf(l),l.flags|=1,yn(o,l,h,m),l.child)}function Wg(o,l,u,h,m){if(o===null){var w=u.type;return typeof w=="function"&&!Cf(w)&&w.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=w,Xg(o,l,w,h,m)):(o=Jl(u.type,null,h,l,l.mode,m),o.ref=l.ref,o.return=l,l.child=o)}if(w=o.child,!md(o,m)){var A=w.memoizedProps;if(u=u.compare,u=u!==null?u:us,u(A,h)&&o.ref===l.ref)return ti(o,l,m)}return l.flags|=1,o=Xr(w,h),o.ref=l.ref,o.return=l,l.child=o}function Xg(o,l,u,h,m){if(o!==null){var w=o.memoizedProps;if(us(w,h)&&o.ref===l.ref)if(un=!1,l.pendingProps=h=w,md(o,m))(o.flags&131072)!==0&&(un=!0);else return l.lanes=o.lanes,ti(o,l,m)}return ud(o,l,u,h,m)}function Yg(o,l,u){var h=l.pendingProps,m=h.children,w=o!==null?o.memoizedState:null;if(h.mode==="hidden"){if((l.flags&128)!==0){if(h=w!==null?w.baseLanes|u:u,o!==null){for(m=l.child=o.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;l.childLanes=w&~h}else l.childLanes=0,l.child=null;return Kg(o,l,h,u)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&ic(l,w!==null?w.cachePool:null),w!==null?Xp(l,w):Hf(),Pg(l);else return l.lanes=l.childLanes=536870912,Kg(o,l,w!==null?w.baseLanes|u:u,u)}else w!==null?(ic(l,w.cachePool),Xp(l,w),Ei(),l.memoizedState=null):(o!==null&&ic(l,null),Hf(),Ei());return yn(o,l,m,u),l.child}function Kg(o,l,u,h){var m=Bf();return m=m===null?null:{parent:Qt._currentValue,pool:m},l.memoizedState={baseLanes:u,cachePool:m},o!==null&&ic(l,null),Hf(),Pg(l),o!==null&&gs(o,l,h,!0),null}function bc(o,l){var u=l.ref;if(u===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(o===null||o.ref!==u)&&(l.flags|=4194816)}}function ud(o,l,u,h,m){return ca(l),u=qf(o,l,u,h,void 0,m),h=Wf(),o!==null&&!un?(Xf(o,l,m),ti(o,l,m)):(at&&h&&Rf(l),l.flags|=1,yn(o,l,u,m),l.child)}function Zg(o,l,u,h,m,w){return ca(l),l.updateQueue=null,u=Kp(l,h,u,m),Yp(o),h=Wf(),o!==null&&!un?(Xf(o,l,w),ti(o,l,w)):(at&&h&&Rf(l),l.flags|=1,yn(o,l,u,w),l.child)}function Qg(o,l,u,h,m){if(ca(l),l.stateNode===null){var w=Xa,A=u.contextType;typeof A=="object"&&A!==null&&(w=Cn(A)),w=new u(h,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=ld,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=h,w.state=l.memoizedState,w.refs={},Ff(l),A=u.contextType,w.context=typeof A=="object"&&A!==null?Cn(A):Xa,w.state=l.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(sd(l,u,A,h),w.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(A=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),A!==w.state&&ld.enqueueReplaceState(w,w.state,null),_s(l,h,w,m),bs(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),h=!0}else if(o===null){w=l.stateNode;var N=l.memoizedProps,B=da(u,N);w.props=B;var X=w.context,re=u.contextType;A=Xa,typeof re=="object"&&re!==null&&(A=Cn(re));var ce=u.getDerivedStateFromProps;re=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function",N=l.pendingProps!==N,re||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N||X!==A)&&Lg(l,w,h,A),xi=!1;var Z=l.memoizedState;w.state=Z,_s(l,h,w,m),bs(),X=l.memoizedState,N||Z!==X||xi?(typeof ce=="function"&&(sd(l,u,ce,h),X=l.memoizedState),(B=xi||Bg(l,u,B,h,Z,X,A))?(re||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=h,l.memoizedState=X),w.props=h,w.state=X,w.context=A,h=B):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),h=!1)}else{w=l.stateNode,Uf(o,l),A=l.memoizedProps,re=da(u,A),w.props=re,ce=l.pendingProps,Z=w.context,X=u.contextType,B=Xa,typeof X=="object"&&X!==null&&(B=Cn(X)),N=u.getDerivedStateFromProps,(X=typeof N=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==ce||Z!==B)&&Lg(l,w,h,B),xi=!1,Z=l.memoizedState,w.state=Z,_s(l,h,w,m),bs();var Q=l.memoizedState;A!==ce||Z!==Q||xi||o!==null&&o.dependencies!==null&&nc(o.dependencies)?(typeof N=="function"&&(sd(l,u,N,h),Q=l.memoizedState),(re=xi||Bg(l,u,re,h,Z,Q,B)||o!==null&&o.dependencies!==null&&nc(o.dependencies))?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Q,B),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Q,B)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(l.flags|=1024),l.memoizedProps=h,l.memoizedState=Q),w.props=h,w.state=Q,w.context=B,h=re):(typeof w.componentDidUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(l.flags|=1024),h=!1)}return w=h,bc(o,l),h=(l.flags&128)!==0,w||h?(w=l.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,o!==null&&h?(l.child=io(l,o.child,null,m),l.child=io(l,null,u,m)):yn(o,l,u,m),l.memoizedState=w.state,o=l.child):o=ti(o,l,m),o}function Jg(o,l,u,h){return hs(),l.flags|=256,yn(o,l,u,h),l.child}var fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dd(o){return{baseLanes:o,cachePool:Up()}}function hd(o,l,u){return o=o!==null?o.childLanes&~u:0,l&&(o|=ur),o}function ev(o,l,u){var h=l.pendingProps,m=!1,w=(l.flags&128)!==0,A;if((A=w)||(A=o!==null&&o.memoizedState===null?!1:(Jt.current&2)!==0),A&&(m=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,o===null){if(at){if(m?Si(l):Ei(),at){var N=Bt,B;if(B=N){e:{for(B=N,N=Ir;B.nodeType!==8;){if(!N){N=null;break e}if(B=_r(B.nextSibling),B===null){N=null;break e}}N=B}N!==null?(l.memoizedState={dehydrated:N,treeContext:ia!==null?{id:Yr,overflow:Kr}:null,retryLane:536870912,hydrationErrors:null},B=Xn(18,null,null,0),B.stateNode=N,B.return=l,l.child=B,In=l,Bt=null,B=!0):B=!1}B||sa(l)}if(N=l.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Kd(N)?l.lanes=32:l.lanes=536870912,null;ei(l)}return N=h.children,h=h.fallback,m?(Ei(),m=l.mode,N=_c({mode:"hidden",children:N},m),h=ra(h,m,u,null),N.return=l,h.return=l,N.sibling=h,l.child=N,m=l.child,m.memoizedState=dd(u),m.childLanes=hd(o,A,u),l.memoizedState=fd,h):(Si(l),pd(l,N))}if(B=o.memoizedState,B!==null&&(N=B.dehydrated,N!==null)){if(w)l.flags&256?(Si(l),l.flags&=-257,l=gd(o,l,u)):l.memoizedState!==null?(Ei(),l.child=o.child,l.flags|=128,l=null):(Ei(),m=h.fallback,N=l.mode,h=_c({mode:"visible",children:h.children},N),m=ra(m,N,u,null),m.flags|=2,h.return=l,m.return=l,h.sibling=m,l.child=h,io(l,o.child,null,u),h=l.child,h.memoizedState=dd(u),h.childLanes=hd(o,A,u),l.memoizedState=fd,l=m);else if(Si(l),Kd(N)){if(A=N.nextSibling&&N.nextSibling.dataset,A)var X=A.dgst;A=X,h=Error(r(419)),h.stack="",h.digest=A,ps({value:h,source:null,stack:null}),l=gd(o,l,u)}else if(un||gs(o,l,u,!1),A=(u&o.childLanes)!==0,un||A){if(A=bt,A!==null&&(h=u&-u,h=(h&42)!==0?1:Ku(h),h=(h&(A.suspendedLanes|u))!==0?0:h,h!==0&&h!==B.retryLane))throw B.retryLane=h,Wa(o,h),Jn(A,o,h),$g;N.data==="$?"||kd(),l=gd(o,l,u)}else N.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=B.treeContext,Bt=_r(N.nextSibling),In=l,at=!0,oa=null,Ir=!1,o!==null&&(sr[lr++]=Yr,sr[lr++]=Kr,sr[lr++]=ia,Yr=o.id,Kr=o.overflow,ia=l),l=pd(l,h.children),l.flags|=4096);return l}return m?(Ei(),m=h.fallback,N=l.mode,B=o.child,X=B.sibling,h=Xr(B,{mode:"hidden",children:h.children}),h.subtreeFlags=B.subtreeFlags&65011712,X!==null?m=Xr(X,m):(m=ra(m,N,u,null),m.flags|=2),m.return=l,h.return=l,h.sibling=m,l.child=h,h=m,m=l.child,N=o.child.memoizedState,N===null?N=dd(u):(B=N.cachePool,B!==null?(X=Qt._currentValue,B=B.parent!==X?{parent:X,pool:X}:B):B=Up(),N={baseLanes:N.baseLanes|u,cachePool:B}),m.memoizedState=N,m.childLanes=hd(o,A,u),l.memoizedState=fd,h):(Si(l),u=o.child,o=u.sibling,u=Xr(u,{mode:"visible",children:h.children}),u.return=l,u.sibling=null,o!==null&&(A=l.deletions,A===null?(l.deletions=[o],l.flags|=16):A.push(o)),l.child=u,l.memoizedState=null,u)}function pd(o,l){return l=_c({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function _c(o,l){return o=Xn(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function gd(o,l,u){return io(l,o.child,null,u),o=pd(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function tv(o,l,u){o.lanes|=l;var h=o.alternate;h!==null&&(h.lanes|=l),kf(o.return,l,u)}function vd(o,l,u,h,m){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:m}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=h,w.tail=u,w.tailMode=m)}function nv(o,l,u){var h=l.pendingProps,m=h.revealOrder,w=h.tail;if(yn(o,l,h.children,u),h=Jt.current,(h&2)!==0)h=h&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&tv(o,u,l);else if(o.tag===19)tv(o,u,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}h&=1}switch(q(Jt,h),m){case"forwards":for(u=l.child,m=null;u!==null;)o=u.alternate,o!==null&&yc(o)===null&&(m=u),u=u.sibling;u=m,u===null?(m=l.child,l.child=null):(m=u.sibling,u.sibling=null),vd(l,!1,m,u,w);break;case"backwards":for(u=null,m=l.child,l.child=null;m!==null;){if(o=m.alternate,o!==null&&yc(o)===null){l.child=m;break}o=m.sibling,m.sibling=u,u=m,m=o}vd(l,!0,u,null,w);break;case"together":vd(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ti(o,l,u){if(o!==null&&(l.dependencies=o.dependencies),Ri|=l.lanes,(u&l.childLanes)===0)if(o!==null){if(gs(o,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,u=Xr(o,o.pendingProps),l.child=u,u.return=l;o.sibling!==null;)o=o.sibling,u=u.sibling=Xr(o,o.pendingProps),u.return=l;u.sibling=null}return l.child}function md(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&nc(o)))}function f3(o,l,u){switch(l.tag){case 3:ae(l,l.stateNode.containerInfo),yi(l,Qt,o.memoizedState.cache),hs();break;case 27:case 5:Ce(l);break;case 4:ae(l,l.stateNode.containerInfo);break;case 10:yi(l,l.type,l.memoizedProps.value);break;case 13:var h=l.memoizedState;if(h!==null)return h.dehydrated!==null?(Si(l),l.flags|=128,null):(u&l.child.childLanes)!==0?ev(o,l,u):(Si(l),o=ti(o,l,u),o!==null?o.sibling:null);Si(l);break;case 19:var m=(o.flags&128)!==0;if(h=(u&l.childLanes)!==0,h||(gs(o,l,u,!1),h=(u&l.childLanes)!==0),m){if(h)return nv(o,l,u);l.flags|=128}if(m=l.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),q(Jt,Jt.current),h)break;return null;case 22:case 23:return l.lanes=0,Yg(o,l,u);case 24:yi(l,Qt,o.memoizedState.cache)}return ti(o,l,u)}function rv(o,l,u){if(o!==null)if(o.memoizedProps!==l.pendingProps)un=!0;else{if(!md(o,u)&&(l.flags&128)===0)return un=!1,f3(o,l,u);un=(o.flags&131072)!==0}else un=!1,at&&(l.flags&1048576)!==0&&kp(l,tc,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var h=l.elementType,m=h._init;if(h=m(h._payload),l.type=h,typeof h=="function")Cf(h)?(o=da(h,o),l.tag=1,l=Qg(null,l,h,o,u)):(l.tag=0,l=ud(null,l,h,o,u));else{if(h!=null){if(m=h.$$typeof,m===O){l.tag=11,l=qg(null,l,h,o,u);break e}else if(m===L){l.tag=14,l=Wg(null,l,h,o,u);break e}}throw l=de(h)||h,Error(r(306,l,""))}}return l;case 0:return ud(o,l,l.type,l.pendingProps,u);case 1:return h=l.type,m=da(h,l.pendingProps),Qg(o,l,h,m,u);case 3:e:{if(ae(l,l.stateNode.containerInfo),o===null)throw Error(r(387));h=l.pendingProps;var w=l.memoizedState;m=w.element,Uf(o,l),_s(l,h,null,u);var A=l.memoizedState;if(h=A.cache,yi(l,Qt,h),h!==w.cache&&Mf(l,[Qt],u,!0),bs(),h=A.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=Jg(o,l,h,u);break e}else if(h!==m){m=ar(Error(r(424)),l),ps(m),l=Jg(o,l,h,u);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Bt=_r(o.firstChild),In=l,at=!0,oa=null,Ir=!0,u=jg(l,null,h,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(hs(),h===m){l=ti(o,l,u);break e}yn(o,l,h,u)}l=l.child}return l;case 26:return bc(o,l),o===null?(u=sm(l.type,null,l.pendingProps,null))?l.memoizedState=u:at||(u=l.type,o=l.pendingProps,h=Pc(J.current).createElement(u),h[An]=l,h[Ln]=o,wn(h,u,o),cn(h),l.stateNode=h):l.memoizedState=sm(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Ce(l),o===null&&at&&(h=l.stateNode=im(l.type,l.pendingProps,J.current),In=l,Ir=!0,m=Bt,ki(l.type)?(Zd=m,Bt=_r(h.firstChild)):Bt=m),yn(o,l,l.pendingProps.children,u),bc(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&at&&((m=h=Bt)&&(h=F3(h,l.type,l.pendingProps,Ir),h!==null?(l.stateNode=h,In=l,Bt=_r(h.firstChild),Ir=!1,m=!0):m=!1),m||sa(l)),Ce(l),m=l.type,w=l.pendingProps,A=o!==null?o.memoizedProps:null,h=w.children,Wd(m,w)?h=null:A!==null&&Wd(m,A)&&(l.flags|=32),l.memoizedState!==null&&(m=qf(o,l,r3,null,null,u),Gs._currentValue=m),bc(o,l),yn(o,l,h,u),l.child;case 6:return o===null&&at&&((o=u=Bt)&&(u=U3(u,l.pendingProps,Ir),u!==null?(l.stateNode=u,In=l,Bt=null,o=!0):o=!1),o||sa(l)),null;case 13:return ev(o,l,u);case 4:return ae(l,l.stateNode.containerInfo),h=l.pendingProps,o===null?l.child=io(l,null,h,u):yn(o,l,h,u),l.child;case 11:return qg(o,l,l.type,l.pendingProps,u);case 7:return yn(o,l,l.pendingProps,u),l.child;case 8:return yn(o,l,l.pendingProps.children,u),l.child;case 12:return yn(o,l,l.pendingProps.children,u),l.child;case 10:return h=l.pendingProps,yi(l,l.type,h.value),yn(o,l,h.children,u),l.child;case 9:return m=l.type._context,h=l.pendingProps.children,ca(l),m=Cn(m),h=h(m),l.flags|=1,yn(o,l,h,u),l.child;case 14:return Wg(o,l,l.type,l.pendingProps,u);case 15:return Xg(o,l,l.type,l.pendingProps,u);case 19:return nv(o,l,u);case 31:return h=l.pendingProps,u=l.mode,h={mode:h.mode,children:h.children},o===null?(u=_c(h,u),u.ref=l.ref,l.child=u,u.return=l,l=u):(u=Xr(o.child,h),u.ref=l.ref,l.child=u,u.return=l,l=u),l;case 22:return Yg(o,l,u);case 24:return ca(l),h=Cn(Qt),o===null?(m=Bf(),m===null&&(m=bt,w=jf(),m.pooledCache=w,w.refCount++,w!==null&&(m.pooledCacheLanes|=u),m=w),l.memoizedState={parent:h,cache:m},Ff(l),yi(l,Qt,m)):((o.lanes&u)!==0&&(Uf(o,l),_s(l,null,null,u),bs()),m=o.memoizedState,w=l.memoizedState,m.parent!==h?(m={parent:h,cache:h},l.memoizedState=m,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=m),yi(l,Qt,h)):(h=w.cache,yi(l,Qt,h),h!==m.cache&&Mf(l,[Qt],u,!0))),yn(o,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ni(o){o.flags|=4}function iv(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!dm(l)){if(l=cr.current,l!==null&&((Ke&4194048)===Ke?kr!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||l!==kr))throw xs=Lf,zp;o.flags|=8192}}function Sc(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Ll():536870912,o.lanes|=l,lo|=l)}function Rs(o,l){if(!at)switch(o.tailMode){case"hidden":l=o.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:h.sibling=null}}function Nt(o){var l=o.alternate!==null&&o.alternate.child===o.child,u=0,h=0;if(l)for(var m=o.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=o,m=m.sibling;else for(m=o.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=o,m=m.sibling;return o.subtreeFlags|=h,o.childLanes=u,l}function d3(o,l,u){var h=l.pendingProps;switch(Df(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(l),null;case 1:return Nt(l),null;case 3:return u=l.stateNode,h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),Qr(Qt),ye(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(o===null||o.child===null)&&(ds(l)?ni(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Pp())),Nt(l),null;case 26:return u=l.memoizedState,o===null?(ni(l),u!==null?(Nt(l),iv(l,u)):(Nt(l),l.flags&=-16777217)):u?u!==o.memoizedState?(ni(l),Nt(l),iv(l,u)):(Nt(l),l.flags&=-16777217):(o.memoizedProps!==h&&ni(l),Nt(l),l.flags&=-16777217),null;case 27:Xe(l),u=J.current;var m=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==h&&ni(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return Nt(l),null}o=ie.current,ds(l)?Mp(l):(o=im(m,h,u),l.stateNode=o,ni(l))}return Nt(l),null;case 5:if(Xe(l),u=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==h&&ni(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return Nt(l),null}if(o=ie.current,ds(l))Mp(l);else{switch(m=Pc(J.current),o){case 1:o=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:o=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":o=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":o=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":o=m.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?o.multiple=!0:h.size&&(o.size=h.size);break;default:o=typeof h.is=="string"?m.createElement(u,{is:h.is}):m.createElement(u)}}o[An]=l,o[Ln]=h;e:for(m=l.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===l)break e;for(;m.sibling===null;){if(m.return===null||m.return===l)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}l.stateNode=o;e:switch(wn(o,u,h),u){case"button":case"input":case"select":case"textarea":o=!!h.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ni(l)}}return Nt(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==h&&ni(l);else{if(typeof h!="string"&&l.stateNode===null)throw Error(r(166));if(o=J.current,ds(l)){if(o=l.stateNode,u=l.memoizedProps,h=null,m=In,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}o[An]=l,o=!!(o.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||Zv(o.nodeValue,u)),o||sa(l)}else o=Pc(o).createTextNode(h),o[An]=l,l.stateNode=o}return Nt(l),null;case 13:if(h=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(m=ds(l),h!==null&&h.dehydrated!==null){if(o===null){if(!m)throw Error(r(318));if(m=l.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[An]=l}else hs(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Nt(l),m=!1}else m=Pp(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=m),m=!0;if(!m)return l.flags&256?(ei(l),l):(ei(l),null)}if(ei(l),(l.flags&128)!==0)return l.lanes=u,l;if(u=h!==null,o=o!==null&&o.memoizedState!==null,u){h=l.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var w=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==m&&(h.flags|=2048)}return u!==o&&u&&(l.child.flags|=8192),Sc(l,l.updateQueue),Nt(l),null;case 4:return ye(),o===null&&Vd(l.stateNode.containerInfo),Nt(l),null;case 10:return Qr(l.type),Nt(l),null;case 19:if(P(Jt),m=l.memoizedState,m===null)return Nt(l),null;if(h=(l.flags&128)!==0,w=m.rendering,w===null)if(h)Rs(m,!1);else{if(Lt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(w=yc(o),w!==null){for(l.flags|=128,Rs(m,!1),o=w.updateQueue,l.updateQueue=o,Sc(l,o),l.subtreeFlags=0,o=u,u=l.child;u!==null;)Ip(u,o),u=u.sibling;return q(Jt,Jt.current&1|2),l.child}o=o.sibling}m.tail!==null&&rt()>Cc&&(l.flags|=128,h=!0,Rs(m,!1),l.lanes=4194304)}else{if(!h)if(o=yc(w),o!==null){if(l.flags|=128,h=!0,o=o.updateQueue,l.updateQueue=o,Sc(l,o),Rs(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!at)return Nt(l),null}else 2*rt()-m.renderingStartTime>Cc&&u!==536870912&&(l.flags|=128,h=!0,Rs(m,!1),l.lanes=4194304);m.isBackwards?(w.sibling=l.child,l.child=w):(o=m.last,o!==null?o.sibling=w:l.child=w,m.last=w)}return m.tail!==null?(l=m.tail,m.rendering=l,m.tail=l.sibling,m.renderingStartTime=rt(),l.sibling=null,o=Jt.current,q(Jt,h?o&1|2:o&1),l):(Nt(l),null);case 22:case 23:return ei(l),Gf(),h=l.memoizedState!==null,o!==null?o.memoizedState!==null!==h&&(l.flags|=8192):h&&(l.flags|=8192),h?(u&536870912)!==0&&(l.flags&128)===0&&(Nt(l),l.subtreeFlags&6&&(l.flags|=8192)):Nt(l),u=l.updateQueue,u!==null&&Sc(l,u.retryQueue),u=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==u&&(l.flags|=2048),o!==null&&P(ua),null;case 24:return u=null,o!==null&&(u=o.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),Qr(Qt),Nt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function h3(o,l){switch(Df(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Qr(Qt),ye(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return Xe(l),null;case 13:if(ei(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));hs()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return P(Jt),null;case 4:return ye(),null;case 10:return Qr(l.type),null;case 22:case 23:return ei(l),Gf(),o!==null&&P(ua),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Qr(Qt),null;case 25:return null;default:return null}}function av(o,l){switch(Df(l),l.tag){case 3:Qr(Qt),ye();break;case 26:case 27:case 5:Xe(l);break;case 4:ye();break;case 13:ei(l);break;case 19:P(Jt);break;case 10:Qr(l.type);break;case 22:case 23:ei(l),Gf(),o!==null&&P(ua);break;case 24:Qr(Qt)}}function Ds(o,l){try{var u=l.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&o)===o){h=void 0;var w=u.create,A=u.inst;h=w(),A.destroy=h}u=u.next}while(u!==m)}}catch(N){wt(l,l.return,N)}}function Ai(o,l,u){try{var h=l.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var w=m.next;h=w;do{if((h.tag&o)===o){var A=h.inst,N=A.destroy;if(N!==void 0){A.destroy=void 0,m=l;var B=u,X=N;try{X()}catch(re){wt(m,B,re)}}}h=h.next}while(h!==w)}}catch(re){wt(l,l.return,re)}}function ov(o){var l=o.updateQueue;if(l!==null){var u=o.stateNode;try{Wp(l,u)}catch(h){wt(o,o.return,h)}}}function sv(o,l,u){u.props=da(o.type,o.memoizedProps),u.state=o.memoizedState;try{u.componentWillUnmount()}catch(h){wt(o,l,h)}}function Ns(o,l){try{var u=o.ref;if(u!==null){switch(o.tag){case 26:case 27:case 5:var h=o.stateNode;break;case 30:h=o.stateNode;break;default:h=o.stateNode}typeof u=="function"?o.refCleanup=u(h):u.current=h}}catch(m){wt(o,l,m)}}function Mr(o,l){var u=o.ref,h=o.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(m){wt(o,l,m)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){wt(o,l,m)}else u.current=null}function lv(o){var l=o.type,u=o.memoizedProps,h=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(m){wt(o,o.return,m)}}function yd(o,l,u){try{var h=o.stateNode;M3(h,o.type,u,l),h[Ln]=l}catch(m){wt(o,o.return,m)}}function cv(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&ki(o.type)||o.tag===4}function xd(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||cv(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&ki(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function wd(o,l,u){var h=o.tag;if(h===5||h===6)o=o.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(o,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(o),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=jc));else if(h!==4&&(h===27&&ki(o.type)&&(u=o.stateNode,l=null),o=o.child,o!==null))for(wd(o,l,u),o=o.sibling;o!==null;)wd(o,l,u),o=o.sibling}function Ec(o,l,u){var h=o.tag;if(h===5||h===6)o=o.stateNode,l?u.insertBefore(o,l):u.appendChild(o);else if(h!==4&&(h===27&&ki(o.type)&&(u=o.stateNode),o=o.child,o!==null))for(Ec(o,l,u),o=o.sibling;o!==null;)Ec(o,l,u),o=o.sibling}function uv(o){var l=o.stateNode,u=o.memoizedProps;try{for(var h=o.type,m=l.attributes;m.length;)l.removeAttributeNode(m[0]);wn(l,h,u),l[An]=o,l[Ln]=u}catch(w){wt(o,o.return,w)}}var ri=!1,zt=!1,bd=!1,fv=typeof WeakSet=="function"?WeakSet:Set,fn=null;function p3(o,l){if(o=o.containerInfo,$d=Vc,o=_p(o),xf(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var m=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var A=0,N=-1,B=-1,X=0,re=0,ce=o,Z=null;t:for(;;){for(var Q;ce!==u||m!==0&&ce.nodeType!==3||(N=A+m),ce!==w||h!==0&&ce.nodeType!==3||(B=A+h),ce.nodeType===3&&(A+=ce.nodeValue.length),(Q=ce.firstChild)!==null;)Z=ce,ce=Q;for(;;){if(ce===o)break t;if(Z===u&&++X===m&&(N=A),Z===w&&++re===h&&(B=A),(Q=ce.nextSibling)!==null)break;ce=Z,Z=ce.parentNode}ce=Q}u=N===-1||B===-1?null:{start:N,end:B}}else u=null}u=u||{start:0,end:0}}else u=null;for(qd={focusedElem:o,selectionRange:u},Vc=!1,fn=l;fn!==null;)if(l=fn,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,fn=o;else for(;fn!==null;){switch(l=fn,w=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,u=l,m=w.memoizedProps,w=w.memoizedState,h=u.stateNode;try{var Me=da(u.type,m,u.elementType===u.type);o=h.getSnapshotBeforeUpdate(Me,w),h.__reactInternalSnapshotBeforeUpdate=o}catch(Ie){wt(u,u.return,Ie)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,u=o.nodeType,u===9)Yd(o);else if(u===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Yd(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,fn=o;break}fn=l.return}}function dv(o,l,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:Ci(o,u),h&4&&Ds(5,u);break;case 1:if(Ci(o,u),h&4)if(o=u.stateNode,l===null)try{o.componentDidMount()}catch(A){wt(u,u.return,A)}else{var m=da(u.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(m,l,o.__reactInternalSnapshotBeforeUpdate)}catch(A){wt(u,u.return,A)}}h&64&&ov(u),h&512&&Ns(u,u.return);break;case 3:if(Ci(o,u),h&64&&(o=u.updateQueue,o!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{Wp(o,l)}catch(A){wt(u,u.return,A)}}break;case 27:l===null&&h&4&&uv(u);case 26:case 5:Ci(o,u),l===null&&h&4&&lv(u),h&512&&Ns(u,u.return);break;case 12:Ci(o,u);break;case 13:Ci(o,u),h&4&&gv(o,u),h&64&&(o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(u=S3.bind(null,u),z3(o,u))));break;case 22:if(h=u.memoizedState!==null||ri,!h){l=l!==null&&l.memoizedState!==null||zt,m=ri;var w=zt;ri=h,(zt=l)&&!w?Ti(o,u,(u.subtreeFlags&8772)!==0):Ci(o,u),ri=m,zt=w}break;case 30:break;default:Ci(o,u)}}function hv(o){var l=o.alternate;l!==null&&(o.alternate=null,hv(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Ju(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ot=null,zn=!1;function ii(o,l,u){for(u=u.child;u!==null;)pv(o,l,u),u=u.sibling}function pv(o,l,u){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(Oe,u)}catch{}switch(u.tag){case 26:zt||Mr(u,l),ii(o,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:zt||Mr(u,l);var h=Ot,m=zn;ki(u.type)&&(Ot=u.stateNode,zn=!1),ii(o,l,u),Us(u.stateNode),Ot=h,zn=m;break;case 5:zt||Mr(u,l);case 6:if(h=Ot,m=zn,Ot=null,ii(o,l,u),Ot=h,zn=m,Ot!==null)if(zn)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(u.stateNode)}catch(w){wt(u,l,w)}else try{Ot.removeChild(u.stateNode)}catch(w){wt(u,l,w)}break;case 18:Ot!==null&&(zn?(o=Ot,nm(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,u.stateNode),Xs(o)):nm(Ot,u.stateNode));break;case 4:h=Ot,m=zn,Ot=u.stateNode.containerInfo,zn=!0,ii(o,l,u),Ot=h,zn=m;break;case 0:case 11:case 14:case 15:zt||Ai(2,u,l),zt||Ai(4,u,l),ii(o,l,u);break;case 1:zt||(Mr(u,l),h=u.stateNode,typeof h.componentWillUnmount=="function"&&sv(u,l,h)),ii(o,l,u);break;case 21:ii(o,l,u);break;case 22:zt=(h=zt)||u.memoizedState!==null,ii(o,l,u),zt=h;break;default:ii(o,l,u)}}function gv(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Xs(o)}catch(u){wt(l,l.return,u)}}function g3(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new fv),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new fv),l;default:throw Error(r(435,o.tag))}}function _d(o,l){var u=g3(o);l.forEach(function(h){var m=E3.bind(null,o,h);u.has(h)||(u.add(h),h.then(m,m))})}function Yn(o,l){var u=l.deletions;if(u!==null)for(var h=0;h<u.length;h++){var m=u[h],w=o,A=l,N=A;e:for(;N!==null;){switch(N.tag){case 27:if(ki(N.type)){Ot=N.stateNode,zn=!1;break e}break;case 5:Ot=N.stateNode,zn=!1;break e;case 3:case 4:Ot=N.stateNode.containerInfo,zn=!0;break e}N=N.return}if(Ot===null)throw Error(r(160));pv(w,A,m),Ot=null,zn=!1,w=m.alternate,w!==null&&(w.return=null),m.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)vv(l,o),l=l.sibling}var br=null;function vv(o,l){var u=o.alternate,h=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Yn(l,o),Kn(o),h&4&&(Ai(3,o,o.return),Ds(3,o),Ai(5,o,o.return));break;case 1:Yn(l,o),Kn(o),h&512&&(zt||u===null||Mr(u,u.return)),h&64&&ri&&(o=o.updateQueue,o!==null&&(h=o.callbacks,h!==null&&(u=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var m=br;if(Yn(l,o),Kn(o),h&512&&(zt||u===null||Mr(u,u.return)),h&4){var w=u!==null?u.memoizedState:null;if(h=o.memoizedState,u===null)if(h===null)if(o.stateNode===null){e:{h=o.type,u=o.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":w=m.getElementsByTagName("title")[0],(!w||w[ts]||w[An]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=m.createElement(h),m.head.insertBefore(w,m.querySelector("head > title"))),wn(w,h,u),w[An]=o,cn(w),h=w;break e;case"link":var A=um("link","href",m).get(h+(u.href||""));if(A){for(var N=0;N<A.length;N++)if(w=A[N],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(N,1);break t}}w=m.createElement(h),wn(w,h,u),m.head.appendChild(w);break;case"meta":if(A=um("meta","content",m).get(h+(u.content||""))){for(N=0;N<A.length;N++)if(w=A[N],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(N,1);break t}}w=m.createElement(h),wn(w,h,u),m.head.appendChild(w);break;default:throw Error(r(468,h))}w[An]=o,cn(w),h=w}o.stateNode=h}else fm(m,o.type,o.stateNode);else o.stateNode=cm(m,h,o.memoizedProps);else w!==h?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,h===null?fm(m,o.type,o.stateNode):cm(m,h,o.memoizedProps)):h===null&&o.stateNode!==null&&yd(o,o.memoizedProps,u.memoizedProps)}break;case 27:Yn(l,o),Kn(o),h&512&&(zt||u===null||Mr(u,u.return)),u!==null&&h&4&&yd(o,o.memoizedProps,u.memoizedProps);break;case 5:if(Yn(l,o),Kn(o),h&512&&(zt||u===null||Mr(u,u.return)),o.flags&32){m=o.stateNode;try{Ua(m,"")}catch(Q){wt(o,o.return,Q)}}h&4&&o.stateNode!=null&&(m=o.memoizedProps,yd(o,m,u!==null?u.memoizedProps:m)),h&1024&&(bd=!0);break;case 6:if(Yn(l,o),Kn(o),h&4){if(o.stateNode===null)throw Error(r(162));h=o.memoizedProps,u=o.stateNode;try{u.nodeValue=h}catch(Q){wt(o,o.return,Q)}}break;case 3:if(Fc=null,m=br,br=Bc(l.containerInfo),Yn(l,o),br=m,Kn(o),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Xs(l.containerInfo)}catch(Q){wt(o,o.return,Q)}bd&&(bd=!1,mv(o));break;case 4:h=br,br=Bc(o.stateNode.containerInfo),Yn(l,o),Kn(o),br=h;break;case 12:Yn(l,o),Kn(o);break;case 13:Yn(l,o),Kn(o),o.child.flags&8192&&o.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Od=rt()),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,_d(o,h)));break;case 22:m=o.memoizedState!==null;var B=u!==null&&u.memoizedState!==null,X=ri,re=zt;if(ri=X||m,zt=re||B,Yn(l,o),zt=re,ri=X,Kn(o),h&8192)e:for(l=o.stateNode,l._visibility=m?l._visibility&-2:l._visibility|1,m&&(u===null||B||ri||zt||ha(o)),u=null,l=o;;){if(l.tag===5||l.tag===26){if(u===null){B=u=l;try{if(w=B.stateNode,m)A=w.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{N=B.stateNode;var ce=B.memoizedProps.style,Z=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;N.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Q){wt(B,B.return,Q)}}}else if(l.tag===6){if(u===null){B=l;try{B.stateNode.nodeValue=m?"":B.memoizedProps}catch(Q){wt(B,B.return,Q)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}h&4&&(h=o.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,_d(o,u))));break;case 19:Yn(l,o),Kn(o),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,_d(o,h)));break;case 30:break;case 21:break;default:Yn(l,o),Kn(o)}}function Kn(o){var l=o.flags;if(l&2){try{for(var u,h=o.return;h!==null;){if(cv(h)){u=h;break}h=h.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var m=u.stateNode,w=xd(o);Ec(o,w,m);break;case 5:var A=u.stateNode;u.flags&32&&(Ua(A,""),u.flags&=-33);var N=xd(o);Ec(o,N,A);break;case 3:case 4:var B=u.stateNode.containerInfo,X=xd(o);wd(o,X,B);break;default:throw Error(r(161))}}catch(re){wt(o,o.return,re)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function mv(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;mv(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Ci(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)dv(o,l.alternate,l),l=l.sibling}function ha(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:Ai(4,l,l.return),ha(l);break;case 1:Mr(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&sv(l,l.return,u),ha(l);break;case 27:Us(l.stateNode);case 26:case 5:Mr(l,l.return),ha(l);break;case 22:l.memoizedState===null&&ha(l);break;case 30:ha(l);break;default:ha(l)}o=o.sibling}}function Ti(o,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var h=l.alternate,m=o,w=l,A=w.flags;switch(w.tag){case 0:case 11:case 15:Ti(m,w,u),Ds(4,w);break;case 1:if(Ti(m,w,u),h=w,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(X){wt(h,h.return,X)}if(h=w,m=h.updateQueue,m!==null){var N=h.stateNode;try{var B=m.shared.hiddenCallbacks;if(B!==null)for(m.shared.hiddenCallbacks=null,m=0;m<B.length;m++)qp(B[m],N)}catch(X){wt(h,h.return,X)}}u&&A&64&&ov(w),Ns(w,w.return);break;case 27:uv(w);case 26:case 5:Ti(m,w,u),u&&h===null&&A&4&&lv(w),Ns(w,w.return);break;case 12:Ti(m,w,u);break;case 13:Ti(m,w,u),u&&A&4&&gv(m,w);break;case 22:w.memoizedState===null&&Ti(m,w,u),Ns(w,w.return);break;case 30:break;default:Ti(m,w,u)}l=l.sibling}}function Sd(o,l){var u=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==u&&(o!=null&&o.refCount++,u!=null&&vs(u))}function Ed(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&vs(o))}function jr(o,l,u,h){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)yv(o,l,u,h),l=l.sibling}function yv(o,l,u,h){var m=l.flags;switch(l.tag){case 0:case 11:case 15:jr(o,l,u,h),m&2048&&Ds(9,l);break;case 1:jr(o,l,u,h);break;case 3:jr(o,l,u,h),m&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&vs(o)));break;case 12:if(m&2048){jr(o,l,u,h),o=l.stateNode;try{var w=l.memoizedProps,A=w.id,N=w.onPostCommit;typeof N=="function"&&N(A,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(B){wt(l,l.return,B)}}else jr(o,l,u,h);break;case 13:jr(o,l,u,h);break;case 23:break;case 22:w=l.stateNode,A=l.alternate,l.memoizedState!==null?w._visibility&2?jr(o,l,u,h):Is(o,l):w._visibility&2?jr(o,l,u,h):(w._visibility|=2,ao(o,l,u,h,(l.subtreeFlags&10256)!==0)),m&2048&&Sd(A,l);break;case 24:jr(o,l,u,h),m&2048&&Ed(l.alternate,l);break;default:jr(o,l,u,h)}}function ao(o,l,u,h,m){for(m=m&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var w=o,A=l,N=u,B=h,X=A.flags;switch(A.tag){case 0:case 11:case 15:ao(w,A,N,B,m),Ds(8,A);break;case 23:break;case 22:var re=A.stateNode;A.memoizedState!==null?re._visibility&2?ao(w,A,N,B,m):Is(w,A):(re._visibility|=2,ao(w,A,N,B,m)),m&&X&2048&&Sd(A.alternate,A);break;case 24:ao(w,A,N,B,m),m&&X&2048&&Ed(A.alternate,A);break;default:ao(w,A,N,B,m)}l=l.sibling}}function Is(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=o,h=l,m=h.flags;switch(h.tag){case 22:Is(u,h),m&2048&&Sd(h.alternate,h);break;case 24:Is(u,h),m&2048&&Ed(h.alternate,h);break;default:Is(u,h)}l=l.sibling}}var ks=8192;function oo(o){if(o.subtreeFlags&ks)for(o=o.child;o!==null;)xv(o),o=o.sibling}function xv(o){switch(o.tag){case 26:oo(o),o.flags&ks&&o.memoizedState!==null&&eS(br,o.memoizedState,o.memoizedProps);break;case 5:oo(o);break;case 3:case 4:var l=br;br=Bc(o.stateNode.containerInfo),oo(o),br=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=ks,ks=16777216,oo(o),ks=l):oo(o));break;default:oo(o)}}function wv(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Ms(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var h=l[u];fn=h,_v(h,o)}wv(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)bv(o),o=o.sibling}function bv(o){switch(o.tag){case 0:case 11:case 15:Ms(o),o.flags&2048&&Ai(9,o,o.return);break;case 3:Ms(o);break;case 12:Ms(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Ac(o)):Ms(o);break;default:Ms(o)}}function Ac(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var h=l[u];fn=h,_v(h,o)}wv(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:Ai(8,l,l.return),Ac(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Ac(l));break;default:Ac(l)}o=o.sibling}}function _v(o,l){for(;fn!==null;){var u=fn;switch(u.tag){case 0:case 11:case 15:Ai(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:vs(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,fn=h;else e:for(u=o;fn!==null;){h=fn;var m=h.sibling,w=h.return;if(hv(h),h===u){fn=null;break e}if(m!==null){m.return=w,fn=m;break e}fn=w}}}var v3={getCacheForType:function(o){var l=Cn(Qt),u=l.data.get(o);return u===void 0&&(u=o(),l.data.set(o,u)),u}},m3=typeof WeakMap=="function"?WeakMap:Map,ut=0,bt=null,$e=null,Ke=0,ft=0,Zn=null,Oi=!1,so=!1,Ad=!1,ai=0,Lt=0,Ri=0,pa=0,Cd=0,ur=0,lo=0,js=null,Vn=null,Td=!1,Od=0,Cc=1/0,Tc=null,Di=null,xn=0,Ni=null,co=null,uo=0,Rd=0,Dd=null,Sv=null,Ps=0,Nd=null;function Qn(){if((ut&2)!==0&&Ke!==0)return Ke&-Ke;if(U.T!==null){var o=Za;return o!==0?o:Ld()}return F1()}function Ev(){ur===0&&(ur=(Ke&536870912)===0||at?Bl():536870912);var o=cr.current;return o!==null&&(o.flags|=32),ur}function Jn(o,l,u){(o===bt&&(ft===2||ft===9)||o.cancelPendingCommit!==null)&&(fo(o,0),Ii(o,Ke,ur,!1)),es(o,u),((ut&2)===0||o!==bt)&&(o===bt&&((ut&2)===0&&(pa|=u),Lt===4&&Ii(o,Ke,ur,!1)),Pr(o))}function Av(o,l,u){if((ut&6)!==0)throw Error(r(327));var h=!u&&(l&124)===0&&(l&o.expiredLanes)===0||gi(o,l),m=h?w3(o,l):Md(o,l,!0),w=h;do{if(m===0){so&&!h&&Ii(o,l,0,!1);break}else{if(u=o.current.alternate,w&&!y3(u)){m=Md(o,l,!1),w=!1;continue}if(m===2){if(w=l,o.errorRecoveryDisabledLanes&w)var A=0;else A=o.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var N=o;m=js;var B=N.current.memoizedState.isDehydrated;if(B&&(fo(N,A).flags|=256),A=Md(N,A,!1),A!==2){if(Ad&&!B){N.errorRecoveryDisabledLanes|=w,pa|=w,m=4;break e}w=Vn,Vn=m,w!==null&&(Vn===null?Vn=w:Vn.push.apply(Vn,w))}m=A}if(w=!1,m!==2)continue}}if(m===1){fo(o,0),Ii(o,l,0,!0);break}e:{switch(h=o,w=m,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Ii(h,l,ur,!Oi);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(m=Od+300-rt(),10<m)){if(Ii(h,l,ur,!Oi),Nr(h,0,!0)!==0)break e;h.timeoutHandle=em(Cv.bind(null,h,u,Vn,Tc,Td,l,ur,pa,lo,Oi,w,2,-0,0),m);break e}Cv(h,u,Vn,Tc,Td,l,ur,pa,lo,Oi,w,0,-0,0)}}break}while(!0);Pr(o)}function Cv(o,l,u,h,m,w,A,N,B,X,re,ce,Z,Q){if(o.timeoutHandle=-1,ce=l.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(Hs={stylesheets:null,count:0,unsuspend:J3},xv(l),ce=tS(),ce!==null)){o.cancelPendingCommit=ce(kv.bind(null,o,l,w,u,h,m,A,N,B,re,1,Z,Q)),Ii(o,w,A,!X);return}kv(o,l,w,u,h,m,A,N,B)}function y3(o){for(var l=o;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var m=u[h],w=m.getSnapshot;m=m.value;try{if(!Wn(w(),m))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ii(o,l,u,h){l&=~Cd,l&=~pa,o.suspendedLanes|=l,o.pingedLanes&=~l,h&&(o.warmLanes|=l),h=o.expirationTimes;for(var m=l;0<m;){var w=31-Ye(m),A=1<<w;h[w]=-1,m&=~A}u!==0&&B1(o,u,l)}function Oc(){return(ut&6)===0?(Bs(0),!1):!0}function Id(){if($e!==null){if(ft===0)var o=$e.return;else o=$e,Zr=la=null,Yf(o),ro=null,Ts=0,o=$e;for(;o!==null;)av(o.alternate,o),o=o.return;$e=null}}function fo(o,l){var u=o.timeoutHandle;u!==-1&&(o.timeoutHandle=-1,P3(u)),u=o.cancelPendingCommit,u!==null&&(o.cancelPendingCommit=null,u()),Id(),bt=o,$e=u=Xr(o.current,null),Ke=l,ft=0,Zn=null,Oi=!1,so=gi(o,l),Ad=!1,lo=ur=Cd=pa=Ri=Lt=0,Vn=js=null,Td=!1,(l&8)!==0&&(l|=l&32);var h=o.entangledLanes;if(h!==0)for(o=o.entanglements,h&=l;0<h;){var m=31-Ye(h),w=1<<m;l|=o[m],h&=~w}return ai=l,Kl(),u}function Tv(o,l){Ue=null,U.H=gc,l===ys||l===ac?(l=Gp(),ft=3):l===zp?(l=Gp(),ft=4):ft=l===$g?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Zn=l,$e===null&&(Lt=1,wc(o,ar(l,o.current)))}function Ov(){var o=U.H;return U.H=gc,o===null?gc:o}function Rv(){var o=U.A;return U.A=v3,o}function kd(){Lt=4,Oi||(Ke&4194048)!==Ke&&cr.current!==null||(so=!0),(Ri&134217727)===0&&(pa&134217727)===0||bt===null||Ii(bt,Ke,ur,!1)}function Md(o,l,u){var h=ut;ut|=2;var m=Ov(),w=Rv();(bt!==o||Ke!==l)&&(Tc=null,fo(o,l)),l=!1;var A=Lt;e:do try{if(ft!==0&&$e!==null){var N=$e,B=Zn;switch(ft){case 8:Id(),A=6;break e;case 3:case 2:case 9:case 6:cr.current===null&&(l=!0);var X=ft;if(ft=0,Zn=null,ho(o,N,B,X),u&&so){A=0;break e}break;default:X=ft,ft=0,Zn=null,ho(o,N,B,X)}}x3(),A=Lt;break}catch(re){Tv(o,re)}while(!0);return l&&o.shellSuspendCounter++,Zr=la=null,ut=h,U.H=m,U.A=w,$e===null&&(bt=null,Ke=0,Kl()),A}function x3(){for(;$e!==null;)Dv($e)}function w3(o,l){var u=ut;ut|=2;var h=Ov(),m=Rv();bt!==o||Ke!==l?(Tc=null,Cc=rt()+500,fo(o,l)):so=gi(o,l);e:do try{if(ft!==0&&$e!==null){l=$e;var w=Zn;t:switch(ft){case 1:ft=0,Zn=null,ho(o,l,w,1);break;case 2:case 9:if(Vp(w)){ft=0,Zn=null,Nv(l);break}l=function(){ft!==2&&ft!==9||bt!==o||(ft=7),Pr(o)},w.then(l,l);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:Vp(w)?(ft=0,Zn=null,Nv(l)):(ft=0,Zn=null,ho(o,l,w,7));break;case 5:var A=null;switch($e.tag){case 26:A=$e.memoizedState;case 5:case 27:var N=$e;if(!A||dm(A)){ft=0,Zn=null;var B=N.sibling;if(B!==null)$e=B;else{var X=N.return;X!==null?($e=X,Rc(X)):$e=null}break t}}ft=0,Zn=null,ho(o,l,w,5);break;case 6:ft=0,Zn=null,ho(o,l,w,6);break;case 8:Id(),Lt=6;break e;default:throw Error(r(462))}}b3();break}catch(re){Tv(o,re)}while(!0);return Zr=la=null,U.H=h,U.A=m,ut=u,$e!==null?0:(bt=null,Ke=0,Kl(),Lt)}function b3(){for(;$e!==null&&!Je();)Dv($e)}function Dv(o){var l=rv(o.alternate,o,ai);o.memoizedProps=o.pendingProps,l===null?Rc(o):$e=l}function Nv(o){var l=o,u=l.alternate;switch(l.tag){case 15:case 0:l=Zg(u,l,l.pendingProps,l.type,void 0,Ke);break;case 11:l=Zg(u,l,l.pendingProps,l.type.render,l.ref,Ke);break;case 5:Yf(l);default:av(u,l),l=$e=Ip(l,ai),l=rv(u,l,ai)}o.memoizedProps=o.pendingProps,l===null?Rc(o):$e=l}function ho(o,l,u,h){Zr=la=null,Yf(l),ro=null,Ts=0;var m=l.return;try{if(u3(o,m,l,u,Ke)){Lt=1,wc(o,ar(u,o.current)),$e=null;return}}catch(w){if(m!==null)throw $e=m,w;Lt=1,wc(o,ar(u,o.current)),$e=null;return}l.flags&32768?(at||h===1?o=!0:so||(Ke&536870912)!==0?o=!1:(Oi=o=!0,(h===2||h===9||h===3||h===6)&&(h=cr.current,h!==null&&h.tag===13&&(h.flags|=16384))),Iv(l,o)):Rc(l)}function Rc(o){var l=o;do{if((l.flags&32768)!==0){Iv(l,Oi);return}o=l.return;var u=d3(l.alternate,l,ai);if(u!==null){$e=u;return}if(l=l.sibling,l!==null){$e=l;return}$e=l=o}while(l!==null);Lt===0&&(Lt=5)}function Iv(o,l){do{var u=h3(o.alternate,o);if(u!==null){u.flags&=32767,$e=u;return}if(u=o.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(o=o.sibling,o!==null)){$e=o;return}$e=o=u}while(o!==null);Lt=6,$e=null}function kv(o,l,u,h,m,w,A,N,B){o.cancelPendingCommit=null;do Dc();while(xn!==0);if((ut&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=Ef,Jb(o,u,w,A,N,B),o===bt&&($e=bt=null,Ke=0),co=l,Ni=o,uo=u,Rd=w,Dd=m,Sv=h,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,A3(V,function(){return Lv(),null})):(o.callbackNode=null,o.callbackPriority=0),h=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||h){h=U.T,U.T=null,m=F.p,F.p=2,A=ut,ut|=4;try{p3(o,l,u)}finally{ut=A,F.p=m,U.T=h}}xn=1,Mv(),jv(),Pv()}}function Mv(){if(xn===1){xn=0;var o=Ni,l=co,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=U.T,U.T=null;var h=F.p;F.p=2;var m=ut;ut|=4;try{vv(l,o);var w=qd,A=_p(o.containerInfo),N=w.focusedElem,B=w.selectionRange;if(A!==N&&N&&N.ownerDocument&&bp(N.ownerDocument.documentElement,N)){if(B!==null&&xf(N)){var X=B.start,re=B.end;if(re===void 0&&(re=X),"selectionStart"in N)N.selectionStart=X,N.selectionEnd=Math.min(re,N.value.length);else{var ce=N.ownerDocument||document,Z=ce&&ce.defaultView||window;if(Z.getSelection){var Q=Z.getSelection(),Me=N.textContent.length,Ie=Math.min(B.start,Me),mt=B.end===void 0?Ie:Math.min(B.end,Me);!Q.extend&&Ie>mt&&(A=mt,mt=Ie,Ie=A);var G=wp(N,Ie),z=wp(N,mt);if(G&&z&&(Q.rangeCount!==1||Q.anchorNode!==G.node||Q.anchorOffset!==G.offset||Q.focusNode!==z.node||Q.focusOffset!==z.offset)){var W=ce.createRange();W.setStart(G.node,G.offset),Q.removeAllRanges(),Ie>mt?(Q.addRange(W),Q.extend(z.node,z.offset)):(W.setEnd(z.node,z.offset),Q.addRange(W))}}}}for(ce=[],Q=N;Q=Q.parentNode;)Q.nodeType===1&&ce.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ce.length;N++){var oe=ce[N];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Vc=!!$d,qd=$d=null}finally{ut=m,F.p=h,U.T=u}}o.current=l,xn=2}}function jv(){if(xn===2){xn=0;var o=Ni,l=co,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=U.T,U.T=null;var h=F.p;F.p=2;var m=ut;ut|=4;try{dv(o,l.alternate,l)}finally{ut=m,F.p=h,U.T=u}}xn=3}}function Pv(){if(xn===4||xn===3){xn=0,xt();var o=Ni,l=co,u=uo,h=Sv;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?xn=5:(xn=0,co=Ni=null,Bv(o,o.pendingLanes));var m=o.pendingLanes;if(m===0&&(Di=null),Zu(u),l=l.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(Oe,l,void 0,(l.current.flags&128)===128)}catch{}if(h!==null){l=U.T,m=F.p,F.p=2,U.T=null;try{for(var w=o.onRecoverableError,A=0;A<h.length;A++){var N=h[A];w(N.value,{componentStack:N.stack})}}finally{U.T=l,F.p=m}}(uo&3)!==0&&Dc(),Pr(o),m=o.pendingLanes,(u&4194090)!==0&&(m&42)!==0?o===Nd?Ps++:(Ps=0,Nd=o):Ps=0,Bs(0)}}function Bv(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,vs(l)))}function Dc(o){return Mv(),jv(),Pv(),Lv()}function Lv(){if(xn!==5)return!1;var o=Ni,l=Rd;Rd=0;var u=Zu(uo),h=U.T,m=F.p;try{F.p=32>u?32:u,U.T=null,u=Dd,Dd=null;var w=Ni,A=uo;if(xn=0,co=Ni=null,uo=0,(ut&6)!==0)throw Error(r(331));var N=ut;if(ut|=4,bv(w.current),yv(w,w.current,A,u),ut=N,Bs(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(Oe,w)}catch{}return!0}finally{F.p=m,U.T=h,Bv(o,l)}}function Fv(o,l,u){l=ar(u,l),l=cd(o.stateNode,l,2),o=bi(o,l,2),o!==null&&(es(o,2),Pr(o))}function wt(o,l,u){if(o.tag===3)Fv(o,o,u);else for(;l!==null;){if(l.tag===3){Fv(l,o,u);break}else if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Di===null||!Di.has(h))){o=ar(u,o),u=Hg(2),h=bi(l,u,2),h!==null&&(Gg(u,h,l,o),es(h,2),Pr(h));break}}l=l.return}}function jd(o,l,u){var h=o.pingCache;if(h===null){h=o.pingCache=new m3;var m=new Set;h.set(l,m)}else m=h.get(l),m===void 0&&(m=new Set,h.set(l,m));m.has(u)||(Ad=!0,m.add(u),o=_3.bind(null,o,l,u),l.then(o,o))}function _3(o,l,u){var h=o.pingCache;h!==null&&h.delete(l),o.pingedLanes|=o.suspendedLanes&u,o.warmLanes&=~u,bt===o&&(Ke&u)===u&&(Lt===4||Lt===3&&(Ke&62914560)===Ke&&300>rt()-Od?(ut&2)===0&&fo(o,0):Cd|=u,lo===Ke&&(lo=0)),Pr(o)}function Uv(o,l){l===0&&(l=Ll()),o=Wa(o,l),o!==null&&(es(o,l),Pr(o))}function S3(o){var l=o.memoizedState,u=0;l!==null&&(u=l.retryLane),Uv(o,u)}function E3(o,l){var u=0;switch(o.tag){case 13:var h=o.stateNode,m=o.memoizedState;m!==null&&(u=m.retryLane);break;case 19:h=o.stateNode;break;case 22:h=o.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(l),Uv(o,u)}function A3(o,l){return Zt(o,l)}var Nc=null,po=null,Pd=!1,Ic=!1,Bd=!1,ga=0;function Pr(o){o!==po&&o.next===null&&(po===null?Nc=po=o:po=po.next=o),Ic=!0,Pd||(Pd=!0,T3())}function Bs(o,l){if(!Bd&&Ic){Bd=!0;do for(var u=!1,h=Nc;h!==null;){if(o!==0){var m=h.pendingLanes;if(m===0)var w=0;else{var A=h.suspendedLanes,N=h.pingedLanes;w=(1<<31-Ye(42|o)+1)-1,w&=m&~(A&~N),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,Gv(h,w))}else w=Ke,w=Nr(h,h===bt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||gi(h,w)||(u=!0,Gv(h,w));h=h.next}while(u);Bd=!1}}function C3(){zv()}function zv(){Ic=Pd=!1;var o=0;ga!==0&&(j3()&&(o=ga),ga=0);for(var l=rt(),u=null,h=Nc;h!==null;){var m=h.next,w=Vv(h,l);w===0?(h.next=null,u===null?Nc=m:u.next=m,m===null&&(po=u)):(u=h,(o!==0||(w&3)!==0)&&(Ic=!0)),h=m}Bs(o)}function Vv(o,l){for(var u=o.suspendedLanes,h=o.pingedLanes,m=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var A=31-Ye(w),N=1<<A,B=m[A];B===-1?((N&u)===0||(N&h)!==0)&&(m[A]=Xu(N,l)):B<=l&&(o.expiredLanes|=N),w&=~N}if(l=bt,u=Ke,u=Nr(o,o===l?u:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h=o.callbackNode,u===0||o===l&&(ft===2||ft===9)||o.cancelPendingCommit!==null)return h!==null&&h!==null&&pt(h),o.callbackNode=null,o.callbackPriority=0;if((u&3)===0||gi(o,u)){if(l=u&-u,l===o.callbackPriority)return l;switch(h!==null&&pt(h),Zu(u)){case 2:case 8:u=Pt;break;case 32:u=V;break;case 268435456:u=ve;break;default:u=V}return h=Hv.bind(null,o),u=Zt(u,h),o.callbackPriority=l,o.callbackNode=u,l}return h!==null&&h!==null&&pt(h),o.callbackPriority=2,o.callbackNode=null,2}function Hv(o,l){if(xn!==0&&xn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var u=o.callbackNode;if(Dc()&&o.callbackNode!==u)return null;var h=Ke;return h=Nr(o,o===bt?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h===0?null:(Av(o,h,l),Vv(o,rt()),o.callbackNode!=null&&o.callbackNode===u?Hv.bind(null,o):null)}function Gv(o,l){if(Dc())return null;Av(o,l,!0)}function T3(){B3(function(){(ut&6)!==0?Zt(ct,C3):zv()})}function Ld(){return ga===0&&(ga=Bl()),ga}function $v(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Hl(""+o)}function qv(o,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,o.id&&u.setAttribute("form",o.id),l.parentNode.insertBefore(u,l),o=new FormData(o),u.parentNode.removeChild(u),o}function O3(o,l,u,h,m){if(l==="submit"&&u&&u.stateNode===m){var w=$v((m[Ln]||null).action),A=h.submitter;A&&(l=(l=A[Ln]||null)?$v(l.formAction):A.getAttribute("formAction"),l!==null&&(w=l,A=null));var N=new Wl("action","action",null,h,m);o.push({event:N,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ga!==0){var B=A?qv(m,A):new FormData(m);id(u,{pending:!0,data:B,method:m.method,action:w},null,B)}}else typeof w=="function"&&(N.preventDefault(),B=A?qv(m,A):new FormData(m),id(u,{pending:!0,data:B,method:m.method,action:w},w,B))},currentTarget:m}]})}}for(var Fd=0;Fd<Sf.length;Fd++){var Ud=Sf[Fd],R3=Ud.toLowerCase(),D3=Ud[0].toUpperCase()+Ud.slice(1);wr(R3,"on"+D3)}wr(Ap,"onAnimationEnd"),wr(Cp,"onAnimationIteration"),wr(Tp,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(W_,"onTransitionRun"),wr(X_,"onTransitionStart"),wr(Y_,"onTransitionCancel"),wr(Op,"onTransitionEnd"),Ba("onMouseEnter",["mouseout","mouseover"]),Ba("onMouseLeave",["mouseout","mouseover"]),Ba("onPointerEnter",["pointerout","pointerover"]),Ba("onPointerLeave",["pointerout","pointerover"]),Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ls));function Wv(o,l){l=(l&4)!==0;for(var u=0;u<o.length;u++){var h=o[u],m=h.event;h=h.listeners;e:{var w=void 0;if(l)for(var A=h.length-1;0<=A;A--){var N=h[A],B=N.instance,X=N.currentTarget;if(N=N.listener,B!==w&&m.isPropagationStopped())break e;w=N,m.currentTarget=X;try{w(m)}catch(re){xc(re)}m.currentTarget=null,w=B}else for(A=0;A<h.length;A++){if(N=h[A],B=N.instance,X=N.currentTarget,N=N.listener,B!==w&&m.isPropagationStopped())break e;w=N,m.currentTarget=X;try{w(m)}catch(re){xc(re)}m.currentTarget=null,w=B}}}}function qe(o,l){var u=l[Qu];u===void 0&&(u=l[Qu]=new Set);var h=o+"__bubble";u.has(h)||(Xv(l,o,2,!1),u.add(h))}function zd(o,l,u){var h=0;l&&(h|=4),Xv(u,o,h,l)}var kc="_reactListening"+Math.random().toString(36).slice(2);function Vd(o){if(!o[kc]){o[kc]=!0,z1.forEach(function(u){u!=="selectionchange"&&(N3.has(u)||zd(u,!1,o),zd(u,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[kc]||(l[kc]=!0,zd("selectionchange",!1,l))}}function Xv(o,l,u,h){switch(ym(l)){case 2:var m=iS;break;case 8:m=aS;break;default:m=nh}u=m.bind(null,l,u,o),m=void 0,!uf||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(m=!0),h?m!==void 0?o.addEventListener(l,u,{capture:!0,passive:m}):o.addEventListener(l,u,!0):m!==void 0?o.addEventListener(l,u,{passive:m}):o.addEventListener(l,u,!1)}function Hd(o,l,u,h,m){var w=h;if((l&1)===0&&(l&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var N=h.stateNode.containerInfo;if(N===m)break;if(A===4)for(A=h.return;A!==null;){var B=A.tag;if((B===3||B===4)&&A.stateNode.containerInfo===m)return;A=A.return}for(;N!==null;){if(A=Ma(N),A===null)return;if(B=A.tag,B===5||B===6||B===26||B===27){h=w=A;continue e}N=N.parentNode}}h=h.return}tp(function(){var X=w,re=lf(u),ce=[];e:{var Z=Rp.get(o);if(Z!==void 0){var Q=Wl,Me=o;switch(o){case"keypress":if($l(u)===0)break e;case"keydown":case"keyup":Q=A_;break;case"focusin":Me="focus",Q=pf;break;case"focusout":Me="blur",Q=pf;break;case"beforeblur":case"afterblur":Q=pf;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=ip;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=h_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=O_;break;case Ap:case Cp:case Tp:Q=v_;break;case Op:Q=D_;break;case"scroll":case"scrollend":Q=f_;break;case"wheel":Q=I_;break;case"copy":case"cut":case"paste":Q=y_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=op;break;case"toggle":case"beforetoggle":Q=M_}var Ie=(l&4)!==0,mt=!Ie&&(o==="scroll"||o==="scrollend"),G=Ie?Z!==null?Z+"Capture":null:Z;Ie=[];for(var z=X,W;z!==null;){var oe=z;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||G===null||(oe=rs(z,G),oe!=null&&Ie.push(Fs(z,oe,W))),mt)break;z=z.return}0<Ie.length&&(Z=new Q(Z,Me,null,u,re),ce.push({event:Z,listeners:Ie}))}}if((l&7)===0){e:{if(Z=o==="mouseover"||o==="pointerover",Q=o==="mouseout"||o==="pointerout",Z&&u!==sf&&(Me=u.relatedTarget||u.fromElement)&&(Ma(Me)||Me[ka]))break e;if((Q||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,Q?(Me=u.relatedTarget||u.toElement,Q=X,Me=Me?Ma(Me):null,Me!==null&&(mt=a(Me),Ie=Me.tag,Me!==mt||Ie!==5&&Ie!==27&&Ie!==6)&&(Me=null)):(Q=null,Me=X),Q!==Me)){if(Ie=ip,oe="onMouseLeave",G="onMouseEnter",z="mouse",(o==="pointerout"||o==="pointerover")&&(Ie=op,oe="onPointerLeave",G="onPointerEnter",z="pointer"),mt=Q==null?Z:ns(Q),W=Me==null?Z:ns(Me),Z=new Ie(oe,z+"leave",Q,u,re),Z.target=mt,Z.relatedTarget=W,oe=null,Ma(re)===X&&(Ie=new Ie(G,z+"enter",Me,u,re),Ie.target=W,Ie.relatedTarget=mt,oe=Ie),mt=oe,Q&&Me)t:{for(Ie=Q,G=Me,z=0,W=Ie;W;W=go(W))z++;for(W=0,oe=G;oe;oe=go(oe))W++;for(;0<z-W;)Ie=go(Ie),z--;for(;0<W-z;)G=go(G),W--;for(;z--;){if(Ie===G||G!==null&&Ie===G.alternate)break t;Ie=go(Ie),G=go(G)}Ie=null}else Ie=null;Q!==null&&Yv(ce,Z,Q,Ie,!1),Me!==null&&mt!==null&&Yv(ce,mt,Me,Ie,!0)}}e:{if(Z=X?ns(X):window,Q=Z.nodeName&&Z.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Z.type==="file")var _e=pp;else if(dp(Z))if(gp)_e=G_;else{_e=V_;var He=z_}else Q=Z.nodeName,!Q||Q.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&of(X.elementType)&&(_e=pp):_e=H_;if(_e&&(_e=_e(o,X))){hp(ce,_e,u,re);break e}He&&He(o,Z,X),o==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&af(Z,"number",Z.value)}switch(He=X?ns(X):window,o){case"focusin":(dp(He)||He.contentEditable==="true")&&(Ga=He,wf=X,fs=null);break;case"focusout":fs=wf=Ga=null;break;case"mousedown":bf=!0;break;case"contextmenu":case"mouseup":case"dragend":bf=!1,Sp(ce,u,re);break;case"selectionchange":if(q_)break;case"keydown":case"keyup":Sp(ce,u,re)}var Te;if(vf)e:{switch(o){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ha?up(o,u)&&(ke="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(ke="onCompositionStart");ke&&(sp&&u.locale!=="ko"&&(Ha||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ha&&(Te=np()):(mi=re,ff="value"in mi?mi.value:mi.textContent,Ha=!0)),He=Mc(X,ke),0<He.length&&(ke=new ap(ke,o,null,u,re),ce.push({event:ke,listeners:He}),Te?ke.data=Te:(Te=fp(u),Te!==null&&(ke.data=Te)))),(Te=P_?B_(o,u):L_(o,u))&&(ke=Mc(X,"onBeforeInput"),0<ke.length&&(He=new ap("onBeforeInput","beforeinput",null,u,re),ce.push({event:He,listeners:ke}),He.data=Te)),O3(ce,o,X,u,re)}Wv(ce,l)})}function Fs(o,l,u){return{instance:o,listener:l,currentTarget:u}}function Mc(o,l){for(var u=l+"Capture",h=[];o!==null;){var m=o,w=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||w===null||(m=rs(o,u),m!=null&&h.unshift(Fs(o,m,w)),m=rs(o,l),m!=null&&h.push(Fs(o,m,w))),o.tag===3)return h;o=o.return}return[]}function go(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Yv(o,l,u,h,m){for(var w=l._reactName,A=[];u!==null&&u!==h;){var N=u,B=N.alternate,X=N.stateNode;if(N=N.tag,B!==null&&B===h)break;N!==5&&N!==26&&N!==27||X===null||(B=X,m?(X=rs(u,w),X!=null&&A.unshift(Fs(u,X,B))):m||(X=rs(u,w),X!=null&&A.push(Fs(u,X,B)))),u=u.return}A.length!==0&&o.push({event:l,listeners:A})}var I3=/\r\n?/g,k3=/\u0000|\uFFFD/g;function Kv(o){return(typeof o=="string"?o:""+o).replace(I3,`
`).replace(k3,"")}function Zv(o,l){return l=Kv(l),Kv(o)===l}function jc(){}function vt(o,l,u,h,m,w){switch(u){case"children":typeof h=="string"?l==="body"||l==="textarea"&&h===""||Ua(o,h):(typeof h=="number"||typeof h=="bigint")&&l!=="body"&&Ua(o,""+h);break;case"className":Ul(o,"class",h);break;case"tabIndex":Ul(o,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ul(o,u,h);break;case"style":J1(o,h,w);break;case"data":if(l!=="object"){Ul(o,"data",h);break}case"src":case"href":if(h===""&&(l!=="a"||u!=="href")){o.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(u);break}h=Hl(""+h),o.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){o.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(l!=="input"&&vt(o,l,"name",m.name,m,null),vt(o,l,"formEncType",m.formEncType,m,null),vt(o,l,"formMethod",m.formMethod,m,null),vt(o,l,"formTarget",m.formTarget,m,null)):(vt(o,l,"encType",m.encType,m,null),vt(o,l,"method",m.method,m,null),vt(o,l,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(u);break}h=Hl(""+h),o.setAttribute(u,h);break;case"onClick":h!=null&&(o.onclick=jc);break;case"onScroll":h!=null&&qe("scroll",o);break;case"onScrollEnd":h!=null&&qe("scrollend",o);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(m.children!=null)throw Error(r(60));o.innerHTML=u}}break;case"multiple":o.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":o.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){o.removeAttribute("xlink:href");break}u=Hl(""+h),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,""+h):o.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,""):o.removeAttribute(u);break;case"capture":case"download":h===!0?o.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,h):o.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?o.setAttribute(u,h):o.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?o.removeAttribute(u):o.setAttribute(u,h);break;case"popover":qe("beforetoggle",o),qe("toggle",o),Fl(o,"popover",h);break;case"xlinkActuate":qr(o,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":qr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":qr(o,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":qr(o,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":qr(o,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":qr(o,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":qr(o,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":qr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":qr(o,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Fl(o,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=c_.get(u)||u,Fl(o,u,h))}}function Gd(o,l,u,h,m,w){switch(u){case"style":J1(o,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(m.children!=null)throw Error(r(60));o.innerHTML=u}}break;case"children":typeof h=="string"?Ua(o,h):(typeof h=="number"||typeof h=="bigint")&&Ua(o,""+h);break;case"onScroll":h!=null&&qe("scroll",o);break;case"onScrollEnd":h!=null&&qe("scrollend",o);break;case"onClick":h!=null&&(o.onclick=jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!V1.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),l=u.slice(2,m?u.length-7:void 0),w=o[Ln]||null,w=w!=null?w[u]:null,typeof w=="function"&&o.removeEventListener(l,w,m),typeof h=="function")){typeof w!="function"&&w!==null&&(u in o?o[u]=null:o.hasAttribute(u)&&o.removeAttribute(u)),o.addEventListener(l,h,m);break e}u in o?o[u]=h:h===!0?o.setAttribute(u,""):Fl(o,u,h)}}}function wn(o,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",o),qe("load",o);var h=!1,m=!1,w;for(w in u)if(u.hasOwnProperty(w)){var A=u[w];if(A!=null)switch(w){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:vt(o,l,w,A,u,null)}}m&&vt(o,l,"srcSet",u.srcSet,u,null),h&&vt(o,l,"src",u.src,u,null);return;case"input":qe("invalid",o);var N=w=A=m=null,B=null,X=null;for(h in u)if(u.hasOwnProperty(h)){var re=u[h];if(re!=null)switch(h){case"name":m=re;break;case"type":A=re;break;case"checked":B=re;break;case"defaultChecked":X=re;break;case"value":w=re;break;case"defaultValue":N=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:vt(o,l,h,re,u,null)}}Y1(o,w,N,B,X,A,m,!1),zl(o);return;case"select":qe("invalid",o),h=A=w=null;for(m in u)if(u.hasOwnProperty(m)&&(N=u[m],N!=null))switch(m){case"value":w=N;break;case"defaultValue":A=N;break;case"multiple":h=N;default:vt(o,l,m,N,u,null)}l=w,u=A,o.multiple=!!h,l!=null?Fa(o,!!h,l,!1):u!=null&&Fa(o,!!h,u,!0);return;case"textarea":qe("invalid",o),w=m=h=null;for(A in u)if(u.hasOwnProperty(A)&&(N=u[A],N!=null))switch(A){case"value":h=N;break;case"defaultValue":m=N;break;case"children":w=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:vt(o,l,A,N,u,null)}Z1(o,h,m,w),zl(o);return;case"option":for(B in u)if(u.hasOwnProperty(B)&&(h=u[B],h!=null))switch(B){case"selected":o.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:vt(o,l,B,h,u,null)}return;case"dialog":qe("beforetoggle",o),qe("toggle",o),qe("cancel",o),qe("close",o);break;case"iframe":case"object":qe("load",o);break;case"video":case"audio":for(h=0;h<Ls.length;h++)qe(Ls[h],o);break;case"image":qe("error",o),qe("load",o);break;case"details":qe("toggle",o);break;case"embed":case"source":case"link":qe("error",o),qe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(h=u[X],h!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:vt(o,l,X,h,u,null)}return;default:if(of(l)){for(re in u)u.hasOwnProperty(re)&&(h=u[re],h!==void 0&&Gd(o,l,re,h,u,void 0));return}}for(N in u)u.hasOwnProperty(N)&&(h=u[N],h!=null&&vt(o,l,N,h,u,null))}function M3(o,l,u,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,w=null,A=null,N=null,B=null,X=null,re=null;for(Q in u){var ce=u[Q];if(u.hasOwnProperty(Q)&&ce!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":B=ce;default:h.hasOwnProperty(Q)||vt(o,l,Q,null,h,ce)}}for(var Z in h){var Q=h[Z];if(ce=u[Z],h.hasOwnProperty(Z)&&(Q!=null||ce!=null))switch(Z){case"type":w=Q;break;case"name":m=Q;break;case"checked":X=Q;break;case"defaultChecked":re=Q;break;case"value":A=Q;break;case"defaultValue":N=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,l));break;default:Q!==ce&&vt(o,l,Z,Q,h,ce)}}rf(o,A,N,B,X,re,w,m);return;case"select":Q=A=N=Z=null;for(w in u)if(B=u[w],u.hasOwnProperty(w)&&B!=null)switch(w){case"value":break;case"multiple":Q=B;default:h.hasOwnProperty(w)||vt(o,l,w,null,h,B)}for(m in h)if(w=h[m],B=u[m],h.hasOwnProperty(m)&&(w!=null||B!=null))switch(m){case"value":Z=w;break;case"defaultValue":N=w;break;case"multiple":A=w;default:w!==B&&vt(o,l,m,w,h,B)}l=N,u=A,h=Q,Z!=null?Fa(o,!!u,Z,!1):!!h!=!!u&&(l!=null?Fa(o,!!u,l,!0):Fa(o,!!u,u?[]:"",!1));return;case"textarea":Q=Z=null;for(N in u)if(m=u[N],u.hasOwnProperty(N)&&m!=null&&!h.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:vt(o,l,N,null,h,m)}for(A in h)if(m=h[A],w=u[A],h.hasOwnProperty(A)&&(m!=null||w!=null))switch(A){case"value":Z=m;break;case"defaultValue":Q=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==w&&vt(o,l,A,m,h,w)}K1(o,Z,Q);return;case"option":for(var Me in u)if(Z=u[Me],u.hasOwnProperty(Me)&&Z!=null&&!h.hasOwnProperty(Me))switch(Me){case"selected":o.selected=!1;break;default:vt(o,l,Me,null,h,Z)}for(B in h)if(Z=h[B],Q=u[B],h.hasOwnProperty(B)&&Z!==Q&&(Z!=null||Q!=null))switch(B){case"selected":o.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:vt(o,l,B,Z,h,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in u)Z=u[Ie],u.hasOwnProperty(Ie)&&Z!=null&&!h.hasOwnProperty(Ie)&&vt(o,l,Ie,null,h,Z);for(X in h)if(Z=h[X],Q=u[X],h.hasOwnProperty(X)&&Z!==Q&&(Z!=null||Q!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,l));break;default:vt(o,l,X,Z,h,Q)}return;default:if(of(l)){for(var mt in u)Z=u[mt],u.hasOwnProperty(mt)&&Z!==void 0&&!h.hasOwnProperty(mt)&&Gd(o,l,mt,void 0,h,Z);for(re in h)Z=h[re],Q=u[re],!h.hasOwnProperty(re)||Z===Q||Z===void 0&&Q===void 0||Gd(o,l,re,Z,h,Q);return}}for(var G in u)Z=u[G],u.hasOwnProperty(G)&&Z!=null&&!h.hasOwnProperty(G)&&vt(o,l,G,null,h,Z);for(ce in h)Z=h[ce],Q=u[ce],!h.hasOwnProperty(ce)||Z===Q||Z==null&&Q==null||vt(o,l,ce,Z,h,Q)}var $d=null,qd=null;function Pc(o){return o.nodeType===9?o:o.ownerDocument}function Qv(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jv(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Wd(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Xd=null;function j3(){var o=window.event;return o&&o.type==="popstate"?o===Xd?!1:(Xd=o,!0):(Xd=null,!1)}var em=typeof setTimeout=="function"?setTimeout:void 0,P3=typeof clearTimeout=="function"?clearTimeout:void 0,tm=typeof Promise=="function"?Promise:void 0,B3=typeof queueMicrotask=="function"?queueMicrotask:typeof tm<"u"?function(o){return tm.resolve(null).then(o).catch(L3)}:em;function L3(o){setTimeout(function(){throw o})}function ki(o){return o==="head"}function nm(o,l){var u=l,h=0,m=0;do{var w=u.nextSibling;if(o.removeChild(u),w&&w.nodeType===8)if(u=w.data,u==="/$"){if(0<h&&8>h){u=h;var A=o.ownerDocument;if(u&1&&Us(A.documentElement),u&2&&Us(A.body),u&4)for(u=A.head,Us(u),A=u.firstChild;A;){var N=A.nextSibling,B=A.nodeName;A[ts]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&A.rel.toLowerCase()==="stylesheet"||u.removeChild(A),A=N}}if(m===0){o.removeChild(w),Xs(l);return}m--}else u==="$"||u==="$?"||u==="$!"?m++:h=u.charCodeAt(0)-48;else h=0;u=w}while(u);Xs(l)}function Yd(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Yd(u),Ju(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}o.removeChild(u)}}function F3(o,l,u,h){for(;o.nodeType===1;){var m=u;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!h&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(h){if(!o[ts])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==m.rel||o.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||o.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||o.getAttribute("title")!==(m.title==null?null:m.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(m.src==null?null:m.src)||o.getAttribute("type")!==(m.type==null?null:m.type)||o.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var w=m.name==null?null:""+m.name;if(m.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=_r(o.nextSibling),o===null)break}return null}function U3(o,l,u){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=_r(o.nextSibling),o===null))return null;return o}function Kd(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function z3(o,l){var u=o.ownerDocument;if(o.data!=="$?"||u.readyState==="complete")l();else{var h=function(){l(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),o._reactRetry=h}}function _r(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var Zd=null;function rm(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return o;l--}else u==="/$"&&l++}o=o.previousSibling}return null}function im(o,l,u){switch(l=Pc(u),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Us(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Ju(o)}var fr=new Map,am=new Set;function Bc(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var oi=F.d;F.d={f:V3,r:H3,D:G3,C:$3,L:q3,m:W3,X:Y3,S:X3,M:K3};function V3(){var o=oi.f(),l=Oc();return o||l}function H3(o){var l=ja(o);l!==null&&l.tag===5&&l.type==="form"?Ag(l):oi.r(o)}var vo=typeof document>"u"?null:document;function om(o,l,u){var h=vo;if(h&&typeof l=="string"&&l){var m=ir(l);m='link[rel="'+o+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),am.has(m)||(am.add(m),o={rel:o,crossOrigin:u,href:l},h.querySelector(m)===null&&(l=h.createElement("link"),wn(l,"link",o),cn(l),h.head.appendChild(l)))}}function G3(o){oi.D(o),om("dns-prefetch",o,null)}function $3(o,l){oi.C(o,l),om("preconnect",o,l)}function q3(o,l,u){oi.L(o,l,u);var h=vo;if(h&&o&&l){var m='link[rel="preload"][as="'+ir(l)+'"]';l==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+ir(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+ir(u.imageSizes)+'"]')):m+='[href="'+ir(o)+'"]';var w=m;switch(l){case"style":w=mo(o);break;case"script":w=yo(o)}fr.has(w)||(o=p({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:o,as:l},u),fr.set(w,o),h.querySelector(m)!==null||l==="style"&&h.querySelector(zs(w))||l==="script"&&h.querySelector(Vs(w))||(l=h.createElement("link"),wn(l,"link",o),cn(l),h.head.appendChild(l)))}}function W3(o,l){oi.m(o,l);var u=vo;if(u&&o){var h=l&&typeof l.as=="string"?l.as:"script",m='link[rel="modulepreload"][as="'+ir(h)+'"][href="'+ir(o)+'"]',w=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=yo(o)}if(!fr.has(w)&&(o=p({rel:"modulepreload",href:o},l),fr.set(w,o),u.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Vs(w)))return}h=u.createElement("link"),wn(h,"link",o),cn(h),u.head.appendChild(h)}}}function X3(o,l,u){oi.S(o,l,u);var h=vo;if(h&&o){var m=Pa(h).hoistableStyles,w=mo(o);l=l||"default";var A=m.get(w);if(!A){var N={loading:0,preload:null};if(A=h.querySelector(zs(w)))N.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},u),(u=fr.get(w))&&Qd(o,u);var B=A=h.createElement("link");cn(B),wn(B,"link",o),B._p=new Promise(function(X,re){B.onload=X,B.onerror=re}),B.addEventListener("load",function(){N.loading|=1}),B.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Lc(A,l,h)}A={type:"stylesheet",instance:A,count:1,state:N},m.set(w,A)}}}function Y3(o,l){oi.X(o,l);var u=vo;if(u&&o){var h=Pa(u).hoistableScripts,m=yo(o),w=h.get(m);w||(w=u.querySelector(Vs(m)),w||(o=p({src:o,async:!0},l),(l=fr.get(m))&&Jd(o,l),w=u.createElement("script"),cn(w),wn(w,"link",o),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(m,w))}}function K3(o,l){oi.M(o,l);var u=vo;if(u&&o){var h=Pa(u).hoistableScripts,m=yo(o),w=h.get(m);w||(w=u.querySelector(Vs(m)),w||(o=p({src:o,async:!0,type:"module"},l),(l=fr.get(m))&&Jd(o,l),w=u.createElement("script"),cn(w),wn(w,"link",o),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(m,w))}}function sm(o,l,u,h){var m=(m=J.current)?Bc(m):null;if(!m)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=mo(u.href),u=Pa(m).hoistableStyles,h=u.get(l),h||(h={type:"style",instance:null,count:0,state:null},u.set(l,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){o=mo(u.href);var w=Pa(m).hoistableStyles,A=w.get(o);if(A||(m=m.ownerDocument||m,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,A),(w=m.querySelector(zs(o)))&&!w._p&&(A.instance=w,A.state.loading=5),fr.has(o)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},fr.set(o,u),w||Z3(m,o,u,A.state))),l&&h===null)throw Error(r(528,""));return A}if(l&&h!==null)throw Error(r(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=yo(u),u=Pa(m).hoistableScripts,h=u.get(l),h||(h={type:"script",instance:null,count:0,state:null},u.set(l,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function mo(o){return'href="'+ir(o)+'"'}function zs(o){return'link[rel="stylesheet"]['+o+"]"}function lm(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function Z3(o,l,u,h){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?h.loading=1:(l=o.createElement("link"),h.preload=l,l.addEventListener("load",function(){return h.loading|=1}),l.addEventListener("error",function(){return h.loading|=2}),wn(l,"link",u),cn(l),o.head.appendChild(l))}function yo(o){return'[src="'+ir(o)+'"]'}function Vs(o){return"script[async]"+o}function cm(o,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var h=o.querySelector('style[data-href~="'+ir(u.href)+'"]');if(h)return l.instance=h,cn(h),h;var m=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(o.ownerDocument||o).createElement("style"),cn(h),wn(h,"style",m),Lc(h,u.precedence,o),l.instance=h;case"stylesheet":m=mo(u.href);var w=o.querySelector(zs(m));if(w)return l.state.loading|=4,l.instance=w,cn(w),w;h=lm(u),(m=fr.get(m))&&Qd(h,m),w=(o.ownerDocument||o).createElement("link"),cn(w);var A=w;return A._p=new Promise(function(N,B){A.onload=N,A.onerror=B}),wn(w,"link",h),l.state.loading|=4,Lc(w,u.precedence,o),l.instance=w;case"script":return w=yo(u.src),(m=o.querySelector(Vs(w)))?(l.instance=m,cn(m),m):(h=u,(m=fr.get(w))&&(h=p({},u),Jd(h,m)),o=o.ownerDocument||o,m=o.createElement("script"),cn(m),wn(m,"link",h),o.head.appendChild(m),l.instance=m);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(h=l.instance,l.state.loading|=4,Lc(h,u.precedence,o));return l.instance}function Lc(o,l,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,w=m,A=0;A<h.length;A++){var N=h[A];if(N.dataset.precedence===l)w=N;else if(w!==m)break}w?w.parentNode.insertBefore(o,w.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(o,l.firstChild))}function Qd(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Jd(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Fc=null;function um(o,l,u){if(Fc===null){var h=new Map,m=Fc=new Map;m.set(u,h)}else m=Fc,h=m.get(u),h||(h=new Map,m.set(u,h));if(h.has(o))return h;for(h.set(o,null),u=u.getElementsByTagName(o),m=0;m<u.length;m++){var w=u[m];if(!(w[ts]||w[An]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var A=w.getAttribute(l)||"";A=o+A;var N=h.get(A);N?N.push(w):h.set(A,[w])}}return h}function fm(o,l,u){o=o.ownerDocument||o,o.head.insertBefore(u,l==="title"?o.querySelector("head > title"):null)}function Q3(o,l,u){if(u===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function dm(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Hs=null;function J3(){}function eS(o,l,u){if(Hs===null)throw Error(r(475));var h=Hs;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=mo(u.href),w=o.querySelector(zs(m));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(h.count++,h=Uc.bind(h),o.then(h,h)),l.state.loading|=4,l.instance=w,cn(w);return}w=o.ownerDocument||o,u=lm(u),(m=fr.get(m))&&Qd(u,m),w=w.createElement("link"),cn(w);var A=w;A._p=new Promise(function(N,B){A.onload=N,A.onerror=B}),wn(w,"link",u),l.instance=w}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(h.count++,l=Uc.bind(h),o.addEventListener("load",l),o.addEventListener("error",l))}}function tS(){if(Hs===null)throw Error(r(475));var o=Hs;return o.stylesheets&&o.count===0&&eh(o,o.stylesheets),0<o.count?function(l){var u=setTimeout(function(){if(o.stylesheets&&eh(o,o.stylesheets),o.unsuspend){var h=o.unsuspend;o.unsuspend=null,h()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(u)}}:null}function Uc(){if(this.count--,this.count===0){if(this.stylesheets)eh(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var zc=null;function eh(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,zc=new Map,l.forEach(nS,o),zc=null,Uc.call(o))}function nS(o,l){if(!(l.state.loading&4)){var u=zc.get(o);if(u)var h=u.get(null);else{u=new Map,zc.set(o,u);for(var m=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<m.length;w++){var A=m[w];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),h=A)}h&&u.set(null,h)}m=l.instance,A=m.getAttribute("data-precedence"),w=u.get(A)||h,w===h&&u.set(null,m),u.set(A,m),this.count++,h=Uc.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),w?w.parentNode.insertBefore(m,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(m,o.firstChild)),l.state.loading|=4}}var Gs={$$typeof:C,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function rS(o,l,u,h,m,w,A,N){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yu(0),this.hiddenUpdates=Yu(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=w,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function hm(o,l,u,h,m,w,A,N,B,X,re,ce){return o=new rS(o,l,u,A,N,B,X,ce),l=1,w===!0&&(l|=24),w=Xn(3,null,null,l),o.current=w,w.stateNode=o,l=jf(),l.refCount++,o.pooledCache=l,l.refCount++,w.memoizedState={element:h,isDehydrated:u,cache:l},Ff(w),o}function pm(o){return o?(o=Xa,o):Xa}function gm(o,l,u,h,m,w){m=pm(m),h.context===null?h.context=m:h.pendingContext=m,h=wi(l),h.payload={element:u},w=w===void 0?null:w,w!==null&&(h.callback=w),u=bi(o,h,l),u!==null&&(Jn(u,o,l),ws(u,o,l))}function vm(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<l?u:l}}function th(o,l){vm(o,l),(o=o.alternate)&&vm(o,l)}function mm(o){if(o.tag===13){var l=Wa(o,67108864);l!==null&&Jn(l,o,67108864),th(o,67108864)}}var Vc=!0;function iS(o,l,u,h){var m=U.T;U.T=null;var w=F.p;try{F.p=2,nh(o,l,u,h)}finally{F.p=w,U.T=m}}function aS(o,l,u,h){var m=U.T;U.T=null;var w=F.p;try{F.p=8,nh(o,l,u,h)}finally{F.p=w,U.T=m}}function nh(o,l,u,h){if(Vc){var m=rh(h);if(m===null)Hd(o,l,h,Hc,u),xm(o,h);else if(sS(m,o,l,u,h))h.stopPropagation();else if(xm(o,h),l&4&&-1<oS.indexOf(o)){for(;m!==null;){var w=ja(m);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var A=nr(w.pendingLanes);if(A!==0){var N=w;for(N.pendingLanes|=2,N.entangledLanes|=2;A;){var B=1<<31-Ye(A);N.entanglements[1]|=B,A&=~B}Pr(w),(ut&6)===0&&(Cc=rt()+500,Bs(0))}}break;case 13:N=Wa(w,2),N!==null&&Jn(N,w,2),Oc(),th(w,2)}if(w=rh(h),w===null&&Hd(o,l,h,Hc,u),w===m)break;m=w}m!==null&&h.stopPropagation()}else Hd(o,l,h,null,u)}}function rh(o){return o=lf(o),ih(o)}var Hc=null;function ih(o){if(Hc=null,o=Ma(o),o!==null){var l=a(o);if(l===null)o=null;else{var u=l.tag;if(u===13){if(o=s(l),o!==null)return o;o=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Hc=o,null}function ym(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case ct:return 2;case Pt:return 8;case V:case fe:return 32;case ve:return 268435456;default:return 32}default:return 32}}var ah=!1,Mi=null,ji=null,Pi=null,$s=new Map,qs=new Map,Bi=[],oS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xm(o,l){switch(o){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":$s.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":qs.delete(l.pointerId)}}function Ws(o,l,u,h,m,w){return o===null||o.nativeEvent!==w?(o={blockedOn:l,domEventName:u,eventSystemFlags:h,nativeEvent:w,targetContainers:[m]},l!==null&&(l=ja(l),l!==null&&mm(l)),o):(o.eventSystemFlags|=h,l=o.targetContainers,m!==null&&l.indexOf(m)===-1&&l.push(m),o)}function sS(o,l,u,h,m){switch(l){case"focusin":return Mi=Ws(Mi,o,l,u,h,m),!0;case"dragenter":return ji=Ws(ji,o,l,u,h,m),!0;case"mouseover":return Pi=Ws(Pi,o,l,u,h,m),!0;case"pointerover":var w=m.pointerId;return $s.set(w,Ws($s.get(w)||null,o,l,u,h,m)),!0;case"gotpointercapture":return w=m.pointerId,qs.set(w,Ws(qs.get(w)||null,o,l,u,h,m)),!0}return!1}function wm(o){var l=Ma(o.target);if(l!==null){var u=a(l);if(u!==null){if(l=u.tag,l===13){if(l=s(u),l!==null){o.blockedOn=l,e_(o.priority,function(){if(u.tag===13){var h=Qn();h=Ku(h);var m=Wa(u,h);m!==null&&Jn(m,u,h),th(u,h)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Gc(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var u=rh(o.nativeEvent);if(u===null){u=o.nativeEvent;var h=new u.constructor(u.type,u);sf=h,u.target.dispatchEvent(h),sf=null}else return l=ja(u),l!==null&&mm(l),o.blockedOn=u,!1;l.shift()}return!0}function bm(o,l,u){Gc(o)&&u.delete(l)}function lS(){ah=!1,Mi!==null&&Gc(Mi)&&(Mi=null),ji!==null&&Gc(ji)&&(ji=null),Pi!==null&&Gc(Pi)&&(Pi=null),$s.forEach(bm),qs.forEach(bm)}function $c(o,l){o.blockedOn===l&&(o.blockedOn=null,ah||(ah=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,lS)))}var qc=null;function _m(o){qc!==o&&(qc=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){qc===o&&(qc=null);for(var l=0;l<o.length;l+=3){var u=o[l],h=o[l+1],m=o[l+2];if(typeof h!="function"){if(ih(h||u)===null)continue;break}var w=ja(u);w!==null&&(o.splice(l,3),l-=3,id(w,{pending:!0,data:m,method:u.method,action:h},h,m))}}))}function Xs(o){function l(B){return $c(B,o)}Mi!==null&&$c(Mi,o),ji!==null&&$c(ji,o),Pi!==null&&$c(Pi,o),$s.forEach(l),qs.forEach(l);for(var u=0;u<Bi.length;u++){var h=Bi[u];h.blockedOn===o&&(h.blockedOn=null)}for(;0<Bi.length&&(u=Bi[0],u.blockedOn===null);)wm(u),u.blockedOn===null&&Bi.shift();if(u=(o.ownerDocument||o).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var m=u[h],w=u[h+1],A=m[Ln]||null;if(typeof w=="function")A||_m(u);else if(A){var N=null;if(w&&w.hasAttribute("formAction")){if(m=w,A=w[Ln]||null)N=A.formAction;else if(ih(m)!==null)continue}else N=A.action;typeof N=="function"?u[h+1]=N:(u.splice(h,3),h-=3),_m(u)}}}function oh(o){this._internalRoot=o}Wc.prototype.render=oh.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var u=l.current,h=Qn();gm(u,h,o,l,null,null)},Wc.prototype.unmount=oh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;gm(o.current,2,null,o,null,null),Oc(),l[ka]=null}};function Wc(o){this._internalRoot=o}Wc.prototype.unstable_scheduleHydration=function(o){if(o){var l=F1();o={blockedOn:null,target:o,priority:l};for(var u=0;u<Bi.length&&l!==0&&l<Bi[u].priority;u++);Bi.splice(u,0,o),u===0&&wm(o)}};var Sm=e.version;if(Sm!=="19.1.1")throw Error(r(527,Sm,"19.1.1"));F.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=f(l),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var cS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xc.isDisabled&&Xc.supportsFiber)try{Oe=Xc.inject(cS),Ae=Xc}catch{}}return Ks.createRoot=function(o,l){if(!i(o))throw Error(r(299));var u=!1,h="",m=Fg,w=Ug,A=zg,N=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(N=l.unstable_transitionCallbacks)),l=hm(o,1,!1,null,null,u,h,m,w,A,N,null),o[ka]=l.current,Vd(o),new oh(l)},Ks.hydrateRoot=function(o,l,u){if(!i(o))throw Error(r(299));var h=!1,m="",w=Fg,A=Ug,N=zg,B=null,X=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(N=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(B=u.unstable_transitionCallbacks),u.formState!==void 0&&(X=u.formState)),l=hm(o,1,!0,l,u??null,h,m,w,A,N,B,X),l.context=pm(null),u=l.current,h=Qn(),h=Ku(h),m=wi(h),m.callback=null,bi(u,m,h),u=h,l.current.lanes=u,es(l,u),Pr(l),o[ka]=l.current,Vd(o),new Wc(l)},Ks.version="19.1.1",Ks}var km;function wS(){if(km)return ch.exports;km=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ch.exports=xS(),ch.exports}var bS=wS();/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Mm="popstate";function _S(n={}){function e(i,a){let{pathname:s="/",search:c="",hash:f=""}=Na(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),Yh("",{pathname:s,search:c,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let s=i.document.querySelector("base"),c="";if(s&&s.getAttribute("href")){let f=i.location.href,d=f.indexOf("#");c=d===-1?f:f.slice(0,d)}return c+"#"+(typeof a=="string"?a:ml(a))}function r(i,a){Dr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return ES(e,t,r,n)}function jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Dr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SS(){return Math.random().toString(36).substring(2,10)}function jm(n,e){return{usr:n.state,key:n.key,idx:e}}function Yh(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Na(e):e,state:t,key:e&&e.key||r||SS()}}function ml({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Na(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function ES(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,c="POP",f=null,d=p();d==null&&(d=0,s.replaceState({...s.state,idx:d},""));function p(){return(s.state||{idx:null}).idx}function g(){c="POP";let E=p(),_=E==null?null:E-d;d=E,f&&f({action:c,location:S.location,delta:_})}function y(E,_){c="PUSH";let T=Yh(S.location,E,_);t&&t(T,E),d=p()+1;let C=jm(T,d),O=S.createHref(T);try{s.pushState(C,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(O)}a&&f&&f({action:c,location:S.location,delta:1})}function x(E,_){c="REPLACE";let T=Yh(S.location,E,_);t&&t(T,E),d=p();let C=jm(T,d),O=S.createHref(T);s.replaceState(C,"",O),a&&f&&f({action:c,location:S.location,delta:0})}function b(E){return AS(E)}let S={get action(){return c},get location(){return n(i,s)},listen(E){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(Mm,g),f=E,()=>{i.removeEventListener(Mm,g),f=null}},createHref(E){return e(i,E)},createURL:b,encodeLocation(E){let _=b(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:x,go(E){return s.go(E)}};return S}function AS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),jt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:ml(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function h2(n,e,t="/"){return CS(n,e,t,!1)}function CS(n,e,t,r){let i=typeof e=="string"?Na(e):e,a=ui(i.pathname||"/",t);if(a==null)return null;let s=p2(n);TS(s);let c=null;for(let f=0;c==null&&f<s.length;++f){let d=LS(a);c=PS(s[f],d,r)}return c}function p2(n,e=[],t=[],r=""){let i=(a,s,c)=>{let f={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};f.relativePath.startsWith("/")&&(jt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let d=ci([r,f.relativePath]),p=t.concat(f);a.children&&a.children.length>0&&(jt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),p2(a.children,e,p,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:MS(d,a.index),routesMeta:p})};return n.forEach((a,s)=>{if(a.path===""||!a.path?.includes("?"))i(a,s);else for(let c of g2(a.path))i(a,s,c)}),e}function g2(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=g2(r.join("/")),c=[];return c.push(...s.map(f=>f===""?a:[a,f].join("/"))),i&&c.push(...s),c.map(f=>n.startsWith("/")&&f===""?"/":f)}function TS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:jS(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var OS=/^:[\w-]+$/,RS=3,DS=2,NS=1,IS=10,kS=-2,Pm=n=>n==="*";function MS(n,e){let t=n.split("/"),r=t.length;return t.some(Pm)&&(r+=kS),e&&(r+=DS),t.filter(i=>!Pm(i)).reduce((i,a)=>i+(OS.test(a)?RS:a===""?NS:IS),r)}function jS(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function PS(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",s=[];for(let c=0;c<r.length;++c){let f=r[c],d=c===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=_u({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},p),y=f.route;if(!g&&d&&t&&!r[r.length-1].route.index&&(g=_u({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),s.push({params:i,pathname:ci([a,g.pathname]),pathnameBase:VS(ci([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=ci([a,g.pathnameBase]))}return s}function _u(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=BS(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:p,isOptional:g},y)=>{if(p==="*"){let b=c[y]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const x=c[y];return g&&!x?d[p]=void 0:d[p]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:s,pattern:n}}function BS(n,e=!1,t=!0){Dr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,c,f)=>(r.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function LS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ui(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function FS(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Na(n):n;return{pathname:t?t.startsWith("/")?t:US(t,e):e,search:HS(r),hash:GS(i)}}function US(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function hh(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function v2(n){let e=zS(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function m2(n,e,t,r=!1){let i;typeof n=="string"?i=Na(n):(i={...n},jt(!i.pathname||!i.pathname.includes("?"),hh("?","pathname","search",i)),jt(!i.pathname||!i.pathname.includes("#"),hh("#","pathname","hash",i)),jt(!i.search||!i.search.includes("#"),hh("#","search","hash",i)));let a=n===""||i.pathname==="",s=a?"/":i.pathname,c;if(s==null)c=t;else{let g=e.length-1;if(!r&&s.startsWith("..")){let y=s.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}c=g>=0?e[g]:"/"}let f=FS(i,c),d=s&&s!=="/"&&s.endsWith("/"),p=(a||s===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(d||p)&&(f.pathname+="/"),f}var ci=n=>n.join("/").replace(/\/\/+/g,"/"),VS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),HS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,GS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function $S(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var y2=["POST","PUT","PATCH","DELETE"];new Set(y2);var qS=["GET",...y2];new Set(qS);var Wo=R.createContext(null);Wo.displayName="DataRouter";var Pu=R.createContext(null);Pu.displayName="DataRouterState";R.createContext(!1);var x2=R.createContext({isTransitioning:!1});x2.displayName="ViewTransition";var WS=R.createContext(new Map);WS.displayName="Fetchers";var XS=R.createContext(null);XS.displayName="Await";var $r=R.createContext(null);$r.displayName="Navigation";var Al=R.createContext(null);Al.displayName="Location";var hi=R.createContext({outlet:null,matches:[],isDataRoute:!1});hi.displayName="Route";var U0=R.createContext(null);U0.displayName="RouteError";function YS(n,{relative:e}={}){jt(Cl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=R.useContext($r),{hash:i,pathname:a,search:s}=Tl(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:ci([t,a])),r.createHref({pathname:c,search:s,hash:i})}function Cl(){return R.useContext(Al)!=null}function pi(){return jt(Cl(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Al).location}var w2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function b2(n){R.useContext($r).static||R.useLayoutEffect(n)}function Bu(){let{isDataRoute:n}=R.useContext(hi);return n?lE():KS()}function KS(){jt(Cl(),"useNavigate() may be used only in the context of a <Router> component.");let n=R.useContext(Wo),{basename:e,navigator:t}=R.useContext($r),{matches:r}=R.useContext(hi),{pathname:i}=pi(),a=JSON.stringify(v2(r)),s=R.useRef(!1);return b2(()=>{s.current=!0}),R.useCallback((f,d={})=>{if(Dr(s.current,w2),!s.current)return;if(typeof f=="number"){t.go(f);return}let p=m2(f,JSON.parse(a),i,d.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ci([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,a,i,n])}R.createContext(null);function Tl(n,{relative:e}={}){let{matches:t}=R.useContext(hi),{pathname:r}=pi(),i=JSON.stringify(v2(t));return R.useMemo(()=>m2(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function ZS(n,e){return _2(n,e)}function _2(n,e,t,r){jt(Cl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=R.useContext($r),{matches:a}=R.useContext(hi),s=a[a.length-1],c=s?s.params:{},f=s?s.pathname:"/",d=s?s.pathnameBase:"/",p=s&&s.route;{let _=p&&p.path||"";S2(f,!p||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let g=pi(),y;if(e){let _=typeof e=="string"?Na(e):e;jt(d==="/"||_.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${_.pathname}" was given in the \`location\` prop.`),y=_}else y=g;let x=y.pathname||"/",b=x;if(d!=="/"){let _=d.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=h2(n,{pathname:b});Dr(p||S!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Dr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=nE(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:ci([d,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:ci([d,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,t,r);return e&&E?R.createElement(Al.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},E):E}function QS(){let n=sE(),e=$S(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",n),s=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:a},"ErrorBoundary")," or"," ",R.createElement("code",{style:a},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:i},t):null,s)}var JS=R.createElement(QS,null),eE=class extends R.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?R.createElement(hi.Provider,{value:this.props.routeContext},R.createElement(U0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tE({routeContext:n,match:e,children:t}){let r=R.useContext(Wo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(hi.Provider,{value:n},t)}function nE(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t?.errors;if(a!=null){let f=i.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);jt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let s=!1,c=-1;if(t)for(let f=0;f<i.length;f++){let d=i[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:p,errors:g}=t,y=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){s=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((f,d,p)=>{let g,y=!1,x=null,b=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||JS,s&&(c<0&&p===0?(S2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):c===p&&(y=!0,b=d.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,p+1)),E=()=>{let _;return g?_=x:y?_=b:d.route.Component?_=R.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=f,R.createElement(tE,{match:d,routeContext:{outlet:f,matches:S,isDataRoute:t!=null},children:_})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?R.createElement(eE,{location:t.location,revalidation:t.revalidation,component:x,error:g,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}function z0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rE(n){let e=R.useContext(Wo);return jt(e,z0(n)),e}function iE(n){let e=R.useContext(Pu);return jt(e,z0(n)),e}function aE(n){let e=R.useContext(hi);return jt(e,z0(n)),e}function V0(n){let e=aE(n),t=e.matches[e.matches.length-1];return jt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function oE(){return V0("useRouteId")}function sE(){let n=R.useContext(U0),e=iE("useRouteError"),t=V0("useRouteError");return n!==void 0?n:e.errors?.[t]}function lE(){let{router:n}=rE("useNavigate"),e=V0("useNavigate"),t=R.useRef(!1);return b2(()=>{t.current=!0}),R.useCallback(async(i,a={})=>{Dr(t.current,w2),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var Bm={};function S2(n,e,t){!e&&!Bm[n]&&(Bm[n]=!0,Dr(!1,t))}R.memo(cE);function cE({routes:n,future:e,state:t}){return _2(n,void 0,t,e)}function Br(n){jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uE({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){jt(!Cl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=n.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof t=="string"&&(t=Na(t));let{pathname:f="/",search:d="",hash:p="",state:g=null,key:y="default"}=t,x=R.useMemo(()=>{let b=ui(f,s);return b==null?null:{location:{pathname:b,search:d,hash:p,state:g,key:y},navigationType:r}},[s,f,d,p,g,y,r]);return Dr(x!=null,`<Router basename="${s}"> is not able to match the URL "${f}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:R.createElement($r.Provider,{value:c},R.createElement(Al.Provider,{children:e,value:x}))}function fE({children:n,location:e}){return ZS(Kh(n),e)}function Kh(n,e=[]){let t=[];return R.Children.forEach(n,(r,i)=>{if(!R.isValidElement(r))return;let a=[...e,i];if(r.type===R.Fragment){t.push.apply(t,Kh(r.props.children,a));return}jt(r.type===Br,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Kh(r.props.children,a)),t.push(s)}),t}var du="get",hu="application/x-www-form-urlencoded";function Lu(n){return n!=null&&typeof n.tagName=="string"}function dE(n){return Lu(n)&&n.tagName.toLowerCase()==="button"}function hE(n){return Lu(n)&&n.tagName.toLowerCase()==="form"}function pE(n){return Lu(n)&&n.tagName.toLowerCase()==="input"}function gE(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vE(n,e){return n.button===0&&(!e||e==="_self")&&!gE(n)}var Yc=null;function mE(){if(Yc===null)try{new FormData(document.createElement("form"),0),Yc=!1}catch{Yc=!0}return Yc}var yE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ph(n){return n!=null&&!yE.has(n)?(Dr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hu}"`),null):n}function xE(n,e){let t,r,i,a,s;if(hE(n)){let c=n.getAttribute("action");r=c?ui(c,e):null,t=n.getAttribute("method")||du,i=ph(n.getAttribute("enctype"))||hu,a=new FormData(n)}else if(dE(n)||pE(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||c.getAttribute("action");if(r=f?ui(f,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||du,i=ph(n.getAttribute("formenctype"))||ph(c.getAttribute("enctype"))||hu,a=new FormData(c,n),!mE()){let{name:d,type:p,value:g}=n;if(p==="image"){let y=d?`${d}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else d&&a.append(d,g)}}else{if(Lu(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=du,r=null,i=hu,s=n}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function H0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wE(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&ui(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function bE(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _E(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function SE(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await bE(a,t);return s.links?s.links():[]}return[]}));return TE(r.flat(1).filter(_E).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Lm(n,e,t,r,i,a){let s=(f,d)=>t[d]?f.route.id!==t[d].route.id:!0,c=(f,d)=>t[d].pathname!==f.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==f.params["*"];return a==="assets"?e.filter((f,d)=>s(f,d)||c(f,d)):a==="data"?e.filter((f,d)=>{let p=r.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(s(f,d)||c(f,d))return!0;if(f.route.shouldRevalidate){let g=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function EE(n,e,{includeHydrateFallback:t}={}){return AE(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function AE(n){return[...new Set(n)]}function CE(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function TE(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(CE(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function E2(){let n=R.useContext(Wo);return H0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function OE(){let n=R.useContext(Pu);return H0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var G0=R.createContext(void 0);G0.displayName="FrameworkContext";function A2(){let n=R.useContext(G0);return H0(n,"You must render this element inside a <HydratedRouter> element"),n}function RE(n,e){let t=R.useContext(G0),[r,i]=R.useState(!1),[a,s]=R.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:d,onMouseLeave:p,onTouchStart:g}=e,y=R.useRef(null);R.useEffect(()=>{if(n==="render"&&s(!0),n==="viewport"){let S=_=>{_.forEach(T=>{s(T.isIntersecting)})},E=new IntersectionObserver(S,{threshold:.5});return y.current&&E.observe(y.current),()=>{E.disconnect()}}},[n]),R.useEffect(()=>{if(r){let S=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(S)}}},[r]);let x=()=>{i(!0)},b=()=>{i(!1),s(!1)};return t?n!=="intent"?[a,y,{}]:[a,y,{onFocus:Zs(c,x),onBlur:Zs(f,b),onMouseEnter:Zs(d,x),onMouseLeave:Zs(p,b),onTouchStart:Zs(g,x)}]:[!1,y,{}]}function Zs(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function DE({page:n,...e}){let{router:t}=E2(),r=R.useMemo(()=>h2(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?R.createElement(IE,{page:n,matches:r,...e}):null}function NE(n){let{manifest:e,routeModules:t}=A2(),[r,i]=R.useState([]);return R.useEffect(()=>{let a=!1;return SE(n,e,t).then(s=>{a||i(s)}),()=>{a=!0}},[n,e,t]),r}function IE({page:n,matches:e,...t}){let r=pi(),{manifest:i,routeModules:a}=A2(),{basename:s}=E2(),{loaderData:c,matches:f}=OE(),d=R.useMemo(()=>Lm(n,e,f,i,r,"data"),[n,e,f,i,r]),p=R.useMemo(()=>Lm(n,e,f,i,r,"assets"),[n,e,f,i,r]),g=R.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let b=new Set,S=!1;if(e.forEach(_=>{let T=i.routes[_.route.id];!T||!T.hasLoader||(!d.some(C=>C.route.id===_.route.id)&&_.route.id in c&&a[_.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:b.add(_.route.id))}),b.size===0)return[];let E=wE(n,s,"data");return S&&b.size>0&&E.searchParams.set("_routes",e.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[E.pathname+E.search]},[s,c,r,i,d,e,n,a]),y=R.useMemo(()=>EE(p,i),[p,i]),x=NE(p);return R.createElement(R.Fragment,null,g.map(b=>R.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),y.map(b=>R.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),x.map(({key:b,link:S})=>R.createElement("link",{key:b,nonce:t.nonce,...S})))}function kE(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var C2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{C2&&(window.__reactRouterVersion="7.8.0")}catch{}function ME({basename:n,children:e,window:t}){let r=R.useRef();r.current==null&&(r.current=_S({window:t,v5Compat:!0}));let i=r.current,[a,s]=R.useState({action:i.action,location:i.location}),c=R.useCallback(f=>{R.startTransition(()=>s(f))},[s]);return R.useLayoutEffect(()=>i.listen(c),[i,c]),R.createElement(uE,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var T2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,O2=R.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:c,target:f,to:d,preventScrollReset:p,viewTransition:g,...y},x){let{basename:b}=R.useContext($r),S=typeof d=="string"&&T2.test(d),E,_=!1;if(typeof d=="string"&&S&&(E=d,C2))try{let $=new URL(window.location.href),ne=d.startsWith("//")?new URL($.protocol+d):new URL(d),se=ui(ne.pathname,b);ne.origin===$.origin&&se!=null?d=se+ne.search+ne.hash:_=!0}catch{Dr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=YS(d,{relative:i}),[C,O,D]=RE(r,y),j=BE(d,{replace:s,state:c,target:f,preventScrollReset:p,relative:i,viewTransition:g});function L($){e&&e($),$.defaultPrevented||j($)}let H=R.createElement("a",{...y,...D,href:E||T,onClick:_||a?e:L,ref:kE(x,O),target:f,"data-discover":!S&&t==="render"?"true":void 0});return C&&!S?R.createElement(R.Fragment,null,H,R.createElement(DE,{page:T})):H});O2.displayName="Link";var Lr=R.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:c,children:f,...d},p){let g=Tl(s,{relative:d.relative}),y=pi(),x=R.useContext(Pu),{navigator:b,basename:S}=R.useContext($r),E=x!=null&&VE(g)&&c===!0,_=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,T=y.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(T=T.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&S&&(C=ui(C,S)||C);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let D=T===_||!i&&T.startsWith(_)&&T.charAt(O)==="/",j=C!=null&&(C===_||!i&&C.startsWith(_)&&C.charAt(_.length)==="/"),L={isActive:D,isPending:j,isTransitioning:E},H=D?e:void 0,$;typeof r=="function"?$=r(L):$=[r,D?"active":null,j?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let ne=typeof a=="function"?a(L):a;return R.createElement(O2,{...d,"aria-current":H,className:$,ref:p,style:ne,to:s,viewTransition:c},typeof f=="function"?f(L):f)});Lr.displayName="NavLink";var jE=R.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:s=du,action:c,onSubmit:f,relative:d,preventScrollReset:p,viewTransition:g,...y},x)=>{let b=UE(),S=zE(c,{relative:d}),E=s.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&T2.test(c),T=C=>{if(f&&f(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,D=O?.getAttribute("formmethod")||s;b(O||C.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:i,state:a,relative:d,preventScrollReset:p,viewTransition:g})};return R.createElement("form",{ref:x,method:E,action:S,onSubmit:r?f:T,...y,"data-discover":!_&&n==="render"?"true":void 0})});jE.displayName="Form";function PE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R2(n){let e=R.useContext(Wo);return jt(e,PE(n)),e}function BE(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let c=Bu(),f=pi(),d=Tl(n,{relative:a});return R.useCallback(p=>{if(vE(p,e)){p.preventDefault();let g=t!==void 0?t:ml(f)===ml(d);c(n,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[f,c,d,t,r,e,n,i,a,s])}var LE=0,FE=()=>`__${String(++LE)}__`;function UE(){let{router:n}=R2("useSubmit"),{basename:e}=R.useContext($r),t=oE();return R.useCallback(async(r,i={})=>{let{action:a,method:s,encType:c,formData:f,body:d}=xE(r,e);if(i.navigate===!1){let p=i.fetcherKey||FE();await n.fetch(p,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||s,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||s,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function zE(n,{relative:e}={}){let{basename:t}=R.useContext($r),r=R.useContext(hi);jt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Tl(n||".",{relative:e})},s=pi();if(n==null){a.search=s.search;let c=new URLSearchParams(a.search),f=c.getAll("index");if(f.some(p=>p==="")){c.delete("index"),f.filter(g=>g).forEach(g=>c.append("index",g));let p=c.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ci([t,a.pathname])),ml(a)}function VE(n,{relative:e}={}){let t=R.useContext(x2);jt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=R2("useViewTransitionState"),i=Tl(n,{relative:e});if(!t.isTransitioning)return!1;let a=ui(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=ui(t.nextLocation.pathname,r)||t.nextLocation.pathname;return _u(i.pathname,s)!=null||_u(i.pathname,a)!=null}const HE="modulepreload",GE=function(n){return"/IARE-Canteen-Web/"+n},Fm={},Ol=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let f=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=s?.nonce||s?.getAttribute("nonce");i=f(t.map(d=>{if(d=GE(d),d in Fm)return;Fm[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":HE,p||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((x,b)=>{y.addEventListener("load",x),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return i.then(s=>{for(const c of s||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},$E=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Xo);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class $0 extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class qE extends $0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Um extends $0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class zm extends $0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zh;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Zh||(Zh={}));var WE=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};class XE{constructor(e,{headers:t={},customFetch:r,region:i=Zh.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=$E(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return WE(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:s}=t;let c={},{region:f}=t;f||(f=this.region);const d=new URL(`${this.url}/${e}`);f&&f!=="any"&&(c["x-region"]=f,d.searchParams.set("forceFunctionRegion",f));let p;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",p=s):typeof s=="string"?(c["Content-Type"]="text/plain",p=s):typeof FormData<"u"&&s instanceof FormData?p=s:(c["Content-Type"]="application/json",p=JSON.stringify(s)));const g=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:p}).catch(S=>{throw new qE(S)}),y=g.headers.get("x-relay-error");if(y&&y==="true")throw new Um(g);if(!g.ok)throw new zm(g);let x=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return x==="application/json"?b=yield g.json():x==="application/octet-stream"?b=yield g.blob():x==="text/event-stream"?b=g:x==="multipart/form-data"?b=yield g.formData():b=yield g.text(),{data:b,error:null,response:g}}catch(i){return{data:null,error:i,response:i instanceof zm||i instanceof Um?i.context:void 0}}})}}var hn={},xo={},wo={},bo={},_o={},So={},YE=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vo=YE();const KE=Vo.fetch,D2=Vo.fetch.bind(Vo),N2=Vo.Headers,ZE=Vo.Request,QE=Vo.Response,Xo=Object.freeze(Object.defineProperty({__proto__:null,Headers:N2,Request:ZE,Response:QE,default:D2,fetch:KE},Symbol.toStringTag,{value:"Module"})),JE=fS(Xo);var Kc={},Vm;function I2(){if(Vm)return Kc;Vm=1,Object.defineProperty(Kc,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Kc.default=n,Kc}var Hm;function k2(){if(Hm)return So;Hm=1;var n=So&&So.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(So,"__esModule",{value:!0});const e=n(JE),t=n(I2());class r{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,s){return this.headers=Object.assign({},this.headers),this.headers[a]=s,this}then(a,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let f=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var p,g,y;let x=null,b=null,S=null,E=d.status,_=d.statusText;if(d.ok){if(this.method!=="HEAD"){const D=await d.text();D===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?b=D:b=JSON.parse(D))}const C=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),O=(g=d.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");C&&O&&O.length>1&&(S=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(x={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,S=null,E=406,_="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const C=await d.text();try{x=JSON.parse(C),Array.isArray(x)&&d.status===404&&(b=[],x=null,E=200,_="OK")}catch{d.status===404&&C===""?(E=204,_="No Content"):x={message:C}}if(x&&this.isMaybeSingle&&(!((y=x?.details)===null||y===void 0)&&y.includes("0 rows"))&&(x=null,E=200,_="OK"),x&&this.shouldThrowOnError)throw new t.default(x)}return{error:x,data:b,count:S,status:E,statusText:_}});return this.shouldThrowOnError||(f=f.catch(d=>{var p,g,y;return{error:{message:`${(p=d?.name)!==null&&p!==void 0?p:"FetchError"}: ${d?.message}`,details:`${(g=d?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=d?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),f.then(a,s)}returns(){return this}overrideTypes(){return this}}return So.default=r,So}var Gm;function M2(){if(Gm)return _o;Gm=1;var n=_o&&_o.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_o,"__esModule",{value:!0});const e=n(k2());class t extends e.default{select(i){let a=!1;const s=(i??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:a=!0,nullsFirst:s,foreignTable:c,referencedTable:f=c}={}){const d=f?`${f}.order`:"order",p=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${p?`${p},`:""}${i}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:s=a}={}){const c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,a,{foreignTable:s,referencedTable:c=s}={}){const f=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${i}`),this.url.searchParams.set(d,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:a=!1,settings:s=!1,buffers:c=!1,wal:f=!1,format:d="text"}={}){var p;const g=[i?"analyze":null,a?"verbose":null,s?"settings":null,c?"buffers":null,f?"wal":null].filter(Boolean).join("|"),y=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${y}"; options=${g};`,d==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return _o.default=t,_o}var $m;function q0(){if($m)return bo;$m=1;var n=bo&&bo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bo,"__esModule",{value:!0});const e=n(M2());class t extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const s=Array.from(new Set(a)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${s})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:s,type:c}={}){let f="";c==="plain"?f="pl":c==="phrase"?f="ph":c==="websearch"&&(f="w");const d=s===void 0?"":`(${s})`;return this.url.searchParams.append(i,`${f}fts${d}.${a}`),this}match(i){return Object.entries(i).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(i,a,s){return this.url.searchParams.append(i,`not.${a}.${s}`),this}or(i,{foreignTable:a,referencedTable:s=a}={}){const c=s?`${s}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,a,s){return this.url.searchParams.append(i,`${a}.${s}`),this}}return bo.default=t,bo}var qm;function j2(){if(qm)return wo;qm=1;var n=wo&&wo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wo,"__esModule",{value:!0});const e=n(q0());class t{constructor(i,{headers:a={},schema:s,fetch:c}){this.url=i,this.headers=a,this.schema=s,this.fetch=c}select(i,{head:a=!1,count:s}={}){const c=a?"HEAD":"GET";let f=!1;const d=(i??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",d),s&&(this.headers.Prefer=`count=${s}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:a,defaultToNull:s=!0}={}){const c="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),a&&f.push(`count=${a}`),s||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(i)){const d=i.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(d.length>0){const p=[...new Set(d)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:a,ignoreDuplicates:s=!1,count:c,defaultToNull:f=!0}={}){const d="POST",p=[`resolution=${s?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&p.push(this.headers.Prefer),c&&p.push(`count=${c}`),f||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(i)){const g=i.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(g.length>0){const y=[...new Set(g)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:a}={}){const s="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),this.headers.Prefer=c.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const a="DELETE",s=[];return i&&s.push(`count=${i}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return wo.default=t,wo}var Qs={},Js={},Wm;function eA(){return Wm||(Wm=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.version=void 0,Js.version="0.0.0-automated"),Js}var Xm;function tA(){if(Xm)return Qs;Xm=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.DEFAULT_HEADERS=void 0;const n=eA();return Qs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Qs}var Ym;function nA(){if(Ym)return xo;Ym=1;var n=xo&&xo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(xo,"__esModule",{value:!0});const e=n(j2()),t=n(q0()),r=tA();class i{constructor(s,{headers:c={},schema:f,fetch:d}={}){this.url=s,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),c),this.schemaName=f,this.fetch=d}from(s){const c=new URL(`${this.url}/${s}`);return new e.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new i(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,c={},{head:f=!1,get:d=!1,count:p}={}){let g;const y=new URL(`${this.url}/rpc/${s}`);let x;f||d?(g=f?"HEAD":"GET",Object.entries(c).filter(([S,E])=>E!==void 0).map(([S,E])=>[S,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([S,E])=>{y.searchParams.append(S,E)})):(g="POST",x=c);const b=Object.assign({},this.headers);return p&&(b.Prefer=`count=${p}`),new t.default({method:g,url:y,headers:b,schema:this.schemaName,body:x,fetch:this.fetch,allowEmpty:!1})}}return xo.default=i,xo}var Km;function rA(){if(Km)return hn;Km=1;var n=hn&&hn.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(hn,"__esModule",{value:!0}),hn.PostgrestError=hn.PostgrestBuilder=hn.PostgrestTransformBuilder=hn.PostgrestFilterBuilder=hn.PostgrestQueryBuilder=hn.PostgrestClient=void 0;const e=n(nA());hn.PostgrestClient=e.default;const t=n(j2());hn.PostgrestQueryBuilder=t.default;const r=n(q0());hn.PostgrestFilterBuilder=r.default;const i=n(M2());hn.PostgrestTransformBuilder=i.default;const a=n(k2());hn.PostgrestBuilder=a.default;const s=n(I2());return hn.PostgrestError=s.default,hn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:s.default},hn}var iA=rA();const aA=f2(iA),{PostgrestClient:oA,PostgrestQueryBuilder:e7,PostgrestFilterBuilder:t7,PostgrestTransformBuilder:n7,PostgrestBuilder:r7,PostgrestError:i7}=aA;class sA{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const lA="2.15.1",cA=`realtime-js/${lA}`,uA="1.0.0",Qh=1e4,fA=1e3,dA=100;var cl;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(cl||(cl={}));var en;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(en||(en={}));var Cr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Cr||(Cr={}));var Jh;(function(n){n.websocket="websocket"})(Jh||(Jh={}));var Ea;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ea||(Ea={}));class hA{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const c=r.decode(e.slice(s,s+i));s=s+i;const f=r.decode(e.slice(s,s+a));s=s+a;const d=JSON.parse(r.decode(e.slice(s,e.byteLength)));return{ref:null,topic:c,event:f,payload:d}}}class P2{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(_t||(_t={}));const Zm=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,s)=>(a[s]=pA(s,n,e,i),a),{})},pA=(n,e,t,r)=>{const i=e.find(c=>c.name===n),a=i?.type,s=t[n];return a&&!r.includes(a)?B2(a,s):e0(s)},B2=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return yA(e,t)}switch(n){case _t.bool:return gA(e);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return vA(e);case _t.json:case _t.jsonb:return mA(e);case _t.timestamp:return xA(e);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return e0(e);default:return e0(e)}},e0=n=>n,gA=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},vA=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},mA=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},yA=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let a;const s=n.slice(1,t);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(c=>B2(e,c))}return n},xA=n=>typeof n=="string"?n.replace(" ","T"):n,L2=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class gh{constructor(e,t,r={},i=Qh){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qm;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Qm||(Qm={}));class ul{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:s,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ul.syncState(this.state,i,a,s),this.pendingDiffs.forEach(f=>{this.state=ul.syncDiff(this.state,f,a,s)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ul.syncDiff(this.state,i,a,s),c())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const a=this.cloneDeep(e),s=this.transformState(t),c={},f={};return this.map(a,(d,p)=>{s[d]||(f[d]=p)}),this.map(s,(d,p)=>{const g=a[d];if(g){const y=p.map(E=>E.presence_ref),x=g.map(E=>E.presence_ref),b=p.filter(E=>x.indexOf(E.presence_ref)<0),S=g.filter(E=>y.indexOf(E.presence_ref)<0);b.length>0&&(c[d]=b),S.length>0&&(f[d]=S)}else c[d]=p}),this.syncDiff(a,{joins:c,leaves:f},r,i)}static syncDiff(e,t,r,i){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(c,f)=>{var d;const p=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(f),p.length>0){const g=e[c].map(x=>x.presence_ref),y=p.filter(x=>g.indexOf(x.presence_ref)<0);e[c].unshift(...y)}r(c,p,f)}),this.map(s,(c,f)=>{let d=e[c];if(!d)return;const p=f.map(g=>g.presence_ref);d=d.filter(g=>p.indexOf(g.presence_ref)<0),e[c]=d,i(c,d,f),d.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jm;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Jm||(Jm={}));var fl;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(fl||(fl={}));var li;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(li||(li={}));class W0{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=en.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new gh(this,Cr.join,this.params,this.timeout),this.rejoinTimer=new P2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=en.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=en.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Cr.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new ul(this),this.broadcastEndpointURL=L2(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==en.closed){const{config:{broadcast:a,presence:s,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[fl.PRESENCE]&&this.bindings[fl.PRESENCE].length>0,p={},g={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:d}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(li.CHANNEL_ERROR,y)),this._onClose(()=>e?.(li.CLOSED)),this.updateJoinPayload(Object.assign({config:g},p)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var x;if(this.socket.setAuth(),y===void 0){e?.(li.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,S=(x=b?.length)!==null&&x!==void 0?x:0,E=[];for(let _=0;_<S;_++){const T=b[_],{filter:{event:C,schema:O,table:D,filter:j}}=T,L=y&&y[_];if(L&&L.event===C&&L.schema===O&&L.table===D&&L.filter===j)E.push(Object.assign(Object.assign({},T),{id:L.id}));else{this.unsubscribe(),this.state=en.errored,e?.(li.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(li.SUBSCRIBED);return}}).receive("error",y=>{this.state=en.errored,e?.(li.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(li.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===en.joined&&e===fl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:s}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,c,f;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(c=(s=this.params)===null||s===void 0?void 0:s.config)===null||c===void 0?void 0:c.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=en.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Cr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new gh(this,Cr.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=en.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),s}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new gh(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>dA){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,a;const s=e.toLocaleLowerCase(),{close:c,error:f,leave:d,join:p}=Cr;if(r&&[c,f,d,p].indexOf(s)>=0&&r!==this._joinRef())return;let y=this._onMessage(s,t,r);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var b,S,E;return((b=x.filter)===null||b===void 0?void 0:b.event)==="*"||((E=(S=x.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===s}).map(x=>x.callback(y,r)):(a=this.bindings[s])===null||a===void 0||a.filter(x=>{var b,S,E,_,T,C;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in x){const O=x.id,D=(b=x.filter)===null||b===void 0?void 0:b.event;return O&&((S=t.ids)===null||S===void 0?void 0:S.includes(O))&&(D==="*"||D?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const O=(T=(_=x?.filter)===null||_===void 0?void 0:_.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return O==="*"||O===((C=t?.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===s}).map(x=>{if(typeof y=="object"&&"ids"in y){const b=y.data,{schema:S,table:E,commit_timestamp:_,type:T,errors:C}=b;y=Object.assign(Object.assign({},{schema:S,table:E,commit_timestamp:_,eventType:T,new:{},old:{},errors:C}),this._getPayloadRecords(b))}x.callback(y,r)})}_isClosed(){return this.state===en.closed}_isJoined(){return this.state===en.joined}_isJoining(){return this.state===en.joining}_isLeaving(){return this.state===en.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&W0.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Cr.close,{},e)}_onError(e){this._on(Cr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=en.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Zm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Zm(e.columns,e.old_record)),t}}const ey=()=>{},Zc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},wA=[1e3,2e3,5e3,1e4],bA=1e4,_A=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class SA{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qh,this.transport=null,this.heartbeatIntervalMs=Zc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ey,this.ref=0,this.reconnectTimer=null,this.logger=ey,this.conn=null,this.sendBuffer=[],this.serializer=new hA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...s)=>Ol(async()=>{const{default:c}=await Promise.resolve().then(()=>Xo);return{default:c}},void 0).then(({default:c})=>c(...s)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...s)=>a(...s)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Jh.websocket}`,this.httpEndpoint=L2(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:uA}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case cl.connecting:return Ea.Connecting;case cl.open:return Ea.Open;case cl.closing:return Ea.Closing;default:return Ea.Closed}}isConnected(){return this.connectionState()===Ea.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new W0(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:r,payload:i,ref:a}=e,s=()=>{this.encode(e,c=>{var f;(f=this.conn)===null||f===void 0||f.send(c)})};this.log("push",`${t} ${r} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(fA,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Zc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:s}=t,c=s?`(${s})`:"",f=a.status||"";this.log("receive",`${f} ${r} ${i} ${c}`.trim(),a),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,a,s)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Cr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([_A],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:cA};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Cr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new P2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,a,s,c,f,d;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Qh,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Zc.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=e?.accessToken)!==null&&s!==void 0?s:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(p=>wA[p-1]||bA),this.encode=(f=e?.encode)!==null&&f!==void 0?f:((p,g)=>g(JSON.stringify(p))),this.decode=(d=e?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class X0 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function rn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class EA extends X0{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class t0 extends X0{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var AA=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};const F2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Xo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},CA=()=>AA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ol(()=>Promise.resolve().then(()=>Xo),void 0)).Response:Response}),n0=n=>{if(Array.isArray(n))return n.map(t=>n0(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=n0(r)}),e},TA=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ia=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};const vh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),OA=(n,e,t)=>Ia(void 0,void 0,void 0,function*(){const r=yield CA();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{const a=n.status||500,s=i?.statusCode||a+"";e(new EA(vh(i),a,s))}).catch(i=>{e(new t0(vh(i),i))}):e(new t0(vh(n),n))}),RA=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(TA(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Rl(n,e,t,r,i,a){return Ia(this,void 0,void 0,function*(){return new Promise((s,c)=>{n(t,RA(e,r,i,a)).then(f=>{if(!f.ok)throw f;return r?.noResolveJson?f:f.json()}).then(f=>s(f)).catch(f=>OA(f,c,r))})})}function Su(n,e,t,r){return Ia(this,void 0,void 0,function*(){return Rl(n,"GET",e,t,r)})}function Fr(n,e,t,r,i){return Ia(this,void 0,void 0,function*(){return Rl(n,"POST",e,r,i,t)})}function r0(n,e,t,r,i){return Ia(this,void 0,void 0,function*(){return Rl(n,"PUT",e,r,i,t)})}function DA(n,e,t,r){return Ia(this,void 0,void 0,function*(){return Rl(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function U2(n,e,t,r,i){return Ia(this,void 0,void 0,function*(){return Rl(n,"DELETE",e,r,i,t)})}var kn=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};const NA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ty={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class IA{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=F2(i)}uploadOrUpdate(e,t,r,i){return kn(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},ty),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const f=s.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),f&&a.append("metadata",this.encodeMetadata(f)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",s.cacheControl),f&&a.append("metadata",this.encodeMetadata(f))):(a=r,c["cache-control"]=`max-age=${s.cacheControl}`,c["content-type"]=s.contentType,f&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),i?.headers&&(c=Object.assign(Object.assign({},c),i.headers));const d=this._removeEmptyFolders(t),p=this._getFinalPath(d),g=yield(e=="PUT"?r0:Fr)(this.fetch,`${this.url}/object/${p}`,a,Object.assign({headers:c},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:d,id:g.Id,fullPath:g.Key},error:null}}catch(a){if(rn(a))return{data:null,error:a};throw a}})}upload(e,t,r){return kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return kn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${s}`);c.searchParams.set("token",t);try{let f;const d=Object.assign({upsert:ty.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",d.cacheControl)):(f=r,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType);const g=yield r0(this.fetch,c.toString(),f,{headers:p});return{data:{path:a,fullPath:g.Key},error:null}}catch(f){if(rn(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return kn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const a=yield Fr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+a.url),c=s.searchParams.get("token");if(!c)throw new X0("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:c},error:null}}catch(r){if(rn(r))return{data:null,error:r};throw r}})}update(e,t,r){return kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return kn(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(rn(i))return{data:null,error:i};throw i}})}copy(e,t,r){return kn(this,void 0,void 0,function*(){try{return{data:{path:(yield Fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(rn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return kn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Fr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(rn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return kn(this,void 0,void 0,function*(){try{const i=yield Fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(rn(i))return{data:null,error:i};throw i}})}download(e,t){return kn(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),s=a?`?${a}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield Su(this.fetch,`${this.url}/${i}/${c}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(rn(c))return{data:null,error:c};throw c}})}info(e){return kn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Su(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:n0(r),error:null}}catch(r){if(rn(r))return{data:null,error:r};throw r}})}exists(e){return kn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield DA(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(rn(r)&&r instanceof t0){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const c=typeof t?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(t?.transform||{});f!==""&&i.push(f);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(e){return kn(this,void 0,void 0,function*(){try{return{data:yield U2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(rn(t))return{data:null,error:t};throw t}})}list(e,t,r){return kn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},NA),t),{prefix:e||""});return{data:yield Fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(rn(i))return{data:null,error:i};throw i}})}listV2(e,t){return kn(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Fr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(rn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const kA="2.11.0",MA={"X-Client-Info":`storage-js/${kA}`};var Eo=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};class jA{constructor(e,t={},r,i){const a=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},MA),t),this.fetch=F2(r)}listBuckets(){return Eo(this,void 0,void 0,function*(){try{return{data:yield Su(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(rn(e))return{data:null,error:e};throw e}})}getBucket(e){return Eo(this,void 0,void 0,function*(){try{return{data:yield Su(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(rn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Eo(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rn(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Eo(this,void 0,void 0,function*(){try{return{data:yield r0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Eo(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(rn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Eo(this,void 0,void 0,function*(){try{return{data:yield U2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(rn(t))return{data:null,error:t};throw t}})}}class PA extends jA{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new IA(this.url,this.headers,e,this.fetch)}}const BA="2.55.0";let il="";typeof Deno<"u"?il="deno":typeof document<"u"?il="web":typeof navigator<"u"&&navigator.product==="ReactNative"?il="react-native":il="node";const LA={"X-Client-Info":`supabase-js-${il}/${BA}`},FA={headers:LA},UA={schema:"public"},zA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},VA={};var HA=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};const GA=n=>{let e;return n?e=n:typeof fetch>"u"?e=D2:e=fetch,(...t)=>e(...t)},$A=()=>typeof Headers>"u"?N2:Headers,qA=(n,e,t)=>{const r=GA(t),i=$A();return(a,s)=>HA(void 0,void 0,void 0,function*(){var c;const f=(c=yield e())!==null&&c!==void 0?c:n;let d=new i(s?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${f}`),r(a,Object.assign(Object.assign({},s),{headers:d}))})};var WA=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};function XA(n){return n.endsWith("/")?n:n+"/"}function YA(n,e){var t,r;const{db:i,auth:a,realtime:s,global:c}=n,{db:f,auth:d,realtime:p,global:g}=e,y={db:Object.assign(Object.assign({},f),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},p),s),storage:{},global:Object.assign(Object.assign(Object.assign({},g),c),{headers:Object.assign(Object.assign({},(t=g?.headers)!==null&&t!==void 0?t:{}),(r=c?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>WA(this,void 0,void 0,function*(){return""})};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}const z2="2.71.1",Do=30*1e3,i0=3,mh=i0*Do,KA="http://localhost:9999",ZA="supabase.auth.token",QA={"X-Client-Info":`gotrue-js/${z2}`},a0="X-Supabase-Api-Version",V2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},JA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eC=600*1e3;class Y0 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Be(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class tC extends Y0{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function nC(n){return Be(n)&&n.name==="AuthApiError"}class H2 extends Y0{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Zi extends Y0{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Vi extends Zi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rC(n){return Be(n)&&n.name==="AuthSessionMissingError"}class Qc extends Zi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jc extends Zi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class eu extends Zi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iC(n){return Be(n)&&n.name==="AuthImplicitGrantRedirectError"}class ny extends Zi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class o0 extends Zi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function yh(n){return Be(n)&&n.name==="AuthRetryableFetchError"}class ry extends Zi{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class s0 extends Zi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Eu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),iy=` 	
\r=`.split(""),aC=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<iy.length;e+=1)n[iy[e].charCodeAt(0)]=-2;for(let e=0;e<Eu.length;e+=1)n[Eu[e].charCodeAt(0)]=e;return n})();function ay(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Eu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Eu[r]),e.queuedBits-=6}}function G2(n,e,t){const r=aC[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function oy(n){const e=[],t=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{lC(s,r,t)};for(let s=0;s<n.length;s+=1)G2(n.charCodeAt(s),i,a);return e.join("")}function oC(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function sC(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}oC(r,e)}}function lC(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function cC(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)G2(n.charCodeAt(i),t,r);return new Uint8Array(e)}function uC(n){const e=[];return sC(n,t=>e.push(t)),new Uint8Array(e)}function fC(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>ay(i,t,r)),ay(null,t,r),e.join("")}function dC(n){return Math.round(Date.now()/1e3)+n}function hC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Er=()=>typeof window<"u"&&typeof document<"u",va={tested:!1,writable:!1},$2=()=>{if(!Er())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(va.tested)return va.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),va.tested=!0,va.writable=!0}catch{va.tested=!0,va.writable=!1}return va.writable};function pC(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const q2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Xo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},gC=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",No=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ma=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Fi=async(n,e)=>{await n.removeItem(e)};class Fu{constructor(){this.promise=new Fu.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Fu.promiseConstructor=Promise;function xh(n){const e=n.split(".");if(e.length!==3)throw new s0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!JA.test(e[r]))throw new s0("JWT not in base64url format");return{header:JSON.parse(oy(e[0])),payload:JSON.parse(oy(e[1])),signature:cC(e[2]),raw:{header:e[0],payload:e[1]}}}async function vC(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function mC(n,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await n(a);if(!e(a,null,s)){r(s);return}}catch(s){if(!e(a,s)){i(s);return}}})()})}function yC(n){return("0"+n.toString(16)).substr(-2)}function xC(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,yC).join("")}async function wC(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function bC(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await wC(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ao(n,e,t=!1){const r=xC();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await No(n,`${e}-code-verifier`,i);const a=await bC(r);return[a,r===a?"plain":"s256"]}const _C=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function SC(n){const e=n.headers.get(a0);if(!e||!e.match(_C))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function EC(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function AC(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const CC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Co(n){if(!CC.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wh(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sy(n){return JSON.parse(JSON.stringify(n))}var TC=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const ba=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),OC=[502,503,504];async function ly(n){var e;if(!gC(n))throw new o0(ba(n),0);if(OC.includes(n.status))throw new o0(ba(n),n.status);let t;try{t=await n.json()}catch(a){throw new H2(ba(a),a)}let r;const i=SC(n);if(i&&i.getTime()>=V2["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new ry(ba(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Vi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new ry(ba(t),n.status,t.weak_password.reasons);throw new tC(ba(t),n.status||500,r)}const RC=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function We(n,e,t,r){var i;const a=Object.assign({},r?.headers);a[a0]||(a[a0]=V2["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const c=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",f=await DC(n,e,t+c,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function DC(n,e,t,r,i,a){const s=RC(e,r,i,a);let c;try{c=await n(t,Object.assign({},s))}catch(f){throw console.error(f),new o0(ba(f),0)}if(c.ok||await ly(c),r?.noResolveJson)return c;try{return await c.json()}catch(f){await ly(f)}}function si(n){var e;let t=null;MC(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=dC(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function cy(n){const e=si(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function $i(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function NC(n){return{data:n,error:null}}function IC(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a}=n,s=TC(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a},f=Object.assign({},s);return{data:{properties:c,user:f},error:null}}function kC(n){return n}function MC(n){return n.access_token&&n.refresh_token&&n.expires_in}const bh=["global","local","others"];var jC=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class PC{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=q2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=bh[0]){if(bh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bh.join(", ")}`);try{return await We(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await We(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:$i})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=jC(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await We(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:IC,redirectTo:t?.redirectTo})}catch(t){if(Be(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await We(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$i})}catch(t){if(Be(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,a,s,c,f;try{const d={nextPage:null,lastPage:0,total:0},p=await We(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:kC});if(p.error)throw p.error;const g=await p.json(),y=(s=p.headers.get("x-total-count"))!==null&&s!==void 0?s:0,x=(f=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return x.length>0&&(x.forEach(b=>{const S=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(b.split(";")[1].split("=")[1]);d[`${E}Page`]=S}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},g),d),error:null}}catch(d){if(Be(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Co(e);try{return await We(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$i})}catch(t){if(Be(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Co(e);try{return await We(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:$i})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Co(e);try{return await We(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:$i})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Co(e.userId);try{const{data:t,error:r}=await We(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Co(e.userId),Co(e.id);try{return{data:await We(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}}}function uy(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function BC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const To={debug:!!(globalThis&&$2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class W2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class LC extends W2{}async function FC(n,e,t){To.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),To.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){To.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{To.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw To.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new LC(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(To.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}BC();const UC={url:KA,storageKey:ZA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:QA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function fy(n,e,t){return await t()}const Oo={};class yl{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yl.nextInstanceID,yl.nextInstanceID+=1,this.instanceID>0&&Er()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},UC),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new PC({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=q2(i.fetch),this.lock=i.lock||fy,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Er()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=FC:this.lock=fy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:$2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uy(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=uy(this.memoryStorage)),Er()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Oo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Oo[this.storageKey]=Object.assign(Object.assign({},Oo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Oo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Oo[this.storageKey]=Object.assign(Object.assign({},Oo[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${z2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=pC(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Er()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),iC(a)){const f=(e=a.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",c),await this._saveSession(s),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Be(t)?{error:t}:{error:new H2("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:si}),{data:s,error:c}=a;if(c||!s)return{data:{user:null,session:null},error:c};const f=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(a){if(Be(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,i;try{let a;if("email"in e){const{email:p,password:g,options:y}=e;let x=null,b=null;this.flowType==="pkce"&&([x,b]=await Ao(this.storage,this.storageKey)),a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:p,password:g,data:(t=y?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:x,code_challenge_method:b},xform:si})}else if("phone"in e){const{phone:p,password:g,options:y}=e;a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(r=y?.data)!==null&&r!==void 0?r:{},channel:(i=y?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:si})}else throw new Jc("You must provide either an email or phone number and a password");const{data:s,error:c}=a;if(c||!s)return{data:{user:null,session:null},error:c};const f=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(a){if(Be(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:s,options:c}=e;t=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:cy})}else if("phone"in e){const{phone:a,password:s,options:c}=e;t=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:cy})}else throw new Jc("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Qc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,a,s,c,f,d,p,g,y,x;let b,S;if("message"in e)b=e.message,S=e.signature;else{const{chain:E,wallet:_,statement:T,options:C}=e;let O;if(Er())if(typeof _=="object")O=_;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))O=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=_}const D=new URL((t=C?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in O&&O.signIn){const j=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),T?{statement:T}:null));let L;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")L=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)L=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)b=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),S=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${D.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=C?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=C?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((s=C?.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((c=C?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((f=C?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((d=C?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((g=(p=C?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...C.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const j=await O.signMessage(new TextEncoder().encode(b),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=j}}try{const{data:E,error:_}=await We(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:fC(S)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:si});if(_)throw _;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Qc}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:_})}catch(E){if(Be(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(e){const t=await ma(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:a,error:s}=await We(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:si});if(await Fi(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Qc}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(Be(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:a,nonce:s}=e,c=await We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:si}),{data:f,error:d}=c;return d?{data:{user:null,session:null},error:d}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Qc}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:d})}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,a,s;try{if("email"in e){const{email:c,options:f}=e;let d=null,p=null;this.flowType==="pkce"&&([d,p]=await Ao(this.storage,this.storageKey));const{error:g}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=f?.data)!==null&&t!==void 0?t:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:d,code_challenge_method:p},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:c,options:f}=e,{data:d,error:p}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=f?.data)!==null&&i!==void 0?i:{},create_user:(a=f?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(s=f?.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:p}}throw new Jc("You must provide either an email or phone number.")}catch(c){if(Be(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:c}=await We(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:si});if(c)throw c;if(!s)throw new Error("An error occurred on token verification.");const f=s.session,d=s.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(i){if(Be(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let a=null,s=null;return this.flowType==="pkce"&&([a,s]=await Ao(this.storage,this.storageKey)),await We(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:NC})}catch(a){if(Be(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Vi;const{error:i}=await We(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:s}=await We(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:s,error:c}=await We(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:s?.message_id},error:c}}throw new Jc("You must provide either an email or phone number and a type")}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ma(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<mh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await ma(this.userStorage,this.storageKey+"-user");s?.user?e.user=s.user:e.user=wh()}if(this.storage.isServer&&e.user){let s=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,d,p)=>(!s&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,d,p))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$i}):await this._useSession(async t=>{var r,i,a;const{data:s,error:c}=t;if(c)throw c;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vi}:await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:$i})})}catch(t){if(Be(t))return rC(t)&&(await this._removeSession(),await Fi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new Vi;const s=i.session;let c=null,f=null;this.flowType==="pkce"&&e.email!=null&&([c,f]=await Ao(this.storage,this.storageKey));const{data:d,error:p}=await We(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:f}),jwt:s.access_token,xform:$i});if(p)throw p;return s.user=d.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Vi;const t=Date.now()/1e3;let r=t,i=!0,a=null;const{payload:s}=xh(e.access_token);if(s.exp&&(r=s.exp,i=r<=t),i){const{session:c,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:f}=await this._getUser(e.access_token);if(f)throw f;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Be(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:s,error:c}=t;if(c)throw c;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Vi;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Er())throw new eu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new eu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ny("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new eu("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ny("No code detected.");const{data:T,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:c,expires_at:f,token_type:d}=e;if(!a||!c||!s||!d)throw new eu("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(c);let y=p+g;f&&(y=parseInt(f));const x=y-p;x*1e3<=Do&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${g}s`);const b=y-g;p-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,y,p):p-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,y,p);const{data:S,error:E}=await this._getUser(a);if(E)throw E;const _={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:g,expires_at:y,refresh_token:s,token_type:d,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(r){if(Be(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ma(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{error:a};const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:c}=await this.admin.signOut(s,e);if(c&&!(nC(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Fi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=hC(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:a},error:s}=t;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Ao(this.storage,this.storageKey,!0));try{return await We(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Be(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async a=>{var s,c,f,d,p;const{data:g,error:y}=a;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await We(this.fetch,"GET",x,{headers:this.headers,jwt:(p=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Er()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(Be(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:s}=t;if(s)throw s;return await We(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await mC(async i=>(i>0&&await vC(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await We(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:si})),(i,a)=>{const s=200*Math.pow(2,i);return a&&yh(a)&&Date.now()+s-r<Do})}catch(r){if(this._debug(t,"error",r),Be(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Er()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ma(this.storage,this.storageKey);if(i&&this.userStorage){let s=await ma(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await No(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s?.user)!==null&&e!==void 0?e:wh()}else if(i&&!i.user&&!i.user){const s=await ma(this.storage,this.storageKey+"-user");s&&s?.user?(i.user=s.user,await Fi(this.storage,this.storageKey+"-user"),await No(this.storage,this.storageKey,i)):i.user=wh()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<mh;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${mh}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),yh(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:c}=await this._getUser(i.access_token);!c&&s?.user?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Vi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Fu;const{data:a,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!a.session)throw new Vi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),Be(a)){const s={session:null,error:a};return yh(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(f){a.push(f)}});if(await Promise.all(s),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await No(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const a=sy(i);await No(this.storage,this.storageKey,a)}else{const i=sy(t);await No(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Fi(this.storage,this.storageKey),await Fi(this.storage,this.storageKey+"-code-verifier"),await Fi(this.storage,this.storageKey+"-user"),this.userStorage&&await Fi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Er()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Do);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Do);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Do}ms, refresh threshold is ${i0} ticks`),i<=i0&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof W2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Er()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,s]=await Ao(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(c.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await We(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:s}=t;if(s)return{data:null,error:s};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:d}=await We(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=f?.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:s,error:c}=await We(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:c})})}catch(t){if(Be(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await We(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Be(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified"),a=r.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:r,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=xh(i.access_token);let c=null;s.aal&&(c=s.aal);let f=c;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const p=s.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+eC>i)return r;const{data:a,error:s}=await We(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:x,error:b}=await this.getSession();if(b||!x.session)return{data:null,error:b};r=x.session.access_token}const{header:i,payload:a,signature:s,raw:{header:c,payload:f}}=xh(r);t?.allowExpired||EC(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:a,header:i,signature:s},error:null}}const p=AC(i.alg),g=await crypto.subtle.importKey("jwk",d,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,s,uC(`${c}.${f}`)))throw new s0("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}}}yl.nextInstanceID=0;const zC=yl;class VC extends zC{constructor(e){super(e)}}var HC=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};class GC{constructor(e,t,r){var i,a,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const c=XA(e),f=new URL(c);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const d=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:UA,realtime:VA,auth:Object.assign(Object.assign({},zA),{storageKey:d}),global:FA},g=YA(r??{},p);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=g.auth)!==null&&s!==void 0?s:{},this.headers,g.global.fetch),this.fetch=qA(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new oA(new URL("rest/v1",f).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new PA(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new XE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return HC(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:a,flowType:s,lock:c,debug:f},d,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new VC({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:s,lock:c,debug:f,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new SA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $C=(n,e,t)=>new GC(n,e,t);function qC(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}qC()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const WC="https://znqhoohjugyblgwepovp.supabase.co",XC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY",me=$C(WC,XC,{realtime:{params:{eventsPerSecond:10}}});function YC(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function KC(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var ZC=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),QC=(function(n){ZC(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),YC(a,i.prototype),KC(a),a}return e})(Error),JC=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qn=(function(n){JC(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(QC),e4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gt=(function(n){e4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(qn),t4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ne=(function(n){t4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(qn),X2=(function(){function n(e){if(this.binarizer=e,e===null)throw new Ne("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),n4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Kt=(function(n){n4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(qn),r4=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),St=(function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),i4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),K0=(function(n){i4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(qn),a4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dy=(function(n){a4(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(K0),o4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sn=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Ne("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new dy(t);if(r>e)throw new dy(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=o4(e),s=a.next();!s.done;s=a.next()){var c=s.value;i=31*i+c}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return St.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,c=r(t,e[s]);if(c>0)i=s+1;else if(c<0)a=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),Ge=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),vn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);St.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=r[i]}var c=i*32+Ge.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=~r[i]}var c=i*32+Ge.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Ne;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=r;s<=i;s++){var c=s>r?0:e&31,f=s<i?31:t&31,d=(2<<f)-(1<<c);a[s]|=d}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Ne;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,c=i;c<=a;c++){var f=c>i?0:e&31,d=c<a?31:t&31,p=(2<<d)-(1<<f)&4294967295;if((s[c]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Ne("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Ne("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var s=0,c=0;c<8;c++)this.get(e)&&(s|=1<<7-c),e++;t[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==r*32){for(var c=r*32-this.size,f=e[0]>>>c,a=1;a<r;a++){var d=e[a];f|=d<<32-c,e[a-1]=f,f=d>>>c}e[r-1]=f}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&sn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+sn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),l0;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(l0||(l0={}));const Et=l0;var s4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ge=(function(n){s4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(qn),l4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dt;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(dt||(dt={}));var on=(function(){function n(e,t,r){for(var i,a,s=[],c=3;c<arguments.length;c++)s[c-3]=arguments[c];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var f=this.values,d=0,p=f.length;d!==p;d++){var g=f[d];n.VALUES_TO_ECI.set(g,this)}try{for(var y=l4(s),x=y.next();!x.done;x=y.next()){var b=x.value;n.NAME_TO_ECI.set(b,this)}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new ge("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new ge("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new ge("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(dt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(dt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(dt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(dt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(dt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(dt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(dt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(dt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(dt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(dt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(dt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(dt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(dt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(dt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(dt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(dt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(dt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(dt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(dt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(dt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(dt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(dt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(dt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(dt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(dt.Big5,28,"Big5"),n.GB18030=new n(dt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(dt.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),c4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pu=(function(n){c4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(qn),mr=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof on?e:on.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(on.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new pu("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(on.UTF8)||e.equals(on.ISO8859_1)||e.equals(on.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),Ze=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return mr.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Et.CHARACTER_SET)!==void 0)return t.get(Et.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,c=0,f=0,d=0,p=0,g=0,y=0,x=0,b=0,S=0,E=0,_=0,T=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,C=0;C<r&&(i||a||s);C++){var O=e[C]&255;s&&(c>0?(O&128)===0?s=!1:c--:(O&128)!==0&&((O&64)===0?s=!1:(c++,(O&32)===0?f++:(c++,(O&16)===0?d++:(c++,(O&8)===0?p++:s=!1))))),i&&(O>127&&O<160?i=!1:O>159&&(O<192||O===215||O===247)&&_++),a&&(g>0?O<64||O===127||O>252?a=!1:g--:O===128||O===160||O>239?a=!1:O>160&&O<224?(y++,b=0,x++,x>S&&(S=x)):O>127?(g++,x=0,b++,b>E&&(E=b)):(x=0,b=0))}return s&&c>0&&(s=!1),a&&g>0&&(a=!1),s&&(T||f+d+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||S>=3||E>=3)?n.SHIFT_JIS:i&&a?S===2&&y===2||_*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(c,f,d,p,g,y){if(c==="%%")return"%";if(t[++i]!==void 0){c=p?parseInt(p.substr(1)):void 0;var x=g?parseInt(g.substr(1)):void 0,b;switch(y){case"s":b=t[i];break;case"c":b=t[i][0];break;case"f":b=parseFloat(t[i]).toFixed(c);break;case"p":b=parseFloat(t[i]).toPrecision(c);break;case"e":b=parseFloat(t[i]).toExponential(c);break;case"x":b=parseInt(t[i]).toString(x||16);break;case"d":b=parseFloat(parseInt(t[i],x||10).toPrecision(c)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(x);for(var S=parseInt(d),E=d&&d[0]+""=="0"?"0":" ";b.length<S;)b=f!==void 0?b+E:E+b;return b}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},n.getBytes=function(e,t){return mr.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=on.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=on.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=on.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),ze=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ze.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),Gr=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Ne("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var s=e[a],c=0;c<r;c++)s[c]&&i.set(c,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Ne("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,c=-1,f=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>s){if(c===-1)c=a-s;else if(a-s!==c)throw new Ne("row lengths do not match");s=a,f++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new Ne("illegal character encountered: "+e.substring(d));if(a>s){if(c===-1)c=a-s;else if(a-s!==c)throw new Ne("row lengths do not match");f++}for(var p=new n(c,f),g=0;g<a;g++)i[g]&&p.set(Math.floor(g%c),Math.floor(g/c));return p},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ne("input matrix dimensions do not match");for(var t=new vn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var c=a*r,f=e.getRow(a,t).getBitArray(),d=0;d<r;d++)i[c+d]^=f[d]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Ne("Left and top must be nonnegative");if(i<1||r<1)throw new Ne("Height and width must be at least 1");var a=e+r,s=t+i;if(s>this.height||a>this.width)throw new Ne("The region must fit inside the matrix");for(var c=this.rowSize,f=this.bits,d=t;d<s;d++)for(var p=d*c,g=e;g<a;g++)f[p+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new vn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)t.setBulk(s*32,i[a+s]);return t},n.prototype.setRow=function(e,t){St.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new vn(e),i=new vn(e),a=0,s=Math.floor((t+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,s=t,c=-1,f=-1,d=0;d<t;d++)for(var p=0;p<r;p++){var g=i[d*r+p];if(g!==0){if(d<s&&(s=d),d>f&&(f=d),p*32<a){for(var y=0;(g<<31-y&4294967295)===0;)y++;p*32+y<a&&(a=p*32+y)}if(p*32+31>c){for(var y=31;!(g>>>y);)y--;p*32+y>c&&(c=p*32+y)}}}return c<a||f<s?null:Int32Array.from([a,s,c-a+1,f-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,s=t[r],c=0;(s<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=t[r],c=31;!(s>>>c);)c--;return a+=c,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&sn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+sn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new ze,a=0,s=this.height;a<s;a++){for(var c=0,f=this.width;c<f;c++)i.append(this.get(c,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),u4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ee=(function(n){u4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(qn),f4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),d4=(function(n){f4(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new vn(a):r.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),c=this.buckets,f=0;f<a;f++)c[(s[f]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(c);if(a<3)for(var f=0;f<a;f++)(s[f]&255)<d&&r.set(f);else for(var p=s[0]&255,g=s[1]&255,f=1;f<a-1;f++){var y=s[f+1]&255;(g*4-p-y)/2<d&&r.set(f),p=g,g=y}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new Gr(r,i);this.initArrays(r);for(var s=this.buckets,c=1;c<5;c++)for(var f=Math.floor(i*c/5),d=t.getRow(f,this.luminances),p=Math.floor(r*4/5),g=Math.floor(r/5);g<p;g++){var y=d[g]&255;s[y>>e.LUMINANCE_SHIFT]++}for(var x=e.estimateBlackPoint(s),b=t.getMatrix(),c=0;c<i;c++)for(var S=c*r,g=0;g<r;g++){var y=b[S+g]&255;y<x&&a.set(g,c)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,s=0,c=0;c<r;c++)t[c]>s&&(a=c,s=t[c]),t[c]>i&&(i=t[c]);for(var f=0,d=0,c=0;c<r;c++){var p=c-a,g=t[c]*p*p;g>d&&(f=c,d=g)}if(a>f){var y=a;a=f,f=y}if(f-a<=r/16)throw new ee;for(var x=f-1,b=-1,c=f-1;c>a;c--){var S=c-a,g=S*S*(f-c)*(i-t[c]);g>b&&(x=c,b=g)}return x<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(r4),h4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Y2=(function(n){h4(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var c=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&c++;var f=e.calculateBlackPoints(a,s,c,r,i),d=new Gr(r,i);e.calculateThresholdForBlock(a,s,c,r,i,f,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,s,c,f){for(var d=s-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,g=0;g<i;g++){var y=g<<e.BLOCK_SIZE_POWER;y>d&&(y=d);for(var x=e.cap(g,2,i-3),b=0;b<r;b++){var S=b<<e.BLOCK_SIZE_POWER;S>p&&(S=p);for(var E=e.cap(b,2,r-3),_=0,T=-2;T<=2;T++){var C=c[x+T];_+=C[E-2]+C[E-1]+C[E]+C[E+1]+C[E+2]}var O=_/25;e.thresholdBlock(t,S,y,O,a,f)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,s,c){for(var f=0,d=i*s+r;f<e.BLOCK_SIZE;f++,d+=s)for(var p=0;p<e.BLOCK_SIZE;p++)(t[d+p]&255)<=a&&c.set(r+p,i+f)},e.calculateBlackPoints=function(t,r,i,a,s){for(var c=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,d=new Array(i),p=0;p<i;p++){d[p]=new Int32Array(r);var g=p<<e.BLOCK_SIZE_POWER;g>c&&(g=c);for(var y=0;y<r;y++){var x=y<<e.BLOCK_SIZE_POWER;x>f&&(x=f);for(var b=0,S=255,E=0,_=0,T=g*a+x;_<e.BLOCK_SIZE;_++,T+=a){for(var C=0;C<e.BLOCK_SIZE;C++){var O=t[T+C]&255;b+=O,O<S&&(S=O),O>E&&(E=O)}if(E-S>e.MIN_DYNAMIC_RANGE)for(_++,T+=a;_<e.BLOCK_SIZE;_++,T+=a)for(var C=0;C<e.BLOCK_SIZE;C++)b+=t[T+C]&255}var D=b>>e.BLOCK_SIZE_POWER*2;if(E-S<=e.MIN_DYNAMIC_RANGE&&(D=S/2,p>0&&y>0)){var j=(d[p-1][y]+2*d[p][y-1]+d[p-1][y-1])/4;S<j&&(D=j)}d[p][y]=D}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(d4),Dl=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new pu("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new pu("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new pu("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new ze,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,c=void 0;s<64?c="#":s<128?c="+":s<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()},n})(),p4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Uu=(function(n){p4(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Dl),g4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),v4=(function(n){g4(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var c=0,f=0,d=t.length;c<d;c+=4,f++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var y=t[c],x=t[c+1],b=t[c+2];p=306*y+601*x+117*b+512>>10}s[f]=p}else for(var c=0,f=0,S=t.length;c<S;c+=4,f++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var y=t[c],x=t[c+1],b=t[c+2];p=306*y+601*x+117*b+512>>10}s[f]=255-p}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ne("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,c=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*c),d=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*c);return r.width=f,r.height=d,i.translate(f/2,d/2),i.rotate(a),i.drawImage(this.canvas,s/-2,c/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Uu(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Dl),m4=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),Mn=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})},jn=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(d){return function(p){return f([d,p])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},y4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yo=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Mn(this,void 0,void 0,function(){var e,t,r,i,a,s,c,f,d,p,g,y;return jn(this,function(x){switch(x.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=x.sent(),t=[];try{for(r=y4(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(c=a.deviceId||a.id,f=a.label||"Video device "+(t.length+1),d=a.groupId,p={deviceId:c,label:f,kind:s,groupId:d},t.push(p))}catch(b){g={error:b}}finally{try{i&&!i.done&&(y=r.return)&&y.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Mn(this,void 0,void 0,function(){var e;return jn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new m4(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Mn(this,void 0,void 0,function(){var t;return jn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Mn(this,void 0,void 0,function(){return jn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Mn(this,void 0,void 0,function(){var r,i;return jn(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Mn(this,void 0,void 0,function(){var r;return jn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Mn(this,void 0,void 0,function(){var r,i;return jn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Mn(this,void 0,void 0,function(){return jn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Mn(this,void 0,void 0,function(){var i,a;return jn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Mn(this,void 0,void 0,function(){var i;return jn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Mn(this,void 0,void 0,function(){var i;return jn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Mn(this,void 0,void 0,function(){var r;return jn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Mn(this,void 0,void 0,function(){return jn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Gt("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Gt("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Gt("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Gt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new Gt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new Gt("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Gt("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new Gt("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Gt("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Gt("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Mn(this,void 0,void 0,function(){return jn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Mn(this,void 0,void 0,function(){return jn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,c){if(i._stopAsyncDecode){c(new ee("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var f=i.decode(e);s(f)}catch(y){var d=t&&y instanceof ee,p=y instanceof Kt||y instanceof ge,g=p&&r;if(d||g)return setTimeout(a,i._timeBetweenDecodingAttempts,s,c);c(y)}};return new Promise(function(s,c){return a(s,c)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(f){t(null,f);var s=f instanceof Kt||f instanceof ge,c=f instanceof ee;(s||c)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new v4(r,t),a=new Y2(i);return new X2(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),Nn=(function(){function n(e,t,r,i,a,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=St.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=St.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);St.arraycopy(t,0,r,0,t.length),St.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),c0;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(c0||(c0={}));const De=c0;var u0;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(u0||(u0={}));const En=u0;var zu=(function(){function n(e,t,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),al=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ne;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),qi=(function(){function n(e,t){if(t.length===0)throw new Ne;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),St.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];r=al.addOrSubtract(r,s)}return r}r=t[0];for(var c=t.length,f=this.field,i=1;i<c;i++)r=al.addOrSubtract(f.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ne("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;St.arraycopy(r,0,a,0,s);for(var c=s;c<r.length;c++)a[c]=al.addOrSubtract(t[c-s],r[c]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ne("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),c=this.field,f=0;f<r;f++)for(var d=t[f],p=0;p<a;p++)s[f+p]=al.addOrSubtract(s[f+p],c.multiply(d,i[p]));return new n(c,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(a[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ne;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,c=0;c<i;c++)a[c]=s.multiply(r[c],t);return new n(s,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ne("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ne("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var c=i.getDegree()-e.getDegree(),f=t.multiply(i.getCoefficient(i.getDegree()),s),d=e.multiplyByMonomial(c,f),p=t.buildMonomial(c,f);r=r.addOrSubtract(p),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),x4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),K2=(function(n){x4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(qn),w4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gn=(function(n){w4(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),c=1,f=0;f<r;f++)s[f]=c,c*=2,c>=r&&(c^=t,c&=r-1);a.expTable=s;for(var d=new Int32Array(r),f=0;f<r-1;f++)d[s[f]]=f;return a.logTable=d,a.zero=new qi(a,Int32Array.from([0])),a.one=new qi(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ne;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new qi(this,i)},e.prototype.inverse=function(t){if(t===0)throw new K2;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ge.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(al),b4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),tu=(function(n){b4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(qn),_4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Nl=(function(n){_4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(qn),Vu=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new qi(r,e),a=new Int32Array(t),s=!0,c=0;c<t;c++){var f=i.evaluateAt(r.exp(c+r.getGeneratorBase()));a[a.length-1-c]=f,f!==0&&(s=!1)}if(!s)for(var d=new qi(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(t,1),d,t),g=p[0],y=p[1],x=this.findErrorLocations(g),b=this.findErrorMagnitudes(y,x),c=0;c<x.length;c++){var S=e.length-1-r.log(x[c]);if(S<0)throw new tu("Bad error location");e[S]=Gn.addOrSubtract(e[S],b[c])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,c=t,f=a.getZero(),d=a.getOne();c.getDegree()>=(r/2|0);){var p=s,g=f;if(s=c,f=d,s.isZero())throw new tu("r_{i-1} was zero");c=p;for(var y=a.getZero(),x=s.getCoefficient(s.getDegree()),b=a.inverse(x);c.getDegree()>=s.getDegree()&&!c.isZero();){var S=c.getDegree()-s.getDegree(),E=a.multiply(c.getCoefficient(c.getDegree()),b);y=y.addOrSubtract(a.buildMonomial(S,E)),c=c.addOrSubtract(s.multiplyByMonomial(S,E))}if(d=y.multiply(f).addOrSubtract(g),c.getDegree()>=s.getDegree())throw new Nl("Division algorithm failed to reduce polynomial?")}var _=d.getCoefficient(0);if(_===0)throw new tu("sigmaTilde(0) was zero");var T=a.inverse(_),C=d.multiplyScalar(T),O=c.multiplyScalar(T);return[C,O]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==t)throw new tu("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var c=a.inverse(t[s]),f=1,d=0;d<r;d++)if(s!==d){var p=a.multiply(t[d],c),g=(p&1)===0?p|1:p&-2;f=a.multiply(f,g)}i[s]=a.multiply(e.evaluateAt(c),a.inverse(f)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],c))}return i},n})(),bn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(bn||(bn={}));var hy=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),c=new zu(a,s,null,null);return c.setNumBits(i.length),c},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=bn.UPPER,i=bn.UPPER,a="",s=0;s<t;)if(i===bn.BINARY){if(t-s<5)break;var c=n.readCode(e,s,5);if(s+=5,c===0){if(t-s<11)break;c=n.readCode(e,s,11)+31,s+=11}for(var f=0;f<c;f++){if(t-s<8){s=t;break}var d=n.readCode(e,s,8);a+=Ze.castAsNonUtf8Char(d),s+=8}i=r}else{var p=i===bn.DIGIT?4:5;if(t-s<p)break;var d=n.readCode(e,s,p);s+=p;var g=n.getCharacter(i,d);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(e){switch(e){case"L":return bn.LOWER;case"P":return bn.PUNCT;case"M":return bn.MIXED;case"D":return bn.DIGIT;case"B":return bn.BINARY;case"U":default:return bn.UPPER}},n.getCharacter=function(e,t){switch(e){case bn.UPPER:return n.UPPER_TABLE[t];case bn.LOWER:return n.LOWER_TABLE[t];case bn.MIXED:return n.MIXED_TABLE[t];case bn.PUNCT:return n.PUNCT_TABLE[t];case bn.DIGIT:return n.DIGIT_TABLE[t];default:throw new Nl("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Gn.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Gn.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Gn.AZTEC_DATA_10):(r=12,t=Gn.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new ge;for(var s=e.length%r,c=new Int32Array(a),f=0;f<a;f++,s+=r)c[f]=n.readCode(e,s,r);try{var d=new Vu(t);d.decode(c,a-i)}catch(E){throw new ge(E)}for(var p=(1<<r)-1,g=0,f=0;f<i;f++){var y=c[f];if(y===0||y===p)throw new ge;(y===1||y===p-1)&&g++}for(var x=new Array(i*r-g),b=0,f=0;f<i;f++){var y=c[f];if(y===1||y===p-1)x.fill(y>1,b,b+r-1),b+=r-1;else for(var S=r-1;S>=0;--S)x[b++]=(y&1<<S)!==0}return x},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var c=0;c<a.length;c++)a[c]=c;else for(var f=i+1+2*Ge.truncDivision(Ge.truncDivision(i,2)-1,15),d=i/2,p=Ge.truncDivision(f,2),c=0;c<d;c++){var g=c+Ge.truncDivision(c,15);a[d-c-1]=p-g-1,a[d+c]=p+g+1}for(var c=0,y=0;c<r;c++){for(var x=(r-c)*4+(t?9:12),b=c*2,S=i-1-b,E=0;E<x;E++)for(var _=E*2,T=0;T<2;T++)s[y+_+T]=e.get(a[b+T],a[b+E]),s[y+2*x+_+T]=e.get(a[b+E],a[S-T]),s[y+4*x+_+T]=e.get(a[S-T],a[S-E]),s[y+6*x+_+T]=e.get(a[S-E],a[b+T]);y+=x*8}return s},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),nt=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,s=t-i;return Math.sqrt(a*a+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n})(),f0=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Ee=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*f0.floatToIntBits(this.x)+f0.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,c;if(r>=t&&r>=i?(s=e[0],a=e[1],c=e[2]):i>=r&&i>=t?(s=e[1],a=e[0],c=e[2]):(s=e[2],a=e[0],c=e[1]),this.crossProductZ(a,s,c)<0){var f=a;a=c,c=f}e[0]=a,e[1]=s,e[2]=c},n.distance=function(e,t){return nt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n})(),Z0=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),S4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),E4=(function(n){S4(e,n);function e(t,r,i,a,s){var c=n.call(this,t,r)||this;return c.compact=i,c.nbDatablocks=a,c.nbLayers=s,c}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Z0),d0=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,c=!1,f=!1,d=!1,p=!1,g=!1,y=this.width,x=this.height;s;){s=!1;for(var b=!0;(b||!f)&&t<y;)b=this.containsBlackPoint(r,i,t,!1),b?(t++,s=!0,f=!0):f||t++;if(t>=y){a=!0;break}for(var S=!0;(S||!d)&&i<x;)S=this.containsBlackPoint(e,t,i,!0),S?(i++,s=!0,d=!0):d||i++;if(i>=x){a=!0;break}for(var E=!0;(E||!p)&&e>=0;)E=this.containsBlackPoint(r,i,e,!1),E?(e--,s=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var _=!0;(_||!g)&&r>=0;)_=this.containsBlackPoint(e,t,r,!0),_?(r--,s=!0,g=!0):g||r--;if(r<0){a=!0;break}s&&(c=!0)}if(!a&&c){for(var T=t-e,C=null,O=1;C===null&&O<T;O++)C=this.getBlackPointOnSegment(e,i-O,e+O,i);if(C==null)throw new ee;for(var D=null,O=1;D===null&&O<T;O++)D=this.getBlackPointOnSegment(e,r+O,e+O,r);if(D==null)throw new ee;for(var j=null,O=1;j===null&&O<T;O++)j=this.getBlackPointOnSegment(t,r+O,t-O,r);if(j==null)throw new ee;for(var L=null,O=1;L===null&&O<T;O++)L=this.getBlackPointOnSegment(t,i-O,t-O,i);if(L==null)throw new ee;return this.centerEdges(L,C,j,D)}else throw new ee},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=nt.round(nt.distance(e,t,r,i)),s=(r-e)/a,c=(i-t)/a,f=this.image,d=0;d<a;d++){var p=nt.round(e+d*s),g=nt.round(t+d*c);if(f.get(p,g))return new Ee(p,g)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),s=e.getY(),c=t.getX(),f=t.getY(),d=r.getX(),p=r.getY(),g=i.getX(),y=i.getY(),x=n.CORR;return a<this.width/2?[new Ee(g-x,y+x),new Ee(c+x,f+x),new Ee(d-x,p-x),new Ee(a+x,s-x)]:[new Ee(g+x,y+x),new Ee(c+x,f-x),new Ee(d-x,p+x),new Ee(a-x,s-x)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,r))return!0}else for(var c=e;c<=t;c++)if(a.get(r,c))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),py=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var c=Math.floor(t[s]),f=Math.floor(t[s+1]);if(c<-1||c>r||f<-1||f>i)throw new ee;a=!1,c===-1?(t[s]=0,a=!0):c===r&&(t[s]=r-1,a=!0),f===-1?(t[s+1]=0,a=!0):f===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var c=Math.floor(t[s]),f=Math.floor(t[s+1]);if(c<-1||c>r||f<-1||f>i)throw new ee;a=!1,c===-1?(t[s]=0,a=!0):c===r&&(t[s]=r-1,a=!0),f===-1?(t[s+1]=0,a=!0):f===i&&(t[s+1]=i-1,a=!0)}},n})(),Z2=(function(){function n(e,t,r,i,a,s,c,f,d){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=c,this.a23=f,this.a33=d}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,s,c,f,d,p,g,y,x,b,S,E){var _=n.quadrilateralToSquare(e,t,r,i,a,s,c,f),T=n.squareToQuadrilateral(d,p,g,y,x,b,S,E);return T.times(_)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,c=this.a22,f=this.a23,d=this.a31,p=this.a32,g=this.a33,y=0;y<t;y+=2){var x=e[y],b=e[y+1],S=a*x+f*b+g;e[y]=(r*x+s*b+d)/S,e[y+1]=(i*x+c*b+p)/S}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,c=this.a22,f=this.a23,d=this.a31,p=this.a32,g=this.a33,y=e.length,x=0;x<y;x++){var b=e[x],S=t[x],E=a*b+f*S+g;e[x]=(r*b+s*S+d)/E,t[x]=(i*b+c*S+p)/E}},n.squareToQuadrilateral=function(e,t,r,i,a,s,c,f){var d=e-r+a-c,p=t-i+s-f;if(d===0&&p===0)return new n(r-e,a-r,e,i-t,s-i,t,0,0,1);var g=r-a,y=c-a,x=i-s,b=f-s,S=g*b-y*x,E=(d*b-y*p)/S,_=(g*p-d*x)/S;return new n(r-e+E*r,c-e+_*c,e,i-t+E*i,f-t+_*f,t,E,_,1)},n.quadrilateralToSquare=function(e,t,r,i,a,s,c,f){return n.squareToQuadrilateral(e,t,r,i,a,s,c,f).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),A4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),C4=(function(n){A4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,s,c,f,d,p,g,y,x,b,S,E,_,T,C,O){var D=Z2.quadrilateralToQuadrilateral(a,s,c,f,d,p,g,y,x,b,S,E,_,T,C,O);return this.sampleGridWithTransform(t,r,i,D)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new ee;for(var s=new Gr(r,i),c=new Float32Array(2*r),f=0;f<i;f++){for(var d=c.length,p=f+.5,g=0;g<d;g+=2)c[g]=g/2+.5,c[g+1]=p;a.transformPoints(c),py.checkAndNudgePoints(t,c);try{for(var g=0;g<d;g+=2)t.get(Math.floor(c[g]),Math.floor(c[g+1]))&&s.set(g/2,f)}catch{throw new ee}}return s},e})(py),Q0=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new C4,n})(),Hn=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Ee(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),T4=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new E4(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ee;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var c=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,s,c){var f=(a>>t-2<<1)+(a&1);r=(r<<3)+f}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Ge.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ee},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),c=r-1;c>=0;--c)s[c]=e&15,e>>=4;try{var f=new Vu(Gn.AZTEC_PARAM);f.decode(s,a)}catch{throw new ee}for(var d=0,c=0;c<i;c++)d=(d<<4)+s[c];return d},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var c=this.getFirstDifferent(t,s,1,-1),f=this.getFirstDifferent(r,s,1,1),d=this.getFirstDifferent(i,s,-1,1),p=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(p,c)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(c,f,d,p))break}t=c,r=f,i=d,a=p,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;var y=new Ee(t.getX()+.5,t.getY()-.5),x=new Ee(r.getX()+.5,r.getY()+.5),b=new Ee(i.getX()-.5,i.getY()+.5),S=new Ee(a.getX()-.5,a.getY()-.5);return this.expandSquare([y,x,b,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new d0(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new Hn(s+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Hn(s+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Hn(s-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Hn(s-7,c-7),!1,-1,-1).toResultPoint()}var f=nt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=nt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new d0(this.image,15,f,d).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Hn(f+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Hn(f+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Hn(f-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Hn(f-7,d-7),!1,-1,-1).toResultPoint()}return f=nt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=nt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Hn(f,d)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var s=Q0.getInstance(),c=this.getDimension(),f=c/2-this.nbCenterLayers,d=c/2+this.nbCenterLayers;return s.sampleGrid(e,c,c,f,f,d,f,d,d,f,d,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),s=a/r,c=e.getX(),f=e.getY(),d=s*(t.getX()-e.getX())/a,p=s*(t.getY()-e.getY())/a,g=0;g<r;g++)this.image.get(nt.round(c+g*d),nt.round(f+g*p))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Hn(e.getX()-a,e.getY()+a),t=new Hn(t.getX()-a,t.getY()-a),r=new Hn(r.getX()+a,r.getY()-a),i=new Hn(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var c=this.getColor(e,t);return c!==s||(c=this.getColor(t,r),c!==s)?!1:(c=this.getColor(r,i),c===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,s=0,c=e.getX(),f=e.getY(),d=this.image.get(e.getX(),e.getY()),p=Math.ceil(r),g=0;g<p;g++)c+=i,f+=a,this.image.get(nt.round(c),nt.round(f))!==d&&s++;var y=s/r;return y>.1&&y<.9?0:y<=.1===d?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new Hn(a,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,f=(e[0].getY()+e[2].getY())/2,d=new Ee(c+i*a,f+i*s),p=new Ee(c-i*a,f-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,f=(e[1].getY()+e[3].getY())/2;var g=new Ee(c+i*a,f+i*s),y=new Ee(c-i*a,f-i*s),x=[d,g,p,y];return x},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=nt.round(e.getX()),r=nt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return nt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return nt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ge.truncDivision(this.nbLayers-4,8)+1)+15},n})(),Au=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new T4(e.getBlackMatrix()),a=null,s=null;try{var c=i.detectMirror(!1);a=c.getPoints(),this.reportFoundResultPoints(t,a),s=new hy().decode(c)}catch(g){r=g}if(s==null)try{var c=i.detectMirror(!0);a=c.getPoints(),this.reportFoundResultPoints(t,a),s=new hy().decode(c)}catch(g){throw r??g}var f=new Nn(s.getText(),s.getRawBytes(),s.getNumBits(),a,De.AZTEC,St.currentTimeMillis()),d=s.getByteSegments();d!=null&&f.putMetadata(En.BYTE_SEGMENTS,d);var p=s.getECLevel();return p!=null&&f.putMetadata(En.ERROR_CORRECTION_LEVEL,p),f},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Et.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),O4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){O4(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Au,t)||this}return e})(Yo);var ln=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Et.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),c=270;s!==null&&s.get(En.ORIENTATION)===!0&&(c=c+s.get(En.ORIENTATION)%360),a.putMetadata(En.ORIENTATION,c);var f=a.getResultPoints();if(f!==null)for(var d=i.getHeight(),p=0;p<f.length;p++)f[p]=new Ee(d-f[p].getY()-1,f[p].getX());return a}else throw new ee}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new vn(r),s=t&&t.get(Et.TRY_HARDER)===!0,c=Math.max(1,i>>(s?8:5)),f;s?f=i:f=15;for(var d=Math.trunc(i/2),p=0;p<f;p++){var g=Math.trunc((p+1)/2),y=(p&1)===0,x=d+c*(y?g:-g);if(x<0||x>=i)break;try{a=e.getBlackRow(x,a)}catch{continue}for(var b=function(T){if(T===1&&(a.reverse(),t&&t.get(Et.NEED_RESULT_POINT_CALLBACK)===!0)){var C=new Map;t.forEach(function(j,L){return C.set(L,j)}),C.delete(Et.NEED_RESULT_POINT_CALLBACK),t=C}try{var O=S.decodeRow(x,a,t);if(T===1){O.putMetadata(En.ORIENTATION,180);var D=O.getResultPoints();D!==null&&(D[0]=new Ee(r-D[0].getX()-1,D[0].getY()),D[1]=new Ee(r-D[1].getX()-1,D[1].getY()))}return{value:O}}catch{}},S=this,E=0;E<2;E++){var _=b(E);if(typeof _=="object")return _.value}}throw new ee},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(t>=s)throw new ee;for(var c=!e.get(t),f=0,d=t;d<s;){if(e.get(d)!==c)r[f]++;else{if(++f===i)break;r[f]=1,c=!c}d++}if(!(f===i||f===i-1&&d===s))throw new ee},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new ee;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,c=0;c<i;c++)a+=e[c],s+=t[c];if(a<s)return Number.POSITIVE_INFINITY;var f=a/s;r*=f;for(var d=0,p=0;p<i;p++){var g=e[p],y=t[p]*f,x=g>y?g-y:y-g;if(x>r)return Number.POSITIVE_INFINITY;d+=x}return d/a},n})(),R4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gy=(function(n){R4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),c=i,f=!1,d=6,p=i;p<r;p++)if(t.get(p)!==f)s[a]++;else{if(a===d-1){for(var g=e.MAX_AVG_VARIANCE,y=-1,x=e.CODE_START_A;x<=e.CODE_START_C;x++){var b=ln.patternMatchVariance(s,e.CODE_PATTERNS[x],e.MAX_INDIVIDUAL_VARIANCE);b<g&&(g=b,y=x)}if(y>=0&&t.isRange(Math.max(0,c-(p-c)/2),c,!1))return Int32Array.from([c,p,y]);c+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,f=!f}throw new ee},e.decodeCode=function(t,r,i){ln.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,c=0;c<e.CODE_PATTERNS.length;c++){var f=e.CODE_PATTERNS[c],d=this.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,s=c)}if(s>=0)return s;throw new ee},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Et.ASSUME_GS1)===!0,s=e.findStartPattern(r),c=s[2],f=0,d=new Uint8Array(20);d[f++]=c;var p;switch(c){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new ge}for(var g=!1,y=!1,x="",b=s[0],S=s[1],E=Int32Array.from([0,0,0,0,0,0]),_=0,T=0,C=c,O=0,D=!0,j=!1,L=!1;!g;){var H=y;switch(y=!1,_=T,T=e.decodeCode(r,E,S),d[f++]=T,T!==e.CODE_STOP&&(D=!0),T!==e.CODE_STOP&&(O++,C+=O*T),b=S,S+=E.reduce(function(F,K){return F+K},0),T){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new ge}switch(p){case e.CODE_CODE_A:if(T<64)L===j?x+=String.fromCharCode(32+T):x+=String.fromCharCode(32+T+128),L=!1;else if(T<96)L===j?x+=String.fromCharCode(T-64):x+=String.fromCharCode(T+64),L=!1;else switch(T!==e.CODE_STOP&&(D=!1),T){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!j&&L?(j=!0,L=!1):j&&L?(j=!1,L=!1):L=!0;break;case e.CODE_SHIFT:y=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_B:if(T<96)L===j?x+=String.fromCharCode(32+T):x+=String.fromCharCode(32+T+128),L=!1;else switch(T!==e.CODE_STOP&&(D=!1),T){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!j&&L?(j=!0,L=!1):j&&L?(j=!1,L=!1):L=!0;break;case e.CODE_SHIFT:y=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_C:if(T<100)T<10&&(x+="0"),x+=T;else switch(T!==e.CODE_STOP&&(D=!1),T){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:g=!0;break}break}H&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var $=S-b;if(S=r.getNextUnset(S),!r.isRange(S,Math.min(r.getSize(),S+(S-b)/2),!1))throw new ee;if(C-=O*_,C%103!==_)throw new Kt;var ne=x.length;if(ne===0)throw new ee;ne>0&&D&&(p===e.CODE_CODE_C?x=x.substring(0,ne-2):x=x.substring(0,ne-1));for(var se=(s[1]+s[0])/2,le=b+$/2,ue=d.length,de=new Uint8Array(ue),Se=0;Se<ue;Se++)de[Se]=d[Se];var U=[new Ee(se,t),new Ee(le,t)];return new Nn(x,de,0,U,De.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(ln),D4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_h=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vy=(function(n){D4(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,s,c,f,d=this.counters;d.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(r,d),g=r.getNextSet(p[1]),y=r.getSize(),x,b;do{e.recordPattern(r,g,d);var S=e.toNarrowWidePattern(d);if(S<0)throw new ee;x=e.patternToChar(S),this.decodeRowResult+=x,b=g;try{for(var E=(a=void 0,_h(d)),_=E.next();!_.done;_=E.next()){var T=_.value;g+=T}}catch(ue){a={error:ue}}finally{try{_&&!_.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var O=_h(d),D=O.next();!D.done;D=O.next()){var T=D.value;C+=T}}catch(ue){c={error:ue}}finally{try{D&&!D.done&&(f=O.return)&&f.call(O)}finally{if(c)throw c.error}}var j=g-b-C;if(g!==y&&j*2<C)throw new ee;if(this.usingCheckDigit){for(var L=this.decodeRowResult.length-1,H=0,$=0;$<L;$++)H+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt($));if(this.decodeRowResult.charAt(L)!==e.ALPHABET_STRING.charAt(H%43))throw new Kt;this.decodeRowResult=this.decodeRowResult.substring(0,L)}if(this.decodeRowResult.length===0)throw new ee;var ne;this.extendedMode?ne=e.decodeExtended(this.decodeRowResult):ne=this.decodeRowResult;var se=(p[1]+p[0])/2,le=b+C/2;return new Nn(ne,null,0,[new Ee(se,t),new Ee(le,t)],De.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),s=0,c=a,f=!1,d=r.length,p=a;p<i;p++)if(t.get(p)!==f)r[s]++;else{if(s===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((p-c)/2)),c,!1))return[c,p];c+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,f=!f}throw new ee},e.toNarrowWidePattern=function(t){var r,i,a=t.length,s=0,c;do{var f=2147483647;try{for(var d=(r=void 0,_h(t)),p=d.next();!p.done;p=d.next()){var g=p.value;g<f&&g>s&&(f=g)}}catch(S){r={error:S}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s=f,c=0;for(var y=0,x=0,b=0;b<a;b++){var g=t[b];g>s&&(x|=1<<a-1-b,c++,y+=g)}if(c===3){for(var b=0;b<a&&c>0;b++){var g=t[b];if(g>s&&(c--,g*2>=y))return-1}return x}}while(c>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ee},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var c=t.charAt(a+1),f="\0";switch(s){case"+":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)+32);else throw new ge;break;case"$":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)-64);else throw new ge;break;case"%":if(c>="A"&&c<="E")f=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")f=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")f=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")f="\0";else if(c==="V")f="@";else if(c==="W")f="`";else if(c==="X"||c==="Y"||c==="Z")f="";else throw new ge;break;case"/":if(c>="A"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")f=":";else throw new ge;break}i+=f,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(ln),N4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Sh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},my=(function(n){N4(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,s,c,f,d=this.findAsteriskPattern(r),p=r.getNextSet(d[1]),g=r.getSize(),y=this.counters;y.fill(0),this.decodeRowResult="";var x,b;do{e.recordPattern(r,p,y);var S=this.toPattern(y);if(S<0)throw new ee;x=this.patternToChar(S),this.decodeRowResult+=x,b=p;try{for(var E=(a=void 0,Sh(y)),_=E.next();!_.done;_=E.next()){var T=_.value;p+=T}}catch($){a={error:$}}finally{try{_&&!_.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var O=Sh(y),D=O.next();!D.done;D=O.next()){var T=D.value;C+=T}}catch($){c={error:$}}finally{try{D&&!D.done&&(f=O.return)&&f.call(O)}finally{if(c)throw c.error}}if(p===g||!r.get(p))throw new ee;if(this.decodeRowResult.length<2)throw new ee;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var j=this.decodeExtended(this.decodeRowResult),L=(d[1]+d[0])/2,H=b+C/2;return new Nn(j,null,0,[new Ee(L,t),new Ee(H,t)],De.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,c=!1,f=a.length,d=0,p=i;p<r;p++)if(t.get(p)!==c)a[d]++;else{if(d===f-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,p]);s+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,c=!c}throw new ee},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var s=Sh(t),c=s.next();!c.done;c=s.next()){var f=c.value;a+=f}}catch(b){r={error:b}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var d=0,p=t.length,g=0;g<p;g++){var y=Math.round(t[g]*9/a);if(y<1||y>4)return-1;if((g&1)===0)for(var x=0;x<y;x++)d=d<<1|1;else d<<=y}return d},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new ee},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new ge;var c=t.charAt(a+1),f="\0";switch(s){case"d":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)+32);else throw new ge;break;case"a":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)-64);else throw new ge;break;case"b":if(c>="A"&&c<="E")f=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")f=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")f=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")f="\0";else if(c==="V")f="@";else if(c==="W")f="`";else if(c>="X"&&c<="Z")f="";else throw new ge;break;case"c":if(c>="A"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")f=":";else throw new ge;break}i+=f,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,s=0,c=r-1;c>=0;c--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(c)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new Kt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(ln),I4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),k4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yy=(function(n){I4(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,s,c=this.decodeStart(r),f=this.decodeEnd(r),d=new ze;e.decodeMiddle(r,c[1],f[0],d);var p=d.toString(),g=null;i!=null&&(g=i.get(Et.ALLOWED_LENGTHS)),g==null&&(g=e.DEFAULT_ALLOWED_LENGTHS);var y=p.length,x=!1,b=0;try{for(var S=k4(g),E=S.next();!E.done;E=S.next()){var _=E.value;if(y===_){x=!0;break}_>b&&(b=_)}}catch(O){a={error:O}}finally{try{E&&!E.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}if(!x&&y>b&&(x=!0),!x)throw new ge;var T=[new Ee(c[1],t),new Ee(f[0],t)],C=new Nn(p,null,0,T,De.ITF,new Date().getTime());return C},e.decodeMiddle=function(t,r,i,a){var s=new Int32Array(10),c=new Int32Array(5),f=new Int32Array(5);for(s.fill(0),c.fill(0),f.fill(0);r<i;){ln.recordPattern(t,r,s);for(var d=0;d<5;d++){var p=2*d;c[d]=s[p],f[d]=s[p+1]}var g=e.decodeDigit(c);a.append(g.toString()),g=this.decodeDigit(f),a.append(g.toString()),s.forEach(function(y){r+=y})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new ee},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ee;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof ee&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,s=new Int32Array(a),c=t.getSize(),f=!1,d=0,p=r;s.fill(0);for(var g=r;g<c;g++)if(t.get(g)!==f)s[d]++;else{if(d===a-1){if(ln.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,g];p+=s[0]+s[1],St.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,f=!f}throw new ee},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var c=e.PATTERNS[s],f=ln.patternMatchVariance(t,c,e.MAX_INDIVIDUAL_VARIANCE);f<r?(r=f,i=s):f===r&&(i=-1)}if(i>=0)return i%10;throw new ee},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(ln),M4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ho=(function(n){M4(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var c=i[0];a=i[1];var f=c-(a-c);f>=0&&(r=t.isRange(f,c,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new ge;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new ge;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,s){var c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var f=0,d=r,p=a.length,g=i,y=r;y<c;y++)if(t.get(y)!==g)s[f]++;else{if(f===p-1){if(ln.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,y]);d+=s[0]+s[1];for(var x=s.slice(2,s.length),b=0;b<f-1;b++)s[b]=x[b];s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,g=!g}throw new ee},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,c=-1,f=a.length,d=0;d<f;d++){var p=a[d],g=ln.patternMatchVariance(r,p,e.MAX_INDIVIDUAL_VARIANCE);g<s&&(s=g,c=d)}if(c>=0)return c;throw new ee},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(ln),j4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P4=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),c=n.parseExtensionString(s),f=[new Ee((r[0]+r[1])/2,e),new Ee(a,e)],d=new Nn(s,null,0,f,De.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=e.getSize(),f=t[1],d=0,p=0;p<5&&f<c;p++){var g=Ho.decodeDigit(e,s,f,Ho.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var y=(i=void 0,j4(s)),x=y.next();!x.done;x=y.next()){var b=x.value;f+=b}}catch(E){i={error:E}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}g>=10&&(d|=1<<4-p),p!==4&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(r.length!==5)throw new ee;var S=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==S)throw new ee;return f},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ee},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[En.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},n})(),B4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L4=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),c=n.parseExtensionString(s),f=[new Ee((r[0]+r[1])/2,e),new Ee(a,e)],d=new Nn(s,null,0,f,De.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=e.getSize(),f=t[1],d=0,p=0;p<2&&f<c;p++){var g=Ho.decodeDigit(e,s,f,Ho.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var y=(i=void 0,B4(s)),x=y.next();!x.done;x=y.next()){var b=x.value;f+=b}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}g>=10&&(d|=1<<1-p),p!==1&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(r.length!==2)throw new ee;if(parseInt(r.toString())%4!==d)throw new ee;return f},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[En.ISSUE_NUMBER,parseInt(e)]])},n})(),F4=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=Ho.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new P4;return a.decodeRow(e,t,i)}catch{var s=new L4;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),U4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),an=(function(n){U4(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(c){return Int32Array.from(c)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(Et.NEED_RESULT_POINT_CALLBACK);if(s!=null){var c=new Ee((a[0]+a[1])/2,t);s.foundPossibleResultPoint(c)}var f=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=f.rowOffset,p=f.resultString;if(s!=null){var g=new Ee(d,t);s.foundPossibleResultPoint(g)}var y=e.decodeEnd(r,d);if(s!=null){var x=new Ee((y[0]+y[1])/2,t);s.foundPossibleResultPoint(x)}var b=y[1],S=b+(b-y[0]);if(S>=r.getSize()||!r.isRange(b,S,!1))throw new ee;var E=p.toString();if(E.length<8)throw new ge;if(!e.checkChecksum(E))throw new Kt;var _=(a[1]+a[0])/2,T=(y[1]+y[0])/2,C=this.getBarcodeFormat(),O=[new Ee(_,t),new Ee(T,t)],D=new Nn(E,null,0,O,C,new Date().getTime()),j=0;try{var L=F4.decodeRow(t,r,y[1]);D.putMetadata(En.UPC_EAN_EXTENSION,L.getText()),D.putAllMetadata(L.getResultMetadata()),D.addResultPoints(L.getResultPoints()),j=L.getText().length}catch{}var H=i==null?null:i.get(Et.ALLOWED_EAN_EXTENSIONS);if(H!=null){var $=!1;for(var ne in H)if(j.toString()===ne){$=!0;break}if(!$)throw new ee}return C===De.EAN_13||De.UPC_A,D},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new ge;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new ge;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Ho),z4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h0=(function(n){z4(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,c,f,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var p=t.getSize(),g=r[1],y=0,x=0;x<6&&g<p;x++){var b=an.decodeDigit(t,d,g,an.L_AND_G_PATTERNS);i+=String.fromCharCode(48+b%10);try{for(var S=(a=void 0,xy(d)),E=S.next();!E.done;E=S.next()){var _=E.value;g+=_}}catch(D){a={error:D}}finally{try{E&&!E.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}b>=10&&(y|=1<<5-x)}i=e.determineFirstDigit(i,y);var T=an.findGuardPattern(t,g,!0,an.MIDDLE_PATTERN,new Int32Array(an.MIDDLE_PATTERN.length).fill(0));g=T[1];for(var x=0;x<6&&g<p;x++){var b=an.decodeDigit(t,d,g,an.L_PATTERNS);i+=String.fromCharCode(48+b);try{for(var C=(c=void 0,xy(d)),O=C.next();!O.done;O=C.next()){var _=O.value;g+=_}}catch(L){c={error:L}}finally{try{O&&!O.done&&(f=C.return)&&f.call(C)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return De.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ee},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(an),V4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},by=(function(n){V4(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,c,f,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var p=t.getSize(),g=r[1],y=0;y<4&&g<p;y++){var x=an.decodeDigit(t,d,g,an.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var b=(a=void 0,wy(d)),S=b.next();!S.done;S=b.next()){var E=S.value;g+=E}}catch(O){a={error:O}}finally{try{S&&!S.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}}var _=an.findGuardPattern(t,g,!0,an.MIDDLE_PATTERN,new Int32Array(an.MIDDLE_PATTERN.length).fill(0));g=_[1];for(var y=0;y<4&&g<p;y++){var x=an.decodeDigit(t,d,g,an.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var T=(c=void 0,wy(d)),C=T.next();!C.done;C=T.next()){var E=C.value;g+=E}}catch(j){c={error:j}}finally{try{C&&!C.done&&(f=T.return)&&f.call(T)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return De.EAN_8},e})(an),H4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_y=(function(n){H4(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new h0,t}return e.prototype.getBarcodeFormat=function(){return De.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Nn(r.substring(1),null,null,t.getResultPoints(),De.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ee},e.prototype.reset=function(){this.ean13Reader.reset()},e})(an),G4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sy=(function(n){G4(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,c=this.decodeMiddleCounters.map(function(E){return E});c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var f=t.getSize(),d=r[1],p=0,g=0;g<6&&d<f;g++){var y=e.decodeDigit(t,c,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+y%10);try{for(var x=(a=void 0,$4(c)),b=x.next();!b.done;b=x.next()){var S=b.value;d+=S}}catch(E){a={error:E}}finally{try{b&&!b.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}y>=10&&(p|=1<<5-g)}return e.determineNumSysAndCheckDigit(new ze(i),p),d},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return an.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw ee.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return De.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new ze;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(an),q4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ey=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eh=(function(n){q4(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Et.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(De.EAN_13)>-1&&a.push(new h0),i.indexOf(De.UPC_A)>-1&&a.push(new _y),i.indexOf(De.EAN_8)>-1&&a.push(new by),i.indexOf(De.UPC_E)>-1&&a.push(new Sy)),a.length===0&&(a.push(new h0),a.push(new _y),a.push(new by),a.push(new Sy)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,s;try{for(var c=Ey(this.readers),f=c.next();!f.done;f=c.next()){var d=f.value;try{var p=d.decodeRow(t,r,i),g=p.getBarcodeFormat()===De.EAN_13&&p.getText().charAt(0)==="0",y=i==null?null:i.get(Et.POSSIBLE_FORMATS),x=y==null||y.includes(De.UPC_A);if(g&&x){var b=p.getRawBytes(),S=new Nn(p.getText().substring(1),b,b?b.length:null,p.getResultPoints(),De.UPC_A);return S.putAllMetadata(p.getResultMetadata()),S}return p}catch{}}}catch(E){a={error:E}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}throw new ee},e.prototype.reset=function(){var t,r;try{for(var i=Ey(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(ln),W4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),X4=(function(n){W4(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new ee;var s=this.codaBarDecodeRow(a.row);if(!s)throw new ee;return new Nn(s,null,0,[new Ee(a.left,t),new Ee(a.right,t)],De.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],c=r[0],f=1,d=1;d<r.length;d++)r[d]===c?f++:(c=r[d],s.push(f),f=1);return s.push(f),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(f,d){return(f+d)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(f){return f<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var c=r.join("");return this.validCodaBarString(c)?c:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(ln),Y4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),K4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_a=(function(n){Y4(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(ln.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ee},e.count=function(t){return nt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]>a&&(a=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]<a&&(a=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],s=a+t[2]+t[3],c=a/s;if(c>=e.MIN_FINDER_PATTERN_RATIO&&c<=e.MAX_FINDER_PATTERN_RATIO){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var p=K4(t),g=p.next();!g.done;g=p.next()){var y=g.value;y>d&&(d=y),y<f&&(f=y)}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return d<10*f}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(ln),Cu=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),Q2=(function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ee(r,a)),this.resultPoints.push(new Ee(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),Z4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Io=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,s=0;try{for(var c=Z4(e),f=c.next();!f.done;f=c.next()){var d=f.value;s+=d}}catch(T){i={error:T}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}for(var p=0,g=0,y=e.length,x=0;x<y-1;x++){var b=void 0;for(b=1,g|=1<<x;b<e[x];b++,g&=~(1<<x)){var S=n.combins(s-b-1,y-x-2);if(r&&g===0&&s-b-(y-x-1)>=y-x-1&&(S-=n.combins(s-b-(y-x),y-x-2)),y-x-1>1){for(var E=0,_=s-b-(y-x-2);_>t;_--)E+=n.combins(s-b-_-1,y-x-3);S-=E*(y-1-x)}else s-b>t&&S--;p+=S}s-=b}return p},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,s=1,c=e;c>r;c--)a*=c,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n})(),Q4=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new vn(r),a=0,s=e[0],c=s.getRightChar().getValue(),f=11;f>=0;--f)(c&1<<f)!==0&&i.set(a),a++;for(var f=1;f<e.length;++f){for(var d=e[f],p=d.getLeftChar().getValue(),g=11;g>=0;--g)(p&1<<g)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var y=d.getRightChar().getValue(),g=11;g>=0;--g)(y&1<<g)!==0&&i.set(a),a++}return i},n})(),ya=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),J0=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),J4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Sr=(function(n){J4(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(J0),e8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xa=(function(n){e8(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(J0),t8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ro=(function(n){t8(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new ge;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(J0),nu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n8=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,s,c,f,d;if(!e)return null;if(e.length<2)throw new ee;var p=e.substring(0,2);try{for(var g=nu(n.TWO_DIGIT_DATA_LENGTH),y=g.next();!y.done;y=g.next()){var x=y.value;if(x[0]===p)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,x[2],e):n.processFixedAI(2,x[1],e)}}catch(j){t={error:j}}finally{try{y&&!y.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}if(e.length<3)throw new ee;var b=e.substring(0,3);try{for(var S=nu(n.THREE_DIGIT_DATA_LENGTH),E=S.next();!E.done;E=S.next()){var x=E.value;if(x[0]===b)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,x[2],e):n.processFixedAI(3,x[1],e)}}catch(j){i={error:j}}finally{try{E&&!E.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}try{for(var _=nu(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),T=_.next();!T.done;T=_.next()){var x=T.value;if(x[0]===b)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],e):n.processFixedAI(4,x[1],e)}}catch(j){s={error:j}}finally{try{T&&!T.done&&(c=_.return)&&c.call(_)}finally{if(s)throw s.error}}if(e.length<4)throw new ee;var C=e.substring(0,4);try{for(var O=nu(n.FOUR_DIGIT_DATA_LENGTH),D=O.next();!D.done;D=O.next()){var x=D.value;if(x[0]===C)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],e):n.processFixedAI(4,x[1],e)}}catch(j){f={error:j}}finally{try{D&&!D.done&&(d=O.return)&&d.call(O)}finally{if(f)throw f.error}}throw new ee},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ee;var i=r.substring(0,e);if(r.length<e+t)throw new ee;var a=r.substring(e,e+t),s=r.substring(e+t),c="("+i+")"+a,f=n.parseFieldsInGeneralPurpose(s);return f==null?c:c+f},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var s=r.substring(e,a),c=r.substring(a),f="("+i+")"+s,d=n.parseFieldsInGeneralPurpose(c);return d==null?f:f+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),gu=(function(){function n(e){this.buffer=new ze,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=n8.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Ro(this.information.getSize(),Ro.FNC1,Ro.FNC1):new Ro(this.information.getSize(),t-1,Ro.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Ro(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new xa(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new xa(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new xa(this.current.getPosition(),this.buffer.toString()):t=new xa(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ya(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new xa(this.current.getPosition(),this.buffer.toString());return new ya(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ya(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new xa(this.current.getPosition(),this.buffer.toString());return new ya(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ya(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new xa(this.current.getPosition(),this.buffer.toString());return new ya(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ya(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Sr(e+5,Sr.FNC1);if(t>=5&&t<15)return new Sr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Sr(e+7,""+(r+1));if(r>=90&&r<116)return new Sr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new ge}return new Sr(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Sr(e+5,Sr.FNC1);if(t>=5&&t<15)return new Sr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Sr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Nl("Decoding invalid alphanumeric value: "+r)}return new Sr(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),J2=(function(){function n(e){this.information=e,this.generalDecoder=new gu(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),r8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Tr=(function(n){r8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(J2),i8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),a8=(function(n){i8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new ze;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(Tr),o8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),s8=(function(n){o8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new ze;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(J2),l8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vu=(function(n){l8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),c=1e5,f=0;f<5;++f)s/c===0&&t.append("0"),c/=10;t.append(s)},e})(Tr),c8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ew=(function(n){c8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+vu.GTIN_SIZE+e.WEIGHT_SIZE)throw new ee;var t=new ze;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+vu.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(vu),u8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),f8=(function(n){u8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(ew),d8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),h8=(function(n){d8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(ew),p8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),g8=(function(n){p8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Tr.GTIN_SIZE)throw new ee;var t=new ze;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Tr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Tr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(Tr),v8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),m8=(function(n){v8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Tr.GTIN_SIZE)throw new ee;var t=new ze;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Tr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Tr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Tr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(Tr),y8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ui=(function(n){y8(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ee;var t=new ze;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var c=i;c/10===0&&t.append("0"),t.append(c),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(vu);function x8(n){try{if(n.get(1))return new a8(n);if(!n.get(2))return new s8(n);var e=gu.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new f8(n);case 5:return new h8(n)}var t=gu.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new g8(n);case 13:return new m8(n)}var r=gu.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Ui(n,"310","11");case 57:return new Ui(n,"320","11");case 58:return new Ui(n,"310","13");case 59:return new Ui(n,"320","13");case 60:return new Ui(n,"310","15");case 61:return new Ui(n,"320","15");case 62:return new Ui(n,"310","17");case 63:return new Ui(n,"320","17")}}catch(i){throw console.log(i),new Nl("unknown decoder: "+n)}}var Ay=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),w8=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),b8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zi=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_8=(function(n){b8(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof ee){if(!this.pairs.length)throw new ee;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new ee},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,s=r;s<this.rows.length;s++){var c=this.rows[s];this.pairs.length=0;try{for(var f=(i=void 0,zi(t)),d=f.next();!d.done;d=f.next()){var p=d.value;this.pairs.push(p.getPairs())}}catch(y){i={error:y}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}if(this.pairs.push(c.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(t);g.push(c);try{return this.checkRows(g,s+1)}catch(y){console.log(y)}}}throw new ee},e.isValidSequence=function(t){var r,i;try{for(var a=zi(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var c=s.value;if(!(t.length>c.length)){for(var f=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!==c[d]){f=!1;break}if(f)return!0}}}catch(p){r={error:p}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var c=this.rows[i];if(c.getRowNumber()>t){s=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new w8(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,s,c,f,d;try{for(var p=zi(r),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.getPairs().length!==t.length){var x=!0;try{for(var b=(s=void 0,zi(y.getPairs())),S=b.next();!S.done;S=b.next()){var E=S.value,_=!1;try{for(var T=(f=void 0,zi(t)),C=T.next();!C.done;C=T.next()){var O=C.value;if(Ay.equals(E,O)){_=!0;break}}}catch(D){f={error:D}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(f)throw f.error}}_||(x=!1)}}catch(D){s={error:D}}finally{try{S&&!S.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}}}}catch(D){i={error:D}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,s,c,f,d;try{for(var p=zi(r),g=p.next();!g.done;g=p.next()){var y=g.value,x=!0;try{for(var b=(s=void 0,zi(t)),S=b.next();!S.done;S=b.next()){var E=S.value,_=!1;try{for(var T=(f=void 0,zi(y.getPairs())),C=T.next();!C.done;C=T.next()){var O=C.value;if(E.equals(O)){_=!0;break}}}catch(D){f={error:D}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(f)throw f.error}}if(!_){x=!1;break}}}catch(D){s={error:D}}finally{try{S&&!S.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}if(x)return!0}}catch(D){i={error:D}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=Q4.buildBitArray(t),i=x8(r),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),f=[s[0],s[1],c[0],c[1]];return new Nn(a,null,null,f,De.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,c=1;c<this.pairs.size();++c){var f=this.pairs.get(c);a+=f.getLeftChar().getChecksumPortion(),s++;var d=f.getRightChar();d!=null&&(a+=d.getChecksumPortion(),s++)}a%=211;var p=211*(s-4)+a;return p===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,c=!0,f=-1;do this.findNextPair(t,r,f),s=this.parseFoundFinderPattern(t,i,a),s===null?f=e.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);var d=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ee;var p;try{p=this.decodeDataCharacter(t,s,a,!1)}catch(g){p=null,console.log(g)}return new Ay(d,p,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),c;if(i>=0)c=i;else if(this.isEmptyPair(r))c=0;else{var f=r[r.length-1];c=f.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var p=!1;c<s&&(p=!t.get(c),!!p);)c++;for(var g=0,y=c,x=c;x<s;x++)if(t.get(x)!==p)a[g]++;else{if(g===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=y,this.startEnd[1]=x;return}d&&e.reverseCounters(a),y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,p=!p}throw new ee},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,s,c;if(i){for(var f=this.startEnd[0]-1;f>=0&&!t.get(f);)f--;f++,a=this.startEnd[0]-f,s=f,c=this.startEnd[1]}else s=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];var d=this.getDecodeFinderCounters();St.arraycopy(d,0,d,1,d.length-1),d[0]=a;var p;try{p=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new Q2(p,[s,c],s,c,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var s=this.getDataCharacterCounters(),c=0;c<s.length;c++)s[c]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var f=0,d=s.length-1;f<d;f++,d--){var p=s[f];s[f]=s[d],s[d]=p}}var g=17,y=nt.sum(new Int32Array(s))/g,x=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(y-x)/x>.3)throw new ee;for(var b=this.getOddCounts(),S=this.getEvenCounts(),E=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),f=0;f<s.length;f++){var T=1*s[f]/y,C=T+.5;if(C<1){if(T<.3)throw new ee;C=1}else if(C>8){if(T>8.7)throw new ee;C=8}var O=f/2;(f&1)===0?(b[O]=C,E[O]=T-C):(S[O]=C,_[O]=T-C)}this.adjustOddEvenCounts(g);for(var D=4*r.getValue()+(i?0:2)+(a?0:1)-1,j=0,L=0,f=b.length-1;f>=0;f--){if(e.isNotA1left(r,i,a)){var H=e.WEIGHTS[D][2*f];L+=b[f]*H}j+=b[f]}for(var $=0,f=S.length-1;f>=0;f--)if(e.isNotA1left(r,i,a)){var H=e.WEIGHTS[D][2*f+1];$+=S[f]*H}var ne=L+$;if((j&1)!==0||j>13||j<4)throw new ee;var se=(13-j)/2,le=e.SYMBOL_WIDEST[se],ue=9-le,de=Io.getRSSvalue(b,le,!0),Se=Io.getRSSvalue(S,ue,!1),U=e.EVEN_TOTAL_SUBSET[se],F=e.GSUM[se],K=de*U+Se+F;return new Cu(K,ne)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=nt.sum(new Int32Array(this.getOddCounts())),i=nt.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var c=!1,f=!1;i>13?f=!0:i<4&&(c=!0);var d=r+i-t,p=(r&1)===1,g=(i&1)===0;if(d===1)if(p){if(g)throw new ee;s=!0}else{if(!g)throw new ee;f=!0}else if(d===-1)if(p){if(g)throw new ee;a=!0}else{if(!g)throw new ee;c=!0}else if(d===0){if(p){if(!g)throw new ee;r<i?(a=!0,f=!0):(s=!0,c=!0)}else if(g)throw new ee}else throw new ee;if(a){if(s)throw new ee;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new ee;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(_a),S8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),E8=(function(n){S8(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(Cu),A8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ah=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cy=(function(n){A8(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,s,c,f,d=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var p=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var g=Ah(this.possibleLeftPairs),y=g.next();!y.done;y=g.next()){var x=y.value;if(x.getCount()>1)try{for(var b=(c=void 0,Ah(this.possibleRightPairs)),S=b.next();!S.done;S=b.next()){var E=S.value;if(E.getCount()>1&&e.checkChecksum(x,E))return e.constructResult(x,E)}}catch(_){c={error:_}}finally{try{S&&!S.done&&(f=b.return)&&f.call(b)}finally{if(c)throw c.error}}}}catch(_){a={error:_}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}throw new ee},e.addOrTally=function(t,r){var i,a;if(r!=null){var s=!1;try{for(var c=Ah(t),f=c.next();!f.done;f=c.next()){var d=f.value;if(d.getValue()===r.getValue()){d.incrementCount(),s=!0;break}}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),s=new ze,c=13-a.length;c>0;c--)s.append("0");s.append(a);for(var f=0,c=0;c<13;c++){var d=s.charAt(c).charCodeAt(0)-48;f+=(c&1)===0?3*d:d}f=10-f%10,f===10&&(f=0),s.append(f.toString());var p=t.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new Nn(s.toString(),null,0,[p[0],p[1],g[0],g[1]],De.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var s=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,s),f=a==null?null:a.get(Et.NEED_RESULT_POINT_CALLBACK);if(f!=null){var d=(s[0]+s[1])/2;r&&(d=t.getSize()-1-d),f.foundPossibleResultPoint(new Ee(d,i))}var p=this.decodeDataCharacter(t,c,!0),g=this.decodeDataCharacter(t,c,!1);return new E8(1597*p.getValue()+g.getValue(),p.getChecksumPortion()+4*g.getChecksumPortion(),c)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)ln.recordPatternInReverse(t,r.getStartEnd()[0],a);else{ln.recordPattern(t,r.getStartEnd()[1]+1,a);for(var c=0,f=a.length-1;c<f;c++,f--){var d=a[c];a[c]=a[f],a[f]=d}}for(var p=i?16:15,g=nt.sum(new Int32Array(a))/p,y=this.getOddCounts(),x=this.getEvenCounts(),b=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<a.length;c++){var E=a[c]/g,_=Math.floor(E+.5);_<1?_=1:_>8&&(_=8);var T=Math.floor(c/2);(c&1)===0?(y[T]=_,b[T]=E-_):(x[T]=_,S[T]=E-_)}this.adjustOddEvenCounts(i,p);for(var C=0,O=0,c=y.length-1;c>=0;c--)O*=9,O+=y[c],C+=y[c];for(var D=0,j=0,c=x.length-1;c>=0;c--)D*=9,D+=x[c],j+=x[c];var L=O+3*D;if(i){if((C&1)!==0||C>12||C<4)throw new ee;var H=(12-C)/2,$=e.OUTSIDE_ODD_WIDEST[H],ne=9-$,se=Io.getRSSvalue(y,$,!1),le=Io.getRSSvalue(x,ne,!0),ue=e.OUTSIDE_EVEN_TOTAL_SUBSET[H],de=e.OUTSIDE_GSUM[H];return new Cu(se*ue+le+de,L)}else{if((j&1)!==0||j>10||j<4)throw new ee;var H=(10-j)/2,$=e.INSIDE_ODD_WIDEST[H],ne=9-$,se=Io.getRSSvalue(y,$,!0),le=Io.getRSSvalue(x,ne,!1),Se=e.INSIDE_ODD_TOTAL_SUBSET[H],de=e.INSIDE_GSUM[H];return new Cu(le*Se+se+de,L)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,c=0;c<a&&(s=!t.get(c),r!==s);)c++;for(var f=0,d=c,p=c;p<a;p++)if(t.get(p)!==s)i[f]++;else{if(f===3){if(_a.isFinderPattern(i))return[d,p];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,s=!s}throw new ee},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var s=t.get(a[0]),c=a[0]-1;c>=0&&s!==t.get(c);)c--;c++;var f=a[0]-c,d=this.getDecodeFinderCounters(),p=new Int32Array(d.length);St.arraycopy(d,0,p,1,d.length-1),p[0]=f;var g=this.parseFinderValue(p,e.FINDER_PATTERNS),y=c,x=a[1];return i&&(y=t.getSize()-1-y,x=t.getSize()-1-x),new Q2(g,[c,a[1]],y,x,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=nt.sum(new Int32Array(this.getOddCounts())),a=nt.sum(new Int32Array(this.getEvenCounts())),s=!1,c=!1,f=!1,d=!1;t?(i>12?c=!0:i<4&&(s=!0),a>12?d=!0:a<4&&(f=!0)):(i>11?c=!0:i<5&&(s=!0),a>10?d=!0:a<4&&(f=!0));var p=i+a-r,g=(i&1)===(t?1:0),y=(a&1)===1;if(p===1)if(g){if(y)throw new ee;c=!0}else{if(!y)throw new ee;d=!0}else if(p===-1)if(g){if(y)throw new ee;s=!0}else{if(!y)throw new ee;f=!0}else if(p===0){if(g){if(!y)throw new ee;i<a?(s=!0,d=!0):(c=!0,f=!0)}else if(y)throw new ee}else throw new ee;if(s){if(c)throw new ee;_a.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&_a.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(d)throw new ee;_a.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&_a.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(_a),C8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ko=(function(n){C8(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Et.POSSIBLE_FORMATS):null,a=t&&t.get(Et.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(Et.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(De.EAN_13)||i.includes(De.UPC_A)||i.includes(De.EAN_8)||i.includes(De.UPC_E))&&r.readers.push(new Eh(t)),i.includes(De.CODE_39)&&r.readers.push(new vy(a,s)),i.includes(De.CODE_93)&&r.readers.push(new my),i.includes(De.CODE_128)&&r.readers.push(new gy),i.includes(De.ITF)&&r.readers.push(new yy),i.includes(De.CODABAR)&&r.readers.push(new X4),i.includes(De.RSS_14)&&r.readers.push(new Cy),i.includes(De.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new _8))),r.readers.length===0&&(r.readers.push(new Eh(t)),r.readers.push(new vy),r.readers.push(new my),r.readers.push(new Eh(t)),r.readers.push(new gy),r.readers.push(new yy),r.readers.push(new Cy)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new ee},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(ln),T8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){T8(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new ko(r),t,r)||this}return e})(Yo);var Ty=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lt=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),ot=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),O8=(function(){function n(e,t,r,i,a,s){var c,f;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var d=0,p=s.getECCodewords(),g=s.getECBlocks();try{for(var y=Ty(g),x=y.next();!x.done;x=y.next()){var b=x.value;d+=b.getCount()*(b.getDataCodewords()+p)}}catch(S){c={error:S}}finally{try{x&&!x.done&&(f=y.return)&&f.call(y)}finally{if(c)throw c.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new ge;try{for(var a=Ty(n.VERSIONS),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.symbolSizeRows===e&&c.symbolSizeColumns===t)return c}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new ge},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new lt(5,new ot(1,3))),new n(2,12,12,10,10,new lt(7,new ot(1,5))),new n(3,14,14,12,12,new lt(10,new ot(1,8))),new n(4,16,16,14,14,new lt(12,new ot(1,12))),new n(5,18,18,16,16,new lt(14,new ot(1,18))),new n(6,20,20,18,18,new lt(18,new ot(1,22))),new n(7,22,22,20,20,new lt(20,new ot(1,30))),new n(8,24,24,22,22,new lt(24,new ot(1,36))),new n(9,26,26,24,24,new lt(28,new ot(1,44))),new n(10,32,32,14,14,new lt(36,new ot(1,62))),new n(11,36,36,16,16,new lt(42,new ot(1,86))),new n(12,40,40,18,18,new lt(48,new ot(1,114))),new n(13,44,44,20,20,new lt(56,new ot(1,144))),new n(14,48,48,22,22,new lt(68,new ot(1,174))),new n(15,52,52,24,24,new lt(42,new ot(2,102))),new n(16,64,64,14,14,new lt(56,new ot(2,140))),new n(17,72,72,16,16,new lt(36,new ot(4,92))),new n(18,80,80,18,18,new lt(48,new ot(4,114))),new n(19,88,88,20,20,new lt(56,new ot(4,144))),new n(20,96,96,22,22,new lt(68,new ot(4,174))),new n(21,104,104,24,24,new lt(56,new ot(6,136))),new n(22,120,120,18,18,new lt(68,new ot(6,175))),new n(23,132,132,20,20,new lt(62,new ot(8,163))),new n(24,144,144,22,22,new lt(62,new ot(8,156),new ot(2,155))),new n(25,8,18,6,16,new lt(7,new ot(1,5))),new n(26,8,32,6,14,new lt(11,new ot(1,10))),new n(27,12,26,10,24,new lt(14,new ot(1,16))),new n(28,12,36,10,16,new lt(18,new ot(1,22))),new n(29,16,36,14,16,new lt(24,new ot(1,32))),new n(30,16,48,14,22,new lt(28,new ot(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),R8=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new ge;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Gr(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return O8.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),c=!1,f=!1,d=!1,p=!1;do if(r===a&&i===0&&!c)e[t++]=this.readCorner1(a,s)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!f)e[t++]=this.readCorner2(a,s)&255,r-=2,i+=2,f=!0;else if(r===a+4&&i===2&&(s&7)===0&&!d)e[t++]=this.readCorner3(a,s)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(s&7)===4&&!p)e[t++]=this.readCorner4(a,s)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(t!==this.version.getTotalCodewords())throw new ge;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Ne("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,c=r/a|0,f=s*i,d=c*a,p=new Gr(d,f),g=0;g<s;++g)for(var y=g*i,x=0;x<c;++x)for(var b=x*a,S=0;S<i;++S)for(var E=g*(i+2)+1+S,_=y+S,T=0;T<a;++T){var C=x*(a+2)+1+T;if(e.get(C,E)){var O=b+T;p.set(O,_)}}return p},n})(),Oy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D8=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,s,c=t.getECBlocks(),f=0,d=c.getECBlocks();try{for(var p=Oy(d),g=p.next();!g.done;g=p.next()){var y=g.value;f+=y.getCount()}}catch(de){r={error:de}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var x=new Array(f),b=0;try{for(var S=Oy(d),E=S.next();!E.done;E=S.next())for(var y=E.value,_=0;_<y.getCount();_++){var T=y.getDataCodewords(),C=c.getECCodewords()+T;x[b++]=new n(T,new Uint8Array(C))}}catch(de){a={error:de}}finally{try{E&&!E.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}for(var O=x[0].codewords.length,D=O-c.getECCodewords(),j=D-1,L=0,_=0;_<j;_++)for(var H=0;H<b;H++)x[H].codewords[_]=e[L++];for(var $=t.getVersionNumber()===24,ne=$?8:b,H=0;H<ne;H++)x[H].codewords[D-1]=e[L++];for(var se=x[0].codewords.length,_=D;_<se;_++)for(var H=0;H<b;H++){var le=$?(H+8)%b:H,ue=$&&le>7?_-1:_;x[le].codewords[ue]=e[L++]}if(L!==e.length)throw new Ne;return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),tw=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ne(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,c=e<s?e:s,f=s-c,d=255>>8-c<<f;t=(a[i]&d)>>f,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var f=8-e,d=255>>f<<f;t=t<<e|(a[i]&d)>>f,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),tn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(tn||(tn={}));var N8=(function(){function n(){}return n.decode=function(e){var t=new tw(e),r=new ze,i=new ze,a=new Array,s=tn.ASCII_ENCODE;do if(s===tn.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case tn.C40_ENCODE:this.decodeC40Segment(t,r);break;case tn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case tn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case tn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case tn.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new ge}s=tn.ASCII_ENCODE}while(s!==tn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new zu(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new ge;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),tn.ASCII_ENCODE;if(a===129)return tn.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return tn.C40_ENCODE;case 231:return tn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return tn.ANSIX12_ENCODE;case 239:return tn.TEXT_ENCODE;case 240:return tn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new ge;break}}while(e.available()>0);return tn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var c=0;c<3;c++){var f=i[c];switch(a){case 0:if(f<3)a=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[f];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new ge;break;case 1:r?(t.append(String.fromCharCode(f+128)),r=!1):t.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[f];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(f){case 27:t.append("");break;case 30:r=!0;break;default:throw new ge}a=0;break;case 3:r?(t.append(String.fromCharCode(f+224)),r=!1):t.append(String.fromCharCode(f+96)),a=0;break;default:throw new ge}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var c=0;c<3;c++){var f=i[c];switch(a){case 0:if(f<3)a=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[f];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new ge;break;case 1:r?(t.append(String.fromCharCode(f+128)),r=!1):t.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[f];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(f){case 27:t.append("");break;case 30:r=!0;break;default:throw new ge}a=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[f];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d),a=0}else throw new ge;break;default:throw new ge}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new ge;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new ge;for(var c=new Uint8Array(s),f=0;f<s;f++){if(e.available()<8)throw new ge;c[f]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{t.append(mr.decode(c,Ze.ISO88591))}catch(d){throw new Nl("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),I8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k8=(function(){function n(){this.rsDecoder=new Vu(Gn.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new R8(e),a=i.getVersion(),s=i.readCodewords(),c=D8.getDataBlocks(s,a),f=0;try{for(var d=I8(c),p=d.next();!p.done;p=d.next()){var g=p.value;f+=g.getNumDataCodewords()}}catch(C){t={error:C}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}for(var y=new Uint8Array(f),x=c.length,b=0;b<x;b++){var S=c[b],E=S.getCodewords(),_=S.getNumDataCodewords();this.correctErrors(E,_);for(var T=0;T<_;T++)y[T*x+b]=E[T]}return N8.decode(y)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Kt}for(var i=0;i<t;i++)e[i]=r[i]},n})(),M8=(function(){function n(e){this.image=e,this.rectangleDetector=new d0(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new ee;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],s=t[3],c=this.transitionsBetween(r,s)+1,f=this.transitionsBetween(a,s)+1;(c&1)===1&&(c+=1),(f&1)===1&&(f+=1),4*c<7*f&&4*f<7*c&&(c=f=Math.max(c,f));var d=n.sampleGrid(this.image,r,i,a,s,c,f);return new Z0(d,[r,i,a,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Ee(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Ee(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,r),c=this.transitionsBetween(r,i),f=this.transitionsBetween(i,a),d=this.transitionsBetween(a,t),p=s,g=[a,t,r,i];return p>c&&(p=c,g[0]=t,g[1]=r,g[2]=i,g[3]=a),p>f&&(p=f,g[0]=r,g[1]=i,g[2]=a,g[3]=t),p>d&&(g[0]=i,g[1]=a,g[2]=t,g[3]=r),g},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),c=n.shiftPoint(r,i,(s+1)*4),f=n.shiftPoint(i,r,(s+1)*4),d=this.transitionsBetween(c,t),p=this.transitionsBetween(f,a);return d<p?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),c=this.transitionsBetween(r,a),f=n.shiftPoint(t,r,(c+1)*4),d=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(f,a),c=this.transitionsBetween(d,a);var p=new Ee(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),g=new Ee(a.getX()+(t.getX()-r.getX())/(c+1),a.getY()+(t.getY()-r.getY())/(c+1));if(!this.isValid(p))return this.isValid(g)?g:null;if(!this.isValid(g))return p;var y=this.transitionsBetween(f,p)+this.transitionsBetween(d,p),x=this.transitionsBetween(f,g)+this.transitionsBetween(d,g);return y>x?p:g},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,c=this.transitionsBetween(i,a)+1,f=n.shiftPoint(t,r,c*4),d=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(f,a)+1,c=this.transitionsBetween(d,a)+1,(s&1)===1&&(s+=1),(c&1)===1&&(c+=1);var p=(t.getX()+r.getX()+i.getX()+a.getX())/4,g=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,p,g),r=n.moveAway(r,p,g),i=n.moveAway(i,p,g),a=n.moveAway(a,p,g);var y,x;return f=n.shiftPoint(t,r,c*4),f=n.shiftPoint(f,a,s*4),y=n.shiftPoint(r,t,c*4),y=n.shiftPoint(y,i,s*4),d=n.shiftPoint(i,a,c*4),d=n.shiftPoint(d,r,s*4),x=n.shiftPoint(a,i,c*4),x=n.shiftPoint(x,t,s*4),[f,y,d,x]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,s,c){var f=Q0.getInstance();return f.sampleGrid(e,s,c,.5,.5,s-.5,.5,s-.5,c-.5,.5,c-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),c=Math.abs(s-i)>Math.abs(a-r);if(c){var f=r;r=i,i=f,f=a,a=s,s=f}for(var d=Math.abs(a-r),p=Math.abs(s-i),g=-d/2,y=i<s?1:-1,x=r<a?1:-1,b=0,S=this.image.get(c?i:r,c?r:i),E=r,_=i;E!==a;E+=x){var T=this.image.get(c?_:E,c?E:_);if(T!==S&&(b++,S=T),g+=p,g>0){if(_===s)break;_+=y,g-=d}}return b},n})(),Tu=(function(){function n(){this.decoder=new k8}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Et.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new M8(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var c=r.getRawBytes(),f=new Nn(r.getText(),c,8*c.length,i,De.DATA_MATRIX,St.currentTimeMillis()),d=r.getByteSegments();d!=null&&f.putMetadata(En.BYTE_SEGMENTS,d);var p=r.getECLevel();return p!=null&&f.putMetadata(En.ERROR_CORRECTION_LEVEL,p),f},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ee;var i=this.moduleSize(t,e),a=t[1],s=r[1],c=t[0],f=r[0],d=(f-c+1)/i,p=(s-a+1)/i;if(d<=0||p<=0)throw new ee;var g=i/2;a+=g,c+=g;for(var y=new Gr(d,p),x=0;x<p;x++)for(var b=a+x*i,S=0;S<d;S++)e.get(c+S*i,b)&&y.set(S,x);return y},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new ee;var s=i-e[0];if(s===0)throw new ee;return s},n.NO_POINTS=[],n})(),j8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){j8(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Tu,t)||this}return e})(Yo);var Mo;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Mo||(Mo={}));var P8=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Gt(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Ne;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Mo.L,"L",1),n.M=new n(Mo.M,"M",0),n.Q=new n(Mo.Q,"Q",3),n.H=new n(Mo.H,"H",2),n})(),B8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nw=(function(){function n(e){this.errorCorrectionLevel=P8.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Ge.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var c=B8(n.FORMAT_INFO_DECODE_LOOKUP),f=c.next();!f.done;f=c.next()){var d=f.value,p=d[0];if(p===e||p===t)return new n(d[1]);var g=n.numBitsDiffering(e,p);g<a&&(s=d[1],a=g),e!==t&&(g=n.numBitsDiffering(t,p),g<a&&(s=d[1],a=g))}}catch(y){r={error:y}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),L8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=L8(i),s=a.next();!s.done;s=a.next()){var c=s.value;r+=c.getCount()}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),M=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),F8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oa=(function(){function n(e,t){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var c=0,f=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var p=F8(d),g=p.next();!g.done;g=p.next()){var y=g.value;c+=y.getCount()*(y.getDataCodewords()+f)}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new ge;try{return this.getVersionForNumber((e-17)/4)}catch{throw new ge}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Ne;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var s=nw.numBitsDiffering(e,a);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Gr(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Y(7,new M(1,19)),new Y(10,new M(1,16)),new Y(13,new M(1,13)),new Y(17,new M(1,9))),new n(2,Int32Array.from([6,18]),new Y(10,new M(1,34)),new Y(16,new M(1,28)),new Y(22,new M(1,22)),new Y(28,new M(1,16))),new n(3,Int32Array.from([6,22]),new Y(15,new M(1,55)),new Y(26,new M(1,44)),new Y(18,new M(2,17)),new Y(22,new M(2,13))),new n(4,Int32Array.from([6,26]),new Y(20,new M(1,80)),new Y(18,new M(2,32)),new Y(26,new M(2,24)),new Y(16,new M(4,9))),new n(5,Int32Array.from([6,30]),new Y(26,new M(1,108)),new Y(24,new M(2,43)),new Y(18,new M(2,15),new M(2,16)),new Y(22,new M(2,11),new M(2,12))),new n(6,Int32Array.from([6,34]),new Y(18,new M(2,68)),new Y(16,new M(4,27)),new Y(24,new M(4,19)),new Y(28,new M(4,15))),new n(7,Int32Array.from([6,22,38]),new Y(20,new M(2,78)),new Y(18,new M(4,31)),new Y(18,new M(2,14),new M(4,15)),new Y(26,new M(4,13),new M(1,14))),new n(8,Int32Array.from([6,24,42]),new Y(24,new M(2,97)),new Y(22,new M(2,38),new M(2,39)),new Y(22,new M(4,18),new M(2,19)),new Y(26,new M(4,14),new M(2,15))),new n(9,Int32Array.from([6,26,46]),new Y(30,new M(2,116)),new Y(22,new M(3,36),new M(2,37)),new Y(20,new M(4,16),new M(4,17)),new Y(24,new M(4,12),new M(4,13))),new n(10,Int32Array.from([6,28,50]),new Y(18,new M(2,68),new M(2,69)),new Y(26,new M(4,43),new M(1,44)),new Y(24,new M(6,19),new M(2,20)),new Y(28,new M(6,15),new M(2,16))),new n(11,Int32Array.from([6,30,54]),new Y(20,new M(4,81)),new Y(30,new M(1,50),new M(4,51)),new Y(28,new M(4,22),new M(4,23)),new Y(24,new M(3,12),new M(8,13))),new n(12,Int32Array.from([6,32,58]),new Y(24,new M(2,92),new M(2,93)),new Y(22,new M(6,36),new M(2,37)),new Y(26,new M(4,20),new M(6,21)),new Y(28,new M(7,14),new M(4,15))),new n(13,Int32Array.from([6,34,62]),new Y(26,new M(4,107)),new Y(22,new M(8,37),new M(1,38)),new Y(24,new M(8,20),new M(4,21)),new Y(22,new M(12,11),new M(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Y(30,new M(3,115),new M(1,116)),new Y(24,new M(4,40),new M(5,41)),new Y(20,new M(11,16),new M(5,17)),new Y(24,new M(11,12),new M(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Y(22,new M(5,87),new M(1,88)),new Y(24,new M(5,41),new M(5,42)),new Y(30,new M(5,24),new M(7,25)),new Y(24,new M(11,12),new M(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Y(24,new M(5,98),new M(1,99)),new Y(28,new M(7,45),new M(3,46)),new Y(24,new M(15,19),new M(2,20)),new Y(30,new M(3,15),new M(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Y(28,new M(1,107),new M(5,108)),new Y(28,new M(10,46),new M(1,47)),new Y(28,new M(1,22),new M(15,23)),new Y(28,new M(2,14),new M(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Y(30,new M(5,120),new M(1,121)),new Y(26,new M(9,43),new M(4,44)),new Y(28,new M(17,22),new M(1,23)),new Y(28,new M(2,14),new M(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Y(28,new M(3,113),new M(4,114)),new Y(26,new M(3,44),new M(11,45)),new Y(26,new M(17,21),new M(4,22)),new Y(26,new M(9,13),new M(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Y(28,new M(3,107),new M(5,108)),new Y(26,new M(3,41),new M(13,42)),new Y(30,new M(15,24),new M(5,25)),new Y(28,new M(15,15),new M(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Y(28,new M(4,116),new M(4,117)),new Y(26,new M(17,42)),new Y(28,new M(17,22),new M(6,23)),new Y(30,new M(19,16),new M(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Y(28,new M(2,111),new M(7,112)),new Y(28,new M(17,46)),new Y(30,new M(7,24),new M(16,25)),new Y(24,new M(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Y(30,new M(4,121),new M(5,122)),new Y(28,new M(4,47),new M(14,48)),new Y(30,new M(11,24),new M(14,25)),new Y(30,new M(16,15),new M(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Y(30,new M(6,117),new M(4,118)),new Y(28,new M(6,45),new M(14,46)),new Y(30,new M(11,24),new M(16,25)),new Y(30,new M(30,16),new M(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Y(26,new M(8,106),new M(4,107)),new Y(28,new M(8,47),new M(13,48)),new Y(30,new M(7,24),new M(22,25)),new Y(30,new M(22,15),new M(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Y(28,new M(10,114),new M(2,115)),new Y(28,new M(19,46),new M(4,47)),new Y(28,new M(28,22),new M(6,23)),new Y(30,new M(33,16),new M(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Y(30,new M(8,122),new M(4,123)),new Y(28,new M(22,45),new M(3,46)),new Y(30,new M(8,23),new M(26,24)),new Y(30,new M(12,15),new M(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Y(30,new M(3,117),new M(10,118)),new Y(28,new M(3,45),new M(23,46)),new Y(30,new M(4,24),new M(31,25)),new Y(30,new M(11,15),new M(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Y(30,new M(7,116),new M(7,117)),new Y(28,new M(21,45),new M(7,46)),new Y(30,new M(1,23),new M(37,24)),new Y(30,new M(19,15),new M(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Y(30,new M(5,115),new M(10,116)),new Y(28,new M(19,47),new M(10,48)),new Y(30,new M(15,24),new M(25,25)),new Y(30,new M(23,15),new M(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Y(30,new M(13,115),new M(3,116)),new Y(28,new M(2,46),new M(29,47)),new Y(30,new M(42,24),new M(1,25)),new Y(30,new M(23,15),new M(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Y(30,new M(17,115)),new Y(28,new M(10,46),new M(23,47)),new Y(30,new M(10,24),new M(35,25)),new Y(30,new M(19,15),new M(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Y(30,new M(17,115),new M(1,116)),new Y(28,new M(14,46),new M(21,47)),new Y(30,new M(29,24),new M(19,25)),new Y(30,new M(11,15),new M(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Y(30,new M(13,115),new M(6,116)),new Y(28,new M(14,46),new M(23,47)),new Y(30,new M(44,24),new M(7,25)),new Y(30,new M(59,16),new M(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Y(30,new M(12,121),new M(7,122)),new Y(28,new M(12,47),new M(26,48)),new Y(30,new M(39,24),new M(14,25)),new Y(30,new M(22,15),new M(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Y(30,new M(6,121),new M(14,122)),new Y(28,new M(6,47),new M(34,48)),new Y(30,new M(46,24),new M(10,25)),new Y(30,new M(2,15),new M(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Y(30,new M(17,122),new M(4,123)),new Y(28,new M(29,46),new M(14,47)),new Y(30,new M(49,24),new M(10,25)),new Y(30,new M(24,15),new M(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Y(30,new M(4,122),new M(18,123)),new Y(28,new M(13,46),new M(32,47)),new Y(30,new M(48,24),new M(14,25)),new Y(30,new M(42,15),new M(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Y(30,new M(20,117),new M(4,118)),new Y(28,new M(40,47),new M(7,48)),new Y(30,new M(43,24),new M(22,25)),new Y(30,new M(10,15),new M(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Y(30,new M(19,118),new M(6,119)),new Y(28,new M(18,47),new M(31,48)),new Y(30,new M(34,24),new M(34,25)),new Y(30,new M(20,15),new M(61,16)))],n})(),pn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(pn||(pn={}));var Ry=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[pn.DATA_MASK_000,new n(pn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[pn.DATA_MASK_001,new n(pn.DATA_MASK_001,function(e,t){return(e&1)===0})],[pn.DATA_MASK_010,new n(pn.DATA_MASK_010,function(e,t){return t%3===0})],[pn.DATA_MASK_011,new n(pn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[pn.DATA_MASK_100,new n(pn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[pn.DATA_MASK_101,new n(pn.DATA_MASK_101,function(e,t){return e*t%6===0})],[pn.DATA_MASK_110,new n(pn.DATA_MASK_110,function(e,t){return e*t%6<3})],[pn.DATA_MASK_111,new n(pn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),U8=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new ge;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=nw.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ge},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Oa.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var c=Oa.decodeVersionInformation(r);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(c=Oa.decodeVersionInformation(r),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new ge},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=Ry.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,c=new Uint8Array(t.getTotalCodewords()),f=0,d=0,p=0,g=i-1;g>0;g-=2){g===6&&g--;for(var y=0;y<i;y++)for(var x=s?i-1-y:y,b=0;b<2;b++)a.get(g-b,x)||(p++,d<<=1,this.bitMatrix.get(g-b,x)&&(d|=1),p===8&&(c[f++]=d,p=0,d=0));s=!s}if(f!==t.getTotalCodewords())throw new ge;return c},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Ry.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),Dy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z8=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,s,c;if(e.length!==t.getTotalCodewords())throw new Ne;var f=t.getECBlocksForLevel(r),d=0,p=f.getECBlocks();try{for(var g=Dy(p),y=g.next();!y.done;y=g.next()){var x=y.value;d+=x.getCount()}}catch(ue){i={error:ue}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var b=new Array(d),S=0;try{for(var E=Dy(p),_=E.next();!_.done;_=E.next())for(var x=_.value,T=0;T<x.getCount();T++){var C=x.getDataCodewords(),O=f.getECCodewordsPerBlock()+C;b[S++]=new n(C,new Uint8Array(O))}}catch(ue){s={error:ue}}finally{try{_&&!_.done&&(c=E.return)&&c.call(E)}finally{if(s)throw s.error}}for(var D=b[0].codewords.length,j=b.length-1;j>=0;){var L=b[j].codewords.length;if(L===D)break;j--}j++;for(var H=D-f.getECCodewordsPerBlock(),$=0,T=0;T<H;T++)for(var ne=0;ne<S;ne++)b[ne].codewords[T]=e[$++];for(var ne=j;ne<S;ne++)b[ne].codewords[H]=e[$++];for(var se=b[0].codewords.length,T=H;T<se;T++)for(var ne=0;ne<S;ne++){var le=ne<j?T:T+1;b[ne].codewords[le]=e[$++]}return b},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),hr;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(hr||(hr={}));var Ct=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Ne;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(hr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(hr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(hr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(hr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(hr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(hr.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(hr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(hr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(hr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(hr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),V8=(function(){function n(){}return n.decode=function(e,t,r,i){var a=new tw(e),s=new ze,c=new Array,f=-1,d=-1;try{var p=null,g=!1,y=void 0;do{if(a.available()<4)y=Ct.TERMINATOR;else{var x=a.readBits(4);y=Ct.forBits(x)}switch(y){case Ct.TERMINATOR:break;case Ct.FNC1_FIRST_POSITION:case Ct.FNC1_SECOND_POSITION:g=!0;break;case Ct.STRUCTURED_APPEND:if(a.available()<16)throw new ge;f=a.readBits(8),d=a.readBits(8);break;case Ct.ECI:var b=n.parseECIValue(a);if(p=on.getCharacterSetECIByValue(b),p===null)throw new ge;break;case Ct.HANZI:var S=a.readBits(4),E=a.readBits(y.getCharacterCountBits(t));S===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,E);break;default:var _=a.readBits(y.getCharacterCountBits(t));switch(y){case Ct.NUMERIC:n.decodeNumericSegment(a,s,_);break;case Ct.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,_,g);break;case Ct.BYTE:n.decodeByteSegment(a,s,_,p,c,i);break;case Ct.KANJI:n.decodeKanjiSegment(a,s,_);break;default:throw new ge}break}}while(y!==Ct.TERMINATOR)}catch{throw new ge}return new zu(e,s.toString(),c.length===0?null:c,r===null?null:r.toString(),f,d)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new ge;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),c=s/96<<8&4294967295|s%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{t.append(mr.decode(i,Ze.GB2312))}catch(f){throw new ge(f)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new ge;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),c=s/192<<8&4294967295|s%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{t.append(mr.decode(i,Ze.SHIFT_JIS))}catch(f){throw new ge(f)}},n.decodeByteSegment=function(e,t,r,i,a,s){if(8*r>e.available())throw new ge;for(var c=new Uint8Array(r),f=0;f<r;f++)c[f]=e.readBits(8);var d;i===null?d=Ze.guessEncoding(c,s):d=i.getName();try{t.append(mr.decode(c,d))}catch(p){throw new ge(p)}a.push(c)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new ge;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new ge;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new ge;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var c=a;c<t.length();c++)t.charAt(c)==="%"&&(c<t.length()-1&&t.charAt(c+1)==="%"?t.deleteCharAt(c+1):t.setCharAt(c,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new ge;var i=e.readBits(10);if(i>=1e3)throw new ge;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new ge;var a=e.readBits(7);if(a>=100)throw new ge;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new ge;var s=e.readBits(4);if(s>=10)throw new ge;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new ge},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),rw=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),Ny=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H8=(function(){function n(){this.rsDecoder=new Vu(Gn.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Gr.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new U8(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new rw(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,s,c=e.readVersion(),f=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),p=z8.getDataBlocks(d,c,f),g=0;try{for(var y=Ny(p),x=y.next();!x.done;x=y.next()){var b=x.value;g+=b.getNumDataCodewords()}}catch(j){r={error:j}}finally{try{x&&!x.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}var S=new Uint8Array(g),E=0;try{for(var _=Ny(p),T=_.next();!T.done;T=_.next()){var b=T.value,C=b.getCodewords(),O=b.getNumDataCodewords();this.correctErrors(C,O);for(var D=0;D<O;D++)S[E++]=C[D]}}catch(j){a={error:j}}finally{try{T&&!T.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}return V8.decode(S,c,f,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Kt}for(var i=0;i<t;i++)e[i]=r[i]},n})(),G8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$8=(function(n){G8(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,s=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new e(a,s,c)},e})(Ee),q8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W8=(function(){function n(e,t,r,i,a,s,c){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,s=new Int32Array(3),c=this.image,f=0;f<t;f++){var d=a+((f&1)===0?Math.floor((f+1)/2):-Math.floor((f+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var p=e;p<i&&!c.get(p,d);)p++;for(var g=0;p<i;){if(c.get(p,d))if(g===1)s[1]++;else if(g===2){if(this.foundPatternCross(s)){var y=this.handlePossibleCenter(s,d,p);if(y!==null)return y}s[0]=s[2],s[1]=1,s[2]=0,g=1}else s[++g]++;else g===1&&g++,s[g]++;p++}if(this.foundPatternCross(s)){var y=this.handlePossibleCenter(s,d,i);if(y!==null)return y}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,s=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;for(var f=e;f>=0&&a.get(t,f)&&c[1]<=r;)c[1]++,f--;if(f<0||c[1]>r)return NaN;for(;f>=0&&!a.get(t,f)&&c[0]<=r;)c[0]++,f--;if(c[0]>r)return NaN;for(f=e+1;f<s&&a.get(t,f)&&c[1]<=r;)c[1]++,f++;if(f===s||c[1]>r)return NaN;for(;f<s&&!a.get(t,f)&&c[2]<=r;)c[2]++,f++;if(c[2]>r)return NaN;var d=c[0]+c[1]+c[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(c)?n.centerFromEnd(c,f):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,s=e[0]+e[1]+e[2],c=n.centerFromEnd(e,r),f=this.crossCheckVertical(t,c,2*e[1],s);if(!isNaN(f)){var d=(e[0]+e[1]+e[2])/3;try{for(var p=q8(this.possibleCenters),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.aboutEquals(d,f,c))return y.combineEstimate(f,c,d)}}catch(b){i={error:b}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new $8(c,f,d);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null},n})(),X8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Y8=(function(n){X8(e,n);function e(t,r,i,a){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,c=(this.count*this.getY()+t)/a,f=(this.count*this.estimatedModuleSize+i)/a;return new e(s,c,f,a)},e})(Ee),K8=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),el=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z8=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Et.TRY_HARDER)!==void 0,r=e!=null&&e.get(Et.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),c=Math.floor(3*a/(4*n.MAX_MODULES));(c<n.MIN_SKIP||t)&&(c=n.MIN_SKIP);for(var f=!1,d=new Int32Array(5),p=c-1;p<a&&!f;p+=c){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var g=0,y=0;y<s;y++)if(i.get(y,p))(g&1)===1&&g++,d[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(d)){var x=this.handlePossibleCenter(d,p,y,r);if(x===!0)if(c=2,this.hasSkipped===!0)f=this.haveMultiplyConfirmedCenters();else{var b=this.findRowSkip();b>d[2]&&(p+=b-d[2]-c,y=s-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;continue}g=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;else d[++g]++;else d[g]++;if(n.foundPatternCross(d)){var x=this.handlePossibleCenter(d,p,s,r);x===!0&&(c=d[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}}var S=this.selectBestPatterns();return Ee.orderBestPatterns(S),new K8(S)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),s=0,c=this.image;e>=s&&t>=s&&c.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!c.get(t-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||t<s||a[1]>r)return!1;for(;e>=s&&t>=s&&c.get(t-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var f=c.getHeight(),d=c.getWidth();for(s=1;e+s<f&&t+s<d&&c.get(t+s,e+s);)a[2]++,s++;if(e+s>=f||t+s>=d)return!1;for(;e+s<f&&t+s<d&&!c.get(t+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=f||t+s>=d||a[3]>=r)return!1;for(;e+s<f&&t+s<d&&c.get(t+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,s=a.getHeight(),c=this.getCrossCheckStateCount(),f=e;f>=0&&a.get(t,f);)c[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(t,f)&&c[1]<=r;)c[1]++,f--;if(f<0||c[1]>r)return NaN;for(;f>=0&&a.get(t,f)&&c[0]<=r;)c[0]++,f--;if(c[0]>r)return NaN;for(f=e+1;f<s&&a.get(t,f);)c[2]++,f++;if(f===s)return NaN;for(;f<s&&!a.get(t,f)&&c[3]<r;)c[3]++,f++;if(f===s||c[3]>=r)return NaN;for(;f<s&&a.get(t,f)&&c[4]<r;)c[4]++,f++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,f):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,s=a.getWidth(),c=this.getCrossCheckStateCount(),f=e;f>=0&&a.get(f,t);)c[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(f,t)&&c[1]<=r;)c[1]++,f--;if(f<0||c[1]>r)return NaN;for(;f>=0&&a.get(f,t)&&c[0]<=r;)c[0]++,f--;if(c[0]>r)return NaN;for(f=e+1;f<s&&a.get(f,t);)c[2]++,f++;if(f===s)return NaN;for(;f<s&&!a.get(f,t)&&c[3]<r;)c[3]++,f++;if(f===s||c[3]>=r)return NaN;for(;f<s&&a.get(f,t)&&c[4]<r;)c[4]++,f++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,f):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(c)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(c),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(s),e[2],a)))){for(var f=a/7,d=!1,p=this.possibleCenters,g=0,y=p.length;g<y;g++){var x=p[g];if(x.aboutEquals(f,c,s)){p[g]=x.combineEstimate(c,s,f),d=!0;break}}if(!d){var b=new Y8(s,c,f);p.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=el(this.possibleCenters),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.getCount()>=n.CENTER_QUORUM)if(i==null)i=c;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-c.getX())-Math.abs(i.getY()-c.getY()))/2)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,s=0,c=this.possibleCenters.length;try{for(var f=el(this.possibleCenters),d=f.next();!d.done;d=f.next()){var p=d.value;p.getCount()>=n.CENTER_QUORUM&&(a++,s+=p.getEstimatedModuleSize())}}catch(S){e={error:S}}finally{try{d&&!d.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}if(a<3)return!1;var g=s/c,y=0;try{for(var x=el(this.possibleCenters),b=x.next();!b.done;b=x.next()){var p=b.value;y+=Math.abs(p.getEstimatedModuleSize()-g)}}catch(S){r={error:S}}finally{try{b&&!b.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}return y<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new ee;var s=this.possibleCenters,c;if(a>3){var f=0,d=0;try{for(var p=el(this.possibleCenters),g=p.next();!g.done;g=p.next()){var y=g.value,x=y.getEstimatedModuleSize();f+=x,d+=x*x}}catch(D){e={error:D}}finally{try{g&&!g.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}c=f/a;var b=Math.sqrt(d/a-c*c);s.sort(function(D,j){var L=Math.abs(j.getEstimatedModuleSize()-c),H=Math.abs(D.getEstimatedModuleSize()-c);return L<H?-1:L>H?1:0});for(var S=Math.max(.2*c,b),E=0;E<s.length&&s.length>3;E++){var _=s[E];Math.abs(_.getEstimatedModuleSize()-c)>S&&(s.splice(E,1),E--)}}if(s.length>3){var f=0;try{for(var T=el(s),C=T.next();!C.done;C=T.next()){var O=C.value;f+=O.getEstimatedModuleSize()}}catch(j){r={error:j}}finally{try{C&&!C.done&&(i=T.return)&&i.call(T)}finally{if(r)throw r.error}}c=f/s.length,s.sort(function(j,L){if(L.getCount()===j.getCount()){var H=Math.abs(L.getEstimatedModuleSize()-c),$=Math.abs(j.getEstimatedModuleSize()-c);return H<$?1:H>$?-1:0}else return L.getCount()-j.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),Q8=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Et.NEED_RESULT_POINT_CALLBACK);var t=new Z8(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new ee("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,a),c=Oa.getProvisionalVersionForDimension(s),f=c.getDimensionForVersion()-7,d=null;if(c.getAlignmentPatternCenters().length>0)for(var p=r.getX()-t.getX()+i.getX(),g=r.getY()-t.getY()+i.getY(),y=1-3/f,x=Math.floor(t.getX()+y*(p-t.getX())),b=Math.floor(t.getY()+y*(g-t.getY())),S=4;S<=16;S<<=1)try{d=this.findAlignmentInRegion(a,x,b,S);break}catch(C){if(!(C instanceof ee))throw C}var E=n.createTransform(t,r,i,d,s),_=n.sampleGrid(this.image,E,s),T;return d===null?T=[i,t,r]:T=[i,t,r,d],new Z0(_,T)},n.createTransform=function(e,t,r,i,a){var s=a-3.5,c,f,d,p;return i!==null?(c=i.getX(),f=i.getY(),d=s-3,p=d):(c=t.getX()-e.getX()+r.getX(),f=t.getY()-e.getY()+r.getY(),d=s,p=s),Z2.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,d,p,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),c,f,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Q0.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=nt.round(Ee.distance(e,t)/i),s=nt.round(Ee.distance(e,r)/i),c=Math.floor((a+s)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new ee("Dimensions could be not found.")}return c},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,c=e-(r-e);c<0?(s=e/(e-c),c=0):c>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);var f=Math.floor(t-(i-t)*s);return s=1,f<0?(s=t/(t-f),f=0):f>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(f-t),f=this.image.getHeight()-1),c=Math.floor(e+(c-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,c,f),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var s=e;e=t,t=s,s=r,r=i,i=s}for(var c=Math.abs(r-e),f=Math.abs(i-t),d=-c/2,p=e<r?1:-1,g=t<i?1:-1,y=0,x=r+p,b=e,S=t;b!==x;b+=p){var E=a?S:b,_=a?b:S;if(y===1===this.image.get(E,_)){if(y===2)return nt.distance(b,S,e,t);y++}if(d+=f,d>0){if(S===i)break;S+=g,d-=c}}return y===2?nt.distance(r+p,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),s=Math.max(0,t-a),c=Math.min(this.image.getWidth()-1,t+a);if(c-s<e*3)throw new ee("Alignment top exceeds estimated module size.");var f=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-f<e*3)throw new ee("Alignment bottom exceeds estimated module size.");var p=new W8(this.image,s,f,c-s,d-f,e,this.resultPointCallback);return p.find()},n})(),Ou=(function(){function n(){this.decoder=new H8}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Et.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var s=new Q8(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof rw&&r.getOther().applyMirroredCorrection(i);var c=new Nn(r.getText(),r.getRawBytes(),void 0,i,De.QR_CODE,void 0),f=r.getByteSegments();f!==null&&c.putMetadata(En.BYTE_SEGMENTS,f);var d=r.getECLevel();return d!==null&&c.putMetadata(En.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(c.putMetadata(En.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),c.putMetadata(En.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ee;var i=this.moduleSize(t,e),a=t[1],s=r[1],c=t[0],f=r[0];if(c>=f||a>=s)throw new ee;if(s-a!==f-c&&(f=c+(s-a),f>=e.getWidth()))throw new ee;var d=Math.round((f-c+1)/i),p=Math.round((s-a+1)/i);if(d<=0||p<=0)throw new ee;if(p!==d)throw new ee;var g=Math.floor(i/2);a+=g,c+=g;var y=c+Math.floor((d-1)*i)-f;if(y>0){if(y>g)throw new ee;c-=y}var x=a+Math.floor((p-1)*i)-s;if(x>0){if(x>g)throw new ee;a-=x}for(var b=new Gr(d,p),S=0;S<p;S++)for(var E=a+Math.floor(S*i),_=0;_<d;_++)e.get(c+Math.floor(_*i),E)&&b.set(_,S);return b},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],c=!0,f=0;a<i&&s<r;){if(c!==t.get(a,s)){if(++f===5)break;c=!c}a++,s++}if(a===i||s===r)throw new ee;return(a-e[0])/7},n.NO_POINTS=new Array,n})(),J8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},et=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return nt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=J8(e),c=s.next();!c.done;c=s.next()){var f=c.value;i[a++]=f}}catch(d){t={error:d}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=sn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),e6=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),t6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n6=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new e6(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,s=0,c=0,f=!1;s<t.getHeight();){var d=n.findVertices(t,s,c);if(d[0]==null&&d[3]==null){if(!f)break;f=!1,c=0;try{for(var p=(r=void 0,t6(a)),g=p.next();!g.done;g=p.next()){var y=g.value;y[1]!=null&&(s=Math.trunc(Math.max(s,y[1].getY()))),y[3]!=null&&(s=Math.max(s,Math.trunc(y[3].getY())))}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(f=!0,a.push(d),!e)break;d[2]!=null?(c=Math.trunc(d[2].getX()),s=Math.trunc(d[2].getY())):(c=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,s){for(var c=new Array(4),f=!1,d=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var p=n.findGuardPattern(e,a,i,r,!1,s,d);if(p!=null){for(;i>0;){var g=n.findGuardPattern(e,a,--i,r,!1,s,d);if(g!=null)p=g;else{i++;break}}c[0]=new Ee(p[0],i),c[1]=new Ee(p[1],i),f=!0;break}}var y=i+1;if(f){for(var x=0,g=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);y<t;y++){var p=n.findGuardPattern(e,g[0],y,r,!1,s,d);if(p!=null&&Math.abs(g[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-p[1])<n.MAX_PATTERN_DRIFT)g=p,x=0;else{if(x>n.SKIPPED_ROW_COUNT_MAX)break;x++}}y-=x+1,c[2]=new Ee(g[0],y),c[3]=new Ee(g[1],y)}return y-i<n.BARCODE_MIN_HEIGHT&&sn.fill(c,null),c},n.findGuardPattern=function(e,t,r,i,a,s,c){sn.fillWithin(c,0,c.length,0);for(var f=t,d=0;e.get(f,r)&&f>0&&d++<n.MAX_PIXEL_DRIFT;)f--;for(var p=f,g=0,y=s.length,x=a;p<i;p++){var b=e.get(p,r);if(b!==x)c[g]++;else{if(g===y-1){if(n.patternMatchVariance(c,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([f,p]);f+=c[0]+c[1],St.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,x=!x}}return g===y-1&&n.patternMatchVariance(c,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([f,p-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,c=0;c<i;c++)a+=e[c],s+=t[c];if(a<s)return 1/0;var f=a/s;r*=f;for(var d=0,p=0;p<i;p++){var g=e[p],y=t[p]*f,x=g>y?g-y:y-g;if(x>r)return 1/0;d+=x}return d/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),r6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Aa=(function(){function n(e,t){if(t.length===0)throw new Ne;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),St.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=r6(this.coefficients),s=a.next();!s.done;s=a.next()){var c=s.value;i=this.field.add(i,c)}}catch(g){t={error:g}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var f=this.coefficients[0],d=this.coefficients.length,p=1;p<d;p++)f=this.field.add(this.field.multiply(e,f),this.coefficients[p]);return f},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ne("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;St.arraycopy(r,0,a,0,s);for(var c=s;c<r.length;c++)a[c]=this.field.add(t[c-s],r[c]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ne("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ne("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),c=0;c<r;c++)for(var f=t[c],d=0;d<a;d++)s[c+d]=this.field.add(s[c+d],this.field.multiply(f,i[d]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ne;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new ze,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),i6=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ne;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new K2;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),a6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),o6=(function(n){a6(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Aa(i,new Int32Array([0])),i.one=new Aa(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ne;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Aa(this,i)},e.PDF417_GF=new e(et.NUMBER_OF_CODEWORDS,3),e})(i6),s6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l6=(function(){function n(){this.field=o6.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,s=new Aa(this.field,e),c=new Int32Array(t),f=!1,d=t;d>0;d--){var p=s.evaluateAt(this.field.exp(d));c[t-d]=p,p!==0&&(f=!0)}if(!f)return 0;var g=this.field.getOne();if(r!=null)try{for(var y=s6(r),x=y.next();!x.done;x=y.next()){var b=x.value,S=this.field.exp(e.length-1-b),E=new Aa(this.field,new Int32Array([this.field.subtract(0,S),1]));g=g.multiply(E)}}catch(H){i={error:H}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}for(var _=new Aa(this.field,c),T=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),_,t),C=T[0],O=T[1],D=this.findErrorLocations(C),j=this.findErrorMagnitudes(O,C,D),d=0;d<D.length;d++){var L=e.length-1-this.field.log(D[d]);if(L<0)throw Kt.getChecksumInstance();e[L]=this.field.subtract(e[L],j[d])}return D.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,c=this.field.getZero(),f=this.field.getOne();s.getDegree()>=Math.round(r/2);){var d=a,p=c;if(a=s,c=f,a.isZero())throw Kt.getChecksumInstance();s=d;for(var g=this.field.getZero(),y=a.getCoefficient(a.getDegree()),x=this.field.inverse(y);s.getDegree()>=a.getDegree()&&!s.isZero();){var b=s.getDegree()-a.getDegree(),S=this.field.multiply(s.getCoefficient(s.getDegree()),x);g=g.add(this.field.buildMonomial(b,S)),s=s.subtract(a.multiplyByMonomial(b,S))}f=g.multiply(c).subtract(p).negative()}var E=f.getCoefficient(0);if(E===0)throw Kt.getChecksumInstance();var _=this.field.inverse(E),T=f.multiply(_),C=s.multiply(_);return[T,C]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Kt.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var c=new Aa(this.field,a),f=r.length,d=new Int32Array(f),s=0;s<f;s++){var p=this.field.inverse(r[s]),g=this.field.subtract(0,e.evaluateAt(p)),y=this.field.inverse(c.evaluateAt(p));d[s]=this.field.multiply(g,y)}return d},n})(),p0=(function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var s=t==null||r==null,c=i==null||a==null;if(s&&c)throw new ee;s?(t=new Ee(0,i.getY()),r=new Ee(0,a.getY())):c&&(i=new Ee(e.getWidth()-1,t.getY()),a=new Ee(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,c=this.bottomRight;if(e>0){var f=r?this.topLeft:this.topRight,d=Math.trunc(f.getY()-e);d<0&&(d=0);var p=new Ee(f.getX(),d);r?i=p:s=p}if(t>0){var g=r?this.bottomLeft:this.bottomRight,y=Math.trunc(g.getY()+t);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);var x=new Ee(g.getX(),y);r?a=x:c=x}return new n(this.image,i,a,s,c)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),c6=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),e1=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,c,f,d,p,g){if(s==="%%")return"%";if(t[++r]!==void 0){s=d?parseInt(d.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,x;switch(g){case"s":x=t[r];break;case"c":x=t[r][0];break;case"f":x=parseFloat(t[r]).toFixed(s);break;case"p":x=parseFloat(t[r]).toPrecision(s);break;case"e":x=parseFloat(t[r]).toExponential(s);break;case"x":x=parseInt(t[r]).toString(y||16);break;case"d":x=parseFloat(parseInt(t[r],y||10).toPrecision(s)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(y);for(var b=parseInt(f),S=f&&f[0]+""=="0"?"0":" ";x.length<b;)x=c!==void 0?x+S:S+x;return x}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),u6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iw=(function(){function n(e){this.boundingBox=new p0(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new e1,i=0;try{for(var a=u6(this.codewords),s=a.next();!s.done;s=a.next()){var c=s.value;if(c==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue())}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),f6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d6=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},ol=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(g,y){var x={getKey:function(){return g},getValue:function(){return y}};x.getValue()>r?(r=x.getValue(),i=[],i.push(x.getKey())):x.getValue()===r&&i.push(x.getKey())};try{for(var s=f6(this.values.entries()),c=s.next();!c.done;c=s.next()){var f=d6(c.value,2),d=f[0],p=f[1];a(d,p)}}catch(g){e={error:g}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return et.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),h6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ch=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Iy=(function(n){h6(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Ch(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=-1,p=1,g=0,y=c;y<f;y++)if(r[y]!=null){var x=r[y],b=x.getRowNumber()-d;if(b===0)g++;else if(b===1)p=Math.max(p,g),g=1,d=x.getRowNumber();else if(b<0||x.getRowNumber()>=t.getRowCount()||b>y)r[y]=null;else{var S=void 0;p>2?S=(p-2)*b:S=b;for(var E=S>=y,_=1;_<=S&&!E;_++)E=r[y-_]!=null;E?r[y]=null:(d=x.getRowNumber(),g=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=Ch(this.getCodewords()),c=s.next();!c.done;c=s.next()){var f=c.value;if(f!=null){var d=f.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.getCodewords(),d=-1,p=s;p<c;p++)if(f[p]!=null){var g=f[p];g.setRowNumberAsRowIndicatorColumn();var y=g.getRowNumber()-d;y===0||(y===1?d=g.getRowNumber():g.getRowNumber()>=t.getRowCount()?f[p]=null:d=g.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new ol,s=new ol,c=new ol,f=new ol;try{for(var d=Ch(i),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var y=g.getValue()%30,x=g.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:s.setValue(y*3+1);break;case 1:f.setValue(y/3),c.setValue(y%3);break;case 2:a.setValue(y+1);break}}}}catch(S){t={error:S}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||c.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+c.getValue()[0]<et.MIN_ROWS_IN_BARCODE||s.getValue()[0]+c.getValue()[0]>et.MAX_ROWS_IN_BARCODE)return null;var b=new c6(a.getValue()[0],s.getValue()[0],c.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,b),b},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,c=a.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(iw),p6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g6=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=et.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var c=this.detectionResultColumns[s].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var c=this.detectionResultColumns[s].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[t],c=this.detectionResultColumns[e-1].getCodewords(),f=c;this.detectionResultColumns[e+1]!=null&&(f=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=c[t],d[3]=f[t],t>0&&(d[0]=r[t-1],d[4]=c[t-1],d[5]=f[t-1]),t>1&&(d[8]=r[t-2],d[10]=c[t-2],d[11]=f[t-2]),t<r.length-1&&(d[1]=r[t+1],d[6]=c[t+1],d[7]=f[t+1]),t<r.length-2&&(d[9]=r[t+2],d[12]=c[t+2],d[13]=f[t+2]);try{for(var p=p6(d),g=p.next();!g.done;g=p.next()){var y=g.value;if(n.adjustRowNumber(s,y))return}}catch(x){i={error:x}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new e1,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n})(),v6=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),m6=(function(){function n(){}return n.initialize=function(){for(var e=0;e<et.SYMBOL_TABLE.length;e++)for(var t=et.SYMBOL_TABLE[e],r=t&1,i=0;i<et.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(et.BARS_IN_MODULE)),n.RATIOS_TABLE[e][et.BARS_IN_MODULE-i-1]=Math.fround(a/et.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=nt.sum(e),r=new Int32Array(et.BARS_IN_MODULE),i=0,a=0,s=0;s<et.MODULES_IN_CODEWORD;s++){var c=t/(2*et.MODULES_IN_CODEWORD)+s*t/et.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return et.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=nt.sum(e),r=new Array(et.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=f0.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var c=0;c<n.RATIOS_TABLE.length;c++){for(var f=0,d=n.RATIOS_TABLE[c],p=0;p<et.BARS_IN_MODULE;p++){var g=Math.fround(d[p]-r[p]);if(f+=Math.fround(g*g),f>=a)break}f<a&&(a=f,s=et.SYMBOL_TABLE[c])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(et.SYMBOL_TABLE.length).map(function(e){return new Array(et.BARS_IN_MODULE)}),n})(),y6=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),ky=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),x6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),w6=(function(n){x6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(qn),b6=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new w6;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new K0;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),_6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),S6=(function(n){_6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(qn),E6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),A6=(function(n){E6(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Ne("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new S6;i=Ge.MAX_VALUE}this.buf=sn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new K0;this.ensureCapacity(this.count+i),St.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return sn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(b6),yt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(yt||(yt={}));function aw(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var ru;function Gi(n){if(typeof ru>"u"&&(ru=aw()),ru===null)throw new Error("BigInt is not supported!");return ru(n)}function C6(){var n=[];n[0]=Gi(1);var e=Gi(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var T6=(function(){function n(){}return n.decode=function(e,t){var r=new ze(""),i=on.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],c=new y6;a<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:on.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,c);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new ge;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw ge.getFormatInstance()}if(r.length()===0)throw ge.getFormatInstance();var f=new zu(null,r.toString(),null,t);return f.setOther(c),f},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw ge.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(Ge.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new ze;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var c=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var f=new ze;t=n.textCompaction(e,t+1,f),r.setFileName(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new ze;t=n.textCompaction(e,t+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new ze;t=n.textCompaction(e,t+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new ze;t=n.numericCompaction(e,t+1,g),r.setSegmentCount(Ge.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var y=new ze;t=n.numericCompaction(e,t+1,y),r.setTimestamp(ky.parseLong(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var x=new ze;t=n.numericCompaction(e,t+1,x),r.setChecksum(Ge.parseInt(x.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var b=new ze;t=n.numericCompaction(e,t+1,b),r.setFileSize(ky.parseLong(b.toString()));break;default:throw ge.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw ge.getFormatInstance()}if(c!==-1){var S=t-c;r.isLastSegment()&&S--,r.setOptionalData(sn.copyOfRange(e,c,c+S))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,c=!1;t<e[0]&&!c;){var f=e[t++];if(f<n.TEXT_COMPACTION_MODE_LATCH)i[s]=f/30,i[s+1]=f%30,s+=2;else switch(f){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=e[t++],a[s]=f,s++;break}}return n.decodeTextCompaction(i,a,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=yt.ALPHA,s=yt.ALPHA,c=0;c<r;){var f=e[c],d="";switch(a){case yt.ALPHA:if(f<26)d=String.fromCharCode(65+f);else switch(f){case 26:d=" ";break;case n.LL:a=yt.LOWER;break;case n.ML:a=yt.MIXED;break;case n.PS:s=a,a=yt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break;case yt.LOWER:if(f<26)d=String.fromCharCode(97+f);else switch(f){case 26:d=" ";break;case n.AS:s=a,a=yt.ALPHA_SHIFT;break;case n.ML:a=yt.MIXED;break;case n.PS:s=a,a=yt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break;case yt.MIXED:if(f<n.PL)d=n.MIXED_CHARS[f];else switch(f){case n.PL:a=yt.PUNCT;break;case 26:d=" ";break;case n.LL:a=yt.LOWER;break;case n.AL:a=yt.ALPHA;break;case n.PS:s=a,a=yt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break;case yt.PUNCT:if(f<n.PAL)d=n.PUNCT_CHARS[f];else switch(f){case n.PAL:a=yt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break;case yt.ALPHA_SHIFT:if(a=s,f<26)d=String.fromCharCode(65+f);else switch(f){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break;case yt.PUNCT_SHIFT:if(a=s,f<n.PAL)d=n.PUNCT_CHARS[f];else switch(f){case n.PAL:a=yt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=yt.ALPHA;break}break}d!==""&&i.append(d),c++}},n.byteCompaction=function(e,t,r,i,a){var s=new A6,c=0,f=0,d=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),g=t[i++];i<t[0]&&!d;)switch(p[c++]=g,f=900*f+g,g=t[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(c%5===0&&c>0){for(var y=0;y<6;++y)s.write(Number(Gi(f)>>Gi(8*(5-y))));f=0,c=0}break}i===t[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(p[c++]=g);for(var x=0;x<c;x++)s.write(p[x]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!d;){var b=t[i++];if(b<n.TEXT_COMPACTION_MODE_LATCH)c++,f=900*f+b;else switch(b){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(c%5===0&&c>0){for(var y=0;y<6;++y)s.write(Number(Gi(f)>>Gi(8*(5-y))));f=0,c=0}}break}return a.append(mr.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var c=e[t++];if(t===e[0]&&(a=!0),c<n.TEXT_COMPACTION_MODE_LATCH)s[i]=c,i++;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||c===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Gi(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Gi(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new ge;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=aw()?C6():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),tl=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O6=(function(){function n(){}return n.decode=function(e,t,r,i,a,s,c){for(var f=new p0(e,t,r,i,a),d=null,p=null,g,y=!0;;y=!1){if(t!=null&&(d=n.getRowIndicatorColumn(e,f,t,!0,s,c)),i!=null&&(p=n.getRowIndicatorColumn(e,f,i,!1,s,c)),g=n.merge(d,p),g==null)throw ee.getNotFoundInstance();var x=g.getBoundingBox();if(y&&x!=null&&(x.getMinY()<f.getMinY()||x.getMaxY()>f.getMaxY()))f=x;else break}g.setBoundingBox(f);var b=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,d),g.setDetectionResultColumn(b,p);for(var S=d!=null,E=1;E<=b;E++){var _=S?E:b-E;if(g.getDetectionResultColumn(_)===void 0){var T=void 0;_===0||_===b?T=new Iy(f,_===0):T=new iw(f),g.setDetectionResultColumn(_,T);for(var C=-1,O=C,D=f.getMinY();D<=f.getMaxY();D++){if(C=n.getStartColumn(g,_,D,S),C<0||C>f.getMaxX()){if(O===-1)continue;C=O}var j=n.detectCodeword(e,f.getMinX(),f.getMaxX(),S,C,D,s,c);j!=null&&(T.setCodeword(D,j),O=C,s=Math.min(s,j.getWidth()),c=Math.max(c,j.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=p0.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new g6(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var c=tl(i),f=c.next();!f.done;f=c.next()){var d=f.value;if(s+=a-d,d>0)break}}catch(x){t={error:x}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),g=0;s>0&&p[g]==null;g++)s--;for(var y=0,g=i.length-1;g>=0&&(y+=a-i[g],!(i[g]>0));g--);for(var g=p.length-1;y>0&&p[g]==null;g--)y--;return e.getBoundingBox().addMissingRows(s,y,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=tl(e),s=a.next();!s.done;s=a.next()){var c=s.value;i=Math.max(i,c)}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,s){for(var c=new Iy(t,i),f=0;f<2;f++)for(var d=f===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=t.getMaxY()&&g>=t.getMinY();g+=d){var y=n.detectCodeword(e,0,e.getWidth(),i,p,g,a,s);y!=null&&(c.setCodeword(g,y),i?p=y.getStartX():p=y.getEndX())}return c},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>et.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,c=0;c<e.getBarcodeRowCount();c++)for(var f=0;f<e.getBarcodeColumnCount();f++){var d=t[c][f+1].getValue(),p=c*e.getBarcodeColumnCount()+f;d.length===0?r.push(p):d.length===1?i[p]=d[0]:(s.push(p),a.push(d))}for(var g=new Array(a.length),y=0;y<g.length;y++)g[y]=a[y];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,et.toIntArray(r),et.toIntArray(s),g)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var s=new Int32Array(i.length),c=100;c-- >0;){for(var f=0;f<s.length;f++)t[i[f]]=a[f][s[f]];try{return n.decodeCodewords(t,e,r)}catch(p){var d=p instanceof Kt;if(!d)throw p}if(s.length===0)throw Kt.getChecksumInstance();for(var f=0;f<s.length;f++)if(s[f]<a[f].length-1){s[f]++;break}else if(s[f]=0,f===s.length-1)throw Kt.getChecksumInstance()}throw Kt.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),c=0;c<s.length;c++)for(var f=0;f<s[c].length;f++)s[c][f]=new ol;var d=0;try{for(var p=tl(e.getDetectionResultColumns()),g=p.next();!g.done;g=p.next()){var y=g.value;if(y!=null)try{for(var x=(i=void 0,tl(y.getCodewords())),b=x.next();!b.done;b=x.next()){var S=b.value;if(S!=null){var E=S.getRowNumber();if(E>=0){if(E>=s.length)continue;s[E][d].setValue(S.getValue())}}}}catch(_){i={error:_}}finally{try{b&&!b.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}d++}}catch(_){t={error:_}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,s,c=i?1:-1,f=null;if(n.isValidBarcodeColumn(e,t-c)&&(f=e.getDetectionResultColumn(t-c).getCodeword(r)),f!=null)return i?f.getEndX():f.getStartX();if(f=e.getDetectionResultColumn(t).getCodewordNearby(r),f!=null)return i?f.getStartX():f.getEndX();if(n.isValidBarcodeColumn(e,t-c)&&(f=e.getDetectionResultColumn(t-c).getCodewordNearby(r)),f!=null)return i?f.getEndX():f.getStartX();for(var d=0;n.isValidBarcodeColumn(e,t-c);){t-=c;try{for(var p=(a=void 0,tl(e.getDetectionResultColumn(t).getCodewords())),g=p.next();!g.done;g=p.next()){var y=g.value;if(y!=null)return(i?y.getEndX():y.getStartX())+c*d*(y.getEndX()-y.getStartX())}}catch(x){a={error:x}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,s,c,f){a=n.adjustCodewordStartColumn(e,t,r,i,a,s);var d=n.getModuleBitCount(e,t,r,i,a,s);if(d==null)return null;var p,g=nt.sum(d);if(i)p=a+g;else{for(var y=0;y<d.length/2;y++){var x=d[y];d[y]=d[d.length-1-y],d[d.length-1-y]=x}p=a,a=p-g}if(!n.checkCodewordSkew(g,c,f))return null;var b=m6.getDecodedValue(d),S=et.getCodeword(b);return S===-1?null:new v6(a,p,n.getCodewordBucketNumber(b),S)},n.getModuleBitCount=function(e,t,r,i,a,s){for(var c=a,f=new Int32Array(8),d=0,p=i?1:-1,g=i;(i?c<r:c>=t)&&d<f.length;)e.get(c,s)===g?(f[d]++,c+=p):(d++,g=!g);return d===f.length||c===(i?r:t)&&d===f.length-1?f:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,s){for(var c=a,f=i?-1:1,d=0;d<2;d++){for(;(i?c>=t:c<r)&&i===e.get(c,s);){if(Math.abs(a-c)>n.CODEWORD_SKEW_SIZE)return a;c+=f}f=-f,i=!i}return c},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw ge.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=T6.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Kt.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw ge.getFormatInstance();var r=e[0];if(r>e.length)throw ge.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw ge.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new e1,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new l6,n})(),R6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ru=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ee.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof ge||r instanceof Kt?ee.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,s=new Array,c=n6.detectMultiple(e,t,r);try{for(var f=R6(c.getPoints()),d=f.next();!d.done;d=f.next()){var p=d.value,g=O6.decode(c.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),y=new Nn(g.getText(),g.getRawBytes(),void 0,p,De.PDF_417);y.putMetadata(En.ERROR_CORRECTION_LEVEL,g.getECLevel());var x=g.getOther();x!=null&&y.putMetadata(En.PDF417_EXTRA_METADATA,x),s.push(y)}}catch(b){i={error:b}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return s.map(function(b){return b})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Ge.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),D6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),My=(function(n){D6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(qn),jy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ow=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Et.TRY_HARDER)!==void 0,r=e==null?null:e.get(Et.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===De.UPC_A||s===De.UPC_E||s===De.EAN_13||s===De.EAN_8||s===De.CODABAR||s===De.CODE_39||s===De.CODE_93||s===De.CODE_128||s===De.ITF||s===De.RSS_14||s===De.RSS_EXPANDED});a&&!t&&i.push(new ko(e)),r.includes(De.QR_CODE)&&i.push(new Ou),r.includes(De.DATA_MATRIX)&&i.push(new Tu),r.includes(De.AZTEC)&&i.push(new Au),r.includes(De.PDF_417)&&i.push(new Ru),a&&t&&i.push(new ko(e))}i.length===0&&(t||i.push(new ko(e)),i.push(new Ou),i.push(new Tu),i.push(new Au),i.push(new Ru),t&&i.push(new ko(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=jy(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new My("No readers where selected, nothing can be read.");try{for(var i=jy(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(c){if(c instanceof My)continue}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ee("No MultiFormat Readers were able to detect the code.")},n})(),N6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){N6(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new ow;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(Yo);var I6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){I6(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Ru,t)||this}return e})(Yo);var k6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){k6(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Ou,t)||this}return e})(Yo);var g0;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(g0||(g0={}));const iu=g0;var sw=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new qi(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=r.multiply(new qi(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Ne("No error correction bytes");var r=e.length-t;if(r<=0)throw new Ne("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);St.arraycopy(e,0,a,0,r);var s=new qi(this.field,a);s=s.multiplyByMonomial(t,1);for(var c=s.divide(i)[1],f=c.getCoefficients(),d=t-f.length,p=0;p<d;p++)e[r+p]=0;St.arraycopy(f,0,e,r+d,f.length)},n})(),sl=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var c=r[s],f=0;f<i-1;f++){var d=c[f];d===c[f+1]&&d===r[s+1][f]&&d===r[s+1][f+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var c=0;c<i;c++){var f=r[s];c+6<i&&f[c]===1&&f[c+1]===0&&f[c+2]===1&&f[c+3]===1&&f[c+4]===1&&f[c+5]===0&&f[c+6]===1&&(n.isWhiteHorizontal(f,c-4,c)||n.isWhiteHorizontal(f,c+7,c+11))&&t++,s+6<a&&r[s][c]===1&&r[s+1][c]===0&&r[s+2][c]===1&&r[s+3][c]===1&&r[s+4][c]===1&&r[s+5][c]===0&&r[s+6][c]===1&&(n.isWhiteVertical(r,c,s-4,s)||n.isWhiteVertical(r,c,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var c=r[s],f=0;f<i;f++)c[f]===1&&t++;var d=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-d)*10/d);return p*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Ne("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),c=0;c<i;c++){for(var f=0,d=-1,p=0;p<a;p++){var g=t?s[c][p]:s[p][c];g===d?f++:(f>=5&&(r+=n.N1+(f-5)),f=1,d=g)}f>=5&&(r+=n.N1+(f-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),M6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j6=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=M6(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;sn.fill(s,e)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=t.bytes[r],c=0,f=this.width;c<f;++c)if(a[c]!==s[c])return!1;return!0},n.prototype.toString=function(){for(var e=new ze,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),v0=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new ze;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),P6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),At=(function(n){P6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(qn),Py=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new vn;n.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var c=i.get(i.getSize()-1-a),f=n.TYPE_INFO_COORDINATES[a],d=f[0],p=f[1];if(r.setBoolean(d,p,c),a<8){var g=r.getWidth()-a-1,y=8;r.setBoolean(g,y,c)}else{var g=8,y=r.getHeight()-7+(a-8);r.setBoolean(g,y,c)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new vn;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var c=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,c),t.setBoolean(t.getHeight()-11+s,a,c)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,s=r.getWidth()-1,c=r.getHeight()-1;s>0;){for(s===6&&(s-=1);c>=0&&c<r.getHeight();){for(var f=0;f<2;++f){var d=s-f;if(n.isEmpty(r.get(d,c))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&sl.getDataMaskBit(t,d,c)&&(p=!p),r.setBoolean(d,c,p)}}c+=a}a=-a,c+=a,s-=2}if(i!==e.getSize())throw new At("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Ge.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Ne("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!v0.isValidMaskPattern(t))throw new At("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new vn;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new At("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new At("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new At;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new At;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new At;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var c=i[a];if(c>=0)for(var f=0;f!==s;f++){var d=i[f];d>=0&&n.isEmpty(t.get(d,c))&&n.embedPositionAdjustmentPattern(d-2,c-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),B6=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),By=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return sl.applyMaskPenaltyRule1(e)+sl.applyMaskPenaltyRule2(e)+sl.applyMaskPenaltyRule3(e)+sl.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(iu.CHARACTER_SET)!==void 0;a&&(i=r.get(iu.CHARACTER_SET).toString());var s=this.chooseMode(e,i),c=new vn;if(s===Ct.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var f=on.getCharacterSetECIByName(i);f!==void 0&&this.appendECI(f,c)}this.appendModeInfo(s,c);var d=new vn;this.appendBytes(e,s,d,i);var p;if(r!==null&&r.get(iu.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(iu.QR_VERSION).toString(),10);p=Oa.getVersionForNumber(g);var y=this.calculateBitsNeeded(s,c,d,p);if(!this.willFit(y,p,t))throw new At("Data too big for requested version")}else p=this.recommendVersion(t,s,c,d);var x=new vn;x.appendBitArray(c);var b=s===Ct.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(b,p,s,x),x.appendBitArray(d);var S=p.getECBlocksForLevel(t),E=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(E,x);var _=this.interleaveWithECBytes(x,p.getTotalCodewords(),E,S.getNumBlocks()),T=new v0;T.setECLevel(t),T.setMode(s),T.setVersion(p);var C=p.getDimensionForVersion(),O=new j6(C,C),D=this.chooseMaskPattern(_,t,p,O);return T.setMaskPattern(D),Py.buildMatrix(_,t,p,D,O),T.setMatrix(O),T},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Oa.getVersionForNumber(1)),s=this.chooseVersion(a,e),c=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(c,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),on.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Ct.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var c=e.charAt(a);if(n.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return Ct.BYTE}return i?Ct.ALPHANUMERIC:r?Ct.NUMERIC:Ct.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=mr.encode(e,on.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,c=0;c<v0.NUM_MASK_PATTERNS;c++){Py.buildMatrix(e,t,r,c,i);var f=this.calculateMaskPenalty(i);f<a&&(a=f,s=c)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Oa.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new At("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),s=a.getTotalECCodewords(),c=i-s,f=(e+7)/8;return c>=f},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new At("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new At("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,s){if(i>=r)throw new At("Block ID too large");var c=e%r,f=r-c,d=Math.floor(e/r),p=d+1,g=Math.floor(t/r),y=g+1,x=d-g,b=p-y;if(x!==b)throw new At("EC bytes mismatch");if(r!==f+c)throw new At("RS blocks mismatch");if(e!==(g+x)*f+(y+b)*c)throw new At("Total bytes mismatch");i<f?(a[0]=g,s[0]=x):(a[0]=y,s[0]=b)},n.interleaveWithECBytes=function(e,t,r,i){var a,s,c,f;if(e.getSizeInBytes()!==r)throw new At("Number of bits and data bytes does not match");for(var d=0,p=0,g=0,y=new Array,x=0;x<i;++x){var b=new Int32Array(1),S=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,x,b,S);var E=b[0],_=new Uint8Array(E);e.toBytes(8*d,_,0,E);var T=n.generateECBytes(_,S[0]);y.push(new B6(_,T)),p=Math.max(p,E),g=Math.max(g,T.length),d+=b[0]}if(r!==d)throw new At("Data bytes does not match offset");for(var C=new vn,x=0;x<p;++x)try{for(var O=(a=void 0,By(y)),D=O.next();!D.done;D=O.next()){var j=D.value,_=j.getDataBytes();x<_.length&&C.appendBits(_[x],8)}}catch(ne){a={error:ne}}finally{try{D&&!D.done&&(s=O.return)&&s.call(O)}finally{if(a)throw a.error}}for(var x=0;x<g;++x)try{for(var L=(c=void 0,By(y)),H=L.next();!H.done;H=L.next()){var j=H.value,T=j.getErrorCorrectionBytes();x<T.length&&C.appendBits(T[x],8)}}catch(ne){c={error:ne}}finally{try{H&&!H.done&&(f=L.return)&&f.call(L)}finally{if(c)throw c.error}}if(t!==C.getSizeInBytes())throw new At("Interleaving error: "+t+" and "+C.getSizeInBytes()+" differ.");return C},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new sw(Gn.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new At(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Ct.NUMERIC:n.appendNumericBytes(e,r);break;case Ct.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Ct.BYTE:n.append8BitBytes(e,r,i);break;case Ct.KANJI:n.appendKanjiBytes(e,r);break;default:throw new At("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),c=n.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+c,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new At;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new At;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=mr.encode(e,r)}catch(f){throw new At(f)}for(var a=0,s=i.length;a!==s;a++){var c=i[a];t.appendBits(c,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=mr.encode(e,on.SJIS)}catch(g){throw new At(g)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,c=r[a+1]&255,f=s<<8&4294967295|c,d=-1;if(f>=33088&&f<=40956?d=f-33088:f>=57408&&f<=60351&&(d=f-49472),d===-1)throw new At("Invalid byte sequence");var p=(d>>8)*192+(d&255);t.appendBits(p,13)}},n.appendECI=function(e,t){t.appendBits(Ct.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=on.UTF8.getName(),n})();var L6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){L6(e,n);function e(t,r,i,a,s,c,f,d){var p=n.call(this,c,f)||this;if(p.yuvData=t,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=s,a+c>r||s+f>i)throw new Ne("Crop rectangle does not fit within image data.");return d&&p.reverseHorizontal(c,f),p}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ne("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return St.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return St.arraycopy(this.yuvData,s,a,0,i),a;for(var c=0;c<r;c++){var f=c*t;St.arraycopy(this.yuvData,s,a,f,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,c=0;c<r;c++){for(var f=c*t,d=0;d<t;d++){var p=a[s+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[f+d]=4278190080|p*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var c=s+t/2,f=s,d=s+t-1;f<c;f++,d--){var p=i[f];i[f]=i[d],i[d]=p}},e.prototype.invert=function(){return new Uu(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Dl);var F6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){F6(e,n);function e(t,r,i,a,s,c,f){var d=n.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=s,d.left=c,d.top=f,t.BYTES_PER_ELEMENT===4){for(var p=r*i,g=new Uint8ClampedArray(p),y=0;y<p;y++){var x=t[y],b=x>>16&255,S=x>>7&510,E=x&255;g[y]=(b+S+E)/4&255}d.luminances=g}else d.luminances=t;if(a===void 0&&(d.dataWidth=r),s===void 0&&(d.dataHeight=i),c===void 0&&(d.left=0),f===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new Ne("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ne("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return St.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return St.arraycopy(this.luminances,s,a,0,i),a;for(var c=0;c<r;c++){var f=c*t;St.arraycopy(this.luminances,s,a,f,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new Uu(this)},e})(Dl);var U6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),z6=(function(n){U6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(on),V6=(function(){function n(){}return n.ISO_8859_1=on.ISO8859_1,n})(),m0,H6=301,G6=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=H6);return{LOG:n,ALOG:e}};m0=G6([],[]),m0.LOG;m0.ALOG;var Ly;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Ly||(Ly={}));var Fy=129,lw=230,$6=231,q6=235,W6=236,X6=237,Y6=238,K6=239,Z6=240,Th=254,Q6=254,Uy="[)>05",zy="[)>06",Vy="",ht=0,_n=1,Pn=2,nn=3,gn=4,On=5,J6=(function(){function n(){}return n.prototype.getEncodingMode=function(){return ht},n.prototype.encode=function(e){var t=Or.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Or.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case On:e.writeCodeword($6),e.signalEncoderChange(On);return;case _n:e.writeCodeword(lw),e.signalEncoderChange(_n);return;case nn:e.writeCodeword(Y6),e.signalEncoderChange(nn);break;case Pn:e.writeCodeword(K6),e.signalEncoderChange(Pn);break;case gn:e.writeCodeword(Z6),e.signalEncoderChange(gn);break;default:throw new Error("Illegal mode: "+i)}else Or.isExtendedASCII(r)?(e.writeCodeword(q6),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Or.isDigit(e)&&Or.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),eT=(function(){function n(){}return n.prototype.getEncodingMode=function(){return On},n.prototype.encode=function(e){var t=new ze;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Or.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(ht);break}}var a=t.length()-1,s=1,c=e.getCodewordCount()+a+s;e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c>0;if(e.hasMoreCharacters()||f)if(a<=249)t.setCharAt(0,Ze.getCharAt(a));else if(a<=1555)t.setCharAt(0,Ze.getCharAt(Math.floor(a/250)+249)),t.insert(1,Ze.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=t.length();d<r;d++)e.writeCodeword(this.randomize255State(t.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),t1=(function(){function n(){}return n.prototype.getEncodingMode=function(){return _n},n.prototype.encodeMaximal=function(e){for(var t=new ze,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var c=Math.floor(t.length()/3*2),f=Math.floor(e.getCodewordCount()+c+1);e.updateSymbolInfo(f);var d=e.getSymbolInfo().getDataCapacity()-f,p=Math.floor(t.length()%3);(p===2&&d!==2||p===1&&(r>3||d!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(lw),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new ze;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var f=new ze;for(t.length()%3===2&&c!==2&&(i=this.backtrackOneCharacter(e,t,f,i));t.length()%3===1&&(i>3||c!==1);)i=this.backtrackOneCharacter(e,t,f,i);break}var d=t.length();if(d%3===0){var p=Or.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(ht);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var c=e.getCurrentChar();return i=this.encodeChar(c,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Th)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Th),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(Th)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(ht)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new ze;return a.append(r),a.append(i),a.toString()},n})(),tT=(function(){function n(){}return n.prototype.getEncodingMode=function(){return gn},n.prototype.encode=function(e){for(var t=new ze;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=Or.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(ht);break}}}t.append(Ze.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,c=this.encodeToCodewords(t.toString()),f=!e.hasMoreCharacters(),d=f&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+c.length))}d?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(c)}finally{e.signalEncoderChange(ht)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Ze.getCharAt(e-64)):Or.illegalCharacter(Ze.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,c=(r<<18)+(i<<12)+(a<<6)+s,f=c>>16&255,d=c>>8&255,p=c&255,g=new ze;return g.append(f),t>=2&&g.append(d),t>=3&&g.append(p),g.toString()},n})(),nT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),rT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},st=(function(){function n(e,t,r,i,a,s,c,f){c===void 0&&(c=0),f===void 0&&(f=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=c,this.rsBlockError=f}return n.lookup=function(e,t,r,i,a){var s,c;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var f=rT(aT),d=f.next();!d.done;d=f.next()){var p=d.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(g){s={error:g}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),iT=(function(n){nT(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(st),aT=[new st(!1,3,5,8,8,1),new st(!1,5,7,10,10,1),new st(!0,5,7,16,6,1),new st(!1,8,10,12,12,1),new st(!0,10,11,14,6,2),new st(!1,12,12,14,14,1),new st(!0,16,14,24,10,1),new st(!1,18,14,16,16,1),new st(!1,22,18,18,18,1),new st(!0,22,18,16,10,2),new st(!1,30,20,20,20,1),new st(!0,32,24,16,14,2),new st(!1,36,24,22,22,1),new st(!1,44,28,24,24,1),new st(!0,49,28,22,14,2),new st(!1,62,36,14,14,4),new st(!1,86,42,16,16,4),new st(!1,114,48,18,18,4),new st(!1,144,56,20,20,4),new st(!1,174,68,22,22,4),new st(!1,204,84,24,24,4,102,42),new st(!1,280,112,14,14,16,140,56),new st(!1,368,144,16,16,16,92,36),new st(!1,456,192,18,18,16,114,48),new st(!1,576,224,20,20,16,144,56),new st(!1,696,272,22,22,16,174,68),new st(!1,816,336,24,24,16,136,56),new st(!1,1050,408,18,18,36,175,68),new st(!1,1304,496,20,20,36,163,62),new iT],oT=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(c){return c.charCodeAt(0)}),r=new ze,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new ze,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=st.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),sT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),lT=(function(n){sT(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return nn},e.prototype.encode=function(t){for(var r=new ze;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var s=Or.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(ht);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Or.illegalCharacter(Ze.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(Q6),t.getNewEncoding()<0&&t.signalEncoderChange(ht)},e})(t1),cT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),uT=(function(n){cT(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Pn},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(t1),Or=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=Fy+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new t1,c=[new J6,s,new uT,new lT,new tT,new eT],f=new oT(e);f.setSymbolShape(t),f.setSizeConstraints(r,i),e.startsWith(Uy)&&e.endsWith(Vy)?(f.writeCodeword(W6),f.setSkipAtEnd(2),f.pos+=Uy.length):e.startsWith(zy)&&e.endsWith(Vy)&&(f.writeCodeword(X6),f.setSkipAtEnd(2),f.pos+=zy.length);var d=ht;for(a&&(s.encodeMaximal(f),d=f.getNewEncoding(),f.resetEncoderSignal());f.hasMoreCharacters();)c[d].encode(f),f.getNewEncoding()>=0&&(d=f.getNewEncoding(),f.resetEncoderSignal());var p=f.getCodewordCount();f.updateSymbolInfo();var g=f.getSymbolInfo().getDataCapacity();p<g&&d!==ht&&d!==On&&d!==gn&&f.writeCodeword("þ");var y=f.getCodewords();for(y.length()<g&&y.append(Fy);y.length()<g;)y.append(this.randomize253State(y.length()+1));return f.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===nn&&i===nn){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return ht}else if(r===gn&&i===gn){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return ht}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===ht?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),c=[];;){if(t+a===e.length){sn.fill(s,0),sn.fill(c,0);var f=this.findMinimums(i,c,Ge.MAX_VALUE,s),d=this.getMinimumCount(s);if(c[ht]===f)return ht;if(d===1){if(s[On]>0)return On;if(s[gn]>0)return gn;if(s[Pn]>0)return Pn;if(s[nn]>0)return nn}return _n}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[ht]+=.5:this.isExtendedASCII(p)?(i[ht]=Math.ceil(i[ht]),i[ht]+=2):(i[ht]=Math.ceil(i[ht]),i[ht]++),this.isNativeC40(p)?i[_n]+=2/3:this.isExtendedASCII(p)?i[_n]+=8/3:i[_n]+=4/3,this.isNativeText(p)?i[Pn]+=2/3:this.isExtendedASCII(p)?i[Pn]+=8/3:i[Pn]+=4/3,this.isNativeX12(p)?i[nn]+=2/3:this.isExtendedASCII(p)?i[nn]+=13/3:i[nn]+=10/3,this.isNativeEDIFACT(p)?i[gn]+=3/4:this.isExtendedASCII(p)?i[gn]+=17/4:i[gn]+=13/4,this.isSpecialB256(p)?i[On]+=4:i[On]++,a>=4){if(sn.fill(s,0),sn.fill(c,0),this.findMinimums(i,c,Ge.MAX_VALUE,s),c[ht]<this.min(c[On],c[_n],c[Pn],c[nn],c[gn]))return ht;if(c[On]<c[ht]||c[On]+1<this.min(c[_n],c[Pn],c[nn],c[gn]))return On;if(c[gn]+1<this.min(c[On],c[_n],c[Pn],c[nn],c[ht]))return gn;if(c[Pn]+1<this.min(c[On],c[_n],c[gn],c[nn],c[ht]))return Pn;if(c[nn]+1<this.min(c[On],c[_n],c[gn],c[Pn],c[ht]))return nn;if(c[_n]+1<this.min(c[ht],c[On],c[gn],c[Pn])){if(c[_n]<c[nn])return _n;if(c[_n]===c[nn]){for(var g=t+a+1;g<e.length;){var y=e.charCodeAt(g);if(this.isX12TermSep(y))return nn;if(!this.isNativeX12(y))break;g++}return _n}}}}},n.min=function(e,t,r,i,a){var s=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);r>s&&(r=s,sn.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Ge.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),Oh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hy=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return mr.encode(e,this.charset)!=null}catch{return!1}},n})(),fT=(function(){function n(e,t,r){var i,a,s,c,f,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function($){return new Hy(z6.forName($))}),this.encoders=[];var p=[];p.push(new Hy(V6.ISO_8859_1));for(var g=t!=null&&t.name.startsWith("UTF"),y=0;y<e.length;y++){var x=!1;try{for(var b=(i=void 0,Oh(p)),S=b.next();!S.done;S=b.next()){var E=S.value,_=e.charAt(y),T=_.charCodeAt(0);if(T===r||E.canEncode(_)){x=!0;break}}}catch($){i={error:$}}finally{try{S&&!S.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}if(!x)try{for(var C=(s=void 0,Oh(this.ENCODERS)),O=C.next();!O.done;O=C.next()){var E=O.value;if(E.canEncode(e.charAt(y))){p.push(E),x=!0;break}}}catch($){s={error:$}}finally{try{O&&!O.done&&(c=C.return)&&c.call(C)}finally{if(s)throw s.error}}x||(g=!0)}if(p.length===1&&!g)this.encoders=[p[0]];else{this.encoders=[];var D=0;try{for(var j=Oh(p),L=j.next();!L.done;L=j.next()){var E=L.value;this.encoders[D++]=E}}catch($){f={error:$}}finally{try{L&&!L.done&&(d=j.return)&&d.call(j)}finally{if(f)throw f.error}}}var H=-1;if(t!=null){for(var y=0;y<this.encoders.length;y++)if(this.encoders[y]!=null&&t.name===this.encoders[y].name){H=y;break}}this.priorityEncoderIndex=H}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return mr.encode(Ze.getCharAt(e),this.encoders[t].name)},n})(),dT=3,hT=(function(){function n(e,t,r){this.fnc1=r;var i=new fT(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new ze,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,s){var c=e.charAt(i).charCodeAt(0),f=0,d=t.length();t.getPriorityEncoderIndex()>=0&&(c===s||t.canEncode(c,t.getPriorityEncoderIndex()))&&(f=t.getPriorityEncoderIndex(),d=f+1);for(var p=f;p<d;p++)(c===s||t.canEncode(c,p))&&this.addEdge(r,i+1,new Gy(c,t,p,a,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new Gy[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var s=1;s<=i;s++){for(var c=0;c<t.length();c++)a[s][c]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][c],r);for(var c=0;c<t.length();c++)a[s-1][c]=null}for(var f=-1,d=Ge.MAX_VALUE,c=0;c<t.length();c++)if(a[i][c]!=null){var p=a[i][c];p.cachedTotalSize<d&&(d=p.cachedTotalSize,f=c)}if(f<0)throw new Error('Failed to encode "'+e+'"');for(var g=[],y=a[i][f];y!=null;){if(y.isFNC1())g.unshift(1e3);else for(var x=t.encode(y.c,y.encoderIndex),s=x.length-1;s>=0;s--)g.unshift(x[s]&255);var b=y.previous===null?0:y.previous.encoderIndex;b!==y.encoderIndex&&g.unshift(256+t.getECIValue(y.encoderIndex)),y=y.previous}for(var S=[],s=0;s<S.length;s++)S[s]=g[s];return S},n})(),Gy=(function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,c=i===null?0:i.encoderIndex;c!==r&&(s+=dT),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),pT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var $y;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})($y||($y={}));(function(n){pT(e,n);function e(t,r,i,a,s){var c=n.call(this,t,r,i)||this;return c.shape=a,c.macroId=s,c}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(hT);var gT=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),qy=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),vT=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),mT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),n1=(function(n){mT(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Ge.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(vT),yT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xT=(function(n){yT(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(n1);function wT(n,e,t){return new xT(n,e,t)}function nl(n,e,t){return new n1(n,e,t)}var bT=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Wi=0,Du=1,gr=2,cw=3,Ur=4,_T=new n1(null,0,0),Rh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],ST=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function ET(n){var e,t;try{for(var r=ST(n),i=r.next();!i.done;i=r.next()){var a=i.value;sn.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Wi][Ur]=0,n[Du][Ur]=0,n[Du][Wi]=28,n[cw][Ur]=0,n[gr][Ur]=0,n[gr][Wi]=15,n}var uw=ET(sn.createInt32Array(6,6)),AT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CT=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Rh[this.mode][e];i=nl(i,a&65535,a>>16),r+=a>>16}var s=e===gr?4:5;return i=nl(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===gr?4:5;return r=nl(r,uw[this.mode][e],i),r=nl(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Ur||this.mode===gr){var a=Rh[r][Wi];t=nl(t,a&65535,a>>16),i+=a>>16,r=Wi}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new n(t,r,this.binaryShiftByteCount+1,i+s);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=wT(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Rh[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new vn;try{for(var c=AT(i),f=c.next();!f.done;f=c.next()){var d=f.value;d.appendTo(s,e)}}catch(p){t={error:p}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return Ze.format("%s bits=%d bytes=%d",bT[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(_T,Wi,0,0),n})();function TT(n){var e=Ze.getCharCode(" "),t=Ze.getCharCode("."),r=Ze.getCharCode(",");n[Wi][e]=1;for(var i=Ze.getCharCode("Z"),a=Ze.getCharCode("A"),s=a;s<=i;s++)n[Wi][s]=s-a+2;n[Du][e]=1;for(var c=Ze.getCharCode("z"),f=Ze.getCharCode("a"),s=f;s<=c;s++)n[Du][s]=s-f+2;n[gr][e]=1;for(var d=Ze.getCharCode("9"),p=Ze.getCharCode("0"),s=p;s<=d;s++)n[gr][s]=s-p+2;n[gr][r]=12,n[gr][t]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],y=0;y<g.length;y++)n[cw][Ze.getCharCode(g[y])]=y;for(var x=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],y=0;y<x.length;y++)Ze.getCharCode(x[y])>0&&(n[Ur][Ze.getCharCode(x[y])]=y);return n}var Dh=TT(sn.createInt32Array(5,256)),au=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OT=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=Ze.getCharCode(" "),t=Ze.getCharCode(`
`),r=qy.singletonList(CT.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Ze.getCharCode("\r"):a=s===t?2:0;break;case Ze.getCharCode("."):a=s===e?3:0;break;case Ze.getCharCode(","):a=s===e?4:0;break;case Ze.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var c=qy.min(r,function(f,d){return f.getBitCount()-d.getBitCount()});return c.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var s=au(e),c=s.next();!c.done;c=s.next()){var f=c.value;this.updateStateForChar(f,t,a)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Dh[e.getMode()][i]>0,s=null,c=0;c<=Ur;c++){var f=Dh[c][i];if(f>0){if(s==null&&(s=e.endBinaryShift(t)),!a||c===e.getMode()||c===gr){var d=s.latchAndAppend(c,f);r.push(d)}if(!a&&uw[e.getMode()][c]>=0){var p=s.shiftAndAppend(c,f);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||Dh[e.getMode()][i]===0){var g=e.addBinaryShiftChar(t);r.push(g)}},n.updateStateListForPair=function(e,t,r){var i,a,s=[];try{for(var c=au(e),f=c.next();!f.done;f=c.next()){var d=f.value;this.updateStateForPair(d,t,r,s)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Ur,r)),e.getMode()!==Ur&&i.push(a.shiftAndAppend(Ur,r)),r===3||r===4){var s=a.latchAndAppend(gr,16-r).latchAndAppend(gr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var c=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(c)}},n.simplifyStates=function(e){var t,r,i,a,s=[];try{for(var c=au(e),f=c.next();!f.done;f=c.next()){var d=f.value,p=!0,g=function(E){if(E.isBetterThanOrEqualTo(d))return p=!1,"break";d.isBetterThanOrEqualTo(E)&&(s=s.filter(function(_){return _!==E}))};try{for(var y=(i=void 0,au(s)),x=y.next();!x.done;x=y.next()){var b=x.value,S=g(b);if(S==="break")break}}catch(E){i={error:E}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}p&&s.push(d)}}catch(E){t={error:E}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return s},n})(),RT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new OT(e).encode(),a=Ge.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,c,f,d,p,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(c=r<0,f=Math.abs(r),f>(c?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Ne(Ze.format("Illegal value %s for layers",r));d=n.totalBitsInLayer(f,c),p=n.WORD_SIZE[f];var y=d-d%p;if(g=n.stuffBits(i,p),g.getSize()+a>y)throw new Ne("Data to large for user specified layer");if(c&&g.getSize()>p*64)throw new Ne("Data to large for user specified layer")}else{p=0,g=null;for(var x=0;;x++){if(x>n.MAX_NB_BITS)throw new Ne("Data too large for an Aztec code");if(c=x<=3,f=c?x+1:x,d=n.totalBitsInLayer(f,c),!(s>d)){(g==null||p!==n.WORD_SIZE[f])&&(p=n.WORD_SIZE[f],g=n.stuffBits(i,p));var y=d-d%p;if(!(c&&g.getSize()>p*64)&&g.getSize()+a<=y)break}}}var b=n.generateCheckWords(g,d,p),S=g.getSize()/p,E=n.generateModeMessage(c,f,S),_=(c?11:14)+f*4,T=new Int32Array(_),C;if(c){C=_;for(var x=0;x<T.length;x++)T[x]=x}else{C=_+1+2*Ge.truncDivision(Ge.truncDivision(_,2)-1,15);for(var O=Ge.truncDivision(_,2),D=Ge.truncDivision(C,2),x=0;x<O;x++){var j=x+Ge.truncDivision(x,15);T[O-x-1]=D-j-1,T[O+x]=D+j+1}}for(var L=new Gr(C),x=0,H=0;x<f;x++){for(var $=(f-x)*4+(c?9:12),ne=0;ne<$;ne++)for(var se=ne*2,le=0;le<2;le++)b.get(H+se+le)&&L.set(T[x*2+le],T[x*2+ne]),b.get(H+$*2+se+le)&&L.set(T[x*2+ne],T[_-1-x*2-le]),b.get(H+$*4+se+le)&&L.set(T[_-1-x*2-le],T[_-1-x*2-ne]),b.get(H+$*6+se+le)&&L.set(T[_-1-x*2-ne],T[x*2+le]);H+=$*8}if(n.drawModeMessage(L,c,C,E),c)n.drawBullsEye(L,Ge.truncDivision(C,2),5);else{n.drawBullsEye(L,Ge.truncDivision(C,2),7);for(var x=0,ne=0;x<Ge.truncDivision(_,2)-1;x+=15,ne+=16)for(var le=Ge.truncDivision(C,2)&1;le<C;le+=2)L.set(Ge.truncDivision(C,2)-ne,le),L.set(Ge.truncDivision(C,2)+ne,le),L.set(le,Ge.truncDivision(C,2)-ne),L.set(le,Ge.truncDivision(C,2)+ne)}var ue=new gT;return ue.setCompact(c),ue.setSize(C),ue.setLayers(f),ue.setCodeWords(S),ue.setMatrix(L),ue},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new vn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=Ge.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var c=a-3+s;i.get(s)&&e.set(c,a-5),i.get(s+7)&&e.set(a+5,c),i.get(20-s)&&e.set(c,a+5),i.get(27-s)&&e.set(a-5,c)}else for(var s=0;s<10;s++){var c=a-5+s+Ge.truncDivision(s,5);i.get(s)&&e.set(c,a-7),i.get(s+10)&&e.set(a+7,c),i.get(29-s)&&e.set(c,a+7),i.get(39-s)&&e.set(a-7,c)}},n.generateCheckWords=function(e,t,r){var i,a,s=e.getSize()/r,c=new sw(n.getGF(r)),f=Ge.truncDivision(t,r),d=n.bitsToWords(e,r,f);c.encode(d,f-s);var p=t%r,g=new vn;g.appendBits(0,p);try{for(var y=RT(Array.from(d)),x=y.next();!x.done;x=y.next()){var b=x.value;g.appendBits(b,r)}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var c=0,f=0;f<t;f++)c|=e.get(a*t+f)?1<<t-f-1:0;i[a]=c}return i},n.getGF=function(e){switch(e){case 4:return Gn.AZTEC_PARAM;case 6:return Gn.AZTEC_DATA_6;case 8:return Gn.AZTEC_DATA_8;case 10:return Gn.AZTEC_DATA_10;case 12:return Gn.AZTEC_DATA_12;default:throw new Ne("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new vn,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var c=0,f=0;f<t;f++)(s+f>=i||e.get(s+f))&&(c|=1<<t-1-f);(c&a)===a?(r.appendBits(c&a,t),s--):(c&a)===0?(r.appendBits(c|1,t),s--):r.appendBits(c,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var DT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),NT=(function(n){DT(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),s=0,c=0,f=t.length;s<f;s+=4,c++){var d=void 0,p=t[s+3];if(p===0)d=255;else{var g=t[s],y=t[s+1],x=t[s+2];d=306*g+601*y+117*x+512>>10}a[c]=d}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ne("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Uu(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*s),f=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*s);r.width=c,r.height=f;var d=r.getContext("2d");if(!d)throw new Error("Could not create a Canvas Context element.");return d.translate(c/2,f/2),d.rotate(i),d.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(Dl);function fw(){return typeof navigator<"u"}function IT(){return fw()&&!!navigator.mediaDevices}function kT(){return!!(IT()&&navigator.mediaDevices.enumerateDevices)}var jo=function(){return jo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},jo.apply(this,arguments)},It=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})},kt=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(d){return function(p){return f([d,p])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Nh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MT={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Ko=(function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=jo(jo({},MT),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(Et.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return It(this,void 0,void 0,function(){return kt(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=Nh(i),s=a.next();!s.done;s=a.next()){var c=s.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Gt("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Gt("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new NT(e),r=new Y2(t);return new X2(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new Gt("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return It(this,void 0,void 0,function(){var t;return kt(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return It(this,void 0,void 0,function(){var e,t,r,i,a,s,c,f,d,p,g,y;return kt(this,function(x){switch(x.label){case 0:if(!fw())throw new Error("Can't enumerate devices, navigator is not present.");if(!kT())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=x.sent(),t=[];try{for(r=Nh(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(c=a.deviceId||a.id,f=a.label||"Video device ".concat(t.length+1),d=a.groupId,p={deviceId:c,label:f,kind:s,groupId:d},t.push(p))}catch(b){g={error:b}}finally{try{i&&!i.done&&(y=r.return)&&y.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.findDeviceById=function(e){return It(this,void 0,void 0,function(){var t;return kt(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return It(this,void 0,void 0,function(){var r;return kt(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,s){var c=setTimeout(function(){n.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",f))},t),f=function(){n.tryPlayVideo(e).then(function(d){clearTimeout(c),e.removeEventListener("canplay",f),a(d)})};e.addEventListener("canplay",f)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),It(this,void 0,void 0,function(){var i;return kt(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",s),r())},i),s=function(){clearTimeout(a),e.removeEventListener("load",s),t()};e.addEventListener("load",s)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new Gt("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return It(this,void 0,void 0,function(){var t;return kt(this,function(r){switch(r.label){case 0:if(!e)throw new Gt("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return It(this,void 0,void 0,function(){var t;return kt(this,function(r){switch(r.label){case 0:if(!e)throw new Gt("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return It(this,void 0,void 0,function(){var i,a;return kt(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,s.sent()];case 4:throw a=s.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return It(this,void 0,void 0,function(){var i,a,s,c,f,d,p,g,y,x=this;return kt(this,function(b){switch(b.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=b.sent(),s=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},c=this.scan(a,r,s),f=e.getVideoTracks(),d=jo(jo({},c),{stop:function(){c.stop()},streamVideoConstraintsApply:function(S,E){return It(this,void 0,void 0,function(){var _,T,C,O,D,j,L;return kt(this,function(H){switch(H.label){case 0:_=E?f.filter(E):f,H.label=1;case 1:H.trys.push([1,6,7,8]),T=Nh(_),C=T.next(),H.label=2;case 2:return C.done?[3,5]:(O=C.value,[4,O.applyConstraints(S)]);case 3:H.sent(),H.label=4;case 4:return C=T.next(),[3,2];case 5:return[3,8];case 6:return D=H.sent(),j={error:D},[3,8];case 7:try{C&&!C.done&&(L=T.return)&&L.call(T)}finally{if(j)throw j.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(S){return f.find(S).getConstraints()},streamVideoSettingsGet:function(S){return f.find(S).getSettings()},streamVideoCapabilitiesGet:function(S){return f.find(S).getCapabilities()}}),p=n.mediaStreamIsTorchCompatible(e),p&&(g=f?.find(function(S){return n.mediaStreamIsTorchCompatibleTrack(S)}),y=function(S){return It(x,void 0,void 0,function(){return kt(this,function(E){switch(E.label){case 0:return[4,n.mediaStreamSetTorch(g,S)];case 1:return E.sent(),[2]}})})},d.switchTorch=y,d.stop=function(){return It(x,void 0,void 0,function(){return kt(this,function(S){switch(S.label){case 0:return c.stop(),[4,y(!1)];case 1:return S.sent(),[2]}})})}),[2,d]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return It(this,void 0,void 0,function(){var i,a;return kt(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return It(this,void 0,void 0,function(){var r,i;return kt(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new Gt("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return It(this,void 0,void 0,function(){var r,i,a,s;return kt(this,function(c){switch(c.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new Gt("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return c.sent(),s=this.scan(r,t,i),[2,s]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return It(this,void 0,void 0,function(){var r;return kt(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return It(this,void 0,void 0,function(){var r,i,a;return kt(this,function(s){switch(s.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=s.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return It(this,void 0,void 0,function(){var r,i;return kt(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return It(this,void 0,void 0,function(){var t,r;return kt(this,function(i){switch(i.label){case 0:if(!e)throw new Gt("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return It(this,void 0,void 0,function(){var t,r;return kt(this,function(i){switch(i.label){case 0:if(!e)throw new Gt("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(s,c){a.scan(e,function(f,d,p){if(f){s(f),p.stop();return}if(d){if(d instanceof ee&&t||d instanceof Kt&&r||d instanceof ge&&i)return;p.stop(),c(d)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),s;try{s=a.getContext("2d",{willReadFrequently:!0})}catch{s=a.getContext("2d")}if(!s)throw new Error("Couldn't create canvas for visual element scan.");var c=function(){s=void 0,a=void 0},f=!1,d,p=function(){f=!0,clearTimeout(d),c(),r&&r()},g={stop:p},y=function(){if(!f)try{n.drawImageOnCanvas(s,e);var x=i.decodeFromCanvas(a);t(x,void 0,g),d=setTimeout(y,i.options.delayBetweenScanSuccess)}catch(_){t(void 0,_,g);var b=_ instanceof Kt,S=_ instanceof ge,E=_ instanceof ee;if(b||S||E){d=setTimeout(y,i.options.delayBetweenScanAttempts);return}c(),r&&r(_)}};return y(),g},n.prototype._decodeOnLoadImage=function(e){return It(this,void 0,void 0,function(){var t;return kt(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return It(this,void 0,void 0,function(){var t;return kt(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n})(),jT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){jT(e,n);function e(t,r){return n.call(this,new Au,t,r)||this}return e})(Ko);var PT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){PT(e,n);function e(t,r){return n.call(this,new ko(t),t,r)||this}return e})(Ko);var BT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){BT(e,n);function e(t,r){return n.call(this,new Tu,t,r)||this}return e})(Ko);var LT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){LT(e,n);function e(t,r){var i=this,a=new ow;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Et.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(Ko);var FT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){FT(e,n);function e(t,r){return n.call(this,new Ru,t,r)||this}return e})(Ko);var UT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dw=(function(n){UT(e,n);function e(t,r){return n.call(this,new Ou,t,r)||this}return e})(Ko);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),VT=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Wy=n=>{const e=VT(n);return e.charAt(0).toUpperCase()+e.slice(1)},hw=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),HT=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=R.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...c},f)=>R.createElement("svg",{ref:f,...GT,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:hw("lucide",i),...!a&&!HT(c)&&{"aria-hidden":"true"},...c},[...s.map(([d,p])=>R.createElement(d,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=(n,e)=>{const t=R.forwardRef(({className:r,...i},a)=>R.createElement($T,{ref:a,iconNode:e,className:hw(`lucide-${zT(Wy(n))}`,`lucide-${n}`,r),...i}));return t.displayName=Wy(n),t};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],mu=Qe("bell",qT);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M14.564 14.558a3 3 0 1 1-4.122-4.121",key:"1rnrzw"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M20 20H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 .819-.175",key:"1x3arw"}],["path",{d:"M9.695 4.024A2 2 0 0 1 10.004 4h3.993a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v7.344",key:"1i84u0"}]],Xy=Qe("camera-off",WT);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Yy=Qe("camera",XT);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vr=Qe("circle-alert",YT);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Go=Qe("circle-check-big",KT);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v.832",key:"1ujtp2"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h2",key:"qvpao1"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],QT=Qe("clipboard-clock",ZT);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],eO=Qe("clipboard-list",JT);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],nO=Qe("clock-4",tO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M12 6v6l1.56.78",key:"14ed3g"}],["path",{d:"M13.227 21.925a10 10 0 1 1 8.767-9.588",key:"jwkls1"}],["path",{d:"m14 18 4-4 4 4",key:"ftkppy"}],["path",{d:"M18 22v-8",key:"su0gjh"}]],iO=Qe("clock-arrow-up",rO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],oO=Qe("clock",aO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],lO=Qe("graduation-cap",sO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]],uO=Qe("hand-coins",cO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],pw=Qe("image",fO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],gw=Qe("list",dO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Xi=Qe("loader",hO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M5 12h14",key:"1ays0h"}]],gO=Qe("minus",pO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],mO=Qe("moon",vO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],xO=Qe("package",yO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bO=Qe("plus",wO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],SO=Qe("refresh-cw",_O);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ou=Qe("rotate-ccw",EO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],CO=Qe("save",AO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],su=Qe("shopping-cart",TO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],RO=Qe("sun",OO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vw=Qe("trash-2",DO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],IO=Qe("undo-2",NO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],MO=Qe("upload",kO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],PO=Qe("user-check",jO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],mw=Qe("utensils-crossed",BO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],FO=Qe("utensils",LO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],zO=Qe("volume-2",UO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],HO=Qe("volume-x",VO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mn=Qe("x",GO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],qO=Qe("zap",$O),yw=R.createContext(),xw=()=>{const n=R.useContext(yw);if(!n)throw new Error("useCanteenStatus must be used within a CanteenStatusProvider");return n},WO=({children:n})=>{const[e,t]=R.useState("closed"),[r,i]=R.useState(!0),[a,s]=R.useState(!1),[c,f]=R.useState(null);R.useEffect(()=>{d()},[]);const d=async(E=!1)=>{if(!E&&c&&Date.now()-c<2e3){console.log("⏭️ Skipping fetch - recent update detected");return}console.log("🔍 Fetching canteen status from database...");try{const{data:_,error:T}=await me.from("canteen_status").select("is_open, updated_at").eq("id",1).single();if(T)throw console.error("❌ Error fetching canteen status:",T),T;const C=_?.is_open?"open":"closed";console.log("📊 Fetched status from database:",C),console.log("📊 Raw data:",_),console.log("📊 is_open value:",_?.is_open,"type:",typeof _?.is_open),t(C)}catch(_){console.error("❌ Error fetching canteen status:",_),t("closed")}finally{i(!1)}},p=async E=>{console.log("🔄 updateStatus called! New status:",E),s(!0);const _=e;console.log("📝 Setting optimistic status to:",E),t(E),f(Date.now());try{console.log(`💾 Updating database: is_open = ${E==="open"}`),console.log("🔍 Checking current database state...");const{data:T,error:C}=await me.from("canteen_status").select("*").eq("id",1).single();if(C)throw console.error("❌ Error fetching current data:",C),new Error(`Cannot fetch current data: ${C.message}`);console.log("📊 Current database data:",T),console.log(`🔄 Attempting to update is_open to: ${E==="open"}`);const{data:O,error:D}=await me.from("canteen_status").update({is_open:E==="open",updated_at:new Date().toISOString()}).eq("id",1).select();if(D)throw console.error("❌ Database update error:",D),console.error("❌ Full error details:",JSON.stringify(D,null,2)),D;console.log("✅ Database update response:",O),console.log("✅ Database update response length:",O?.length),O&&O.length>0?(console.log("✅ Updated row data:",O[0]),console.log("✅ Updated is_open value:",O[0].is_open)):console.warn("⚠️ Update response is empty - this might indicate the update failed"),console.log(`✅ Database updated successfully! is_open = ${E==="open"}`);const{data:j,error:L}=await me.from("canteen_status").select("is_open").eq("id",1).single();L?console.warn("Could not verify database update:",L):console.log(`🔍 Database verification: is_open = ${j.is_open}`),console.log("✅ Update completed successfully - UI should reflect the change")}catch(T){throw console.error("❌ Error updating canteen status:",T),console.log("🔄 Reverting to previous status:",_),t(_),T}finally{s(!1)}},S={status:e,loading:r,updating:a,isOpen:e==="open",isClosed:e==="closed",updateStatus:p,toggleStatus:async()=>{const E=e==="open"?"closed":"open";console.log("🔄 toggleStatus called! Current:",e,"New:",E),await p(E)},fetchCanteenStatus:d,refreshStatus:async()=>{console.log("🔄 Manual refresh requested"),i(!0),await d(!0)}};return v.jsx(yw.Provider,{value:S,children:n})},r1=R.createContext({});function i1(n){const e=R.useRef(null);return e.current===null&&(e.current=n()),e.current}const a1=typeof window<"u",ww=a1?R.useLayoutEffect:R.useEffect,Hu=R.createContext(null);function o1(n,e){n.indexOf(e)===-1&&n.push(e)}function s1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const fi=(n,e,t)=>t>e?e:t<n?n:t;let l1=()=>{};const di={},bw=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function _w(n){return typeof n=="object"&&n!==null}const Sw=n=>/^0[^.\s]+$/u.test(n);function c1(n){let e;return()=>(e===void 0&&(e=n()),e)}const yr=n=>n,XO=(n,e)=>t=>e(n(t)),Il=(...n)=>n.reduce(XO),xl=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class u1{constructor(){this.subscriptions=[]}add(e){return o1(this.subscriptions,e),()=>s1(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zr=n=>n*1e3,Vr=n=>n/1e3;function Ew(n,e){return e?n*(1e3/e):0}const Aw=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,YO=1e-7,KO=12;function ZO(n,e,t,r,i){let a,s,c=0;do s=e+(t-e)/2,a=Aw(s,r,i)-n,a>0?t=s:e=s;while(Math.abs(a)>YO&&++c<KO);return s}function kl(n,e,t,r){if(n===e&&t===r)return yr;const i=a=>ZO(a,0,1,n,t);return a=>a===0||a===1?a:Aw(i(a),e,r)}const Cw=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Tw=n=>e=>1-n(1-e),Ow=kl(.33,1.53,.69,.99),f1=Tw(Ow),Rw=Cw(f1),Dw=n=>(n*=2)<1?.5*f1(n):.5*(2-Math.pow(2,-10*(n-1))),d1=n=>1-Math.sin(Math.acos(n)),Nw=Tw(d1),Iw=Cw(d1),QO=kl(.42,0,1,1),JO=kl(0,0,.58,1),kw=kl(.42,0,.58,1),eR=n=>Array.isArray(n)&&typeof n[0]!="number",Mw=n=>Array.isArray(n)&&typeof n[0]=="number",tR={linear:yr,easeIn:QO,easeInOut:kw,easeOut:JO,circIn:d1,circInOut:Iw,circOut:Nw,backIn:f1,backInOut:Rw,backOut:Ow,anticipate:Dw},nR=n=>typeof n=="string",Ky=n=>{if(Mw(n)){l1(n.length===4);const[e,t,r,i]=n;return kl(e,t,r,i)}else if(nR(n))return tR[n];return n},lu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function rR(n,e){let t=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(p){s.has(p)&&(d.schedule(p),n()),p(c)}const d={schedule:(p,g=!1,y=!1)=>{const b=y&&i?t:r;return g&&s.add(p),b.has(p)||b.add(p),p},cancel:p=>{r.delete(p),s.delete(p)},process:p=>{if(c=p,i){a=!0;return}i=!0,[t,r]=[r,t],t.forEach(f),t.clear(),i=!1,a&&(a=!1,d.process(p))}};return d}const iR=40;function jw(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,s=lu.reduce((C,O)=>(C[O]=rR(a),C),{}),{setup:c,read:f,resolveKeyframes:d,preUpdate:p,update:g,preRender:y,render:x,postRender:b}=s,S=()=>{const C=di.useManualTiming?i.timestamp:performance.now();t=!1,di.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(C-i.timestamp,iR),1)),i.timestamp=C,i.isProcessing=!0,c.process(i),f.process(i),d.process(i),p.process(i),g.process(i),y.process(i),x.process(i),b.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(S))},E=()=>{t=!0,r=!0,i.isProcessing||n(S)};return{schedule:lu.reduce((C,O)=>{const D=s[O];return C[O]=(j,L=!1,H=!1)=>(t||E(),D.schedule(j,L,H)),C},{}),cancel:C=>{for(let O=0;O<lu.length;O++)s[lu[O]].cancel(C)},state:i,steps:s}}const{schedule:Rt,cancel:Yi,state:Sn,steps:Ih}=jw(typeof requestAnimationFrame<"u"?requestAnimationFrame:yr,!0);let yu;function aR(){yu=void 0}const $n={now:()=>(yu===void 0&&$n.set(Sn.isProcessing||di.useManualTiming?Sn.timestamp:performance.now()),yu),set:n=>{yu=n,queueMicrotask(aR)}},Pw=n=>e=>typeof e=="string"&&e.startsWith(n),h1=Pw("--"),oR=Pw("var(--"),p1=n=>oR(n)?sR.test(n.split("/*")[0].trim()):!1,sR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Zo={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},wl={...Zo,transform:n=>fi(0,1,n)},cu={...Zo,default:1},dl=n=>Math.round(n*1e5)/1e5,g1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lR(n){return n==null}const cR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,v1=(n,e)=>t=>!!(typeof t=="string"&&cR.test(t)&&t.startsWith(n)||e&&!lR(t)&&Object.prototype.hasOwnProperty.call(t,e)),Bw=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,a,s,c]=r.match(g1);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(s),alpha:c!==void 0?parseFloat(c):1}},uR=n=>fi(0,255,n),kh={...Zo,transform:n=>Math.round(uR(n))},Ca={test:v1("rgb","red"),parse:Bw("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+kh.transform(n)+", "+kh.transform(e)+", "+kh.transform(t)+", "+dl(wl.transform(r))+")"};function fR(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const y0={test:v1("#"),parse:fR,transform:Ca.transform},Ml=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Hi=Ml("deg"),Hr=Ml("%"),je=Ml("px"),dR=Ml("vh"),hR=Ml("vw"),Zy={...Hr,parse:n=>Hr.parse(n)/100,transform:n=>Hr.transform(n*100)},Po={test:v1("hsl","hue"),parse:Bw("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Hr.transform(dl(e))+", "+Hr.transform(dl(t))+", "+dl(wl.transform(r))+")"},Yt={test:n=>Ca.test(n)||y0.test(n)||Po.test(n),parse:n=>Ca.test(n)?Ca.parse(n):Po.test(n)?Po.parse(n):y0.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ca.transform(n):Po.transform(n),getAnimatableNone:n=>{const e=Yt.parse(n);return e.alpha=0,Yt.transform(e)}},pR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gR(n){return isNaN(n)&&typeof n=="string"&&(n.match(g1)?.length||0)+(n.match(pR)?.length||0)>0}const Lw="number",Fw="color",vR="var",mR="var(",Qy="${}",yR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bl(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(yR,f=>(Yt.test(f)?(r.color.push(a),i.push(Fw),t.push(Yt.parse(f))):f.startsWith(mR)?(r.var.push(a),i.push(vR),t.push(f)):(r.number.push(a),i.push(Lw),t.push(parseFloat(f))),++a,Qy)).split(Qy);return{values:t,split:c,indexes:r,types:i}}function Uw(n){return bl(n).values}function zw(n){const{split:e,types:t}=bl(n),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const c=t[s];c===Lw?a+=dl(i[s]):c===Fw?a+=Yt.transform(i[s]):a+=i[s]}return a}}const xR=n=>typeof n=="number"?0:Yt.test(n)?Yt.getAnimatableNone(n):n;function wR(n){const e=Uw(n);return zw(n)(e.map(xR))}const Ki={test:gR,parse:Uw,createTransformer:zw,getAnimatableNone:wR};function Mh(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function bR({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,a=0,s=0;if(!e)i=a=s=t;else{const c=t<.5?t*(1+e):t+e-t*e,f=2*t-c;i=Mh(f,c,n+1/3),a=Mh(f,c,n),s=Mh(f,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Nu(n,e){return t=>t>0?e:n}const Mt=(n,e,t)=>n+(e-n)*t,jh=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},_R=[y0,Ca,Po],SR=n=>_R.find(e=>e.test(n));function Jy(n){const e=SR(n);if(!e)return!1;let t=e.parse(n);return e===Po&&(t=bR(t)),t}const ex=(n,e)=>{const t=Jy(n),r=Jy(e);if(!t||!r)return Nu(n,e);const i={...t};return a=>(i.red=jh(t.red,r.red,a),i.green=jh(t.green,r.green,a),i.blue=jh(t.blue,r.blue,a),i.alpha=Mt(t.alpha,r.alpha,a),Ca.transform(i))},x0=new Set(["none","hidden"]);function ER(n,e){return x0.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function AR(n,e){return t=>Mt(n,e,t)}function m1(n){return typeof n=="number"?AR:typeof n=="string"?p1(n)?Nu:Yt.test(n)?ex:OR:Array.isArray(n)?Vw:typeof n=="object"?Yt.test(n)?ex:CR:Nu}function Vw(n,e){const t=[...n],r=t.length,i=n.map((a,s)=>m1(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)t[s]=i[s](a);return t}}function CR(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=m1(n[i])(n[i],e[i]));return i=>{for(const a in r)t[a]=r[a](i);return t}}function TR(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=n.indexes[a][r[a]],c=n.values[s]??0;t[i]=c,r[a]++}return t}const OR=(n,e)=>{const t=Ki.createTransformer(e),r=bl(n),i=bl(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?x0.has(n)&&!i.values.length||x0.has(e)&&!r.values.length?ER(n,e):Il(Vw(TR(r,i),i.values),t):Nu(n,e)};function Hw(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Mt(n,e,t):m1(n)(n,e)}const RR=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Rt.update(e,t),stop:()=>Yi(e),now:()=>Sn.isProcessing?Sn.timestamp:$n.now()}},Gw=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)r+=Math.round(n(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Iu=2e4;function y1(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Iu;)e+=t,r=n.next(e);return e>=Iu?1/0:e}function DR(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(y1(r),Iu);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Vr(i)}}const NR=5;function $w(n,e,t){const r=Math.max(e-NR,0);return Ew(t-n(r),e-r)}const Ft={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ph=.001;function IR({duration:n=Ft.duration,bounce:e=Ft.bounce,velocity:t=Ft.velocity,mass:r=Ft.mass}){let i,a,s=1-e;s=fi(Ft.minDamping,Ft.maxDamping,s),n=fi(Ft.minDuration,Ft.maxDuration,Vr(n)),s<1?(i=d=>{const p=d*s,g=p*n,y=p-t,x=w0(d,s),b=Math.exp(-g);return Ph-y/x*b},a=d=>{const g=d*s*n,y=g*t+t,x=Math.pow(s,2)*Math.pow(d,2)*n,b=Math.exp(-g),S=w0(Math.pow(d,2),s);return(-i(d)+Ph>0?-1:1)*((y-x)*b)/S}):(i=d=>{const p=Math.exp(-d*n),g=(d-t)*n+1;return-Ph+p*g},a=d=>{const p=Math.exp(-d*n),g=(t-d)*(n*n);return p*g});const c=5/n,f=MR(i,a,c);if(n=zr(n),isNaN(f))return{stiffness:Ft.stiffness,damping:Ft.damping,duration:n};{const d=Math.pow(f,2)*r;return{stiffness:d,damping:s*2*Math.sqrt(r*d),duration:n}}}const kR=12;function MR(n,e,t){let r=t;for(let i=1;i<kR;i++)r=r-n(r)/e(r);return r}function w0(n,e){return n*Math.sqrt(1-e*e)}const jR=["duration","bounce"],PR=["stiffness","damping","mass"];function tx(n,e){return e.some(t=>n[t]!==void 0)}function BR(n){let e={velocity:Ft.velocity,stiffness:Ft.stiffness,damping:Ft.damping,mass:Ft.mass,isResolvedFromDuration:!1,...n};if(!tx(n,PR)&&tx(n,jR))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,a=2*fi(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Ft.mass,stiffness:i,damping:a}}else{const t=IR(n);e={...e,...t,mass:Ft.mass},e.isResolvedFromDuration=!0}return e}function ku(n=Ft.visualDuration,e=Ft.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const a=t.keyframes[0],s=t.keyframes[t.keyframes.length-1],c={done:!1,value:a},{stiffness:f,damping:d,mass:p,duration:g,velocity:y,isResolvedFromDuration:x}=BR({...t,velocity:-Vr(t.velocity||0)}),b=y||0,S=d/(2*Math.sqrt(f*p)),E=s-a,_=Vr(Math.sqrt(f/p)),T=Math.abs(E)<5;r||(r=T?Ft.restSpeed.granular:Ft.restSpeed.default),i||(i=T?Ft.restDelta.granular:Ft.restDelta.default);let C;if(S<1){const D=w0(_,S);C=j=>{const L=Math.exp(-S*_*j);return s-L*((b+S*_*E)/D*Math.sin(D*j)+E*Math.cos(D*j))}}else if(S===1)C=D=>s-Math.exp(-_*D)*(E+(b+_*E)*D);else{const D=_*Math.sqrt(S*S-1);C=j=>{const L=Math.exp(-S*_*j),H=Math.min(D*j,300);return s-L*((b+S*_*E)*Math.sinh(H)+D*E*Math.cosh(H))/D}}const O={calculatedDuration:x&&g||null,next:D=>{const j=C(D);if(x)c.done=D>=g;else{let L=D===0?b:0;S<1&&(L=D===0?zr(b):$w(C,D,j));const H=Math.abs(L)<=r,$=Math.abs(s-j)<=i;c.done=H&&$}return c.value=c.done?s:j,c},toString:()=>{const D=Math.min(y1(O),Iu),j=Gw(L=>O.next(D*L).value,D,30);return D+"ms "+j},toTransition:()=>{}};return O}ku.applyToOptions=n=>{const e=DR(n,100,ku);return n.ease=e.ease,n.duration=zr(e.duration),n.type="keyframes",n};function b0({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:c,max:f,restDelta:d=.5,restSpeed:p}){const g=n[0],y={done:!1,value:g},x=H=>c!==void 0&&H<c||f!==void 0&&H>f,b=H=>c===void 0?f:f===void 0||Math.abs(c-H)<Math.abs(f-H)?c:f;let S=t*e;const E=g+S,_=s===void 0?E:s(E);_!==E&&(S=_-g);const T=H=>-S*Math.exp(-H/r),C=H=>_+T(H),O=H=>{const $=T(H),ne=C(H);y.done=Math.abs($)<=d,y.value=y.done?_:ne};let D,j;const L=H=>{x(y.value)&&(D=H,j=ku({keyframes:[y.value,b(y.value)],velocity:$w(C,H,y.value),damping:i,stiffness:a,restDelta:d,restSpeed:p}))};return L(0),{calculatedDuration:null,next:H=>{let $=!1;return!j&&D===void 0&&($=!0,O(H),L(H)),D!==void 0&&H>=D?j.next(H-D):(!$&&O(H),y)}}}function LR(n,e,t){const r=[],i=t||di.mix||Hw,a=n.length-1;for(let s=0;s<a;s++){let c=i(n[s],n[s+1]);if(e){const f=Array.isArray(e)?e[s]||yr:e;c=Il(f,c)}r.push(c)}return r}function FR(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const a=n.length;if(l1(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=LR(e,r,i),f=c.length,d=p=>{if(s&&p<n[0])return e[0];let g=0;if(f>1)for(;g<n.length-2&&!(p<n[g+1]);g++);const y=xl(n[g],n[g+1],p);return c[g](y)};return t?p=>d(fi(n[0],n[a-1],p)):d}function UR(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=xl(0,e,r);n.push(Mt(t,1,i))}}function zR(n){const e=[0];return UR(e,n.length-1),e}function VR(n,e){return n.map(t=>t*e)}function HR(n,e){return n.map(()=>e||kw).splice(0,n.length-1)}function hl({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=eR(r)?r.map(Ky):Ky(r),a={done:!1,value:e[0]},s=VR(t&&t.length===e.length?t:zR(e),n),c=FR(s,e,{ease:Array.isArray(i)?i:HR(e,i)});return{calculatedDuration:n,next:f=>(a.value=c(f),a.done=f>=n,a)}}const GR=n=>n!==null;function x1(n,{repeat:e,repeatType:t="loop"},r,i=1){const a=n.filter(GR),c=i<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const $R={decay:b0,inertia:b0,tween:hl,keyframes:hl,spring:ku};function qw(n){typeof n.type=="string"&&(n.type=$R[n.type])}class w1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const qR=n=>n/100;class b1 extends w1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==$n.now()&&this.tick($n.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;qw(e);const{type:t=hl,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:c}=e;const f=t||hl;f!==hl&&typeof c[0]!="number"&&(this.mixKeyframes=Il(qR,Hw(c[0],c[1])),c=[0,100]);const d=f({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=y1(d));const{calculatedDuration:p}=d;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:p,repeat:g,repeatType:y,repeatDelay:x,type:b,onUpdate:S,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const _=this.currentTime-d*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let C=this.currentTime,O=r;if(g){const H=Math.min(this.currentTime,i)/c;let $=Math.floor(H),ne=H%1;!ne&&H>=1&&(ne=1),ne===1&&$--,$=Math.min($,g+1),!!($%2)&&(y==="reverse"?(ne=1-ne,x&&(ne-=x/c)):y==="mirror"&&(O=s)),C=fi(0,1,ne)*c}const D=T?{done:!1,value:p[0]}:O.next(C);a&&(D.value=a(D.value));let{done:j}=D;!T&&f!==null&&(j=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return L&&b!==b0&&(D.value=x1(p,this.options,E,this.speed)),S&&S(D.value),L&&this.finish(),D}then(e,t){return this.finished.then(e,t)}get duration(){return Vr(this.calculatedDuration)}get time(){return Vr(this.currentTime)}set time(e){e=zr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime($n.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Vr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=RR,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime($n.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function WR(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Ta=n=>n*180/Math.PI,_0=n=>{const e=Ta(Math.atan2(n[1],n[0]));return S0(e)},XR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:_0,rotateZ:_0,skewX:n=>Ta(Math.atan(n[1])),skewY:n=>Ta(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},S0=n=>(n=n%360,n<0&&(n+=360),n),nx=_0,rx=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),ix=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),YR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:rx,scaleY:ix,scale:n=>(rx(n)+ix(n))/2,rotateX:n=>S0(Ta(Math.atan2(n[6],n[5]))),rotateY:n=>S0(Ta(Math.atan2(-n[2],n[0]))),rotateZ:nx,rotate:nx,skewX:n=>Ta(Math.atan(n[4])),skewY:n=>Ta(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function E0(n){return n.includes("scale")?1:0}function A0(n,e){if(!n||n==="none")return E0(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=YR,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=XR,i=c}if(!i)return E0(e);const a=r[e],s=i[1].split(",").map(ZR);return typeof a=="function"?a(s):s[a]}const KR=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return A0(t,e)};function ZR(n){return parseFloat(n.trim())}const Qo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jo=new Set(Qo),ax=n=>n===Zo||n===je,QR=new Set(["x","y","z"]),JR=Qo.filter(n=>!QR.has(n));function e5(n){const e=[];return JR.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Ra={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>A0(e,"x"),y:(n,{transform:e})=>A0(e,"y")};Ra.translateX=Ra.x;Ra.translateY=Ra.y;const Da=new Set;let C0=!1,T0=!1,O0=!1;function Ww(){if(T0){const n=Array.from(Da).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=e5(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}T0=!1,C0=!1,Da.forEach(n=>n.complete(O0)),Da.clear()}function Xw(){Da.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(T0=!0)})}function t5(){O0=!0,Xw(),Ww(),O0=!1}class _1{constructor(e,t,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Da.add(this),C0||(C0=!0,Rt.read(Xw),Rt.resolveKeyframes(Ww))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const c=r.readValue(t,s);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}WR(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Da.delete(this)}cancel(){this.state==="scheduled"&&(Da.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const n5=n=>n.startsWith("--");function r5(n,e,t){n5(e)?n.style.setProperty(e,t):n.style[e]=t}const i5=c1(()=>window.ScrollTimeline!==void 0),a5={};function o5(n,e){const t=c1(n);return()=>a5[e]??t()}const Yw=o5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ll=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,ox={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ll([0,.65,.55,1]),circOut:ll([.55,0,1,.45]),backIn:ll([.31,.01,.66,-.59]),backOut:ll([.33,1.53,.69,.99])};function Kw(n,e){if(n)return typeof n=="function"?Yw()?Gw(n,e):"ease-out":Mw(n)?ll(n):Array.isArray(n)?n.map(t=>Kw(t,e)||ox.easeOut):ox[n]}function s5(n,e,t,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:c="easeOut",times:f}={},d=void 0){const p={[e]:t};f&&(p.offset=f);const g=Kw(c,i);Array.isArray(g)&&(p.easing=g);const y={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return d&&(y.pseudoElement=d),n.animate(p,y)}function Zw(n){return typeof n=="function"&&"applyToOptions"in n}function l5({type:n,...e}){return Zw(n)&&Yw()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class c5 extends w1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,l1(typeof e.type!="string");const d=l5(e);this.animation=s5(t,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=x1(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):r5(t,r,p),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Vr(Number(e))}get time(){return Vr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=zr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&i5()?(this.animation.timeline=e,yr):t(this)}}const Qw={anticipate:Dw,backInOut:Rw,circInOut:Iw};function u5(n){return n in Qw}function f5(n){typeof n.ease=="string"&&u5(n.ease)&&(n.ease=Qw[n.ease])}const sx=10;class d5 extends c5{constructor(e){f5(e),qw(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new b1({...s,autoplay:!1}),f=zr(this.finishedTime??this.time);t.setWithVelocity(c.sample(f-sx).value,c.sample(f).value,sx),c.stop()}}const lx=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ki.test(n)||n==="0")&&!n.startsWith("url("));function h5(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function p5(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],s=lx(i,e),c=lx(a,e);return!s||!c?!1:h5(n)||(t==="spring"||Zw(t))&&r}function R0(n){n.duration=0,n.type}const g5=new Set(["opacity","clipPath","filter","transform"]),v5=c1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function m5(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:a,type:s}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=e.owner.getProps();return v5()&&t&&g5.has(t)&&(t!=="transform"||!d)&&!f&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const y5=40;class x5 extends w1{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:c,name:f,motionValue:d,element:p,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=$n.now();const y={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:a,repeatType:s,name:f,motionValue:d,element:p,...g},x=p?.KeyframeResolver||_1;this.keyframeResolver=new x(c,(b,S,E)=>this.onKeyframesResolved(b,S,y,!E),f,d,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:c,delay:f,isHandoff:d,onUpdate:p}=r;this.resolvedAt=$n.now(),p5(e,a,s,c)||((di.instantAnimations||!f)&&p?.(x1(e,r,t)),e[0]=e[e.length-1],R0(r),r.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>y5?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},x=!d&&m5(y)?new d5({...y,element:y.motionValue.owner.current}):new b1(y);x.finished.then(()=>this.notifyFinished()).catch(yr),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),t5()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const w5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function b5(n){const e=w5.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function Jw(n,e,t=1){const[r,i]=b5(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return bw(s)?parseFloat(s):s}return p1(i)?Jw(i,e,t+1):i}function S1(n,e){return n?.[e]??n?.default??n}const eb=new Set(["width","height","top","left","right","bottom",...Qo]),_5={test:n=>n==="auto",parse:n=>n},tb=n=>e=>e.test(n),nb=[Zo,je,Hr,Hi,hR,dR,_5],cx=n=>nb.find(tb(n));function S5(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Sw(n):!0}const E5=new Set(["brightness","contrast","saturate","opacity"]);function A5(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(g1)||[];if(!r)return n;const i=t.replace(r,"");let a=E5.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+i+")"}const C5=/\b([a-z-]*)\(.*?\)/gu,D0={...Ki,getAnimatableNone:n=>{const e=n.match(C5);return e?e.map(A5).join(" "):n}},ux={...Zo,transform:Math.round},T5={rotate:Hi,rotateX:Hi,rotateY:Hi,rotateZ:Hi,scale:cu,scaleX:cu,scaleY:cu,scaleZ:cu,skew:Hi,skewX:Hi,skewY:Hi,distance:je,translateX:je,translateY:je,translateZ:je,x:je,y:je,z:je,perspective:je,transformPerspective:je,opacity:wl,originX:Zy,originY:Zy,originZ:je},E1={borderWidth:je,borderTopWidth:je,borderRightWidth:je,borderBottomWidth:je,borderLeftWidth:je,borderRadius:je,radius:je,borderTopLeftRadius:je,borderTopRightRadius:je,borderBottomRightRadius:je,borderBottomLeftRadius:je,width:je,maxWidth:je,height:je,maxHeight:je,top:je,right:je,bottom:je,left:je,padding:je,paddingTop:je,paddingRight:je,paddingBottom:je,paddingLeft:je,margin:je,marginTop:je,marginRight:je,marginBottom:je,marginLeft:je,backgroundPositionX:je,backgroundPositionY:je,...T5,zIndex:ux,fillOpacity:wl,strokeOpacity:wl,numOctaves:ux},O5={...E1,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:D0,WebkitFilter:D0},rb=n=>O5[n];function ib(n,e){let t=rb(n);return t!==D0&&(t=Ki),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const R5=new Set(["auto","none","0"]);function D5(n,e,t){let r=0,i;for(;r<n.length&&!i;){const a=n[r];typeof a=="string"&&!R5.has(a)&&bl(a).values.length&&(i=n[r]),r++}if(i&&t)for(const a of e)n[a]=ib(t,i)}class N5 extends _1{constructor(e,t,r,i,a){super(e,t,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),p1(d))){const p=Jw(d,t.current);p!==void 0&&(e[f]=p),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!eb.has(r)||e.length!==2)return;const[i,a]=e,s=cx(i),c=cx(a);if(s!==c)if(ax(s)&&ax(c))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else Ra[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||S5(e[i]))&&r.push(i);r.length&&D5(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ra[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Ra[t](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function I5(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const ab=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function ob(n){return _w(n)&&"offsetHeight"in n}const fx=30,k5=n=>!isNaN(parseFloat(n));class M5{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=$n.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=$n.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=k5(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new u1);const r=this.events[e].add(t);return e==="change"?()=>{r(),Rt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=$n.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>fx)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,fx);return Ew(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $o(n,e){return new M5(n,e)}const{schedule:A1}=jw(queueMicrotask,!1),Ar={x:!1,y:!1};function sb(){return Ar.x||Ar.y}function j5(n){return n==="x"||n==="y"?Ar[n]?null:(Ar[n]=!0,()=>{Ar[n]=!1}):Ar.x||Ar.y?null:(Ar.x=Ar.y=!0,()=>{Ar.x=Ar.y=!1})}function lb(n,e){const t=I5(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function dx(n){return!(n.pointerType==="touch"||sb())}function P5(n,e,t={}){const[r,i,a]=lb(n,t),s=c=>{if(!dx(c))return;const{target:f}=c,d=e(f,c);if(typeof d!="function"||!f)return;const p=g=>{dx(g)&&(d(g),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,i)};return r.forEach(c=>{c.addEventListener("pointerenter",s,i)}),a}const cb=(n,e)=>e?n===e?!0:cb(n,e.parentElement):!1,C1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,B5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function L5(n){return B5.has(n.tagName)||n.tabIndex!==-1}const xu=new WeakSet;function hx(n){return e=>{e.key==="Enter"&&n(e)}}function Bh(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const F5=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=hx(()=>{if(xu.has(t))return;Bh(t,"down");const i=hx(()=>{Bh(t,"up")}),a=()=>Bh(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function px(n){return C1(n)&&!sb()}function U5(n,e,t={}){const[r,i,a]=lb(n,t),s=c=>{const f=c.currentTarget;if(!px(c))return;xu.add(f);const d=e(f,c),p=(x,b)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),xu.has(f)&&xu.delete(f),px(x)&&typeof d=="function"&&d(x,{success:b})},g=x=>{p(x,f===window||f===document||t.useGlobalTarget||cb(f,x.target))},y=x=>{p(x,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",y,i)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",s,i),ob(c)&&(c.addEventListener("focus",d=>F5(d,i)),!L5(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function ub(n){return _w(n)&&"ownerSVGElement"in n}function z5(n){return ub(n)&&n.tagName==="svg"}const Rn=n=>!!(n&&n.getVelocity),V5=[...nb,Yt,Ki],H5=n=>V5.find(tb(n)),T1=R.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class G5 extends R.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=ob(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function $5({children:n,isPresent:e,anchorX:t,root:r}){const i=R.useId(),a=R.useRef(null),s=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=R.useContext(T1);return R.useInsertionEffect(()=>{const{width:f,height:d,top:p,left:g,right:y}=s.current;if(e||!a.current||!f||!d)return;const x=t==="left"?`left: ${g}`:`right: ${y}`;a.current.dataset.motionPopId=i;const b=document.createElement("style");c&&(b.nonce=c);const S=r??document.head;return S.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${d}px !important;
            ${x}px !important;
            top: ${p}px !important;
          }
        `),()=>{S.contains(b)&&S.removeChild(b)}},[e]),v.jsx(G5,{isPresent:e,childRef:a,sizeRef:s,children:R.cloneElement(n,{ref:a})})}const q5=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:c,root:f})=>{const d=i1(W5),p=R.useId();let g=!0,y=R.useMemo(()=>(g=!1,{id:p,initial:e,isPresent:t,custom:i,onExitComplete:x=>{d.set(x,!0);for(const b of d.values())if(!b)return;r&&r()},register:x=>(d.set(x,!1),()=>d.delete(x))}),[t,d,r]);return a&&g&&(y={...y}),R.useMemo(()=>{d.forEach((x,b)=>d.set(b,!1))},[t]),R.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),s==="popLayout"&&(n=v.jsx($5,{isPresent:t,anchorX:c,root:f,children:n})),v.jsx(Hu.Provider,{value:y,children:n})};function W5(){return new Map}function fb(n=!0){const e=R.useContext(Hu);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,a=R.useId();R.useEffect(()=>{if(n)return i(a)},[n]);const s=R.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,s]:[!0]}const uu=n=>n.key||"";function gx(n){const e=[];return R.Children.forEach(n,t=>{R.isValidElement(t)&&e.push(t)}),e}const Dn=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:c="left",root:f})=>{const[d,p]=fb(s),g=R.useMemo(()=>gx(n),[n]),y=s&&!d?[]:g.map(uu),x=R.useRef(!0),b=R.useRef(g),S=i1(()=>new Map),[E,_]=R.useState(g),[T,C]=R.useState(g);ww(()=>{x.current=!1,b.current=g;for(let j=0;j<T.length;j++){const L=uu(T[j]);y.includes(L)?S.delete(L):S.get(L)!==!0&&S.set(L,!1)}},[T,y.length,y.join("-")]);const O=[];if(g!==E){let j=[...g];for(let L=0;L<T.length;L++){const H=T[L],$=uu(H);y.includes($)||(j.splice(L,0,H),O.push(H))}return a==="wait"&&O.length&&(j=O),C(gx(j)),_(g),null}const{forceRender:D}=R.useContext(r1);return v.jsx(v.Fragment,{children:T.map(j=>{const L=uu(j),H=s&&!d?!1:g===T||y.includes(L),$=()=>{if(S.has(L))S.set(L,!0);else return;let ne=!0;S.forEach(se=>{se||(ne=!1)}),ne&&(D?.(),C(b.current),s&&p?.(),r&&r())};return v.jsx(q5,{isPresent:H,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:f,onExitComplete:H?void 0:$,anchorX:c,children:j},L)})})},db=R.createContext({strict:!1}),vx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qo={};for(const n in vx)qo[n]={isEnabled:e=>vx[n].some(t=>!!e[t])};function X5(n){for(const e in n)qo[e]={...qo[e],...n[e]}}const Y5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mu(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Y5.has(n)}let hb=n=>!Mu(n);function K5(n){typeof n=="function"&&(hb=e=>e.startsWith("on")?!Mu(e):n(e))}try{K5(require("@emotion/is-prop-valid").default)}catch{}function Z5(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(hb(i)||t===!0&&Mu(i)||!e&&!Mu(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Gu=R.createContext({});function $u(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function _l(n){return typeof n=="string"||Array.isArray(n)}const O1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],R1=["initial",...O1];function qu(n){return $u(n.animate)||R1.some(e=>_l(n[e]))}function pb(n){return!!(qu(n)||n.variants)}function Q5(n,e){if(qu(n)){const{initial:t,animate:r}=n;return{initial:t===!1||_l(t)?t:void 0,animate:_l(r)?r:void 0}}return n.inherit!==!1?e:{}}function J5(n){const{initial:e,animate:t}=Q5(n,R.useContext(Gu));return R.useMemo(()=>({initial:e,animate:t}),[mx(e),mx(t)])}function mx(n){return Array.isArray(n)?n.join(" "):n}const Sl={};function eD(n){for(const e in n)Sl[e]=n[e],h1(e)&&(Sl[e].isCSSVariable=!0)}function gb(n,{layout:e,layoutId:t}){return Jo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Sl[n]||n==="opacity")}const tD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nD=Qo.length;function rD(n,e,t){let r="",i=!0;for(let a=0;a<nD;a++){const s=Qo[a],c=n[s];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(s.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||t){const d=ab(c,E1[s]);if(!f){i=!1;const p=tD[s]||s;r+=`${p}(${d}) `}t&&(e[s]=d)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function D1(n,e,t){const{style:r,vars:i,transformOrigin:a}=n;let s=!1,c=!1;for(const f in e){const d=e[f];if(Jo.has(f)){s=!0;continue}else if(h1(f)){i[f]=d;continue}else{const p=ab(d,E1[f]);f.startsWith("origin")?(c=!0,a[f]=p):r[f]=p}}if(e.transform||(s||t?r.transform=rD(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:f="50%",originY:d="50%",originZ:p=0}=a;r.transformOrigin=`${f} ${d} ${p}`}}const N1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vb(n,e,t){for(const r in e)!Rn(e[r])&&!gb(r,t)&&(n[r]=e[r])}function iD({transformTemplate:n},e){return R.useMemo(()=>{const t=N1();return D1(t,e,n),Object.assign({},t.vars,t.style)},[e])}function aD(n,e){const t=n.style||{},r={};return vb(r,t,n),Object.assign(r,iD(n,e)),r}function oD(n,e){const t={},r=aD(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const sD={offset:"stroke-dashoffset",array:"stroke-dasharray"},lD={offset:"strokeDashoffset",array:"strokeDasharray"};function cD(n,e,t=1,r=0,i=!0){n.pathLength=1;const a=i?sD:lD;n[a.offset]=je.transform(-r);const s=je.transform(e),c=je.transform(t);n[a.array]=`${s} ${c}`}function mb(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...c},f,d,p){if(D1(n,c,d),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:y}=n;g.transform&&(y.transform=g.transform,delete g.transform),(y.transform||g.transformOrigin)&&(y.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),y.transform&&(y.transformBox=p?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),r!==void 0&&(g.scale=r),i!==void 0&&cD(g,i,a,s,!1)}const yb=()=>({...N1(),attrs:{}}),xb=n=>typeof n=="string"&&n.toLowerCase()==="svg";function uD(n,e,t,r){const i=R.useMemo(()=>{const a=yb();return mb(a,e,xb(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};vb(a,n.style,n),i.style={...a,...i.style}}return i}const fD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function I1(n){return typeof n!="string"||n.includes("-")?!1:!!(fD.indexOf(n)>-1||/[A-Z]/u.test(n))}function dD(n,e,t,{latestValues:r},i,a=!1){const c=(I1(n)?uD:oD)(e,r,i,n),f=Z5(e,typeof n=="string",a),d=n!==R.Fragment?{...f,...c,ref:t}:{},{children:p}=e,g=R.useMemo(()=>Rn(p)?p.get():p,[p]);return R.createElement(n,{...d,children:g})}function yx(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function k1(n,e,t,r){if(typeof e=="function"){const[i,a]=yx(r);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=yx(r);e=e(t!==void 0?t:n.custom,i,a)}return e}function wu(n){return Rn(n)?n.get():n}function hD({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:pD(t,r,i,n),renderState:e()}}function pD(n,e,t,r){const i={},a=r(n,{});for(const y in a)i[y]=wu(a[y]);let{initial:s,animate:c}=n;const f=qu(n),d=pb(n);e&&d&&!f&&n.inherit!==!1&&(s===void 0&&(s=e.initial),c===void 0&&(c=e.animate));let p=t?t.initial===!1:!1;p=p||s===!1;const g=p?c:s;if(g&&typeof g!="boolean"&&!$u(g)){const y=Array.isArray(g)?g:[g];for(let x=0;x<y.length;x++){const b=k1(n,y[x]);if(b){const{transitionEnd:S,transition:E,..._}=b;for(const T in _){let C=_[T];if(Array.isArray(C)){const O=p?C.length-1:0;C=C[O]}C!==null&&(i[T]=C)}for(const T in S)i[T]=S[T]}}}return i}const wb=n=>(e,t)=>{const r=R.useContext(Gu),i=R.useContext(Hu),a=()=>hD(n,e,r,i);return t?a():i1(a)};function M1(n,e,t){const{style:r}=n,i={};for(const a in r)(Rn(r[a])||e.style&&Rn(e.style[a])||gb(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const gD=wb({scrapeMotionValuesFromProps:M1,createRenderState:N1});function bb(n,e,t){const r=M1(n,e,t);for(const i in n)if(Rn(n[i])||Rn(e[i])){const a=Qo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=n[i]}return r}const vD=wb({scrapeMotionValuesFromProps:bb,createRenderState:yb}),mD=Symbol.for("motionComponentSymbol");function Bo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function yD(n,e,t){return R.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Bo(t)&&(t.current=r))},[e])}const j1=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xD="framerAppearId",_b="data-"+j1(xD),Sb=R.createContext({});function wD(n,e,t,r,i){const{visualElement:a}=R.useContext(Gu),s=R.useContext(db),c=R.useContext(Hu),f=R.useContext(T1).reducedMotion,d=R.useRef(null);r=r||s.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const p=d.current,g=R.useContext(Sb);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&bD(d.current,t,i,g);const y=R.useRef(!1);R.useInsertionEffect(()=>{p&&y.current&&p.update(t,c)});const x=t[_b],b=R.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return ww(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),b.current&&p.animationState&&p.animationState.animateChanges())}),R.useEffect(()=>{p&&(!b.current&&p.animationState&&p.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),b.current=!1),p.enteringChildren=void 0)}),p}function bD(n,e,t,r){const{layoutId:i,layout:a,drag:s,dragConstraints:c,layoutScroll:f,layoutRoot:d,layoutCrossfade:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:Eb(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||c&&Bo(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:f,layoutRoot:d})}function Eb(n){if(n)return n.options.allowProjection!==!1?n.projection:Eb(n.parent)}function Lh(n,{forwardMotionProps:e=!1}={},t,r){t&&X5(t);const i=I1(n)?vD:gD;function a(c,f){let d;const p={...R.useContext(T1),...c,layoutId:_D(c)},{isStatic:g}=p,y=J5(c),x=i(c,g);if(!g&&a1){SD();const b=ED(p);d=b.MeasureLayout,y.visualElement=wD(n,x,p,r,b.ProjectionNode)}return v.jsxs(Gu.Provider,{value:y,children:[d&&y.visualElement?v.jsx(d,{visualElement:y.visualElement,...p}):null,dD(n,c,yD(x,y.visualElement,f),x,g,e)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const s=R.forwardRef(a);return s[mD]=n,s}function _D({layoutId:n}){const e=R.useContext(r1).id;return e&&n!==void 0?e+"-"+n:n}function SD(n,e){R.useContext(db).strict}function ED(n){const{drag:e,layout:t}=qo;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function AD(n,e){if(typeof Proxy>"u")return Lh;const t=new Map,r=(a,s)=>Lh(a,s,n,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(t.has(s)||t.set(s,Lh(s,void 0,n,e)),t.get(s))})}function Ab({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function CD({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function TD(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Fh(n){return n===void 0||n===1}function N0({scale:n,scaleX:e,scaleY:t}){return!Fh(n)||!Fh(e)||!Fh(t)}function Sa(n){return N0(n)||Cb(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Cb(n){return xx(n.x)||xx(n.y)}function xx(n){return n&&n!=="0%"}function ju(n,e,t){const r=n-t,i=e*r;return t+i}function wx(n,e,t,r,i){return i!==void 0&&(n=ju(n,i,r)),ju(n,t,r)+e}function I0(n,e=0,t=1,r,i){n.min=wx(n.min,e,t,r,i),n.max=wx(n.max,e,t,r,i)}function Tb(n,{x:e,y:t}){I0(n.x,e.translate,e.scale,e.originPoint),I0(n.y,t.translate,t.scale,t.originPoint)}const bx=.999999999999,_x=1.0000000000001;function OD(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,s;for(let c=0;c<i;c++){a=t[c],s=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Fo(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,Tb(n,s)),r&&Sa(a.latestValues)&&Fo(n,a.latestValues))}e.x<_x&&e.x>bx&&(e.x=1),e.y<_x&&e.y>bx&&(e.y=1)}function Lo(n,e){n.min=n.min+e,n.max=n.max+e}function Sx(n,e,t,r,i=.5){const a=Mt(n.min,n.max,i);I0(n,e,t,a,r)}function Fo(n,e){Sx(n.x,e.x,e.scaleX,e.scale,e.originX),Sx(n.y,e.y,e.scaleY,e.scale,e.originY)}function Ob(n,e){return Ab(TD(n.getBoundingClientRect(),e))}function RD(n,e,t){const r=Ob(n,t),{scroll:i}=e;return i&&(Lo(r.x,i.offset.x),Lo(r.y,i.offset.y)),r}const Ex=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uo=()=>({x:Ex(),y:Ex()}),Ax=()=>({min:0,max:0}),Vt=()=>({x:Ax(),y:Ax()}),k0={current:null},Rb={current:!1};function DD(){if(Rb.current=!0,!!a1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>k0.current=n.matches;n.addEventListener("change",e),e()}else k0.current=!1}const ND=new WeakMap;function ID(n,e,t){for(const r in e){const i=e[r],a=t[r];if(Rn(i))n.addValue(r,i);else if(Rn(a))n.addValue(r,$o(i,{owner:n}));else if(a!==i)if(n.hasValue(r)){const s=n.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=n.getStaticValue(r);n.addValue(r,$o(s!==void 0?s:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Cx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kD{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=$n.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Rt.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=s;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=qu(t),this.isVariantNode=pb(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in g){const x=g[y];f[y]!==void 0&&Rn(x)&&x.set(f[y])}}mount(e){this.current=e,ND.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),Rb.current||DD(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:k0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Yi(this.notifyUpdate),Yi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Jo.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Rt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in qo){const t=qo[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Cx.length;r++){const i=Cx[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=ID(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=$o(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(bw(r)||Sw(r))?r=parseFloat(r):!H5(r)&&Ki.test(t)&&(r=ib(e,t)),this.setBaseTarget(e,Rn(r)?r.get():r)),Rn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const a=k1(this.props,t,this.presenceContext?.custom);a&&(r=a[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Rn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new u1),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){A1.render(this.render)}}class Db extends kD{constructor(){super(...arguments),this.KeyframeResolver=N5}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Nb(n,{style:e,vars:t},r,i){const a=n.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in t)a.setProperty(s,t[s])}function MD(n){return window.getComputedStyle(n)}class jD extends Db{constructor(){super(...arguments),this.type="html",this.renderInstance=Nb}readValueFromInstance(e,t){if(Jo.has(t))return this.projection?.isProjecting?E0(t):KR(e,t);{const r=MD(e),i=(h1(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Ob(e,t)}build(e,t,r){D1(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return M1(e,t,r)}}const Ib=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function PD(n,e,t,r){Nb(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(Ib.has(i)?i:j1(i),e.attrs[i])}class BD extends Db{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Vt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Jo.has(t)){const r=rb(t);return r&&r.default||0}return t=Ib.has(t)?t:j1(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return bb(e,t,r)}build(e,t,r){mb(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){PD(e,t,r,i)}mount(e){this.isSVGTag=xb(e.tagName),super.mount(e)}}const LD=(n,e)=>I1(n)?new BD(e):new jD(e,{allowProjection:n!==R.Fragment});function zo(n,e,t){const r=n.getProps();return k1(r,e,t!==void 0?t:r.custom,n)}const M0=n=>Array.isArray(n);function FD(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,$o(t))}function UD(n){return M0(n)?n[n.length-1]||0:n}function zD(n,e){const t=zo(n,e);let{transitionEnd:r={},transition:i={},...a}=t||{};a={...a,...r};for(const s in a){const c=UD(a[s]);FD(n,s,c)}}function VD(n){return!!(Rn(n)&&n.add)}function j0(n,e){const t=n.getValue("willChange");if(VD(t))return t.add(e);if(!t&&di.WillChange){const r=new di.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function kb(n){return n.props[_b]}const HD=n=>n!==null;function GD(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(HD),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[a]}const $D={type:"spring",stiffness:500,damping:25,restSpeed:10},qD=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),WD={type:"keyframes",duration:.8},XD={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},YD=(n,{keyframes:e})=>e.length>2?WD:Jo.has(n)?n.startsWith("scale")?qD(e[1]):$D:XD;function KD({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:c,from:f,elapsed:d,...p}){return!!Object.keys(p).length}const P1=(n,e,t,r={},i,a)=>s=>{const c=S1(r,n)||{},f=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-zr(f);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{s(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:a?void 0:i};KD(c)||Object.assign(p,YD(n,p)),p.duration&&(p.duration=zr(p.duration)),p.repeatDelay&&(p.repeatDelay=zr(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(R0(p),p.delay===0&&(g=!0)),(di.instantAnimations||di.skipAnimations)&&(g=!0,R0(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,g&&!a&&e.get()!==void 0){const y=GD(p.keyframes,c);if(y!==void 0){Rt.update(()=>{p.onUpdate(y),p.onComplete()});return}}return c.isSync?new b1(p):new x5(p)};function ZD({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Mb(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:s,...c}=e;r&&(a=r);const f=[],d=i&&n.animationState&&n.animationState.getState()[i];for(const p in c){const g=n.getValue(p,n.latestValues[p]??null),y=c[p];if(y===void 0||d&&ZD(d,p))continue;const x={delay:t,...S1(a||{},p)},b=g.get();if(b!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===b&&!x.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const _=kb(n);if(_){const T=window.MotionHandoffAnimation(_,p,Rt);T!==null&&(x.startTime=T,S=!0)}}j0(n,p),g.start(P1(p,g,y,n.shouldReduceMotion&&eb.has(p)?{type:!1}:x,n,S));const E=g.animation;E&&f.push(E)}return s&&Promise.all(f).then(()=>{Rt.update(()=>{s&&zD(n,s)})}),f}function jb(n,e,t,r=0,i=1){const a=Array.from(n).sort((d,p)=>d.sortNodePosition(p)).indexOf(e),s=n.size,c=(s-1)*r;return typeof t=="function"?t(a,s):i===1?a*r:c-a*r}function P0(n,e,t={}){const r=zo(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const a=r?()=>Promise.all(Mb(n,r,t)):()=>Promise.resolve(),s=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:g}=i;return QD(n,e,f,d,p,g,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[f,d]=c==="beforeChildren"?[a,s]:[s,a];return f().then(()=>d())}else return Promise.all([a(),s(t.delay)])}function QD(n,e,t=0,r=0,i=0,a=1,s){const c=[];for(const f of n.variantChildren)f.notify("AnimationStart",e),c.push(P0(f,e,{...s,delay:t+(typeof r=="function"?0:r)+jb(n.variantChildren,f,r,i,a)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(c)}function JD(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>P0(n,a,t));r=Promise.all(i)}else if(typeof e=="string")r=P0(n,e,t);else{const i=typeof e=="function"?zo(n,e,t.custom):e;r=Promise.all(Mb(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function Pb(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const eN=R1.length;function Bb(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Bb(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<eN;t++){const r=R1[t],i=n.props[r];(_l(i)||i===!1)&&(e[r]=i)}return e}const tN=[...O1].reverse(),nN=O1.length;function rN(n){return e=>Promise.all(e.map(({animation:t,options:r})=>JD(n,t,r)))}function iN(n){let e=rN(n),t=Tx(),r=!0;const i=f=>(d,p)=>{const g=zo(n,p,f==="exit"?n.presenceContext?.custom:void 0);if(g){const{transition:y,transitionEnd:x,...b}=g;d={...d,...b,...x}}return d};function a(f){e=f(n)}function s(f){const{props:d}=n,p=Bb(n.parent)||{},g=[],y=new Set;let x={},b=1/0;for(let E=0;E<nN;E++){const _=tN[E],T=t[_],C=d[_]!==void 0?d[_]:p[_],O=_l(C),D=_===f?T.isActive:null;D===!1&&(b=E);let j=C===p[_]&&C!==d[_]&&O;if(j&&r&&n.manuallyAnimateOnMount&&(j=!1),T.protectedKeys={...x},!T.isActive&&D===null||!C&&!T.prevProp||$u(C)||typeof C=="boolean")continue;const L=aN(T.prevProp,C);let H=L||_===f&&T.isActive&&!j&&O||E>b&&O,$=!1;const ne=Array.isArray(C)?C:[C];let se=ne.reduce(i(_),{});D===!1&&(se={});const{prevResolvedValues:le={}}=T,ue={...le,...se},de=F=>{H=!0,y.has(F)&&($=!0,y.delete(F)),T.needsAnimating[F]=!0;const K=n.getValue(F);K&&(K.liveStyle=!1)};for(const F in ue){const K=se[F],he=le[F];if(x.hasOwnProperty(F))continue;let k=!1;M0(K)&&M0(he)?k=!Pb(K,he):k=K!==he,k?K!=null?de(F):y.add(F):K!==void 0&&y.has(F)?de(F):T.protectedKeys[F]=!0}T.prevProp=C,T.prevResolvedValues=se,T.isActive&&(x={...x,...se}),r&&n.blockInitialAnimation&&(H=!1);const Se=j&&L;H&&(!Se||$)&&g.push(...ne.map(F=>{const K={type:_};if(typeof F=="string"&&r&&!Se&&n.manuallyAnimateOnMount&&n.parent){const{parent:he}=n,k=zo(he,F);if(he.enteringChildren&&k){const{delayChildren:I}=k.transition||{};K.delay=jb(he.enteringChildren,n,I)}}return{animation:F,options:K}}))}if(y.size){const E={};if(typeof d.initial!="boolean"){const _=zo(n,Array.isArray(d.initial)?d.initial[0]:d.initial);_&&_.transition&&(E.transition=_.transition)}y.forEach(_=>{const T=n.getBaseTarget(_),C=n.getValue(_);C&&(C.liveStyle=!0),E[_]=T??null}),g.push({animation:E})}let S=!!g.length;return r&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(g):Promise.resolve()}function c(f,d){if(t[f].isActive===d)return Promise.resolve();n.variantChildren?.forEach(g=>g.animationState?.setActive(f,d)),t[f].isActive=d;const p=s(f);for(const g in t)t[g].protectedKeys={};return p}return{animateChanges:s,setActive:c,setAnimateFunction:a,getState:()=>t,reset:()=>{t=Tx(),r=!0}}}function aN(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Pb(e,n):!1}function wa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Tx(){return{animate:wa(!0),whileInView:wa(),whileHover:wa(),whileTap:wa(),whileDrag:wa(),whileFocus:wa(),exit:wa()}}class Qi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class oN extends Qi{constructor(e){super(e),e.animationState||(e.animationState=iN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();$u(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let sN=0;class lN extends Qi{constructor(){super(...arguments),this.id=sN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const cN={animation:{Feature:oN},exit:{Feature:lN}};function El(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function jl(n){return{point:{x:n.pageX,y:n.pageY}}}const uN=n=>e=>C1(e)&&n(e,jl(e));function pl(n,e,t,r){return El(n,e,uN(t),r)}const Lb=1e-4,fN=1-Lb,dN=1+Lb,Fb=.01,hN=0-Fb,pN=0+Fb;function Bn(n){return n.max-n.min}function gN(n,e,t){return Math.abs(n-e)<=t}function Ox(n,e,t,r=.5){n.origin=r,n.originPoint=Mt(e.min,e.max,n.origin),n.scale=Bn(t)/Bn(e),n.translate=Mt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=fN&&n.scale<=dN||isNaN(n.scale))&&(n.scale=1),(n.translate>=hN&&n.translate<=pN||isNaN(n.translate))&&(n.translate=0)}function gl(n,e,t,r){Ox(n.x,e.x,t.x,r?r.originX:void 0),Ox(n.y,e.y,t.y,r?r.originY:void 0)}function Rx(n,e,t){n.min=t.min+e.min,n.max=n.min+Bn(e)}function vN(n,e,t){Rx(n.x,e.x,t.x),Rx(n.y,e.y,t.y)}function Dx(n,e,t){n.min=e.min-t.min,n.max=n.min+Bn(e)}function vl(n,e,t){Dx(n.x,e.x,t.x),Dx(n.y,e.y,t.y)}function pr(n){return[n("x"),n("y")]}const Ub=({current:n})=>n?n.ownerDocument.defaultView:null,Nx=(n,e)=>Math.abs(n-e);function mN(n,e){const t=Nx(n.x,e.x),r=Nx(n.y,e.y);return Math.sqrt(t**2+r**2)}class zb{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=zh(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,b=mN(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!b)return;const{point:S}=y,{timestamp:E}=Sn;this.history.push({...S,timestamp:E});const{onStart:_,onMove:T}=this.handlers;x||(_&&_(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,y)},this.handlePointerMove=(y,x)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Uh(x,this.transformPagePoint),Rt.update(this.updatePoint,!0)},this.handlePointerUp=(y,x)=>{this.end();const{onEnd:b,onSessionEnd:S,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=zh(y.type==="pointercancel"?this.lastMoveEventInfo:Uh(x,this.transformPagePoint),this.history);this.startEvent&&b&&b(y,_),S&&S(y,_)},!C1(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const c=jl(e),f=Uh(c,this.transformPagePoint),{point:d}=f,{timestamp:p}=Sn;this.history=[{...d,timestamp:p}];const{onSessionStart:g}=t;g&&g(e,zh(f,this.history)),this.removeListeners=Il(pl(this.contextWindow,"pointermove",this.handlePointerMove),pl(this.contextWindow,"pointerup",this.handlePointerUp),pl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Yi(this.updatePoint)}}function Uh(n,e){return e?{point:e(n.point)}:n}function Ix(n,e){return{x:n.x-e.x,y:n.y-e.y}}function zh({point:n},e){return{point:n,delta:Ix(n,Vb(e)),offset:Ix(n,yN(e)),velocity:xN(e,.1)}}function yN(n){return n[0]}function Vb(n){return n[n.length-1]}function xN(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=Vb(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>zr(e)));)t--;if(!r)return{x:0,y:0};const a=Vr(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function wN(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Mt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Mt(t,n,r.max):Math.min(n,t)),n}function kx(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function bN(n,{top:e,left:t,bottom:r,right:i}){return{x:kx(n.x,t,i),y:kx(n.y,e,r)}}function Mx(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function _N(n,e){return{x:Mx(n.x,e.x),y:Mx(n.y,e.y)}}function SN(n,e){let t=.5;const r=Bn(n),i=Bn(e);return i>r?t=xl(e.min,e.max-r,n.min):r>i&&(t=xl(n.min,n.max-i,e.min)),fi(0,1,t)}function EN(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const B0=.35;function AN(n=B0){return n===!1?n=0:n===!0&&(n=B0),{x:jx(n,"left","right"),y:jx(n,"top","bottom")}}function jx(n,e,t){return{min:Px(n,e),max:Px(n,t)}}function Px(n,e){return typeof n=="number"?n:n[e]||0}const CN=new WeakMap;class TN{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(jl(g).point)},s=(g,y)=>{const{drag:x,dragPropagation:b,onDragStart:S}=this.getProps();if(x&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=j5(x),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pr(_=>{let T=this.getAxisMotionValue(_).get()||0;if(Hr.test(T)){const{projection:C}=this.visualElement;if(C&&C.layout){const O=C.layout.layoutBox[_];O&&(T=Bn(O)*(parseFloat(T)/100))}}this.originPoint[_]=T}),S&&Rt.postRender(()=>S(g,y)),j0(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y;const{dragPropagation:x,dragDirectionLock:b,onDirectionLock:S,onDrag:E}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:_}=y;if(b&&this.currentDirection===null){this.currentDirection=ON(_),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",y.point,_),this.updateAxis("y",y.point,_),this.visualElement.render(),E&&E(g,y)},f=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y,this.stop(g,y),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>pr(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new zb(e,{onSessionStart:a,onStart:s,onMove:c,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:Ub(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:c}=this.getProps();c&&Rt.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!fu(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=wN(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Bo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=bN(r.layoutBox,e):this.constraints=!1,this.elastic=AN(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&pr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=EN(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Bo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=RD(r,i.root,this.visualElement.getTransformPagePoint());let s=_N(i.layout.layoutBox,a);if(t){const c=t(CD(s));this.hasMutatedConstraints=!!c,c&&(s=Ab(c))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},d=pr(p=>{if(!fu(p,t,this.currentDirection))return;let g=f&&f[p]||{};s&&(g={min:0,max:0});const y=i?200:1e6,x=i?40:1e7,b={type:"inertia",velocity:r?e[p]:0,bounceStiffness:y,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,b)});return Promise.all(d).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return j0(this.visualElement,e),r.start(P1(e,r,0,t,this.visualElement,!1))}stopAnimation(){pr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){pr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){pr(t=>{const{drag:r}=this.getProps();if(!fu(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:s,max:c}=i.layout.layoutBox[t];a.set(e[t]-Mt(s,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Bo(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};pr(s=>{const c=this.getAxisMotionValue(s);if(c&&this.constraints!==!1){const f=c.get();i[s]=SN({min:f,max:f},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),pr(s=>{if(!fu(s,e,null))return;const c=this.getAxisMotionValue(s),{min:f,max:d}=this.constraints[s];c.set(Mt(f,d,i[s]))})}addListeners(){if(!this.visualElement.current)return;CN.set(this.visualElement,this);const e=this.visualElement.current,t=pl(e,"pointerdown",f=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Bo(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Rt.read(r);const s=El(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(pr(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=f[p].translate,g.set(g.get()+f[p].translate))}),this.visualElement.render())}));return()=>{s(),t(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=B0,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:c}}}function fu(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function ON(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class RN extends Qi{constructor(e){super(e),this.removeGroupControls=yr,this.removeListeners=yr,this.controls=new TN(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Bx=n=>(e,t)=>{n&&Rt.postRender(()=>n(e,t))};class DN extends Qi{constructor(){super(...arguments),this.removePointerDownListener=yr}onPointerDown(e){this.session=new zb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ub(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Bx(e),onStart:Bx(t),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Rt.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=pl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const bu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Lx(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const rl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(je.test(n))n=parseFloat(n);else return n;const t=Lx(n,e.target.x),r=Lx(n,e.target.y);return`${t}% ${r}%`}},NN={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Ki.parse(n);if(i.length>5)return r;const a=Ki.createTransformer(n),s=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,f=t.y.scale*e.y;i[0+s]/=c,i[1+s]/=f;const d=Mt(c,f,.5);return typeof i[2+s]=="number"&&(i[2+s]/=d),typeof i[3+s]=="number"&&(i[3+s]/=d),a(i)}};let Vh=!1;class IN extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;eD(kN),a&&(t.group&&t.group.add(a),r&&r.register&&i&&r.register(a),Vh&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),bu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,Vh=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||Rt.postRender(()=>{const c=s.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),A1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;Vh=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Hb(n){const[e,t]=fb(),r=R.useContext(r1);return v.jsx(IN,{...n,layoutGroup:r,switchLayoutGroup:R.useContext(Sb),isPresent:e,safeToRemove:t})}const kN={borderRadius:{...rl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rl,borderTopRightRadius:rl,borderBottomLeftRadius:rl,borderBottomRightRadius:rl,boxShadow:NN};function MN(n,e,t){const r=Rn(n)?n:$o(n);return r.start(P1("",r,e,t)),r.animation}const jN=(n,e)=>n.depth-e.depth;class PN{constructor(){this.children=[],this.isDirty=!1}add(e){o1(this.children,e),this.isDirty=!0}remove(e){s1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jN),this.isDirty=!1,this.children.forEach(e)}}function BN(n,e){const t=$n.now(),r=({timestamp:i})=>{const a=i-t;a>=e&&(Yi(r),n(a-e))};return Rt.setup(r,!0),()=>Yi(r)}const Gb=["TopLeft","TopRight","BottomLeft","BottomRight"],LN=Gb.length,Fx=n=>typeof n=="string"?parseFloat(n):n,Ux=n=>typeof n=="number"||je.test(n);function FN(n,e,t,r,i,a){i?(n.opacity=Mt(0,t.opacity??1,UN(r)),n.opacityExit=Mt(e.opacity??1,0,zN(r))):a&&(n.opacity=Mt(e.opacity??1,t.opacity??1,r));for(let s=0;s<LN;s++){const c=`border${Gb[s]}Radius`;let f=zx(e,c),d=zx(t,c);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||Ux(f)===Ux(d)?(n[c]=Math.max(Mt(Fx(f),Fx(d),r),0),(Hr.test(d)||Hr.test(f))&&(n[c]+="%")):n[c]=d}(e.rotate||t.rotate)&&(n.rotate=Mt(e.rotate||0,t.rotate||0,r))}function zx(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const UN=$b(0,.5,Nw),zN=$b(.5,.95,yr);function $b(n,e,t){return r=>r<n?0:r>e?1:t(xl(n,e,r))}function Vx(n,e){n.min=e.min,n.max=e.max}function dr(n,e){Vx(n.x,e.x),Vx(n.y,e.y)}function Hx(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Gx(n,e,t,r,i){return n-=e,n=ju(n,1/t,r),i!==void 0&&(n=ju(n,1/i,r)),n}function VN(n,e=0,t=1,r=.5,i,a=n,s=n){if(Hr.test(e)&&(e=parseFloat(e),e=Mt(s.min,s.max,e/100)-s.min),typeof e!="number")return;let c=Mt(a.min,a.max,r);n===a&&(c-=e),n.min=Gx(n.min,e,t,c,i),n.max=Gx(n.max,e,t,c,i)}function $x(n,e,[t,r,i],a,s){VN(n,e[t],e[r],e[i],e.scale,a,s)}const HN=["x","scaleX","originX"],GN=["y","scaleY","originY"];function qx(n,e,t,r){$x(n.x,e,HN,t?t.x:void 0,r?r.x:void 0),$x(n.y,e,GN,t?t.y:void 0,r?r.y:void 0)}function Wx(n){return n.translate===0&&n.scale===1}function qb(n){return Wx(n.x)&&Wx(n.y)}function Xx(n,e){return n.min===e.min&&n.max===e.max}function $N(n,e){return Xx(n.x,e.x)&&Xx(n.y,e.y)}function Yx(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function Wb(n,e){return Yx(n.x,e.x)&&Yx(n.y,e.y)}function Kx(n){return Bn(n.x)/Bn(n.y)}function Zx(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class qN{constructor(){this.members=[]}add(e){o1(this.members,e),e.scheduleRender()}remove(e){if(s1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function WN(n,e,t){let r="";const i=n.x.translate/e.x,a=n.y.translate/e.y,s=t?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:p,rotateX:g,rotateY:y,skewX:x,skewY:b}=t;d&&(r=`perspective(${d}px) ${r}`),p&&(r+=`rotate(${p}deg) `),g&&(r+=`rotateX(${g}deg) `),y&&(r+=`rotateY(${y}deg) `),x&&(r+=`skewX(${x}deg) `),b&&(r+=`skewY(${b}deg) `)}const c=n.x.scale*e.x,f=n.y.scale*e.y;return(c!==1||f!==1)&&(r+=`scale(${c}, ${f})`),r||"none"}const Hh=["","X","Y","Z"],XN=1e3;let YN=0;function Gh(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function Xb(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=kb(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Rt,!(i||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&Xb(r)}function Yb({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},c=e?.()){this.id=YN++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(QN),this.nodes.forEach(nI),this.nodes.forEach(rI),this.nodes.forEach(JN)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new PN)}addEventListener(s,c){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new u1),this.eventHandlers.get(s).add(c)}notifyListeners(s,...c){const f=this.eventHandlers.get(s);f&&f.notify(...c)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=ub(s)&&!z5(s),this.instance=s;const{layoutId:c,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),n){let p,g=0;const y=()=>this.root.updateBlockedByResize=!1;Rt.read(()=>{g=window.innerWidth}),n(s,()=>{const x=window.innerWidth;x!==g&&(g=x,this.root.updateBlockedByResize=!0,p&&p(),p=BN(y,250),bu.hasAnimatedSinceResize&&(bu.hasAnimatedSinceResize=!1,this.nodes.forEach(e2)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||f)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:y,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||d.getDefaultTransition()||lI,{onLayoutAnimationStart:S,onLayoutAnimationComplete:E}=d.getProps(),_=!this.targetLayout||!Wb(this.targetLayout,x),T=!g&&y;if(this.options.layoutRoot||this.resumeFrom||T||g&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...S1(b,"layout"),onPlay:S,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(p,T)}else g||e2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Yi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iI),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Xb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Qx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Jx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(tI),this.nodes.forEach(KN),this.nodes.forEach(ZN)):this.nodes.forEach(Jx),this.clearAllSnapshots();const c=$n.now();Sn.delta=fi(0,1e3/60,c-Sn.timestamp),Sn.timestamp=c,Sn.isProcessing=!0,Ih.update.process(Sn),Ih.preRender.process(Sn),Ih.render.process(Sn),Sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,A1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(eI),this.sharedNodes.forEach(aI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Rt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Rt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bn(this.snapshot.measuredBox.x)&&!Bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Vt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(c=!1),c&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!qb(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;s&&this.instance&&(c||Sa(this.latestValues)||p)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return s&&(f=this.removeTransform(f)),cI(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Vt();const c=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(uI))){const{scroll:d}=this.root;d&&(Lo(c.x,d.offset.x),Lo(c.y,d.offset.y))}return c}removeElementScroll(s){const c=Vt();if(dr(c,s),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:p,options:g}=d;d!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&dr(c,s),Lo(c.x,p.offset.x),Lo(c.y,p.offset.y))}return c}applyTransform(s,c=!1){const f=Vt();dr(f,s);for(let d=0;d<this.path.length;d++){const p=this.path[d];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Fo(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Sa(p.latestValues)&&Fo(f,p.latestValues)}return Sa(this.latestValues)&&Fo(f,this.latestValues),f}removeTransform(s){const c=Vt();dr(c,s);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!Sa(d.latestValues))continue;N0(d.latestValues)&&d.updateSnapshot();const p=Vt(),g=d.measurePageBox();dr(p,g),qx(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return Sa(this.latestValues)&&qx(c,this.latestValues),c}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(s||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=Sn.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vt(),this.relativeTargetOrigin=Vt(),vl(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Vt(),this.targetWithTransforms=Vt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dr(this.target,this.layout.layoutBox),Tb(this.target,this.targetDelta)):dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vt(),this.relativeTargetOrigin=Vt(),vl(this.relativeTargetOrigin,this.target,y.target),dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||N0(this.parent.latestValues)||Cb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),c=!!this.resumingFrom||this!==s;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Sn.timestamp&&(f=!1),f)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;dr(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;OD(this.layoutCorrected,this.treeScale,this.path,c),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Vt());const{target:x}=s;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Hx(this.prevProjectionDelta.x,this.projectionDelta.x),Hx(this.prevProjectionDelta.y,this.projectionDelta.y)),gl(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!Zx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Zx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Uo(),this.projectionDelta=Uo(),this.projectionDeltaWithTransform=Uo()}setAnimationOrigin(s,c=!1){const f=this.snapshot,d=f?f.latestValues:{},p={...this.latestValues},g=Uo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=Vt(),x=f?f.source:void 0,b=this.layout?this.layout.source:void 0,S=x!==b,E=this.getStack(),_=!E||E.members.length<=1,T=!!(S&&!_&&this.options.crossfade===!0&&!this.path.some(sI));this.animationProgress=0;let C;this.mixTargetDelta=O=>{const D=O/1e3;t2(g.x,s.x,D),t2(g.y,s.y,D),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vl(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oI(this.relativeTarget,this.relativeTargetOrigin,y,D),C&&$N(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=Vt()),dr(C,this.relativeTarget)),S&&(this.animationValues=p,FN(p,d,this.latestValues,D,T,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Yi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Rt.update(()=>{bu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=$o(0)),this.currentAnimation=MN(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),s.onUpdate&&s.onUpdate(c)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:c,target:f,layout:d,latestValues:p}=s;if(!(!c||!f||!d)){if(this!==s&&this.layout&&d&&Kb(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||Vt();const g=Bn(this.layout.layoutBox.x);f.x.min=s.target.x.min,f.x.max=f.x.min+g;const y=Bn(this.layout.layoutBox.y);f.y.min=s.target.y.min,f.y.max=f.y.min+y}dr(c,f),Fo(c,p),gl(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(s,c){this.sharedNodes.has(s)||this.sharedNodes.set(s,new qN),this.sharedNodes.get(s).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:c,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),s&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let c=!1;const{latestValues:f}=s;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const d={};f.z&&Gh("z",s,d,this.animationValues);for(let p=0;p<Hh.length;p++)Gh(`rotate${Hh[p]}`,s,d,this.animationValues),Gh(`skew${Hh[p]}`,s,d,this.animationValues);s.render();for(const p in d)s.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);s.scheduleRender()}applyProjectionStyles(s,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=wu(c?.pointerEvents)||"",s.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=wu(c?.pointerEvents)||""),this.hasProjected&&!Sa(this.latestValues)&&(s.transform=f?f({},""):"none",this.hasProjected=!1);return}s.visibility="";const p=d.animationValues||d.latestValues;this.applyTransformsToTarget();let g=WN(this.projectionDeltaWithTransform,this.treeScale,p);f&&(g=f(p,g)),s.transform=g;const{x:y,y:x}=this.projectionDelta;s.transformOrigin=`${y.origin*100}% ${x.origin*100}% 0`,d.animationValues?s.opacity=d===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:s.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in Sl){if(p[b]===void 0)continue;const{correct:S,applyTo:E,isCSSVariable:_}=Sl[b],T=g==="none"?p[b]:S(p[b],d);if(E){const C=E.length;for(let O=0;O<C;O++)s[E[O]]=T}else _?this.options.visualElement.renderState.vars[b]=T:s[b]=T}this.options.layoutId&&(s.pointerEvents=d===this?wu(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(Qx),this.root.sharedNodes.clear()}}}function KN(n){n.updateLayout()}function ZN(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,a=e.source!==n.layout.source;i==="size"?pr(p=>{const g=a?e.measuredBox[p]:e.layoutBox[p],y=Bn(g);g.min=t[p].min,g.max=g.min+y}):Kb(i,e.layoutBox,t)&&pr(p=>{const g=a?e.measuredBox[p]:e.layoutBox[p],y=Bn(t[p]);g.max=g.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+y)});const s=Uo();gl(s,t,e.layoutBox);const c=Uo();a?gl(c,n.applyTransform(r,!0),e.measuredBox):gl(c,t,e.layoutBox);const f=!qb(s);let d=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:y}=p;if(g&&y){const x=Vt();vl(x,e.layoutBox,g.layoutBox);const b=Vt();vl(b,t,y.layoutBox),Wb(x,b)||(d=!0),p.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=x,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:s,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function QN(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function JN(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function eI(n){n.clearSnapshot()}function Qx(n){n.clearMeasurements()}function Jx(n){n.isLayoutDirty=!1}function tI(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function e2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function nI(n){n.resolveTargetDelta()}function rI(n){n.calcProjection()}function iI(n){n.resetSkewAndRotation()}function aI(n){n.removeLeadSnapshot()}function t2(n,e,t){n.translate=Mt(e.translate,0,t),n.scale=Mt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function n2(n,e,t,r){n.min=Mt(e.min,t.min,r),n.max=Mt(e.max,t.max,r)}function oI(n,e,t,r){n2(n.x,e.x,t.x,r),n2(n.y,e.y,t.y,r)}function sI(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const lI={duration:.45,ease:[.4,0,.1,1]},r2=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),i2=r2("applewebkit/")&&!r2("chrome/")?Math.round:yr;function a2(n){n.min=i2(n.min),n.max=i2(n.max)}function cI(n){a2(n.x),a2(n.y)}function Kb(n,e,t){return n==="position"||n==="preserve-aspect"&&!gN(Kx(e),Kx(t),.2)}function uI(n){return n!==n.root&&n.scroll?.wasRoot}const fI=Yb({attachResizeListener:(n,e)=>El(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$h={current:void 0},Zb=Yb({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!$h.current){const n=new fI({});n.mount(window),n.setOptions({layoutScroll:!0}),$h.current=n}return $h.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),dI={pan:{Feature:DN},drag:{Feature:RN,ProjectionNode:Zb,MeasureLayout:Hb}};function o2(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=r[i];a&&Rt.postRender(()=>a(e,jl(e)))}class hI extends Qi{mount(){const{current:e}=this.node;e&&(this.unmount=P5(e,(t,r)=>(o2(this.node,r,"Start"),i=>o2(this.node,i,"End"))))}unmount(){}}class pI extends Qi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Il(El(this.node.current,"focus",()=>this.onFocus()),El(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function s2(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=r[i];a&&Rt.postRender(()=>a(e,jl(e)))}class gI extends Qi{mount(){const{current:e}=this.node;e&&(this.unmount=U5(e,(t,r)=>(s2(this.node,r,"Start"),(i,{success:a})=>s2(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const L0=new WeakMap,qh=new WeakMap,vI=n=>{const e=L0.get(n.target);e&&e(n)},mI=n=>{n.forEach(vI)};function yI({root:n,...e}){const t=n||document;qh.has(t)||qh.set(t,{});const r=qh.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(mI,{root:n,...e})),r[i]}function xI(n,e,t){const r=yI(e);return L0.set(n,t),r.observe(n),()=>{L0.delete(n),r.unobserve(n)}}const wI={some:0,all:1};class bI extends Qi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:a}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:wI[i]},c=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=d?p:g;y&&y(f)};return xI(this.node.current,s,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(_I(e,t))&&this.startObserver()}unmount(){}}function _I({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const SI={inView:{Feature:bI},tap:{Feature:gI},focus:{Feature:pI},hover:{Feature:hI}},EI={layout:{ProjectionNode:Zb,MeasureLayout:Hb}},AI={...cN,...SI,...dI,...EI},Ve=AD(AI,LD),CI=()=>{const{status:n,loading:e,updating:t,toggleStatus:r}=xw(),[i,a]=R.useState({show:!1,message:"",type:"success"}),s=(d,p="success")=>{a({show:!0,message:d,type:p}),setTimeout(()=>{a({show:!1,message:"",type:"success"})},3e3)},c=async()=>{try{const d=n==="open"?"closed":"open";await r(),s(`Canteen ${d==="open"?"opened":"closed"} successfully!`)}catch(d){console.error("Toggle failed:",d),s("Failed to update canteen status. Please try again.","error")}},f=n==="open";return e?v.jsxs("div",{style:Xt.container,children:[v.jsx("div",{style:Xt.loadingSpinner}),v.jsx("span",{style:Xt.loadingText,children:"Loading..."})]}):v.jsxs(v.Fragment,{children:[v.jsxs(Ve.button,{onClick:c,disabled:t,style:{...Xt.toggleContainer,...f?Xt.containerOpen:Xt.containerClosed,...t&&Xt.containerDisabled},whileHover:t?{}:{scale:1.02},whileTap:t?{}:{scale:.98},transition:{duration:.2},children:[v.jsx(Ve.div,{style:Xt.iconWrapper,animate:{rotate:f?0:180},transition:{type:"spring",stiffness:200,damping:20},children:f?v.jsx(FO,{style:Xt.icon,strokeWidth:2.5}):v.jsx(mw,{style:Xt.icon,strokeWidth:2.5})}),v.jsxs("div",{style:Xt.textContent,children:[v.jsx("span",{style:Xt.statusLabel,children:"Status"}),v.jsx("span",{style:Xt.statusText,children:f?"Open":"Closed"})]}),v.jsx(Ve.div,{style:{...Xt.indicator,...f?Xt.indicatorOpen:Xt.indicatorClosed},animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),v.jsx(Dn,{children:i.show&&v.jsx(Ve.div,{style:Xt.toastContainer,initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3},children:v.jsx("div",{style:{...Xt.toast,...i.type==="success"?Xt.toastSuccess:Xt.toastError},children:i.message})})})]})},Xt={container:{display:"flex",alignItems:"center",gap:"12px",padding:"8px 16px",background:"white",border:"1px solid #e5e7eb",borderRadius:"12px"},loadingSpinner:{width:"16px",height:"16px",border:"2px solid #e5e7eb",borderTop:"2px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"},loadingText:{fontSize:"14px",fontWeight:"500",color:"#6b7280"},toggleContainer:{display:"flex",alignItems:"center",gap:"16px",padding:"12px 20px",border:"2px solid",borderRadius:"12px",background:"white",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)",position:"relative",overflow:"hidden"},containerOpen:{borderColor:"#10b981",background:"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)"},containerClosed:{borderColor:"#ef4444",background:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)"},containerDisabled:{opacity:.6,cursor:"not-allowed"},iconWrapper:{display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:"10px",background:"white",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.1)"},icon:{width:"24px",height:"24px",color:"#1f2937"},textContent:{display:"flex",flexDirection:"column",gap:"2px",flex:1},statusLabel:{fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",color:"#6b7280"},statusText:{fontSize:"16px",fontWeight:"700",color:"#111827",lineHeight:"1"},indicator:{width:"10px",height:"10px",borderRadius:"50%",boxShadow:"0 0 10px"},indicatorOpen:{background:"#10b981",boxShadow:"0 0 10px rgba(16, 185, 129, 0.6)"},indicatorClosed:{background:"#ef4444",boxShadow:"0 0 10px rgba(239, 68, 68, 0.6)"},toastContainer:{position:"fixed",bottom:"20px",right:"20px",zIndex:9999},toast:{padding:"16px 24px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",color:"white",fontSize:"14px",fontWeight:"600"},toastSuccess:{background:"linear-gradient(135deg, #10b981, #059669)"},toastError:{background:"linear-gradient(135deg, #ef4444, #dc2626)"}},TI=()=>{const[n,e]=R.useState([]),[t,r]=R.useState(!0),[i,a]=R.useState(new Set),[s,c]=R.useState({}),[f,d]=R.useState({}),[p,g]=R.useState(null),y=_=>!_||typeof _!="string"?"":_.toLowerCase().replace(/[^a-z0-9]+/g," ").trim().replace(/\s+/g," "),x=async()=>{try{r(!0);const{data:_,error:T}=await me.from("food_items").select("id, name, price, available_quantity, pending_deliver_count");if(T)throw console.error("Food items error:",T),T;const C=(_||[]).map(D=>({...D,pendingCount:D.pending_deliver_count||0}));C.sort((D,j)=>j.pendingCount!==D.pendingCount?j.pendingCount-D.pendingCount:D.name.localeCompare(j.name)),console.log("🍽️ Food items with counts (sorted by priority):",C.map(D=>({name:D.name,pendingCount:D.pendingCount}))),e(C);const O={};C.forEach(D=>{O[D.id]=""}),c(O)}catch(_){console.error("Error fetching food items:",_),E("Error loading food items","error")}finally{r(!1)}},b=(_,T)=>{const C=n.find(D=>D.id===_),O=parseInt(T)||0;d(D=>{const j={...D};return delete j[_],j}),T!==""&&(O<0||O>C.pendingCount)&&d(D=>({...D,[_]:`Must be between 0 and ${C.pendingCount}`})),c(D=>({...D,[_]:T}))},S=async _=>{const T=n.find(O=>O.id===_),C=parseInt(s[_])||0;if(C<=0||C>T.pendingCount){d(O=>({...O,[_]:`Must be between 1 and ${T.pendingCount}`}));return}try{a(de=>new Set([...de,_])),console.log(`
🔍 ===== MARKING ORDERS READY =====`),console.log(`📋 Food Item: ${T.name} (ID: ${_})`),console.log(`🔢 Ready Count: ${C}`);const{data:O,error:D}=await me.from("order_items").select("order_id, quantity").eq("food_item_id",_);console.log("📦 Order Items Query Result:",{data:O,error:D});let j=[];!D&&O&&O.length>0?(j=[...new Set(O.map(de=>de.order_id).filter(Boolean))],console.log(`✅ Found ${j.length} unique order IDs from order_items:`,j)):console.log(`⚠️ No order_items found for food_item_id: ${_}`);const{data:L,error:H}=await me.from("orders").select("id, order_id, item_name, status, created_at, token_number, order_token, food_item_id").or("status.eq.pending,status.eq.PENDING").order("created_at",{ascending:!0});if(H)throw console.error("❌ Error fetching pending orders:",H),H;console.log(`📥 Total pending orders in database: ${L?.length||0}`),L&&L.length>0&&console.log("🔍 Sample of pending orders:",L.slice(0,3).map(de=>({id:de.id,order_id:de.order_id,item_name:de.item_name,food_item_id:de.food_item_id,token:de.token_number||de.order_token})));const $=(L||[]).filter(de=>{const Se=[];if(j.includes(de.id))return Se.push("order_items.order_id matches orders.id"),!0;if(de.order_id&&j.includes(de.order_id))return Se.push("order_items.order_id matches orders.order_id"),!0;if(de.food_item_id===_)return Se.push("orders.food_item_id matches"),!0;const U=y(de.item_name),F=y(T.name);return U&&U===F?(Se.push("item_name matches (normalized)"),!0):!1});if(console.log(`✅ Matched ${$.length} orders for ${T.name}`),$.length>0&&console.log("📋 Matched orders:",$.map(de=>({id:de.id,order_id:de.order_id,item_name:de.item_name,token:de.token_number||de.order_token,created:de.created_at}))),$.length===0){console.error("❌ No matching orders found!"),console.log("🔍 Debug info:"),console.log(`   - Food item ID: ${_}`),console.log(`   - Food item name: ${T.name}`),console.log(`   - Order IDs from order_items: ${j.length}`),console.log(`   - Total pending orders: ${L?.length||0}`),E(`No pending orders found for ${T.name}`,"error");return}const ne=$.slice(0,C),se=ne.map(de=>de.id).filter(Boolean);if(se.length===0){console.error("❌ No valid order IDs extracted!"),E("No valid order IDs found","error");return}console.log(`🎯 Will mark ${se.length} orders as ready:`),ne.forEach((de,Se)=>{console.log(`   ${Se+1}. ID: ${de.id}, Token: ${de.token_number||de.order_token}, Item: ${de.item_name}`)}),console.log("🔄 Updating orders in database...");const{data:le,error:ue}=await me.from("orders").update({status:"ready",updated_at:new Date().toISOString()}).in("id",se).select();if(ue)throw console.error("❌ Update error:",ue),console.error("❌ Error details:",JSON.stringify(ue,null,2)),ue;console.log("✅ Database update successful!"),console.log("✅ Updated orders:",le),console.log(`===== COMPLETE =====
`),E(`✅ Marked ${se.length} orders as ready for ${T.name}`,"success"),c(de=>({...de,[_]:""})),await x()}catch(O){console.error("❌ FATAL ERROR in markOrdersReady:",O),console.error("❌ Error stack:",O.stack),E(`Error: ${O.message||"Failed to update orders"}`,"error")}finally{a(O=>{const D=new Set(O);return D.delete(_),D})}},E=(_,T="success")=>{g({message:_,type:T}),setTimeout(()=>g(null),3e3)};return R.useEffect(()=>{x()},[]),t?v.jsx("div",{className:"home-dashboard",children:v.jsxs("div",{className:"card",children:[v.jsx("div",{className:"card-title",children:"Manage Orders"}),v.jsxs("div",{className:"flex items-center justify-center py-12",children:[v.jsx(Xi,{className:"w-8 h-8 animate-spin text-primary-500"}),v.jsx("span",{className:"ml-3 text-muted",children:"Loading food items..."})]})]})}):v.jsxs("div",{className:"home-dashboard",children:[v.jsxs("div",{className:"card",children:[v.jsx("div",{className:"card-title",children:"Manage Orders"}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("div",{className:"muted",children:"Mark orders as ready for each food item"}),v.jsxs("button",{onClick:x,disabled:t,className:"btn btn-primary",children:[v.jsx(SO,{className:`w-4 h-4 mr-2 ${t?"animate-spin":""}`}),"Refresh"]})]})]}),v.jsx("div",{className:"food-items-grid",children:n.map(_=>v.jsxs(Ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"card compact-card",children:[v.jsxs("div",{className:"card-header",children:[v.jsx("h3",{className:"food-item-name",children:_.name}),v.jsxs("span",{className:"pending-badge",children:[_.pendingCount," pending"]})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:"Orders Ready"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"number",min:"0",max:_.pendingCount,value:s[_.id]||"",onChange:T=>b(_.id,T.target.value),placeholder:"0",className:"flex-1 input",disabled:_.pendingCount===0||i.has(_.id)}),v.jsx("button",{onClick:()=>S(_.id),disabled:_.pendingCount===0||i.has(_.id)||!s[_.id]||f[_.id],className:"btn btn-success",children:i.has(_.id)?v.jsx(Xi,{className:"w-4 h-4 animate-spin"}):v.jsx(Go,{className:"w-4 h-4"})})]})]}),v.jsx(Dn,{children:f[_.id]&&v.jsxs(Ve.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center text-sm text-red-500",children:[v.jsx(vr,{className:"w-4 h-4 mr-1"}),f[_.id]]})})]})]},_.id))}),v.jsx(Dn,{children:p&&v.jsx(Ve.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg z-50 ${p.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:v.jsxs("div",{className:"flex items-center",children:[p.type==="success"?v.jsx(Go,{className:"w-5 h-5 mr-2"}):v.jsx(vr,{className:"w-5 h-5 mr-2"}),p.message]})})})]})},OI=()=>v.jsx("div",{className:"home-dashboard",children:v.jsx("div",{className:"dashboard-content",children:v.jsx(Ve.div,{className:"card coming-soon-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:v.jsxs("div",{className:"coming-soon-content",children:[v.jsx(Ve.div,{className:"coming-soon-icon",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:"🚀"}),v.jsx("h2",{className:"coming-soon-title",children:"Pre-Order Feature"}),v.jsx("p",{className:"coming-soon-description",children:"We're working on an exciting pre-order system that will allow you to reserve your favorite meals in advance. Stay tuned for updates!"}),v.jsx("div",{className:"coming-soon-status",children:v.jsxs("div",{className:"status-indicator",children:[v.jsx(Xi,{className:"w-4 h-4 animate-spin"}),v.jsx("span",{children:"In Development"})]})}),v.jsxs("div",{className:"features-preview",children:[v.jsx("h3",{className:"features-title",children:"What to Expect:"}),v.jsxs("div",{className:"features-list",children:[v.jsxs("div",{className:"feature-item",children:[v.jsx(oO,{className:"w-5 h-5 text-primary"}),v.jsx("span",{children:"Schedule orders in advance"})]}),v.jsxs("div",{className:"feature-item",children:[v.jsx(xO,{className:"w-5 h-5 text-primary"}),v.jsx("span",{children:"Pickup time slots"})]})]})]})]})})})}),RI=({isOpen:n,onClose:e,onItemRestored:t})=>{const[r,i]=R.useState([]),[a,s]=R.useState(!1),[c,f]=R.useState(new Set),[d,p]=R.useState(null),[g,y]=R.useState(null),[x,b]=R.useState(null),S=async()=>{try{s(!0);const{data:D,error:j}=await me.from("food_items").select("*").eq("is_active",!1).order("name");if(j){console.error("Error fetching removed items:",j),O("Failed to load removed items","error");return}i(D||[])}catch(D){console.error("Error fetching removed items:",D),O("Failed to load removed items","error")}finally{s(!1)}},E=(D,j)=>{b({itemId:D,itemName:j})},_=async(D,j)=>{try{f(H=>new Set([...H,D])),b(null);const{error:L}=await me.from("food_items").update({is_active:!0}).eq("id",D);if(L){console.error("Error restoring item:",L),O(`Failed to restore ${j}`,"error");return}O(`${j} has been restored successfully!`,"success"),await S(),t&&t()}catch(L){console.error("Error restoring item:",L),O(`Failed to restore ${j}`,"error")}finally{f(L=>{const H=new Set(L);return H.delete(D),H})}},T=(D,j)=>{y({itemId:D,itemName:j})},C=async(D,j)=>{try{f(H=>new Set([...H,D])),y(null);const{error:L}=await me.from("food_items").delete().eq("id",D);if(L){console.error("Error permanently deleting item:",L),O(`Failed to delete ${j}`,"error");return}O(`${j} has been permanently deleted`,"success"),await S(),t&&t()}catch(L){console.error("Error permanently deleting item:",L),O(`Failed to delete ${j}`,"error")}finally{f(L=>{const H=new Set(L);return H.delete(D),H})}},O=(D,j="success")=>{p({message:D,type:j}),setTimeout(()=>p(null),3e3)};return R.useEffect(()=>{n&&S()},[n]),R.useEffect(()=>{const D=j=>{j.key==="Escape"&&e()};if(n)return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[n,e]),v.jsx(Dn,{children:n&&v.jsxs(v.Fragment,{children:[v.jsx(Ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999}}),v.jsxs(Ve.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:{position:"fixed",right:0,top:0,height:"100vh",width:"400px",backgroundColor:"#ffffff",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.3)",zIndex:1e3,display:"flex",flexDirection:"column",opacity:1},className:"dark:!bg-gray-800",children:[v.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:!bg-gray-900",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",backgroundColor:"#f9fafb"},children:[v.jsxs("div",{children:[v.jsx("h2",{className:"dark:!text-white",style:{fontSize:"20px",fontWeight:"600",margin:0,color:"#111827"},children:"Removed Items"}),v.jsxs("p",{className:"dark:!text-gray-300",style:{fontSize:"14px",marginTop:"4px",color:"#6b7280"},children:[r.length," item",r.length!==1?"s":""," removed"]})]}),v.jsx("button",{onClick:e,className:"hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",style:{padding:"8px",borderRadius:"8px",border:"none",cursor:"pointer",background:"transparent"},children:v.jsx(mn,{size:20,className:"dark:!text-gray-300",style:{color:"#6b7280"}})})]}),v.jsx("div",{className:"bg-white dark:!bg-gray-800",style:{flex:1,overflowY:"auto",padding:"24px",backgroundColor:"#ffffff"},children:a?v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"48px 0"},children:[v.jsx(Xi,{style:{width:"32px",height:"32px",color:"#3b82f6"},className:"animate-spin"}),v.jsx("span",{className:"dark:!text-gray-300",style:{marginLeft:"12px",color:"#6b7280"},children:"Loading removed items..."})]}):r.length===0?v.jsxs("div",{style:{textAlign:"center",padding:"48px 0"},children:[v.jsx("div",{className:"dark:!text-gray-400",style:{marginBottom:"16px",color:"#9ca3af"},children:v.jsx(vr,{size:48,style:{margin:"0 auto"}})}),v.jsx("h3",{className:"dark:!text-white",style:{fontSize:"18px",fontWeight:"500",marginBottom:"8px",color:"#111827"},children:"No Removed Items"}),v.jsx("p",{className:"dark:!text-gray-300",style:{color:"#6b7280"},children:"All items are currently active in your inventory."})]}):v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:r.map(D=>v.jsx(Ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-gray-50 dark:!bg-gray-700 border border-gray-200 dark:border-gray-600",style:{borderRadius:"12px",padding:"16px",backgroundColor:"#f9fafb"},children:v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[v.jsxs("div",{style:{flex:1},children:[v.jsx("h4",{className:"dark:!text-white",style:{fontWeight:"500",marginBottom:"4px",color:"#111827"},children:D.name}),v.jsxs("p",{className:"dark:!text-gray-300",style:{fontSize:"14px",marginTop:"4px",color:"#6b7280"},children:["Price: ₹",D.price||D.cost||"N/A"]}),D.description&&v.jsx("p",{className:"dark:!text-gray-400",style:{fontSize:"12px",marginTop:"4px",color:"#9ca3af"},children:D.description})]}),v.jsxs("div",{style:{display:"flex",gap:"8px"},children:[v.jsxs("button",{onClick:()=>E(D.id,D.name),disabled:c.has(D.id),style:{flex:1,padding:"8px 12px",backgroundColor:c.has(D.id)?"#d1d5db":"#10b981",color:"#ffffff",fontSize:"14px",borderRadius:"8px",border:"none",cursor:c.has(D.id)?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500"},onMouseEnter:j=>{c.has(D.id)||(j.currentTarget.style.backgroundColor="#059669")},onMouseLeave:j=>{c.has(D.id)||(j.currentTarget.style.backgroundColor="#10b981")},children:[c.has(D.id)?v.jsx(Xi,{size:16,className:"animate-spin",style:{color:"#ffffff"}}):v.jsx(ou,{size:16,style:{color:"#ffffff"}}),v.jsx("span",{style:{color:"#ffffff"},children:c.has(D.id)?"Restoring...":"Add Back"})]}),v.jsxs("button",{onClick:()=>T(D.id,D.name),disabled:c.has(D.id),style:{flex:1,padding:"8px 12px",backgroundColor:c.has(D.id)?"#d1d5db":"#ef4444",color:"#ffffff",fontSize:"14px",borderRadius:"8px",border:"none",cursor:c.has(D.id)?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500"},onMouseEnter:j=>{c.has(D.id)||(j.currentTarget.style.backgroundColor="#dc2626")},onMouseLeave:j=>{c.has(D.id)||(j.currentTarget.style.backgroundColor="#ef4444")},children:[v.jsx(mn,{size:16,style:{color:"#ffffff"}}),v.jsx("span",{style:{color:"#ffffff"},children:"Delete"})]})]})]})},D.id))})}),v.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-white dark:!bg-gray-800",style:{padding:"24px",backgroundColor:"#ffffff"},children:v.jsxs("button",{onClick:S,disabled:a,className:"bg-gray-100 hover:bg-gray-200 dark:!bg-gray-700 dark:hover:!bg-gray-600 dark:!text-gray-200 transition-colors",style:{width:"100%",padding:"10px 16px",borderRadius:"8px",border:"none",cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:[v.jsx(ou,{size:16,className:`${a?"animate-spin":""} dark:!text-gray-200`,style:{color:"#374151"}}),v.jsx("span",{style:{color:"#374151"},className:"dark:!text-gray-200",children:"Refresh List"})]})})]}),v.jsx(Dn,{children:g&&v.jsxs(v.Fragment,{children:[v.jsx(Ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>y(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),v.jsxs(Ve.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:D=>D.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[v.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:v.jsx(vr,{size:24,style:{color:"#dc2626"}})}),v.jsx("div",{children:v.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Permanently Delete Item?"})})]}),v.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["Are you sure you want to permanently delete ",v.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',g.itemName,'"']}),"? This action cannot be undone and the item will be removed from the database."]}),v.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:()=>y(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},className:"dark:!bg-gray-700 dark:!text-gray-200",onMouseEnter:D=>{D.target.style.backgroundColor="#e5e7eb"},onMouseLeave:D=>{D.target.style.backgroundColor="#f3f4f6"},children:"Cancel"}),v.jsxs("button",{onClick:()=>C(g.itemId,g.itemName),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#dc2626",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:D=>{D.target.style.backgroundColor="#b91c1c"},onMouseLeave:D=>{D.target.style.backgroundColor="#dc2626"},children:[v.jsx(mn,{size:16}),"Delete Permanently"]})]})]})]})}),v.jsx(Dn,{children:x&&v.jsxs(v.Fragment,{children:[v.jsx(Ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>b(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),v.jsxs(Ve.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:D=>D.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[v.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#d1fae5",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:v.jsx(ou,{size:24,style:{color:"#059669"}})}),v.jsx("div",{children:v.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Restore Item?"})})]}),v.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["Are you sure you want to restore ",v.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',x.itemName,'"']})," back to the active inventory? This item will be available for ordering again."]}),v.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:()=>b(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},className:"dark:!bg-gray-700 dark:!text-gray-200",onMouseEnter:D=>{D.target.style.backgroundColor="#e5e7eb"},onMouseLeave:D=>{D.target.style.backgroundColor="#f3f4f6"},children:"Cancel"}),v.jsxs("button",{onClick:()=>_(x.itemId,x.itemName),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#10b981",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:D=>{D.target.style.backgroundColor="#059669"},onMouseLeave:D=>{D.target.style.backgroundColor="#10b981"},children:[v.jsx(ou,{size:16}),"Restore Item"]})]})]})]})}),v.jsx(Dn,{children:d&&v.jsx(Ve.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},style:{position:"fixed",bottom:"20px",right:"20px",padding:"16px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",zIndex:9999,backgroundColor:d.type==="success"?"#10b981":"#ef4444",color:"white"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[d.type==="success"?v.jsx(Go,{style:{width:"20px",height:"20px",marginRight:"8px"}}):v.jsx(vr,{style:{width:"20px",height:"20px",marginRight:"8px"}}),d.message]})})})]})})},l2=({value:n,onChange:e,disabled:t=!1,maxSize:r=10*1024*1024,acceptedTypes:i=["image/jpeg","image/jpg","image/png","image/gif","image/webp"],className:a=""})=>{const[s,c]=R.useState(!1),[f,d]=R.useState(""),p=R.useRef(null),g=_=>{_.preventDefault(),_.stopPropagation(),_.type==="dragenter"||_.type==="dragover"?c(!0):_.type==="dragleave"&&c(!1)},y=_=>{if(_.preventDefault(),_.stopPropagation(),c(!1),t)return;const T=_.dataTransfer.files;T&&T[0]&&b(T[0])},x=_=>{if(t)return;const T=_.target.files?.[0];T&&b(T)},b=_=>{if(d(""),!i.includes(_.type)){d(`Invalid file type. Allowed types: ${i.join(", ")}`);return}if(_.size>r){d(`File too large. Maximum size is ${(r/1024/1024).toFixed(1)}MB`);return}e(_)},S=()=>{e(null),d(""),p.current&&(p.current.value="")},E=_=>{if(_===0)return"0 Bytes";const T=1024,C=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(_)/Math.log(T));return parseFloat((_/Math.pow(T,O)).toFixed(2))+" "+C[O]};return v.jsxs("div",{className:`image-upload-container ${a}`,children:[v.jsx("input",{ref:p,type:"file",accept:i.join(","),onChange:x,style:{display:"none"},disabled:t}),v.jsx("div",{className:`upload-area ${s?"drag-active":""} ${t?"disabled":""}`,onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:y,onClick:()=>!t&&p.current?.click(),children:n?v.jsxs("div",{className:"file-selected",children:[v.jsx("div",{className:"file-preview",children:v.jsx("img",{src:URL.createObjectURL(n),alt:"Preview",className:"preview-image"})}),v.jsxs("div",{className:"file-info",children:[v.jsx("div",{className:"file-name",children:n.name}),v.jsx("div",{className:"file-size",children:E(n.size)})]}),v.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),S()},className:"remove-file-btn",disabled:t,children:v.jsx(mn,{size:16})})]}):v.jsxs("div",{className:"upload-empty",children:[v.jsx("div",{className:"upload-icon",children:v.jsx(pw,{size:32})}),v.jsxs("div",{className:"upload-text",children:[v.jsx("div",{className:"upload-title",children:s?"Drop image here":"Click or drag to upload"}),v.jsxs("div",{className:"upload-subtitle",children:["Supports: JPG, PNG, GIF, WebP (max ",E(r),")"]})]}),v.jsx(MO,{size:20,className:"upload-arrow"})]})}),f&&v.jsxs(Ve.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"upload-error",children:[v.jsx(vr,{size:16}),v.jsx("span",{children:f})]})]})};let er=!1;const DI=(n=800,e=200,t=.3)=>{if(er){console.log("🔇 Beep skipped (already playing)");return}try{er=!0;const r=window.AudioContext||window.webkitAudioContext;if(!r){console.warn("⚠️ Web Audio API not supported");return}const i=new r,a=i.createOscillator(),s=i.createGain();a.connect(s),s.connect(i.destination),a.frequency.setValueAtTime(n,i.currentTime),a.type="sine",s.gain.setValueAtTime(0,i.currentTime),s.gain.linearRampToValueAtTime(t,i.currentTime+.01),s.gain.exponentialRampToValueAtTime(.01,i.currentTime+e/1e3),a.start(i.currentTime),a.stop(i.currentTime+e/1e3),setTimeout(()=>{er=!1},e+100),console.log("🔊 Notification beep played")}catch(r){console.warn("⚠️ Failed to generate notification beep:",r),er=!1}},NI=(n=.3)=>{if(er){console.log("🔇 Double beep skipped (already playing)");return}try{er=!0;const e=window.AudioContext||window.webkitAudioContext,t=new e,r=t.createOscillator(),i=t.createGain();r.connect(i),i.connect(t.destination),r.frequency.setValueAtTime(800,t.currentTime),r.type="sine",i.gain.setValueAtTime(0,t.currentTime),i.gain.linearRampToValueAtTime(n,t.currentTime+.01),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),r.start(t.currentTime),r.stop(t.currentTime+.1),setTimeout(()=>{const a=t.createOscillator(),s=t.createGain();a.connect(s),s.connect(t.destination),a.frequency.setValueAtTime(1e3,t.currentTime),a.type="sine",s.gain.setValueAtTime(0,t.currentTime),s.gain.linearRampToValueAtTime(n,t.currentTime+.01),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.15),a.start(t.currentTime),a.stop(t.currentTime+.15)},150),setTimeout(()=>{er=!1},400),console.log("🔊 Double notification beep played")}catch(e){console.warn("⚠️ Failed to generate double beep:",e),er=!1}},II=(n=.3,e=null)=>{if(er){console.log("🔇 Notification skipped (already playing)");return}try{if(er=!0,!e){const a=window.AudioContext||window.webkitAudioContext;if(!a){console.warn("⚠️ Web Audio API not supported"),er=!1;return}e=new a}const t=[523,659,784],r=[],i=[];t.forEach((a,s)=>{const c=e.createOscillator(),f=e.createGain();c.connect(f),f.connect(e.destination),c.frequency.setValueAtTime(a,e.currentTime),c.type="sine";const d=e.currentTime+s*.02,p=d+.3;f.gain.setValueAtTime(0,d),f.gain.linearRampToValueAtTime(n*.3,d+.01),f.gain.exponentialRampToValueAtTime(.01,p),c.start(d),c.stop(p),r.push(c),i.push(f)}),setTimeout(()=>{er=!1},400),console.log("🔊 Pleasant notification sound played")}catch(t){console.warn("⚠️ Failed to generate pleasant notification:",t),er=!1}};let Wh=null,c2=!1;const Pl=()=>{const n=R.useRef(null),e=R.useRef(!1),t=R.useCallback(async()=>{if(e.current||c2){n.current=Wh,e.current=!0;return}try{const c=window.AudioContext||window.webkitAudioContext;n.current=new c,Wh=n.current,n.current.state==="suspended"&&await n.current.resume(),e.current=!0,c2=!0,console.log("🔊 Sound notification system initialized")}catch(c){console.warn("⚠️ Failed to initialize audio:",c)}},[]),r=R.useCallback(async()=>{try{e.current||await t();const c=Wh||n.current;if(!c){console.warn("⚠️ Audio context not available");return}c.state==="suspended"&&await c.resume(),console.log("🔊 Calling generatePleasantNotification with audio context:",c),II(.3,c)}catch(c){console.warn("⚠️ Failed to play notification sound:",c)}},[t]),i=R.useCallback(async()=>{try{e.current||await t(),await r()}catch(c){console.warn("⚠️ Failed to play notification with interaction:",c)}},[t,r]),a=R.useCallback(()=>{NI(.3)},[]),s=R.useCallback(()=>{DI(800,200,.3)},[]);return R.useEffect(()=>()=>{n.current&&(n.current.close(),n.current=null)},[]),{playNotification:r,playNotificationWithInteraction:i,playDoubleBeep:a,playSimpleBeep:s,initializeAudio:t}},Xh="dd856fdc-905b-4de3-a7e3-771ad81df52c",Qb=R.createContext(),Wu=()=>{const n=R.useContext(Qb);if(!n)throw new Error("useNotification must be used within a NotificationProvider");return n},kI=({children:n})=>{const{playNotification:e,initializeAudio:t}=Pl(),[r,i]=R.useState(!0),[a,s]=R.useState(0),[c,f]=R.useState(!1),[d,p]=R.useState(0),[g,y]=R.useState(null),x=R.useRef(null),b=R.useRef(null),S=R.useRef(3e3),E=R.useRef(null),_=R.useRef(null),T=R.useRef(new Set);R.useEffect(()=>{const $=async()=>{if(!c){console.log("🔊 Initializing audio on first user interaction...");try{await t(),f(!0),console.log("✅ Audio initialization successful")}catch(ne){console.error("❌ Audio initialization failed:",ne)}document.removeEventListener("click",$),document.removeEventListener("keydown",$)}};return document.addEventListener("click",$),document.addEventListener("keydown",$),document.addEventListener("touchstart",$),()=>{document.removeEventListener("click",$),document.removeEventListener("keydown",$),document.removeEventListener("touchstart",$)}},[t,c,e]);const C=R.useCallback($=>{E.current&&clearTimeout(E.current);const ne=$.isCancellation||$.order_type==="cancelled",se=$.isAvailabilityChange,le=$.isError;let ue={id:Date.now(),timestamp:new Date().toISOString(),orderData:$};le?(ue.type="error",ue.title="Error!",ue.message=$.item_name||"An error occurred"):se?(ue.type="availability_change",ue.title="Item Availability Updated!",ue.message=$.item_name||"Item availability has been changed"):ne?(ue.type="order_cancelled",ue.title="Order Cancelled!",ue.message=`${$.item_name||"Order"} has been cancelled`):(ue.type="new_order",ue.title="New Order Received!",ue.message=`Order #${$.order_token||$.token_no||"N/A"} - ${$.item_name||"Unknown Item"}`),y(ue),E.current=setTimeout(()=>{y(null)},5e3)},[]),O=R.useCallback(async $=>{if(console.log("🔔 showOrderNotification called with:",$),console.log("🔔 Current state:",{isEnabled:r,isInitialized:c,timeSinceLastNotification:Date.now()-d,cooldown:S.current}),!r){console.log("🔇 Notifications disabled");return}if(!c){console.log("🔇 Audio not initialized yet");return}const ne=Date.now(),se=ne-d,le=[$?.id,$?.order_id,$?.token_no,$?.order_token].filter(Boolean);for(const de of le)if(T.current.has(de)){console.log("🔇 Notification suppressed for local order:",de),T.current.delete(de);return}const ue=$.id||$.order_id||$.token_no;if(_.current===ue){console.log("🔇 Notification skipped (duplicate order ID):",ue);return}if(se<S.current){console.log("🔇 Notification skipped (cooldown active):",se,"ms <",S.current,"ms");return}console.log("🔔 Showing order notification...",$),p(ne),_.current=ue,console.log("📱 Showing popup notification..."),C($),console.log("🔊 Attempting to play notification sound...");try{await e(),console.log("✅ Sound notification played successfully")}catch(de){console.error("❌ Failed to play sound notification:",de)}},[e,d,C,r,c]),D=R.useCallback(()=>{y(null),E.current&&clearTimeout(E.current)},[]);R.useEffect(()=>{if(!r||!c)return;const $=async()=>{try{const{data:ne,error:se}=await me.from("orders").select("id, status, user_id").in("status",["pending","PENDING"]).neq("user_id",Xh).gte("created_at",new Date(Date.now()-6e4).toISOString());if(se){console.warn("⚠️ Failed to check for new orders:",se);return}const le=ne?.length||0;if(le>a&&a>0){console.log("🔔 New order detected via polling!");try{const{data:ue}=await me.from("orders").select("*").in("status",["pending","PENDING"]).neq("user_id",Xh).order("created_at",{ascending:!1}).limit(1).single();ue?await O(ue):await O({item_name:"New Order",order_token:"N/A"})}catch(ue){console.warn("⚠️ Failed to get latest order details:",ue),await O({item_name:"New Order",order_token:"N/A"})}}s(le)}catch(ne){console.warn("⚠️ Error checking for new orders:",ne)}};return x.current=setInterval($,5e3),()=>{x.current&&clearInterval(x.current)}},[r,c,a,O]),R.useEffect(()=>{if(!(!r||!c))return b.current&&b.current.unsubscribe(),b.current=me.channel("orders-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},async $=>{console.log("🔔 NotificationContext: New order inserted via real-time:",$.new),console.log("🔍 Order details:",{status:$.new.status,user_id:$.new.user_id,item_name:$.new.item_name,created_at:$.new.created_at,id:$.new.id});const ne=$.new.status==="pending"||$.new.status==="PENDING",se=$.new.user_id!==Xh;if(console.log("🔍 Filter check:",{isPending:ne,isNotAppOrder:se,willNotify:ne&&se,statusValue:$.new.status,userIdValue:$.new.user_id}),ne&&se){console.log("✅ NotificationContext: Showing notification for counter order!");try{await O($.new),console.log("✅ NotificationContext: Notification triggered successfully")}catch(le){console.error("❌ NotificationContext: Error showing notification:",le)}}else console.log("❌ NotificationContext: Notification filtered out:",{reason:ne?"App order":"Not pending status",status:$.new.status,user_id:$.new.user_id})}).subscribe(),()=>{b.current&&(b.current.unsubscribe(),b.current=null)}},[r,c,O]),R.useEffect(()=>{if(!r||!c)return;const $=async ne=>{console.log("🔔 NotificationContext: Received orderInserted event from Orders Panel:",ne.detail),console.log("🔍 Event details:",{orderData:ne.detail,isEnabled:r,isInitialized:c});try{const se=ne.detail;console.log("✅ NotificationContext: Triggering notification from Orders Panel event!"),await O(se),console.log("✅ NotificationContext: Orders Panel notification triggered successfully")}catch(se){console.warn("⚠️ NotificationContext: Error handling orderInserted event:",se)}};return window.addEventListener("orderInserted",$),()=>{window.removeEventListener("orderInserted",$)}},[r,c,O]);const H={isEnabled:r,toggleNotifications:()=>{i(!r)},playTestSound:async()=>{await e()},isInitialized:c,popupNotification:g,closePopupNotification:D,showOrderNotification:O,suppressNotificationForOrder:$=>{if($)try{T.current.add($),setTimeout(()=>T.current.delete($),6e4)}catch{}}};return v.jsx(Qb.Provider,{value:H,children:n})};function MI(){const[n,e]=R.useState(null),[t,r]=R.useState(!1),[i,a]=R.useState(""),{playNotification:s}=Pl();R.useRef(""),R.useRef(null);const c=R.useRef({code:"",time:0}),f=R.useCallback(x=>{if(!x)return null;const b=String(x).trim();if(b)return b;try{const E=new URL(b).searchParams,_=E.get("qr_code")||E.get("order_qr_code")||E.get("code");if(_)return _}catch{}return null},[]),d=R.useCallback(async x=>{try{console.log("🔍 Fetching order for QR code:",x);const{data:b,error:S}=await me.from("orders").select("id,item_name,qr_code,order_token,created_at,status,total_amount,user_id,order_type").eq("qr_code",x).limit(1).maybeSingle();if(S)throw console.error("Error fetching order:",S),S;return b&&b.qr_code===x?(console.log("✅ Order found:",b),b):(console.log("❌ No order found for QR code:",x),null)}catch(b){return console.error("Failed to fetch order:",b),null}},[]),p=R.useCallback(async x=>{const b=Date.now();if(c.current.code===x&&b-c.current.time<2e3){console.log("⏭️ Duplicate scan ignored");return}c.current={code:x,time:b};const S=f(x);if(!S){console.log("❌ Invalid QR code format"),a("Invalid QR code"),setTimeout(()=>a(""),2e3);return}if(t||n){console.log("📋 Already processing an order, ignoring new scan"),a("Please complete current order first"),setTimeout(()=>a(""),2e3);return}r(!0);const E=await d(S);if(E){e(E),a("✅ Order scanned successfully");try{await s()}catch(_){console.log("Sound failed:",_)}setTimeout(()=>a(""),2e3)}else a("❌ Order not found"),setTimeout(()=>a(""),2e3);r(!1)},[n,t,f,d,s]),g=R.useCallback(()=>{e(null),a("")},[]),y=R.useCallback(x=>{p(x)},[p]);return{scannedOrder:n,isProcessing:t,scanMessage:i,closeModal:g,scanQRCode:y,processQRCode:p}}const jI="dd856fdc-905b-4de3-a7e3-771ad81df52c";function PI(n){const e=String(n||"").toLowerCase();return e==="pending"?"PENDING":e==="preparing"?"PREPARING":e==="ready"?"READY":e==="delivered"?"DELIVERED":e==="cancelled"?"CANCELLED":e.toUpperCase()}function BI({order:n,onClose:e}){const{playNotification:t}=Pl(),[r,i]=R.useState(!1),[a,s]=R.useState(""),c=async()=>{if(n){i(!0),s("");try{const{error:d}=await me.rpc("update_order_status_flexible",{p_order_id:n.id,p_new_status:"delivered"});if(d)throw d;try{await t()}catch(p){console.log("Sound failed:",p)}s("✅ Order marked as delivered"),setTimeout(()=>{e(),s("")},1e3)}catch(d){console.error("Failed to update order:",d),s(`❌ Failed: ${d.message||"Unknown error"}`),setTimeout(()=>s(""),3e3)}finally{i(!1)}}},f=async()=>{if(n&&window.confirm("Are you sure you want to cancel this order?")){i(!0),s("");try{const{error:d}=await me.rpc("update_order_status_flexible",{p_order_id:n.id,p_new_status:"cancelled"});if(d)throw d;try{await t()}catch(p){console.log("Sound failed:",p)}s("✅ Order cancelled"),setTimeout(()=>{e(),s("")},1e3)}catch(d){console.error("Failed to cancel order:",d),s(`❌ Failed: ${d.message||"Unknown error"}`),setTimeout(()=>s(""),3e3)}finally{i(!1)}}};return n?v.jsxs(Dn,{children:[v.jsx(Ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,style:{position:"fixed !important",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),v.jsxs(Ve.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:d=>d.stopPropagation(),style:{position:"fixed !important",top:"50% !important",left:"50% !important",transform:"translate(-50%, -50%) !important",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"500px",width:"90%",maxHeight:"85vh",overflow:"auto",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",margin:0},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"2px solid #e5e7eb",paddingBottom:"16px"},children:[v.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:"📦 Order Scanned"}),v.jsx("button",{onClick:e,disabled:r,style:{background:"none",border:"none",cursor:r?"not-allowed":"pointer",padding:"4px",display:"flex",alignItems:"center",color:"#6b7280",opacity:r?.5:1},children:v.jsx(mn,{size:24})})]}),v.jsxs("div",{style:{backgroundColor:"#f9fafb",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid #e5e7eb"},children:[v.jsx("span",{style:{color:"#6b7280",fontSize:"14px",fontWeight:"500"},children:"Token Number:"}),v.jsxs("span",{style:{fontSize:"32px",fontWeight:"700",color:"#1f2937",backgroundColor:"#fff",padding:"8px 16px",borderRadius:"10px",border:"3px solid #3b82f6",letterSpacing:"2px"},children:["#",n.order_token||"N/A"]})]}),v.jsxs("div",{style:{marginBottom:"12px"},children:[v.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Items:"}),v.jsx("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:n.item_name||"Order Items"})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[v.jsxs("div",{children:[v.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Total Amount:"}),v.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"18px"},children:["₹",n.total_amount!=null?n.total_amount:"-"]})]}),v.jsxs("div",{children:[v.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Current Status:"}),v.jsx("div",{style:{fontWeight:"600",fontSize:"16px",color:n.status==="pending"?"#f59e0b":n.status==="preparing"?"#3b82f6":n.status==="ready"?"#10b981":n.status==="delivered"?"#6b7280":"#dc2626"},children:PI(n.status)})]})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[v.jsxs("div",{children:[v.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Order Type:"}),v.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"14px"},children:n.order_type?"🥡 Takeaway":"🍽️ Dine In"})]}),v.jsxs("div",{children:[v.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Placed Via:"}),v.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"14px"},children:n.user_id===jI?"📱 App":"🏪 Counter"})]})]})]}),a&&v.jsx("div",{style:{marginBottom:"16px",padding:"12px",borderRadius:"8px",backgroundColor:a.includes("✅")?"#d1fae5":"#fee2e2",color:a.includes("✅")?"#065f46":"#991b1b",fontSize:"14px",fontWeight:"500",textAlign:"center"},children:a}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[n.status!=="delivered"&&n.status!=="cancelled"&&v.jsxs("button",{onClick:c,disabled:r,style:{width:"100%",padding:"16px 20px",fontSize:"16px",fontWeight:"600",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"10px",cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",opacity:r?.6:1},onMouseEnter:d=>{r||(d.target.style.backgroundColor="#059669")},onMouseLeave:d=>{r||(d.target.style.backgroundColor="#10b981")},children:[r?v.jsx(Xi,{size:18,className:"spin"}):v.jsx(Go,{size:18}),r?"Updating...":"Mark as Delivered"]}),n.status==="delivered"&&v.jsx("div",{style:{padding:"16px",backgroundColor:"#d1fae5",color:"#065f46",borderRadius:"10px",textAlign:"center",fontWeight:"600"},children:"✅ This order has already been delivered"}),v.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.status!=="delivered"&&n.status!=="cancelled"&&v.jsxs("button",{onClick:f,disabled:r,style:{flex:1,padding:"12px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ffffff",color:"#dc2626",border:"1px solid #dc2626",borderRadius:"8px",cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s ease",opacity:r?.6:1},onMouseEnter:d=>{r||(d.target.style.backgroundColor="#fef2f2")},onMouseLeave:d=>{r||(d.target.style.backgroundColor="#ffffff")},children:[v.jsx(mn,{size:16}),"Cancel Order"]}),v.jsx("button",{onClick:e,disabled:r,style:{flex:1,padding:"12px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:r?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:r?.6:1},onMouseEnter:d=>{r||(d.target.style.backgroundColor="#e5e7eb")},onMouseLeave:d=>{r||(d.target.style.backgroundColor="#f3f4f6")},children:"Close"})]})]}),v.jsx("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:v.jsxs("details",{style:{cursor:"pointer"},children:[v.jsx("summary",{style:{fontSize:"12px",color:"#6b7280",userSelect:"none",cursor:"pointer"},children:"Order Code Reference"}),v.jsx("code",{style:{fontSize:"11px",backgroundColor:"#f3f4f6",padding:"6px 10px",borderRadius:"4px",display:"block",marginTop:"8px",wordBreak:"break-all",color:"#374151",fontFamily:"monospace"},children:n.qr_code||"Not available"})]})})]})]}):null}function LI({onScan:n,isEnabled:e=!1}){const t=R.useRef(""),r=R.useRef(null),i=R.useRef({code:"",time:0});return R.useEffect(()=>{if(!e)return;const a=s=>{if(!(s.target.tagName==="INPUT"||s.target.tagName==="TEXTAREA")){if(r.current&&clearTimeout(r.current),s.key==="Enter"&&t.current.length>0){const c=t.current;t.current="",console.log("📱 QR Scanned:",c);const f=Date.now();if(i.current.code===c&&f-i.current.time<2e3){console.log("⏭️ Duplicate scan ignored");return}i.current={code:c,time:f},n(c),s.preventDefault();return}s.key.length===1&&(t.current+=s.key),r.current=setTimeout(()=>{t.current=""},100)}};return window.addEventListener("keypress",a),()=>{window.removeEventListener("keypress",a),r.current&&clearTimeout(r.current)}},[e,n]),null}function FI({onScan:n,onClose:e,isOpen:t}){const r=R.useRef(null),i=R.useRef(null),a=R.useRef(null),[s,c]=R.useState(!1),[f,d]=R.useState(null),[p,g]=R.useState(!1),y=async()=>{try{d(null);const b=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});g(!0);const S=new dw;i.current=S,c(!0),await S.decodeFromVideoDevice(null,r.current,async(E,_,T)=>{try{T&&!a.current&&(a.current=T)}catch{}if(E){const C=String(E.getText()||"");C&&(console.log("📱 Camera scanned QR:",C),n(C),x())}_&&_.name})}catch(b){console.error("Camera error:",b),d(b.message||"Camera access denied"),g(!1)}},x=async()=>{try{c(!1),a.current&&(a.current.stop(),a.current=null),i.current&&(await i.current.reset(),i.current=null),r.current&&r.current.srcObject&&(r.current.srcObject.getTracks().forEach(S=>S.stop()),r.current.srcObject=null)}catch(b){console.error("Error stopping camera:",b)}};return R.useEffect(()=>(t?y():x(),()=>{x()}),[t]),t?v.jsx(Dn,{children:v.jsx(Ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsxs(Ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onClick:b=>b.stopPropagation(),style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"20px",maxWidth:"500px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[v.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"📱 Scan Student's QR Code"}),v.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",color:"#6b7280"},children:v.jsx(mn,{size:24})})]}),v.jsxs("div",{style:{position:"relative",marginBottom:"20px"},children:[v.jsx("video",{ref:r,style:{width:"100%",maxHeight:300,background:"#000",borderRadius:"12px",display:s?"block":"none"},muted:!0,playsInline:!0}),!s&&!f&&v.jsxs("div",{style:{width:"100%",height:"300px",background:"#1f2937",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#9ca3af",gap:"12px"},children:[v.jsx(Yy,{size:48}),v.jsx("div",{children:"Starting camera..."})]}),f&&v.jsxs("div",{style:{width:"100%",minHeight:"300px",background:"#fee2e2",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#991b1b",gap:"12px",padding:"20px",boxSizing:"border-box"},children:[v.jsx(Xy,{size:48}),v.jsxs("div",{style:{textAlign:"center",width:"100%",wordWrap:"break-word",overflowWrap:"break-word"},children:[v.jsx("div",{style:{fontWeight:"600",marginBottom:"8px",wordWrap:"break-word",overflowWrap:"break-word"},children:"Camera Error"}),v.jsx("div",{style:{fontSize:"14px",lineHeight:"1.4",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"100%"},children:f})]})]}),s&&v.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"200px",height:"200px",border:"3px solid #3b82f6",borderRadius:"12px",background:"rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsx("div",{style:{color:"#ffffff",fontSize:"14px",fontWeight:"600",textAlign:"center",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"8px 16px",borderRadius:"8px"},children:"📱 Point at QR Code"})})]}),v.jsxs("div",{style:{backgroundColor:"#f3f4f6",borderRadius:"8px",padding:"16px",fontSize:"14px",color:"#374151"},children:[v.jsx("div",{style:{fontWeight:"600",marginBottom:"8px"},children:"Instructions:"}),v.jsx("div",{children:"1. Ask student to show their QR code on their phone"}),v.jsx("div",{children:"2. Point camera at the QR code"}),v.jsx("div",{children:"3. QR code will be scanned automatically"}),v.jsx("div",{children:"4. Order details will appear in a popup"})]}),v.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[v.jsxs("button",{onClick:s?x:y,style:{flex:1,padding:"12px 16px",backgroundColor:s?"#dc2626":"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},children:[s?v.jsx(Xy,{size:16}):v.jsx(Yy,{size:16}),s?"Stop Camera":"Start Camera"]}),v.jsx("button",{onClick:e,style:{padding:"12px 16px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Cancel"})]})]})})}):null}const UI={BASE_URL:"/IARE-Canteen-Web/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE:"/IARE-Canteen-Web/",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY",VITE_SUPABASE_URL:"https://znqhoohjugyblgwepovp.supabase.co"},Fe=n=>String(n||"").toUpperCase(),Rr="dd856fdc-905b-4de3-a7e3-771ad81df52c",u2=n=>{switch(String(n).toUpperCase()){case"PENDING":case"PREPARING":return"Preparing";case"READY":return"Ready for Pickup";case"DELIVERED":return"Delivered";case"CANCELLED":case"CANCELED":return"Cancelled";default:return"Preparing"}};let Ht=null;function zI(){return v.jsx(VI,{children:v.jsx(WO,{children:v.jsx(kI,{children:v.jsx(HI,{})})})})}class VI extends d2.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Unhandled error in App:",e,t)}render(){return this.state.hasError?v.jsxs("div",{style:{padding:24},children:[v.jsx("h2",{children:"Application error"}),v.jsx("pre",{style:{whiteSpace:"pre-wrap",color:"crimson"},children:String(this.state.error)})]}):this.props.children}}function HI(){const n=pi();Bu();const[e,t]=R.useState("checking"),{showOrderNotification:r}=Wu();R.useEffect(()=>{const k=setTimeout(()=>{e==="checking"&&(console.log("🔄 Fallback timer: showing main content"),t("connected"))},15e3);return()=>clearTimeout(k)},[e]);const{scannedOrder:i,scanMessage:a,closeModal:s,processQRCode:c}=MI(),[f,d]=R.useState(!1),[p,g]=R.useState(()=>localStorage.getItem("theme")||"light");R.useEffect(()=>{document.documentElement.setAttribute("data-theme",p),document.documentElement.classList.toggle("dark",p==="dark"),localStorage.setItem("theme",p)},[p]);const x=["/","/orders","/place-order","/manage-orders"].includes(n.pathname),S={"/":"Dashboard","/place-order":"Place Order","/orders":"Orders","/inventory":"Inventory Management","/manage-orders":"Manage Orders","/pre-order":"Pre-Order","/scan":"Scan QR","/ai":"AI Predictions","/settings":"Settings"}[n.pathname]||"Dashboard",[E,_]=R.useState("live"),[T,C]=R.useState(!1),[O,D]=R.useState([]),[j,L]=R.useState([]),[H,$]=R.useState([]),[ne,se]=R.useState([]),[le,ue]=R.useState({}),[de,Se]=R.useState(null),U=async(k,I)=>{const P=[...j];L(q=>q.map(te=>te.id===k?{...te,status:I}:te).sort((te,J)=>new Date(te.created_at)-new Date(J.created_at))),ue(q=>({...q,[k]:!0}));try{const{data:q,error:ie}=await me.rpc("update_order_status_flexible",{p_order_id:k,p_new_status:String(I).toLowerCase()});if(ie)throw ie;try{const ae=u2(I);await me.from("order_items").update({status:ae}).eq("order_id",k)}catch(ae){console.warn("⚠️ Failed to sync order_items.status:",ae)}const te=P.find(ae=>ae.id===k)||j.find(ae=>ae.id===k);if(!te)return;const J=te.status,pe=new Date().toLocaleString();if(I==="READY"){L(ae=>ae.map(Ce=>Ce.id===k?{...Ce,status:"READY"}:Ce).sort((Ce,Xe)=>new Date(Ce.created_at)-new Date(Xe.created_at))),D(ae=>{const ye=ae.filter(Ce=>!(Ce.orderId===k&&Ce.to==="PREPARING"));return[{orderId:k,itemName:te.item_name,from:J,to:"READY",ts:Date.now()},...ye]}),se(ae=>[{orderId:k,itemName:te.item_name,from:J,to:"READY",at:pe,ts:Date.now(),prevLoc:"live",nextLoc:"live"},...ae.filter(ye=>!(ye.orderId===k&&ye.to==="PREPARING"))]);return}if(I==="DELIVERED"){L(ae=>ae.filter(ye=>ye.id!==k)),$(ae=>[{...te,status:"DELIVERED",deliveredAt:Date.now()},...ae]),D(ae=>{const ye=ae.filter(Ce=>!(Ce.orderId===k&&Ce.to==="PREPARING"));return[{orderId:k,itemName:te.item_name,from:J,to:"DELIVERED",ts:Date.now()},...ye]}),se(ae=>[{orderId:k,itemName:te.item_name,from:J,to:"DELIVERED",at:pe,ts:Date.now(),prevLoc:"live",nextLoc:"delivered"},...ae.filter(ye=>!(ye.orderId===k&&ye.to==="PREPARING"))]),console.log("📦 Order marked as delivered - stock was already reduced on order placement");return}L(ae=>ae.map(Ce=>Ce.id===k?{...Ce,status:I}:Ce).sort((Ce,Xe)=>new Date(Ce.created_at)-new Date(Xe.created_at))),D(ae=>[{orderId:k,itemName:te.item_name,from:J,to:I,ts:Date.now()},...ae]),se(ae=>[{orderId:k,itemName:te.item_name,from:J,to:I,at:pe,ts:Date.now(),prevLoc:"live",nextLoc:"live"},...ae])}catch(q){console.error("Failed to update order status:",q);try{L(P)}catch{}alert("Failed to update order status: "+(q.message||q))}finally{ue(q=>{const ie={...q};return delete ie[k],ie})}},F=async k=>{const I=j.find(P=>P.id===k);I&&Se({orderId:k,itemName:I.item_name})},K=async k=>{Se(null);try{console.log("🔄 Starting order cancellation for ID:",k);const{data:I,error:P}=await me.from("orders").select("item_name, status, id").eq("id",k).single();if(P){console.error("❌ Could not fetch order details:",P),alert(`Failed to fetch order details: ${P.message}`);return}if(console.log("📋 Order data retrieved:",I),Fe(I.status)==="DELIVERED"){alert('Cannot cancel delivered orders. Use "Revert" instead.');return}const{error:ie}=await me.from("orders").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",k);if(ie){console.error("❌ Failed to update order status:",ie),alert(`Failed to cancel order: ${ie.message}`);return}console.log("✅ Order status updated to CANCELLED");try{await me.from("order_items").update({status:u2("CANCELLED")}).eq("order_id",k)}catch(te){console.warn("⚠️ Failed to sync order_items.status on cancel:",te)}if(I.item_name){console.log("📦 Order canceled, restoring stock for:",I.item_name);try{const{data:te,error:J}=await me.from("food_items").select("available_quantity").eq("name",I.item_name).single();if(J)console.error("❌ Could not fetch current stock for restore:",J),console.warn("⚠️ Order canceled but stock not restored. Please update manually.");else{const pe=te.available_quantity+1,{error:ae}=await me.from("food_items").update({available_quantity:pe,is_available:!0,updated_at:new Date().toISOString()}).eq("name",I.item_name);ae?(console.error("❌ Failed to restore stock on cancel:",ae),console.warn("⚠️ Order canceled but stock not restored. Please update manually.")):(console.log("✅ Stock restored on cancel (marked as available)"),Ht&&Ht())}}catch(te){console.error("❌ Stock restoration error:",te)}}L(te=>te.filter(J=>J.id!==k));try{await r({item_name:I.item_name||"Order",order_token:"CANCELLED",total_amount:0,order_type:"cancelled",user_id:Rr,isCancellation:!0})}catch(te){console.warn("⚠️ Failed to show notification:",te)}console.log("✅ Order cancellation completed successfully")}catch(I){console.error("❌ Error canceling order:",I),alert(`Failed to cancel order: ${I.message||"Unknown error"}`)}};R.useEffect(()=>{console.log("🚀 DashboardShell useEffect triggered");const k=setTimeout(()=>{e==="checking"&&(console.log("⏰ Connection timeout, proceeding anyway"),t("connected"))},1e4),I=async()=>{console.log("📡 fetchOrders called");try{const te="https://znqhoohjugyblgwepovp.supabase.co",J="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY";t("connecting");const pe=1e3;let ae=0,ye=[];for(;;){const pt=ae+pe-1,{data:Je,error:xt}=await me.from("orders").select("*").order("created_at",{ascending:!0}).range(ae,pt);if(xt)throw xt;const rt=Je||[];if(console.log("Fetched batch:",rt.length,"orders"),ye=ye.concat(rt),rt.length<pe)break;ae+=pe}try{const pt=Array.from(new Set((ye||[]).map(Je=>Je.item_id||Je.itemId||Je.item).filter(Boolean)));if(pt.length>0){let Je=Object.create(null);try{const{data:xt,error:rt}=await me.from("order_items").select("*").in("id",pt);if(rt)throw rt;for(const ct of xt||[]){const Pt=ct.id||ct.item_id||ct.code||ct.slug,V=ct.price??ct.cost??ct.rate??ct.amount;Pt&&typeof V=="number"&&(Je[Pt]=V)}const $t=pt.filter(ct=>Je[ct]==null);if($t.length>0){const{data:ct}=await me.from("order_items").select("*").in("item_id",$t);for(const Pt of ct||[]){const V=Pt.item_id||Pt.id||Pt.code||Pt.slug,fe=Pt.price??Pt.cost??Pt.rate??Pt.amount;V&&typeof fe=="number"&&(Je[V]=fe)}}}catch{const{data:rt,error:$t}=await me.from("food_items").select("*").in("id",pt);if(!$t)for(const ct of rt||[]){const Pt=ct.id||ct.item_id||ct.code||ct.slug,V=ct.price??ct.cost??ct.rate??ct.amount;Pt&&typeof V=="number"&&(Je[Pt]=V)}}ye=ye.map(xt=>{const rt=xt.item_id||xt.itemId||xt.item,$t=Je[rt];return $t!=null&&(xt.total_amount==null||Number.isNaN(xt.total_amount))?{...xt,total_amount:$t}:xt})}}catch(pt){console.warn("Price merge skipped:",pt?.message||pt)}const Ce=(ye||[]).filter(pt=>{const Je=Fe(pt.status);return Je!=="DELIVERED"&&Je!=="CANCELLED"}),Dt=(ye||[]).filter(pt=>{const Je=Fe(pt.status);return Je==="DELIVERED"||Je==="CANCELLED"}).sort((pt,Je)=>new Date(Je.created_at)-new Date(pt.created_at)),Zt=Ce.sort((pt,Je)=>{const xt=new Date(pt.created_at),rt=new Date(Je.created_at);return xt-rt});console.log("Total orders fetched:",ye.length),console.log("Live orders:",Zt.length),console.log("Past orders:",Dt.length),console.log("Sample order:",ye[0]),L(Zt),$(Dt),t("connected"),clearTimeout(k)}catch(te){console.error("Supabase orders fetch failed:",te),t("error"),te.message?.includes("JWT")?console.error("Authentication error - check your Supabase anon key"):te.message?.includes('relation "orders" does not exist')&&console.error("Orders table does not exist - run the SQL script in Supabase")}};I();let P=setInterval(I,1e3),q=!1;const ie=me.channel("public:orders").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},async te=>{console.log("🔄 Orders Panel: New order received via real-time:",te.new),q||(q=!0,P&&(clearInterval(P),P=null));let J=te.new;try{if(J&&(J.total==null||Number.isNaN(J.total))){const pe=J.item_id||J.itemId||J.item;if(pe){let ae=null;try{const{data:ye,error:Ce}=await me.from("order_items").select("*").or(`id.eq.${pe},item_id.eq.${pe}`);if(!Ce){const Xe=(ye||[])[0];ae=Xe?Xe.price??Xe.cost??Xe.rate??Xe.amount??null:null}}catch{}if(ae==null)try{const{data:ye,error:Ce}=await me.from("food_items").select("*").or(`id.eq.${pe},item_id.eq.${pe}`);if(!Ce){const Xe=(ye||[])[0];ae=Xe?Xe.price??Xe.cost??Xe.rate??Xe.amount??null:null}}catch{}typeof ae=="number"&&(J={...J,total_amount:ae})}}}catch{}L(pe=>[J,...pe].sort((ye,Ce)=>{const Xe=Fe(ye.status),Dt=Fe(Ce.status),Zt=xt=>{switch(xt){case"PENDING":return 1;case"READY":return 2;case"CANCELLED":return 3;default:return 4}},pt=Zt(Xe),Je=Zt(Dt);return pt!==Je?pt-Je:new Date(ye.created_at)-new Date(Ce.created_at)}));try{console.log("🔔 Orders Panel: Checking if notification should be triggered for order:",J);const pe=J.status==="preparing"||J.status==="PREPARING",ae=J.user_id!==Rr;if(console.log("🔍 Orders Panel: Filter check:",{status:J.status,user_id:J.user_id,isPreparing:pe,isNotAppOrder:ae,willNotify:pe&&ae}),pe&&ae){console.log("✅ Orders Panel: Triggering notification for new order!");const ye=new CustomEvent("orderInserted",{detail:J});window.dispatchEvent(ye)}else console.log("❌ Orders Panel: Notification filtered out:",{reason:isPending?"Admin/staff order":"Not pending status"})}catch(pe){console.warn("⚠️ Orders Panel: Error triggering notification:",pe)}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},async te=>{q||(q=!0,P&&(clearInterval(P),P=null));let J=te.new;try{L(pe=>{const ae=pe.find(Dt=>Dt.id===te.new.id),ye=ae&&(ae.order_token||ae.token_no);let Ce={...te.new};return ye&&(Ce.token_no=ye,Ce.order_token=ye),Fe(Ce.status)==="DELIVERED"||Fe(Ce.status)==="CANCELLED"?pe.filter(Dt=>Dt.id!==Ce.id):pe.map(Dt=>Dt.id===Ce.id?Ce:Dt).sort((Dt,Zt)=>new Date(Dt.created_at)-new Date(Zt.created_at))}),(Fe(te.new.status)==="DELIVERED"||Fe(te.new.status)==="CANCELLED")&&$(pe=>[{...J,deliveredAt:Date.now()},...pe.filter(ae=>ae.id!==J.id)]);return}catch{Fe(J.status)==="DELIVERED"||Fe(J.status)==="CANCELLED"?(L(ae=>ae.filter(ye=>ye.id!==J.id)),$(ae=>[{...J,deliveredAt:Date.now()},...ae.filter(ye=>ye.id!==J.id)])):L(ae=>ae.map(Ce=>Ce.id===J.id?J:Ce).sort((Ce,Xe)=>new Date(Ce.created_at)-new Date(Xe.created_at)))}}).subscribe();return()=>{clearTimeout(k),P&&clearInterval(P);try{ie.unsubscribe()}catch{}}},[]);const he=async k=>{if(!k)return;const{orderId:I,from:P,to:q,prevLoc:ie,nextLoc:te}=k;if(ie==="live"&&te==="delivered"){const J=H.find(pe=>pe.id===I);if(!J)return;$(pe=>pe.filter(ae=>ae.id!==I)),L(pe=>[{...J,status:P},...pe]),D(pe=>[{orderId:I,itemName:J.item_name,from:q,to:P,ts:Date.now()},...pe]);try{await me.rpc("update_order_status_flexible",{p_order_id:I,p_new_status:String(P).toLowerCase()})}catch{}}else if(ie==="live"&&te==="live"){L(J=>J.map(pe=>pe.id===I?{...pe,status:P}:pe));try{const pe=j.find(ae=>ae.id===I)?.item_name||"Order Item";D(ae=>[{orderId:I,itemName:pe,from:q,to:P,ts:Date.now()},...ae])}catch{}try{await me.rpc("update_order_status_flexible",{p_order_id:I,p_new_status:String(P).toLowerCase()})}catch{}}se(J=>J.filter(pe=>pe!==k))};return R.useEffect(()=>{const k=setInterval(()=>{D(I=>I.filter(P=>Date.now()-P.ts<25e3)),se(I=>I.filter(P=>P.ts?Date.now()-P.ts<25e3:!0))},1e3);return()=>clearInterval(k)},[]),R.useEffect(()=>{window.__IARE_ORDERS__=j,window.__IARE_DELIVERED__=H},[j,H]),v.jsxs("div",{className:"app",children:[v.jsxs("aside",{className:"sidebar",children:[v.jsx("h2",{className:"brand",children:"IARE Canteen"}),v.jsxs("nav",{className:"nav",children:[v.jsx(Lr,{to:"/",end:!0,children:"Home"}),v.jsx(Lr,{to:"/place-order",children:"Place Order"}),v.jsx(Lr,{to:"/orders",children:"Orders"}),v.jsx(Lr,{to:"/inventory",children:"Inventory Management"}),v.jsx(Lr,{to:"/manage-orders",children:"Manage Orders"}),v.jsx(Lr,{to:"/scan",children:"Scan QR"}),v.jsx(Lr,{to:"/ai",children:"AI Predictions"}),v.jsx(Lr,{to:"/pre-order",children:"Pre-Order"}),v.jsx(Lr,{to:"/settings",children:"Settings"})]})]}),v.jsxs("main",{className:"main",children:[v.jsxs("header",{className:"topbar",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[v.jsx("h1",{style:{margin:0},children:S}),x&&v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"20px",fontSize:"12px",fontWeight:"500",border:"1px solid #93c5fd"},children:[v.jsx("span",{style:{fontSize:"16px"},children:"📱"}),v.jsx("span",{children:"QR Scanner Active"})]}),v.jsx("button",{onClick:()=>d(!0),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:k=>k.target.style.backgroundColor="#2563eb",onMouseLeave:k=>k.target.style.backgroundColor="#3b82f6",children:"📷 Scan QR Code"})]}),a&&v.jsx("div",{style:{padding:"6px 12px",backgroundColor:a.includes("✅")?"#d1fae5":a.includes("📋")?"#fef3c7":"#fee2e2",color:a.includes("✅")?"#065f46":a.includes("📋")?"#92400e":"#991b1b",borderRadius:"20px",fontSize:"12px",fontWeight:"500",animation:"fadeIn 0.3s ease"},children:a})]}),v.jsxs("div",{className:"header-actions",children:[n.pathname==="/orders"&&v.jsxs(v.Fragment,{children:[v.jsxs("button",{className:`btn orders-btn recent-btn ${E==="activity"?"active":""}`,onClick:()=>{_("activity"),console.log("📋 Recent orders view activated")},disabled:E==="activity",title:"View recent order activity",children:[v.jsx(nO,{className:"w-4 h-4"}),"Recent"]}),v.jsxs("button",{className:`btn orders-btn live-btn ${E==="live"?"active":""}`,onClick:()=>{_("live"),console.log("🔴 Live orders view activated")},disabled:E==="live",title:"View live orders in real-time",children:[v.jsx(qO,{className:"w-4 h-4"}),"Live"]}),v.jsxs("button",{className:`btn orders-btn past-btn ${E==="past"?"active":""}`,onClick:()=>{_("past"),console.log("📜 Past orders view activated")},disabled:E==="past",title:"View completed orders history",children:[v.jsx(QT,{className:"w-4 h-4"}),"Past"]}),E==="live"&&v.jsxs("button",{className:`btn orders-btn picture-btn ${T?"active":""}`,onClick:()=>{C(k=>!k),console.log(`🖼 Switched to ${T?"List":"Picture"} mode`)},title:`Switch to ${T?"List":"Picture"} view`,children:[T?v.jsx(gw,{className:"w-4 h-4"}):v.jsx(pw,{className:"w-4 h-4"}),T?"List Mode":"Picture Mode"]})]}),n.pathname==="/manage-orders"&&v.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px 16px",backgroundColor:"#fef3c7",color:"#92400e",borderRadius:"8px",fontSize:"14px",fontWeight:"500",border:"1px solid #f59e0b",marginRight:"12px"},children:[v.jsx("span",{style:{marginRight:"8px"},children:"🚧"}),"Under Development, Coming Soon!"]}),v.jsx(Ve.button,{className:"theme-toggle-btn bg-white dark:bg-gray-800 text-black dark:text-white transition-colors duration-300",onClick:()=>g(p==="dark"?"light":"dark"),title:"Toggle Dark Mode",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:v.jsx(Ve.div,{animate:{rotate:p==="dark"?180:0,scale:p==="dark"?1.1:1},transition:{duration:.3,ease:"easeInOut"},className:"text-black dark:text-white",children:p==="dark"?v.jsx(mO,{size:20}):v.jsx(RO,{size:20})})}),n.pathname==="/"&&v.jsx(CI,{})]})]}),e==="not-configured"?v.jsx("div",{className:"home-dashboard",children:v.jsxs("div",{className:"card",children:[v.jsx("h2",{style:{marginTop:0,color:"#ef4444"},children:"⚠️ Supabase Not Configured"}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("p",{children:"The app needs Supabase credentials to work properly."}),v.jsx("p",{children:"Please follow these steps:"})]}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("h3",{children:"1. Get Your Supabase Credentials"}),v.jsxs("p",{children:["Go to ",v.jsx("a",{href:"https://supabase.com/dashboard",target:"_blank",rel:"noopener noreferrer",children:"Supabase Dashboard"})," → Your Project → Settings → API"]}),v.jsx("p",{children:"Copy your Project URL and anon public key"})]}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("h3",{children:"2. Create .env File"}),v.jsxs("p",{children:["Create a file named ",v.jsx("code",{children:".env"})," in the project root with:"]}),v.jsx("pre",{style:{backgroundColor:"#f3f4f6",padding:"12px",borderRadius:"4px",fontSize:"14px",overflow:"auto"},children:`VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key_here
VITE_DISABLE_AUTH=true`})]}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("h3",{children:"3. Restart Development Server"}),v.jsx("p",{children:"After creating the .env file, restart the server:"}),v.jsx("code",{children:"npm run dev"})]}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("h3",{children:"4. Check Console"}),v.jsx("p",{children:"Open browser console (F12) to see connection status and any errors."})]}),v.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"🔄 Refresh Page"})]})}):e==="checking"?v.jsx("div",{className:"home-dashboard",children:v.jsxs("div",{className:"card",children:[v.jsx("h2",{style:{marginTop:0},children:"🔄 Connecting to Supabase..."}),v.jsx("p",{children:"Please wait while we connect to the database."}),v.jsx("div",{style:{textAlign:"center",marginTop:"20px"},children:v.jsx("div",{className:"spinner",style:{margin:"0 auto"}})}),v.jsx("button",{className:"btn btn-primary",onClick:()=>t("connected"),style:{marginTop:"20px"},children:"Continue Anyway (Skip Connection Check)"})]})}):e==="error"?v.jsx("div",{className:"home-dashboard",children:v.jsxs("div",{className:"card",children:[v.jsx("h2",{style:{marginTop:0,color:"#ef4444"},children:"❌ Connection Error"}),v.jsx("p",{children:"Failed to connect to Supabase. Please check:"}),v.jsxs("ul",{style:{marginLeft:"20px"},children:[v.jsx("li",{children:"Your Supabase credentials in .env file"}),v.jsx("li",{children:"Internet connection"}),v.jsx("li",{children:"Supabase project status"})]}),v.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"🔄 Try Again"})]})}):v.jsxs(fE,{children:[v.jsx(Br,{path:"/",element:v.jsx(GI,{recent:O,orders:j,onUpdateStatus:U,updatingIds:le})}),v.jsx(Br,{path:"/place-order",element:v.jsx(qI,{})}),v.jsx(Br,{path:"/orders",element:v.jsx(XI,{orders:j,deliveredOrders:H,activity:ne,onUpdateStatus:U,onRevert:he,onCancel:F,view:E,pictureMode:T,updatingIds:le})}),v.jsx(Br,{path:"/inventory",element:v.jsx(YI,{})}),v.jsx(Br,{path:"/manage-orders",element:v.jsx(TI,{})}),v.jsx(Br,{path:"/pre-order",element:v.jsx(OI,{})}),v.jsx(Br,{path:"/scan",element:v.jsx(QI,{})}),v.jsx(Br,{path:"/ai",element:v.jsx(KI,{})}),v.jsx(Br,{path:"/settings",element:v.jsx(ZI,{})})]}),v.jsx(JI,{}),v.jsx(LI,{isEnabled:x,onScan:c}),v.jsx(BI,{order:i,onClose:s}),v.jsx(FI,{isOpen:f,onScan:c,onClose:()=>d(!1)}),v.jsx(Dn,{children:de&&v.jsxs(v.Fragment,{children:[v.jsx(Ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Se(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),v.jsxs(Ve.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:k=>k.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[v.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:v.jsx(vr,{size:24,style:{color:"#dc2626"}})}),v.jsx("div",{children:v.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Cancel Order?"})})]}),v.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["Are you sure you want to cancel the order for ",v.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',de.itemName,'"']}),"? This action will restore the stock for this item."]}),v.jsxs("div",{style:{backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"12px",marginBottom:"24px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[v.jsx(vr,{size:16,style:{color:"#f59e0b",marginTop:"2px",flexShrink:0}}),v.jsx("p",{style:{margin:0,fontSize:"13px",color:"#92400e",lineHeight:"1.4"},children:"This will mark the order as cancelled and the customer will need to place a new order."})]}),v.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:()=>Se(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},className:"dark:!bg-gray-700 dark:!text-gray-200",onMouseEnter:k=>{k.target.style.backgroundColor="#e5e7eb"},onMouseLeave:k=>{k.target.style.backgroundColor="#f3f4f6"},children:"Keep Order"}),v.jsxs("button",{onClick:()=>K(de.orderId),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ef4444",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:k=>{k.target.style.backgroundColor="#dc2626"},onMouseLeave:k=>{k.target.style.backgroundColor="#ef4444"},children:[v.jsx(mn,{size:16}),"Cancel Order"]})]})]})]})})]})]})}function tr({title:n,children:e,titleAction:t}){return v.jsxs("section",{className:"card bg-white dark:bg-gray-800 transition-colors duration-300",children:[n?v.jsxs("div",{className:"card-header",children:[v.jsx("h2",{className:"text-black dark:text-white",children:n}),t&&v.jsx("div",{className:"card-title-action",children:t})]}):null,e]})}function GI({orders:n,recent:e=[],onUpdateStatus:t,updatingIds:r={}}){const i=Bu();[...n].sort((U,F)=>(F.createdAt??0)-(U.createdAt??0)).slice(0,5);const a=window.__IARE_DELIVERED__||[],s=n.length+a.length,c=n.filter(U=>Fe(U.status)!=="READY").length,f=a.length,d=a.reduce((U,F)=>U+(F.total_amount||F.amount||0),0);d2.useMemo(()=>{const U=[...n,...a],F={};U.forEach(k=>{const I=k.item_name||k.item||k.name||"Unknown Item";F[I]=(F[I]||0)+1});const K=Object.entries(F).map(([k,I])=>({name:k,orders:I})).sort((k,I)=>I.orders-k.orders).slice(0,4),he=K[0]?.orders||1;return K.map(k=>({...k,percentage:Math.round(k.orders/he*100)}))},[n,a]);const[p,g]=R.useState([]),[y,x]=R.useState(!1),[b,S]=R.useState(!1),[E,_]=R.useState(!1),[T,C]=R.useState([]),[O,D]=R.useState([]),[j,L]=R.useState(!1),[H,$]=R.useState(!1),ne=()=>{const U=["Order Token","Item","Total","Received At","Delivered At"],F=ie=>'"'+String(ie).replace(/"/g,'""')+'"',K=ie=>ie?new Date(ie).toISOString().slice(0,19).replace("T"," "):"",he=a.map(ie=>{const te=new Date(ie.createdAt).getTime(),J=new Date(ie.deliveredAt).getTime(),pe=ie.token||ie.id?.slice(-4);return[F(pe?"#"+pe:""),F(ie.item_name||"Food Item"),F(ie.total_amount||ie.amount||0),F(K(te)),F(K(J))].join(",")}),k=[U.join(","),...he].join(`
`),I=new Blob([k],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(I),q=document.createElement("a");q.href=P,q.download=`reports_${new Date().toISOString().slice(0,10)}.csv`,q.click(),URL.revokeObjectURL(P)},se=()=>{const U=`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body>
      <table border="1">
        <tr><th>Order Token</th><th>Item</th><th>Total</th><th>Received At</th><th>Delivered At</th></tr>
        ${a.map(k=>{const I=k.token||k.id?.slice(-4);return`<tr>
            <td>${I?"#"+I:""}</td>
            <td>${k.item_name||"Food Item"}</td>
            <td>₹${k.total_amount||k.amount||0}</td>
            <td>${new Date(k.createdAt).toLocaleString()}</td>
            <td>${new Date(k.deliveredAt).toLocaleString()}</td>
          </tr>`}).join("")}
      </table></body></html>`,F=new Blob(["\uFEFF",U],{type:"application/vnd.ms-excel"}),K=URL.createObjectURL(F),he=document.createElement("a");he.href=K,he.download=`reports_${new Date().toISOString().slice(0,10)}.xls`,he.click(),URL.revokeObjectURL(K)};R.useEffect(()=>{(async()=>{try{let K=0,he=[];for(;;){const I=K+1e3-1,{data:P,error:q}=await me.from("food_items").select("*").range(K,I);if(q)throw q;const ie=P||[];if(he=he.concat(ie),ie.length<1e3)break;K+=1e3}const k=he.map(I=>{const P=I.name??I.item_name??I.title??I.label??"Item",q=(typeof I.available_quantity=="number"?I.available_quantity>0:void 0)??I.in_stock??I.available??I.is_available??(typeof I.stock=="number"?I.stock>0:void 0)??(typeof I.status=="string"?String(I.status).toLowerCase()==="in":void 0)??!0;return{name:P,inStock:!!q}});g(k.filter(I=>!I.inStock))}catch{g([])}})()},[]),R.useEffect(()=>{y&&le()},[y]),R.useEffect(()=>{b&&ue()},[b]);const le=async()=>{try{L(!0);const{data:U,error:F}=await me.from("food_items").select("*").eq("is_active",!0).order("name");if(F)throw F;C(U||[])}catch(U){console.error("Error fetching menu items:",U),alert("Failed to load menu items")}finally{L(!1)}},ue=async()=>{try{$(!0);const{data:U,error:F}=await me.from("orders").select("*").eq("status","delivered").order("created_at",{ascending:!1}).limit(10);if(F)throw F;D(U||[])}catch(U){console.error("Error fetching delivered orders:",U),alert("Failed to load delivered orders")}finally{$(!1)}},de=async(U,F)=>{try{const K=!F,he=T.find(q=>q.id===U),k={is_available:K,available_quantity:K?he?.available_quantity||10:0},{error:I}=await me.from("food_items").update(k).eq("id",U);if(I)throw I;C(q=>q.map(ie=>ie.id===U?{...ie,is_available:K,available_quantity:k.available_quantity}:ie));const P=`${he?.name||"Item"} ${K?"enabled":"disabled"} successfully!`;await showAvailabilityNotification(P,!1)}catch(K){console.error("Error updating item availability:",K),await showAvailabilityNotification("Failed to update item availability",!0)}},Se=async U=>{if(confirm("Are you sure you want to revert this order?"))try{const{data:F,error:K}=await me.from("orders").select("item_name").eq("id",U).single();if(K)throw console.error("❌ Could not fetch order details:",K),K;const{error:he}=await me.from("orders").update({status:"pending"}).eq("id",U);if(he)throw he;console.log("📦 Order reverted, restoring stock for:",F.item_name);try{const{data:k,error:I}=await me.from("food_items").select("available_quantity").eq("name",F.item_name).single();if(I){console.error("❌ Could not fetch current stock for restore:",I);return}const P=k.available_quantity+1,{error:q}=await me.from("food_items").update({available_quantity:P,is_available:!0,updated_at:new Date().toISOString()}).eq("name",F.item_name);q?(console.error("❌ Failed to restore stock on revert:",q),console.warn("⚠️ Order reverted but stock not restored. Please update manually.")):(console.log("✅ Stock restored on revert (marked as available)"),Ht&&Ht())}catch(k){console.error("❌ Stock restoration error:",k)}D(k=>k.filter(I=>I.id!==U)),alert("Order reverted successfully! Stock has been restored.")}catch(F){console.error("Error reverting order:",F),alert("Failed to revert order")}};return v.jsxs("div",{className:"home-dashboard",children:[v.jsxs("div",{className:"summary-cards",children:[v.jsxs("div",{className:"summary-card",children:[v.jsx("div",{className:"summary-icon",children:v.jsx(eO,{className:"w-6 h-6"})}),v.jsxs("div",{className:"summary-content",children:[v.jsx("div",{className:"summary-value",children:s}),v.jsx("div",{className:"summary-label",children:"Total Orders"})]})]}),v.jsxs("div",{className:"summary-card",children:[v.jsx("div",{className:"summary-icon",children:v.jsx(iO,{className:"w-6 h-6"})}),v.jsxs("div",{className:"summary-content",children:[v.jsx("div",{className:"summary-value",children:c}),v.jsx("div",{className:"summary-label",children:"Pending"})]})]}),v.jsxs("div",{className:"summary-card",children:[v.jsx("div",{className:"summary-icon",children:v.jsx(Go,{className:"w-6 h-6"})}),v.jsxs("div",{className:"summary-content",children:[v.jsx("div",{className:"summary-value",children:f}),v.jsx("div",{className:"summary-label",children:"Completed"})]})]}),v.jsxs("div",{className:"summary-card",children:[v.jsx("div",{className:"summary-icon",children:v.jsx(uO,{className:"w-6 h-6"})}),v.jsxs("div",{className:"summary-content",children:[v.jsxs("div",{className:"summary-value",children:["₹",d]}),v.jsx("div",{className:"summary-label",children:"Revenue"})]})]})]}),v.jsx("div",{className:"charts-section",children:v.jsx(tr,{title:"Quick Actions",children:v.jsxs("div",{className:"quick-actions-grid",children:[v.jsxs("button",{className:"quick-action-btn pending-orders-btn bg-gray-100 dark:bg-gray-700 text-black dark:text-white transition-colors duration-300",onClick:()=>{i("/orders?status=pending")},children:[v.jsx(gw,{className:"btn-icon text-black dark:text-white",size:24}),v.jsx("div",{className:"btn-text text-black dark:text-white",children:"View Pending Orders"})]}),v.jsxs("button",{className:"quick-action-btn toggle-availability-btn bg-gray-100 dark:bg-gray-700 text-black dark:text-white transition-colors duration-300",onClick:()=>x(!0),children:[v.jsx(mw,{className:"btn-icon text-black dark:text-white",size:24}),v.jsx("div",{className:"btn-text text-black dark:text-white",children:"Toggle Item Availability"})]}),v.jsxs("button",{className:"quick-action-btn revert-delivered-btn bg-gray-100 dark:bg-gray-700 text-black dark:text-white transition-colors duration-300",onClick:()=>S(!0),children:[v.jsx(IO,{className:"btn-icon text-black dark:text-white",size:24}),v.jsx("div",{className:"btn-text text-black dark:text-white",children:"Revert Delivered Order"})]})]})})}),v.jsx("div",{className:"reports-section",children:v.jsx(tr,{title:"Reports",titleAction:v.jsx("button",{className:"reports-shortcut-btn",onClick:()=>_(!0),children:"View Full Reports"}),children:v.jsx("div",{className:"reports-preview",children:v.jsxs("div",{className:"reports-buttons",children:[v.jsx("button",{className:"reports-btn export-csv-btn",onClick:ne,children:"Export CSV"}),v.jsx("button",{className:"reports-btn export-excel-btn",onClick:se,children:"Export Excel"})]})})})}),y&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h3",{children:"Toggle Item Availability"}),v.jsx("button",{className:"modal-close",onClick:()=>x(!1),children:v.jsx(mn,{size:20})})]}),v.jsx("div",{className:"modal-body",children:j?v.jsx("div",{className:"loading",children:"Loading items..."}):v.jsx("div",{className:"items-list",children:T.map(U=>v.jsxs("div",{className:"item-row",children:[v.jsx("span",{className:"item-name",children:U.name}),v.jsxs("label",{className:"toggle-switch",children:[v.jsx("input",{type:"checkbox",checked:U.is_available||!1,onChange:()=>de(U.id,U.is_available||!1)}),v.jsx("span",{className:"slider"})]})]},U.id))})})]})}),b&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h3",{children:"Revert Delivered Orders"}),v.jsx("button",{className:"modal-close",onClick:()=>S(!1),children:v.jsx(mn,{size:20})})]}),v.jsx("div",{className:"modal-body",children:H?v.jsx("div",{className:"loading",children:"Loading orders..."}):v.jsx("div",{className:"orders-list",children:O.length===0?v.jsx("div",{className:"no-orders",children:"No delivered orders found"}):O.map(U=>v.jsxs("div",{className:"order-row",children:[v.jsxs("div",{className:"order-info",children:[v.jsxs("div",{className:"order-id",children:["Order #",U.id?.slice(-4)]}),v.jsx("div",{className:"order-item",children:U.item_name||"Food Item"}),v.jsx("div",{className:"order-time",children:new Date(U.created_at).toLocaleString()})]}),v.jsx("button",{className:"revert-btn",onClick:()=>Se(U.id),children:"Revert"})]},U.id))})})]})}),E&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content reports-modal",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h3",{children:"Reports"}),v.jsx("button",{className:"modal-close",onClick:()=>_(!1),children:v.jsx(mn,{size:20})})]}),v.jsx("div",{className:"modal-body",children:v.jsx($I,{})})]})})]})}function $I(){const[n,e]=R.useState(()=>new Date(Date.now()-864e5).toISOString().slice(0,10)),[t,r]=R.useState(()=>new Date().toISOString().slice(0,10)),[i,a]=R.useState([]);R.useEffect(()=>{(async()=>{try{if(window.__IARE_DELIVERED__&&window.__IARE_DELIVERED__.length>0)a(window.__IARE_DELIVERED__);else{const{data:y,error:x}=await me.from("orders").select("*").eq("status","DELIVERED").order("created_at",{ascending:!1});if(x)throw x;a(y||[])}}catch(y){console.error("Failed to fetch delivered orders:",y),a([])}})()},[]);const s=g=>{const y=new Date(g);return isNaN(y)?null:y.getTime()},c=i.filter(g=>{const y=s(g.created_at||g.createdAt||g.received_at);s(g.delivered_at||g.deliveredAt||g.updated_at);const x=new Date(n).getTime(),b=new Date(t).getTime()+1440*60*1e3-1;return y&&y>=x&&y<=b}).map(g=>{const y=s(g.created_at||g.createdAt||g.received_at),x=s(g.delivered_at||g.deliveredAt||g.updated_at),b=g.token_no??g.order_token??g.token??g.token_number??g.id??null;return{id:g.id,token:b,item:g.item_name||g.item||"Food Item",total_amount:g.total_amount||g.total||g.price||0,receivedTs:y,deliveredTs:x}}),f=c.reduce((g,y)=>({orders:g.orders+1,revenue:g.revenue+(y.total_amount||0),items:g.items+1,PENDING:g.PENDING+(Fe(y.status)==="PENDING"?1:0),PREPARING:g.PREPARING+(Fe(y.status)==="PREPARING"?1:0),READY:g.READY+(Fe(y.status)==="READY"?1:0)}),{orders:0,revenue:0,items:0,PENDING:0,PREPARING:0,READY:0}),d=()=>{const g=["Order Token","Item","Total","Received At","Delivered At"],y=O=>'"'+String(O).replace(/"/g,'""')+'"',x=O=>O?new Date(O).toISOString().slice(0,19).replace("T"," "):"",b=c.map(O=>[y(O.token?"#"+O.token:""),y(O.item),y(O.total_amount||0),y(x(O.receivedTs)),y(x(O.deliveredTs))].join(",")),S=["",y("Total Revenue"),y(f.revenue)].join(","),E=[g.join(","),...b,"",S].join(`
`),_=new Blob([E],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(_),C=document.createElement("a");C.href=T,C.download=`reports_${n}_to_${t}.csv`,C.click(),URL.revokeObjectURL(T)},p=()=>{const g=`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body>
      <table border="1">
        <tr><th>Order Token</th><th>Item</th><th>Total</th><th>Received At</th><th>Delivered At</th></tr>
        ${c.map(S=>`<tr>
          <td>${S.token?"#"+S.token:""}</td>
          <td>${S.item}</td>
          <td>₹${S.total_amount||0}</td>
          <td>${new Date(S.receivedTs).toLocaleString()}</td>
          <td>${new Date(S.deliveredTs).toLocaleString()}</td>
        </tr>`).join("")}
        <tr><td colspan="2"><strong>Total Revenue</strong></td><td><strong>₹${f.revenue}</strong></td><td colspan="2"></td></tr>
      </table></body></html>`,y=new Blob(["\uFEFF",g],{type:"application/vnd.ms-excel"}),x=URL.createObjectURL(y),b=document.createElement("a");b.href=x,b.download=`reports_${n}_to_${t}.xls`,b.click(),URL.revokeObjectURL(x)};return v.jsxs("div",{className:"reports-modal-content",children:[v.jsxs("div",{className:"reports-filters",children:[v.jsxs("div",{className:"field",style:{minWidth:220},children:[v.jsx("label",{className:"label",children:"From"}),v.jsx("input",{type:"date",className:"input",value:n,onChange:g=>e(g.target.value)})]}),v.jsxs("div",{className:"field",style:{minWidth:220},children:[v.jsx("label",{className:"label",children:"To"}),v.jsx("input",{type:"date",className:"input",value:t,onChange:g=>r(g.target.value)})]}),v.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[v.jsx("button",{className:"btn",onClick:d,children:"Export CSV"}),v.jsx("button",{className:"btn",onClick:p,children:"Export Excel"})]})]}),v.jsxs("div",{className:"reports-table",children:[v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Order Token"}),v.jsx("th",{children:"Item"}),v.jsx("th",{children:"Total"}),v.jsx("th",{children:"Received"}),v.jsx("th",{children:"Delivered"})]})}),v.jsx("tbody",{children:c.slice(0,10).map(g=>v.jsxs("tr",{children:[v.jsx("td",{children:g.token?"#"+g.token:""}),v.jsx("td",{children:g.item}),v.jsxs("td",{children:["₹",g.total_amount||0]}),v.jsx("td",{children:new Date(g.receivedTs).toLocaleString()}),v.jsx("td",{children:new Date(g.deliveredTs).toLocaleString()})]},g.id))})]}),c.length>10&&v.jsxs("div",{className:"table-note",children:["Showing first 10 of ",c.length," orders. Export to see all data."]})]})]})}function qI(){const[n,e]=R.useState(null),[t,r]=R.useState(null),[i,a]=R.useState([]),[s,c]=R.useState([]),[f,d]=R.useState(!1),[p,g]=R.useState(""),[y,x]=R.useState([]),[b,S]=R.useState("all"),{status:E,updateStatus:_,refreshStatus:T}=xw(),[C,O]=R.useState([]),[D,j]=R.useState(!1),[L,H]=R.useState("dine_in");Pl();const{suppressNotificationForOrder:$,showOrderNotification:ne}=Wu(),[se,le]=R.useState(null),ue=(I,P=1)=>{O(q=>q.find(te=>te.id===I.id)?q.map(te=>te.id===I.id?{...te,quantity:te.quantity+P}:te):[...q,{...I,quantity:P}])},de=(I,P)=>{const q=Math.max(1,P||1);O(ie=>ie.map(te=>te.id===I?{...te,quantity:q}:te))},Se=I=>{O(P=>P.filter(q=>q.id!==I))},U=()=>C.reduce((I,P)=>I+P.price*P.quantity,0),F=()=>C.reduce((I,P)=>I+P.quantity,0);R.useEffect(()=>{const I=async()=>{try{let q=0,ie=[];for(;;){const J=q+1e3-1,{data:pe,error:ae}=await me.from("food_items").select("*").eq("is_active",!0).range(q,J);if(ae)throw ae;const ye=pe||[];if(ie=ie.concat(ye),ye.length<1e3)break;q+=1e3}const te=ie.map(J=>({id:J.id??J.item_id??J.slug??String(Math.random()).slice(2),name:J.name??J.item_name??"Item",price:J.price??J.cost??0,image:J.image_url??J.image??J.photo??"https://via.placeholder.com/300?text=Food",description:J.description??"",availableQuantity:J.available_quantity??0,isAvailable:J.is_available??!0,inStock:J.is_available!==!1&&J.available_quantity>0,categoryId:J.category_id??null}));te.length===0?(console.log("No food items found in database, using fallback items"),a([{id:"fallback_1",name:"Veg Biryani",price:180,image:"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg",description:"Delicious vegetarian biryani"},{id:"fallback_2",name:"Masala Dosa",price:80,image:"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg",description:"Crispy dosa with potato filling"},{id:"fallback_3",name:"Samosa",price:40,image:"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg",description:"Spicy potato and pea samosa"}])):a(te)}catch(P){console.error("Failed to load food_items:",P),a([{id:"fallback_1",name:"Veg Biryani",price:180,image:"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg",description:"Delicious vegetarian biryani"},{id:"fallback_2",name:"Masala Dosa",price:80,image:"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg",description:"Crispy dosa with potato filling"},{id:"fallback_3",name:"Samosa",price:40,image:"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg",description:"Spicy potato and pea samosa"}])}};Ht=I,I()},[]),R.useEffect(()=>{(async()=>{try{const{data:P,error:q}=await me.from("categories").select("*").order("name",{ascending:!0});if(q)throw q;x(P||[])}catch(P){console.error("Failed to load categories:",P),x([])}})()},[]);const K=async()=>{d(!0);try{let P=0,q=[];for(;;){const ie=P+1e3-1,{data:te,error:J}=await me.from("orders").select("id, item_name, status, user_id, created_at, order_token").neq("user_id",Rr).order("created_at",{ascending:!1}).range(P,ie);if(J)throw J;const pe=te||[];if(q=q.concat(pe),pe.length<1e3)break;P+=1e3}c(q)}catch(I){console.error("Failed to fetch Counter tokens:",I)}finally{d(!1)}};R.useEffect(()=>{K()},[]);const he=async(I,P=1)=>{try{const q=Math.max(0,Number(P)||0);if(!I||q===0)return;const{data:ie,error:te}=await me.from("food_items").select("available_quantity").eq("id",I).single();if(te){console.error("❌ Failed to fetch current stock:",te);return}const J=ie?.available_quantity,pe=Number.isFinite(Number(J))?Number(J):0,ae=Math.max(0,pe-q),ye={available_quantity:ae,updated_at:new Date().toISOString()};ae===0&&(ye.is_available=!1,console.log("⚠️ Stock reached 0 - marking item as unavailable"));const{error:Ce}=await me.from("food_items").update(ye).eq("id",I);Ce?console.error("❌ Failed to update stock:",Ce):(console.log(`✅ Stock reduced safely: ${pe} -> ${ae}${ae===0?" (marked unavailable)":""}`),Ht&&Ht())}catch(q){console.error("❌ decrementStockSafely error:",q)}},k=async I=>{if(C.length===0){le({type:"error",message:"Your cart is empty!"}),setTimeout(()=>le(null),2e3);return}try{console.log("🛒 Starting checkout process for:",C.length,"items - creating separate orders");const P=[];for(const te of C){console.log("📝 Creating separate order for:",te.name,"Qty:",te.quantity);const J=crypto.randomUUID(),pe=Math.floor(1e3+Math.random()*9e3).toString();console.log("🆔 Generated order ID:",J,"Token:",pe);const{data:ae,error:ye}=await me.from("orders").insert({id:J,order_id:J,item_name:te.name,total_amount:te.price*te.quantity,status:"preparing",order_type:I==="takeaway",order_token:pe,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if($(J),ye)throw console.error("❌ Failed to create order for item:",te.name,ye),new Error(`Failed to create order for ${te.name}: ${ye.message}`);console.log("✅ Order created for item:",te.name,ae);const{error:Ce}=await me.from("order_items").insert({order_id:J,food_item_id:te.id,quantity:te.quantity,price_per_unit:te.price,total_price:te.price*te.quantity,created_at:new Date().toISOString()});if(Ce)throw console.error("❌ Failed to create order item for:",te.name,Ce),new Error(`Failed to add item ${te.name} to order: ${Ce.message}`);await he(te.id,te.quantity),P.push({item:te.name,token:pe})}O([]),j(!1),r(P[P.length-1]?.token);const q=I==="dine_in"?"Dine In":"Takeaway",ie=P.map(te=>`#${te.token}`).join(", ");le({type:"success",message:`✅ Checkout successful! ${P.length} order(s) created • Tokens: ${ie} • ${q}`}),setTimeout(()=>le(null),3500),Ht&&Ht(),K(),console.log("🎉 Checkout completed successfully!")}catch(P){console.error("❌ Checkout failed:",P),le({type:"error",message:`❌ Checkout failed: ${P.message}`}),setTimeout(()=>le(null),3500)}};return v.jsxs("div",{className:"home-dashboard",children:[v.jsxs(tr,{title:"Menu - Place Order (Counter)",children:[v.jsx("div",{className:"search-section",children:v.jsx("div",{className:"form",children:v.jsx("div",{className:"field",children:v.jsx("input",{className:"input search-input",placeholder:"Search menu items...",value:p,onChange:I=>g(I.target.value)})})})}),y.length>0&&v.jsxs("div",{style:{marginTop:"16px",marginBottom:"8px",display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[v.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text-primary)",marginRight:"4px"},children:"Category:"}),v.jsxs("button",{onClick:()=>S("all"),style:{padding:"6px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:b==="all"?"#3b82f6":"#f3f4f6",color:b==="all"?"#ffffff":"#374151",border:"none",borderRadius:"20px",cursor:"pointer",transition:"all 0.2s",boxShadow:b==="all"?"0 2px 8px rgba(59, 130, 246, 0.3)":"none"},onMouseEnter:I=>{b!=="all"&&(I.target.style.backgroundColor="#e5e7eb")},onMouseLeave:I=>{b!=="all"&&(I.target.style.backgroundColor="#f3f4f6")},children:["All (",i.length,")"]}),y.map(I=>{const P=i.filter(q=>q.categoryId===I.id).length;return v.jsxs("button",{onClick:()=>S(I.id),style:{padding:"6px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:b===I.id?"#3b82f6":"#f3f4f6",color:b===I.id?"#ffffff":"#374151",border:"none",borderRadius:"20px",cursor:"pointer",transition:"all 0.2s",boxShadow:b===I.id?"0 2px 8px rgba(59, 130, 246, 0.3)":"none"},onMouseEnter:q=>{b!==I.id&&(q.target.style.backgroundColor="#e5e7eb")},onMouseLeave:q=>{b!==I.id&&(q.target.style.backgroundColor="#f3f4f6")},children:[I.name," (",P,")"]},I.id)})]}),v.jsxs("div",{className:`status-banner ${E==="closed"?"status-closed":"status-open"}`,children:[v.jsxs("div",{className:"status-content",children:[v.jsx("div",{className:"status-icon",children:E==="closed"?"🔴":"🟢"}),v.jsxs("div",{className:"status-text",children:[v.jsxs("h3",{className:"status-title",children:["Canteen ",E==="closed"?"Closed":"Open"]}),v.jsx("p",{className:"status-description",children:E==="closed"?"Orders cannot be placed while the canteen is closed. Please wait for the canteen to open.":"Orders can be placed normally. Canteen is currently open."})]})]}),v.jsx("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:v.jsx("button",{className:`status-toggle-btn ${E==="closed"?"toggle-closed":"toggle-open"}`,onClick:async()=>{try{await _(E==="open"?"closed":"open")}catch(I){console.error("Toggle failed:",I),alert("Failed to update canteen status. Please try again.")}},children:E==="open"?"🔴 Close Canteen":"🟢 Open Canteen"})})]}),v.jsx("div",{className:"menu-items-grid",children:i.filter(I=>{const P=p.trim().toLowerCase(),q=P?String(I.name||"").toLowerCase().includes(P):!0,ie=b==="all"||I.categoryId===b;return q&&ie}).sort((I,P)=>{const q=I.inStock?1:0,ie=P.inStock?1:0;if(q!==ie)return ie-q;const te=p.trim().toLowerCase(),J=String(I.name||"").toLowerCase(),pe=String(P.name||"").toLowerCase();if(te){const ae=J.startsWith(te),ye=pe.startsWith(te);if(ae&&!ye)return-1;if(!ae&&ye)return 1}return J.localeCompare(pe)}).map(I=>v.jsxs("div",{className:"menu-item-card",style:{opacity:I.inStock?1:.6,position:"relative"},children:[v.jsxs("div",{className:"menu-item-image",style:{backgroundImage:`url(${I.image})`},children:[v.jsxs("div",{className:"price-badge",children:["₹",I.price]}),!I.inStock&&v.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(239, 68, 68, 0.95)",color:"white",padding:"8px 16px",borderRadius:"8px",fontWeight:"bold",fontSize:"14px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:2},children:"🔴 OUT OF STOCK"})]}),v.jsxs("div",{className:"menu-item-content",children:[v.jsx("h3",{className:"menu-item-title",children:I.name}),v.jsx("p",{className:"menu-item-description",children:I.description}),I.inStock?v.jsx(v.Fragment,{children:v.jsxs("div",{style:{marginTop:"12px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",justifyContent:"center"},children:[v.jsx("button",{onClick:()=>{const P=C.find(q=>q.id===I.id)?.quantity||0;P>1?de(I.id,P-1):P===1&&Se(I.id)},disabled:E==="closed",style:{width:"28px",height:"28px",borderRadius:"50%",border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-primary)",cursor:E==="closed"?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:E==="closed"?.5:1},children:"-"}),v.jsx("span",{style:{minWidth:"40px",textAlign:"center",fontWeight:"500",color:"var(--text-primary)",fontSize:"16px"},children:C.find(P=>P.id===I.id)?.quantity||0}),v.jsx("button",{onClick:()=>{const P=C.find(q=>q.id===I.id)?.quantity||0;P===0?ue(I,1):de(I.id,P+1)},disabled:E==="closed",style:{width:"28px",height:"28px",borderRadius:"50%",border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-primary)",cursor:E==="closed"?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:E==="closed"?.5:1},children:"+"})]}),v.jsx("button",{className:`order-btn ${E==="closed"?"btn-disabled":"btn-primary"}`,onClick:()=>{const P=C.find(q=>q.id===I.id)?.quantity||0;P===0?ue(I,1):de(I.id,P+1)},disabled:E==="closed",style:{width:"100%"},children:E==="closed"?"🔴 Canteen Closed":C.find(P=>P.id===I.id)?.quantity>0?"🛒 Add More":"🛒 Add to Cart"})]})}):v.jsx("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"8px",textAlign:"center",color:"#991b1b",fontWeight:"500",fontSize:"14px"},children:"⚠️ Currently Unavailable"})]})]},I.id))}),t&&v.jsxs("div",{className:"success-message",children:[v.jsx("div",{className:"success-title",children:"🎉 Order Placed Successfully!"}),v.jsxs("div",{className:"token-number",children:["Token No: #",t]}),v.jsx("div",{className:"success-description",children:"Please note this token number for order tracking"})]}),v.jsxs("div",{className:"instructions-section",children:[v.jsx("strong",{children:"Instructions:"})," Click on any menu item to place an order for cash payment. Each order will be created with a unique token number and automatically appear in the Orders panel."]})]}),v.jsx(tr,{title:"Counter Tokens (Placed by Counter)",children:f?v.jsx("div",{className:"muted",children:"Loading..."}):s.length===0?v.jsx("div",{className:"muted",children:"No Counter orders yet."}):v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Token"}),v.jsx("th",{children:"Item"}),v.jsx("th",{children:"Status"}),v.jsx("th",{children:"Time"})]})}),v.jsx("tbody",{children:s.slice(0,10).map(I=>v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#10b981",fontSize:"16px",backgroundColor:"#f0fdf4",padding:"4px 8px",borderRadius:"4px",border:"1px solid #bbf7d0"},children:I.token_no||I.order_token?"#"+(I.token_no||I.order_token):"N/A"})}),v.jsx("td",{children:I.item_name}),v.jsxs("td",{children:[Fe(I.status)==="PENDING"&&v.jsx("span",{className:"badge pending",children:"PENDING"}),Fe(I.status)==="PREPARING"&&v.jsx("span",{className:"badge preparing",children:"PREPARING"}),Fe(I.status)==="READY"&&v.jsx("span",{className:"badge ready",children:"READY"}),Fe(I.status)==="DELIVERED"&&v.jsx("span",{className:"badge ready",children:"DELIVERED"})]}),v.jsx("td",{children:I.created_at?new Date(I.created_at).toLocaleTimeString():"-"})]},I.id))})]})}),t&&v.jsx(tr,{title:"Your Token",children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[v.jsxs("div",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666",fontSize:"1.1em"},children:["#",t]}),v.jsx("div",{className:"muted",children:"Please share this token at the counter."})]})}),v.jsx("div",{className:"floating-cart-icon",style:{position:"fixed",bottom:"20px",right:"40px",zIndex:9999},children:v.jsxs("button",{onClick:()=>j(!D),className:"cart-icon-button",style:{width:"70px",height:"70px",borderRadius:"50%",backgroundColor:"#3b82f6",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease",position:"relative"},onMouseEnter:I=>{I.target.style.transform="scale(1.1)",I.target.style.boxShadow="0 6px 20px rgba(0, 0, 0, 0.25)",I.target.style.backgroundColor="#2563eb"},onMouseLeave:I=>{I.target.style.transform="scale(1)",I.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",I.target.style.backgroundColor="#3b82f6"},children:[v.jsx(su,{size:28}),F()>0&&v.jsx("div",{className:"cart-badge",style:{position:"absolute",top:"-8px",right:"-8px",backgroundColor:"#ef4444",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid white"},children:F()})]})}),v.jsx(Dn,{children:D&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"cart-backdrop",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998},onClick:()=>j(!1)}),v.jsxs(Ve.div,{className:"cart-side-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:{position:"fixed",top:0,right:0,width:"400px",height:"100vh",backgroundColor:"#ffffff",borderLeft:"1px solid #e5e7eb",zIndex:9999,display:"flex",flexDirection:"column",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.15)"},children:[v.jsxs("div",{className:"cart-header",style:{padding:"20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9fafb"},children:[v.jsxs("h3",{style:{margin:0,color:"#1f2937",display:"flex",alignItems:"center",gap:"8px",fontSize:"18px",fontWeight:"600"},children:[v.jsx(su,{size:20}),"Your Cart"]}),v.jsx("button",{onClick:()=>j(!1),className:"cart-close-btn",style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:I=>{I.target.style.backgroundColor="#f3f4f6",I.target.style.borderColor="#9ca3af"},onMouseLeave:I=>{I.target.style.backgroundColor="#ffffff",I.target.style.borderColor="#d1d5db"},children:v.jsx(mn,{size:16})})]}),v.jsx("div",{className:"cart-content",style:{flex:1,padding:"20px",overflowY:"auto",display:"flex",flexDirection:"column",backgroundColor:"#ffffff"},children:C.length===0?v.jsxs("div",{className:"cart-empty-state",style:{textAlign:"center",color:"#6b7280",padding:"40px 20px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[v.jsx(su,{size:48,style:{opacity:.3,color:"#9ca3af"}}),v.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#374151"},children:"Your cart is empty"}),v.jsx("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Add some items to get started!"})]}):v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{flex:1},children:C.map(I=>v.jsxs("div",{className:"cart-item",style:{display:"flex",alignItems:"center",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"12px",marginBottom:"12px",border:"1px solid #e5e7eb",gap:"12px"},children:[v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsx("div",{style:{fontWeight:"500",color:"#1f2937",marginBottom:"4px",fontSize:"16px",wordWrap:"break-word",overflowWrap:"break-word"},children:I.name}),v.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:["₹",I.price," each"]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx("button",{onClick:()=>de(I.id,I.quantity-1),className:"quantity-btn",style:{width:"32px",height:"32px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:"16px",fontWeight:"bold"},onMouseEnter:P=>{P.target.style.backgroundColor="#f3f4f6",P.target.style.borderColor="#9ca3af",P.target.style.color="#1f2937"},onMouseLeave:P=>{P.target.style.backgroundColor="#ffffff",P.target.style.borderColor="#d1d5db",P.target.style.color="#374151"},children:v.jsx(gO,{size:16})}),v.jsx("input",{type:"number",min:"0",value:I.quantity,onChange:P=>{const q=parseInt(P.target.value)||0;de(I.id,q)},onBlur:P=>{const q=P.target.value.trim(),ie=parseInt(q)||0;q==="0"||ie<=0&&q!==""?Se(I.id):(q===""||ie<1)&&de(I.id,1)},onKeyDown:P=>{P.key==="Backspace"&&P.target.value===""&&(P.preventDefault(),P.target.value="1",de(I.id,1)),P.key==="Enter"&&P.target.blur()},style:{width:"50px",height:"32px",textAlign:"center",fontWeight:"500",color:"#1f2937",fontSize:"16px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#ffffff",outline:"none",padding:"0 4px"},onFocus:P=>P.target.select()}),v.jsx("button",{onClick:()=>de(I.id,I.quantity+1),className:"quantity-btn",style:{width:"32px",height:"32px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:"16px",fontWeight:"bold"},onMouseEnter:P=>{P.target.style.backgroundColor="#f3f4f6",P.target.style.borderColor="#9ca3af",P.target.style.color="#1f2937"},onMouseLeave:P=>{P.target.style.backgroundColor="#ffffff",P.target.style.borderColor="#d1d5db",P.target.style.color="#374151"},children:v.jsx(bO,{size:16})})]}),v.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",minWidth:"60px",textAlign:"right",fontSize:"16px"},children:["₹",I.price*I.quantity]}),v.jsx("button",{onClick:()=>Se(I.id),className:"remove-btn",style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"#ef4444",color:"white",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",marginLeft:"8px"},onMouseEnter:P=>{P.target.style.backgroundColor="#dc2626"},onMouseLeave:P=>{P.target.style.backgroundColor="#ef4444"},children:v.jsx(vw,{size:14})})]})]},I.id))}),v.jsxs("div",{className:"cart-footer",style:{borderTop:"1px solid #e5e7eb",paddingTop:"20px",marginTop:"20px"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[v.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:["Total: ₹",U()]}),v.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[F()," items"]})]}),v.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"12px",alignItems:"center"},children:[v.jsx("span",{style:{fontSize:"14px",color:"#374151",fontWeight:500},children:"Order Type:"}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[v.jsx("input",{type:"radio",name:"orderType",value:"dine_in",checked:L==="dine_in",onChange:()=>H("dine_in")}),v.jsx("span",{children:"🍽️ Dine In"})]}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[v.jsx("input",{type:"radio",name:"orderType",value:"takeaway",checked:L==="takeaway",onChange:()=>H("takeaway")}),v.jsx("span",{children:"🥡 Takeaway"})]})]}),v.jsxs("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[v.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to clear the cart?")&&(O([]),le({type:"success",message:"Cart cleared!"}),setTimeout(()=>le(null),2e3))},className:"clear-cart-btn",style:{width:"100%",padding:"10px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ffffff",color:"#dc2626",border:"1px solid #dc2626",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:I=>{I.target.style.backgroundColor="#fef2f2"},onMouseLeave:I=>{I.target.style.backgroundColor="#ffffff"},children:[v.jsx(mn,{size:16}),"Clear Cart"]}),v.jsxs("button",{onClick:()=>{k(L)},className:"checkout-btn",style:{width:"100%",padding:"12px 16px",fontSize:"16px",fontWeight:"600",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:I=>{I.target.style.backgroundColor="#2563eb"},onMouseLeave:I=>{I.target.style.backgroundColor="#3b82f6"},children:[v.jsx(su,{size:18}),"Checkout"]})]})]})]})})]})]})}),v.jsx(Dn,{children:se&&v.jsx(Ve.div,{initial:{opacity:0,y:-40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-40,scale:.98},transition:{type:"spring",stiffness:300,damping:24},style:{position:"fixed",top:16,left:0,right:0,margin:"0 auto",zIndex:1e4,background:se.type==="success"?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",padding:"12px 16px",borderRadius:10,boxShadow:"0 14px 30px rgba(0,0,0,0.22)",fontWeight:700,maxWidth:520,width:"calc(100% - 32px)",textAlign:"center",border:"1px solid rgba(255,255,255,0.15)",backdropFilter:"blur(6px)"},children:se.message})})]})}function WI({withTitle:n=!0,orders:e=[],orderItems:t=[],onUpdateStatus:r=()=>{},onCancel:i=()=>{},idHeader:a="Order ID",updatingIds:s={}}){const c=d=>t.filter(p=>p.order_id===d),f=d=>typeof d=="boolean"?d?"🥡 Takeaway":"🍽️ Dine In":d==="takeaway"?"🥡 Takeaway":"🍽️ Dine In";return v.jsx(tr,{title:n?"Orders":void 0,children:v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:a}),v.jsx("th",{children:"Items"}),v.jsx("th",{children:"Total"}),v.jsx("th",{children:"Type"}),v.jsx("th",{children:"Status"}),v.jsx("th",{children:"Placed By"}),v.jsx("th",{children:"Actions"})]})}),v.jsx("tbody",{children:e.map(d=>{const p=c(d.id),g=p.length>0;return v.jsxs("tr",{children:[v.jsx("td",{style:{verticalAlign:"middle"},children:v.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666"},children:d.token_no||d.order_token?"#"+(d.token_no||d.order_token):"Not available"})}),v.jsx("td",{style:{position:"relative",verticalAlign:"middle"},children:g?v.jsx("div",{className:"order-items-cell",children:p.map((y,x)=>{const b=y.food_items?.price||y.price||0;return v.jsxs("div",{style:{marginBottom:x<p.length-1?"4px":"0",fontSize:"14px"},children:[v.jsx("strong",{children:y.food_items?.name||"Unknown Item"}),v.jsxs("span",{style:{color:"#666",marginLeft:"8px",fontSize:"12px"},children:["(Qty: ",y.quantity," × ₹",b,")"]})]},x)})}):v.jsx("div",{children:v.jsx("strong",{children:d.item_name||"Unknown Item"})})}),v.jsx("td",{style:{verticalAlign:"middle"},children:d.total_amount!=null?`₹${d.total_amount}`:"-"}),v.jsx("td",{style:{verticalAlign:"middle"},children:v.jsx("span",{style:{fontSize:"12px"},children:f(d.order_type)})}),v.jsxs("td",{style:{verticalAlign:"middle"},children:[Fe(d.status)==="PENDING"&&v.jsx("span",{className:"badge pending",children:"PENDING"}),Fe(d.status)==="PREPARING"&&v.jsx("span",{className:"badge preparing",children:"PREPARING"}),Fe(d.status)==="READY"&&v.jsx("span",{className:"badge ready",children:"READY"})]}),v.jsx("td",{style:{verticalAlign:"middle"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:[d.user_id===Rr?v.jsx(lO,{className:"w-5 h-5 text-gray-700 dark:text-white"}):v.jsx(PO,{className:"w-5 h-5 text-gray-700 dark:text-white"}),d.user_id===Rr?v.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:"App"}):v.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:"Counter"})]})}),v.jsx("td",{style:{verticalAlign:"middle"},children:v.jsx("div",{className:"actions",children:s[d.id]?v.jsxs("button",{className:"btn",disabled:!0,children:[v.jsx("span",{className:"spinner",style:{marginRight:6}}),"Updating..."]}):v.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[Fe(d.status)==="PENDING"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>r(d.id,"PREPARING"),children:"Mark Preparing"}),v.jsx("button",{className:"btn",onClick:()=>i(d.id),style:{backgroundColor:"#ef4444",color:"white",border:"none"},children:"Cancel Order"})]}),Fe(d.status)==="PREPARING"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>r(d.id,"READY"),children:"Mark Ready"}),v.jsx("button",{className:"btn",onClick:()=>i(d.id),style:{backgroundColor:"#ef4444",color:"white",border:"none"},children:"Cancel Order"})]}),Fe(d.status)==="READY"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>r(d.id,"DELIVERED"),children:"Mark Delivered"}),v.jsx("button",{className:"btn",onClick:()=>i(d.id),style:{backgroundColor:"#ef4444",color:"white",border:"none"},children:"Cancel Order"})]})]})})})]},d.id)})})]})})}function XI({orders:n,deliveredOrders:e=[],activity:t=[],onUpdateStatus:r,onRevert:i,onCancel:a,view:s="live",pictureMode:c=!1,updatingIds:f={}}){const d=s==="live",[p,g]=R.useState([]),[y,x]=R.useState([]);R.useEffect(()=>{(async()=>{try{let C=0,O=[];for(;;){const L=C+1e3-1,{data:H,error:$}=await me.from("food_items").select("*").range(C,L);if($)throw $;const ne=H||[];if(O=O.concat(ne),ne.length<1e3)break;C+=1e3}g(O);const{data:D,error:j}=await me.from("order_items").select(`
            *,
            food_items (
              name,
              image_url,
              price
            )
          `);j?console.error("Failed to fetch order_items:",j):x(D||[])}catch(T){console.error("Failed to fetch data for orders:",T),g([]),x([])}})()},[]);const b=_=>{try{const T=n.find(O=>O.id===_)||e.find(O=>O.id===_),C=T&&(T.token_no||T.order_token);return C?"#"+C:"Not available"}catch{return"Not available"}},S=_=>y.filter(T=>T.order_id===_),E=_=>{const T=S(_.id);if(T.length>0){const D=T[0];if(D.food_items&&D.food_items.image_url)return D.food_items.image_url}const C=(_.item_name||"").toLowerCase(),O=p.find(D=>{const j=(D.name||D.item_name||"").toLowerCase();return j===C||j.includes(C)||C.includes(j)});return O&&O.image_url?O.image_url:C.includes("samosa")?"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg":C.includes("biryani")?"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg":C.includes("dosa")?"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg":"https://via.placeholder.com/300?text=Food"};return v.jsxs("div",{className:"home-dashboard",children:[s==="activity"?v.jsx(tr,{title:void 0,children:v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{width:"25%"},children:"Item Name"}),v.jsx("th",{style:{width:"15%",textAlign:"center"},children:"Token No"}),v.jsx("th",{style:{width:"20%",textAlign:"center"},children:"From → To"}),v.jsx("th",{style:{width:"20%",textAlign:"center"},children:"At"}),v.jsx("th",{style:{width:"20%",textAlign:"center"},children:"Actions"})]})}),v.jsx("tbody",{children:t.slice(0,20).map((_,T)=>{const O=_.ts&&Date.now()-_.ts<3e5;return v.jsxs("tr",{children:[v.jsx("td",{style:{verticalAlign:"middle"},children:v.jsx("strong",{children:_.itemName||"Order Item"})}),v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:v.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666"},children:b(_.orderId)})}),v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:v.jsxs("span",{style:{whiteSpace:"nowrap"},children:[_.from," → ",_.to]})}),v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",fontSize:"13px"},children:_.at}),v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:O?v.jsx("button",{className:"btn btn-secondary",onClick:()=>i(_),style:{minWidth:"80px",margin:"0 auto"},children:"Revert"}):v.jsx("span",{style:{fontSize:"12px",color:"#9ca3af",fontStyle:"italic",whiteSpace:"nowrap"},children:"Expired"})})]},T)})})]})}):d?c?v.jsx(tr,{title:void 0,children:v.jsx("div",{className:"cards-grid",children:n.map(_=>{const T=S(_.id);return v.jsx("div",{className:"order-card",style:{gridColumn:`span ${Math.max(1,Math.min(3,T&&T.length?T.length:1))}`},children:T&&T.length>1?v.jsx("div",{className:"pm-subcards-row",children:T.map((C,O)=>{const D=C.food_items?.price||C.price||0,j=C.food_items?.image_url||E(_);return v.jsxs("div",{className:`pm-subcard${O>0?" v-sep":""}`,children:[v.jsx("div",{className:"avatar",children:v.jsx("img",{src:j,alt:C.food_items?.name||"Order Item",loading:"lazy",style:{objectFit:"cover",width:"100%",height:"100%",transition:"opacity 0.2s ease-in-out",backgroundColor:"#f3f4f6"},onLoad:L=>{L.currentTarget.style.opacity="1"},onError:L=>{const H=L.currentTarget;H.src!=="https://via.placeholder.com/300?text=Food"&&(H.style.opacity="0.5",setTimeout(()=>{H.src="https://via.placeholder.com/300?text=Food",H.style.opacity="1"},100))}})}),v.jsx("div",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666",fontSize:"0.9em",marginBottom:4},children:_.token_no||_.order_token?"#"+(_.token_no||_.order_token):"Not available"}),v.jsx("div",{className:"pm-item-name",children:C.food_items?.name||"Unknown Item"}),v.jsxs("div",{className:"pm-item-meta",children:["Qty: ",C.quantity," × ₹",D," = ₹",D*C.quantity]}),v.jsx("div",{style:{margin:"8px 0"},children:_.user_id===Rr?v.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:"📱 App"}):v.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:"🧑‍💻 Counter"})}),v.jsxs("div",{style:{marginBottom:12},children:[Fe(_.status)==="PENDING"&&v.jsx("span",{className:"badge pending",children:"PENDING"}),Fe(_.status)==="PREPARING"&&v.jsx("span",{className:"badge preparing",children:"PREPARING"}),Fe(_.status)==="READY"&&v.jsx("span",{className:"badge ready",children:"READY"}),Fe(_.status)==="DELIVERED"&&v.jsx("span",{className:"badge ready",children:"DELIVERED"})]}),v.jsx("div",{className:"actions",style:{justifyContent:"center",display:"flex",flexDirection:"column",gap:"8px",minHeight:0},children:f&&f[_.id]?v.jsxs("button",{className:"btn",disabled:!0,children:[v.jsx("span",{className:"spinner",style:{marginRight:6}}),"Updating..."]}):v.jsxs(v.Fragment,{children:[Fe(_.status)==="PENDING"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn btn-primary",onClick:()=>r(_.id,"PREPARING"),children:"Mark Preparing"}),v.jsx("button",{className:"btn btn-danger",onClick:()=>a(_.id),children:"Cancel Order"})]}),Fe(_.status)==="PREPARING"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn btn-success",onClick:()=>r(_.id,"READY"),children:"Mark Ready"}),v.jsx("button",{className:"btn btn-primary",onClick:()=>r(_.id,"DELIVERED"),children:"Mark Delivered"}),v.jsx("button",{className:"btn btn-danger",onClick:()=>a(_.id),children:"Cancel Order"})]}),Fe(_.status)==="READY"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn btn-primary",onClick:()=>r(_.id,"DELIVERED"),children:"Mark Delivered"}),v.jsx("button",{className:"btn btn-danger",onClick:()=>a(_.id),children:"Cancel Order"})]})]})})]},O)})}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"avatar",children:v.jsx("img",{src:E(_),alt:_.item_name||"Order Item",loading:"lazy",style:{objectFit:"cover",width:"100%",height:"100%",transition:"opacity 0.2s ease-in-out",backgroundColor:"#f3f4f6"},onLoad:C=>{C.currentTarget.style.opacity="1"},onError:C=>{const O=C.currentTarget;O.src!=="https://via.placeholder.com/300?text=Food"&&(O.style.opacity="0.5",setTimeout(()=>{O.src="https://via.placeholder.com/300?text=Food",O.style.opacity="1"},100))}})}),v.jsx("div",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666",fontSize:"0.9em",marginBottom:4},children:_.token_no||_.order_token?"#"+(_.token_no||_.order_token):"Not available"}),v.jsx("div",{className:"pm-item-name",children:_.item_name}),v.jsx("div",{style:{margin:"8px 0"},children:_.user_id===Rr?v.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:"📱 App"}):v.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:"🧑‍💻 Counter"})}),v.jsxs("div",{style:{marginBottom:12},children:[Fe(_.status)==="PENDING"&&v.jsx("span",{className:"badge pending",children:"PENDING"}),Fe(_.status)==="PREPARING"&&v.jsx("span",{className:"badge preparing",children:"PREPARING"}),Fe(_.status)==="READY"&&v.jsx("span",{className:"badge ready",children:"READY"}),Fe(_.status)==="DELIVERED"&&v.jsx("span",{className:"badge ready",children:"DELIVERED"})]}),v.jsx("div",{className:"actions",style:{justifyContent:"center",display:"flex",flexDirection:"column",gap:"8px",minHeight:0},children:f&&f[_.id]?v.jsxs("button",{className:"btn",disabled:!0,children:[v.jsx("span",{className:"spinner",style:{marginRight:6}}),"Updating..."]}):v.jsxs(v.Fragment,{children:[Fe(_.status)==="PENDING"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn btn-primary",onClick:()=>r(_.id,"PREPARING"),children:"Mark Preparing"}),v.jsx("button",{className:"btn btn-danger",onClick:()=>a(_.id),children:"Cancel Order"})]}),Fe(_.status)==="PREPARING"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn btn-success",onClick:()=>r(_.id,"READY"),children:"Mark Ready"}),v.jsx("button",{className:"btn btn-primary",onClick:()=>r(_.id,"DELIVERED"),children:"Mark Delivered"}),v.jsx("button",{className:"btn btn-danger",onClick:()=>a(_.id),children:"Cancel Order"})]}),Fe(_.status)==="READY"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn btn-primary",onClick:()=>r(_.id,"DELIVERED"),children:"Mark Delivered"}),v.jsx("button",{className:"btn btn-danger",onClick:()=>a(_.id),children:"Cancel Order"})]})]})})]})},_.id)})})}):v.jsx(WI,{withTitle:!1,idHeader:"Token No",orders:n,orderItems:y,onUpdateStatus:r,onCancel:a,updatingIds:f}):v.jsx(tr,{title:void 0,children:v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Token No"}),v.jsx("th",{style:{width:"20%"},children:"Item Name"}),v.jsx("th",{style:{width:"10%",textAlign:"right"},children:"Price"}),v.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Date"}),v.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Time"}),v.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Placed By"}),v.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Status"})]})}),v.jsx("tbody",{children:e.map(_=>{const T=_.created_at?new Date(_.created_at):null,C=_.delivered_at?new Date(_.delivered_at):T,O=S(_.id),D=O.length>0;return v.jsxs("tr",{children:[v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:v.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666"},children:_.token_no||_.order_token?"#"+(_.token_no||_.order_token):"N/A"})}),v.jsx("td",{style:{position:"relative",verticalAlign:"middle"},children:D?v.jsx("div",{className:"order-items-cell",children:O.map((j,L)=>{const H=j.food_items?.price||j.price||0;return v.jsxs("div",{style:{marginBottom:L<O.length-1?"4px":"0",fontSize:"14px"},children:[v.jsx("strong",{children:j.food_items?.name||"Unknown Item"}),v.jsxs("span",{style:{color:"#666",marginLeft:"8px",fontSize:"12px"},children:["(Qty: ",j.quantity," × ₹",H,")"]})]},L)})}):v.jsx("strong",{children:_.item_name||"Unknown Item"})}),v.jsx("td",{style:{textAlign:"right",verticalAlign:"middle"},children:_.total_amount!=null?`₹${_.total_amount}`:"-"}),v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",fontSize:"13px"},children:C?C.toLocaleDateString():"-"}),v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",fontSize:"13px"},children:C?C.toLocaleTimeString():"-"}),v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:_.user_id===Rr?v.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:"App"}):v.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:"Counter"})}),v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:v.jsx("span",{className:"badge ready",children:"DELIVERED"})})]},_.id)})})]})}),null]})}function YI(){Bu();const[n,e]=R.useState([]),[t,r]=R.useState({id:"",name:"",removeItemName:""}),[i,a]=R.useState(""),[s,c]=R.useState("all"),[f,d]=R.useState(!1),[p,g]=R.useState(!1),[y,x]=R.useState({name:"",cost:"",description:"",image:null}),[b,S]=R.useState(!1),[E,_]=R.useState(""),[T,C]=R.useState("id"),[O,D]=R.useState("available_quantity"),[j,L]=R.useState(null),[H,$]=R.useState(null),[ne,se]=R.useState({show:!1,message:"",type:"success"}),[le,ue]=R.useState("all"),[de,Se]=R.useState(!1),[U,F]=R.useState(null),[K,he]=R.useState(null),[k,I]=R.useState(!1),[P,q]=R.useState({name:"",cost:"",description:"",image:null}),ie=async()=>{try{let fe=0,ve=[];for(;;){const Pe=fe+1e3-1,{data:Re,error:be}=await me.from("food_items").select("*").range(fe,Pe);if(be)throw be;const Tt=Re||[];if(ve=ve.concat(Tt),Tt.length<1e3)break;fe+=1e3}ve=ve.filter(Pe=>Pe.is_active!==!1);const we=ve[0]||{},xe=["id","item_id","slug","code"],Oe=["available_quantity","in_stock","available","is_available","stock","status"],Ae=xe.find(Pe=>Object.prototype.hasOwnProperty.call(we,Pe))||"id",it=Oe.find(Pe=>Object.prototype.hasOwnProperty.call(we,Pe))||"in_stock";C(Ae),D(it);const Ye=ve.map(Pe=>{const Re=Pe[Ae]??String(Math.random()).slice(2),be=Pe.name??Pe.item_name??Pe.title??Pe.label??"Item",Tt=Pe.price??Pe.cost??0,xr=Pe.available_quantity??Pe.quantity??Pe.stock??0,nr=(typeof xr=="number"?xr>0:void 0)??Pe.in_stock??Pe.available??Pe.is_available??(typeof Pe.stock=="number"?Pe.stock>0:void 0)??(typeof Pe.status=="string"?String(Pe.status).toLowerCase()==="in":void 0)??!0;return{id:Re,name:be,price:Tt,availableQuantity:xr,inStock:!!nr,image_url:Pe.image_url,description:Pe.description,originalData:Pe}});e(Ye)}catch(V){console.error("Error fetching items:",V)}},te=()=>{ie()},J=V=>{if(!V)return null;const fe=n.find(ve=>ve.name.toLowerCase().trim()===V.toLowerCase().trim());return console.log("Searching for:",V,"Found:",fe,"Items:",n.map(ve=>ve.name)),fe},pe=()=>le==="all"?n:n.filter(V=>{switch(le){case"in-stock":return V.inStock&&V.availableQuantity>20;case"low-stock":return V.inStock&&V.availableQuantity<=20&&V.availableQuantity>5;case"very-low":return V.inStock&&V.availableQuantity<=5&&V.availableQuantity>0;case"out-of-stock":return!V.inStock||V.availableQuantity===0;default:return!0}}),ae=async()=>{try{console.log("🔍 Checking if food_images bucket exists...");const{data:V,error:fe}=await me.storage.listBuckets();if(fe)return console.error("❌ Error listing buckets:",fe),!1;if(V.find(we=>we.name==="food_images"))return console.log("✅ food_images bucket already exists"),!0;{console.log("📦 food_images bucket not found, attempting to create...");const{error:we}=await me.rpc("create_food_images_bucket");if(we){console.log("⚠️ RPC method failed, trying direct SQL...");const{error:xe}=await me.from("storage.buckets").insert([{id:"food_images",name:"food_images",public:!0,file_size_limit:52428800,allowed_mime_types:["image/jpeg","image/png","image/gif","image/webp"]}]);if(xe)return console.error("❌ Failed to create bucket:",xe),!1}return console.log("✅ food_images bucket created successfully!"),!0}}catch(V){return console.error("❌ Error creating bucket:",V),!1}};R.useEffect(()=>{(async()=>{try{if(console.log("🧪 Testing Supabase Storage connection..."),!await ae()){console.warn("⚠️ Could not ensure food_images bucket exists");return}const{data:ve,error:we}=await me.storage.listBuckets();if(we){console.error("❌ Error listing buckets:",we);return}if(console.log("📋 Available buckets:",ve.map(Oe=>Oe.name)),ve.find(Oe=>Oe.name==="food_images")){console.log("✅ food_images bucket ready for use!");const{data:Oe,error:Ae}=await me.storage.from("food_images").list();Ae?console.warn("⚠️ Could not list files in bucket:",Ae.message):console.log("📁 Files in food_images bucket:",Oe.length)}}catch(fe){console.error("❌ Storage connection test failed:",fe)}})()},[]),R.useEffect(()=>{ie()},[]);const ye=async()=>{console.log("🔄 Using direct Supabase upload fallback...");let V=null,fe=!1;if(y.image)try{console.log("🚀 Uploading image to Supabase Storage..."),console.log("📎 Image file details:",{name:y.image.name,size:y.image.size,type:y.image.type});const Ae=Date.now(),it=y.image.name.split(".").pop().toLowerCase(),Ye=y.name.replace(/[^a-zA-Z0-9]/g,"_"),Pe=`items/${Ae}-${Ye}.${it}`;console.log("📁 Generated filename:",Pe);const{data:Re,error:be}=await me.storage.from("images_food").upload(Pe,y.image,{cacheControl:"3600",upsert:!1,contentType:y.image.type});if(be)throw console.error("❌ Upload error:",be),console.error("❌ Upload error details:",{message:be.message,statusCode:be.statusCode,error:be.error}),new Error(`Upload failed: ${be.message}`);console.log("✅ Upload successful:",Re);const{data:Tt}=me.storage.from("images_food").getPublicUrl(Pe);V=Tt.publicUrl,fe=!0,console.log("🔗 Public URL generated:",V)}catch(Ae){console.error("❌ Image upload failed:",Ae),console.error("❌ Upload error details:",Ae)}else console.log("ℹ️ No image provided for upload");const ve={name:y.name.trim(),price:parseFloat(y.cost),available_quantity:100,is_active:!0};y.description.trim()&&(ve.description=y.description.trim()),V&&(ve.image_url=V),console.log("📝 Inserting item data:",ve);const{data:we,error:xe}=await me.from("food_items").insert([ve]).select();if(xe)throw console.error("❌ Database insert error:",xe),console.error("❌ Database error details:",{message:xe.message,details:xe.details,hint:xe.hint,code:xe.code}),new Error(`Database error: ${xe.message}`);console.log("✅ Item inserted successfully:",we);const Oe=fe?`Item "${y.name}" added successfully with image!`:`Item "${y.name}" added successfully!`;se({show:!0,message:Oe,type:"success"}),x({name:"",cost:"",description:"",image:null}),g(!1),r({id:"",name:"",removeItemName:""}),_(""),ie(),Ht&&Ht()},Ce=async V=>{V.preventDefault(),S(!0),_("");try{if(!y.name.trim())throw new Error("Item name is required");if(!y.cost||parseFloat(y.cost)<=0)throw new Error("Valid cost is required");console.log("🚀 Creating FormData for API request...");const fe=new FormData;fe.append("name",y.name.trim()),fe.append("price",y.cost),fe.append("description",y.description.trim()),y.image&&(fe.append("image",y.image),console.log("📎 Added image file to FormData:",y.image.name)),console.log("📤 Sending request to /api/items...");let ve,we;try{ve=await fetch("/api/items",{method:"POST",body:fe}),console.log("📡 Response status:",ve.status),console.log("📡 Response headers:",Object.fromEntries(ve.headers.entries()));const xe=ve.headers.get("content-type");if(!xe||!xe.includes("application/json")){const Oe=await ve.text();throw console.error("❌ Non-JSON response:",Oe),new Error(`Server returned non-JSON response (${ve.status}): ${Oe.substring(0,200)}`)}try{we=await ve.json()}catch(Oe){console.error("❌ JSON parsing error:",Oe);const Ae=await ve.text();throw console.error("❌ Raw response:",Ae),new Error(`Invalid JSON response: ${Oe.message}`)}if(console.log("📋 Parsed response:",we),!ve.ok)throw new Error(we.error||`HTTP ${ve.status}: ${ve.statusText}`);if(!we.success)throw new Error(we.error||"API request failed");console.log("✅ API response:",we)}catch(xe){console.warn("⚠️ API server not available, using direct Supabase upload:",xe.message),await ye();return}se({show:!0,message:we.message,type:"success"}),x({name:"",cost:"",description:"",image:null}),g(!1),r({id:"",name:"",removeItemName:""}),_(""),ie(),Ht&&Ht()}catch(fe){console.error("❌ Failed to add item:",fe);const ve=fe.message||"Failed to add item";_(ve),alert(`❌ Error: ${ve}`)}finally{S(!1)}},Xe=()=>{g(!1),x({name:"",cost:"",description:"",image:null}),_(""),S(!1)},Dt=V=>{he(V),q({name:V.name||"",cost:V.price||"",description:V.description||"",image:null}),I(!0)},Zt=()=>{I(!1),he(null),q({name:"",cost:"",description:"",image:null}),_(""),S(!1)},pt=async V=>{V.preventDefault(),S(!0),_("");try{if(!P.name.trim())throw new Error("Item name is required");if(!P.cost||parseFloat(P.cost)<=0)throw new Error("Valid cost is required");console.log("🚀 Updating item:",K.name);const fe=new FormData;fe.append("name",P.name.trim()),fe.append("price",P.cost),fe.append("description",P.description.trim()),fe.append("id",K.id),P.image&&(fe.append("image",P.image),console.log("📎 Added new image file to FormData:",P.image.name)),console.log("📤 Sending update request to /api/items...");let ve,we;try{ve=await fetch("/api/items",{method:"PUT",body:fe}),console.log("📡 Response status:",ve.status);const xe=ve.headers.get("content-type");if(!xe||!xe.includes("application/json")){const Ae=await ve.text();throw console.error("❌ Non-JSON response:",Ae),new Error(`Server returned non-JSON response (${ve.status}): ${Ae.substring(0,200)}`)}try{we=await ve.json()}catch(Ae){console.error("❌ JSON parsing error:",Ae);const it=await ve.text();throw console.error("❌ Raw response:",it),new Error(`Invalid JSON response: ${Ae.message}`)}if(console.log("📋 Parsed response:",we),!we.success)throw new Error(we.error||"Update failed");console.log("✅ Item updated successfully via API:",we.data);const Oe=P.image?`Item "${P.name}" updated successfully with new image!`:`Item "${P.name}" updated successfully!`;se({show:!0,message:Oe,type:"success"})}catch(xe){console.warn("⚠️ API update failed, trying direct Supabase update:",xe),await Je()}Zt(),ie(),Ht&&Ht()}catch(fe){console.error("❌ Edit item failed:",fe),_(fe.message),se({show:!0,message:`Update failed: ${fe.message}`,type:"error"})}finally{S(!1)}},Je=async()=>{console.log("🔄 Using direct Supabase update fallback...");let V=K.image_url,fe=!1;if(P.image)try{console.log("🚀 Uploading new image to Supabase Storage..."),console.log("📎 Image file details:",{name:P.image.name,size:P.image.size,type:P.image.type});const Ae=Date.now(),it=P.image.name.split(".").pop().toLowerCase(),Ye=P.name.replace(/[^a-zA-Z0-9]/g,"_"),Pe=`items/${Ae}-${Ye}.${it}`;console.log("📁 Generated filename:",Pe);const{data:Re,error:be}=await me.storage.from("images_food").upload(Pe,P.image,{cacheControl:"3600",upsert:!1,contentType:P.image.type});if(be)throw console.error("❌ Upload error:",be),console.error("❌ Upload error details:",{message:be.message,statusCode:be.statusCode,error:be.error}),new Error(`Image upload failed: ${be.message}`);console.log("✅ Image uploaded successfully:",Re);const{data:Tt}=me.storage.from("images_food").getPublicUrl(Pe);V=Tt.publicUrl,fe=!0,console.log("✅ Public URL generated:",V)}catch(Ae){throw console.error("❌ Image upload failed:",Ae),new Error(`Image upload failed: ${Ae.message}`)}const ve={name:P.name.trim(),price:parseFloat(P.cost),description:P.description?.trim()||null,image_url:V,updated_at:new Date().toISOString()};console.log("📝 Updating item data in food_items:",ve);const{data:we,error:xe}=await me.from("food_items").update(ve).eq("id",K.id).select();if(xe)throw console.error("❌ Database update error:",xe),console.error("❌ Database error details:",{message:xe.message,details:xe.details,hint:xe.hint,code:xe.code}),new Error(`Database error: ${xe.message}`);console.log("✅ Item updated successfully:",we);const Oe=fe?`Item "${P.name}" updated successfully with new image!`:`Item "${P.name}" updated successfully!`;se({show:!0,message:Oe,type:"success"})};R.useEffect(()=>{const V=fe=>{fe.key==="Escape"&&p&&Xe(),fe.key==="Escape"&&k&&Zt()};if(p||k)return document.addEventListener("keydown",V),()=>document.removeEventListener("keydown",V)},[p,k]);const xt=async(V,fe)=>{const ve=n,we=n.find(Oe=>Oe.id===V);let xe=0;if(fe){const Oe=prompt(`Enter the quantity for ${we?.name||"this item"}:`,"10");if(Oe===null)return;const Ae=parseInt(Oe);if(isNaN(Ae)||Ae<0){alert("Invalid quantity. Please enter a positive number.");return}xe=Ae}e(Oe=>Oe.map(Ae=>Ae.id===V?{...Ae,inStock:fe,availableQuantity:xe}:Ae));try{if(we&&we._local)return;let Oe={};O==="stock"?Oe[O]=xe:O==="status"?Oe[O]=fe?"in":"out":O==="available_quantity"?Oe[O]=xe:Oe[O]=!!fe,console.log("📦 Updating stock status:",{id:V,inStock:fe,newQuantity:xe,update:Oe,field:O});const{data:Ae,error:it}=await me.from("food_items").update(Oe).eq(T,V).select();if(it)throw it;console.log("✅ Stock status updated successfully:",Ae),se({show:!0,message:`Item marked as ${fe?`In Stock (Qty: ${xe})`:"Out of Stock"}`,type:"success"}),setTimeout(()=>se({show:!1,message:"",type:"success"}),3e3),Ht&&Ht()}catch(Oe){console.error("❌ Failed to update stock in Supabase:",Oe),e(ve),se({show:!0,message:`Failed to update stock: ${Oe.message}`,type:"error"}),setTimeout(()=>se({show:!1,message:"",type:"success"}),3e3)}},rt=async(V,fe)=>{if(fe<0||isNaN(fe)){se({show:!0,message:"Quantity must be a positive number or zero",type:"error"}),setTimeout(()=>se({show:!1,message:"",type:"success"}),3e3);return}const ve=n;e(we=>we.map(xe=>xe.id===V?{...xe,availableQuantity:fe,inStock:fe>0}:xe));try{const we=n.find(it=>it.id===V);if(we&&we._local){se({show:!0,message:"Quantity updated successfully",type:"success"}),setTimeout(()=>se({show:!1,message:"",type:"success"}),3e3);return}const xe={available_quantity:fe,is_available:fe>0},{error:Oe}=await me.from("food_items").update(xe).eq(T,V);if(Oe)throw Oe;se({show:!0,message:fe===0?"Quantity updated to 0 (marked unavailable)":"Quantity updated successfully",type:"success"}),setTimeout(()=>se({show:!1,message:"",type:"success"}),3e3),Ht&&Ht()}catch(we){console.error("Failed to update quantity in Supabase:",we),e(ve),se({show:!0,message:"Error updating quantity",type:"error"}),setTimeout(()=>se({show:!1,message:"",type:"success"}),3e3)}},$t=async(V,fe)=>{if(fe<0||isNaN(fe)){se({show:!0,message:"Price must be a positive number or zero",type:"error"}),setTimeout(()=>se({show:!1,message:"",type:"success"}),3e3);return}const ve=n;e(we=>we.map(xe=>xe.id===V?{...xe,price:fe}:xe));try{const we=n.find(Oe=>Oe.id===V);if(we&&we._local){se({show:!0,message:"Price updated successfully",type:"success"}),setTimeout(()=>se({show:!1,message:"",type:"success"}),3e3);return}const{error:xe}=await me.from("food_items").update({price:fe}).eq(T,V);if(xe)throw xe;se({show:!0,message:"Price updated successfully",type:"success"}),setTimeout(()=>se({show:!1,message:"",type:"success"}),3e3)}catch(we){console.error("Failed to update price in Supabase:",we),e(ve),se({show:!0,message:"Error updating price",type:"error"}),setTimeout(()=>se({show:!1,message:"",type:"success"}),3e3)}},ct=async V=>{const fe=n;e(ve=>ve.filter(we=>we.id!==V));try{const ve=n.find(Oe=>Oe.id===V);if(ve&&ve._local)return;console.log("🗑️ Attempting to soft delete item:",{id:V,idField:T,target:ve});const{data:we,error:xe}=await me.from("food_items").update({is_active:!1}).eq(T,V).select();if(xe){console.error("❌ Error from Supabase:",xe),console.error("Error details:",{message:xe.message,details:xe.details,hint:xe.hint,code:xe.code}),e(fe),alert(`Failed to remove item.

Error: ${xe.message}

Details: ${xe.details||"Check console for more info"}`);return}console.log("✅ Item soft deleted successfully:",we),se({show:!0,message:"Item moved to Removed Items",type:"success"}),setTimeout(()=>se({show:!1,message:"",type:"success"}),3e3),Ht&&Ht()}catch(ve){console.error("❌ Exception during soft delete:",ve),e(fe),alert(`Failed to remove item.

Error: ${ve.message||"Unknown error"}`)}},Pt=pe().filter(V=>{const fe=i.trim().toLowerCase(),ve=fe?String(V.name||"").toLowerCase().includes(fe):!0,we=s==="all"||(s==="in"?V.inStock:!V.inStock);return ve&&we}).sort((V,fe)=>{const ve=i.trim().toLowerCase(),we=String(V.name||"").toLowerCase(),xe=String(fe.name||"").toLowerCase(),Oe=V.availableQuantity||0,Ae=fe.availableQuantity||0;if(Oe!==Ae)return Oe-Ae;if(ve){const it=we.startsWith(ve),Ye=xe.startsWith(ve);if(it&&!Ye)return-1;if(!it&&Ye)return 1;if(it===Ye)return we.localeCompare(xe)}return we.localeCompare(xe)});return v.jsxs("div",{style:{display:"grid",gap:16},children:[v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"12px",marginBottom:"16px"},children:[v.jsxs("div",{style:{backgroundColor:le==="all"?"#e2e8f0":"#f8fafc",border:le==="all"?"2px solid #64748b":"1px solid #e2e8f0",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:le==="all"?"scale(1.02)":"scale(1)",boxShadow:le==="all"?"0 4px 12px rgba(100, 116, 139, 0.3)":"none"},onClick:()=>ue("all"),children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1e293b"},children:n.length}),v.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Total"})]}),v.jsxs("div",{style:{backgroundColor:le==="in-stock"?"#bbf7d0":"#f0fdf4",border:le==="in-stock"?"2px solid #16a34a":"1px solid #bbf7d0",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:le==="in-stock"?"scale(1.02)":"scale(1)",boxShadow:le==="in-stock"?"0 4px 12px rgba(22, 163, 74, 0.3)":"none"},onClick:()=>ue(le==="in-stock"?"all":"in-stock"),children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#166534"},children:n.filter(V=>V.inStock&&V.availableQuantity>20).length}),v.jsx("div",{style:{fontSize:"12px",color:"#16a34a"},children:"In Stock"})]}),v.jsxs("div",{style:{backgroundColor:le==="low-stock"?"#fef3c7":"#fefce8",border:le==="low-stock"?"2px solid #ca8a04":"1px solid #fde047",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:le==="low-stock"?"scale(1.02)":"scale(1)",boxShadow:le==="low-stock"?"0 4px 12px rgba(202, 138, 4, 0.3)":"none"},onClick:()=>ue(le==="low-stock"?"all":"low-stock"),children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#a16207"},children:n.filter(V=>V.inStock&&V.availableQuantity<=20&&V.availableQuantity>5).length}),v.jsx("div",{style:{fontSize:"12px",color:"#ca8a04"},children:"Low Stock"})]}),v.jsxs("div",{style:{backgroundColor:le==="very-low"?"#fecaca":"#fef2f2",border:le==="very-low"?"2px solid #dc2626":"1px solid #fca5a5",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:le==="very-low"?"scale(1.02)":"scale(1)",boxShadow:le==="very-low"?"0 4px 12px rgba(220, 38, 38, 0.3)":"none"},onClick:()=>ue(le==="very-low"?"all":"very-low"),children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#991b1b"},children:n.filter(V=>V.inStock&&V.availableQuantity<=5&&V.availableQuantity>0).length}),v.jsx("div",{style:{fontSize:"12px",color:"#dc2626"},children:"Very Low"})]}),v.jsxs("div",{style:{backgroundColor:le==="out-of-stock"?"#e2e8f0":"#f1f5f9",border:le==="out-of-stock"?"2px solid #64748b":"1px solid #cbd5e1",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:le==="out-of-stock"?"scale(1.02)":"scale(1)",boxShadow:le==="out-of-stock"?"0 4px 12px rgba(100, 116, 139, 0.3)":"none"},onClick:()=>ue(le==="out-of-stock"?"all":"out-of-stock"),children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#475569"},children:n.filter(V=>!V.inStock||V.availableQuantity===0).length}),v.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Out of Stock"})]})]}),v.jsx(tr,{title:"Inventory Controls",titleAction:v.jsxs("button",{onClick:()=>Se(!0),className:"btn btn-secondary",style:{padding:"8px 16px",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx(vw,{size:16}),"Removed Items"]}),children:v.jsxs("div",{className:"inventory-controls-vertical",children:[v.jsx("div",{className:"search-section",children:v.jsx("div",{className:"add-item-container",children:v.jsx("input",{className:"search-input",placeholder:"Search food items...",value:i,onChange:V=>a(V.target.value)})})}),v.jsx("div",{className:"add-section",children:v.jsxs("div",{className:"add-item-container",children:[v.jsx("input",{className:"add-input",placeholder:"Add Item",value:t.name,onChange:V=>r({...t,name:V.target.value})}),v.jsx(Ve.button,{className:"dynamic-btn add-btn",onClick:()=>{const V=t.name.trim();V&&(x({...y,name:V}),g(!0),d(!1))},disabled:!t.name.trim(),whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300,damping:20},children:v.jsx("span",{children:"+"})})]})}),v.jsx("div",{className:"remove-section",children:v.jsxs("div",{className:"add-item-container",children:[v.jsx("input",{className:"add-input",placeholder:"Remove Item",value:t.removeItemName||"",onChange:V=>r({...t,removeItemName:V.target.value})}),v.jsx(Ve.button,{className:"dynamic-btn remove-btn",onClick:()=>{const V=(t.removeItemName||"").trim();if(!V)return;const fe=J(V);fe?(console.log("Removing item:",fe),ct(fe.id),r({...t,removeItemName:""})):F({itemName:V})},disabled:!(t.removeItemName||"").trim(),whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300,damping:20},children:v.jsx("span",{children:"−"})})]})})]})}),v.jsxs(tr,{title:"Inventory Items",children:[le!=="all"&&v.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"6px",fontSize:"14px",color:"#0369a1"},children:[v.jsx("strong",{children:"🔍 Filter Active:"})," Showing ",le==="in-stock"?"In Stock":le==="low-stock"?"Low Stock":le==="very-low"?"Very Low":"Out of Stock"," items only",v.jsx("button",{onClick:()=>ue("all"),style:{marginLeft:"8px",padding:"2px 8px",fontSize:"12px",backgroundColor:"#0ea5e9",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear Filter"})]}),v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{style:{width:"80px",textAlign:"center"},children:"Image"}),v.jsx("th",{style:{width:"25%"},children:"Item Name"}),v.jsx("th",{style:{width:"12%",textAlign:"right"},children:"Price"}),v.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Quantity"}),v.jsx("th",{style:{width:"15%",textAlign:"center"},children:"Stock Status"}),v.jsx("th",{style:{width:"20%",textAlign:"center"},children:"Actions"})]})}),v.jsx("tbody",{children:Pt.map(V=>v.jsxs("tr",{children:[v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",padding:"8px"},children:v.jsxs("div",{style:{width:"50px",height:"50px",borderRadius:"8px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",margin:"0 auto"},children:[V.image_url?v.jsx("img",{src:V.image_url,alt:V.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:fe=>{fe.target.style.display="none",fe.target.nextSibling.style.display="flex"}}):null,v.jsx("div",{style:{display:V.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",fontSize:"20px",color:"#6b7280"},children:"📷"})]})}),v.jsx("td",{style:{verticalAlign:"middle"},children:v.jsx("strong",{children:V.name})}),v.jsx("td",{style:{textAlign:"right",verticalAlign:"middle"},children:j===V.id?v.jsx("input",{type:"number",className:"price-input",value:V.price,onChange:fe=>e(n.map(ve=>ve.id===V.id?{...ve,price:Number(fe.target.value)}:ve)),onBlur:()=>{$t(V.id,V.price),L(null)},onKeyDown:fe=>{fe.key==="Enter"?($t(V.id,V.price),L(null)):fe.key==="Escape"&&L(null)},min:"0",step:"0.01",autoFocus:!0,style:{MozAppearance:"textfield"}}):v.jsxs("span",{className:"price-cell",onClick:()=>L(V.id),children:["₹",V.price]})}),v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:H===V.id?v.jsx("input",{type:"number",className:"quantity-input",value:V.availableQuantity,onChange:fe=>e(n.map(ve=>ve.id===V.id?{...ve,availableQuantity:Number(fe.target.value)}:ve)),onBlur:()=>{rt(V.id,V.availableQuantity),$(null)},onKeyDown:fe=>{fe.key==="Enter"?(rt(V.id,V.availableQuantity),$(null)):fe.key==="Escape"&&$(null)},min:"0",autoFocus:!0}):v.jsx("span",{className:"quantity-cell",onClick:()=>$(V.id),style:{cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s ease",display:"inline-block",minWidth:"40px",textAlign:"center",fontSize:"14px",fontWeight:"600",color:V.availableQuantity>20?"#10b981":V.availableQuantity>5?"#f59e0b":V.availableQuantity>0?"#ef4444":"#6b7280"},children:V.availableQuantity})}),v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:v.jsx("span",{className:"stock-status-badge",style:{backgroundColor:V.availableQuantity>20?"#dcfce7":V.availableQuantity>5?"#fef3c7":V.availableQuantity>0?"#fee2e2":"#f3f4f6",color:V.availableQuantity>20?"#166534":V.availableQuantity>5?"#92400e":V.availableQuantity>0?"#991b1b":"#6b7280"},children:V.availableQuantity>20?"🟢 In Stock":V.availableQuantity>5?"🟡 Low Stock":V.availableQuantity>0?"🟠 Very Low":"🔴 Out of Stock"})}),v.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:v.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",flexWrap:"nowrap"},children:[v.jsx("button",{className:"btn btn-secondary",onClick:()=>Dt(V),style:{padding:"6px 10px",fontSize:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",minWidth:"50px",whiteSpace:"nowrap"},children:"Edit"}),V.inStock?v.jsx("button",{className:"btn",onClick:()=>xt(V.id,!1),style:{padding:"6px 10px",fontSize:"12px",minWidth:"75px",whiteSpace:"nowrap"},children:"Mark Out"}):v.jsx("button",{className:"btn",onClick:()=>xt(V.id,!0),style:{padding:"6px 10px",fontSize:"12px",minWidth:"75px",whiteSpace:"nowrap"},children:"Mark In"})]})})]},V.id))})]})]}),p&&v.jsx("div",{className:"add-item-panel-overlay",onClick:Xe,children:v.jsxs(Ve.div,{className:"add-item-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},onClick:V=>V.stopPropagation(),children:[v.jsxs("div",{className:"add-item-panel-header",children:[v.jsx("h3",{children:"Add New Item"}),v.jsx("button",{className:"add-item-panel-close",onClick:Xe,children:v.jsx(mn,{size:20})})]}),v.jsxs("form",{onSubmit:Ce,className:"add-item-form",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"item-name",children:"Item Name *"}),v.jsx("input",{id:"item-name",type:"text",className:"form-input",value:y.name,onChange:V=>x({...y,name:V.target.value}),placeholder:"Enter item name",required:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"item-cost",children:"Cost (₹) *"}),v.jsx("input",{id:"item-cost",type:"number",className:"form-input",value:y.cost,onChange:V=>x({...y,cost:V.target.value}),placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"item-description",children:"Description"}),v.jsx("textarea",{id:"item-description",className:"form-textarea",value:y.description,onChange:V=>x({...y,description:V.target.value}),placeholder:"Enter item description (optional)",rows:"3"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Image Upload (Optional)"}),v.jsx(l2,{value:y.image,onChange:V=>x({...y,image:V}),disabled:b}),v.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"10px"},children:[v.jsx("button",{type:"button",className:"btn-secondary",onClick:async()=>{console.log("=== TESTING SUPABASE STORAGE CONNECTION ===");try{console.log("🔍 Step 1: Testing bucket access...");const{data:V,error:fe}=await me.storage.listBuckets();if(fe){console.error("❌ Bucket list failed:",fe),alert(`❌ Bucket access failed: ${fe.message}`);return}console.log("✅ Available buckets:",V.map(Ye=>Ye.name));const ve=V.find(Ye=>Ye.name==="food_images");if(!ve){console.log("📦 food_images bucket not found, attempting to create...");try{const{data:Ye,error:Pe}=await me.storage.createBucket("food_images",{public:!0,fileSizeLimit:52428800,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp"]});if(Pe){console.error("❌ Failed to create bucket:",Pe),alert(`❌ Cannot create bucket automatically: ${Pe.message}

Please create it manually in Supabase Dashboard:
1. Go to Storage
2. Click "New bucket"
3. Name: food_images
4. Check "Public bucket"
5. Click "Create bucket"`);return}console.log("✅ Bucket created successfully:",Ye),alert(`✅ food_images bucket created successfully!

Now setting up permissions...`);try{alert(`✅ Bucket created! Now you need to set up permissions:

1. Go to Supabase Dashboard → SQL Editor
2. Run these commands:

`+[`CREATE POLICY "Public Access" ON storage.objects FOR SELECT USING (bucket_id = 'food_images')`,`CREATE POLICY "Public Upload" ON storage.objects FOR INSERT WITH CHECK (bucket_id = 'food_images')`,`CREATE POLICY "Public Update" ON storage.objects FOR UPDATE USING (bucket_id = 'food_images')`,`CREATE POLICY "Public Delete" ON storage.objects FOR DELETE USING (bucket_id = 'food_images')`].join(`

`)+`

3. Then test storage access again!`);return}catch(Re){console.error("❌ Policy setup failed:",Re),alert("✅ Bucket created but policy setup failed. Please set up permissions manually in Supabase Dashboard.");return}}catch(Ye){console.error("❌ Bucket creation failed:",Ye),alert(`❌ Failed to create bucket: ${Ye.message}

Please create it manually in Supabase Dashboard.`);return}}console.log("✅ food_images bucket found:",ve),console.log("🔍 Step 2: Testing file listing...");const{data:we,error:xe}=await me.storage.from("food_images").list();if(xe){console.error("❌ File listing failed:",xe),alert(`❌ Cannot access files in bucket: ${xe.message}

This is likely a permissions issue. Check bucket policies.`);return}console.log("✅ Files in bucket:",we.length),console.log("🔍 Step 3: Testing upload permissions...");const Oe=new File(["test"],"test.txt",{type:"text/plain"}),{data:Ae,error:it}=await me.storage.from("food_images").upload(`test_${Date.now()}.txt`,Oe);if(it){console.error("❌ Upload test failed:",it),alert(`❌ Upload test failed: ${it.message}

Bucket exists but upload permissions are missing.`);return}console.log("✅ Upload test successful:",Ae),await me.storage.from("food_images").remove([Ae.path]),alert(`✅ Storage test successful!

- Buckets: ${V.length} found
- food_images bucket: ✅ Accessible
- File listing: ✅ Working
- Upload: ✅ Working

Your storage is ready!`)}catch(V){console.error("❌ Storage test error:",V),alert(`❌ Storage test error: ${V.message}`)}},style:{fontSize:"12px",padding:"6px 12px"},children:"Test Storage Access"}),y.image&&v.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{x({...y,image:null}),document.getElementById("item-image").value=""},style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#ef4444",color:"white"},children:"Remove Image"}),v.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{const V=`
-- Copy and paste these SQL commands in your Supabase SQL Editor:

-- 1. Create storage policies for food_images bucket
CREATE POLICY "Public Access" ON storage.objects
FOR SELECT USING (bucket_id = 'food_images');

CREATE POLICY "Public Upload" ON storage.objects
FOR INSERT WITH CHECK (bucket_id = 'food_images');

CREATE POLICY "Public Update" ON storage.objects
FOR UPDATE USING (bucket_id = 'food_images');

CREATE POLICY "Public Delete" ON storage.objects
FOR DELETE USING (bucket_id = 'food_images');

-- 2. If the above fails, try this alternative:
INSERT INTO storage.policies (id, bucket_id, name, definition, check_expression)
VALUES 
  ('food_images_select', 'food_images', 'Public Access', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_insert', 'food_images', 'Public Upload', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_update', 'food_images', 'Public Update', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_delete', 'food_images', 'Public Delete', 'bucket_id = ''food_images''', 'bucket_id = ''food_images''')
ON CONFLICT (id) DO NOTHING;
                      `;navigator.clipboard.writeText(V).then(()=>{alert(`📋 SQL commands copied to clipboard!

1. Go to Supabase Dashboard → SQL Editor
2. Paste and run the commands
3. Test storage access again`)}).catch(()=>{alert(`📋 SQL Commands:

`+V+`

Copy these and run in Supabase SQL Editor`)})},style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#3b82f6",color:"white"},children:"Fix Permissions"})]})]}),E&&v.jsxs("div",{className:"form-error",style:{backgroundColor:"#fef2f2",border:"2px solid #fecaca",borderRadius:"8px",padding:"12px",marginTop:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx(vr,{size:20,style:{color:"#dc2626"}}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"600",color:"#dc2626",marginBottom:"4px"},children:"❌ Upload Failed"}),v.jsx("div",{style:{color:"#991b1b",fontSize:"14px"},children:E}),v.jsx("div",{style:{color:"#6b7280",fontSize:"12px",marginTop:"4px"},children:"Check the browser console (F12) for more details"}),v.jsx("button",{type:"button",onClick:()=>_(""),style:{marginTop:"8px",padding:"4px 8px",fontSize:"12px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear Error & Try Again"})]})]}),v.jsxs("div",{className:"form-actions",children:[v.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Xe,disabled:b,children:"Cancel"}),v.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?v.jsxs(v.Fragment,{children:[v.jsx(Xi,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):v.jsxs(v.Fragment,{children:[v.jsx(CO,{size:16}),"Add Item"]})})]})]})]})}),k&&v.jsx("div",{className:"add-item-panel-overlay",onClick:Zt,children:v.jsxs(Ve.div,{className:"add-item-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},onClick:V=>V.stopPropagation(),children:[v.jsxs("div",{className:"add-item-panel-header",children:[v.jsx("h3",{children:"Edit Item"}),v.jsx("button",{className:"add-item-panel-close",onClick:Zt,children:v.jsx(mn,{size:20})})]}),v.jsxs("form",{onSubmit:pt,className:"add-item-form",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"edit-item-name",children:"Item Name *"}),v.jsx("input",{id:"edit-item-name",type:"text",className:"form-input",value:P.name,onChange:V=>q({...P,name:V.target.value}),placeholder:"Enter item name",required:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"edit-item-cost",children:"Cost (₹) *"}),v.jsx("input",{id:"edit-item-cost",type:"number",className:"form-input",value:P.cost,onChange:V=>q({...P,cost:V.target.value}),placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"edit-item-description",children:"Description"}),v.jsx("textarea",{id:"edit-item-description",className:"form-textarea",value:P.description,onChange:V=>q({...P,description:V.target.value}),placeholder:"Enter item description (optional)",rows:"3"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Current Image"}),K?.image_url&&v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("img",{src:K.image_url,alt:K.name,style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb"}}),v.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Current image"})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"New Image Upload (Optional)"}),v.jsx(l2,{value:P.image,onChange:V=>q({...P,image:V}),disabled:b}),v.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Upload a new image to replace the current one, or leave empty to keep current image"})]}),E&&v.jsxs("div",{className:"form-error",style:{backgroundColor:"#fef2f2",border:"2px solid #fecaca",borderRadius:"8px",padding:"12px",marginTop:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx(vr,{size:20,style:{color:"#dc2626"}}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"600",color:"#dc2626",marginBottom:"4px"},children:"❌ Update Failed"}),v.jsx("div",{style:{color:"#991b1b",fontSize:"14px"},children:E}),v.jsx("div",{style:{color:"#6b7280",fontSize:"12px",marginTop:"4px"},children:"Check the browser console (F12) for more details"})]})]}),v.jsxs("div",{className:"form-actions",style:{display:"flex",gap:"12px",marginTop:"20px"},children:[v.jsx("button",{type:"button",className:"btn-secondary",onClick:Zt,disabled:b,style:{flex:1},children:"Cancel"}),v.jsx("button",{type:"submit",className:"btn-primary",disabled:b,style:{flex:1},children:b?"Updating...":"Update Item"})]})]})]})}),v.jsx(Dn,{children:ne.show&&v.jsx(Ve.div,{className:"fixed bottom-4 right-4 z-50",initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3},children:v.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${ne.type==="success"?"bg-green-500":"bg-red-500"}`,children:ne.message})})}),v.jsx(RI,{isOpen:de,onClose:()=>Se(!1),onItemRestored:te}),v.jsx(Dn,{children:U&&v.jsxs(v.Fragment,{children:[v.jsx(Ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>F(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),v.jsxs(Ve.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:V=>V.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[v.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fef3c7",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:v.jsx(vr,{size:24,style:{color:"#f59e0b"}})}),v.jsx("div",{children:v.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Item Not Found"})})]}),v.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["The item ",v.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',U.itemName,'"']})," was not found in the inventory. Please check the spelling and try again."]}),v.jsxs("div",{style:{backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"8px",padding:"12px",marginBottom:"24px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[v.jsx(vr,{size:16,style:{color:"#0284c7",marginTop:"2px",flexShrink:0}}),v.jsx("p",{style:{margin:0,fontSize:"13px",color:"#075985",lineHeight:"1.4"},children:"Tip: Item names are case-insensitive. Make sure you're using the exact name as it appears in the inventory list."})]}),v.jsx("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:v.jsx("button",{onClick:()=>F(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#3b82f6",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:V=>{V.target.style.backgroundColor="#2563eb"},onMouseLeave:V=>{V.target.style.backgroundColor="#3b82f6"},children:"Got It"})})]})]})})]})}function KI(){const[n,e]=R.useState([]),[t,r]=R.useState([]),[i,a]=R.useState(null),[s,c]=R.useState(null),[f,d]=R.useState(!1),[p,g]=R.useState(!0),[y,x]=R.useState(new Date),[b,S]=R.useState("english"),[E,_]=R.useState("tomorrow"),[T,C]=R.useState(new Date),O=async()=>{d(!0);try{console.log("🤖 AI Predictions: Fetching orders data...");const ue=new Date;ue.setDate(ue.getDate()-30);const{data:de,error:Se}=await me.from("orders").select("*").gte("created_at",ue.toISOString()).order("created_at",{ascending:!1});if(Se)throw Se;const{data:U,error:F}=await me.from("food_items").select("*");if(F)throw F;e(de||[]),r(U||[]),c(new Date),console.log("🤖 AI Predictions: Fetched",de?.length||0,"orders and",U?.length||0,"food items"),le(de||[],U||[])}catch(ue){console.error("❌ AI Predictions: Failed to fetch data:",ue),alert("Failed to fetch data for predictions: "+ue.message)}finally{d(!1)}},D=["చైత్రం","వైశాఖం","జ్యేష్ఠం","ఆషాఢం","శ్రావణం","భాద్రపదం","ఆశ్వీజం","కార్తీకం","మార్గశిరం","పుష్యం","మాఘం","ఫాల్గుణం"],j=["ఆదివారం","సోమవారం","మంగళవారం","బుధవారం","గురువారం","శుక్రవారం","శనివారం"],L={seasonal:{summer:{"Curd Rice":1.4,Rasam:1.3,Pulihora:1.2,Biryani:.8},monsoon:{Haleem:1.6,Sambar:1.2,Rasam:1.3,Dosa:1.1},winter:{Biryani:1.3,Kebabs:1.2,Pongal:1.4,Haleem:1.2}}},H=ue=>{const de=ue.getMonth()+1;return de>=3&&de<=5?"summer":de>=6&&de<=9?"monsoon":"winter"},$=ue=>{const de=ue.getFullYear()-78,Se=D[ue.getMonth()],U=j[ue.getDay()];return{year:de,month:Se,day:U,date:ue.getDate()}},ne={"2025-03-30":{name:"Ugadi",reduction:.7,duration:1},"2026-03-20":{name:"Ugadi",reduction:.7,duration:1},"2025-04-06":{name:"Sri Rama Navami",reduction:.8,duration:1},"2025-05-22":{name:"Hanuman Jayanti",reduction:.8,duration:1},"2025-05-15":{name:"Saraswati Pushkaralu",reduction:.6,duration:12},"2025-08-08":{name:"Varalakshmi Vratam",reduction:.7,duration:1},"2025-08-16":{name:"Krishna Janmashtami",reduction:.8,duration:1},"2025-08-27":{name:"Ganesh Chaturthi",reduction:.6,duration:9},"2025-09-21":{name:"Indira Ekadashi",reduction:.8,duration:1},"2025-09-22":{name:"Navaratri / Dasara",reduction:.6,duration:11},"2025-10-20":{name:"Deepavali",reduction:.7,duration:1}},se=ue=>{const de=ue.toISOString().split("T")[0];if(ne[de])return ne[de];for(const[Se,U]of Object.entries(ne)){const F=new Date(Se),K=new Date(F);if(K.setDate(K.getDate()+U.duration),ue>=F&&ue<=K)return U}return null},le=(ue,de)=>{console.log("🤖 AI Predictions: Generating predictions...");const Se=new Date,U=new Date(Se.getFullYear(),Se.getMonth(),Se.getDate()),F=new Date(U);F.setDate(F.getDate()-1);const K=new Date(U);K.setDate(K.getDate()-7);const he=new Date(U);he.setDate(he.getDate()-30);const k=ue.filter(Re=>new Date(Re.created_at)>=U),I=ue.filter(Re=>{const be=new Date(Re.created_at);return be>=F&&be<U}),P=ue.filter(Re=>new Date(Re.created_at)>=K),q=ue.filter(Re=>new Date(Re.created_at)>=he),ie=k.length,te=I.length,J=P.length/7,pe=q.length/30,ae={};ue.forEach(Re=>{const be=Re.item_name;ae[be]||(ae[be]={totalOrders:0,totalRevenue:0,avgPrice:0,lastOrdered:null}),ae[be].totalOrders++,ae[be].totalRevenue+=Re.total_amount||Re.price||0,ae[be].avgPrice=ae[be].totalRevenue/ae[be].totalOrders;const Tt=new Date(Re.created_at);(!ae[be].lastOrdered||Tt>ae[be].lastOrdered)&&(ae[be].lastOrdered=Tt)});const ye=Object.entries(ae).sort(([,Re],[,be])=>be.totalOrders-Re.totalOrders).slice(0,10),Ce={};ue.forEach(Re=>{const be=new Date(Re.created_at).getHours();Ce[be]||(Ce[be]=0),Ce[be]++});const Xe=Object.entries(Ce).sort(([,Re],[,be])=>be-Re).slice(0,3).map(([Re])=>`${Re}:00`),Dt=H(U),Zt=$(U),pt=se(U),Je=new Date(U);Je.setDate(Je.getDate()+1);const xt=se(Je);H(Je);const rt=new Date(U);rt.setDate(rt.getDate()+2),se(rt),H(rt);const $t=[];for(let Re=1;Re<=7;Re++){const be=new Date(U);be.setDate(U.getDate()+Re);const Tt=se(be),xr=H(be),nr=be.getDay()===0||be.getDay()===6;let Nr=J;nr&&(be.getDay()===0?Nr=0:Nr*=.75),Tt&&(Nr*=1-Tt.reduction+.3);const gi=L.seasonal[xr]||{},Xu=Object.values(gi).reduce((Bl,Ll)=>Bl+Ll,0)/Math.max(Object.keys(gi).length,1);Nr*=Xu||1,$t.push({date:be,day:j[be.getDay()],predicted:Math.round(Nr),festival:Tt,season:xr,isWeekend:nr,isHoliday:be.getDay()===0})}const ct=$t[0].predicted,Pt=$t[1].predicted,V=Math.round($t.reduce((Re,be)=>Re+be.predicted,0)/7),fe=[];de.forEach(Re=>{const be=Re.available_quantity||Re.stock||0,Tt=ae[Re.name]?.totalOrders||0;be<=5&&Tt>0?fe.push({type:"low_stock",priority:"high",message:`${Re.name} is running low (${be} left) but is popular (${Tt} orders)`,action:"Restock immediately"}):be<=10&&Tt>5&&fe.push({type:"low_stock",priority:"medium",message:`${Re.name} has ${be} units left and moderate demand`,action:"Consider restocking soon"})}),ye.length>0&&fe.push({type:"popular_item",priority:"medium",message:`${ye[0][0]} is your most popular item (${ye[0][1].totalOrders} orders)`,action:"Ensure adequate stock"}),Xe.length>0&&fe.push({type:"peak_hours",priority:"low",message:`Peak ordering hours: ${Xe.join(", ")}`,action:"Prepare extra staff during these hours"}),xt&&fe.push({type:"festival_nonveg_reduction",priority:"high",message:`Tomorrow is ${xt.name} - Non-veg consumption will be ${Math.round(xt.reduction*100)}% lower`,action:`Reduce non-veg items by ${Math.round(xt.reduction*100)}%. Focus on vegetarian options like Dosa, Idli, Sambar, Curd Rice`});const ve=L.seasonal[Dt]||{},we=Object.entries(ve).sort(([,Re],[,be])=>be-Re)[0];we&&we[1]>1.2&&fe.push({type:"seasonal_boost",priority:"medium",message:`Current season (${Dt}) favors ${we[0]} - demand is ${Math.round(we[1]*100)}% higher`,action:`Increase ${we[0]} preparation for seasonal demand`});const xe=$t.find(Re=>Re.isHoliday),Oe=$t.find(Re=>Re.isWeekend&&!Re.isHoliday);xe&&fe.push({type:"holiday_planning",priority:"medium",message:"Sunday is college holiday - no orders expected (0 orders)",action:"College closed on Sunday. Focus on maintenance and preparation for Monday"}),Oe&&fe.push({type:"saturday_pattern",priority:"medium",message:"Saturday shows 25% lower demand due to Telangana college non-veg consumption patterns",action:"Reduce non-veg items by 20-30%. Focus on vegetarian options and lighter meals"});const Ae=ue.reduce((Re,be)=>Re+(be.total_amount||be.price||0),0)/ue.length,it=ct*Ae,Ye=Pt*Ae,Pe=V*7*Ae;a({summary:{todayOrders:ie,yesterdayOrders:te,weekAverage:Math.round(J),monthAverage:Math.round(pe),predictedTomorrow:ct,predictedDayAfter:Pt,weeklyAverage:V,predictedRevenue:Math.round(it),predictedRevenueDayAfter:Math.round(Ye),predictedWeeklyRevenue:Math.round(Pe),totalItems:de.length,totalOrders:ue.length},popularItems:ye.slice(0,5),peakHours:Xe,recommendations:fe,itemStats:ae,weeklyPredictions:$t,teluguDate:Zt,currentSeason:Dt,festival:pt,lastUpdated:new Date}),console.log("🤖 AI Predictions: Generated predictions successfully")};return R.useEffect(()=>{if(p){O();const ue=setInterval(()=>{console.log("🤖 AI Predictions: Auto-refreshing data..."),O()},3600*1e3);return()=>clearInterval(ue)}},[p]),v.jsx("div",{className:"home-dashboard",children:v.jsx("div",{className:"card coming-soon-card",children:v.jsxs("div",{className:"coming-soon-content",children:[v.jsx("div",{className:"coming-soon-icon",children:"🤖"}),v.jsx("h1",{className:"coming-soon-title",children:"AI Predictions"}),v.jsx("p",{className:"coming-soon-description",children:"Get intelligent insights and predictions about your canteen operations powered by advanced AI algorithms."}),v.jsx("div",{className:"coming-soon-status",children:v.jsxs("div",{className:"status-indicator",children:[v.jsx("span",{style:{marginRight:"8px"},children:"🚧"}),"Coming Soon"]})}),v.jsxs("div",{className:"features-preview",children:[v.jsx("h3",{className:"features-title",children:"Planned Features:"}),v.jsxs("div",{className:"features-list",children:[v.jsxs("div",{className:"feature-item",children:[v.jsx("span",{children:"📈"}),v.jsx("span",{children:"Order volume predictions for tomorrow and next week"})]}),v.jsxs("div",{className:"feature-item",children:[v.jsx("span",{children:"💰"}),v.jsx("span",{children:"Revenue forecasting based on historical data"})]}),v.jsxs("div",{className:"feature-item",children:[v.jsx("span",{children:"🔥"}),v.jsx("span",{children:"Popular items analysis and recommendations"})]}),v.jsxs("div",{className:"feature-item",children:[v.jsx("span",{children:"⏰"}),v.jsx("span",{children:"Peak hours identification for better staffing"})]}),v.jsxs("div",{className:"feature-item",children:[v.jsx("span",{children:"📊"}),v.jsx("span",{children:"Trend analysis with seasonal adjustments"})]})]})]})]})})})}function ZI(){const{isEnabled:n,toggleNotifications:e,playTestSound:t,isInitialized:r,showOrderNotification:i}=Wu();return v.jsxs("div",{className:"home-dashboard",children:[v.jsxs("div",{className:"card",children:[v.jsx("h2",{style:{marginTop:0},children:"Account"}),v.jsx("div",{className:"actions",style:{justifyContent:"flex-start"},children:v.jsx("button",{className:"btn btn-danger",onClick:()=>{try{localStorage.clear()}catch{}const a=import.meta&&UI&&"/IARE-Canteen-Web/"||"/";window.location.href=a},children:"Log out"})})]}),v.jsxs("div",{className:"card",children:[v.jsx("h2",{children:"Sound Notifications"}),v.jsx("div",{className:"form",children:v.jsxs("div",{className:"field",children:[v.jsx("label",{className:"label",children:"Order Notifications"}),v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsx("button",{className:`btn ${n?"btn-primary":"btn-secondary"}`,onClick:e,disabled:!r,children:n?v.jsxs(v.Fragment,{children:[v.jsx(zO,{className:"w-4 h-4"}),"Enabled"]}):v.jsxs(v.Fragment,{children:[v.jsx(HO,{className:"w-4 h-4"}),"Disabled"]})}),v.jsxs("button",{className:"btn btn-secondary",onClick:()=>{console.log("🔊 Test sound button clicked"),console.log("🔊 isInitialized:",r),console.log("🔊 isEnabled:",n),t()},disabled:!r||!n,children:[v.jsx(mu,{className:"w-4 h-4"}),"Test Sound"]}),v.jsxs("button",{className:"btn btn-secondary",onClick:()=>i({item_name:"Test Order - Chicken Biryani",order_token:"1234",total_amount:150,order_type:"dine_in",user_id:"test-user-id"}),disabled:!r||!n,children:[v.jsx(mu,{className:"w-4 h-4"}),"Test Popup"]}),v.jsxs("button",{className:"btn btn-secondary",onClick:async()=>{console.log("🔍 Checking recent orders from app...");try{const{data:a,error:s}=await me.from("orders").select("*").order("created_at",{ascending:!1}).limit(5);if(s){console.error("❌ Error fetching recent orders:",s);return}console.log("📋 Recent orders:",a);const c=a.filter(f=>{const d=f.status==="pending"||f.status==="PENDING",p=f.user_id!==Rr;return d&&p});if(console.log("🔔 Orders that should trigger notifications:",c),c.length>0){const f=c[0];console.log("📢 Triggering notification for latest order:",f),await i(f)}else console.log("❌ No recent orders found that should trigger notifications")}catch(a){console.error("❌ Error in check recent orders:",a)}},disabled:!r||!n,children:[v.jsx(mu,{className:"w-4 h-4"}),"Check Recent"]})]}),v.jsxs("div",{className:"muted",style:{marginTop:"8px"},children:[v.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px"},children:[v.jsx("strong",{children:"Status:"})," ",r?"✅ Audio Initialized":"⏳ Waiting for user interaction",v.jsx("br",{}),v.jsx("strong",{children:"Notifications:"})," ",n?"🔊 Enabled":"🔇 Disabled",v.jsx("br",{}),v.jsx("strong",{children:"Real-time:"})," ✅ Connected (Dual subscription system)",v.jsx("br",{}),v.jsx("strong",{children:"Sources:"})," NotificationContext + Orders Panel subscriptions",v.jsx("br",{}),v.jsx("strong",{children:"Filter:"})," Shows notifications for PENDING orders from customers (not admin/staff)",v.jsx("br",{}),v.jsx("strong",{children:"Deduplication:"})," ✅ Prevents duplicate notifications"]}),r?n?"You will hear a notification sound and see popup alerts when new orders are placed.":"Notifications are disabled. Enable to hear sounds and see popup alerts for new orders.":"Click anywhere on the page to initialize audio permissions."]})]})})]})]})}function QI(){const n=R.useRef(null),e=R.useRef(null),t=R.useRef(null),[r,i]=R.useState(!1),[a,s]=R.useState(""),[c,f]=R.useState(null),[d,p]=R.useState(null),[g,y]=R.useState(!1),[x,b]=R.useState(!1),[S,E]=R.useState(""),[_,T]=R.useState(0),[C,O]=R.useState(""),[D,j]=R.useState(!1),[L,H]=R.useState(!1),{playNotification:$}=Pl();R.useEffect(()=>{(async()=>{try{if(!D){console.log("📷 Requesting camera permission...");const K=navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),he=new Promise((I,P)=>{setTimeout(()=>P(new Error("Permission request timeout - user may have dismissed popup")),1e4)});(await Promise.race([K,he])).getTracks().forEach(I=>I.stop()),console.log("✅ Camera permission granted"),j(!0),H(!0)}}catch(K){console.log("❌ Camera permission denied, dismissed, or error:",K.message),j(!0),H(!1),K.message.includes("timeout")||f(new Error("Camera permission is required to scan QR codes. Please allow camera access and refresh the page."))}})()},[]),R.useEffect(()=>()=>{se()},[]);const ne=pi();R.useEffect(()=>{ne.pathname!=="/scan"&&(se(),j(!1))},[ne.pathname]),R.useEffect(()=>{const F=()=>{document.hidden&&r&&(console.log("📱 Page hidden, stopping camera..."),se())};return document.addEventListener("visibilitychange",F),()=>{document.removeEventListener("visibilitychange",F)}},[r]);const se=async()=>{try{console.log("🛑 Stopping camera and QR scanner...");try{t.current&&typeof t.current.stop=="function"&&(t.current.stop(),console.log("✅ Scanner controls stopped"))}catch(K){console.warn("⚠️ Error stopping scanner controls:",K)}t.current=null;try{e.current&&typeof e.current.reset=="function"&&(await e.current.reset(),console.log("✅ QR code reader reset"))}catch(K){console.warn("⚠️ Error resetting QR code reader:",K)}e.current=null;const F=n.current;F&&F.srcObject&&(F.srcObject.getTracks().forEach(he=>{he.stop(),console.log("✅ Camera track stopped:",he.kind)}),F.srcObject=null,console.log("✅ Camera stream cleared"));try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const K=await navigator.mediaDevices.enumerateDevices();console.log("🔍 Found media devices:",K.length)}}catch(K){console.warn("⚠️ Error enumerating devices:",K)}try{const K=[];document.querySelectorAll("video, audio").forEach(he=>{if(he.srcObject){const k=he.srcObject.getTracks();K.push(...k)}}),K.length>0&&(console.log("🛑 Found remaining tracks, stopping them:",K.length),K.forEach(he=>{he.readyState!=="ended"&&(he.stop(),console.log("✅ Additional track stopped:",he.kind))}))}catch(K){console.warn("⚠️ Error stopping additional tracks:",K)}F&&(F.pause(),F.currentTime=0,F.load(),console.log("✅ Video element reset")),i(!1),O("Camera stopped"),setScannedCode(null),f(null),setTimeout(()=>{console.log("🛑 Camera cleanup completed - final check"),F&&F.srcObject&&(console.log("🔧 Force clearing remaining video source"),F.srcObject=null)},100),console.log("🛑 Camera cleanup completed")}catch(F){console.error("❌ Error during camera cleanup:",F),i(!1),O("Camera stopped")}},le=async()=>{f(null),p(null),s(""),O("");try{if(r)return;await se();try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})).getTracks().forEach(he=>he.stop()),H(!0)}catch{H(!1),f(new Error("Camera permission is required. Please allow camera access and try again."));return}const F=new dw;e.current=F,i(!0),O("Camera started - ready to scan"),await F.decodeFromVideoDevice(null,n.current,async(K,he,k)=>{try{k&&!t.current&&(t.current=k),k&&O("")}catch{}if(K){const I=String(K.getText()||"");if(!I||x)return;const P=Date.now();if(S===I&&P-_<1500)return;b(!0),E(I),T(P);try{if(await de(I)){O("Successfully scanned");try{await $()}catch(ie){console.log("Sound playback failed:",ie)}}else O("")}finally{b(!1)}}he&&he.name})}catch(F){console.error("Camera start error:",F),f(F),i(!1)}},ue=F=>{if(!F)return{};const K=String(F).trim();if(console.log("Parsing scanned text:",K),K)return console.log("Found QR code:",K),{qrCode:K};try{const k=new URL(K).searchParams,I=k.get("qr_code")||k.get("order_qr_code")||k.get("code");if(I)return console.log("Found QR code in URL params:",I),{qrCode:I}}catch{}return console.log("No valid QR code found in:",K),{}},de=async F=>{f(null),p(null);const{qrCode:K}=ue(F);console.log("Parsed QR code:",K);try{if(!K){const P="Invalid QR. Please scan the order QR code.";return console.log(P),f(new Error(P)),null}console.log("Searching by QR code:",K);const{data:he,error:k}=await me.from("orders").select("id,item_name,qr_code,order_token,created_at,status,total_amount,user_id").eq("qr_code",K).limit(1).maybeSingle();if(k)throw console.error("Error searching by QR code:",k),k;if(he&&he.qr_code===K)return console.log("Setting order:",he),p(he),he;const I="No order found for this QR code. Please verify and try again.";return console.log(I),f(new Error(I)),null}catch(he){return console.error("Scan lookup failed:",he),f(he),null}},Se=async F=>{if(d){y(!0);try{const{error:K}=await me.rpc("update_order_status_flexible",{p_order_id:d.id,p_new_status:String(F).toLowerCase()});if(K)throw K;p(he=>({...he,status:F}));try{await $()}catch(he){console.log("Sound playback failed:",he)}O(`✅ Order updated to ${F}`),setTimeout(()=>O(""),2e3),F==="DELIVERED"&&setTimeout(()=>{p(null)},1500)}catch(K){O(`❌ Failed: ${K.message||K}`),setTimeout(()=>O(""),3e3)}finally{y(!1)}}},U=async()=>{if(d&&window.confirm("Are you sure you want to cancel this order?")){y(!0);try{const{error:F}=await me.rpc("update_order_status_flexible",{p_order_id:d.id,p_new_status:"cancelled"});if(F)throw F;try{await $()}catch(K){console.log("Sound playback failed:",K)}O("✅ Order cancelled successfully"),setTimeout(()=>{O(""),p(null)},1500)}catch(F){O(`❌ Failed to cancel: ${F.message||F}`),setTimeout(()=>O(""),3e3)}finally{y(!1)}}};return R.useEffect(()=>(le(),()=>{se()}),[]),v.jsxs("div",{className:"qr-scan-page",style:{display:"flex",gap:16,alignItems:"flex-start",flexWrap:"wrap"},children:[v.jsx("div",{style:{flex:"1 1 300px",minWidth:"300px"},children:v.jsxs(tr,{title:"QR Scanner",children:[!D&&v.jsx("div",{style:{padding:"12px",backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",marginBottom:"16px",color:"#92400e"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx("span",{children:"📷"}),v.jsx("span",{children:"Requesting camera permission..."})]})}),D&&!L&&v.jsx("div",{style:{padding:"12px",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"8px",marginBottom:"16px",color:"#991b1b"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx("span",{children:"⚠️"}),v.jsx("span",{children:'Camera permission not granted. Click "Start Camera" to request permission again.'})]})}),v.jsx("div",{className:"actions",style:{marginBottom:16,justifyContent:"flex-start"},children:v.jsxs("button",{className:"btn",onClick:r?se:le,children:[r?"Stop":"Start"," Camera"]})}),C&&v.jsx("div",{className:"muted",style:{marginTop:16,color:C.includes("✅")?"#10b981":"#ef4444",textAlign:"center",fontSize:"16px",fontWeight:"500"},children:C}),c&&v.jsx("div",{className:"muted",style:{color:"crimson",marginTop:16,textAlign:"center"},children:String(c.message||c)}),v.jsx("div",{className:"muted",style:{marginTop:16,textAlign:"center"},children:"💡 Scan a QR code - The order panel will open automatically"})]})}),v.jsx("div",{className:"scan-window",style:{width:"400px",minWidth:"350px",position:"sticky",top:"20px",flex:"0 0 400px"},children:v.jsx(tr,{title:"Scan Window",children:v.jsxs("div",{style:{position:"relative"},children:[v.jsx("video",{ref:n,style:{width:"100%",maxHeight:300,background:"#000",borderRadius:8,display:r?"block":"none",opacity:r?1:0,visibility:r?"visible":"hidden"},muted:!0,playsInline:!0}),!r&&v.jsxs("div",{style:{width:"100%",height:"300px",background:"#1f2937",borderRadius:8,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#9ca3af",gap:"12px"},children:[v.jsx("div",{style:{fontSize:"48px"},children:"📷"}),v.jsx("div",{style:{fontSize:"14px"},children:"Camera Stopped"}),v.jsx("div",{style:{fontSize:"12px",opacity:.7},children:'Click "Start Camera" to begin scanning'})]})]})})}),v.jsx(Dn,{children:d&&v.jsx(v.Fragment,{children:v.jsx(Ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>p(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998,backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:v.jsxs(Ve.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:30},style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:9999,maxWidth:"500px",width:"100%",maxHeight:"70vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",display:"flex",flexDirection:"column"},onClick:F=>F.stopPropagation(),children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"2px solid #e5e7eb",paddingBottom:"16px"},children:[v.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:"📦 Order Details"}),v.jsx("button",{onClick:()=>p(null),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",color:"#6b7280"},children:v.jsx(mn,{size:24})})]}),v.jsxs("div",{style:{backgroundColor:"#f9fafb",borderRadius:"12px",padding:"16px",marginBottom:"20px",display:"grid",gap:"12px"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Token Number:"}),v.jsxs("span",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937",backgroundColor:"#fff",padding:"4px 12px",borderRadius:"8px",border:"2px solid #3b82f6"},children:["#",d.order_token||"N/A"]})]}),v.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"12px"},children:[v.jsxs("div",{style:{marginBottom:"8px"},children:[v.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Items:"}),v.jsx("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px",marginTop:"4px"},children:d.item_name||"Order Items"})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"12px"},children:[v.jsxs("div",{children:[v.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Total:"}),v.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:["₹",d.total_amount!=null?d.total_amount:"-"]})]}),v.jsxs("div",{children:[v.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Status:"}),v.jsx("div",{style:{fontWeight:"600",fontSize:"16px",color:d.status==="pending"?"#f59e0b":d.status==="preparing"?"#3b82f6":d.status==="ready"?"#10b981":"#6b7280"},children:Fe(d.status)})]})]}),v.jsxs("div",{style:{marginTop:"12px"},children:[v.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Placed By:"}),v.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"14px",marginTop:"4px"},children:d.user_id===Rr?"📱 App":"🏪 Counter"})]})]})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[v.jsxs("button",{onClick:()=>Se("DELIVERED"),disabled:g,style:{width:"100%",padding:"14px 20px",fontSize:"16px",fontWeight:"600",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"10px",cursor:g?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",opacity:g?.6:1},onMouseEnter:F=>{g||(F.target.style.backgroundColor="#059669")},onMouseLeave:F=>{g||(F.target.style.backgroundColor="#10b981")},children:[g?v.jsx(Xi,{size:18,className:"spin"}):v.jsx(Go,{size:18}),g?"Updating...":"Mark as Delivered"]}),v.jsxs("div",{style:{display:"flex",gap:"10px"},children:[v.jsxs("button",{onClick:U,disabled:g,style:{flex:1,padding:"12px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ffffff",color:"#dc2626",border:"1px solid #dc2626",borderRadius:"8px",cursor:g?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s ease",opacity:g?.6:1},onMouseEnter:F=>{g||(F.target.style.backgroundColor="#fef2f2")},onMouseLeave:F=>{g||(F.target.style.backgroundColor="#ffffff")},children:[v.jsx(mn,{size:16}),"Cancel Order"]}),v.jsx("button",{onClick:()=>p(null),disabled:g,style:{flex:1,padding:"12px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:g?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:g?.6:1},onMouseEnter:F=>{g||(F.target.style.backgroundColor="#e5e7eb")},onMouseLeave:F=>{g||(F.target.style.backgroundColor="#f3f4f6")},children:"Close"})]})]}),v.jsx("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:v.jsxs("details",{style:{cursor:"pointer"},children:[v.jsx("summary",{style:{fontSize:"12px",color:"#6b7280",userSelect:"none"},children:"Order Code Reference"}),v.jsx("code",{style:{fontSize:"11px",backgroundColor:"#f3f4f6",padding:"4px 8px",borderRadius:"4px",display:"block",marginTop:"8px",wordBreak:"break-all",color:"#374151"},children:d.qr_code||"Not available"})]})})]})})})})]})}function JI(){const{popupNotification:n,closePopupNotification:e}=Wu();if(!n)return null;const t=n.type==="order_cancelled",r=n.type==="availability_change",i=n.type==="error";let a;return i?a={border:"border-red-200 dark:border-red-700",borderLeft:"#ef4444",shadow:"rgba(239, 68, 68, 0.1)",bgHeader:"bg-red-50 dark:bg-red-900/20",bgIcon:"bg-red-500",textTitle:"text-red-800 dark:text-red-200",textTime:"text-red-600 dark:text-red-300",textBtn:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",bgProgress:"bg-red-200 dark:bg-red-800",progress:"bg-red-500"}:r?a={border:"border-blue-200 dark:border-blue-700",borderLeft:"#3b82f6",shadow:"rgba(59, 130, 246, 0.1)",bgHeader:"bg-blue-50 dark:bg-blue-900/20",bgIcon:"bg-blue-500",textTitle:"text-blue-800 dark:text-blue-200",textTime:"text-blue-600 dark:text-blue-300",textBtn:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",bgProgress:"bg-blue-200 dark:bg-blue-800",progress:"bg-blue-500"}:t?a={border:"border-red-200 dark:border-red-700",borderLeft:"#ef4444",shadow:"rgba(239, 68, 68, 0.1)",bgHeader:"bg-red-50 dark:bg-red-900/20",bgIcon:"bg-red-500",textTitle:"text-red-800 dark:text-red-200",textTime:"text-red-600 dark:text-red-300",textBtn:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",bgProgress:"bg-red-200 dark:bg-red-800",progress:"bg-red-500"}:a={border:"border-green-200 dark:border-green-700",borderLeft:"#10b981",shadow:"rgba(16, 185, 129, 0.1)",bgHeader:"bg-green-50 dark:bg-green-900/20",bgIcon:"bg-green-500",textTitle:"text-green-800 dark:text-green-200",textTime:"text-green-600 dark:text-green-300",textBtn:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200",bgProgress:"bg-green-200 dark:bg-green-800",progress:"bg-green-500"},v.jsx(Dn,{children:v.jsx(Ve.div,{className:"fixed top-4 right-4 z-50 max-w-sm w-full",initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{type:"spring",stiffness:300,damping:25,duration:.3},children:v.jsxs("div",{className:`bg-white dark:bg-gray-800 border ${a.border} rounded-lg shadow-lg overflow-hidden`,style:{borderLeft:`4px solid ${a.borderLeft}`,boxShadow:`0 10px 25px rgba(0, 0, 0, 0.1), 0 0 0 1px ${a.shadow}`},children:[v.jsxs("div",{className:`flex items-center justify-between p-4 ${a.bgHeader}`,children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:`w-8 h-8 ${a.bgIcon} rounded-full flex items-center justify-center`,children:v.jsx(mu,{className:"w-4 h-4 text-white"})}),v.jsxs("div",{children:[v.jsx("h4",{className:`font-semibold ${a.textTitle} text-sm`,children:n.title}),v.jsx("p",{className:`text-xs ${a.textTime}`,children:new Date(n.timestamp).toLocaleTimeString()})]})]}),v.jsx("button",{onClick:e,className:`${a.textBtn} transition-colors`,children:v.jsx(mn,{className:"w-4 h-4"})})]}),v.jsxs("div",{className:"p-4",children:[v.jsx("p",{className:"text-gray-800 dark:text-gray-200 text-sm leading-relaxed",children:n.message}),n.orderData&&!t&&v.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:v.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[n.orderData.total_amount&&v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{children:"Amount:"}),v.jsxs("span",{className:"font-medium",children:["₹",n.orderData.total_amount]})]}),n.orderData.order_type&&n.orderData.order_type!=="cancelled"&&v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{children:"Type:"}),v.jsx("span",{className:"font-medium capitalize",children:n.orderData.order_type})]}),n.orderData.user_id&&v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{children:"Placed by:"}),v.jsx("span",{className:"font-medium capitalize",children:n.orderData.user_id===Rr?"App":"Counter"})]})]})})]}),v.jsx("div",{className:`h-1 ${a.bgProgress}`,children:v.jsx(Ve.div,{className:`h-full ${a.progress}`,initial:{width:"100%"},animate:{width:"0%"},transition:{duration:5,ease:"linear"}})})]})})})}bS.createRoot(document.getElementById("root")).render(v.jsx(R.StrictMode,{children:v.jsx(ME,{children:v.jsx(zI,{})})}));
