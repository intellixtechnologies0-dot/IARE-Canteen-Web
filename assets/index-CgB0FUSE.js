(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function lb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function cb(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Uh={exports:{}},bl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function zE(){if(yv)return bl;yv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:l,ref:i!==void 0?i:null,props:a}}return bl.Fragment=e,bl.jsx=t,bl.jsxs=t,bl}var vv;function VE(){return vv||(vv=1,Uh.exports=zE()),Uh.exports}var p=VE(),zh={exports:{}},dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function HE(){if(xv)return dt;xv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,A={};function E(B,H,se){this.props=B,this.context=H,this.refs=A,this.updater=se||w}E.prototype.isReactComponent={},E.prototype.setState=function(B,H){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,H,"setState")},E.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function S(){}S.prototype=E.prototype;function T(B,H,se){this.props=B,this.context=H,this.refs=A,this.updater=se||w}var R=T.prototype=new S;R.constructor=T,_(R,E.prototype),R.isPureReactComponent=!0;var N=Array.isArray;function k(){}var M={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function ie(B,H,se){var Se=se.ref;return{$$typeof:n,type:B,key:H,ref:Se!==void 0?Se:null,props:se}}function fe(B,H){return ie(B.type,H,B.props)}function xe(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function q(B){var H={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(se){return H[se]})}var we=/\/+/g;function Te(B,H){return typeof B=="object"&&B!==null&&B.key!=null?q(""+B.key):H.toString(36)}function ae(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(k,k):(B.status="pending",B.then(function(H){B.status==="pending"&&(B.status="fulfilled",B.value=H)},function(H){B.status==="pending"&&(B.status="rejected",B.reason=H)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function L(B,H,se,Se,De){var Me=typeof B;(Me==="undefined"||Me==="boolean")&&(B=null);var Ye=!1;if(B===null)Ye=!0;else switch(Me){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(B.$$typeof){case n:case e:Ye=!0;break;case g:return Ye=B._init,L(Ye(B._payload),H,se,Se,De)}}if(Ye)return De=De(B),Ye=Se===""?"."+Te(B,0):Se,N(De)?(se="",Ye!=null&&(se=Ye.replace(we,"$&/")+"/"),L(De,H,se,"",function(Oe){return Oe})):De!=null&&(xe(De)&&(De=fe(De,se+(De.key==null||B&&B.key===De.key?"":(""+De.key).replace(we,"$&/")+"/")+Ye)),H.push(De)),1;Ye=0;var ut=Se===""?".":Se+":";if(N(B))for(var $=0;$<B.length;$++)Se=B[$],Me=ut+Te(Se,$),Ye+=L(Se,H,se,Me,De);else if($=x(B),typeof $=="function")for(B=$.call(B),$=0;!(Se=B.next()).done;)Se=Se.value,Me=ut+Te(Se,$++),Ye+=L(Se,H,se,Me,De);else if(Me==="object"){if(typeof B.then=="function")return L(ae(B),H,se,Se,De);throw H=String(B),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function te(B,H,se){if(B==null)return B;var Se=[],De=0;return L(B,Se,"","",function(Me){return H.call(se,Me,De++)}),Se}function ce(B){if(B._status===-1){var H=B._result;H=H(),H.then(function(se){(B._status===0||B._status===-1)&&(B._status=1,B._result=se)},function(se){(B._status===0||B._status===-1)&&(B._status=2,B._result=se)}),B._status===-1&&(B._status=0,B._result=H)}if(B._status===1)return B._result.default;throw B._result}var Z=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},pe={map:te,forEach:function(B,H,se){te(B,function(){H.apply(this,arguments)},se)},count:function(B){var H=0;return te(B,function(){H++}),H},toArray:function(B){return te(B,function(H){return H})||[]},only:function(B){if(!xe(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return dt.Activity=m,dt.Children=pe,dt.Component=E,dt.Fragment=t,dt.Profiler=i,dt.PureComponent=T,dt.StrictMode=r,dt.Suspense=d,dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,dt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return M.H.useMemoCache(B)}},dt.cache=function(B){return function(){return B.apply(null,arguments)}},dt.cacheSignal=function(){return null},dt.cloneElement=function(B,H,se){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var Se=_({},B.props),De=B.key;if(H!=null)for(Me in H.key!==void 0&&(De=""+H.key),H)!V.call(H,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&H.ref===void 0||(Se[Me]=H[Me]);var Me=arguments.length-2;if(Me===1)Se.children=se;else if(1<Me){for(var Ye=Array(Me),ut=0;ut<Me;ut++)Ye[ut]=arguments[ut+2];Se.children=Ye}return ie(B.type,De,Se)},dt.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},dt.createElement=function(B,H,se){var Se,De={},Me=null;if(H!=null)for(Se in H.key!==void 0&&(Me=""+H.key),H)V.call(H,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(De[Se]=H[Se]);var Ye=arguments.length-2;if(Ye===1)De.children=se;else if(1<Ye){for(var ut=Array(Ye),$=0;$<Ye;$++)ut[$]=arguments[$+2];De.children=ut}if(B&&B.defaultProps)for(Se in Ye=B.defaultProps,Ye)De[Se]===void 0&&(De[Se]=Ye[Se]);return ie(B,Me,De)},dt.createRef=function(){return{current:null}},dt.forwardRef=function(B){return{$$typeof:c,render:B}},dt.isValidElement=xe,dt.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:ce}},dt.memo=function(B,H){return{$$typeof:f,type:B,compare:H===void 0?null:H}},dt.startTransition=function(B){var H=M.T,se={};M.T=se;try{var Se=B(),De=M.S;De!==null&&De(se,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(k,Z)}catch(Me){Z(Me)}finally{H!==null&&se.types!==null&&(H.types=se.types),M.T=H}},dt.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},dt.use=function(B){return M.H.use(B)},dt.useActionState=function(B,H,se){return M.H.useActionState(B,H,se)},dt.useCallback=function(B,H){return M.H.useCallback(B,H)},dt.useContext=function(B){return M.H.useContext(B)},dt.useDebugValue=function(){},dt.useDeferredValue=function(B,H){return M.H.useDeferredValue(B,H)},dt.useEffect=function(B,H){return M.H.useEffect(B,H)},dt.useEffectEvent=function(B){return M.H.useEffectEvent(B)},dt.useId=function(){return M.H.useId()},dt.useImperativeHandle=function(B,H,se){return M.H.useImperativeHandle(B,H,se)},dt.useInsertionEffect=function(B,H){return M.H.useInsertionEffect(B,H)},dt.useLayoutEffect=function(B,H){return M.H.useLayoutEffect(B,H)},dt.useMemo=function(B,H){return M.H.useMemo(B,H)},dt.useOptimistic=function(B,H){return M.H.useOptimistic(B,H)},dt.useReducer=function(B,H,se){return M.H.useReducer(B,H,se)},dt.useRef=function(B){return M.H.useRef(B)},dt.useState=function(B){return M.H.useState(B)},dt.useSyncExternalStore=function(B,H,se){return M.H.useSyncExternalStore(B,H,se)},dt.useTransition=function(){return M.H.useTransition()},dt.version="19.2.0",dt}var bv;function Sp(){return bv||(bv=1,zh.exports=HE()),zh.exports}var O=Sp();const ub=lb(O);var Vh={exports:{}},wl={},Hh={exports:{}},$h={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function $E(){return wv||(wv=1,(function(n){function e(L,te){var ce=L.length;L.push(te);e:for(;0<ce;){var Z=ce-1>>>1,pe=L[Z];if(0<i(pe,te))L[Z]=te,L[ce]=pe,ce=Z;else break e}}function t(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var te=L[0],ce=L.pop();if(ce!==te){L[0]=ce;e:for(var Z=0,pe=L.length,B=pe>>>1;Z<B;){var H=2*(Z+1)-1,se=L[H],Se=H+1,De=L[Se];if(0>i(se,ce))Se<pe&&0>i(De,se)?(L[Z]=De,L[Se]=ce,Z=Se):(L[Z]=se,L[H]=ce,Z=H);else if(Se<pe&&0>i(De,ce))L[Z]=De,L[Se]=ce,Z=Se;else break e}}return te}function i(L,te){var ce=L.sortIndex-te.sortIndex;return ce!==0?ce:L.id-te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],f=[],g=1,m=null,y=3,x=!1,w=!1,_=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function R(L){for(var te=t(f);te!==null;){if(te.callback===null)r(f);else if(te.startTime<=L)r(f),te.sortIndex=te.expirationTime,e(d,te);else break;te=t(f)}}function N(L){if(_=!1,R(L),!w)if(t(d)!==null)w=!0,k||(k=!0,q());else{var te=t(f);te!==null&&ae(N,te.startTime-L)}}var k=!1,M=-1,V=5,ie=-1;function fe(){return A?!0:!(n.unstable_now()-ie<V)}function xe(){if(A=!1,k){var L=n.unstable_now();ie=L;var te=!0;try{e:{w=!1,_&&(_=!1,S(M),M=-1),x=!0;var ce=y;try{t:{for(R(L),m=t(d);m!==null&&!(m.expirationTime>L&&fe());){var Z=m.callback;if(typeof Z=="function"){m.callback=null,y=m.priorityLevel;var pe=Z(m.expirationTime<=L);if(L=n.unstable_now(),typeof pe=="function"){m.callback=pe,R(L),te=!0;break t}m===t(d)&&r(d),R(L)}else r(d);m=t(d)}if(m!==null)te=!0;else{var B=t(f);B!==null&&ae(N,B.startTime-L),te=!1}}break e}finally{m=null,y=ce,x=!1}te=void 0}}finally{te?q():k=!1}}}var q;if(typeof T=="function")q=function(){T(xe)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Te=we.port2;we.port1.onmessage=xe,q=function(){Te.postMessage(null)}}else q=function(){E(xe,0)};function ae(L,te){M=E(function(){L(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(L){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var ce=y;y=te;try{return L()}finally{y=ce}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(L,te){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ce=y;y=L;try{return te()}finally{y=ce}},n.unstable_scheduleCallback=function(L,te,ce){var Z=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Z+ce:Z):ce=Z,L){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ce+pe,L={id:g++,callback:te,priorityLevel:L,startTime:ce,expirationTime:pe,sortIndex:-1},ce>Z?(L.sortIndex=ce,e(f,L),t(d)===null&&L===t(f)&&(_?(S(M),M=-1):_=!0,ae(N,ce-Z))):(L.sortIndex=pe,e(d,L),w||x||(w=!0,k||(k=!0,q()))),L},n.unstable_shouldYield=fe,n.unstable_wrapCallback=function(L){var te=y;return function(){var ce=y;y=te;try{return L.apply(this,arguments)}finally{y=ce}}}})($h)),$h}var _v;function qE(){return _v||(_v=1,Hh.exports=$E()),Hh.exports}var qh={exports:{}},tr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function GE(){if(Sv)return tr;Sv=1;var n=Sp();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,f,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:f,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return tr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tr.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,g)},tr.flushSync=function(d){var f=l.T,g=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=f,r.p=g,r.d.f()}},tr.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},tr.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},tr.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,m=c(g,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):g==="script"&&r.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},tr.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=c(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},tr.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,m=c(g,f.crossOrigin);r.d.L(d,g,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},tr.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=c(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},tr.requestFormReset=function(d){r.d.r(d)},tr.unstable_batchedUpdates=function(d,f){return d(f)},tr.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},tr.useFormStatus=function(){return l.H.useHostTransitionStatus()},tr.version="19.2.0",tr}var Cv;function db(){if(Cv)return qh.exports;Cv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qh.exports=GE(),qh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function WE(){if(Ev)return wl;Ev=1;var n=qE(),e=Sp(),t=db();function r(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,u=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(u=s.return),o=s.return;while(o)}return s.tag===3?u:null}function l(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function c(o){if(o.tag===31){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function d(o){if(a(o)!==o)throw Error(r(188))}function f(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(r(188));return s!==o?null:o}for(var u=o,h=s;;){var v=u.return;if(v===null)break;var b=v.alternate;if(b===null){if(h=v.return,h!==null){u=h;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===u)return d(v),o;if(b===h)return d(v),s;b=b.sibling}throw Error(r(188))}if(u.return!==h.return)u=v,h=b;else{for(var C=!1,I=v.child;I;){if(I===u){C=!0,u=v,h=b;break}if(I===h){C=!0,h=v,u=b;break}I=I.sibling}if(!C){for(I=b.child;I;){if(I===u){C=!0,u=b,h=v;break}if(I===h){C=!0,h=b,u=v;break}I=I.sibling}if(!C)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?o:s}function g(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=g(o),s!==null)return s;o=o.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=xe&&o[xe]||o["@@iterator"],typeof o=="function"?o:null)}var we=Symbol.for("react.client.reference");function Te(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===we?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _:return"Fragment";case E:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case k:return"SuspenseList";case ie:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case w:return"Portal";case T:return o.displayName||"Context";case S:return(o._context.displayName||"Context")+".Consumer";case R:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case M:return s=o.displayName||null,s!==null?s:Te(o.type)||"Memo";case V:s=o._payload,o=o._init;try{return Te(o(s))}catch{}}return null}var ae=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Z=[],pe=-1;function B(o){return{current:o}}function H(o){0>pe||(o.current=Z[pe],Z[pe]=null,pe--)}function se(o,s){pe++,Z[pe]=o.current,o.current=s}var Se=B(null),De=B(null),Me=B(null),Ye=B(null);function ut(o,s){switch(se(Me,s),se(De,o),se(Se,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?Uy(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=Uy(s),o=zy(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}H(Se),se(Se,o)}function $(){H(Se),H(De),H(Me)}function Oe(o){o.memoizedState!==null&&se(Ye,o);var s=Se.current,u=zy(s,o.type);s!==u&&(se(De,o),se(Se,u))}function Ce(o){De.current===o&&(H(Se),H(De)),Ye.current===o&&(H(Ye),ml._currentValue=ce)}var $e,Ie;function Ge(o){if($e===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);$e=s&&s[1]||"",Ie=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+o+Ie}var Pe=!1;function nt(o,s){if(!o||Pe)return"";Pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var ee=re}Reflect.construct(o,[],he)}else{try{he.call()}catch(re){ee=re}o.call(he.prototype)}}else{try{throw Error()}catch(re){ee=re}(he=o())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&ee&&typeof re.stack=="string")return[re.stack,ee.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),C=b[0],I=b[1];if(C&&I){var F=C.split(`
`),Q=I.split(`
`);for(v=h=0;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;for(;v<Q.length&&!Q[v].includes("DetermineComponentFrameRoot");)v++;if(h===F.length||v===Q.length)for(h=F.length-1,v=Q.length-1;1<=h&&0<=v&&F[h]!==Q[v];)v--;for(;1<=h&&0<=v;h--,v--)if(F[h]!==Q[v]){if(h!==1||v!==1)do if(h--,v--,0>v||F[h]!==Q[v]){var ue=`
`+F[h].replace(" at new "," at ");return o.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",o.displayName)),ue}while(1<=h&&0<=v);break}}}finally{Pe=!1,Error.prepareStackTrace=u}return(u=o?o.displayName||o.name:"")?Ge(u):""}function at(o,s){switch(o.tag){case 26:case 27:case 5:return Ge(o.type);case 16:return Ge("Lazy");case 13:return o.child!==s&&s!==null?Ge("Suspense Fallback"):Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 15:return nt(o.type,!1);case 11:return nt(o.type.render,!1);case 1:return nt(o.type,!0);case 31:return Ge("Activity");default:return""}}function X(o){try{var s="",u=null;do s+=at(o,u),u=o,o=o.return;while(o);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var oe=Object.prototype.hasOwnProperty,Be=n.unstable_scheduleCallback,Ne=n.unstable_cancelCallback,je=n.unstable_shouldYield,_e=n.unstable_requestPaint,Re=n.unstable_now,ke=n.unstable_getCurrentPriorityLevel,Ue=n.unstable_ImmediatePriority,it=n.unstable_UserBlockingPriority,Fe=n.unstable_NormalPriority,j=n.unstable_LowPriority,U=n.unstable_IdlePriority,G=n.log,ne=n.unstable_setDisableYieldValue,ve=null,ge=null;function me(o){if(typeof G=="function"&&ne(o),ge&&typeof ge.setStrictMode=="function")try{ge.setStrictMode(ve,o)}catch{}}var be=Math.clz32?Math.clz32:ot,ze=Math.log,pt=Math.LN2;function ot(o){return o>>>=0,o===0?32:31-(ze(o)/pt|0)|0}var Xt=256,qt=262144,wt=4194304;function Pt(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ot(o,s,u){var h=o.pendingLanes;if(h===0)return 0;var v=0,b=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var I=h&134217727;return I!==0?(h=I&~b,h!==0?v=Pt(h):(C&=I,C!==0?v=Pt(C):u||(u=I&~o,u!==0&&(v=Pt(u))))):(I=h&~b,I!==0?v=Pt(I):C!==0?v=Pt(C):u||(u=h&~o,u!==0&&(v=Pt(u)))),v===0?0:s!==0&&s!==v&&(s&b)===0&&(b=v&-v,u=s&-s,b>=u||b===32&&(u&4194048)!==0)?s:v}function an(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function dr(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kr(){var o=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),o}function D(o){for(var s=[],u=0;31>u;u++)s.push(o);return s}function J(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ye(o,s,u,h,v,b){var C=o.pendingLanes;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=u,o.entangledLanes&=u,o.errorRecoveryDisabledLanes&=u,o.shellSuspendCounter=0;var I=o.entanglements,F=o.expirationTimes,Q=o.hiddenUpdates;for(u=C&~u;0<u;){var ue=31-be(u),he=1<<ue;I[ue]=0,F[ue]=-1;var ee=Q[ue];if(ee!==null)for(Q[ue]=null,ue=0;ue<ee.length;ue++){var re=ee[ue];re!==null&&(re.lane&=-536870913)}u&=~he}h!==0&&He(o,h,0),b!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=b&~(C&~s))}function He(o,s,u){o.pendingLanes|=s,o.suspendedLanes&=~s;var h=31-be(s);o.entangledLanes|=s,o.entanglements[h]=o.entanglements[h]|1073741824|u&261930}function Le(o,s){var u=o.entangledLanes|=s;for(o=o.entanglements;u;){var h=31-be(u),v=1<<h;v&s|o[h]&s&&(o[h]|=s),u&=~v}}function Ze(o,s){var u=s&-s;return u=(u&42)!==0?1:lt(u),(u&(o.suspendedLanes|s))!==0?0:u}function lt(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Gt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function ln(){var o=te.p;return o!==0?o:(o=window.event,o===void 0?32:uv(o.type))}function et(o,s){var u=te.p;try{return te.p=o,s()}finally{te.p=u}}var cn=Math.random().toString(36).slice(2),_t="__reactFiber$"+cn,un="__reactProps$"+cn,li="__reactContainer$"+cn,fo="__reactEvents$"+cn,sc="__reactListeners$"+cn,Id="__reactHandles$"+cn,lc="__reactResources$"+cn,Ns="__reactMarker$"+cn;function Nd(o){delete o[_t],delete o[un],delete o[fo],delete o[sc],delete o[Id]}function ho(o){var s=o[_t];if(s)return s;for(var u=o.parentNode;u;){if(s=u[li]||u[_t]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(o=Xy(o);o!==null;){if(u=o[_t])return u;o=Xy(o)}return s}o=u,u=o.parentNode}return null}function po(o){if(o=o[_t]||o[li]){var s=o.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return o}return null}function ks(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(r(33))}function go(o){var s=o[lc];return s||(s=o[lc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Un(o){o[Ns]=!0}var O1=new Set,R1={};function Oa(o,s){mo(o,s),mo(o+"Capture",s)}function mo(o,s){for(R1[o]=s,o=0;o<s.length;o++)O1.add(s[o])}var kS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),I1={},N1={};function DS(o){return oe.call(N1,o)?!0:oe.call(I1,o)?!1:kS.test(o)?N1[o]=!0:(I1[o]=!0,!1)}function cc(o,s,u){if(DS(s))if(u===null)o.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+u)}}function uc(o,s,u){if(u===null)o.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+u)}}function bi(o,s,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttributeNS(s,u,""+h)}}function Dr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function k1(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function jS(o,s,u){var h=Object.getOwnPropertyDescriptor(o.constructor.prototype,s);if(!o.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,b=h.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return v.call(this)},set:function(C){u=""+C,b.call(this,C)}}),Object.defineProperty(o,s,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function kd(o){if(!o._valueTracker){var s=k1(o)?"checked":"value";o._valueTracker=jS(o,s,""+o[s])}}function D1(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var u=s.getValue(),h="";return o&&(h=k1(o)?o.checked?"true":"false":o.value),o=h,o!==u?(s.setValue(o),!0):!1}function dc(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var MS=/[\n"\\]/g;function jr(o){return o.replace(MS,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Dd(o,s,u,h,v,b,C,I){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),s!=null?C==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+Dr(s)):o.value!==""+Dr(s)&&(o.value=""+Dr(s)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),s!=null?jd(o,C,Dr(s)):u!=null?jd(o,C,Dr(u)):h!=null&&o.removeAttribute("value"),v==null&&b!=null&&(o.defaultChecked=!!b),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.name=""+Dr(I):o.removeAttribute("name")}function j1(o,s,u,h,v,b,C,I){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(o.type=b),s!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||s!=null)){kd(o);return}u=u!=null?""+Dr(u):"",s=s!=null?""+Dr(s):u,I||s===o.value||(o.value=s),o.defaultValue=s}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,o.checked=I?o.checked:!!h,o.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C),kd(o)}function jd(o,s,u){s==="number"&&dc(o.ownerDocument)===o||o.defaultValue===""+u||(o.defaultValue=""+u)}function yo(o,s,u,h){if(o=o.options,s){s={};for(var v=0;v<u.length;v++)s["$"+u[v]]=!0;for(u=0;u<o.length;u++)v=s.hasOwnProperty("$"+o[u].value),o[u].selected!==v&&(o[u].selected=v),v&&h&&(o[u].defaultSelected=!0)}else{for(u=""+Dr(u),s=null,v=0;v<o.length;v++){if(o[v].value===u){o[v].selected=!0,h&&(o[v].defaultSelected=!0);return}s!==null||o[v].disabled||(s=o[v])}s!==null&&(s.selected=!0)}}function M1(o,s,u){if(s!=null&&(s=""+Dr(s),s!==o.value&&(o.value=s),u==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=u!=null?""+Dr(u):""}function P1(o,s,u,h){if(s==null){if(h!=null){if(u!=null)throw Error(r(92));if(ae(h)){if(1<h.length)throw Error(r(93));h=h[0]}u=h}u==null&&(u=""),s=u}u=Dr(s),o.defaultValue=u,h=o.textContent,h===u&&h!==""&&h!==null&&(o.value=h),kd(o)}function vo(o,s){if(s){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=s;return}}o.textContent=s}var PS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function B1(o,s,u){var h=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":h?o.setProperty(s,u):typeof u!="number"||u===0||PS.has(s)?s==="float"?o.cssFloat=u:o[s]=(""+u).trim():o[s]=u+"px"}function L1(o,s,u){if(s!=null&&typeof s!="object")throw Error(r(62));if(o=o.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="");for(var v in s)h=s[v],s.hasOwnProperty(v)&&u[v]!==h&&B1(o,v,h)}else for(var b in s)s.hasOwnProperty(b)&&B1(o,b,s[b])}function Md(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),LS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fc(o){return LS.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function wi(){}var Pd=null;function Bd(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var xo=null,bo=null;function F1(o){var s=po(o);if(s&&(o=s.stateNode)){var u=o[un]||null;e:switch(o=s.stateNode,s.type){case"input":if(Dd(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+jr(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var h=u[s];if(h!==o&&h.form===o.form){var v=h[un]||null;if(!v)throw Error(r(90));Dd(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<u.length;s++)h=u[s],h.form===o.form&&D1(h)}break e;case"textarea":M1(o,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&yo(o,!!u.multiple,s,!1)}}}var Ld=!1;function U1(o,s,u){if(Ld)return o(s,u);Ld=!0;try{var h=o(s);return h}finally{if(Ld=!1,(xo!==null||bo!==null)&&(Jc(),xo&&(s=xo,o=bo,bo=xo=null,F1(s),o)))for(s=0;s<o.length;s++)F1(o[s])}}function Ds(o,s){var u=o.stateNode;if(u===null)return null;var h=u[un]||null;if(h===null)return null;u=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(o=o.type,h=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!h;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(r(231,s,typeof u));return u}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fd=!1;if(_i)try{var js={};Object.defineProperty(js,"passive",{get:function(){Fd=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Fd=!1}var $i=null,Ud=null,hc=null;function z1(){if(hc)return hc;var o,s=Ud,u=s.length,h,v="value"in $i?$i.value:$i.textContent,b=v.length;for(o=0;o<u&&s[o]===v[o];o++);var C=u-o;for(h=1;h<=C&&s[u-h]===v[b-h];h++);return hc=v.slice(o,1<h?1-h:void 0)}function pc(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function gc(){return!0}function V1(){return!1}function fr(o){function s(u,h,v,b,C){this._reactName=u,this._targetInst=v,this.type=h,this.nativeEvent=b,this.target=C,this.currentTarget=null;for(var I in o)o.hasOwnProperty(I)&&(u=o[I],this[I]=u?u(b):b[I]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?gc:V1,this.isPropagationStopped=V1,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=gc)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=gc)},persist:function(){},isPersistent:gc}),s}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mc=fr(Ra),Ms=m({},Ra,{view:0,detail:0}),FS=fr(Ms),zd,Vd,Ps,yc=m({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$d,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ps&&(Ps&&o.type==="mousemove"?(zd=o.screenX-Ps.screenX,Vd=o.screenY-Ps.screenY):Vd=zd=0,Ps=o),zd)},movementY:function(o){return"movementY"in o?o.movementY:Vd}}),H1=fr(yc),US=m({},yc,{dataTransfer:0}),zS=fr(US),VS=m({},Ms,{relatedTarget:0}),Hd=fr(VS),HS=m({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),$S=fr(HS),qS=m({},Ra,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),GS=fr(qS),WS=m({},Ra,{data:0}),$1=fr(WS),XS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZS(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=KS[o])?!!s[o]:!1}function $d(){return ZS}var QS=m({},Ms,{key:function(o){if(o.key){var s=XS[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=pc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?YS[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$d,charCode:function(o){return o.type==="keypress"?pc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?pc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),JS=fr(QS),eC=m({},yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q1=fr(eC),tC=m({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$d}),nC=fr(tC),rC=m({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),iC=fr(rC),aC=m({},yc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),oC=fr(aC),sC=m({},Ra,{newState:0,oldState:0}),lC=fr(sC),cC=[9,13,27,32],qd=_i&&"CompositionEvent"in window,Bs=null;_i&&"documentMode"in document&&(Bs=document.documentMode);var uC=_i&&"TextEvent"in window&&!Bs,G1=_i&&(!qd||Bs&&8<Bs&&11>=Bs),W1=" ",X1=!1;function Y1(o,s){switch(o){case"keyup":return cC.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K1(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var wo=!1;function dC(o,s){switch(o){case"compositionend":return K1(s);case"keypress":return s.which!==32?null:(X1=!0,W1);case"textInput":return o=s.data,o===W1&&X1?null:o;default:return null}}function fC(o,s){if(wo)return o==="compositionend"||!qd&&Y1(o,s)?(o=z1(),hc=Ud=$i=null,wo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return G1&&s.locale!=="ko"?null:s.data;default:return null}}var hC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z1(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!hC[o.type]:s==="textarea"}function Q1(o,s,u,h){xo?bo?bo.push(h):bo=[h]:xo=h,s=ou(s,"onChange"),0<s.length&&(u=new mc("onChange","change",null,u,h),o.push({event:u,listeners:s}))}var Ls=null,Fs=null;function pC(o){jy(o,0)}function vc(o){var s=ks(o);if(D1(s))return o}function J1(o,s){if(o==="change")return s}var eg=!1;if(_i){var Gd;if(_i){var Wd="oninput"in document;if(!Wd){var tg=document.createElement("div");tg.setAttribute("oninput","return;"),Wd=typeof tg.oninput=="function"}Gd=Wd}else Gd=!1;eg=Gd&&(!document.documentMode||9<document.documentMode)}function ng(){Ls&&(Ls.detachEvent("onpropertychange",rg),Fs=Ls=null)}function rg(o){if(o.propertyName==="value"&&vc(Fs)){var s=[];Q1(s,Fs,o,Bd(o)),U1(pC,s)}}function gC(o,s,u){o==="focusin"?(ng(),Ls=s,Fs=u,Ls.attachEvent("onpropertychange",rg)):o==="focusout"&&ng()}function mC(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return vc(Fs)}function yC(o,s){if(o==="click")return vc(s)}function vC(o,s){if(o==="input"||o==="change")return vc(s)}function xC(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var _r=typeof Object.is=="function"?Object.is:xC;function Us(o,s){if(_r(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var u=Object.keys(o),h=Object.keys(s);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var v=u[h];if(!oe.call(s,v)||!_r(o[v],s[v]))return!1}return!0}function ig(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function ag(o,s){var u=ig(o);o=0;for(var h;u;){if(u.nodeType===3){if(h=o+u.textContent.length,o<=s&&h>=s)return{node:u,offset:s-o};o=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ig(u)}}function og(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?og(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function sg(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=dc(o.document);s instanceof o.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)o=s.contentWindow;else break;s=dc(o.document)}return s}function Xd(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var bC=_i&&"documentMode"in document&&11>=document.documentMode,_o=null,Yd=null,zs=null,Kd=!1;function lg(o,s,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Kd||_o==null||_o!==dc(h)||(h=_o,"selectionStart"in h&&Xd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),zs&&Us(zs,h)||(zs=h,h=ou(Yd,"onSelect"),0<h.length&&(s=new mc("onSelect","select",null,s,u),o.push({event:s,listeners:h}),s.target=_o)))}function Ia(o,s){var u={};return u[o.toLowerCase()]=s.toLowerCase(),u["Webkit"+o]="webkit"+s,u["Moz"+o]="moz"+s,u}var So={animationend:Ia("Animation","AnimationEnd"),animationiteration:Ia("Animation","AnimationIteration"),animationstart:Ia("Animation","AnimationStart"),transitionrun:Ia("Transition","TransitionRun"),transitionstart:Ia("Transition","TransitionStart"),transitioncancel:Ia("Transition","TransitionCancel"),transitionend:Ia("Transition","TransitionEnd")},Zd={},cg={};_i&&(cg=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function Na(o){if(Zd[o])return Zd[o];if(!So[o])return o;var s=So[o],u;for(u in s)if(s.hasOwnProperty(u)&&u in cg)return Zd[o]=s[u];return o}var ug=Na("animationend"),dg=Na("animationiteration"),fg=Na("animationstart"),wC=Na("transitionrun"),_C=Na("transitionstart"),SC=Na("transitioncancel"),hg=Na("transitionend"),pg=new Map,Qd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qd.push("scrollEnd");function Kr(o,s){pg.set(o,s),Oa(s,[o])}var xc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Mr=[],Co=0,Jd=0;function bc(){for(var o=Co,s=Jd=Co=0;s<o;){var u=Mr[s];Mr[s++]=null;var h=Mr[s];Mr[s++]=null;var v=Mr[s];Mr[s++]=null;var b=Mr[s];if(Mr[s++]=null,h!==null&&v!==null){var C=h.pending;C===null?v.next=v:(v.next=C.next,C.next=v),h.pending=v}b!==0&&gg(u,v,b)}}function wc(o,s,u,h){Mr[Co++]=o,Mr[Co++]=s,Mr[Co++]=u,Mr[Co++]=h,Jd|=h,o.lanes|=h,o=o.alternate,o!==null&&(o.lanes|=h)}function ef(o,s,u,h){return wc(o,s,u,h),_c(o)}function ka(o,s){return wc(o,null,null,s),_c(o)}function gg(o,s,u){o.lanes|=u;var h=o.alternate;h!==null&&(h.lanes|=u);for(var v=!1,b=o.return;b!==null;)b.childLanes|=u,h=b.alternate,h!==null&&(h.childLanes|=u),b.tag===22&&(o=b.stateNode,o===null||o._visibility&1||(v=!0)),o=b,b=b.return;return o.tag===3?(b=o.stateNode,v&&s!==null&&(v=31-be(u),o=b.hiddenUpdates,h=o[v],h===null?o[v]=[s]:h.push(s),s.lane=u|536870912),b):null}function _c(o){if(50<cl)throw cl=0,uh=null,Error(r(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var Eo={};function CC(o,s,u,h){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(o,s,u,h){return new CC(o,s,u,h)}function tf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Si(o,s){var u=o.alternate;return u===null?(u=Sr(o.tag,s,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=s,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&65011712,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,s=o.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u.refCleanup=o.refCleanup,u}function mg(o,s){o.flags&=65011714;var u=o.alternate;return u===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,s=u.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function Sc(o,s,u,h,v,b){var C=0;if(h=o,typeof o=="function")tf(o)&&(C=1);else if(typeof o=="string")C=RE(o,u,Se.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case ie:return o=Sr(31,u,s,v),o.elementType=ie,o.lanes=b,o;case _:return Da(u.children,v,b,s);case A:C=8,v|=24;break;case E:return o=Sr(12,u,s,v|2),o.elementType=E,o.lanes=b,o;case N:return o=Sr(13,u,s,v),o.elementType=N,o.lanes=b,o;case k:return o=Sr(19,u,s,v),o.elementType=k,o.lanes=b,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case T:C=10;break e;case S:C=9;break e;case R:C=11;break e;case M:C=14;break e;case V:C=16,h=null;break e}C=29,u=Error(r(130,o===null?"null":typeof o,"")),h=null}return s=Sr(C,u,s,v),s.elementType=o,s.type=h,s.lanes=b,s}function Da(o,s,u,h){return o=Sr(7,o,h,s),o.lanes=u,o}function nf(o,s,u){return o=Sr(6,o,null,s),o.lanes=u,o}function yg(o){var s=Sr(18,null,null,0);return s.stateNode=o,s}function rf(o,s,u){return s=Sr(4,o.children!==null?o.children:[],o.key,s),s.lanes=u,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var vg=new WeakMap;function Pr(o,s){if(typeof o=="object"&&o!==null){var u=vg.get(o);return u!==void 0?u:(s={value:o,source:s,stack:X(s)},vg.set(o,s),s)}return{value:o,source:s,stack:X(s)}}var Ao=[],To=0,Cc=null,Vs=0,Br=[],Lr=0,qi=null,ci=1,ui="";function Ci(o,s){Ao[To++]=Vs,Ao[To++]=Cc,Cc=o,Vs=s}function xg(o,s,u){Br[Lr++]=ci,Br[Lr++]=ui,Br[Lr++]=qi,qi=o;var h=ci;o=ui;var v=32-be(h)-1;h&=~(1<<v),u+=1;var b=32-be(s)+v;if(30<b){var C=v-v%5;b=(h&(1<<C)-1).toString(32),h>>=C,v-=C,ci=1<<32-be(s)+v|u<<v|h,ui=b+o}else ci=1<<b|u<<v|h,ui=o}function af(o){o.return!==null&&(Ci(o,1),xg(o,1,0))}function of(o){for(;o===Cc;)Cc=Ao[--To],Ao[To]=null,Vs=Ao[--To],Ao[To]=null;for(;o===qi;)qi=Br[--Lr],Br[Lr]=null,ui=Br[--Lr],Br[Lr]=null,ci=Br[--Lr],Br[Lr]=null}function bg(o,s){Br[Lr++]=ci,Br[Lr++]=ui,Br[Lr++]=qi,ci=s.id,ui=s.overflow,qi=o}var Wn=null,Qt=null,Et=!1,Gi=null,Fr=!1,sf=Error(r(519));function Wi(o){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hs(Pr(s,o)),sf}function wg(o){var s=o.stateNode,u=o.type,h=o.memoizedProps;switch(s[_t]=o,s[un]=h,u){case"dialog":bt("cancel",s),bt("close",s);break;case"iframe":case"object":case"embed":bt("load",s);break;case"video":case"audio":for(u=0;u<dl.length;u++)bt(dl[u],s);break;case"source":bt("error",s);break;case"img":case"image":case"link":bt("error",s),bt("load",s);break;case"details":bt("toggle",s);break;case"input":bt("invalid",s),j1(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":bt("invalid",s);break;case"textarea":bt("invalid",s),P1(s,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||h.suppressHydrationWarning===!0||Ly(s.textContent,u)?(h.popover!=null&&(bt("beforetoggle",s),bt("toggle",s)),h.onScroll!=null&&bt("scroll",s),h.onScrollEnd!=null&&bt("scrollend",s),h.onClick!=null&&(s.onclick=wi),s=!0):s=!1,s||Wi(o,!0)}function _g(o){for(Wn=o.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:Fr=!1;return;case 27:case 3:Fr=!0;return;default:Wn=Wn.return}}function Oo(o){if(o!==Wn)return!1;if(!Et)return _g(o),Et=!0,!1;var s=o.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=o.type,u=!(u!=="form"&&u!=="button")||Eh(o.type,o.memoizedProps)),u=!u),u&&Qt&&Wi(o),_g(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Qt=Wy(o)}else if(s===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Qt=Wy(o)}else s===27?(s=Qt,sa(o.type)?(o=Ih,Ih=null,Qt=o):Qt=s):Qt=Wn?zr(o.stateNode.nextSibling):null;return!0}function ja(){Qt=Wn=null,Et=!1}function lf(){var o=Gi;return o!==null&&(mr===null?mr=o:mr.push.apply(mr,o),Gi=null),o}function Hs(o){Gi===null?Gi=[o]:Gi.push(o)}var cf=B(null),Ma=null,Ei=null;function Xi(o,s,u){se(cf,s._currentValue),s._currentValue=u}function Ai(o){o._currentValue=cf.current,H(cf)}function uf(o,s,u){for(;o!==null;){var h=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),o===u)break;o=o.return}}function df(o,s,u,h){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var b=v.dependencies;if(b!==null){var C=v.child;b=b.firstContext;e:for(;b!==null;){var I=b;b=v;for(var F=0;F<s.length;F++)if(I.context===s[F]){b.lanes|=u,I=b.alternate,I!==null&&(I.lanes|=u),uf(b.return,u,o),h||(C=null);break e}b=I.next}}else if(v.tag===18){if(C=v.return,C===null)throw Error(r(341));C.lanes|=u,b=C.alternate,b!==null&&(b.lanes|=u),uf(C,u,o),C=null}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===o){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}}function Ro(o,s,u,h){o=null;for(var v=s,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var C=v.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var I=v.type;_r(v.pendingProps.value,C.value)||(o!==null?o.push(I):o=[I])}}else if(v===Ye.current){if(C=v.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(ml):o=[ml])}v=v.return}o!==null&&df(s,o,u,h),s.flags|=262144}function Ec(o){for(o=o.firstContext;o!==null;){if(!_r(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Pa(o){Ma=o,Ei=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Xn(o){return Sg(Ma,o)}function Ac(o,s){return Ma===null&&Pa(o),Sg(o,s)}function Sg(o,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},Ei===null){if(o===null)throw Error(r(308));Ei=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else Ei=Ei.next=s;return u}var EC=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(u,h){o.push(h)}};this.abort=function(){s.aborted=!0,o.forEach(function(u){return u()})}},AC=n.unstable_scheduleCallback,TC=n.unstable_NormalPriority,Cn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ff(){return{controller:new EC,data:new Map,refCount:0}}function $s(o){o.refCount--,o.refCount===0&&AC(TC,function(){o.controller.abort()})}var qs=null,hf=0,Io=0,No=null;function OC(o,s){if(qs===null){var u=qs=[];hf=0,Io=mh(),No={status:"pending",value:void 0,then:function(h){u.push(h)}}}return hf++,s.then(Cg,Cg),s}function Cg(){if(--hf===0&&qs!==null){No!==null&&(No.status="fulfilled");var o=qs;qs=null,Io=0,No=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function RC(o,s){var u=[],h={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return o.then(function(){h.status="fulfilled",h.value=s;for(var v=0;v<u.length;v++)(0,u[v])(s)},function(v){for(h.status="rejected",h.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),h}var Eg=L.S;L.S=function(o,s){ly=Re(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&OC(o,s),Eg!==null&&Eg(o,s)};var Ba=B(null);function pf(){var o=Ba.current;return o!==null?o:Wt.pooledCache}function Tc(o,s){s===null?se(Ba,Ba.current):se(Ba,s.pool)}function Ag(){var o=pf();return o===null?null:{parent:Cn._currentValue,pool:o}}var ko=Error(r(460)),gf=Error(r(474)),Oc=Error(r(542)),Rc={then:function(){}};function Tg(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Og(o,s,u){switch(u=o[u],u===void 0?o.push(s):u!==s&&(s.then(wi,wi),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Ig(o),o;default:if(typeof s.status=="string")s.then(wi,wi);else{if(o=Wt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=s,o.status="pending",o.then(function(h){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=h}},function(h){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Ig(o),o}throw Fa=s,ko}}function La(o){try{var s=o._init;return s(o._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Fa=u,ko):u}}var Fa=null;function Rg(){if(Fa===null)throw Error(r(459));var o=Fa;return Fa=null,o}function Ig(o){if(o===ko||o===Oc)throw Error(r(483))}var Do=null,Gs=0;function Ic(o){var s=Gs;return Gs+=1,Do===null&&(Do=[]),Og(Do,o,s)}function Ws(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Nc(o,s){throw s.$$typeof===y?Error(r(525)):(o=Object.prototype.toString.call(s),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function Ng(o){function s(W,z){if(o){var K=W.deletions;K===null?(W.deletions=[z],W.flags|=16):K.push(z)}}function u(W,z){if(!o)return null;for(;z!==null;)s(W,z),z=z.sibling;return null}function h(W){for(var z=new Map;W!==null;)W.key!==null?z.set(W.key,W):z.set(W.index,W),W=W.sibling;return z}function v(W,z){return W=Si(W,z),W.index=0,W.sibling=null,W}function b(W,z,K){return W.index=K,o?(K=W.alternate,K!==null?(K=K.index,K<z?(W.flags|=67108866,z):K):(W.flags|=67108866,z)):(W.flags|=1048576,z)}function C(W){return o&&W.alternate===null&&(W.flags|=67108866),W}function I(W,z,K,de){return z===null||z.tag!==6?(z=nf(K,W.mode,de),z.return=W,z):(z=v(z,K),z.return=W,z)}function F(W,z,K,de){var Ke=K.type;return Ke===_?ue(W,z,K.props.children,de,K.key):z!==null&&(z.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===V&&La(Ke)===z.type)?(z=v(z,K.props),Ws(z,K),z.return=W,z):(z=Sc(K.type,K.key,K.props,null,W.mode,de),Ws(z,K),z.return=W,z)}function Q(W,z,K,de){return z===null||z.tag!==4||z.stateNode.containerInfo!==K.containerInfo||z.stateNode.implementation!==K.implementation?(z=rf(K,W.mode,de),z.return=W,z):(z=v(z,K.children||[]),z.return=W,z)}function ue(W,z,K,de,Ke){return z===null||z.tag!==7?(z=Da(K,W.mode,de,Ke),z.return=W,z):(z=v(z,K),z.return=W,z)}function he(W,z,K){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=nf(""+z,W.mode,K),z.return=W,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case x:return K=Sc(z.type,z.key,z.props,null,W.mode,K),Ws(K,z),K.return=W,K;case w:return z=rf(z,W.mode,K),z.return=W,z;case V:return z=La(z),he(W,z,K)}if(ae(z)||q(z))return z=Da(z,W.mode,K,null),z.return=W,z;if(typeof z.then=="function")return he(W,Ic(z),K);if(z.$$typeof===T)return he(W,Ac(W,z),K);Nc(W,z)}return null}function ee(W,z,K,de){var Ke=z!==null?z.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ke!==null?null:I(W,z,""+K,de);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return K.key===Ke?F(W,z,K,de):null;case w:return K.key===Ke?Q(W,z,K,de):null;case V:return K=La(K),ee(W,z,K,de)}if(ae(K)||q(K))return Ke!==null?null:ue(W,z,K,de,null);if(typeof K.then=="function")return ee(W,z,Ic(K),de);if(K.$$typeof===T)return ee(W,z,Ac(W,K),de);Nc(W,K)}return null}function re(W,z,K,de,Ke){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return W=W.get(K)||null,I(z,W,""+de,Ke);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case x:return W=W.get(de.key===null?K:de.key)||null,F(z,W,de,Ke);case w:return W=W.get(de.key===null?K:de.key)||null,Q(z,W,de,Ke);case V:return de=La(de),re(W,z,K,de,Ke)}if(ae(de)||q(de))return W=W.get(K)||null,ue(z,W,de,Ke,null);if(typeof de.then=="function")return re(W,z,K,Ic(de),Ke);if(de.$$typeof===T)return re(W,z,K,Ac(z,de),Ke);Nc(z,de)}return null}function Ve(W,z,K,de){for(var Ke=null,Rt=null,We=z,gt=z=0,Ct=null;We!==null&&gt<K.length;gt++){We.index>gt?(Ct=We,We=null):Ct=We.sibling;var It=ee(W,We,K[gt],de);if(It===null){We===null&&(We=Ct);break}o&&We&&It.alternate===null&&s(W,We),z=b(It,z,gt),Rt===null?Ke=It:Rt.sibling=It,Rt=It,We=Ct}if(gt===K.length)return u(W,We),Et&&Ci(W,gt),Ke;if(We===null){for(;gt<K.length;gt++)We=he(W,K[gt],de),We!==null&&(z=b(We,z,gt),Rt===null?Ke=We:Rt.sibling=We,Rt=We);return Et&&Ci(W,gt),Ke}for(We=h(We);gt<K.length;gt++)Ct=re(We,W,gt,K[gt],de),Ct!==null&&(o&&Ct.alternate!==null&&We.delete(Ct.key===null?gt:Ct.key),z=b(Ct,z,gt),Rt===null?Ke=Ct:Rt.sibling=Ct,Rt=Ct);return o&&We.forEach(function(fa){return s(W,fa)}),Et&&Ci(W,gt),Ke}function rt(W,z,K,de){if(K==null)throw Error(r(151));for(var Ke=null,Rt=null,We=z,gt=z=0,Ct=null,It=K.next();We!==null&&!It.done;gt++,It=K.next()){We.index>gt?(Ct=We,We=null):Ct=We.sibling;var fa=ee(W,We,It.value,de);if(fa===null){We===null&&(We=Ct);break}o&&We&&fa.alternate===null&&s(W,We),z=b(fa,z,gt),Rt===null?Ke=fa:Rt.sibling=fa,Rt=fa,We=Ct}if(It.done)return u(W,We),Et&&Ci(W,gt),Ke;if(We===null){for(;!It.done;gt++,It=K.next())It=he(W,It.value,de),It!==null&&(z=b(It,z,gt),Rt===null?Ke=It:Rt.sibling=It,Rt=It);return Et&&Ci(W,gt),Ke}for(We=h(We);!It.done;gt++,It=K.next())It=re(We,W,gt,It.value,de),It!==null&&(o&&It.alternate!==null&&We.delete(It.key===null?gt:It.key),z=b(It,z,gt),Rt===null?Ke=It:Rt.sibling=It,Rt=It);return o&&We.forEach(function(UE){return s(W,UE)}),Et&&Ci(W,gt),Ke}function Ht(W,z,K,de){if(typeof K=="object"&&K!==null&&K.type===_&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case x:e:{for(var Ke=K.key;z!==null;){if(z.key===Ke){if(Ke=K.type,Ke===_){if(z.tag===7){u(W,z.sibling),de=v(z,K.props.children),de.return=W,W=de;break e}}else if(z.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===V&&La(Ke)===z.type){u(W,z.sibling),de=v(z,K.props),Ws(de,K),de.return=W,W=de;break e}u(W,z);break}else s(W,z);z=z.sibling}K.type===_?(de=Da(K.props.children,W.mode,de,K.key),de.return=W,W=de):(de=Sc(K.type,K.key,K.props,null,W.mode,de),Ws(de,K),de.return=W,W=de)}return C(W);case w:e:{for(Ke=K.key;z!==null;){if(z.key===Ke)if(z.tag===4&&z.stateNode.containerInfo===K.containerInfo&&z.stateNode.implementation===K.implementation){u(W,z.sibling),de=v(z,K.children||[]),de.return=W,W=de;break e}else{u(W,z);break}else s(W,z);z=z.sibling}de=rf(K,W.mode,de),de.return=W,W=de}return C(W);case V:return K=La(K),Ht(W,z,K,de)}if(ae(K))return Ve(W,z,K,de);if(q(K)){if(Ke=q(K),typeof Ke!="function")throw Error(r(150));return K=Ke.call(K),rt(W,z,K,de)}if(typeof K.then=="function")return Ht(W,z,Ic(K),de);if(K.$$typeof===T)return Ht(W,z,Ac(W,K),de);Nc(W,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,z!==null&&z.tag===6?(u(W,z.sibling),de=v(z,K),de.return=W,W=de):(u(W,z),de=nf(K,W.mode,de),de.return=W,W=de),C(W)):u(W,z)}return function(W,z,K,de){try{Gs=0;var Ke=Ht(W,z,K,de);return Do=null,Ke}catch(We){if(We===ko||We===Oc)throw We;var Rt=Sr(29,We,null,W.mode);return Rt.lanes=de,Rt.return=W,Rt}finally{}}}var Ua=Ng(!0),kg=Ng(!1),Yi=!1;function mf(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yf(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ki(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Zi(o,s,u){var h=o.updateQueue;if(h===null)return null;if(h=h.shared,(kt&2)!==0){var v=h.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),h.pending=s,s=_c(o),gg(o,null,u),s}return wc(o,h,s,u),_c(o)}function Xs(o,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var h=s.lanes;h&=o.pendingLanes,u|=h,s.lanes=u,Le(o,u)}}function vf(o,s){var u=o.updateQueue,h=o.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var v=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?v=b=C:b=b.next=C,u=u.next}while(u!==null);b===null?v=b=s:b=b.next=s}else v=b=s;u={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=s:o.next=s,u.lastBaseUpdate=s}var xf=!1;function Ys(){if(xf){var o=No;if(o!==null)throw o}}function Ks(o,s,u,h){xf=!1;var v=o.updateQueue;Yi=!1;var b=v.firstBaseUpdate,C=v.lastBaseUpdate,I=v.shared.pending;if(I!==null){v.shared.pending=null;var F=I,Q=F.next;F.next=null,C===null?b=Q:C.next=Q,C=F;var ue=o.alternate;ue!==null&&(ue=ue.updateQueue,I=ue.lastBaseUpdate,I!==C&&(I===null?ue.firstBaseUpdate=Q:I.next=Q,ue.lastBaseUpdate=F))}if(b!==null){var he=v.baseState;C=0,ue=Q=F=null,I=b;do{var ee=I.lane&-536870913,re=ee!==I.lane;if(re?(St&ee)===ee:(h&ee)===ee){ee!==0&&ee===Io&&(xf=!0),ue!==null&&(ue=ue.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ve=o,rt=I;ee=s;var Ht=u;switch(rt.tag){case 1:if(Ve=rt.payload,typeof Ve=="function"){he=Ve.call(Ht,he,ee);break e}he=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=rt.payload,ee=typeof Ve=="function"?Ve.call(Ht,he,ee):Ve,ee==null)break e;he=m({},he,ee);break e;case 2:Yi=!0}}ee=I.callback,ee!==null&&(o.flags|=64,re&&(o.flags|=8192),re=v.callbacks,re===null?v.callbacks=[ee]:re.push(ee))}else re={lane:ee,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ue===null?(Q=ue=re,F=he):ue=ue.next=re,C|=ee;if(I=I.next,I===null){if(I=v.shared.pending,I===null)break;re=I,I=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);ue===null&&(F=he),v.baseState=F,v.firstBaseUpdate=Q,v.lastBaseUpdate=ue,b===null&&(v.shared.lanes=0),na|=C,o.lanes=C,o.memoizedState=he}}function Dg(o,s){if(typeof o!="function")throw Error(r(191,o));o.call(s)}function jg(o,s){var u=o.callbacks;if(u!==null)for(o.callbacks=null,o=0;o<u.length;o++)Dg(u[o],s)}var jo=B(null),kc=B(0);function Mg(o,s){o=Mi,se(kc,o),se(jo,s),Mi=o|s.baseLanes}function bf(){se(kc,Mi),se(jo,jo.current)}function wf(){Mi=kc.current,H(jo),H(kc)}var Cr=B(null),Ur=null;function Qi(o){var s=o.alternate;se(xn,xn.current&1),se(Cr,o),Ur===null&&(s===null||jo.current!==null||s.memoizedState!==null)&&(Ur=o)}function _f(o){se(xn,xn.current),se(Cr,o),Ur===null&&(Ur=o)}function Pg(o){o.tag===22?(se(xn,xn.current),se(Cr,o),Ur===null&&(Ur=o)):Ji()}function Ji(){se(xn,xn.current),se(Cr,Cr.current)}function Er(o){H(Cr),Ur===o&&(Ur=null),H(xn)}var xn=B(0);function Dc(o){for(var s=o;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Oh(u)||Rh(u)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ti=0,ht=null,zt=null,En=null,jc=!1,Mo=!1,za=!1,Mc=0,Zs=0,Po=null,IC=0;function mn(){throw Error(r(321))}function Sf(o,s){if(s===null)return!1;for(var u=0;u<s.length&&u<o.length;u++)if(!_r(o[u],s[u]))return!1;return!0}function Cf(o,s,u,h,v,b){return Ti=b,ht=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,L.H=o===null||o.memoizedState===null?xm:Ff,za=!1,b=u(h,v),za=!1,Mo&&(b=Lg(s,u,h,v)),Bg(o),b}function Bg(o){L.H=el;var s=zt!==null&&zt.next!==null;if(Ti=0,En=zt=ht=null,jc=!1,Zs=0,Po=null,s)throw Error(r(300));o===null||An||(o=o.dependencies,o!==null&&Ec(o)&&(An=!0))}function Lg(o,s,u,h){ht=o;var v=0;do{if(Mo&&(Po=null),Zs=0,Mo=!1,25<=v)throw Error(r(301));if(v+=1,En=zt=null,o.updateQueue!=null){var b=o.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}L.H=bm,b=s(u,h)}while(Mo);return b}function NC(){var o=L.H,s=o.useState()[0];return s=typeof s.then=="function"?Qs(s):s,o=o.useState()[0],(zt!==null?zt.memoizedState:null)!==o&&(ht.flags|=1024),s}function Ef(){var o=Mc!==0;return Mc=0,o}function Af(o,s,u){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~u}function Tf(o){if(jc){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}jc=!1}Ti=0,En=zt=ht=null,Mo=!1,Zs=Mc=0,Po=null}function or(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?ht.memoizedState=En=o:En=En.next=o,En}function bn(){if(zt===null){var o=ht.alternate;o=o!==null?o.memoizedState:null}else o=zt.next;var s=En===null?ht.memoizedState:En.next;if(s!==null)En=s,zt=o;else{if(o===null)throw ht.alternate===null?Error(r(467)):Error(r(310));zt=o,o={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},En===null?ht.memoizedState=En=o:En=En.next=o}return En}function Pc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qs(o){var s=Zs;return Zs+=1,Po===null&&(Po=[]),o=Og(Po,o,s),s=ht,(En===null?s.memoizedState:En.next)===null&&(s=s.alternate,L.H=s===null||s.memoizedState===null?xm:Ff),o}function Bc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Qs(o);if(o.$$typeof===T)return Xn(o)}throw Error(r(438,String(o)))}function Of(o){var s=null,u=ht.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var h=ht.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=Pc(),ht.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(o),h=0;h<o;h++)u[h]=fe;return s.index++,u}function Oi(o,s){return typeof s=="function"?s(o):s}function Lc(o){var s=bn();return Rf(s,zt,o)}function Rf(o,s,u){var h=o.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var v=o.baseQueue,b=h.pending;if(b!==null){if(v!==null){var C=v.next;v.next=b.next,b.next=C}s.baseQueue=v=b,h.pending=null}if(b=o.baseState,v===null)o.memoizedState=b;else{s=v.next;var I=C=null,F=null,Q=s,ue=!1;do{var he=Q.lane&-536870913;if(he!==Q.lane?(St&he)===he:(Ti&he)===he){var ee=Q.revertLane;if(ee===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),he===Io&&(ue=!0);else if((Ti&ee)===ee){Q=Q.next,ee===Io&&(ue=!0);continue}else he={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(I=F=he,C=b):F=F.next=he,ht.lanes|=ee,na|=ee;he=Q.action,za&&u(b,he),b=Q.hasEagerState?Q.eagerState:u(b,he)}else ee={lane:he,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(I=F=ee,C=b):F=F.next=ee,ht.lanes|=he,na|=he;Q=Q.next}while(Q!==null&&Q!==s);if(F===null?C=b:F.next=I,!_r(b,o.memoizedState)&&(An=!0,ue&&(u=No,u!==null)))throw u;o.memoizedState=b,o.baseState=C,o.baseQueue=F,h.lastRenderedState=b}return v===null&&(h.lanes=0),[o.memoizedState,h.dispatch]}function If(o){var s=bn(),u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var h=u.dispatch,v=u.pending,b=s.memoizedState;if(v!==null){u.pending=null;var C=v=v.next;do b=o(b,C.action),C=C.next;while(C!==v);_r(b,s.memoizedState)||(An=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),u.lastRenderedState=b}return[b,h]}function Fg(o,s,u){var h=ht,v=bn(),b=Et;if(b){if(u===void 0)throw Error(r(407));u=u()}else u=s();var C=!_r((zt||v).memoizedState,u);if(C&&(v.memoizedState=u,An=!0),v=v.queue,Df(Vg.bind(null,h,v,o),[o]),v.getSnapshot!==s||C||En!==null&&En.memoizedState.tag&1){if(h.flags|=2048,Bo(9,{destroy:void 0},zg.bind(null,h,v,u,s),null),Wt===null)throw Error(r(349));b||(Ti&127)!==0||Ug(h,s,u)}return u}function Ug(o,s,u){o.flags|=16384,o={getSnapshot:s,value:u},s=ht.updateQueue,s===null?(s=Pc(),ht.updateQueue=s,s.stores=[o]):(u=s.stores,u===null?s.stores=[o]:u.push(o))}function zg(o,s,u,h){s.value=u,s.getSnapshot=h,Hg(s)&&$g(o)}function Vg(o,s,u){return u(function(){Hg(s)&&$g(o)})}function Hg(o){var s=o.getSnapshot;o=o.value;try{var u=s();return!_r(o,u)}catch{return!0}}function $g(o){var s=ka(o,2);s!==null&&yr(s,o,2)}function Nf(o){var s=or();if(typeof o=="function"){var u=o;if(o=u(),za){me(!0);try{u()}finally{me(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:o},s}function qg(o,s,u,h){return o.baseState=u,Rf(o,zt,typeof h=="function"?h:Oi)}function kC(o,s,u,h,v){if(zc(o))throw Error(r(485));if(o=s.action,o!==null){var b={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){b.listeners.push(C)}};L.T!==null?u(!0):b.isTransition=!1,h(b),u=s.pending,u===null?(b.next=s.pending=b,Gg(s,b)):(b.next=u.next,s.pending=u.next=b)}}function Gg(o,s){var u=s.action,h=s.payload,v=o.state;if(s.isTransition){var b=L.T,C={};L.T=C;try{var I=u(v,h),F=L.S;F!==null&&F(C,I),Wg(o,s,I)}catch(Q){kf(o,s,Q)}finally{b!==null&&C.types!==null&&(b.types=C.types),L.T=b}}else try{b=u(v,h),Wg(o,s,b)}catch(Q){kf(o,s,Q)}}function Wg(o,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){Xg(o,s,h)},function(h){return kf(o,s,h)}):Xg(o,s,u)}function Xg(o,s,u){s.status="fulfilled",s.value=u,Yg(s),o.state=u,s=o.pending,s!==null&&(u=s.next,u===s?o.pending=null:(u=u.next,s.next=u,Gg(o,u)))}function kf(o,s,u){var h=o.pending;if(o.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=u,Yg(s),s=s.next;while(s!==h)}o.action=null}function Yg(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function Kg(o,s){return s}function Zg(o,s){if(Et){var u=Wt.formState;if(u!==null){e:{var h=ht;if(Et){if(Qt){t:{for(var v=Qt,b=Fr;v.nodeType!==8;){if(!b){v=null;break t}if(v=zr(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){Qt=zr(v.nextSibling),h=v.data==="F!";break e}}Wi(h)}h=!1}h&&(s=u[0])}}return u=or(),u.memoizedState=u.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kg,lastRenderedState:s},u.queue=h,u=mm.bind(null,ht,h),h.dispatch=u,h=Nf(!1),b=Lf.bind(null,ht,!1,h.queue),h=or(),v={state:s,dispatch:null,action:o,pending:null},h.queue=v,u=kC.bind(null,ht,v,b,u),v.dispatch=u,h.memoizedState=o,[s,u,!1]}function Qg(o){var s=bn();return Jg(s,zt,o)}function Jg(o,s,u){if(s=Rf(o,s,Kg)[0],o=Lc(Oi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=Qs(s)}catch(C){throw C===ko?Oc:C}else h=s;s=bn();var v=s.queue,b=v.dispatch;return u!==s.memoizedState&&(ht.flags|=2048,Bo(9,{destroy:void 0},DC.bind(null,v,u),null)),[h,b,o]}function DC(o,s){o.action=s}function em(o){var s=bn(),u=zt;if(u!==null)return Jg(s,u,o);bn(),s=s.memoizedState,u=bn();var h=u.queue.dispatch;return u.memoizedState=o,[s,h,!1]}function Bo(o,s,u,h){return o={tag:o,create:u,deps:h,inst:s,next:null},s=ht.updateQueue,s===null&&(s=Pc(),ht.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=o.next=o:(h=u.next,u.next=o,o.next=h,s.lastEffect=o),o}function tm(){return bn().memoizedState}function Fc(o,s,u,h){var v=or();ht.flags|=o,v.memoizedState=Bo(1|s,{destroy:void 0},u,h===void 0?null:h)}function Uc(o,s,u,h){var v=bn();h=h===void 0?null:h;var b=v.memoizedState.inst;zt!==null&&h!==null&&Sf(h,zt.memoizedState.deps)?v.memoizedState=Bo(s,b,u,h):(ht.flags|=o,v.memoizedState=Bo(1|s,b,u,h))}function nm(o,s){Fc(8390656,8,o,s)}function Df(o,s){Uc(2048,8,o,s)}function jC(o){ht.flags|=4;var s=ht.updateQueue;if(s===null)s=Pc(),ht.updateQueue=s,s.events=[o];else{var u=s.events;u===null?s.events=[o]:u.push(o)}}function rm(o){var s=bn().memoizedState;return jC({ref:s,nextImpl:o}),function(){if((kt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function im(o,s){return Uc(4,2,o,s)}function am(o,s){return Uc(4,4,o,s)}function om(o,s){if(typeof s=="function"){o=o();var u=s(o);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function sm(o,s,u){u=u!=null?u.concat([o]):null,Uc(4,4,om.bind(null,s,o),u)}function jf(){}function lm(o,s){var u=bn();s=s===void 0?null:s;var h=u.memoizedState;return s!==null&&Sf(s,h[1])?h[0]:(u.memoizedState=[o,s],o)}function cm(o,s){var u=bn();s=s===void 0?null:s;var h=u.memoizedState;if(s!==null&&Sf(s,h[1]))return h[0];if(h=o(),za){me(!0);try{o()}finally{me(!1)}}return u.memoizedState=[h,s],h}function Mf(o,s,u){return u===void 0||(Ti&1073741824)!==0&&(St&261930)===0?o.memoizedState=s:(o.memoizedState=u,o=uy(),ht.lanes|=o,na|=o,u)}function um(o,s,u,h){return _r(u,s)?u:jo.current!==null?(o=Mf(o,u,h),_r(o,s)||(An=!0),o):(Ti&42)===0||(Ti&1073741824)!==0&&(St&261930)===0?(An=!0,o.memoizedState=u):(o=uy(),ht.lanes|=o,na|=o,s)}function dm(o,s,u,h,v){var b=te.p;te.p=b!==0&&8>b?b:8;var C=L.T,I={};L.T=I,Lf(o,!1,s,u);try{var F=v(),Q=L.S;if(Q!==null&&Q(I,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ue=RC(F,h);Js(o,s,ue,Or(o))}else Js(o,s,h,Or(o))}catch(he){Js(o,s,{then:function(){},status:"rejected",reason:he},Or())}finally{te.p=b,C!==null&&I.types!==null&&(C.types=I.types),L.T=C}}function MC(){}function Pf(o,s,u,h){if(o.tag!==5)throw Error(r(476));var v=fm(o).queue;dm(o,v,s,ce,u===null?MC:function(){return hm(o),u(h)})}function fm(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:ce},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:u},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function hm(o){var s=fm(o);s.next===null&&(s=o.alternate.memoizedState),Js(o,s.next.queue,{},Or())}function Bf(){return Xn(ml)}function pm(){return bn().memoizedState}function gm(){return bn().memoizedState}function PC(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var u=Or();o=Ki(u);var h=Zi(s,o,u);h!==null&&(yr(h,s,u),Xs(h,s,u)),s={cache:ff()},o.payload=s;return}s=s.return}}function BC(o,s,u){var h=Or();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},zc(o)?ym(s,u):(u=ef(o,s,u,h),u!==null&&(yr(u,o,h),vm(u,s,h)))}function mm(o,s,u){var h=Or();Js(o,s,u,h)}function Js(o,s,u,h){var v={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(zc(o))ym(s,v);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var C=s.lastRenderedState,I=b(C,u);if(v.hasEagerState=!0,v.eagerState=I,_r(I,C))return wc(o,s,v,0),Wt===null&&bc(),!1}catch{}finally{}if(u=ef(o,s,v,h),u!==null)return yr(u,o,h),vm(u,s,h),!0}return!1}function Lf(o,s,u,h){if(h={lane:2,revertLane:mh(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},zc(o)){if(s)throw Error(r(479))}else s=ef(o,u,h,2),s!==null&&yr(s,o,2)}function zc(o){var s=o.alternate;return o===ht||s!==null&&s===ht}function ym(o,s){Mo=jc=!0;var u=o.pending;u===null?s.next=s:(s.next=u.next,u.next=s),o.pending=s}function vm(o,s,u){if((u&4194048)!==0){var h=s.lanes;h&=o.pendingLanes,u|=h,s.lanes=u,Le(o,u)}}var el={readContext:Xn,use:Bc,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn,useHostTransitionStatus:mn,useFormState:mn,useActionState:mn,useOptimistic:mn,useMemoCache:mn,useCacheRefresh:mn};el.useEffectEvent=mn;var xm={readContext:Xn,use:Bc,useCallback:function(o,s){return or().memoizedState=[o,s===void 0?null:s],o},useContext:Xn,useEffect:nm,useImperativeHandle:function(o,s,u){u=u!=null?u.concat([o]):null,Fc(4194308,4,om.bind(null,s,o),u)},useLayoutEffect:function(o,s){return Fc(4194308,4,o,s)},useInsertionEffect:function(o,s){Fc(4,2,o,s)},useMemo:function(o,s){var u=or();s=s===void 0?null:s;var h=o();if(za){me(!0);try{o()}finally{me(!1)}}return u.memoizedState=[h,s],h},useReducer:function(o,s,u){var h=or();if(u!==void 0){var v=u(s);if(za){me(!0);try{u(s)}finally{me(!1)}}}else v=s;return h.memoizedState=h.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},h.queue=o,o=o.dispatch=BC.bind(null,ht,o),[h.memoizedState,o]},useRef:function(o){var s=or();return o={current:o},s.memoizedState=o},useState:function(o){o=Nf(o);var s=o.queue,u=mm.bind(null,ht,s);return s.dispatch=u,[o.memoizedState,u]},useDebugValue:jf,useDeferredValue:function(o,s){var u=or();return Mf(u,o,s)},useTransition:function(){var o=Nf(!1);return o=dm.bind(null,ht,o.queue,!0,!1),or().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,u){var h=ht,v=or();if(Et){if(u===void 0)throw Error(r(407));u=u()}else{if(u=s(),Wt===null)throw Error(r(349));(St&127)!==0||Ug(h,s,u)}v.memoizedState=u;var b={value:u,getSnapshot:s};return v.queue=b,nm(Vg.bind(null,h,b,o),[o]),h.flags|=2048,Bo(9,{destroy:void 0},zg.bind(null,h,b,u,s),null),u},useId:function(){var o=or(),s=Wt.identifierPrefix;if(Et){var u=ui,h=ci;u=(h&~(1<<32-be(h)-1)).toString(32)+u,s="_"+s+"R_"+u,u=Mc++,0<u&&(s+="H"+u.toString(32)),s+="_"}else u=IC++,s="_"+s+"r_"+u.toString(32)+"_";return o.memoizedState=s},useHostTransitionStatus:Bf,useFormState:Zg,useActionState:Zg,useOptimistic:function(o){var s=or();s.memoizedState=s.baseState=o;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=Lf.bind(null,ht,!0,u),u.dispatch=s,[o,s]},useMemoCache:Of,useCacheRefresh:function(){return or().memoizedState=PC.bind(null,ht)},useEffectEvent:function(o){var s=or(),u={impl:o};return s.memoizedState=u,function(){if((kt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Ff={readContext:Xn,use:Bc,useCallback:lm,useContext:Xn,useEffect:Df,useImperativeHandle:sm,useInsertionEffect:im,useLayoutEffect:am,useMemo:cm,useReducer:Lc,useRef:tm,useState:function(){return Lc(Oi)},useDebugValue:jf,useDeferredValue:function(o,s){var u=bn();return um(u,zt.memoizedState,o,s)},useTransition:function(){var o=Lc(Oi)[0],s=bn().memoizedState;return[typeof o=="boolean"?o:Qs(o),s]},useSyncExternalStore:Fg,useId:pm,useHostTransitionStatus:Bf,useFormState:Qg,useActionState:Qg,useOptimistic:function(o,s){var u=bn();return qg(u,zt,o,s)},useMemoCache:Of,useCacheRefresh:gm};Ff.useEffectEvent=rm;var bm={readContext:Xn,use:Bc,useCallback:lm,useContext:Xn,useEffect:Df,useImperativeHandle:sm,useInsertionEffect:im,useLayoutEffect:am,useMemo:cm,useReducer:If,useRef:tm,useState:function(){return If(Oi)},useDebugValue:jf,useDeferredValue:function(o,s){var u=bn();return zt===null?Mf(u,o,s):um(u,zt.memoizedState,o,s)},useTransition:function(){var o=If(Oi)[0],s=bn().memoizedState;return[typeof o=="boolean"?o:Qs(o),s]},useSyncExternalStore:Fg,useId:pm,useHostTransitionStatus:Bf,useFormState:em,useActionState:em,useOptimistic:function(o,s){var u=bn();return zt!==null?qg(u,zt,o,s):(u.baseState=o,[o,u.queue.dispatch])},useMemoCache:Of,useCacheRefresh:gm};bm.useEffectEvent=rm;function Uf(o,s,u,h){s=o.memoizedState,u=u(h,s),u=u==null?s:m({},s,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var zf={enqueueSetState:function(o,s,u){o=o._reactInternals;var h=Or(),v=Ki(h);v.payload=s,u!=null&&(v.callback=u),s=Zi(o,v,h),s!==null&&(yr(s,o,h),Xs(s,o,h))},enqueueReplaceState:function(o,s,u){o=o._reactInternals;var h=Or(),v=Ki(h);v.tag=1,v.payload=s,u!=null&&(v.callback=u),s=Zi(o,v,h),s!==null&&(yr(s,o,h),Xs(s,o,h))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var u=Or(),h=Ki(u);h.tag=2,s!=null&&(h.callback=s),s=Zi(o,h,u),s!==null&&(yr(s,o,u),Xs(s,o,u))}};function wm(o,s,u,h,v,b,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(h,b,C):s.prototype&&s.prototype.isPureReactComponent?!Us(u,h)||!Us(v,b):!0}function _m(o,s,u,h){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,h),s.state!==o&&zf.enqueueReplaceState(s,s.state,null)}function Va(o,s){var u=s;if("ref"in s){u={};for(var h in s)h!=="ref"&&(u[h]=s[h])}if(o=o.defaultProps){u===s&&(u=m({},u));for(var v in o)u[v]===void 0&&(u[v]=o[v])}return u}function Sm(o){xc(o)}function Cm(o){console.error(o)}function Em(o){xc(o)}function Vc(o,s){try{var u=o.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function Am(o,s,u){try{var h=o.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Vf(o,s,u){return u=Ki(u),u.tag=3,u.payload={element:null},u.callback=function(){Vc(o,s)},u}function Tm(o){return o=Ki(o),o.tag=3,o}function Om(o,s,u,h){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var b=h.value;o.payload=function(){return v(b)},o.callback=function(){Am(s,u,h)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){Am(s,u,h),typeof v!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var I=h.stack;this.componentDidCatch(h.value,{componentStack:I!==null?I:""})})}function LC(o,s,u,h,v){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=u.alternate,s!==null&&Ro(s,u,v,!0),u=Cr.current,u!==null){switch(u.tag){case 31:case 13:return Ur===null?eu():u.alternate===null&&yn===0&&(yn=3),u.flags&=-257,u.flags|=65536,u.lanes=v,h===Rc?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([h]):s.add(h),hh(o,h,v)),!1;case 22:return u.flags|=65536,h===Rc?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([h]):u.add(h)),hh(o,h,v)),!1}throw Error(r(435,u.tag))}return hh(o,h,v),eu(),!1}if(Et)return s=Cr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,h!==sf&&(o=Error(r(422),{cause:h}),Hs(Pr(o,u)))):(h!==sf&&(s=Error(r(423),{cause:h}),Hs(Pr(s,u))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,h=Pr(h,u),v=Vf(o.stateNode,h,v),vf(o,v),yn!==4&&(yn=2)),!1;var b=Error(r(520),{cause:h});if(b=Pr(b,u),ll===null?ll=[b]:ll.push(b),yn!==4&&(yn=2),s===null)return!0;h=Pr(h,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,o=v&-v,u.lanes|=o,o=Vf(u.stateNode,h,o),vf(u,o),!1;case 1:if(s=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ra===null||!ra.has(b))))return u.flags|=65536,v&=-v,u.lanes|=v,v=Tm(v),Om(v,o,u,h),vf(u,v),!1}u=u.return}while(u!==null);return!1}var Hf=Error(r(461)),An=!1;function Yn(o,s,u,h){s.child=o===null?kg(s,null,u,h):Ua(s,o.child,u,h)}function Rm(o,s,u,h,v){u=u.render;var b=s.ref;if("ref"in h){var C={};for(var I in h)I!=="ref"&&(C[I]=h[I])}else C=h;return Pa(s),h=Cf(o,s,u,C,b,v),I=Ef(),o!==null&&!An?(Af(o,s,v),Ri(o,s,v)):(Et&&I&&af(s),s.flags|=1,Yn(o,s,h,v),s.child)}function Im(o,s,u,h,v){if(o===null){var b=u.type;return typeof b=="function"&&!tf(b)&&b.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=b,Nm(o,s,b,h,v)):(o=Sc(u.type,null,h,s,s.mode,v),o.ref=s.ref,o.return=s,s.child=o)}if(b=o.child,!Zf(o,v)){var C=b.memoizedProps;if(u=u.compare,u=u!==null?u:Us,u(C,h)&&o.ref===s.ref)return Ri(o,s,v)}return s.flags|=1,o=Si(b,h),o.ref=s.ref,o.return=s,s.child=o}function Nm(o,s,u,h,v){if(o!==null){var b=o.memoizedProps;if(Us(b,h)&&o.ref===s.ref)if(An=!1,s.pendingProps=h=b,Zf(o,v))(o.flags&131072)!==0&&(An=!0);else return s.lanes=o.lanes,Ri(o,s,v)}return $f(o,s,u,h,v)}function km(o,s,u,h){var v=h.children,b=o!==null?o.memoizedState:null;if(o===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((s.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,o!==null){for(h=s.child=o.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~b}else h=0,s.child=null;return Dm(o,s,b,u,h)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&Tc(s,b!==null?b.cachePool:null),b!==null?Mg(s,b):bf(),Pg(s);else return h=s.lanes=536870912,Dm(o,s,b!==null?b.baseLanes|u:u,u,h)}else b!==null?(Tc(s,b.cachePool),Mg(s,b),Ji(),s.memoizedState=null):(o!==null&&Tc(s,null),bf(),Ji());return Yn(o,s,v,u),s.child}function tl(o,s){return o!==null&&o.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Dm(o,s,u,h,v){var b=pf();return b=b===null?null:{parent:Cn._currentValue,pool:b},s.memoizedState={baseLanes:u,cachePool:b},o!==null&&Tc(s,null),bf(),Pg(s),o!==null&&Ro(o,s,h,!0),s.childLanes=v,null}function Hc(o,s){return s=qc({mode:s.mode,children:s.children},o.mode),s.ref=o.ref,o.child=s,s.return=o,s}function jm(o,s,u){return Ua(s,o.child,null,u),o=Hc(s,s.pendingProps),o.flags|=2,Er(s),s.memoizedState=null,o}function FC(o,s,u){var h=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,o===null){if(Et){if(h.mode==="hidden")return o=Hc(s,h),s.lanes=536870912,tl(null,o);if(_f(s),(o=Qt)?(o=Gy(o,Fr),o=o!==null&&o.data==="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:qi!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},u=yg(o),u.return=s,s.child=u,Wn=s,Qt=null)):o=null,o===null)throw Wi(s);return s.lanes=536870912,null}return Hc(s,h)}var b=o.memoizedState;if(b!==null){var C=b.dehydrated;if(_f(s),v)if(s.flags&256)s.flags&=-257,s=jm(o,s,u);else if(s.memoizedState!==null)s.child=o.child,s.flags|=128,s=null;else throw Error(r(558));else if(An||Ro(o,s,u,!1),v=(u&o.childLanes)!==0,An||v){if(h=Wt,h!==null&&(C=Ze(h,u),C!==0&&C!==b.retryLane))throw b.retryLane=C,ka(o,C),yr(h,o,C),Hf;eu(),s=jm(o,s,u)}else o=b.treeContext,Qt=zr(C.nextSibling),Wn=s,Et=!0,Gi=null,Fr=!1,o!==null&&bg(s,o),s=Hc(s,h),s.flags|=4096;return s}return o=Si(o.child,{mode:h.mode,children:h.children}),o.ref=s.ref,s.child=o,o.return=s,o}function $c(o,s){var u=s.ref;if(u===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(o===null||o.ref!==u)&&(s.flags|=4194816)}}function $f(o,s,u,h,v){return Pa(s),u=Cf(o,s,u,h,void 0,v),h=Ef(),o!==null&&!An?(Af(o,s,v),Ri(o,s,v)):(Et&&h&&af(s),s.flags|=1,Yn(o,s,u,v),s.child)}function Mm(o,s,u,h,v,b){return Pa(s),s.updateQueue=null,u=Lg(s,h,u,v),Bg(o),h=Ef(),o!==null&&!An?(Af(o,s,b),Ri(o,s,b)):(Et&&h&&af(s),s.flags|=1,Yn(o,s,u,b),s.child)}function Pm(o,s,u,h,v){if(Pa(s),s.stateNode===null){var b=Eo,C=u.contextType;typeof C=="object"&&C!==null&&(b=Xn(C)),b=new u(h,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=zf,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=h,b.state=s.memoizedState,b.refs={},mf(s),C=u.contextType,b.context=typeof C=="object"&&C!==null?Xn(C):Eo,b.state=s.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(Uf(s,u,C,h),b.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(C=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),C!==b.state&&zf.enqueueReplaceState(b,b.state,null),Ks(s,h,b,v),Ys(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(o===null){b=s.stateNode;var I=s.memoizedProps,F=Va(u,I);b.props=F;var Q=b.context,ue=u.contextType;C=Eo,typeof ue=="object"&&ue!==null&&(C=Xn(ue));var he=u.getDerivedStateFromProps;ue=typeof he=="function"||typeof b.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,ue||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(I||Q!==C)&&_m(s,b,h,C),Yi=!1;var ee=s.memoizedState;b.state=ee,Ks(s,h,b,v),Ys(),Q=s.memoizedState,I||ee!==Q||Yi?(typeof he=="function"&&(Uf(s,u,he,h),Q=s.memoizedState),(F=Yi||wm(s,u,F,h,ee,Q,C))?(ue||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=Q),b.props=h,b.state=Q,b.context=C,h=F):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{b=s.stateNode,yf(o,s),C=s.memoizedProps,ue=Va(u,C),b.props=ue,he=s.pendingProps,ee=b.context,Q=u.contextType,F=Eo,typeof Q=="object"&&Q!==null&&(F=Xn(Q)),I=u.getDerivedStateFromProps,(Q=typeof I=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C!==he||ee!==F)&&_m(s,b,h,F),Yi=!1,ee=s.memoizedState,b.state=ee,Ks(s,h,b,v),Ys();var re=s.memoizedState;C!==he||ee!==re||Yi||o!==null&&o.dependencies!==null&&Ec(o.dependencies)?(typeof I=="function"&&(Uf(s,u,I,h),re=s.memoizedState),(ue=Yi||wm(s,u,ue,h,ee,re,F)||o!==null&&o.dependencies!==null&&Ec(o.dependencies))?(Q||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,re,F),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,re,F)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||C===o.memoizedProps&&ee===o.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&ee===o.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=re),b.props=h,b.state=re,b.context=F,h=ue):(typeof b.componentDidUpdate!="function"||C===o.memoizedProps&&ee===o.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&ee===o.memoizedState||(s.flags|=1024),h=!1)}return b=h,$c(o,s),h=(s.flags&128)!==0,b||h?(b=s.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,o!==null&&h?(s.child=Ua(s,o.child,null,v),s.child=Ua(s,null,u,v)):Yn(o,s,u,v),s.memoizedState=b.state,o=s.child):o=Ri(o,s,v),o}function Bm(o,s,u,h){return ja(),s.flags|=256,Yn(o,s,u,h),s.child}var qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gf(o){return{baseLanes:o,cachePool:Ag()}}function Wf(o,s,u){return o=o!==null?o.childLanes&~u:0,s&&(o|=Tr),o}function Lm(o,s,u){var h=s.pendingProps,v=!1,b=(s.flags&128)!==0,C;if((C=b)||(C=o!==null&&o.memoizedState===null?!1:(xn.current&2)!==0),C&&(v=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,o===null){if(Et){if(v?Qi(s):Ji(),(o=Qt)?(o=Gy(o,Fr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:qi!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},u=yg(o),u.return=s,s.child=u,Wn=s,Qt=null)):o=null,o===null)throw Wi(s);return Rh(o)?s.lanes=32:s.lanes=536870912,null}var I=h.children;return h=h.fallback,v?(Ji(),v=s.mode,I=qc({mode:"hidden",children:I},v),h=Da(h,v,u,null),I.return=s,h.return=s,I.sibling=h,s.child=I,h=s.child,h.memoizedState=Gf(u),h.childLanes=Wf(o,C,u),s.memoizedState=qf,tl(null,h)):(Qi(s),Xf(s,I))}var F=o.memoizedState;if(F!==null&&(I=F.dehydrated,I!==null)){if(b)s.flags&256?(Qi(s),s.flags&=-257,s=Yf(o,s,u)):s.memoizedState!==null?(Ji(),s.child=o.child,s.flags|=128,s=null):(Ji(),I=h.fallback,v=s.mode,h=qc({mode:"visible",children:h.children},v),I=Da(I,v,u,null),I.flags|=2,h.return=s,I.return=s,h.sibling=I,s.child=h,Ua(s,o.child,null,u),h=s.child,h.memoizedState=Gf(u),h.childLanes=Wf(o,C,u),s.memoizedState=qf,s=tl(null,h));else if(Qi(s),Rh(I)){if(C=I.nextSibling&&I.nextSibling.dataset,C)var Q=C.dgst;C=Q,h=Error(r(419)),h.stack="",h.digest=C,Hs({value:h,source:null,stack:null}),s=Yf(o,s,u)}else if(An||Ro(o,s,u,!1),C=(u&o.childLanes)!==0,An||C){if(C=Wt,C!==null&&(h=Ze(C,u),h!==0&&h!==F.retryLane))throw F.retryLane=h,ka(o,h),yr(C,o,h),Hf;Oh(I)||eu(),s=Yf(o,s,u)}else Oh(I)?(s.flags|=192,s.child=o.child,s=null):(o=F.treeContext,Qt=zr(I.nextSibling),Wn=s,Et=!0,Gi=null,Fr=!1,o!==null&&bg(s,o),s=Xf(s,h.children),s.flags|=4096);return s}return v?(Ji(),I=h.fallback,v=s.mode,F=o.child,Q=F.sibling,h=Si(F,{mode:"hidden",children:h.children}),h.subtreeFlags=F.subtreeFlags&65011712,Q!==null?I=Si(Q,I):(I=Da(I,v,u,null),I.flags|=2),I.return=s,h.return=s,h.sibling=I,s.child=h,tl(null,h),h=s.child,I=o.child.memoizedState,I===null?I=Gf(u):(v=I.cachePool,v!==null?(F=Cn._currentValue,v=v.parent!==F?{parent:F,pool:F}:v):v=Ag(),I={baseLanes:I.baseLanes|u,cachePool:v}),h.memoizedState=I,h.childLanes=Wf(o,C,u),s.memoizedState=qf,tl(o.child,h)):(Qi(s),u=o.child,o=u.sibling,u=Si(u,{mode:"visible",children:h.children}),u.return=s,u.sibling=null,o!==null&&(C=s.deletions,C===null?(s.deletions=[o],s.flags|=16):C.push(o)),s.child=u,s.memoizedState=null,u)}function Xf(o,s){return s=qc({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function qc(o,s){return o=Sr(22,o,null,s),o.lanes=0,o}function Yf(o,s,u){return Ua(s,o.child,null,u),o=Xf(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function Fm(o,s,u){o.lanes|=s;var h=o.alternate;h!==null&&(h.lanes|=s),uf(o.return,s,u)}function Kf(o,s,u,h,v,b){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:v,treeForkCount:b}:(C.isBackwards=s,C.rendering=null,C.renderingStartTime=0,C.last=h,C.tail=u,C.tailMode=v,C.treeForkCount=b)}function Um(o,s,u){var h=s.pendingProps,v=h.revealOrder,b=h.tail;h=h.children;var C=xn.current,I=(C&2)!==0;if(I?(C=C&1|2,s.flags|=128):C&=1,se(xn,C),Yn(o,s,h,u),h=Et?Vs:0,!I&&o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Fm(o,u,s);else if(o.tag===19)Fm(o,u,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(v){case"forwards":for(u=s.child,v=null;u!==null;)o=u.alternate,o!==null&&Dc(o)===null&&(v=u),u=u.sibling;u=v,u===null?(v=s.child,s.child=null):(v=u.sibling,u.sibling=null),Kf(s,!1,v,u,b,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=s.child,s.child=null;v!==null;){if(o=v.alternate,o!==null&&Dc(o)===null){s.child=v;break}o=v.sibling,v.sibling=u,u=v,v=o}Kf(s,!0,u,null,b,h);break;case"together":Kf(s,!1,null,null,void 0,h);break;default:s.memoizedState=null}return s.child}function Ri(o,s,u){if(o!==null&&(s.dependencies=o.dependencies),na|=s.lanes,(u&s.childLanes)===0)if(o!==null){if(Ro(o,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(r(153));if(s.child!==null){for(o=s.child,u=Si(o,o.pendingProps),s.child=u,u.return=s;o.sibling!==null;)o=o.sibling,u=u.sibling=Si(o,o.pendingProps),u.return=s;u.sibling=null}return s.child}function Zf(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&Ec(o)))}function UC(o,s,u){switch(s.tag){case 3:ut(s,s.stateNode.containerInfo),Xi(s,Cn,o.memoizedState.cache),ja();break;case 27:case 5:Oe(s);break;case 4:ut(s,s.stateNode.containerInfo);break;case 10:Xi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,_f(s),null;break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Qi(s),s.flags|=128,null):(u&s.child.childLanes)!==0?Lm(o,s,u):(Qi(s),o=Ri(o,s,u),o!==null?o.sibling:null);Qi(s);break;case 19:var v=(o.flags&128)!==0;if(h=(u&s.childLanes)!==0,h||(Ro(o,s,u,!1),h=(u&s.childLanes)!==0),v){if(h)return Um(o,s,u);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),se(xn,xn.current),h)break;return null;case 22:return s.lanes=0,km(o,s,u,s.pendingProps);case 24:Xi(s,Cn,o.memoizedState.cache)}return Ri(o,s,u)}function zm(o,s,u){if(o!==null)if(o.memoizedProps!==s.pendingProps)An=!0;else{if(!Zf(o,u)&&(s.flags&128)===0)return An=!1,UC(o,s,u);An=(o.flags&131072)!==0}else An=!1,Et&&(s.flags&1048576)!==0&&xg(s,Vs,s.index);switch(s.lanes=0,s.tag){case 16:e:{var h=s.pendingProps;if(o=La(s.elementType),s.type=o,typeof o=="function")tf(o)?(h=Va(o,h),s.tag=1,s=Pm(null,s,o,h,u)):(s.tag=0,s=$f(null,s,o,h,u));else{if(o!=null){var v=o.$$typeof;if(v===R){s.tag=11,s=Rm(null,s,o,h,u);break e}else if(v===M){s.tag=14,s=Im(null,s,o,h,u);break e}}throw s=Te(o)||o,Error(r(306,s,""))}}return s;case 0:return $f(o,s,s.type,s.pendingProps,u);case 1:return h=s.type,v=Va(h,s.pendingProps),Pm(o,s,h,v,u);case 3:e:{if(ut(s,s.stateNode.containerInfo),o===null)throw Error(r(387));h=s.pendingProps;var b=s.memoizedState;v=b.element,yf(o,s),Ks(s,h,null,u);var C=s.memoizedState;if(h=C.cache,Xi(s,Cn,h),h!==b.cache&&df(s,[Cn],u,!0),Ys(),h=C.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=Bm(o,s,h,u);break e}else if(h!==v){v=Pr(Error(r(424)),s),Hs(v),s=Bm(o,s,h,u);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Qt=zr(o.firstChild),Wn=s,Et=!0,Gi=null,Fr=!0,u=kg(s,null,h,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ja(),h===v){s=Ri(o,s,u);break e}Yn(o,s,h,u)}s=s.child}return s;case 26:return $c(o,s),o===null?(u=Qy(s.type,null,s.pendingProps,null))?s.memoizedState=u:Et||(u=s.type,o=s.pendingProps,h=su(Me.current).createElement(u),h[_t]=s,h[un]=o,Kn(h,u,o),Un(h),s.stateNode=h):s.memoizedState=Qy(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return Oe(s),o===null&&Et&&(h=s.stateNode=Yy(s.type,s.pendingProps,Me.current),Wn=s,Fr=!0,v=Qt,sa(s.type)?(Ih=v,Qt=zr(h.firstChild)):Qt=v),Yn(o,s,s.pendingProps.children,u),$c(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&Et&&((v=h=Qt)&&(h=mE(h,s.type,s.pendingProps,Fr),h!==null?(s.stateNode=h,Wn=s,Qt=zr(h.firstChild),Fr=!1,v=!0):v=!1),v||Wi(s)),Oe(s),v=s.type,b=s.pendingProps,C=o!==null?o.memoizedProps:null,h=b.children,Eh(v,b)?h=null:C!==null&&Eh(v,C)&&(s.flags|=32),s.memoizedState!==null&&(v=Cf(o,s,NC,null,null,u),ml._currentValue=v),$c(o,s),Yn(o,s,h,u),s.child;case 6:return o===null&&Et&&((o=u=Qt)&&(u=yE(u,s.pendingProps,Fr),u!==null?(s.stateNode=u,Wn=s,Qt=null,o=!0):o=!1),o||Wi(s)),null;case 13:return Lm(o,s,u);case 4:return ut(s,s.stateNode.containerInfo),h=s.pendingProps,o===null?s.child=Ua(s,null,h,u):Yn(o,s,h,u),s.child;case 11:return Rm(o,s,s.type,s.pendingProps,u);case 7:return Yn(o,s,s.pendingProps,u),s.child;case 8:return Yn(o,s,s.pendingProps.children,u),s.child;case 12:return Yn(o,s,s.pendingProps.children,u),s.child;case 10:return h=s.pendingProps,Xi(s,s.type,h.value),Yn(o,s,h.children,u),s.child;case 9:return v=s.type._context,h=s.pendingProps.children,Pa(s),v=Xn(v),h=h(v),s.flags|=1,Yn(o,s,h,u),s.child;case 14:return Im(o,s,s.type,s.pendingProps,u);case 15:return Nm(o,s,s.type,s.pendingProps,u);case 19:return Um(o,s,u);case 31:return FC(o,s,u);case 22:return km(o,s,u,s.pendingProps);case 24:return Pa(s),h=Xn(Cn),o===null?(v=pf(),v===null&&(v=Wt,b=ff(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=u),v=b),s.memoizedState={parent:h,cache:v},mf(s),Xi(s,Cn,v)):((o.lanes&u)!==0&&(yf(o,s),Ks(s,null,null,u),Ys()),v=o.memoizedState,b=s.memoizedState,v.parent!==h?(v={parent:h,cache:h},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),Xi(s,Cn,h)):(h=b.cache,Xi(s,Cn,h),h!==v.cache&&df(s,[Cn],u,!0))),Yn(o,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Ii(o){o.flags|=4}function Qf(o,s,u,h,v){if((s=(o.mode&32)!==0)&&(s=!1),s){if(o.flags|=16777216,(v&335544128)===v)if(o.stateNode.complete)o.flags|=8192;else if(py())o.flags|=8192;else throw Fa=Rc,gf}else o.flags&=-16777217}function Vm(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!rv(s))if(py())o.flags|=8192;else throw Fa=Rc,gf}function Gc(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?kr():536870912,o.lanes|=s,zo|=s)}function nl(o,s){if(!Et)switch(o.tailMode){case"hidden":s=o.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:h.sibling=null}}function Jt(o){var s=o.alternate!==null&&o.alternate.child===o.child,u=0,h=0;if(s)for(var v=o.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=h,o.childLanes=u,s}function zC(o,s,u){var h=s.pendingProps;switch(of(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(s),null;case 1:return Jt(s),null;case 3:return u=s.stateNode,h=null,o!==null&&(h=o.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Ai(Cn),$(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(o===null||o.child===null)&&(Oo(s)?Ii(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,lf())),Jt(s),null;case 26:var v=s.type,b=s.memoizedState;return o===null?(Ii(s),b!==null?(Jt(s),Vm(s,b)):(Jt(s),Qf(s,v,null,h,u))):b?b!==o.memoizedState?(Ii(s),Jt(s),Vm(s,b)):(Jt(s),s.flags&=-16777217):(o=o.memoizedProps,o!==h&&Ii(s),Jt(s),Qf(s,v,o,h,u)),null;case 27:if(Ce(s),u=Me.current,v=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==h&&Ii(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return Jt(s),null}o=Se.current,Oo(s)?wg(s):(o=Yy(v,h,u),s.stateNode=o,Ii(s))}return Jt(s),null;case 5:if(Ce(s),v=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==h&&Ii(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return Jt(s),null}if(b=Se.current,Oo(s))wg(s);else{var C=su(Me.current);switch(b){case 1:b=C.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=C.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=C.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof h.is=="string"?C.createElement("select",{is:h.is}):C.createElement("select"),h.multiple?b.multiple=!0:h.size&&(b.size=h.size);break;default:b=typeof h.is=="string"?C.createElement(v,{is:h.is}):C.createElement(v)}}b[_t]=s,b[un]=h;e:for(C=s.child;C!==null;){if(C.tag===5||C.tag===6)b.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===s)break e;for(;C.sibling===null;){if(C.return===null||C.return===s)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}s.stateNode=b;e:switch(Kn(b,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ii(s)}}return Jt(s),Qf(s,s.type,o===null?null:o.memoizedProps,s.pendingProps,u),null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==h&&Ii(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(r(166));if(o=Me.current,Oo(s)){if(o=s.stateNode,u=s.memoizedProps,h=null,v=Wn,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}o[_t]=s,o=!!(o.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||Ly(o.nodeValue,u)),o||Wi(s,!0)}else o=su(o).createTextNode(h),o[_t]=s,s.stateNode=o}return Jt(s),null;case 31:if(u=s.memoizedState,o===null||o.memoizedState!==null){if(h=Oo(s),u!==null){if(o===null){if(!h)throw Error(r(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[_t]=s}else ja(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Jt(s),o=!1}else u=lf(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=u),o=!0;if(!o)return s.flags&256?(Er(s),s):(Er(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Jt(s),null;case 13:if(h=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=Oo(s),h!==null&&h.dehydrated!==null){if(o===null){if(!v)throw Error(r(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[_t]=s}else ja(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Jt(s),v=!1}else v=lf(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(Er(s),s):(Er(s),null)}return Er(s),(s.flags&128)!==0?(s.lanes=u,s):(u=h!==null,o=o!==null&&o.memoizedState!==null,u&&(h=s.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==v&&(h.flags|=2048)),u!==o&&u&&(s.child.flags|=8192),Gc(s,s.updateQueue),Jt(s),null);case 4:return $(),o===null&&bh(s.stateNode.containerInfo),Jt(s),null;case 10:return Ai(s.type),Jt(s),null;case 19:if(H(xn),h=s.memoizedState,h===null)return Jt(s),null;if(v=(s.flags&128)!==0,b=h.rendering,b===null)if(v)nl(h,!1);else{if(yn!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(b=Dc(o),b!==null){for(s.flags|=128,nl(h,!1),o=b.updateQueue,s.updateQueue=o,Gc(s,o),s.subtreeFlags=0,o=u,u=s.child;u!==null;)mg(u,o),u=u.sibling;return se(xn,xn.current&1|2),Et&&Ci(s,h.treeForkCount),s.child}o=o.sibling}h.tail!==null&&Re()>Zc&&(s.flags|=128,v=!0,nl(h,!1),s.lanes=4194304)}else{if(!v)if(o=Dc(b),o!==null){if(s.flags|=128,v=!0,o=o.updateQueue,s.updateQueue=o,Gc(s,o),nl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!Et)return Jt(s),null}else 2*Re()-h.renderingStartTime>Zc&&u!==536870912&&(s.flags|=128,v=!0,nl(h,!1),s.lanes=4194304);h.isBackwards?(b.sibling=s.child,s.child=b):(o=h.last,o!==null?o.sibling=b:s.child=b,h.last=b)}return h.tail!==null?(o=h.tail,h.rendering=o,h.tail=o.sibling,h.renderingStartTime=Re(),o.sibling=null,u=xn.current,se(xn,v?u&1|2:u&1),Et&&Ci(s,h.treeForkCount),o):(Jt(s),null);case 22:case 23:return Er(s),wf(),h=s.memoizedState!==null,o!==null?o.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(u&536870912)!==0&&(s.flags&128)===0&&(Jt(s),s.subtreeFlags&6&&(s.flags|=8192)):Jt(s),u=s.updateQueue,u!==null&&Gc(s,u.retryQueue),u=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==u&&(s.flags|=2048),o!==null&&H(Ba),null;case 24:return u=null,o!==null&&(u=o.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ai(Cn),Jt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function VC(o,s){switch(of(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Ai(Cn),$(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return Ce(s),null;case 31:if(s.memoizedState!==null){if(Er(s),s.alternate===null)throw Error(r(340));ja()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 13:if(Er(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ja()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return H(xn),null;case 4:return $(),null;case 10:return Ai(s.type),null;case 22:case 23:return Er(s),wf(),o!==null&&H(Ba),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return Ai(Cn),null;case 25:return null;default:return null}}function Hm(o,s){switch(of(s),s.tag){case 3:Ai(Cn),$();break;case 26:case 27:case 5:Ce(s);break;case 4:$();break;case 31:s.memoizedState!==null&&Er(s);break;case 13:Er(s);break;case 19:H(xn);break;case 10:Ai(s.type);break;case 22:case 23:Er(s),wf(),o!==null&&H(Ba);break;case 24:Ai(Cn)}}function rl(o,s){try{var u=s.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var v=h.next;u=v;do{if((u.tag&o)===o){h=void 0;var b=u.create,C=u.inst;h=b(),C.destroy=h}u=u.next}while(u!==v)}}catch(I){Lt(s,s.return,I)}}function ea(o,s,u){try{var h=s.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var b=v.next;h=b;do{if((h.tag&o)===o){var C=h.inst,I=C.destroy;if(I!==void 0){C.destroy=void 0,v=s;var F=u,Q=I;try{Q()}catch(ue){Lt(v,F,ue)}}}h=h.next}while(h!==b)}}catch(ue){Lt(s,s.return,ue)}}function $m(o){var s=o.updateQueue;if(s!==null){var u=o.stateNode;try{jg(s,u)}catch(h){Lt(o,o.return,h)}}}function qm(o,s,u){u.props=Va(o.type,o.memoizedProps),u.state=o.memoizedState;try{u.componentWillUnmount()}catch(h){Lt(o,s,h)}}function il(o,s){try{var u=o.ref;if(u!==null){switch(o.tag){case 26:case 27:case 5:var h=o.stateNode;break;case 30:h=o.stateNode;break;default:h=o.stateNode}typeof u=="function"?o.refCleanup=u(h):u.current=h}}catch(v){Lt(o,s,v)}}function di(o,s){var u=o.ref,h=o.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(v){Lt(o,s,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){Lt(o,s,v)}else u.current=null}function Gm(o){var s=o.type,u=o.memoizedProps,h=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(v){Lt(o,o.return,v)}}function Jf(o,s,u){try{var h=o.stateNode;uE(h,o.type,u,s),h[un]=s}catch(v){Lt(o,o.return,v)}}function Wm(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&sa(o.type)||o.tag===4}function eh(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Wm(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&sa(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function th(o,s,u){var h=o.tag;if(h===5||h===6)o=o.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(o,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(o),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=wi));else if(h!==4&&(h===27&&sa(o.type)&&(u=o.stateNode,s=null),o=o.child,o!==null))for(th(o,s,u),o=o.sibling;o!==null;)th(o,s,u),o=o.sibling}function Wc(o,s,u){var h=o.tag;if(h===5||h===6)o=o.stateNode,s?u.insertBefore(o,s):u.appendChild(o);else if(h!==4&&(h===27&&sa(o.type)&&(u=o.stateNode),o=o.child,o!==null))for(Wc(o,s,u),o=o.sibling;o!==null;)Wc(o,s,u),o=o.sibling}function Xm(o){var s=o.stateNode,u=o.memoizedProps;try{for(var h=o.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);Kn(s,h,u),s[_t]=o,s[un]=u}catch(b){Lt(o,o.return,b)}}var Ni=!1,Tn=!1,nh=!1,Ym=typeof WeakSet=="function"?WeakSet:Set,zn=null;function HC(o,s){if(o=o.containerInfo,Sh=pu,o=sg(o),Xd(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var v=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var C=0,I=-1,F=-1,Q=0,ue=0,he=o,ee=null;t:for(;;){for(var re;he!==u||v!==0&&he.nodeType!==3||(I=C+v),he!==b||h!==0&&he.nodeType!==3||(F=C+h),he.nodeType===3&&(C+=he.nodeValue.length),(re=he.firstChild)!==null;)ee=he,he=re;for(;;){if(he===o)break t;if(ee===u&&++Q===v&&(I=C),ee===b&&++ue===h&&(F=C),(re=he.nextSibling)!==null)break;he=ee,ee=he.parentNode}he=re}u=I===-1||F===-1?null:{start:I,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ch={focusedElem:o,selectionRange:u},pu=!1,zn=s;zn!==null;)if(s=zn,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,zn=o;else for(;zn!==null;){switch(s=zn,b=s.alternate,o=s.flags,s.tag){case 0:if((o&4)!==0&&(o=s.updateQueue,o=o!==null?o.events:null,o!==null))for(u=0;u<o.length;u++)v=o[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&b!==null){o=void 0,u=s,v=b.memoizedProps,b=b.memoizedState,h=u.stateNode;try{var Ve=Va(u.type,v);o=h.getSnapshotBeforeUpdate(Ve,b),h.__reactInternalSnapshotBeforeUpdate=o}catch(rt){Lt(u,u.return,rt)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,u=o.nodeType,u===9)Th(o);else if(u===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Th(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=s.sibling,o!==null){o.return=s.return,zn=o;break}zn=s.return}}function Km(o,s,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:Di(o,u),h&4&&rl(5,u);break;case 1:if(Di(o,u),h&4)if(o=u.stateNode,s===null)try{o.componentDidMount()}catch(C){Lt(u,u.return,C)}else{var v=Va(u.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(v,s,o.__reactInternalSnapshotBeforeUpdate)}catch(C){Lt(u,u.return,C)}}h&64&&$m(u),h&512&&il(u,u.return);break;case 3:if(Di(o,u),h&64&&(o=u.updateQueue,o!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{jg(o,s)}catch(C){Lt(u,u.return,C)}}break;case 27:s===null&&h&4&&Xm(u);case 26:case 5:Di(o,u),s===null&&h&4&&Gm(u),h&512&&il(u,u.return);break;case 12:Di(o,u);break;case 31:Di(o,u),h&4&&Jm(o,u);break;case 13:Di(o,u),h&4&&ey(o,u),h&64&&(o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(u=QC.bind(null,u),vE(o,u))));break;case 22:if(h=u.memoizedState!==null||Ni,!h){s=s!==null&&s.memoizedState!==null||Tn,v=Ni;var b=Tn;Ni=h,(Tn=s)&&!b?ji(o,u,(u.subtreeFlags&8772)!==0):Di(o,u),Ni=v,Tn=b}break;case 30:break;default:Di(o,u)}}function Zm(o){var s=o.alternate;s!==null&&(o.alternate=null,Zm(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&Nd(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var on=null,hr=!1;function ki(o,s,u){for(u=u.child;u!==null;)Qm(o,s,u),u=u.sibling}function Qm(o,s,u){if(ge&&typeof ge.onCommitFiberUnmount=="function")try{ge.onCommitFiberUnmount(ve,u)}catch{}switch(u.tag){case 26:Tn||di(u,s),ki(o,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Tn||di(u,s);var h=on,v=hr;sa(u.type)&&(on=u.stateNode,hr=!1),ki(o,s,u),hl(u.stateNode),on=h,hr=v;break;case 5:Tn||di(u,s);case 6:if(h=on,v=hr,on=null,ki(o,s,u),on=h,hr=v,on!==null)if(hr)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(u.stateNode)}catch(b){Lt(u,s,b)}else try{on.removeChild(u.stateNode)}catch(b){Lt(u,s,b)}break;case 18:on!==null&&(hr?(o=on,$y(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,u.stateNode),Yo(o)):$y(on,u.stateNode));break;case 4:h=on,v=hr,on=u.stateNode.containerInfo,hr=!0,ki(o,s,u),on=h,hr=v;break;case 0:case 11:case 14:case 15:ea(2,u,s),Tn||ea(4,u,s),ki(o,s,u);break;case 1:Tn||(di(u,s),h=u.stateNode,typeof h.componentWillUnmount=="function"&&qm(u,s,h)),ki(o,s,u);break;case 21:ki(o,s,u);break;case 22:Tn=(h=Tn)||u.memoizedState!==null,ki(o,s,u),Tn=h;break;default:ki(o,s,u)}}function Jm(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Yo(o)}catch(u){Lt(s,s.return,u)}}}function ey(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Yo(o)}catch(u){Lt(s,s.return,u)}}function $C(o){switch(o.tag){case 31:case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new Ym),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new Ym),s;default:throw Error(r(435,o.tag))}}function Xc(o,s){var u=$C(o);s.forEach(function(h){if(!u.has(h)){u.add(h);var v=JC.bind(null,o,h);h.then(v,v)}})}function pr(o,s){var u=s.deletions;if(u!==null)for(var h=0;h<u.length;h++){var v=u[h],b=o,C=s,I=C;e:for(;I!==null;){switch(I.tag){case 27:if(sa(I.type)){on=I.stateNode,hr=!1;break e}break;case 5:on=I.stateNode,hr=!1;break e;case 3:case 4:on=I.stateNode.containerInfo,hr=!0;break e}I=I.return}if(on===null)throw Error(r(160));Qm(b,C,v),on=null,hr=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ty(s,o),s=s.sibling}var Zr=null;function ty(o,s){var u=o.alternate,h=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:pr(s,o),gr(o),h&4&&(ea(3,o,o.return),rl(3,o),ea(5,o,o.return));break;case 1:pr(s,o),gr(o),h&512&&(Tn||u===null||di(u,u.return)),h&64&&Ni&&(o=o.updateQueue,o!==null&&(h=o.callbacks,h!==null&&(u=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var v=Zr;if(pr(s,o),gr(o),h&512&&(Tn||u===null||di(u,u.return)),h&4){var b=u!==null?u.memoizedState:null;if(h=o.memoizedState,u===null)if(h===null)if(o.stateNode===null){e:{h=o.type,u=o.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Ns]||b[_t]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(h),v.head.insertBefore(b,v.querySelector("head > title"))),Kn(b,h,u),b[_t]=o,Un(b),h=b;break e;case"link":var C=tv("link","href",v).get(h+(u.href||""));if(C){for(var I=0;I<C.length;I++)if(b=C[I],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(I,1);break t}}b=v.createElement(h),Kn(b,h,u),v.head.appendChild(b);break;case"meta":if(C=tv("meta","content",v).get(h+(u.content||""))){for(I=0;I<C.length;I++)if(b=C[I],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(I,1);break t}}b=v.createElement(h),Kn(b,h,u),v.head.appendChild(b);break;default:throw Error(r(468,h))}b[_t]=o,Un(b),h=b}o.stateNode=h}else nv(v,o.type,o.stateNode);else o.stateNode=ev(v,h,o.memoizedProps);else b!==h?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,h===null?nv(v,o.type,o.stateNode):ev(v,h,o.memoizedProps)):h===null&&o.stateNode!==null&&Jf(o,o.memoizedProps,u.memoizedProps)}break;case 27:pr(s,o),gr(o),h&512&&(Tn||u===null||di(u,u.return)),u!==null&&h&4&&Jf(o,o.memoizedProps,u.memoizedProps);break;case 5:if(pr(s,o),gr(o),h&512&&(Tn||u===null||di(u,u.return)),o.flags&32){v=o.stateNode;try{vo(v,"")}catch(Ve){Lt(o,o.return,Ve)}}h&4&&o.stateNode!=null&&(v=o.memoizedProps,Jf(o,v,u!==null?u.memoizedProps:v)),h&1024&&(nh=!0);break;case 6:if(pr(s,o),gr(o),h&4){if(o.stateNode===null)throw Error(r(162));h=o.memoizedProps,u=o.stateNode;try{u.nodeValue=h}catch(Ve){Lt(o,o.return,Ve)}}break;case 3:if(uu=null,v=Zr,Zr=lu(s.containerInfo),pr(s,o),Zr=v,gr(o),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Yo(s.containerInfo)}catch(Ve){Lt(o,o.return,Ve)}nh&&(nh=!1,ny(o));break;case 4:h=Zr,Zr=lu(o.stateNode.containerInfo),pr(s,o),gr(o),Zr=h;break;case 12:pr(s,o),gr(o);break;case 31:pr(s,o),gr(o),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,Xc(o,h)));break;case 13:pr(s,o),gr(o),o.child.flags&8192&&o.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Kc=Re()),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,Xc(o,h)));break;case 22:v=o.memoizedState!==null;var F=u!==null&&u.memoizedState!==null,Q=Ni,ue=Tn;if(Ni=Q||v,Tn=ue||F,pr(s,o),Tn=ue,Ni=Q,gr(o),h&8192)e:for(s=o.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(u===null||F||Ni||Tn||Ha(o)),u=null,s=o;;){if(s.tag===5||s.tag===26){if(u===null){F=u=s;try{if(b=F.stateNode,v)C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{I=F.stateNode;var he=F.memoizedProps.style,ee=he!=null&&he.hasOwnProperty("display")?he.display:null;I.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Ve){Lt(F,F.return,Ve)}}}else if(s.tag===6){if(u===null){F=s;try{F.stateNode.nodeValue=v?"":F.memoizedProps}catch(Ve){Lt(F,F.return,Ve)}}}else if(s.tag===18){if(u===null){F=s;try{var re=F.stateNode;v?qy(re,!0):qy(F.stateNode,!1)}catch(Ve){Lt(F,F.return,Ve)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=o.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Xc(o,u))));break;case 19:pr(s,o),gr(o),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,Xc(o,h)));break;case 30:break;case 21:break;default:pr(s,o),gr(o)}}function gr(o){var s=o.flags;if(s&2){try{for(var u,h=o.return;h!==null;){if(Wm(h)){u=h;break}h=h.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var v=u.stateNode,b=eh(o);Wc(o,b,v);break;case 5:var C=u.stateNode;u.flags&32&&(vo(C,""),u.flags&=-33);var I=eh(o);Wc(o,I,C);break;case 3:case 4:var F=u.stateNode.containerInfo,Q=eh(o);th(o,Q,F);break;default:throw Error(r(161))}}catch(ue){Lt(o,o.return,ue)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function ny(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;ny(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function Di(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Km(o,s.alternate,s),s=s.sibling}function Ha(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:ea(4,s,s.return),Ha(s);break;case 1:di(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&qm(s,s.return,u),Ha(s);break;case 27:hl(s.stateNode);case 26:case 5:di(s,s.return),Ha(s);break;case 22:s.memoizedState===null&&Ha(s);break;case 30:Ha(s);break;default:Ha(s)}o=o.sibling}}function ji(o,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,v=o,b=s,C=b.flags;switch(b.tag){case 0:case 11:case 15:ji(v,b,u),rl(4,b);break;case 1:if(ji(v,b,u),h=b,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Q){Lt(h,h.return,Q)}if(h=b,v=h.updateQueue,v!==null){var I=h.stateNode;try{var F=v.shared.hiddenCallbacks;if(F!==null)for(v.shared.hiddenCallbacks=null,v=0;v<F.length;v++)Dg(F[v],I)}catch(Q){Lt(h,h.return,Q)}}u&&C&64&&$m(b),il(b,b.return);break;case 27:Xm(b);case 26:case 5:ji(v,b,u),u&&h===null&&C&4&&Gm(b),il(b,b.return);break;case 12:ji(v,b,u);break;case 31:ji(v,b,u),u&&C&4&&Jm(v,b);break;case 13:ji(v,b,u),u&&C&4&&ey(v,b);break;case 22:b.memoizedState===null&&ji(v,b,u),il(b,b.return);break;case 30:break;default:ji(v,b,u)}s=s.sibling}}function rh(o,s){var u=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==u&&(o!=null&&o.refCount++,u!=null&&$s(u))}function ih(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&$s(o))}function Qr(o,s,u,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ry(o,s,u,h),s=s.sibling}function ry(o,s,u,h){var v=s.flags;switch(s.tag){case 0:case 11:case 15:Qr(o,s,u,h),v&2048&&rl(9,s);break;case 1:Qr(o,s,u,h);break;case 3:Qr(o,s,u,h),v&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&$s(o)));break;case 12:if(v&2048){Qr(o,s,u,h),o=s.stateNode;try{var b=s.memoizedProps,C=b.id,I=b.onPostCommit;typeof I=="function"&&I(C,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(F){Lt(s,s.return,F)}}else Qr(o,s,u,h);break;case 31:Qr(o,s,u,h);break;case 13:Qr(o,s,u,h);break;case 23:break;case 22:b=s.stateNode,C=s.alternate,s.memoizedState!==null?b._visibility&2?Qr(o,s,u,h):al(o,s):b._visibility&2?Qr(o,s,u,h):(b._visibility|=2,Lo(o,s,u,h,(s.subtreeFlags&10256)!==0||!1)),v&2048&&rh(C,s);break;case 24:Qr(o,s,u,h),v&2048&&ih(s.alternate,s);break;default:Qr(o,s,u,h)}}function Lo(o,s,u,h,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var b=o,C=s,I=u,F=h,Q=C.flags;switch(C.tag){case 0:case 11:case 15:Lo(b,C,I,F,v),rl(8,C);break;case 23:break;case 22:var ue=C.stateNode;C.memoizedState!==null?ue._visibility&2?Lo(b,C,I,F,v):al(b,C):(ue._visibility|=2,Lo(b,C,I,F,v)),v&&Q&2048&&rh(C.alternate,C);break;case 24:Lo(b,C,I,F,v),v&&Q&2048&&ih(C.alternate,C);break;default:Lo(b,C,I,F,v)}s=s.sibling}}function al(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=o,h=s,v=h.flags;switch(h.tag){case 22:al(u,h),v&2048&&rh(h.alternate,h);break;case 24:al(u,h),v&2048&&ih(h.alternate,h);break;default:al(u,h)}s=s.sibling}}var ol=8192;function Fo(o,s,u){if(o.subtreeFlags&ol)for(o=o.child;o!==null;)iy(o,s,u),o=o.sibling}function iy(o,s,u){switch(o.tag){case 26:Fo(o,s,u),o.flags&ol&&o.memoizedState!==null&&IE(u,Zr,o.memoizedState,o.memoizedProps);break;case 5:Fo(o,s,u);break;case 3:case 4:var h=Zr;Zr=lu(o.stateNode.containerInfo),Fo(o,s,u),Zr=h;break;case 22:o.memoizedState===null&&(h=o.alternate,h!==null&&h.memoizedState!==null?(h=ol,ol=16777216,Fo(o,s,u),ol=h):Fo(o,s,u));break;default:Fo(o,s,u)}}function ay(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function sl(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var h=s[u];zn=h,sy(h,o)}ay(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)oy(o),o=o.sibling}function oy(o){switch(o.tag){case 0:case 11:case 15:sl(o),o.flags&2048&&ea(9,o,o.return);break;case 3:sl(o);break;case 12:sl(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,Yc(o)):sl(o);break;default:sl(o)}}function Yc(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var h=s[u];zn=h,sy(h,o)}ay(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:ea(8,s,s.return),Yc(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,Yc(s));break;default:Yc(s)}o=o.sibling}}function sy(o,s){for(;zn!==null;){var u=zn;switch(u.tag){case 0:case 11:case 15:ea(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:$s(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,zn=h;else e:for(u=o;zn!==null;){h=zn;var v=h.sibling,b=h.return;if(Zm(h),h===u){zn=null;break e}if(v!==null){v.return=b,zn=v;break e}zn=b}}}var qC={getCacheForType:function(o){var s=Xn(Cn),u=s.data.get(o);return u===void 0&&(u=o(),s.data.set(o,u)),u},cacheSignal:function(){return Xn(Cn).controller.signal}},GC=typeof WeakMap=="function"?WeakMap:Map,kt=0,Wt=null,xt=null,St=0,Bt=0,Ar=null,ta=!1,Uo=!1,ah=!1,Mi=0,yn=0,na=0,$a=0,oh=0,Tr=0,zo=0,ll=null,mr=null,sh=!1,Kc=0,ly=0,Zc=1/0,Qc=null,ra=null,Nn=0,ia=null,Vo=null,Pi=0,lh=0,ch=null,cy=null,cl=0,uh=null;function Or(){return(kt&2)!==0&&St!==0?St&-St:L.T!==null?mh():ln()}function uy(){if(Tr===0)if((St&536870912)===0||Et){var o=qt;qt<<=1,(qt&3932160)===0&&(qt=262144),Tr=o}else Tr=536870912;return o=Cr.current,o!==null&&(o.flags|=32),Tr}function yr(o,s,u){(o===Wt&&(Bt===2||Bt===9)||o.cancelPendingCommit!==null)&&(Ho(o,0),aa(o,St,Tr,!1)),J(o,u),((kt&2)===0||o!==Wt)&&(o===Wt&&((kt&2)===0&&($a|=u),yn===4&&aa(o,St,Tr,!1)),fi(o))}function dy(o,s,u){if((kt&6)!==0)throw Error(r(327));var h=!u&&(s&127)===0&&(s&o.expiredLanes)===0||an(o,s),v=h?YC(o,s):fh(o,s,!0),b=h;do{if(v===0){Uo&&!h&&aa(o,s,0,!1);break}else{if(u=o.current.alternate,b&&!WC(u)){v=fh(o,s,!1),b=!1;continue}if(v===2){if(b=s,o.errorRecoveryDisabledLanes&b)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;e:{var I=o;v=ll;var F=I.current.memoizedState.isDehydrated;if(F&&(Ho(I,C).flags|=256),C=fh(I,C,!1),C!==2){if(ah&&!F){I.errorRecoveryDisabledLanes|=b,$a|=b,v=4;break e}b=mr,mr=v,b!==null&&(mr===null?mr=b:mr.push.apply(mr,b))}v=C}if(b=!1,v!==2)continue}}if(v===1){Ho(o,0),aa(o,s,0,!0);break}e:{switch(h=o,b=v,b){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:aa(h,s,Tr,!ta);break e;case 2:mr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(v=Kc+300-Re(),10<v)){if(aa(h,s,Tr,!ta),Ot(h,0,!0)!==0)break e;Pi=s,h.timeoutHandle=Vy(fy.bind(null,h,u,mr,Qc,sh,s,Tr,$a,zo,ta,b,"Throttled",-0,0),v);break e}fy(h,u,mr,Qc,sh,s,Tr,$a,zo,ta,b,null,-0,0)}}break}while(!0);fi(o)}function fy(o,s,u,h,v,b,C,I,F,Q,ue,he,ee,re){if(o.timeoutHandle=-1,he=s.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wi},iy(s,b,he);var Ve=(b&62914560)===b?Kc-Re():(b&4194048)===b?ly-Re():0;if(Ve=NE(he,Ve),Ve!==null){Pi=b,o.cancelPendingCommit=Ve(by.bind(null,o,s,b,u,h,v,C,I,F,ue,he,null,ee,re)),aa(o,b,C,!Q);return}}by(o,s,b,u,h,v,C,I,F)}function WC(o){for(var s=o;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var v=u[h],b=v.getSnapshot;v=v.value;try{if(!_r(b(),v))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function aa(o,s,u,h){s&=~oh,s&=~$a,o.suspendedLanes|=s,o.pingedLanes&=~s,h&&(o.warmLanes|=s),h=o.expirationTimes;for(var v=s;0<v;){var b=31-be(v),C=1<<b;h[b]=-1,v&=~C}u!==0&&He(o,u,s)}function Jc(){return(kt&6)===0?(ul(0),!1):!0}function dh(){if(xt!==null){if(Bt===0)var o=xt.return;else o=xt,Ei=Ma=null,Tf(o),Do=null,Gs=0,o=xt;for(;o!==null;)Hm(o.alternate,o),o=o.return;xt=null}}function Ho(o,s){var u=o.timeoutHandle;u!==-1&&(o.timeoutHandle=-1,hE(u)),u=o.cancelPendingCommit,u!==null&&(o.cancelPendingCommit=null,u()),Pi=0,dh(),Wt=o,xt=u=Si(o.current,null),St=s,Bt=0,Ar=null,ta=!1,Uo=an(o,s),ah=!1,zo=Tr=oh=$a=na=yn=0,mr=ll=null,sh=!1,(s&8)!==0&&(s|=s&32);var h=o.entangledLanes;if(h!==0)for(o=o.entanglements,h&=s;0<h;){var v=31-be(h),b=1<<v;s|=o[v],h&=~b}return Mi=s,bc(),u}function hy(o,s){ht=null,L.H=el,s===ko||s===Oc?(s=Rg(),Bt=3):s===gf?(s=Rg(),Bt=4):Bt=s===Hf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ar=s,xt===null&&(yn=1,Vc(o,Pr(s,o.current)))}function py(){var o=Cr.current;return o===null?!0:(St&4194048)===St?Ur===null:(St&62914560)===St||(St&536870912)!==0?o===Ur:!1}function gy(){var o=L.H;return L.H=el,o===null?el:o}function my(){var o=L.A;return L.A=qC,o}function eu(){yn=4,ta||(St&4194048)!==St&&Cr.current!==null||(Uo=!0),(na&134217727)===0&&($a&134217727)===0||Wt===null||aa(Wt,St,Tr,!1)}function fh(o,s,u){var h=kt;kt|=2;var v=gy(),b=my();(Wt!==o||St!==s)&&(Qc=null,Ho(o,s)),s=!1;var C=yn;e:do try{if(Bt!==0&&xt!==null){var I=xt,F=Ar;switch(Bt){case 8:dh(),C=6;break e;case 3:case 2:case 9:case 6:Cr.current===null&&(s=!0);var Q=Bt;if(Bt=0,Ar=null,$o(o,I,F,Q),u&&Uo){C=0;break e}break;default:Q=Bt,Bt=0,Ar=null,$o(o,I,F,Q)}}XC(),C=yn;break}catch(ue){hy(o,ue)}while(!0);return s&&o.shellSuspendCounter++,Ei=Ma=null,kt=h,L.H=v,L.A=b,xt===null&&(Wt=null,St=0,bc()),C}function XC(){for(;xt!==null;)yy(xt)}function YC(o,s){var u=kt;kt|=2;var h=gy(),v=my();Wt!==o||St!==s?(Qc=null,Zc=Re()+500,Ho(o,s)):Uo=an(o,s);e:do try{if(Bt!==0&&xt!==null){s=xt;var b=Ar;t:switch(Bt){case 1:Bt=0,Ar=null,$o(o,s,b,1);break;case 2:case 9:if(Tg(b)){Bt=0,Ar=null,vy(s);break}s=function(){Bt!==2&&Bt!==9||Wt!==o||(Bt=7),fi(o)},b.then(s,s);break e;case 3:Bt=7;break e;case 4:Bt=5;break e;case 7:Tg(b)?(Bt=0,Ar=null,vy(s)):(Bt=0,Ar=null,$o(o,s,b,7));break;case 5:var C=null;switch(xt.tag){case 26:C=xt.memoizedState;case 5:case 27:var I=xt;if(C?rv(C):I.stateNode.complete){Bt=0,Ar=null;var F=I.sibling;if(F!==null)xt=F;else{var Q=I.return;Q!==null?(xt=Q,tu(Q)):xt=null}break t}}Bt=0,Ar=null,$o(o,s,b,5);break;case 6:Bt=0,Ar=null,$o(o,s,b,6);break;case 8:dh(),yn=6;break e;default:throw Error(r(462))}}KC();break}catch(ue){hy(o,ue)}while(!0);return Ei=Ma=null,L.H=h,L.A=v,kt=u,xt!==null?0:(Wt=null,St=0,bc(),yn)}function KC(){for(;xt!==null&&!je();)yy(xt)}function yy(o){var s=zm(o.alternate,o,Mi);o.memoizedProps=o.pendingProps,s===null?tu(o):xt=s}function vy(o){var s=o,u=s.alternate;switch(s.tag){case 15:case 0:s=Mm(u,s,s.pendingProps,s.type,void 0,St);break;case 11:s=Mm(u,s,s.pendingProps,s.type.render,s.ref,St);break;case 5:Tf(s);default:Hm(u,s),s=xt=mg(s,Mi),s=zm(u,s,Mi)}o.memoizedProps=o.pendingProps,s===null?tu(o):xt=s}function $o(o,s,u,h){Ei=Ma=null,Tf(s),Do=null,Gs=0;var v=s.return;try{if(LC(o,v,s,u,St)){yn=1,Vc(o,Pr(u,o.current)),xt=null;return}}catch(b){if(v!==null)throw xt=v,b;yn=1,Vc(o,Pr(u,o.current)),xt=null;return}s.flags&32768?(Et||h===1?o=!0:Uo||(St&536870912)!==0?o=!1:(ta=o=!0,(h===2||h===9||h===3||h===6)&&(h=Cr.current,h!==null&&h.tag===13&&(h.flags|=16384))),xy(s,o)):tu(s)}function tu(o){var s=o;do{if((s.flags&32768)!==0){xy(s,ta);return}o=s.return;var u=zC(s.alternate,s,Mi);if(u!==null){xt=u;return}if(s=s.sibling,s!==null){xt=s;return}xt=s=o}while(s!==null);yn===0&&(yn=5)}function xy(o,s){do{var u=VC(o.alternate,o);if(u!==null){u.flags&=32767,xt=u;return}if(u=o.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(o=o.sibling,o!==null)){xt=o;return}xt=o=u}while(o!==null);yn=6,xt=null}function by(o,s,u,h,v,b,C,I,F){o.cancelPendingCommit=null;do nu();while(Nn!==0);if((kt&6)!==0)throw Error(r(327));if(s!==null){if(s===o.current)throw Error(r(177));if(b=s.lanes|s.childLanes,b|=Jd,ye(o,u,b,C,I,F),o===Wt&&(xt=Wt=null,St=0),Vo=s,ia=o,Pi=u,lh=b,ch=v,cy=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,eE(Fe,function(){return Ey(),null})):(o.callbackNode=null,o.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=L.T,L.T=null,v=te.p,te.p=2,C=kt,kt|=4;try{HC(o,s,u)}finally{kt=C,te.p=v,L.T=h}}Nn=1,wy(),_y(),Sy()}}function wy(){if(Nn===1){Nn=0;var o=ia,s=Vo,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=L.T,L.T=null;var h=te.p;te.p=2;var v=kt;kt|=4;try{ty(s,o);var b=Ch,C=sg(o.containerInfo),I=b.focusedElem,F=b.selectionRange;if(C!==I&&I&&I.ownerDocument&&og(I.ownerDocument.documentElement,I)){if(F!==null&&Xd(I)){var Q=F.start,ue=F.end;if(ue===void 0&&(ue=Q),"selectionStart"in I)I.selectionStart=Q,I.selectionEnd=Math.min(ue,I.value.length);else{var he=I.ownerDocument||document,ee=he&&he.defaultView||window;if(ee.getSelection){var re=ee.getSelection(),Ve=I.textContent.length,rt=Math.min(F.start,Ve),Ht=F.end===void 0?rt:Math.min(F.end,Ve);!re.extend&&rt>Ht&&(C=Ht,Ht=rt,rt=C);var W=ag(I,rt),z=ag(I,Ht);if(W&&z&&(re.rangeCount!==1||re.anchorNode!==W.node||re.anchorOffset!==W.offset||re.focusNode!==z.node||re.focusOffset!==z.offset)){var K=he.createRange();K.setStart(W.node,W.offset),re.removeAllRanges(),rt>Ht?(re.addRange(K),re.extend(z.node,z.offset)):(K.setEnd(z.node,z.offset),re.addRange(K))}}}}for(he=[],re=I;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<he.length;I++){var de=he[I];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}pu=!!Sh,Ch=Sh=null}finally{kt=v,te.p=h,L.T=u}}o.current=s,Nn=2}}function _y(){if(Nn===2){Nn=0;var o=ia,s=Vo,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=L.T,L.T=null;var h=te.p;te.p=2;var v=kt;kt|=4;try{Km(o,s.alternate,s)}finally{kt=v,te.p=h,L.T=u}}Nn=3}}function Sy(){if(Nn===4||Nn===3){Nn=0,_e();var o=ia,s=Vo,u=Pi,h=cy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Nn=5:(Nn=0,Vo=ia=null,Cy(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(ra=null),Gt(u),s=s.stateNode,ge&&typeof ge.onCommitFiberRoot=="function")try{ge.onCommitFiberRoot(ve,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=L.T,v=te.p,te.p=2,L.T=null;try{for(var b=o.onRecoverableError,C=0;C<h.length;C++){var I=h[C];b(I.value,{componentStack:I.stack})}}finally{L.T=s,te.p=v}}(Pi&3)!==0&&nu(),fi(o),v=o.pendingLanes,(u&261930)!==0&&(v&42)!==0?o===uh?cl++:(cl=0,uh=o):cl=0,ul(0)}}function Cy(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,$s(s)))}function nu(){return wy(),_y(),Sy(),Ey()}function Ey(){if(Nn!==5)return!1;var o=ia,s=lh;lh=0;var u=Gt(Pi),h=L.T,v=te.p;try{te.p=32>u?32:u,L.T=null,u=ch,ch=null;var b=ia,C=Pi;if(Nn=0,Vo=ia=null,Pi=0,(kt&6)!==0)throw Error(r(331));var I=kt;if(kt|=4,oy(b.current),ry(b,b.current,C,u),kt=I,ul(0,!1),ge&&typeof ge.onPostCommitFiberRoot=="function")try{ge.onPostCommitFiberRoot(ve,b)}catch{}return!0}finally{te.p=v,L.T=h,Cy(o,s)}}function Ay(o,s,u){s=Pr(u,s),s=Vf(o.stateNode,s,2),o=Zi(o,s,2),o!==null&&(J(o,2),fi(o))}function Lt(o,s,u){if(o.tag===3)Ay(o,o,u);else for(;s!==null;){if(s.tag===3){Ay(s,o,u);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ra===null||!ra.has(h))){o=Pr(u,o),u=Tm(2),h=Zi(s,u,2),h!==null&&(Om(u,h,s,o),J(h,2),fi(h));break}}s=s.return}}function hh(o,s,u){var h=o.pingCache;if(h===null){h=o.pingCache=new GC;var v=new Set;h.set(s,v)}else v=h.get(s),v===void 0&&(v=new Set,h.set(s,v));v.has(u)||(ah=!0,v.add(u),o=ZC.bind(null,o,s,u),s.then(o,o))}function ZC(o,s,u){var h=o.pingCache;h!==null&&h.delete(s),o.pingedLanes|=o.suspendedLanes&u,o.warmLanes&=~u,Wt===o&&(St&u)===u&&(yn===4||yn===3&&(St&62914560)===St&&300>Re()-Kc?(kt&2)===0&&Ho(o,0):oh|=u,zo===St&&(zo=0)),fi(o)}function Ty(o,s){s===0&&(s=kr()),o=ka(o,s),o!==null&&(J(o,s),fi(o))}function QC(o){var s=o.memoizedState,u=0;s!==null&&(u=s.retryLane),Ty(o,u)}function JC(o,s){var u=0;switch(o.tag){case 31:case 13:var h=o.stateNode,v=o.memoizedState;v!==null&&(u=v.retryLane);break;case 19:h=o.stateNode;break;case 22:h=o.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(s),Ty(o,u)}function eE(o,s){return Be(o,s)}var ru=null,qo=null,ph=!1,iu=!1,gh=!1,oa=0;function fi(o){o!==qo&&o.next===null&&(qo===null?ru=qo=o:qo=qo.next=o),iu=!0,ph||(ph=!0,nE())}function ul(o,s){if(!gh&&iu){gh=!0;do for(var u=!1,h=ru;h!==null;){if(o!==0){var v=h.pendingLanes;if(v===0)var b=0;else{var C=h.suspendedLanes,I=h.pingedLanes;b=(1<<31-be(42|o)+1)-1,b&=v&~(C&~I),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,Ny(h,b))}else b=St,b=Ot(h,h===Wt?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||an(h,b)||(u=!0,Ny(h,b));h=h.next}while(u);gh=!1}}function tE(){Oy()}function Oy(){iu=ph=!1;var o=0;oa!==0&&fE()&&(o=oa);for(var s=Re(),u=null,h=ru;h!==null;){var v=h.next,b=Ry(h,s);b===0?(h.next=null,u===null?ru=v:u.next=v,v===null&&(qo=u)):(u=h,(o!==0||(b&3)!==0)&&(iu=!0)),h=v}Nn!==0&&Nn!==5||ul(o),oa!==0&&(oa=0)}function Ry(o,s){for(var u=o.suspendedLanes,h=o.pingedLanes,v=o.expirationTimes,b=o.pendingLanes&-62914561;0<b;){var C=31-be(b),I=1<<C,F=v[C];F===-1?((I&u)===0||(I&h)!==0)&&(v[C]=dr(I,s)):F<=s&&(o.expiredLanes|=I),b&=~I}if(s=Wt,u=St,u=Ot(o,o===s?u:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h=o.callbackNode,u===0||o===s&&(Bt===2||Bt===9)||o.cancelPendingCommit!==null)return h!==null&&h!==null&&Ne(h),o.callbackNode=null,o.callbackPriority=0;if((u&3)===0||an(o,u)){if(s=u&-u,s===o.callbackPriority)return s;switch(h!==null&&Ne(h),Gt(u)){case 2:case 8:u=it;break;case 32:u=Fe;break;case 268435456:u=U;break;default:u=Fe}return h=Iy.bind(null,o),u=Be(u,h),o.callbackPriority=s,o.callbackNode=u,s}return h!==null&&h!==null&&Ne(h),o.callbackPriority=2,o.callbackNode=null,2}function Iy(o,s){if(Nn!==0&&Nn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var u=o.callbackNode;if(nu()&&o.callbackNode!==u)return null;var h=St;return h=Ot(o,o===Wt?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h===0?null:(dy(o,h,s),Ry(o,Re()),o.callbackNode!=null&&o.callbackNode===u?Iy.bind(null,o):null)}function Ny(o,s){if(nu())return null;dy(o,s,!0)}function nE(){pE(function(){(kt&6)!==0?Be(Ue,tE):Oy()})}function mh(){if(oa===0){var o=Io;o===0&&(o=Xt,Xt<<=1,(Xt&261888)===0&&(Xt=256)),oa=o}return oa}function ky(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:fc(""+o)}function Dy(o,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,o.id&&u.setAttribute("form",o.id),s.parentNode.insertBefore(u,s),o=new FormData(o),u.parentNode.removeChild(u),o}function rE(o,s,u,h,v){if(s==="submit"&&u&&u.stateNode===v){var b=ky((v[un]||null).action),C=h.submitter;C&&(s=(s=C[un]||null)?ky(s.formAction):C.getAttribute("formAction"),s!==null&&(b=s,C=null));var I=new mc("action","action",null,h,v);o.push({event:I,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(oa!==0){var F=C?Dy(v,C):new FormData(v);Pf(u,{pending:!0,data:F,method:v.method,action:b},null,F)}}else typeof b=="function"&&(I.preventDefault(),F=C?Dy(v,C):new FormData(v),Pf(u,{pending:!0,data:F,method:v.method,action:b},b,F))},currentTarget:v}]})}}for(var yh=0;yh<Qd.length;yh++){var vh=Qd[yh],iE=vh.toLowerCase(),aE=vh[0].toUpperCase()+vh.slice(1);Kr(iE,"on"+aE)}Kr(ug,"onAnimationEnd"),Kr(dg,"onAnimationIteration"),Kr(fg,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(wC,"onTransitionRun"),Kr(_C,"onTransitionStart"),Kr(SC,"onTransitionCancel"),Kr(hg,"onTransitionEnd"),mo("onMouseEnter",["mouseout","mouseover"]),mo("onMouseLeave",["mouseout","mouseover"]),mo("onPointerEnter",["pointerout","pointerover"]),mo("onPointerLeave",["pointerout","pointerover"]),Oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dl));function jy(o,s){s=(s&4)!==0;for(var u=0;u<o.length;u++){var h=o[u],v=h.event;h=h.listeners;e:{var b=void 0;if(s)for(var C=h.length-1;0<=C;C--){var I=h[C],F=I.instance,Q=I.currentTarget;if(I=I.listener,F!==b&&v.isPropagationStopped())break e;b=I,v.currentTarget=Q;try{b(v)}catch(ue){xc(ue)}v.currentTarget=null,b=F}else for(C=0;C<h.length;C++){if(I=h[C],F=I.instance,Q=I.currentTarget,I=I.listener,F!==b&&v.isPropagationStopped())break e;b=I,v.currentTarget=Q;try{b(v)}catch(ue){xc(ue)}v.currentTarget=null,b=F}}}}function bt(o,s){var u=s[fo];u===void 0&&(u=s[fo]=new Set);var h=o+"__bubble";u.has(h)||(My(s,o,2,!1),u.add(h))}function xh(o,s,u){var h=0;s&&(h|=4),My(u,o,h,s)}var au="_reactListening"+Math.random().toString(36).slice(2);function bh(o){if(!o[au]){o[au]=!0,O1.forEach(function(u){u!=="selectionchange"&&(oE.has(u)||xh(u,!1,o),xh(u,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[au]||(s[au]=!0,xh("selectionchange",!1,s))}}function My(o,s,u,h){switch(uv(s)){case 2:var v=jE;break;case 8:v=ME;break;default:v=Mh}u=v.bind(null,s,u,o),v=void 0,!Fd||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),h?v!==void 0?o.addEventListener(s,u,{capture:!0,passive:v}):o.addEventListener(s,u,!0):v!==void 0?o.addEventListener(s,u,{passive:v}):o.addEventListener(s,u,!1)}function wh(o,s,u,h,v){var b=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var I=h.stateNode.containerInfo;if(I===v)break;if(C===4)for(C=h.return;C!==null;){var F=C.tag;if((F===3||F===4)&&C.stateNode.containerInfo===v)return;C=C.return}for(;I!==null;){if(C=ho(I),C===null)return;if(F=C.tag,F===5||F===6||F===26||F===27){h=b=C;continue e}I=I.parentNode}}h=h.return}U1(function(){var Q=b,ue=Bd(u),he=[];e:{var ee=pg.get(o);if(ee!==void 0){var re=mc,Ve=o;switch(o){case"keypress":if(pc(u)===0)break e;case"keydown":case"keyup":re=JS;break;case"focusin":Ve="focus",re=Hd;break;case"focusout":Ve="blur",re=Hd;break;case"beforeblur":case"afterblur":re=Hd;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=H1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=zS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=nC;break;case ug:case dg:case fg:re=$S;break;case hg:re=iC;break;case"scroll":case"scrollend":re=FS;break;case"wheel":re=oC;break;case"copy":case"cut":case"paste":re=GS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=q1;break;case"toggle":case"beforetoggle":re=lC}var rt=(s&4)!==0,Ht=!rt&&(o==="scroll"||o==="scrollend"),W=rt?ee!==null?ee+"Capture":null:ee;rt=[];for(var z=Q,K;z!==null;){var de=z;if(K=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||K===null||W===null||(de=Ds(z,W),de!=null&&rt.push(fl(z,de,K))),Ht)break;z=z.return}0<rt.length&&(ee=new re(ee,Ve,null,u,ue),he.push({event:ee,listeners:rt}))}}if((s&7)===0){e:{if(ee=o==="mouseover"||o==="pointerover",re=o==="mouseout"||o==="pointerout",ee&&u!==Pd&&(Ve=u.relatedTarget||u.fromElement)&&(ho(Ve)||Ve[li]))break e;if((re||ee)&&(ee=ue.window===ue?ue:(ee=ue.ownerDocument)?ee.defaultView||ee.parentWindow:window,re?(Ve=u.relatedTarget||u.toElement,re=Q,Ve=Ve?ho(Ve):null,Ve!==null&&(Ht=a(Ve),rt=Ve.tag,Ve!==Ht||rt!==5&&rt!==27&&rt!==6)&&(Ve=null)):(re=null,Ve=Q),re!==Ve)){if(rt=H1,de="onMouseLeave",W="onMouseEnter",z="mouse",(o==="pointerout"||o==="pointerover")&&(rt=q1,de="onPointerLeave",W="onPointerEnter",z="pointer"),Ht=re==null?ee:ks(re),K=Ve==null?ee:ks(Ve),ee=new rt(de,z+"leave",re,u,ue),ee.target=Ht,ee.relatedTarget=K,de=null,ho(ue)===Q&&(rt=new rt(W,z+"enter",Ve,u,ue),rt.target=K,rt.relatedTarget=Ht,de=rt),Ht=de,re&&Ve)t:{for(rt=sE,W=re,z=Ve,K=0,de=W;de;de=rt(de))K++;de=0;for(var Ke=z;Ke;Ke=rt(Ke))de++;for(;0<K-de;)W=rt(W),K--;for(;0<de-K;)z=rt(z),de--;for(;K--;){if(W===z||z!==null&&W===z.alternate){rt=W;break t}W=rt(W),z=rt(z)}rt=null}else rt=null;re!==null&&Py(he,ee,re,rt,!1),Ve!==null&&Ht!==null&&Py(he,Ht,Ve,rt,!0)}}e:{if(ee=Q?ks(Q):window,re=ee.nodeName&&ee.nodeName.toLowerCase(),re==="select"||re==="input"&&ee.type==="file")var Rt=J1;else if(Z1(ee))if(eg)Rt=vC;else{Rt=mC;var We=gC}else re=ee.nodeName,!re||re.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Q&&Md(Q.elementType)&&(Rt=J1):Rt=yC;if(Rt&&(Rt=Rt(o,Q))){Q1(he,Rt,u,ue);break e}We&&We(o,ee,Q),o==="focusout"&&Q&&ee.type==="number"&&Q.memoizedProps.value!=null&&jd(ee,"number",ee.value)}switch(We=Q?ks(Q):window,o){case"focusin":(Z1(We)||We.contentEditable==="true")&&(_o=We,Yd=Q,zs=null);break;case"focusout":zs=Yd=_o=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,lg(he,u,ue);break;case"selectionchange":if(bC)break;case"keydown":case"keyup":lg(he,u,ue)}var gt;if(qd)e:{switch(o){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else wo?Y1(o,u)&&(Ct="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(Ct="onCompositionStart");Ct&&(G1&&u.locale!=="ko"&&(wo||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&wo&&(gt=z1()):($i=ue,Ud="value"in $i?$i.value:$i.textContent,wo=!0)),We=ou(Q,Ct),0<We.length&&(Ct=new $1(Ct,o,null,u,ue),he.push({event:Ct,listeners:We}),gt?Ct.data=gt:(gt=K1(u),gt!==null&&(Ct.data=gt)))),(gt=uC?dC(o,u):fC(o,u))&&(Ct=ou(Q,"onBeforeInput"),0<Ct.length&&(We=new $1("onBeforeInput","beforeinput",null,u,ue),he.push({event:We,listeners:Ct}),We.data=gt)),rE(he,o,Q,u,ue)}jy(he,s)})}function fl(o,s,u){return{instance:o,listener:s,currentTarget:u}}function ou(o,s){for(var u=s+"Capture",h=[];o!==null;){var v=o,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=Ds(o,u),v!=null&&h.unshift(fl(o,v,b)),v=Ds(o,s),v!=null&&h.push(fl(o,v,b))),o.tag===3)return h;o=o.return}return[]}function sE(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Py(o,s,u,h,v){for(var b=s._reactName,C=[];u!==null&&u!==h;){var I=u,F=I.alternate,Q=I.stateNode;if(I=I.tag,F!==null&&F===h)break;I!==5&&I!==26&&I!==27||Q===null||(F=Q,v?(Q=Ds(u,b),Q!=null&&C.unshift(fl(u,Q,F))):v||(Q=Ds(u,b),Q!=null&&C.push(fl(u,Q,F)))),u=u.return}C.length!==0&&o.push({event:s,listeners:C})}var lE=/\r\n?/g,cE=/\u0000|\uFFFD/g;function By(o){return(typeof o=="string"?o:""+o).replace(lE,`
`).replace(cE,"")}function Ly(o,s){return s=By(s),By(o)===s}function Vt(o,s,u,h,v,b){switch(u){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||vo(o,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&vo(o,""+h);break;case"className":uc(o,"class",h);break;case"tabIndex":uc(o,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":uc(o,u,h);break;case"style":L1(o,h,b);break;case"data":if(s!=="object"){uc(o,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||u!=="href")){o.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(u);break}h=fc(""+h),o.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){o.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(s!=="input"&&Vt(o,s,"name",v.name,v,null),Vt(o,s,"formEncType",v.formEncType,v,null),Vt(o,s,"formMethod",v.formMethod,v,null),Vt(o,s,"formTarget",v.formTarget,v,null)):(Vt(o,s,"encType",v.encType,v,null),Vt(o,s,"method",v.method,v,null),Vt(o,s,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(u);break}h=fc(""+h),o.setAttribute(u,h);break;case"onClick":h!=null&&(o.onclick=wi);break;case"onScroll":h!=null&&bt("scroll",o);break;case"onScrollEnd":h!=null&&bt("scrollend",o);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));o.innerHTML=u}}break;case"multiple":o.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":o.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){o.removeAttribute("xlink:href");break}u=fc(""+h),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,""+h):o.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,""):o.removeAttribute(u);break;case"capture":case"download":h===!0?o.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,h):o.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?o.setAttribute(u,h):o.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?o.removeAttribute(u):o.setAttribute(u,h);break;case"popover":bt("beforetoggle",o),bt("toggle",o),cc(o,"popover",h);break;case"xlinkActuate":bi(o,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":bi(o,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":bi(o,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":bi(o,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":bi(o,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":bi(o,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":bi(o,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":bi(o,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":bi(o,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":cc(o,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=BS.get(u)||u,cc(o,u,h))}}function _h(o,s,u,h,v,b){switch(u){case"style":L1(o,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));o.innerHTML=u}}break;case"children":typeof h=="string"?vo(o,h):(typeof h=="number"||typeof h=="bigint")&&vo(o,""+h);break;case"onScroll":h!=null&&bt("scroll",o);break;case"onScrollEnd":h!=null&&bt("scrollend",o);break;case"onClick":h!=null&&(o.onclick=wi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!R1.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),s=u.slice(2,v?u.length-7:void 0),b=o[un]||null,b=b!=null?b[u]:null,typeof b=="function"&&o.removeEventListener(s,b,v),typeof h=="function")){typeof b!="function"&&b!==null&&(u in o?o[u]=null:o.hasAttribute(u)&&o.removeAttribute(u)),o.addEventListener(s,h,v);break e}u in o?o[u]=h:h===!0?o.setAttribute(u,""):cc(o,u,h)}}}function Kn(o,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",o),bt("load",o);var h=!1,v=!1,b;for(b in u)if(u.hasOwnProperty(b)){var C=u[b];if(C!=null)switch(b){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Vt(o,s,b,C,u,null)}}v&&Vt(o,s,"srcSet",u.srcSet,u,null),h&&Vt(o,s,"src",u.src,u,null);return;case"input":bt("invalid",o);var I=b=C=v=null,F=null,Q=null;for(h in u)if(u.hasOwnProperty(h)){var ue=u[h];if(ue!=null)switch(h){case"name":v=ue;break;case"type":C=ue;break;case"checked":F=ue;break;case"defaultChecked":Q=ue;break;case"value":b=ue;break;case"defaultValue":I=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,s));break;default:Vt(o,s,h,ue,u,null)}}j1(o,b,I,F,Q,C,v,!1);return;case"select":bt("invalid",o),h=C=b=null;for(v in u)if(u.hasOwnProperty(v)&&(I=u[v],I!=null))switch(v){case"value":b=I;break;case"defaultValue":C=I;break;case"multiple":h=I;default:Vt(o,s,v,I,u,null)}s=b,u=C,o.multiple=!!h,s!=null?yo(o,!!h,s,!1):u!=null&&yo(o,!!h,u,!0);return;case"textarea":bt("invalid",o),b=v=h=null;for(C in u)if(u.hasOwnProperty(C)&&(I=u[C],I!=null))switch(C){case"value":h=I;break;case"defaultValue":v=I;break;case"children":b=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:Vt(o,s,C,I,u,null)}P1(o,h,v,b);return;case"option":for(F in u)if(u.hasOwnProperty(F)&&(h=u[F],h!=null))switch(F){case"selected":o.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Vt(o,s,F,h,u,null)}return;case"dialog":bt("beforetoggle",o),bt("toggle",o),bt("cancel",o),bt("close",o);break;case"iframe":case"object":bt("load",o);break;case"video":case"audio":for(h=0;h<dl.length;h++)bt(dl[h],o);break;case"image":bt("error",o),bt("load",o);break;case"details":bt("toggle",o);break;case"embed":case"source":case"link":bt("error",o),bt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in u)if(u.hasOwnProperty(Q)&&(h=u[Q],h!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Vt(o,s,Q,h,u,null)}return;default:if(Md(s)){for(ue in u)u.hasOwnProperty(ue)&&(h=u[ue],h!==void 0&&_h(o,s,ue,h,u,void 0));return}}for(I in u)u.hasOwnProperty(I)&&(h=u[I],h!=null&&Vt(o,s,I,h,u,null))}function uE(o,s,u,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,C=null,I=null,F=null,Q=null,ue=null;for(re in u){var he=u[re];if(u.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":F=he;default:h.hasOwnProperty(re)||Vt(o,s,re,null,h,he)}}for(var ee in h){var re=h[ee];if(he=u[ee],h.hasOwnProperty(ee)&&(re!=null||he!=null))switch(ee){case"type":b=re;break;case"name":v=re;break;case"checked":Q=re;break;case"defaultChecked":ue=re;break;case"value":C=re;break;case"defaultValue":I=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,s));break;default:re!==he&&Vt(o,s,ee,re,h,he)}}Dd(o,C,I,F,Q,ue,b,v);return;case"select":re=C=I=ee=null;for(b in u)if(F=u[b],u.hasOwnProperty(b)&&F!=null)switch(b){case"value":break;case"multiple":re=F;default:h.hasOwnProperty(b)||Vt(o,s,b,null,h,F)}for(v in h)if(b=h[v],F=u[v],h.hasOwnProperty(v)&&(b!=null||F!=null))switch(v){case"value":ee=b;break;case"defaultValue":I=b;break;case"multiple":C=b;default:b!==F&&Vt(o,s,v,b,h,F)}s=I,u=C,h=re,ee!=null?yo(o,!!u,ee,!1):!!h!=!!u&&(s!=null?yo(o,!!u,s,!0):yo(o,!!u,u?[]:"",!1));return;case"textarea":re=ee=null;for(I in u)if(v=u[I],u.hasOwnProperty(I)&&v!=null&&!h.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Vt(o,s,I,null,h,v)}for(C in h)if(v=h[C],b=u[C],h.hasOwnProperty(C)&&(v!=null||b!=null))switch(C){case"value":ee=v;break;case"defaultValue":re=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==b&&Vt(o,s,C,v,h,b)}M1(o,ee,re);return;case"option":for(var Ve in u)if(ee=u[Ve],u.hasOwnProperty(Ve)&&ee!=null&&!h.hasOwnProperty(Ve))switch(Ve){case"selected":o.selected=!1;break;default:Vt(o,s,Ve,null,h,ee)}for(F in h)if(ee=h[F],re=u[F],h.hasOwnProperty(F)&&ee!==re&&(ee!=null||re!=null))switch(F){case"selected":o.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Vt(o,s,F,ee,h,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in u)ee=u[rt],u.hasOwnProperty(rt)&&ee!=null&&!h.hasOwnProperty(rt)&&Vt(o,s,rt,null,h,ee);for(Q in h)if(ee=h[Q],re=u[Q],h.hasOwnProperty(Q)&&ee!==re&&(ee!=null||re!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,s));break;default:Vt(o,s,Q,ee,h,re)}return;default:if(Md(s)){for(var Ht in u)ee=u[Ht],u.hasOwnProperty(Ht)&&ee!==void 0&&!h.hasOwnProperty(Ht)&&_h(o,s,Ht,void 0,h,ee);for(ue in h)ee=h[ue],re=u[ue],!h.hasOwnProperty(ue)||ee===re||ee===void 0&&re===void 0||_h(o,s,ue,ee,h,re);return}}for(var W in u)ee=u[W],u.hasOwnProperty(W)&&ee!=null&&!h.hasOwnProperty(W)&&Vt(o,s,W,null,h,ee);for(he in h)ee=h[he],re=u[he],!h.hasOwnProperty(he)||ee===re||ee==null&&re==null||Vt(o,s,he,ee,h,re)}function Fy(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dE(){if(typeof performance.getEntriesByType=="function"){for(var o=0,s=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var v=u[h],b=v.transferSize,C=v.initiatorType,I=v.duration;if(b&&I&&Fy(C)){for(C=0,I=v.responseEnd,h+=1;h<u.length;h++){var F=u[h],Q=F.startTime;if(Q>I)break;var ue=F.transferSize,he=F.initiatorType;ue&&Fy(he)&&(F=F.responseEnd,C+=ue*(F<I?1:(I-Q)/(F-Q)))}if(--h,s+=8*(b+C)/(v.duration/1e3),o++,10<o)break}}if(0<o)return s/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Sh=null,Ch=null;function su(o){return o.nodeType===9?o:o.ownerDocument}function Uy(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zy(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function Eh(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ah=null;function fE(){var o=window.event;return o&&o.type==="popstate"?o===Ah?!1:(Ah=o,!0):(Ah=null,!1)}var Vy=typeof setTimeout=="function"?setTimeout:void 0,hE=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,pE=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(o){return Hy.resolve(null).then(o).catch(gE)}:Vy;function gE(o){setTimeout(function(){throw o})}function sa(o){return o==="head"}function $y(o,s){var u=s,h=0;do{var v=u.nextSibling;if(o.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(h===0){o.removeChild(v),Yo(s);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")hl(o.ownerDocument.documentElement);else if(u==="head"){u=o.ownerDocument.head,hl(u);for(var b=u.firstChild;b;){var C=b.nextSibling,I=b.nodeName;b[Ns]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=C}}else u==="body"&&hl(o.ownerDocument.body);u=v}while(u);Yo(s)}function qy(o,s){var u=o;o=0;do{var h=u.nextSibling;if(u.nodeType===1?s?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(s?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(o===0)break;o--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||o++;u=h}while(u)}function Th(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Th(u),Nd(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}o.removeChild(u)}}function mE(o,s,u,h){for(;o.nodeType===1;){var v=u;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(h){if(!o[Ns])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(b=o.getAttribute("rel"),b==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(b!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(b=o.getAttribute("src"),(b!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===b)return o}else return o;if(o=zr(o.nextSibling),o===null)break}return null}function yE(o,s,u){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=zr(o.nextSibling),o===null))return null;return o}function Gy(o,s){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!s||(o=zr(o.nextSibling),o===null))return null;return o}function Oh(o){return o.data==="$?"||o.data==="$~"}function Rh(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function vE(o,s){var u=o.ownerDocument;if(o.data==="$~")o._reactRetry=s;else if(o.data!=="$?"||u.readyState!=="loading")s();else{var h=function(){s(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),o._reactRetry=h}}function zr(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return o}var Ih=null;function Wy(o){o=o.nextSibling;for(var s=0;o;){if(o.nodeType===8){var u=o.data;if(u==="/$"||u==="/&"){if(s===0)return zr(o.nextSibling);s--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||s++}o=o.nextSibling}return null}function Xy(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(s===0)return o;s--}else u!=="/$"&&u!=="/&"||s++}o=o.previousSibling}return null}function Yy(o,s,u){switch(s=su(u),o){case"html":if(o=s.documentElement,!o)throw Error(r(452));return o;case"head":if(o=s.head,!o)throw Error(r(453));return o;case"body":if(o=s.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function hl(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Nd(o)}var Vr=new Map,Ky=new Set;function lu(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Bi=te.d;te.d={f:xE,r:bE,D:wE,C:_E,L:SE,m:CE,X:AE,S:EE,M:TE};function xE(){var o=Bi.f(),s=Jc();return o||s}function bE(o){var s=po(o);s!==null&&s.tag===5&&s.type==="form"?hm(s):Bi.r(o)}var Go=typeof document>"u"?null:document;function Zy(o,s,u){var h=Go;if(h&&typeof s=="string"&&s){var v=jr(s);v='link[rel="'+o+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),Ky.has(v)||(Ky.add(v),o={rel:o,crossOrigin:u,href:s},h.querySelector(v)===null&&(s=h.createElement("link"),Kn(s,"link",o),Un(s),h.head.appendChild(s)))}}function wE(o){Bi.D(o),Zy("dns-prefetch",o,null)}function _E(o,s){Bi.C(o,s),Zy("preconnect",o,s)}function SE(o,s,u){Bi.L(o,s,u);var h=Go;if(h&&o&&s){var v='link[rel="preload"][as="'+jr(s)+'"]';s==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+jr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+jr(u.imageSizes)+'"]')):v+='[href="'+jr(o)+'"]';var b=v;switch(s){case"style":b=Wo(o);break;case"script":b=Xo(o)}Vr.has(b)||(o=m({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:o,as:s},u),Vr.set(b,o),h.querySelector(v)!==null||s==="style"&&h.querySelector(pl(b))||s==="script"&&h.querySelector(gl(b))||(s=h.createElement("link"),Kn(s,"link",o),Un(s),h.head.appendChild(s)))}}function CE(o,s){Bi.m(o,s);var u=Go;if(u&&o){var h=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+jr(h)+'"][href="'+jr(o)+'"]',b=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Xo(o)}if(!Vr.has(b)&&(o=m({rel:"modulepreload",href:o},s),Vr.set(b,o),u.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(gl(b)))return}h=u.createElement("link"),Kn(h,"link",o),Un(h),u.head.appendChild(h)}}}function EE(o,s,u){Bi.S(o,s,u);var h=Go;if(h&&o){var v=go(h).hoistableStyles,b=Wo(o);s=s||"default";var C=v.get(b);if(!C){var I={loading:0,preload:null};if(C=h.querySelector(pl(b)))I.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":s},u),(u=Vr.get(b))&&Nh(o,u);var F=C=h.createElement("link");Un(F),Kn(F,"link",o),F._p=new Promise(function(Q,ue){F.onload=Q,F.onerror=ue}),F.addEventListener("load",function(){I.loading|=1}),F.addEventListener("error",function(){I.loading|=2}),I.loading|=4,cu(C,s,h)}C={type:"stylesheet",instance:C,count:1,state:I},v.set(b,C)}}}function AE(o,s){Bi.X(o,s);var u=Go;if(u&&o){var h=go(u).hoistableScripts,v=Xo(o),b=h.get(v);b||(b=u.querySelector(gl(v)),b||(o=m({src:o,async:!0},s),(s=Vr.get(v))&&kh(o,s),b=u.createElement("script"),Un(b),Kn(b,"link",o),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function TE(o,s){Bi.M(o,s);var u=Go;if(u&&o){var h=go(u).hoistableScripts,v=Xo(o),b=h.get(v);b||(b=u.querySelector(gl(v)),b||(o=m({src:o,async:!0,type:"module"},s),(s=Vr.get(v))&&kh(o,s),b=u.createElement("script"),Un(b),Kn(b,"link",o),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function Qy(o,s,u,h){var v=(v=Me.current)?lu(v):null;if(!v)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=Wo(u.href),u=go(v).hoistableStyles,h=u.get(s),h||(h={type:"style",instance:null,count:0,state:null},u.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){o=Wo(u.href);var b=go(v).hoistableStyles,C=b.get(o);if(C||(v=v.ownerDocument||v,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(o,C),(b=v.querySelector(pl(o)))&&!b._p&&(C.instance=b,C.state.loading=5),Vr.has(o)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Vr.set(o,u),b||OE(v,o,u,C.state))),s&&h===null)throw Error(r(528,""));return C}if(s&&h!==null)throw Error(r(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xo(u),u=go(v).hoistableScripts,h=u.get(s),h||(h={type:"script",instance:null,count:0,state:null},u.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Wo(o){return'href="'+jr(o)+'"'}function pl(o){return'link[rel="stylesheet"]['+o+"]"}function Jy(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function OE(o,s,u,h){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=o.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),Kn(s,"link",u),Un(s),o.head.appendChild(s))}function Xo(o){return'[src="'+jr(o)+'"]'}function gl(o){return"script[async]"+o}function ev(o,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var h=o.querySelector('style[data-href~="'+jr(u.href)+'"]');if(h)return s.instance=h,Un(h),h;var v=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(o.ownerDocument||o).createElement("style"),Un(h),Kn(h,"style",v),cu(h,u.precedence,o),s.instance=h;case"stylesheet":v=Wo(u.href);var b=o.querySelector(pl(v));if(b)return s.state.loading|=4,s.instance=b,Un(b),b;h=Jy(u),(v=Vr.get(v))&&Nh(h,v),b=(o.ownerDocument||o).createElement("link"),Un(b);var C=b;return C._p=new Promise(function(I,F){C.onload=I,C.onerror=F}),Kn(b,"link",h),s.state.loading|=4,cu(b,u.precedence,o),s.instance=b;case"script":return b=Xo(u.src),(v=o.querySelector(gl(b)))?(s.instance=v,Un(v),v):(h=u,(v=Vr.get(b))&&(h=m({},u),kh(h,v)),o=o.ownerDocument||o,v=o.createElement("script"),Un(v),Kn(v,"link",h),o.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,cu(h,u.precedence,o));return s.instance}function cu(o,s,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,b=v,C=0;C<h.length;C++){var I=h[C];if(I.dataset.precedence===s)b=I;else if(b!==v)break}b?b.parentNode.insertBefore(o,b.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(o,s.firstChild))}function Nh(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function kh(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var uu=null;function tv(o,s,u){if(uu===null){var h=new Map,v=uu=new Map;v.set(u,h)}else v=uu,h=v.get(u),h||(h=new Map,v.set(u,h));if(h.has(o))return h;for(h.set(o,null),u=u.getElementsByTagName(o),v=0;v<u.length;v++){var b=u[v];if(!(b[Ns]||b[_t]||o==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var C=b.getAttribute(s)||"";C=o+C;var I=h.get(C);I?I.push(b):h.set(C,[b])}}return h}function nv(o,s,u){o=o.ownerDocument||o,o.head.insertBefore(u,s==="title"?o.querySelector("head > title"):null)}function RE(o,s,u){if(u===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function rv(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function IE(o,s,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=Wo(h.href),b=s.querySelector(pl(v));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=du.bind(o),s.then(o,o)),u.state.loading|=4,u.instance=b,Un(b);return}b=s.ownerDocument||s,h=Jy(h),(v=Vr.get(v))&&Nh(h,v),b=b.createElement("link"),Un(b);var C=b;C._p=new Promise(function(I,F){C.onload=I,C.onerror=F}),Kn(b,"link",h),u.instance=b}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(o.count++,u=du.bind(o),s.addEventListener("load",u),s.addEventListener("error",u))}}var Dh=0;function NE(o,s){return o.stylesheets&&o.count===0&&hu(o,o.stylesheets),0<o.count||0<o.imgCount?function(u){var h=setTimeout(function(){if(o.stylesheets&&hu(o,o.stylesheets),o.unsuspend){var b=o.unsuspend;o.unsuspend=null,b()}},6e4+s);0<o.imgBytes&&Dh===0&&(Dh=62500*dE());var v=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&hu(o,o.stylesheets),o.unsuspend)){var b=o.unsuspend;o.unsuspend=null,b()}},(o.imgBytes>Dh?50:800)+s);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function du(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hu(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var fu=null;function hu(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,fu=new Map,s.forEach(kE,o),fu=null,du.call(o))}function kE(o,s){if(!(s.state.loading&4)){var u=fu.get(o);if(u)var h=u.get(null);else{u=new Map,fu.set(o,u);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var C=v[b];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),h=C)}h&&u.set(null,h)}v=s.instance,C=v.getAttribute("data-precedence"),b=u.get(C)||h,b===h&&u.set(null,v),u.set(C,v),this.count++,h=du.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),b?b.parentNode.insertBefore(v,b.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),s.state.loading|=4}}var ml={$$typeof:T,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function DE(o,s,u,h,v,b,C,I,F){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=D(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=D(0),this.hiddenUpdates=D(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function iv(o,s,u,h,v,b,C,I,F,Q,ue,he){return o=new DE(o,s,u,C,F,Q,ue,he,I),s=1,b===!0&&(s|=24),b=Sr(3,null,null,s),o.current=b,b.stateNode=o,s=ff(),s.refCount++,o.pooledCache=s,s.refCount++,b.memoizedState={element:h,isDehydrated:u,cache:s},mf(b),o}function av(o){return o?(o=Eo,o):Eo}function ov(o,s,u,h,v,b){v=av(v),h.context===null?h.context=v:h.pendingContext=v,h=Ki(s),h.payload={element:u},b=b===void 0?null:b,b!==null&&(h.callback=b),u=Zi(o,h,s),u!==null&&(yr(u,o,s),Xs(u,o,s))}function sv(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<s?u:s}}function jh(o,s){sv(o,s),(o=o.alternate)&&sv(o,s)}function lv(o){if(o.tag===13||o.tag===31){var s=ka(o,67108864);s!==null&&yr(s,o,67108864),jh(o,67108864)}}function cv(o){if(o.tag===13||o.tag===31){var s=Or();s=lt(s);var u=ka(o,s);u!==null&&yr(u,o,s),jh(o,s)}}var pu=!0;function jE(o,s,u,h){var v=L.T;L.T=null;var b=te.p;try{te.p=2,Mh(o,s,u,h)}finally{te.p=b,L.T=v}}function ME(o,s,u,h){var v=L.T;L.T=null;var b=te.p;try{te.p=8,Mh(o,s,u,h)}finally{te.p=b,L.T=v}}function Mh(o,s,u,h){if(pu){var v=Ph(h);if(v===null)wh(o,s,h,gu,u),dv(o,h);else if(BE(v,o,s,u,h))h.stopPropagation();else if(dv(o,h),s&4&&-1<PE.indexOf(o)){for(;v!==null;){var b=po(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var C=Pt(b.pendingLanes);if(C!==0){var I=b;for(I.pendingLanes|=2,I.entangledLanes|=2;C;){var F=1<<31-be(C);I.entanglements[1]|=F,C&=~F}fi(b),(kt&6)===0&&(Zc=Re()+500,ul(0))}}break;case 31:case 13:I=ka(b,2),I!==null&&yr(I,b,2),Jc(),jh(b,2)}if(b=Ph(h),b===null&&wh(o,s,h,gu,u),b===v)break;v=b}v!==null&&h.stopPropagation()}else wh(o,s,h,null,u)}}function Ph(o){return o=Bd(o),Bh(o)}var gu=null;function Bh(o){if(gu=null,o=ho(o),o!==null){var s=a(o);if(s===null)o=null;else{var u=s.tag;if(u===13){if(o=l(s),o!==null)return o;o=null}else if(u===31){if(o=c(s),o!==null)return o;o=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return gu=o,null}function uv(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ke()){case Ue:return 2;case it:return 8;case Fe:case j:return 32;case U:return 268435456;default:return 32}default:return 32}}var Lh=!1,la=null,ca=null,ua=null,yl=new Map,vl=new Map,da=[],PE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dv(o,s){switch(o){case"focusin":case"focusout":la=null;break;case"dragenter":case"dragleave":ca=null;break;case"mouseover":case"mouseout":ua=null;break;case"pointerover":case"pointerout":yl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(s.pointerId)}}function xl(o,s,u,h,v,b){return o===null||o.nativeEvent!==b?(o={blockedOn:s,domEventName:u,eventSystemFlags:h,nativeEvent:b,targetContainers:[v]},s!==null&&(s=po(s),s!==null&&lv(s)),o):(o.eventSystemFlags|=h,s=o.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),o)}function BE(o,s,u,h,v){switch(s){case"focusin":return la=xl(la,o,s,u,h,v),!0;case"dragenter":return ca=xl(ca,o,s,u,h,v),!0;case"mouseover":return ua=xl(ua,o,s,u,h,v),!0;case"pointerover":var b=v.pointerId;return yl.set(b,xl(yl.get(b)||null,o,s,u,h,v)),!0;case"gotpointercapture":return b=v.pointerId,vl.set(b,xl(vl.get(b)||null,o,s,u,h,v)),!0}return!1}function fv(o){var s=ho(o.target);if(s!==null){var u=a(s);if(u!==null){if(s=u.tag,s===13){if(s=l(u),s!==null){o.blockedOn=s,et(o.priority,function(){cv(u)});return}}else if(s===31){if(s=c(u),s!==null){o.blockedOn=s,et(o.priority,function(){cv(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function mu(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var u=Ph(o.nativeEvent);if(u===null){u=o.nativeEvent;var h=new u.constructor(u.type,u);Pd=h,u.target.dispatchEvent(h),Pd=null}else return s=po(u),s!==null&&lv(s),o.blockedOn=u,!1;s.shift()}return!0}function hv(o,s,u){mu(o)&&u.delete(s)}function LE(){Lh=!1,la!==null&&mu(la)&&(la=null),ca!==null&&mu(ca)&&(ca=null),ua!==null&&mu(ua)&&(ua=null),yl.forEach(hv),vl.forEach(hv)}function yu(o,s){o.blockedOn===s&&(o.blockedOn=null,Lh||(Lh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,LE)))}var vu=null;function pv(o){vu!==o&&(vu=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){vu===o&&(vu=null);for(var s=0;s<o.length;s+=3){var u=o[s],h=o[s+1],v=o[s+2];if(typeof h!="function"){if(Bh(h||u)===null)continue;break}var b=po(u);b!==null&&(o.splice(s,3),s-=3,Pf(b,{pending:!0,data:v,method:u.method,action:h},h,v))}}))}function Yo(o){function s(F){return yu(F,o)}la!==null&&yu(la,o),ca!==null&&yu(ca,o),ua!==null&&yu(ua,o),yl.forEach(s),vl.forEach(s);for(var u=0;u<da.length;u++){var h=da[u];h.blockedOn===o&&(h.blockedOn=null)}for(;0<da.length&&(u=da[0],u.blockedOn===null);)fv(u),u.blockedOn===null&&da.shift();if(u=(o.ownerDocument||o).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var v=u[h],b=u[h+1],C=v[un]||null;if(typeof b=="function")C||pv(u);else if(C){var I=null;if(b&&b.hasAttribute("formAction")){if(v=b,C=b[un]||null)I=C.formAction;else if(Bh(v)!==null)continue}else I=C.action;typeof I=="function"?u[h+1]=I:(u.splice(h,3),h-=3),pv(u)}}}function gv(){function o(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(C){return v=C})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function Fh(o){this._internalRoot=o}xu.prototype.render=Fh.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(r(409));var u=s.current,h=Or();ov(u,h,o,s,null,null)},xu.prototype.unmount=Fh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;ov(o.current,2,null,o,null,null),Jc(),s[li]=null}};function xu(o){this._internalRoot=o}xu.prototype.unstable_scheduleHydration=function(o){if(o){var s=ln();o={blockedOn:null,target:o,priority:s};for(var u=0;u<da.length&&s!==0&&s<da[u].priority;u++);da.splice(u,0,o),u===0&&fv(o)}};var mv=e.version;if(mv!=="19.2.0")throw Error(r(527,mv,"19.2.0"));te.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=f(s),o=o!==null?g(o):null,o=o===null?null:o.stateNode,o};var FE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{ve=bu.inject(FE),ge=bu}catch{}}return wl.createRoot=function(o,s){if(!i(o))throw Error(r(299));var u=!1,h="",v=Sm,b=Cm,C=Em;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError)),s=iv(o,1,!1,null,null,u,h,null,v,b,C,gv),o[li]=s.current,bh(o),new Fh(s)},wl.hydrateRoot=function(o,s,u){if(!i(o))throw Error(r(299));var h=!1,v="",b=Sm,C=Cm,I=Em,F=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(I=u.onRecoverableError),u.formState!==void 0&&(F=u.formState)),s=iv(o,1,!0,s,u??null,h,v,F,b,C,I,gv),s.context=av(null),u=s.current,h=Or(),h=lt(h),v=Ki(h),v.callback=null,Zi(u,v,h),u=h,s.current.lanes=u,J(s,u),fi(s),o[li]=s.current,bh(o),new xu(s)},wl.version="19.2.0",wl}var Av;function XE(){if(Av)return Vh.exports;Av=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vh.exports=WE(),Vh.exports}var YE=XE();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Tv="popstate";function KE(n={}){function e(i,a){let{pathname:l="/",search:c="",hash:d=""}=co(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),R0("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let l=i.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let d=i.location.href,f=d.indexOf("#");c=f===-1?d:d.slice(0,f)}return c+"#"+(typeof a=="string"?a:zl(a))}function r(i,a){si(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return QE(e,t,r,n)}function gn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function si(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZE(){return Math.random().toString(36).substring(2,10)}function Ov(n,e){return{usr:n.state,key:n.key,idx:e}}function R0(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?co(e):e,state:t,key:e&&e.key||r||ZE()}}function zl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function co(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function QE(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,c="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function m(){c="POP";let A=g(),E=A==null?null:A-f;f=A,d&&d({action:c,location:_.location,delta:E})}function y(A,E){c="PUSH";let S=R0(_.location,A,E);t&&t(S,A),f=g()+1;let T=Ov(S,f),R=_.createHref(S);try{l.pushState(T,"",R)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(R)}a&&d&&d({action:c,location:_.location,delta:1})}function x(A,E){c="REPLACE";let S=R0(_.location,A,E);t&&t(S,A),f=g();let T=Ov(S,f),R=_.createHref(S);l.replaceState(T,"",R),a&&d&&d({action:c,location:_.location,delta:0})}function w(A){return JE(A)}let _={get action(){return c},get location(){return n(i,l)},listen(A){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Tv,m),d=A,()=>{i.removeEventListener(Tv,m),d=null}},createHref(A){return e(i,A)},createURL:w,encodeLocation(A){let E=w(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:x,go(A){return l.go(A)}};return _}function JE(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),gn(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:zl(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function fb(n,e,t="/"){return e3(n,e,t,!1)}function e3(n,e,t,r){let i=typeof e=="string"?co(e):e,a=Ui(i.pathname||"/",t);if(a==null)return null;let l=hb(n);t3(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let f=f3(a);c=u3(l[d],f,r)}return c}function hb(n,e=[],t=[],r="",i=!1){let a=(l,c,d=i,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;gn(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let m=Fi([r,g.relativePath]),y=t.concat(g);l.children&&l.children.length>0&&(gn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),hb(l.children,e,y,m,d)),!(l.path==null&&!l.index)&&e.push({path:m,score:l3(m,l.index),routesMeta:y})};return n.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))a(l,c);else for(let d of pb(l.path))a(l,c,!0,d)}),e}function pb(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=pb(r.join("/")),c=[];return c.push(...l.map(d=>d===""?a:[a,d].join("/"))),i&&c.push(...l),c.map(d=>n.startsWith("/")&&d===""?"/":d)}function t3(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:c3(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var n3=/^:[\w-]+$/,r3=3,i3=2,a3=1,o3=10,s3=-2,Rv=n=>n==="*";function l3(n,e){let t=n.split("/"),r=t.length;return t.some(Rv)&&(r+=s3),e&&(r+=i3),t.filter(i=>!Rv(i)).reduce((i,a)=>i+(n3.test(a)?r3:a===""?a3:o3),r)}function c3(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function u3(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",l=[];for(let c=0;c<r.length;++c){let d=r[c],f=c===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",m=Ju({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),y=d.route;if(!m&&f&&t&&!r[r.length-1].route.index&&(m=Ju({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:Fi([a,m.pathname]),pathnameBase:m3(Fi([a,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(a=Fi([a,m.pathnameBase]))}return l}function Ju(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=d3(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:m},y)=>{if(g==="*"){let w=c[y]||"";l=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const x=c[y];return m&&!x?f[g]=void 0:f[g]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:n}}function d3(n,e=!1,t=!0){si(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function f3(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return si(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ui(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function h3(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?co(n):n;return{pathname:t?t.startsWith("/")?t:p3(t,e):e,search:y3(r),hash:v3(i)}}function p3(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Gh(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function g3(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gb(n){let e=g3(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function mb(n,e,t,r=!1){let i;typeof n=="string"?i=co(n):(i={...n},gn(!i.pathname||!i.pathname.includes("?"),Gh("?","pathname","search",i)),gn(!i.pathname||!i.pathname.includes("#"),Gh("#","pathname","hash",i)),gn(!i.search||!i.search.includes("#"),Gh("#","search","hash",i)));let a=n===""||i.pathname==="",l=a?"/":i.pathname,c;if(l==null)c=t;else{let m=e.length-1;if(!r&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}c=m>=0?e[m]:"/"}let d=h3(i,c),f=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Fi=n=>n.join("/").replace(/\/\/+/g,"/"),m3=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),y3=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,v3=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function x3(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var yb=["POST","PUT","PATCH","DELETE"];new Set(yb);var b3=["GET",...yb];new Set(b3);var _s=O.createContext(null);_s.displayName="DataRouter";var vd=O.createContext(null);vd.displayName="DataRouterState";O.createContext(!1);var vb=O.createContext({isTransitioning:!1});vb.displayName="ViewTransition";var w3=O.createContext(new Map);w3.displayName="Fetchers";var _3=O.createContext(null);_3.displayName="Await";var xi=O.createContext(null);xi.displayName="Navigation";var Zl=O.createContext(null);Zl.displayName="Location";var Hi=O.createContext({outlet:null,matches:[],isDataRoute:!1});Hi.displayName="Route";var Cp=O.createContext(null);Cp.displayName="RouteError";function S3(n,{relative:e}={}){gn(Ql(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=O.useContext(xi),{hash:i,pathname:a,search:l}=Jl(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:Fi([t,a])),r.createHref({pathname:c,search:l,hash:i})}function Ql(){return O.useContext(Zl)!=null}function Ea(){return gn(Ql(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Zl).location}var xb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bb(n){O.useContext(xi).static||O.useLayoutEffect(n)}function xd(){let{isDataRoute:n}=O.useContext(Hi);return n?P3():C3()}function C3(){gn(Ql(),"useNavigate() may be used only in the context of a <Router> component.");let n=O.useContext(_s),{basename:e,navigator:t}=O.useContext(xi),{matches:r}=O.useContext(Hi),{pathname:i}=Ea(),a=JSON.stringify(gb(r)),l=O.useRef(!1);return bb(()=>{l.current=!0}),O.useCallback((d,f={})=>{if(si(l.current,xb),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=mb(d,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Fi([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,a,i,n])}O.createContext(null);function Jl(n,{relative:e}={}){let{matches:t}=O.useContext(Hi),{pathname:r}=Ea(),i=JSON.stringify(gb(t));return O.useMemo(()=>mb(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function E3(n,e){return wb(n,e)}function wb(n,e,t,r,i){gn(Ql(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=O.useContext(xi),{matches:l}=O.useContext(Hi),c=l[l.length-1],d=c?c.params:{},f=c?c.pathname:"/",g=c?c.pathnameBase:"/",m=c&&c.route;{let S=m&&m.path||"";_b(f,!m||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let y=Ea(),x;if(e){let S=typeof e=="string"?co(e):e;gn(g==="/"||S.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${S.pathname}" was given in the \`location\` prop.`),x=S}else x=y;let w=x.pathname||"/",_=w;if(g!=="/"){let S=g.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(S.length).join("/")}let A=fb(n,{pathname:_});si(m||A!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),si(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=I3(A&&A.map(S=>Object.assign({},S,{params:Object.assign({},d,S.params),pathname:Fi([g,a.encodeLocation?a.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?g:Fi([g,a.encodeLocation?a.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),l,t,r,i);return e&&E?O.createElement(Zl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},E):E}function A3(){let n=M3(),e=x3(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:a},"ErrorBoundary")," or"," ",O.createElement("code",{style:a},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:i},t):null,l)}var T3=O.createElement(A3,null),O3=class extends O.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?O.createElement(Hi.Provider,{value:this.props.routeContext},O.createElement(Cp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function R3({routeContext:n,match:e,children:t}){let r=O.useContext(_s);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(Hi.Provider,{value:n},t)}function I3(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t?.errors;if(l!=null){let f=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);gn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,d=-1;if(t)for(let f=0;f<a.length;f++){let g=a[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:m,errors:y}=t,x=g.route.loader&&!m.hasOwnProperty(g.route.id)&&(!y||y[g.route.id]===void 0);if(g.route.lazy||x){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,g,m)=>{let y,x=!1,w=null,_=null;t&&(y=l&&g.route.id?l[g.route.id]:void 0,w=g.route.errorElement||T3,c&&(d<0&&m===0?(_b("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,_=null):d===m&&(x=!0,_=g.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,m+1)),E=()=>{let S;return y?S=w:x?S=_:g.route.Component?S=O.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=f,O.createElement(R3,{match:g,routeContext:{outlet:f,matches:A,isDataRoute:t!=null},children:S})};return t&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?O.createElement(O3,{location:t.location,revalidation:t.revalidation,component:w,error:y,children:E(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:r}):E()},null)}function Ep(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N3(n){let e=O.useContext(_s);return gn(e,Ep(n)),e}function k3(n){let e=O.useContext(vd);return gn(e,Ep(n)),e}function D3(n){let e=O.useContext(Hi);return gn(e,Ep(n)),e}function Ap(n){let e=D3(n),t=e.matches[e.matches.length-1];return gn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function j3(){return Ap("useRouteId")}function M3(){let n=O.useContext(Cp),e=k3("useRouteError"),t=Ap("useRouteError");return n!==void 0?n:e.errors?.[t]}function P3(){let{router:n}=N3("useNavigate"),e=Ap("useNavigate"),t=O.useRef(!1);return bb(()=>{t.current=!0}),O.useCallback(async(i,a={})=>{si(t.current,xb),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var Iv={};function _b(n,e,t){!e&&!Iv[n]&&(Iv[n]=!0,si(!1,t))}O.memo(B3);function B3({routes:n,future:e,state:t,unstable_onError:r}){return wb(n,void 0,t,r,e)}function hi(n){gn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function L3({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){gn(!Ql(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof t=="string"&&(t=co(t));let{pathname:d="/",search:f="",hash:g="",state:m=null,key:y="default"}=t,x=O.useMemo(()=>{let w=Ui(d,l);return w==null?null:{location:{pathname:w,search:f,hash:g,state:m,key:y},navigationType:r}},[l,d,f,g,m,y,r]);return si(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:O.createElement(xi.Provider,{value:c},O.createElement(Zl.Provider,{children:e,value:x}))}function F3({children:n,location:e}){return E3(I0(n),e)}function I0(n,e=[]){let t=[];return O.Children.forEach(n,(r,i)=>{if(!O.isValidElement(r))return;let a=[...e,i];if(r.type===O.Fragment){t.push.apply(t,I0(r.props.children,a));return}gn(r.type===hi,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=I0(r.props.children,a)),t.push(l)}),t}var Hu="get",$u="application/x-www-form-urlencoded";function bd(n){return n!=null&&typeof n.tagName=="string"}function U3(n){return bd(n)&&n.tagName.toLowerCase()==="button"}function z3(n){return bd(n)&&n.tagName.toLowerCase()==="form"}function V3(n){return bd(n)&&n.tagName.toLowerCase()==="input"}function H3(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function $3(n,e){return n.button===0&&(!e||e==="_self")&&!H3(n)}var wu=null;function q3(){if(wu===null)try{new FormData(document.createElement("form"),0),wu=!1}catch{wu=!0}return wu}var G3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wh(n){return n!=null&&!G3.has(n)?(si(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$u}"`),null):n}function W3(n,e){let t,r,i,a,l;if(z3(n)){let c=n.getAttribute("action");r=c?Ui(c,e):null,t=n.getAttribute("method")||Hu,i=Wh(n.getAttribute("enctype"))||$u,a=new FormData(n)}else if(U3(n)||V3(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||c.getAttribute("action");if(r=d?Ui(d,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Hu,i=Wh(n.getAttribute("formenctype"))||Wh(c.getAttribute("enctype"))||$u,a=new FormData(c,n),!q3()){let{name:f,type:g,value:m}=n;if(g==="image"){let y=f?`${f}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else f&&a.append(f,m)}}else{if(bd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Hu,r=null,i=$u,l=n}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function X3(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ui(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function Y3(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function K3(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Z3(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await Y3(a,t);return l.links?l.links():[]}return[]}));return tA(r.flat(1).filter(K3).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Nv(n,e,t,r,i,a){let l=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,c=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,f)=>l(d,f)||c(d,f)):a==="data"?e.filter((d,f)=>{let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||c(d,f))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Q3(n,e,{includeHydrateFallback:t}={}){return J3(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function J3(n){return[...new Set(n)]}function eA(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function tA(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(eA(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function Sb(){let n=O.useContext(_s);return Tp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function nA(){let n=O.useContext(vd);return Tp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Op=O.createContext(void 0);Op.displayName="FrameworkContext";function Cb(){let n=O.useContext(Op);return Tp(n,"You must render this element inside a <HydratedRouter> element"),n}function rA(n,e){let t=O.useContext(Op),[r,i]=O.useState(!1),[a,l]=O.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:m}=e,y=O.useRef(null);O.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let _=E=>{E.forEach(S=>{l(S.isIntersecting)})},A=new IntersectionObserver(_,{threshold:.5});return y.current&&A.observe(y.current),()=>{A.disconnect()}}},[n]),O.useEffect(()=>{if(r){let _=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(_)}}},[r]);let x=()=>{i(!0)},w=()=>{i(!1),l(!1)};return t?n!=="intent"?[a,y,{}]:[a,y,{onFocus:_l(c,x),onBlur:_l(d,w),onMouseEnter:_l(f,x),onMouseLeave:_l(g,w),onTouchStart:_l(m,x)}]:[!1,y,{}]}function _l(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function iA({page:n,...e}){let{router:t}=Sb(),r=O.useMemo(()=>fb(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?O.createElement(oA,{page:n,matches:r,...e}):null}function aA(n){let{manifest:e,routeModules:t}=Cb(),[r,i]=O.useState([]);return O.useEffect(()=>{let a=!1;return Z3(n,e,t).then(l=>{a||i(l)}),()=>{a=!0}},[n,e,t]),r}function oA({page:n,matches:e,...t}){let r=Ea(),{manifest:i,routeModules:a}=Cb(),{basename:l}=Sb(),{loaderData:c,matches:d}=nA(),f=O.useMemo(()=>Nv(n,e,d,i,r,"data"),[n,e,d,i,r]),g=O.useMemo(()=>Nv(n,e,d,i,r,"assets"),[n,e,d,i,r]),m=O.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let w=new Set,_=!1;if(e.forEach(E=>{let S=i.routes[E.route.id];!S||!S.hasLoader||(!f.some(T=>T.route.id===E.route.id)&&E.route.id in c&&a[E.route.id]?.shouldRevalidate||S.hasClientLoader?_=!0:w.add(E.route.id))}),w.size===0)return[];let A=X3(n,l,"data");return _&&w.size>0&&A.searchParams.set("_routes",e.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[A.pathname+A.search]},[l,c,r,i,f,e,n,a]),y=O.useMemo(()=>Q3(g,i),[g,i]),x=aA(g);return O.createElement(O.Fragment,null,m.map(w=>O.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),y.map(w=>O.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),x.map(({key:w,link:_})=>O.createElement("link",{key:w,nonce:t.nonce,..._})))}function sA(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Eb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Eb&&(window.__reactRouterVersion="7.9.4")}catch{}function lA({basename:n,children:e,window:t}){let r=O.useRef();r.current==null&&(r.current=KE({window:t,v5Compat:!0}));let i=r.current,[a,l]=O.useState({action:i.action,location:i.location}),c=O.useCallback(d=>{O.startTransition(()=>l(d))},[l]);return O.useLayoutEffect(()=>i.listen(c),[i,c]),O.createElement(L3,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var Ab=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tb=O.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:c,target:d,to:f,preventScrollReset:g,viewTransition:m,...y},x){let{basename:w}=O.useContext(xi),_=typeof f=="string"&&Ab.test(f),A,E=!1;if(typeof f=="string"&&_&&(A=f,Eb))try{let ie=new URL(window.location.href),fe=f.startsWith("//")?new URL(ie.protocol+f):new URL(f),xe=Ui(fe.pathname,w);fe.origin===ie.origin&&xe!=null?f=xe+fe.search+fe.hash:E=!0}catch{si(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=S3(f,{relative:i}),[T,R,N]=rA(r,y),k=dA(f,{replace:l,state:c,target:d,preventScrollReset:g,relative:i,viewTransition:m});function M(ie){e&&e(ie),ie.defaultPrevented||k(ie)}let V=O.createElement("a",{...y,...N,href:A||S,onClick:E||a?e:M,ref:sA(x,R),target:d,"data-discover":!_&&t==="render"?"true":void 0});return T&&!_?O.createElement(O.Fragment,null,V,O.createElement(iA,{page:S})):V});Tb.displayName="Link";var ei=O.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:c,children:d,...f},g){let m=Jl(l,{relative:f.relative}),y=Ea(),x=O.useContext(vd),{navigator:w,basename:_}=O.useContext(xi),A=x!=null&&mA(m)&&c===!0,E=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,S=y.pathname,T=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(S=S.toLowerCase(),T=T?T.toLowerCase():null,E=E.toLowerCase()),T&&_&&(T=Ui(T,_)||T);const R=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let N=S===E||!i&&S.startsWith(E)&&S.charAt(R)==="/",k=T!=null&&(T===E||!i&&T.startsWith(E)&&T.charAt(E.length)==="/"),M={isActive:N,isPending:k,isTransitioning:A},V=N?e:void 0,ie;typeof r=="function"?ie=r(M):ie=[r,N?"active":null,k?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let fe=typeof a=="function"?a(M):a;return O.createElement(Tb,{...f,"aria-current":V,className:ie,ref:g,style:fe,to:l,viewTransition:c},typeof d=="function"?d(M):d)});ei.displayName="NavLink";var cA=O.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:l=Hu,action:c,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:m,...y},x)=>{let w=pA(),_=gA(c,{relative:f}),A=l.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&Ab.test(c),S=T=>{if(d&&d(T),T.defaultPrevented)return;T.preventDefault();let R=T.nativeEvent.submitter,N=R?.getAttribute("formmethod")||l;w(R||T.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:i,state:a,relative:f,preventScrollReset:g,viewTransition:m})};return O.createElement("form",{ref:x,method:A,action:_,onSubmit:r?d:S,...y,"data-discover":!E&&n==="render"?"true":void 0})});cA.displayName="Form";function uA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ob(n){let e=O.useContext(_s);return gn(e,uA(n)),e}function dA(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:l}={}){let c=xd(),d=Ea(),f=Jl(n,{relative:a});return O.useCallback(g=>{if($3(g,e)){g.preventDefault();let m=t!==void 0?t:zl(d)===zl(f);c(n,{replace:m,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,f,t,r,e,n,i,a,l])}var fA=0,hA=()=>`__${String(++fA)}__`;function pA(){let{router:n}=Ob("useSubmit"),{basename:e}=O.useContext(xi),t=j3();return O.useCallback(async(r,i={})=>{let{action:a,method:l,encType:c,formData:d,body:f}=W3(r,e);if(i.navigate===!1){let g=i.fetcherKey||hA();await n.fetch(g,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:d,body:f,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:d,body:f,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function gA(n,{relative:e}={}){let{basename:t}=O.useContext(xi),r=O.useContext(Hi);gn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Jl(n||".",{relative:e})},l=Ea();if(n==null){a.search=l.search;let c=new URLSearchParams(a.search),d=c.getAll("index");if(d.some(g=>g==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let g=c.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Fi([t,a.pathname])),zl(a)}function mA(n,{relative:e}={}){let t=O.useContext(vb);gn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ob("useViewTransitionState"),i=Jl(n,{relative:e});if(!t.isTransitioning)return!1;let a=Ui(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Ui(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ju(i.pathname,l)!=null||Ju(i.pathname,a)!=null}var kv=db(),N0=function(n,e){return N0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},N0(n,e)};function Rb(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");N0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ed=function(){return ed=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ed.apply(this,arguments)};function Ss(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Ib(n,e,t,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(e,t,a):l(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function Nb(n,e){return function(t,r){e(t,r,n)}}function kb(n,e,t,r,i,a){function l(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var c=r.kind,d=c==="getter"?"get":c==="setter"?"set":"value",f=!e&&n?r.static?n:n.prototype:null,g=e||(f?Object.getOwnPropertyDescriptor(f,r.name):{}),m,y=!1,x=t.length-1;x>=0;x--){var w={};for(var _ in r)w[_]=_==="access"?{}:r[_];for(var _ in r.access)w.access[_]=r.access[_];w.addInitializer=function(E){if(y)throw new TypeError("Cannot add initializers after decoration has completed");a.push(l(E||null))};var A=(0,t[x])(c==="accessor"?{get:g.get,set:g.set}:g[d],w);if(c==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(m=l(A.get))&&(g.get=m),(m=l(A.set))&&(g.set=m),(m=l(A.init))&&i.unshift(m)}else(m=l(A))&&(c==="field"?i.unshift(m):g[d]=m)}f&&Object.defineProperty(f,r.name,g),y=!0}function Db(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function jb(n){return typeof n=="symbol"?n:"".concat(n)}function Mb(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Pb(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Xe(n,e,t,r){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{f(r.next(g))}catch(m){l(m)}}function d(g){try{f(r.throw(g))}catch(m){l(m)}}function f(g){g.done?a(g.value):i(g.value).then(c,d)}f((r=r.apply(n,e||[])).next())})}function Bb(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=c(0),l.throw=c(1),l.return=c(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(g){return d([f,g])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(t=0)),t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(g){f=[6,g],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var wd=Object.create?(function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}):(function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]});function Lb(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&wd(e,n,t)}function td(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rp(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){l={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return a}function Fb(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Rp(arguments[e]));return n}function Ub(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],l=0,c=a.length;l<c;l++,i++)r[i]=a[l];return r}function zb(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function ys(n){return this instanceof ys?(this.v=n,this):new ys(n)}function Vb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(x){return function(w){return Promise.resolve(w).then(x,m)}}function c(x,w){r[x]&&(i[x]=function(_){return new Promise(function(A,E){a.push([x,_,A,E])>1||d(x,_)})},w&&(i[x]=w(i[x])))}function d(x,w){try{f(r[x](w))}catch(_){y(a[0][3],_)}}function f(x){x.value instanceof ys?Promise.resolve(x.value.v).then(g,m):y(a[0][2],x)}function g(x){d("next",x)}function m(x){d("throw",x)}function y(x,w){x(w),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Hb(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=n[i]?function(l){return(t=!t)?{value:ys(n[i](l)),done:!1}:a?a(l):l}:a}}function $b(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof td=="function"?td(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(l){return new Promise(function(c,d){l=n[a](l),i(c,d,l.done,l.value)})}}function i(a,l,c,d){Promise.resolve(d).then(function(f){a({value:f,done:c})},l)}}function qb(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var yA=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},k0=function(n){return k0=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},k0(n)};function Gb(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=k0(n),r=0;r<t.length;r++)t[r]!=="default"&&wd(e,n,t[r]);return yA(e,n),e}function Wb(n){return n&&n.__esModule?n:{default:n}}function Xb(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function Yb(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function Kb(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function Zb(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var vA=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function Qb(n){function e(a){n.error=n.hasError?new vA(a,n.error,"An error was suppressed during disposal."):a,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var a=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(a).then(i,function(l){return e(l),i()})}else r|=1}catch(l){e(l)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function Jb(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,a,l){return r?e?".jsx":".js":i&&(!a||!l)?t:i+a+"."+l.toLowerCase()+"js"}):n}const xA={__extends:Rb,__assign:ed,__rest:Ss,__decorate:Ib,__param:Nb,__esDecorate:kb,__runInitializers:Db,__propKey:jb,__setFunctionName:Mb,__metadata:Pb,__awaiter:Xe,__generator:Bb,__createBinding:wd,__exportStar:Lb,__values:td,__read:Rp,__spread:Fb,__spreadArrays:Ub,__spreadArray:zb,__await:ys,__asyncGenerator:Vb,__asyncDelegator:Hb,__asyncValues:$b,__makeTemplateObject:qb,__importStar:Gb,__importDefault:Wb,__classPrivateFieldGet:Xb,__classPrivateFieldSet:Yb,__classPrivateFieldIn:Kb,__addDisposableResource:Zb,__disposeResources:Qb,__rewriteRelativeImportExtension:Jb},bA=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Zb,get __assign(){return ed},__asyncDelegator:Hb,__asyncGenerator:Vb,__asyncValues:$b,__await:ys,__awaiter:Xe,__classPrivateFieldGet:Xb,__classPrivateFieldIn:Kb,__classPrivateFieldSet:Yb,__createBinding:wd,__decorate:Ib,__disposeResources:Qb,__esDecorate:kb,__exportStar:Lb,__extends:Rb,__generator:Bb,__importDefault:Wb,__importStar:Gb,__makeTemplateObject:qb,__metadata:Pb,__param:Nb,__propKey:jb,__read:Rp,__rest:Ss,__rewriteRelativeImportExtension:Jb,__runInitializers:Db,__setFunctionName:Mb,__spread:Fb,__spreadArray:zb,__spreadArrays:Ub,__values:td,default:xA},Symbol.toStringTag,{value:"Module"})),wA="modulepreload",_A=function(n){return"/IARE-Canteen-Web/"+n},Dv={},Cs=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var l=f;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");i=f(t.map(g=>{if(g=_A(g),g in Dv)return;Dv[g]=!0;const m=g.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":wA,m||(x.as="script"),x.crossOrigin="",x.href=g,d&&x.setAttribute("nonce",d),document.head.appendChild(x),m)return new Promise((w,_)=>{x.addEventListener("load",w),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},SA=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Cs(async()=>{const{default:r}=await Promise.resolve().then(()=>uo);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Ip extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class jv extends Ip{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Mv extends Ip{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Pv extends Ip{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var D0;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(D0||(D0={}));class CA{constructor(e,{headers:t={},customFetch:r,region:i=D0.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=SA(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Xe(this,arguments,void 0,function*(t,r={}){var i;try{const{headers:a,method:l,body:c,signal:d}=r;let f={},{region:g}=r;g||(g=this.region);const m=new URL(`${this.url}/${t}`);g&&g!=="any"&&(f["x-region"]=g,m.searchParams.set("forceFunctionRegion",g));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(f["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(f["Content-Type"]="application/json",y=JSON.stringify(c)):y=c;const x=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:y,signal:d}).catch(E=>{throw E.name==="AbortError"?E:new jv(E)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new Mv(x);if(!x.ok)throw new Pv(x);let _=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),A;return _==="application/json"?A=yield x.json():_==="application/octet-stream"||_==="application/pdf"?A=yield x.blob():_==="text/event-stream"?A=x:_==="multipart/form-data"?A=yield x.formData():A=yield x.text(),{data:A,error:null,response:x}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new jv(a)}:{data:null,error:a,response:a instanceof Pv||a instanceof Mv?a.context:void 0}}})}}var nr={};const Es=cb(bA);var _u={},Su={},Cu={},Eu={},Au={},EA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vs=EA();const AA=vs.fetch,ew=vs.fetch.bind(vs),tw=vs.Headers,TA=vs.Request,OA=vs.Response,uo=Object.freeze(Object.defineProperty({__proto__:null,Headers:tw,Request:TA,Response:OA,default:ew,fetch:AA},Symbol.toStringTag,{value:"Module"})),RA=cb(uo);var Tu={},Bv;function nw(){if(Bv)return Tu;Bv=1,Object.defineProperty(Tu,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Tu.default=n,Tu}var Lv;function rw(){if(Lv)return Au;Lv=1,Object.defineProperty(Au,"__esModule",{value:!0});const n=Es,e=n.__importDefault(RA),t=n.__importDefault(nw());class r{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,m,y,x;let w=null,_=null,A=null,E=f.status,S=f.statusText;if(f.ok){if(this.method!=="HEAD"){const k=await f.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?_=k:_=JSON.parse(k))}const R=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),N=(y=f.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");R&&N&&N.length>1&&(A=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(w={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,A=null,E=406,S="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const R=await f.text();try{w=JSON.parse(R),Array.isArray(w)&&f.status===404&&(_=[],w=null,E=200,S="OK")}catch{f.status===404&&R===""?(E=204,S="No Content"):w={message:R}}if(w&&this.isMaybeSingle&&(!((x=w?.details)===null||x===void 0)&&x.includes("0 rows"))&&(w=null,E=200,S="OK"),w&&this.shouldThrowOnError)throw new t.default(w)}return{error:w,data:_,count:A,status:E,statusText:S}});return this.shouldThrowOnError||(d=d.catch(f=>{var g,m,y;return{error:{message:`${(g=f?.name)!==null&&g!==void 0?g:"FetchError"}: ${f?.message}`,details:`${(m=f?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(y=f?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return Au.default=r,Au}var Fv;function iw(){if(Fv)return Eu;Fv=1,Object.defineProperty(Eu,"__esModule",{value:!0});const e=Es.__importDefault(rw());class t extends e.default{select(i){let a=!1;const l=(i??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:l,foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${i}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,a,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(f,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:l=!1,buffers:c=!1,wal:d=!1,format:f="text"}={}){var g;const m=[i?"analyze":null,a?"verbose":null,l?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${y}"; options=${m};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Eu.default=t,Eu}var Uv;function Np(){if(Uv)return Cu;Uv=1,Object.defineProperty(Cu,"__esModule",{value:!0});const e=Es.__importDefault(iw());class t extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const l=Array.from(new Set(a)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:l,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${d}fts${f}.${a}`),this}match(i){return Object.entries(i).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(i,a,l){return this.url.searchParams.append(i,`not.${a}.${l}`),this}or(i,{foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,a,l){return this.url.searchParams.append(i,`${a}.${l}`),this}}return Cu.default=t,Cu}var zv;function aw(){if(zv)return Su;zv=1,Object.defineProperty(Su,"__esModule",{value:!0});const e=Es.__importDefault(Np());class t{constructor(i,{headers:a={},schema:l,fetch:c}){this.url=i,this.headers=new Headers(a),this.schema=l,this.fetch=c}select(i,a){const{head:l=!1,count:c}=a??{},d=l?"HEAD":"GET";let f=!1;const g=(i??"*").split("").map(m=>/\s/.test(m)&&!f?"":(m==='"'&&(f=!f),m)).join("");return this.url.searchParams.set("select",g),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:l=!0}={}){var c;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(f.length>0){const g=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:l=!1,count:c,defaultToNull:d=!0}={}){var f;const g="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(m.length>0){const y=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:a}={}){var l;const c="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var a;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Su.default=t,Su}var Vv;function IA(){if(Vv)return _u;Vv=1,Object.defineProperty(_u,"__esModule",{value:!0});const n=Es,e=n.__importDefault(aw()),t=n.__importDefault(Np());class r{constructor(a,{headers:l={},schema:c,fetch:d}={}){this.url=a,this.headers=new Headers(l),this.schemaName=c,this.fetch=d}from(a){const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:c=!1,get:d=!1,count:f}={}){var g;let m;const y=new URL(`${this.url}/rpc/${a}`);let x;c||d?(m=c?"HEAD":"GET",Object.entries(l).filter(([_,A])=>A!==void 0).map(([_,A])=>[_,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([_,A])=>{y.searchParams.append(_,A)})):(m="POST",x=l);const w=new Headers(this.headers);return f&&w.set("Prefer",`count=${f}`),new t.default({method:m,url:y,headers:w,schema:this.schemaName,body:x,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return _u.default=r,_u}var Hv;function NA(){if(Hv)return nr;Hv=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.PostgrestError=nr.PostgrestBuilder=nr.PostgrestTransformBuilder=nr.PostgrestFilterBuilder=nr.PostgrestQueryBuilder=nr.PostgrestClient=void 0;const n=Es,e=n.__importDefault(IA());nr.PostgrestClient=e.default;const t=n.__importDefault(aw());nr.PostgrestQueryBuilder=t.default;const r=n.__importDefault(Np());nr.PostgrestFilterBuilder=r.default;const i=n.__importDefault(iw());nr.PostgrestTransformBuilder=i.default;const a=n.__importDefault(rw());nr.PostgrestBuilder=a.default;const l=n.__importDefault(nw());return nr.PostgrestError=l.default,nr.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:l.default},nr}var kA=NA();const DA=lb(kA),{PostgrestClient:jA,PostgrestQueryBuilder:u9,PostgrestFilterBuilder:d9,PostgrestTransformBuilder:f9,PostgrestBuilder:h9,PostgrestError:p9}=DA;class MA{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const PA="2.76.0",BA=`realtime-js/${PA}`,LA="1.0.0",j0=1e4,FA=1e3,UA=100;var Dl;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Dl||(Dl={}));var kn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(kn||(kn={}));var ii;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ii||(ii={}));var M0;(function(n){n.websocket="websocket"})(M0||(M0={}));var Ja;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ja||(Ja={}));class zA{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),a=t.getUint8(2);let l=this.HEADER_LENGTH+2;const c=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+a));l=l+a;const f=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:d,payload:f}}}class ow{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Yt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Yt||(Yt={}));const $v=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=VA(l,n,e,i),a),{}):{}},VA=(n,e,t,r)=>{const i=e.find(c=>c.name===n),a=i?.type,l=t[n];return a&&!r.includes(a)?sw(a,l):P0(l)},sw=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return GA(e,t)}switch(n){case Yt.bool:return HA(e);case Yt.float4:case Yt.float8:case Yt.int2:case Yt.int4:case Yt.int8:case Yt.numeric:case Yt.oid:return $A(e);case Yt.json:case Yt.jsonb:return qA(e);case Yt.timestamp:return WA(e);case Yt.abstime:case Yt.date:case Yt.daterange:case Yt.int4range:case Yt.int8range:case Yt.money:case Yt.reltime:case Yt.text:case Yt.time:case Yt.timestamptz:case Yt.timetz:case Yt.tsrange:case Yt.tstzrange:return P0(e);default:return P0(e)}},P0=n=>n,HA=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},$A=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},qA=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},GA=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let a;const l=n.slice(1,t);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(c=>sw(e,c))}return n},WA=n=>typeof n=="string"?n.replace(" ","T"):n,lw=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Xh{constructor(e,t,r={},i=j0){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var qv;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(qv||(qv={}));class jl{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jl.syncState(this.state,i,a,l),this.pendingDiffs.forEach(d=>{this.state=jl.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=jl.syncDiff(this.state,i,a,l),c())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const a=this.cloneDeep(e),l=this.transformState(t),c={},d={};return this.map(a,(f,g)=>{l[f]||(d[f]=g)}),this.map(l,(f,g)=>{const m=a[f];if(m){const y=g.map(A=>A.presence_ref),x=m.map(A=>A.presence_ref),w=g.filter(A=>x.indexOf(A.presence_ref)<0),_=m.filter(A=>y.indexOf(A.presence_ref)<0);w.length>0&&(c[f]=w),_.length>0&&(d[f]=_)}else c[f]=g}),this.syncDiff(a,{joins:c,leaves:d},r,i)}static syncDiff(e,t,r,i){const{joins:a,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(c,d)=>{var f;const g=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(d),g.length>0){const m=e[c].map(x=>x.presence_ref),y=g.filter(x=>m.indexOf(x.presence_ref)<0);e[c].unshift(...y)}r(c,g,d)}),this.map(l,(c,d)=>{let f=e[c];if(!f)return;const g=d.map(m=>m.presence_ref);f=f.filter(m=>g.indexOf(m.presence_ref)<0),e[c]=f,i(c,f,d),f.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Gv;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Gv||(Gv={}));var Ml;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Ml||(Ml={}));var Li;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Li||(Li={}));class kp{constructor(e,t={config:{}},r){var i,a;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=kn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Xh(this,ii.join,this.params,this.timeout),this.rejoinTimer=new ow(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ii.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new jl(this),this.broadcastEndpointURL=lw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==kn.closed){const{config:{broadcast:l,presence:c,private:d}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[Ml.PRESENCE]&&this.bindings[Ml.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},y={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:g}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(x=>e?.(Li.CHANNEL_ERROR,x)),this._onClose(()=>e?.(Li.CLOSED)),this.updateJoinPayload(Object.assign({config:y},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:x})=>{var w;if(this.socket.setAuth(),x===void 0){e?.(Li.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,A=(w=_?.length)!==null&&w!==void 0?w:0,E=[];for(let S=0;S<A;S++){const T=_[S],{filter:{event:R,schema:N,table:k,filter:M}}=T,V=x&&x[S];if(V&&V.event===R&&V.schema===N&&V.table===k&&V.filter===M)E.push(Object.assign(Object.assign({},T),{id:V.id}));else{this.unsubscribe(),this.state=kn.errored,e?.(Li.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(Li.SUBSCRIBED);return}}).receive("error",x=>{this.state=kn.errored,e?.(Li.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e?.(Li.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===kn.joined&&e===Ml.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let d=c.statusText;try{const f=await c.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,c,d;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=kn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ii.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Xh(this,ii.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kn.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Xh(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>UA){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,a;const l=e.toLocaleLowerCase(),{close:c,error:d,leave:f,join:g}=ii;if(r&&[c,d,f,g].indexOf(l)>=0&&r!==this._joinRef())return;let y=this._onMessage(l,t,r);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var w,_,A;return((w=x.filter)===null||w===void 0?void 0:w.event)==="*"||((A=(_=x.filter)===null||_===void 0?void 0:_.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===l}).map(x=>x.callback(y,r)):(a=this.bindings[l])===null||a===void 0||a.filter(x=>{var w,_,A,E,S,T;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const R=x.id,N=(w=x.filter)===null||w===void 0?void 0:w.event;return R&&((_=t.ids)===null||_===void 0?void 0:_.includes(R))&&(N==="*"||N?.toLocaleLowerCase()===((A=t.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const R=(S=(E=x?.filter)===null||E===void 0?void 0:E.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return R==="*"||R===((T=t?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const w=y.data,{schema:_,table:A,commit_timestamp:E,type:S,errors:T}=w;y=Object.assign(Object.assign({},{schema:_,table:A,commit_timestamp:E,eventType:S,new:{},old:{},errors:T}),this._getPayloadRecords(w))}x.callback(y,r)})}_isClosed(){return this.state===kn.closed}_isJoined(){return this.state===kn.joined}_isJoining(){return this.state===kn.joining}_isLeaving(){return this.state===kn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&kp.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ii.close,{},e)}_onError(e){this._on(ii.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=$v(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=$v(e.columns,e.old_record)),t}}const Yh=()=>{},Ou={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},XA=[1e3,2e3,5e3,1e4],YA=1e4,KA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZA{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=j0,this.transport=null,this.heartbeatIntervalMs=Ou.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yh,this.ref=0,this.reconnectTimer=null,this.logger=Yh,this.conn=null,this.sendBuffer=[],this.serializer=new zA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>Cs(async()=>{const{default:c}=await Promise.resolve().then(()=>uo);return{default:c}},void 0).then(({default:c})=>c(...l)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${M0.websocket}`,this.httpEndpoint=lw(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=MA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:LA}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Dl.connecting:return Ja.Connecting;case Dl.open:return Ja.Open;case Dl.closing:return Ja.Closing;default:return Ja.Closed}}isConnected(){return this.connectionState()===Ja.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new kp(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:r,payload:i,ref:a}=e,l=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${t} ${r} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(FA,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Ou.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:l}=t,c=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${r} ${i} ${c}`.trim(),a),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,a,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ii.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([KA],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:BA};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(ii.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ow(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ou.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,a,l,c,d,f,g;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:j0,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Ou.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e?.heartbeatCallback)!==null&&c!==void 0?c:Yh,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e?.reconnectAfterMs)!==null&&d!==void 0?d:(m=>XA[m-1]||YA),this.encode=(f=e?.encode)!==null&&f!==void 0?f:((m,y)=>y(JSON.stringify(m))),this.decode=(g=e?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Dp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function hn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class QA extends Dp{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class B0 extends Dp{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const jp=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Cs(async()=>{const{default:r}=await Promise.resolve().then(()=>uo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},JA=()=>Xe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Cs(()=>Promise.resolve().then(()=>uo),void 0)).Response:Response}),L0=n=>{if(Array.isArray(n))return n.map(t=>L0(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=L0(r)}),e},e4=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Kh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),t4=(n,e,t)=>Xe(void 0,void 0,void 0,function*(){const r=yield JA();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{const a=n.status||500,l=i?.statusCode||a+"";e(new QA(Kh(i),a,l))}).catch(i=>{e(new B0(Kh(i),i))}):e(new B0(Kh(n),n))}),n4=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(e4(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function ec(n,e,t,r,i,a){return Xe(this,void 0,void 0,function*(){return new Promise((l,c)=>{n(t,n4(e,r,i,a)).then(d=>{if(!d.ok)throw d;return r?.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>t4(d,c,r))})})}function Vl(n,e,t,r){return Xe(this,void 0,void 0,function*(){return ec(n,"GET",e,t,r)})}function ri(n,e,t,r,i){return Xe(this,void 0,void 0,function*(){return ec(n,"POST",e,r,i,t)})}function F0(n,e,t,r,i){return Xe(this,void 0,void 0,function*(){return ec(n,"PUT",e,r,i,t)})}function r4(n,e,t,r){return Xe(this,void 0,void 0,function*(){return ec(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Mp(n,e,t,r,i){return Xe(this,void 0,void 0,function*(){return ec(n,"DELETE",e,r,i,t)})}class i4{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Xe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(hn(e))return{data:null,error:e};throw e}})}}var cw;class a4{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[cw]="BlobDownloadBuilder",this.promise=null}asStream(){return new i4(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Xe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(hn(e))return{data:null,error:e};throw e}})}}cw=Symbol.toStringTag;const o4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class s4{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=jp(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return Xe(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Wv),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=r,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i?.headers&&(c=Object.assign(Object.assign({},c),i.headers));const f=this._removeEmptyFolders(t),g=this._getFinalPath(f),m=yield(e=="PUT"?F0:ri)(this.fetch,`${this.url}/object/${g}`,a,Object.assign({headers:c},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(hn(a))return{data:null,error:a};throw a}})}upload(e,t,r){return Xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Xe(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",t);try{let d;const f=Object.assign({upsert:Wv.upsert},i),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",f.cacheControl)):(d=r,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const m=yield F0(this.fetch,c.toString(),d,{headers:g});return{data:{path:a,fullPath:m.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(hn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return Xe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const a=yield ri(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+a.url),c=l.searchParams.get("token");if(!c)throw new Dp("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}update(e,t,r){return Xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Xe(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Xe(this,void 0,void 0,function*(){try{return{data:{path:(yield ri(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Xe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield ri(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Xe(this,void 0,void 0,function*(){try{const i=yield ri(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),l=a?`?${a}`:"",c=this._getFinalPath(e),d=()=>Vl(this.fetch,`${this.url}/${i}/${c}${l}`,{headers:this.headers,noResolveJson:!0});return new a4(d,this.shouldThrowOnError)}info(e){return Xe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Vl(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:L0(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}exists(e){return Xe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield r4(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r)&&r instanceof B0){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const c=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&i.push(d);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${f}`)}}}remove(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Mp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}list(e,t,r){return Xe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},o4),t),{prefix:e||""});return{data:yield ri(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}listV2(e,t){return Xe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ri(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const uw="2.76.0",dw={"X-Client-Info":`storage-js/${uw}`};class l4{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const a=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dw),t),this.fetch=jp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Xe(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(hn(e))return{data:null,error:e};throw e}})}getBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}createBucket(e){return Xe(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield ri(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Xe(this,void 0,void 0,function*(){try{return{data:yield F0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Mp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}}class c4{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dw),t),this.fetch=jp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}listBuckets(e){return Xe(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,a=yield Vl(this.fetch,i,{headers:this.headers});return{data:Array.isArray(a)?a.filter(c=>c.type==="ANALYTICS"):[],error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Mp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}}const Pp={"X-Client-Info":`storage-js/${uw}`,"Content-Type":"application/json"};class fw extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ir(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class Zh extends fw{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class u4 extends fw{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Xv;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Xv||(Xv={}));const Bp=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Cs(async()=>{const{default:r}=await Promise.resolve().then(()=>uo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},d4=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Yv=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),f4=(n,e,t)=>Xe(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!t?.noResolveJson){const i=n.status||500,a=n;if(typeof a.json=="function")a.json().then(l=>{const c=l?.statusCode||l?.code||i+"";e(new Zh(Yv(l),i,c))}).catch(()=>{const l=i+"",c=a.statusText||`HTTP ${i} error`;e(new Zh(c,i,l))});else{const l=i+"",c=a.statusText||`HTTP ${i} error`;e(new Zh(c,i,l))}}else e(new u4(Yv(n),n))}),h4=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return r?(d4(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t)):i};function p4(n,e,t,r,i,a){return Xe(this,void 0,void 0,function*(){return new Promise((l,c)=>{n(t,h4(e,r,i,a)).then(d=>{if(!d.ok)throw d;if(r?.noResolveJson)return d;const f=d.headers.get("content-type");return!f||!f.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>f4(d,c,r))})})}function Nr(n,e,t,r,i){return Xe(this,void 0,void 0,function*(){return p4(n,"POST",e,r,i,t)})}class g4{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Pp),t),this.fetch=Bp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Xe(this,void 0,void 0,function*(){try{return{data:(yield Nr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Xe(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ir(r))return{data:null,error:r};throw r}})}listIndexes(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Xe(this,void 0,void 0,function*(){try{return{data:(yield Nr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ir(r))return{data:null,error:r};throw r}})}}class m4{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Pp),t),this.fetch=Bp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Xe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Nr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}getVectors(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}listVectors(e){return Xe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Nr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}queryVectors(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Xe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Nr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}}class y4{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Pp),t),this.fetch=Bp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:(yield Nr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}getBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}listBuckets(){return Xe(this,arguments,void 0,function*(e={}){try{return{data:yield Nr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Xe(this,void 0,void 0,function*(){try{return{data:(yield Nr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}}class v4 extends y4{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new x4(this.url,this.headers,e,this.fetch)}}class x4 extends g4{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Xe(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Xe(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Xe(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Xe(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new b4(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class b4 extends m4{constructor(e,t,r,i,a){super(e,t,a),this.vectorBucketName=r,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Xe(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Xe(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Xe(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Xe(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Xe(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class w4 extends l4{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new s4(this.url,this.headers,e,this.fetch)}get vectors(){return new v4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new c4(this.url+"/iceberg",this.headers,this.fetch)}}const _4="2.76.0";let Ol="";typeof Deno<"u"?Ol="deno":typeof document<"u"?Ol="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ol="react-native":Ol="node";const S4={"X-Client-Info":`supabase-js-${Ol}/${_4}`},C4={headers:S4},E4={schema:"public"},A4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},T4={},O4=n=>{let e;return n?e=n:typeof fetch>"u"?e=ew:e=fetch,(...t)=>e(...t)},R4=()=>typeof Headers>"u"?tw:Headers,I4=(n,e,t)=>{const r=O4(t),i=R4();return async(a,l)=>{var c;const d=(c=await e())!==null&&c!==void 0?c:n;let f=new i(l?.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(a,Object.assign(Object.assign({},l),{headers:f}))}};function N4(n){return n.endsWith("/")?n:n+"/"}function k4(n,e){var t,r;const{db:i,auth:a,realtime:l,global:c}=n,{db:d,auth:f,realtime:g,global:m}=e,y={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},g),l),storage:{},global:Object.assign(Object.assign(Object.assign({},m),c),{headers:Object.assign(Object.assign({},(t=m?.headers)!==null&&t!==void 0?t:{}),(r=c?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}function D4(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(N4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const hw="2.76.0",rs=30*1e3,U0=3,Qh=U0*rs,j4="http://localhost:9999",M4="supabase.auth.token",P4={"X-Client-Info":`gotrue-js/${hw}`},z0="X-Supabase-Api-Version",pw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},B4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,L4=600*1e3;class Hl extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function tt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class F4 extends Hl{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function U4(n){return tt(n)&&n.name==="AuthApiError"}class eo extends Hl{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Aa extends Hl{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class ya extends Aa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function z4(n){return tt(n)&&n.name==="AuthSessionMissingError"}class Ko extends Aa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ru extends Aa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Iu extends Aa{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function V4(n){return tt(n)&&n.name==="AuthImplicitGrantRedirectError"}class Kv extends Aa{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class V0 extends Aa{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Jh(n){return tt(n)&&n.name==="AuthRetryableFetchError"}class Zv extends Aa{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class H0 extends Aa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const nd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qv=` 	
\r=`.split(""),H4=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Qv.length;e+=1)n[Qv[e].charCodeAt(0)]=-2;for(let e=0;e<nd.length;e+=1)n[nd[e].charCodeAt(0)]=e;return n})();function Jv(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(nd[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(nd[r]),e.queuedBits-=6}}function gw(n,e,t){const r=H4[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ex(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{G4(l,r,t)};for(let l=0;l<n.length;l+=1)gw(n.charCodeAt(l),i,a);return e.join("")}function $4(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function q4(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}$4(r,e)}}function G4(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function gs(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)gw(n.charCodeAt(i),t,r);return new Uint8Array(e)}function W4(n){const e=[];return q4(n,t=>e.push(t)),new Uint8Array(e)}function to(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>Jv(i,t,r)),Jv(null,t,r),e.join("")}function X4(n){return Math.round(Date.now()/1e3)+n}function Y4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Rr=()=>typeof window<"u"&&typeof document<"u",qa={tested:!1,writable:!1},mw=()=>{if(!Rr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qa.tested)return qa.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),qa.tested=!0,qa.writable=!0}catch{qa.tested=!0,qa.writable=!1}return qa.writable};function K4(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const yw=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Cs(async()=>{const{default:r}=await Promise.resolve().then(()=>uo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Z4=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",is=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Ga=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ha=async(n,e)=>{await n.removeItem(e)};class _d{constructor(){this.promise=new _d.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}_d.promiseConstructor=Promise;function e0(n){const e=n.split(".");if(e.length!==3)throw new H0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!B4.test(e[r]))throw new H0("JWT not in base64url format");return{header:JSON.parse(ex(e[0])),payload:JSON.parse(ex(e[1])),signature:gs(e[2]),raw:{header:e[0],payload:e[1]}}}async function Q4(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function J4(n,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await n(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function e8(n){return("0"+n.toString(16)).substr(-2)}function t8(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,e8).join("")}async function n8(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function r8(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await n8(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zo(n,e,t=!1){const r=t8();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await is(n,`${e}-code-verifier`,i);const a=await r8(r);return[a,r===a?"plain":"s256"]}const i8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function a8(n){const e=n.headers.get(z0);if(!e||!e.match(i8))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function o8(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function s8(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const l8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qo(n){if(!l8.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function t0(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function tx(n){return JSON.parse(JSON.stringify(n))}const Ka=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),c8=[502,503,504];async function nx(n){var e;if(!Z4(n))throw new V0(Ka(n),0);if(c8.includes(n.status))throw new V0(Ka(n),n.status);let t;try{t=await n.json()}catch(a){throw new eo(Ka(a),a)}let r;const i=a8(n);if(i&&i.getTime()>=pw["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Zv(Ka(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ya}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Zv(Ka(t),n.status,t.weak_password.reasons);throw new F4(Ka(t),n.status||500,r)}const u8=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function ft(n,e,t,r){var i;const a=Object.assign({},r?.headers);a[z0]||(a[z0]=pw["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await d8(n,e,t+c,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(d):{data:Object.assign({},d),error:null}}async function d8(n,e,t,r,i,a){const l=u8(e,r,i,a);let c;try{c=await n(t,Object.assign({},l))}catch(d){throw console.error(d),new V0(Ka(d),0)}if(c.ok||await nx(c),r?.noResolveJson)return c;try{return await c.json()}catch(d){await nx(d)}}function ti(n){var e;let t=null;p8(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=X4(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function rx(n){const e=ti(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ba(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function f8(n){return{data:n,error:null}}function h8(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a}=n,l=Ss(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a},d=Object.assign({},l);return{data:{properties:c,user:d},error:null}}function ix(n){return n}function p8(n){return n.access_token&&n.refresh_token&&n.expires_in}const n0=["global","local","others"];class g8{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=yw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=n0[0]){if(n0.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${n0.join(", ")}`);try{return await ft(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await ft(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ba})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Ss(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await ft(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:h8,redirectTo:t?.redirectTo})}catch(t){if(tt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ft(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ba})}catch(t){if(tt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,a,l,c,d;try{const f={nextPage:null,lastPage:0,total:0},g=await ft(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:ix});if(g.error)throw g.error;const m=await g.json(),y=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(w.split(";")[1].split("=")[1]);f[`${A}Page`]=_}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(tt(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Qo(e);try{return await ft(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ba})}catch(t){if(tt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Qo(e);try{return await ft(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ba})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Qo(e);try{return await ft(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ba})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Qo(e.userId);try{const{data:t,error:r}=await ft(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(tt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Qo(e.userId),Qo(e.id);try{return{data:await ft(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(tt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,i,a,l,c,d;try{const f={nextPage:null,lastPage:0,total:0},g=await ft(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:ix});if(g.error)throw g.error;const m=await g.json(),y=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(w.split(";")[1].split("=")[1]);f[`${A}Page`]=_}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(tt(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await ft(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(tt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await ft(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(tt(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await ft(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(tt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await ft(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(tt(t))return{data:null,error:t};throw t}}}function ax(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Jo={debug:!!(globalThis&&mw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class m8 extends vw{}async function y8(n,e,t){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new m8(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Jo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function v8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xw(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function x8(n){return parseInt(n,16)}function b8(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function w8(n){var e;const{chainId:t,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:l,notBefore:c,requestId:d,resources:f,scheme:g,uri:m,version:y}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const x=xw(n.address),w=g?`${g}://${r}`:r,_=n.statement?`${n.statement}
`:"",A=`${w} wants you to sign in with your Ethereum account:
${x}

${_}`;let E=`URI: ${m}
Version: ${y}
Chain ID: ${t}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(i&&(E+=`
Expiration Time: ${i.toISOString()}`),c&&(E+=`
Not Before: ${c.toISOString()}`),d&&(E+=`
Request ID: ${d}`),f){let S=`
Resources:`;for(const T of f){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);S+=`
- ${T}`}E+=S}return`${A}
${E}`}class On extends Error{constructor({message:e,code:t,cause:r,name:i}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=t}}class rd extends On{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function _8({error:n,options:e}){var t,r,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new On({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=a.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new On({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new On({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new On({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new On({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new On({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return a.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new On({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new On({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const l=window.location.hostname;if(bw(l)){if(a.rp.id!==l)return new On({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new On({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new On({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new On({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new On({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function S8({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new On({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new On({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(bw(r)){if(t.rpId!==r)return new On({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new On({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new On({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new On({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class C8{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const E8=new C8;function A8(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,i=Ss(n,["challenge","user","excludeCredentials"]),a=gs(e).buffer,l=Object.assign(Object.assign({},t),{id:gs(t.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:a,user:l});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const f=r[d];c.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:gs(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function T8(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=Ss(n,["challenge","allowCredentials"]),i=gs(e).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){a.allowCredentials=new Array(t.length);for(let l=0;l<t.length;l++){const c=t[l];a.allowCredentials[l]=Object.assign(Object.assign({},c),{id:gs(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function O8(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:to(new Uint8Array(n.response.attestationObject)),clientDataJSON:to(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function R8(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:to(new Uint8Array(i.authenticatorData)),clientDataJSON:to(new Uint8Array(i.clientDataJSON)),signature:to(new Uint8Array(i.signature)),userHandle:i.userHandle?to(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function bw(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function ox(){var n,e;return!!(Rr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function I8(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new rd("Browser returned unexpected credential type",e)}:{data:null,error:new rd("Empty credential response",e)}}catch(e){return{data:null,error:_8({error:e,options:n})}}}async function N8(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new rd("Browser returned unexpected credential type",e)}:{data:null,error:new rd("Empty credential response",e)}}catch(e){return{data:null,error:S8({error:e,options:n})}}}const k8={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},D8={userVerification:"preferred",hints:["security-key"]};function id(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const a in i){const l=i[a];if(l!==void 0)if(Array.isArray(l))r[a]=l;else if(t(l))r[a]=l;else if(e(l)){const c=r[a];e(c)?r[a]=id(c,l):r[a]=id(l)}else r[a]=l}return r}function j8(n,e){return id(k8,n,e||{})}function M8(n,e){return id(D8,n,e||{})}class P8{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},a){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!l)return{data:null,error:c};const d=i??E8.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=j8(l.webauthn.credential_options.publicKey,a?.create),{data:g,error:m}=await I8({publicKey:f,signal:d});return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:m}}case"request":{const f=M8(l.webauthn.credential_options.publicKey,a?.request),{data:g,error:m}=await N8(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:d}));return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:m}}}}catch(l){return tt(l)?{data:null,error:l}:{data:null,error:new eo("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!t)return{data:null,error:new Hl("rpId is required for WebAuthn authentication")};try{if(!ox())return{data:null,error:new eo("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:a});if(!l)return{data:null,error:c};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:t,rpOrigins:r,credential_response:d.credential_response}})}catch(l){return tt(l)?{data:null,error:l}:{data:null,error:new eo("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!t)return{data:null,error:new Hl("rpId is required for WebAuthn registration")};try{if(!ox())return{data:null,error:new eo("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(g=>{var m;return(m=g.data)===null||m===void 0?void 0:m.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:c};const{data:d,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:t,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(l){return tt(l)?{data:null,error:l}:{data:null,error:new eo("Unexpected error in register",l)}}}}v8();const B8={url:j4,storageKey:M4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:P4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function sx(n,e,t){return await t()}const es={};class $l{get jwks(){var e,t;return(t=(e=es[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){es[this.storageKey]=Object.assign(Object.assign({},es[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=es[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){es[this.storageKey]=Object.assign(Object.assign({},es[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$l.nextInstanceID,$l.nextInstanceID+=1,this.instanceID>0&&Rr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},B8),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new g8({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=yw(i.fetch),this.lock=i.lock||sx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Rr()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=y8:this.lock=sx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new P8(this)},this.persistSession?(i.storage?this.storage=i.storage:mw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ax(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=ax(this.memoryStorage)),Rr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hw}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=K4(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Rr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),V4(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return tt(t)?{error:t}:{error:new eo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const a=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:ti}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(tt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,i;try{let a;if("email"in e){const{email:g,password:m,options:y}=e;let x=null,w=null;this.flowType==="pkce"&&([x,w]=await Zo(this.storage,this.storageKey)),a=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:g,password:m,data:(t=y?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:x,code_challenge_method:w},xform:ti})}else if("phone"in e){const{phone:g,password:m,options:y}=e;a=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:m,data:(r=y?.data)!==null&&r!==void 0?r:{},channel:(i=y?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:ti})}else throw new Ru("You must provide either an email or phone number and a password");const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(tt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:l,options:c}=e;t=await ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:rx})}else if("phone"in e){const{phone:a,password:l,options:c}=e;t=await ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:rx})}else throw new Ru("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ko}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(tt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,a,l,c,d,f,g,m,y;let x,w;if("message"in e)x=e.message,w=e.signature;else{const{chain:_,wallet:A,statement:E,options:S}=e;let T;if(Rr())if(typeof A=="object")T=A;else{const ie=window;if("ethereum"in ie&&typeof ie.ethereum=="object"&&"request"in ie.ethereum&&typeof ie.ethereum.request=="function")T=ie.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=A}const R=new URL((t=S?.url)!==null&&t!==void 0?t:window.location.href),N=await T.request({method:"eth_requestAccounts"}).then(ie=>ie).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=xw(N[0]);let M=(r=S?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!M){const ie=await T.request({method:"eth_chainId"});M=x8(ie)}const V={domain:R.host,address:k,statement:E,uri:R.href,version:"1",chainId:M,nonce:(i=S?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(a=S?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=S?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=S?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=S?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(g=S?.signInWithEthereum)===null||g===void 0?void 0:g.resources};x=w8(V),w=await T.request({method:"personal_sign",params:[b8(x),k]})}try{const{data:_,error:A}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:w},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ti});if(A)throw A;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Ko}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:A})}catch(_){if(tt(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var t,r,i,a,l,c,d,f,g,m,y,x;let w,_;if("message"in e)w=e.message,_=e.signature;else{const{chain:A,wallet:E,statement:S,options:T}=e;let R;if(Rr())if(typeof E=="object")R=E;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))R=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=E}const N=new URL((t=T?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in R&&R.signIn){const k=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),S?{statement:S}:null));let M;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")M=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)M=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)w=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),_=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${N.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(r=T?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=T?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((l=T?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((d=T?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((f=T?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((m=(g=T?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||m===void 0)&&m.length?["Resources",...T.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const k=await R.signMessage(new TextEncoder().encode(w),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=k}}try{const{data:A,error:E}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:to(_)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ti});if(E)throw E;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new Ko}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:E})}catch(A){if(tt(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(e){const t=await Ga(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:a,error:l}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ti});if(await ha(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ko}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(tt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:a,nonce:l}=e,c=await ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:ti}),{data:d,error:f}=c;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Ko}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(t){if(tt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,a,l;try{if("email"in e){const{email:c,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Zo(this.storage,this.storageKey));const{error:m}=await ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=d?.data)!==null&&t!==void 0?t:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:c,options:d}=e,{data:f,error:g}=await ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:g}}throw new Ru("You must provide either an email or phone number.")}catch(c){if(tt(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await ft(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:ti});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(tt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Zo(this.storage,this.storageKey)),await ft(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:f8})}catch(a){if(tt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ya;const{error:i}=await ft(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(tt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:l}=await ft(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:l,error:c}=await ft(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new Ru("You must provide either an email or phone number and a type")}catch(t){if(tt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ga(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Qh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await Ga(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=t0()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,g)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,g))})}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ba}):await this._useSession(async t=>{var r,i,a;const{data:l,error:c}=t;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ya}:await ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:ba})})}catch(t){if(tt(t))return z4(t)&&(await this._removeSession(),await ha(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new ya;const l=i.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await Zo(this.storage,this.storageKey));const{data:f,error:g}=await ft(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:l.access_token,xform:ba});if(g)throw g;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ya;const t=Date.now()/1e3;let r=t,i=!0,a=null;const{payload:l}=e0(e.access_token);if(l.exp&&(r=l.exp,i=r<=t),i){const{data:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(tt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:c}=t;if(c)throw c;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new ya;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(tt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Rr())throw new Iu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Iu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Kv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Iu("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Kv("No code detected.");const{data:S,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:c,expires_at:d,token_type:f}=e;if(!a||!c||!l||!f)throw new Iu("No session defined in URL");const g=Math.round(Date.now()/1e3),m=parseInt(c);let y=g+m;d&&(y=parseInt(d));const x=y-g;x*1e3<=rs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${m}s`);const w=y-m;g-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,y,g):g-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,y,g);const{data:_,error:A}=await this._getUser(a);if(A)throw A;const E={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:y,refresh_token:l,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(r){if(tt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ga(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{error:a};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(U4(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await ha(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Y4(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:a},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Zo(this.storage,this.storageKey,!0));try{return await ft(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(tt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(tt(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:i}=await this._useSession(async a=>{var l,c,d,f,g;const{data:m,error:y}=a;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ft(this.fetch,"GET",x,{headers:this.headers,jwt:(g=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return Rr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(tt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:i,data:{session:a}}=t;if(i)throw i;const{options:l,provider:c,token:d,access_token:f,nonce:g}=e,m=await ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:d,access_token:f,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:ti}),{data:y,error:x}=m;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new Ko}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:x})}catch(i){if(tt(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:l}=t;if(l)throw l;return await ft(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(tt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await J4(async i=>(i>0&&await Q4(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await ft(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ti})),(i,a)=>{const l=200*Math.pow(2,i);return a&&Jh(a)&&Date.now()+l-r<rs})}catch(r){if(this._debug(t,"error",r),tt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Rr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ga(this.storage,this.storageKey);if(i&&this.userStorage){let l=await Ga(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await is(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l?.user)!==null&&e!==void 0?e:t0()}else if(i&&!i.user&&!i.user){const l=await Ga(this.storage,this.storageKey+"-user");l&&l?.user?(i.user=l.user,await ha(this.storage,this.storageKey+"-user"),await is(this.storage,this.storageKey,i)):i.user=t0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Qh;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Qh}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Jh(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(i.access_token);!c&&l?.user?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ya;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new _d;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new ya;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),tt(a)){const l={data:null,error:a};return Jh(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await is(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const a=tx(i);await is(this.storage,this.storageKey,a)}else{const i=tx(t);await is(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await ha(this.storage,this.storageKey),await ha(this.storage,this.storageKey+"-code-verifier"),await ha(this.storage,this.storageKey+"-user"),this.userStorage&&await ha(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),rs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/rs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${rs}ms, refresh threshold is ${U0} ticks`),i<=U0&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof vw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await Zo(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(c.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await ft(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(tt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:l}=t;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:f}=await ft(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&d.type==="totp"&&(!((i=d?.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(t){if(tt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?O8(e.webauthn.credential_response):R8(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:d}=await ft(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:d})})}catch(t){if(tt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const l=await ft(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:A8(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:T8(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(tt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=t?.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=e0(i.access_token);let c=null;l.aal&&(c=l.aal);let d=c;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const g=l.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+L4>i)return r;const{data:a,error:l}=await ft(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:x,error:w}=await this.getSession();if(w||!x.session)return{data:null,error:w};r=x.session.access_token}const{header:i,payload:a,signature:l,raw:{header:c,payload:d}}=e0(r);t?.allowExpired||o8(a.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!f){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:a,header:i,signature:l},error:null}}const g=s8(i.alg),m=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,m,l,W4(`${c}.${d}`)))throw new H0("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}}$l.nextInstanceID=0;const L8=$l;class F8 extends L8{constructor(e){super(e)}}class U8{constructor(e,t,r){var i,a,l;this.supabaseUrl=e,this.supabaseKey=t;const c=D4(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:E4,realtime:T4,auth:Object.assign(Object.assign({},A4),{storageKey:d}),global:C4},g=k4(r??{},f);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=I4(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new jA(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new w4(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new CA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:l,flowType:c,lock:d,debug:f},g,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new F8({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),g),storageKey:l,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:a,flowType:c,lock:d,debug:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new ZA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const z8=(n,e,t)=>new U8(n,e,t);function V8(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}V8()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const H8="https://znqhoohjugyblgwepovp.supabase.co",$8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY",Ee=z8(H8,$8,{realtime:{params:{eventsPerSecond:10}}});function q8(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function G8(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var W8=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),X8=(function(n){W8(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),q8(a,i.prototype),G8(a),a}return e})(Error),Y8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wr=(function(n){Y8(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(X8),K8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Sn=(function(n){K8(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(wr),Z8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Je=(function(n){Z8(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(wr),ww=(function(){function n(e){if(this.binarizer=e,e===null)throw new Je("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),Q8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),In=(function(n){Q8(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(wr),J8=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),Kt=(function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),e6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Lp=(function(n){e6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(wr),t6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),lx=(function(n){t6(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(Lp),n6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ln=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Je("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new lx(t);if(r>e)throw new lx(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=n6(e),l=a.next();!l.done;l=a.next()){var c=l.value;i=31*i+c}}catch(d){t={error:d}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Kt.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var l=a+i>>1,c=r(t,e[l]);if(c>0)i=l+1;else if(c<0)a=l-1;else return l}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),vt=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),qn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Kt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var l=r.length;a===0;){if(++i===l)return t;a=r[i]}var c=i*32+vt.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var l=r.length;a===0;){if(++i===l)return t;a=~r[i]}var c=i*32+vt.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Je;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,l=r;l<=i;l++){var c=l>r?0:e&31,d=l<i?31:t&31,f=(2<<d)-(1<<c);a[l]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Je;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),l=this.bits,c=i;c<=a;c++){var d=c>i?0:e&31,f=c<a?31:t&31,g=(2<<f)-(1<<d)&4294967295;if((l[c]&g)!==(r?g:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Je("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Je("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var l=0,c=0;c<8;c++)this.get(e)&&(l|=1<<7-c),e++;t[r+a]=l}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var l=i[a];l=l>>1&1431655765|(l&1431655765)<<1,l=l>>2&858993459|(l&858993459)<<2,l=l>>4&252645135|(l&252645135)<<4,l=l>>8&16711935|(l&16711935)<<8,l=l>>16&65535|(l&65535)<<16,e[t-a]=l}if(this.size!==r*32){for(var c=r*32-this.size,d=e[0]>>>c,a=1;a<r;a++){var f=e[a];d|=f<<32-c,e[a-1]=d,d=f>>>c}e[r-1]=d}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Ln.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Ln.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),$0;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})($0||($0={}));const Zt=$0;var r6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ae=(function(n){r6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(wr),i6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ft;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Ft||(Ft={}));var Bn=(function(){function n(e,t,r){for(var i,a,l=[],c=3;c<arguments.length;c++)l[c-3]=arguments[c];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=l,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var d=this.values,f=0,g=d.length;f!==g;f++){var m=d[f];n.VALUES_TO_ECI.set(m,this)}try{for(var y=i6(l),x=y.next();!x.done;x=y.next()){var w=x.value;n.NAME_TO_ECI.set(w,this)}}catch(_){i={error:_}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Ae("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new Ae("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new Ae("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Ft.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Ft.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Ft.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Ft.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Ft.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Ft.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Ft.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Ft.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Ft.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Ft.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Ft.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Ft.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Ft.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Ft.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Ft.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Ft.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Ft.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Ft.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Ft.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Ft.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Ft.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Ft.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Ft.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Ft.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Ft.Big5,28,"Big5"),n.GB18030=new n(Ft.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Ft.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),a6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qu=(function(n){a6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(wr),Xr=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Bn?e:Bn.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,l=e.length;a<l;a++){var c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(Bn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new qu("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Bn.UTF8)||e.equals(Bn.ISO8859_1)||e.equals(Bn.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),At=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Xr.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Zt.CHARACTER_SET)!==void 0)return t.get(Zt.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,l=!0,c=0,d=0,f=0,g=0,m=0,y=0,x=0,w=0,_=0,A=0,E=0,S=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,T=0;T<r&&(i||a||l);T++){var R=e[T]&255;l&&(c>0?(R&128)===0?l=!1:c--:(R&128)!==0&&((R&64)===0?l=!1:(c++,(R&32)===0?d++:(c++,(R&16)===0?f++:(c++,(R&8)===0?g++:l=!1))))),i&&(R>127&&R<160?i=!1:R>159&&(R<192||R===215||R===247)&&E++),a&&(m>0?R<64||R===127||R>252?a=!1:m--:R===128||R===160||R>239?a=!1:R>160&&R<224?(y++,w=0,x++,x>_&&(_=x)):R>127?(m++,x=0,w++,w>A&&(A=w)):(x=0,w=0))}return l&&c>0&&(l=!1),a&&m>0&&(a=!1),l&&(S||d+f+g>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||_>=3||A>=3)?n.SHIFT_JIS:i&&a?_===2&&y===2||E*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:l?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(c,d,f,g,m,y){if(c==="%%")return"%";if(t[++i]!==void 0){c=g?parseInt(g.substr(1)):void 0;var x=m?parseInt(m.substr(1)):void 0,w;switch(y){case"s":w=t[i];break;case"c":w=t[i][0];break;case"f":w=parseFloat(t[i]).toFixed(c);break;case"p":w=parseFloat(t[i]).toPrecision(c);break;case"e":w=parseFloat(t[i]).toExponential(c);break;case"x":w=parseInt(t[i]).toString(x||16);break;case"d":w=parseFloat(parseInt(t[i],x||10).toPrecision(c)).toFixed(0);break}w=typeof w=="object"?JSON.stringify(w):(+w).toString(x);for(var _=parseInt(f),A=f&&f[0]+""=="0"?"0":" ";w.length<_;)w=d!==void 0?w+A:A+w;return w}}var l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,a)},n.getBytes=function(e,t){return Xr.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Bn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Bn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Bn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),yt=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=At.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),vi=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Je("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var l=e[a],c=0;c<r;c++)l[c]&&i.set(c,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Je("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,l=0,c=-1,d=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>l){if(c===-1)c=a-l;else if(a-l!==c)throw new Je("row lengths do not match");l=a,d++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[a]=!0,a++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[a]=!1,a++;else throw new Je("illegal character encountered: "+e.substring(f));if(a>l){if(c===-1)c=a-l;else if(a-l!==c)throw new Je("row lengths do not match");d++}for(var g=new n(c,d),m=0;m<a;m++)i[m]&&g.set(Math.floor(m%c),Math.floor(m/c));return g},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Je("input matrix dimensions do not match");for(var t=new qn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,l=this.height;a<l;a++)for(var c=a*r,d=e.getRow(a,t).getBitArray(),f=0;f<r;f++)i[c+f]^=d[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Je("Left and top must be nonnegative");if(i<1||r<1)throw new Je("Height and width must be at least 1");var a=e+r,l=t+i;if(l>this.height||a>this.width)throw new Je("The region must fit inside the matrix");for(var c=this.rowSize,d=this.bits,f=t;f<l;f++)for(var g=f*c,m=e;m<a;m++)d[g+Math.floor(m/32)]|=1<<(m&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new qn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,l=0;l<r;l++)t.setBulk(l*32,i[a+l]);return t},n.prototype.setRow=function(e,t){Kt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new qn(e),i=new qn(e),a=0,l=Math.floor((t+1)/2);a<l;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,l=t,c=-1,d=-1,f=0;f<t;f++)for(var g=0;g<r;g++){var m=i[f*r+g];if(m!==0){if(f<l&&(l=f),f>d&&(d=f),g*32<a){for(var y=0;(m<<31-y&4294967295)===0;)y++;g*32+y<a&&(a=g*32+y)}if(g*32+31>c){for(var y=31;!(m>>>y);)y--;g*32+y>c&&(c=g*32+y)}}}return c<a||d<l?null:Int32Array.from([a,l,c-a+1,d-l+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,l=t[r],c=0;(l<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,l=t[r],c=31;!(l>>>c);)c--;return a+=c,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Ln.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ln.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new yt,a=0,l=this.height;a<l;a++){for(var c=0,d=this.width;c<d;c++)i.append(this.get(c,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),o6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),le=(function(n){o6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(wr),s6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),l6=(function(n){s6(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new qn(a):r.clear(),this.initArrays(a);for(var l=i.getRow(t,this.luminances),c=this.buckets,d=0;d<a;d++)c[(l[d]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(c);if(a<3)for(var d=0;d<a;d++)(l[d]&255)<f&&r.set(d);else for(var g=l[0]&255,m=l[1]&255,d=1;d<a-1;d++){var y=l[d+1]&255;(m*4-g-y)/2<f&&r.set(d),g=m,m=y}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new vi(r,i);this.initArrays(r);for(var l=this.buckets,c=1;c<5;c++)for(var d=Math.floor(i*c/5),f=t.getRow(d,this.luminances),g=Math.floor(r*4/5),m=Math.floor(r/5);m<g;m++){var y=f[m]&255;l[y>>e.LUMINANCE_SHIFT]++}for(var x=e.estimateBlackPoint(l),w=t.getMatrix(),c=0;c<i;c++)for(var _=c*r,m=0;m<r;m++){var y=w[_+m]&255;y<x&&a.set(m,c)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,l=0,c=0;c<r;c++)t[c]>l&&(a=c,l=t[c]),t[c]>i&&(i=t[c]);for(var d=0,f=0,c=0;c<r;c++){var g=c-a,m=t[c]*g*g;m>f&&(d=c,f=m)}if(a>d){var y=a;a=d,d=y}if(d-a<=r/16)throw new le;for(var x=d-1,w=-1,c=d-1;c>a;c--){var _=c-a,m=_*_*(d-c)*(i-t[c]);m>w&&(x=c,w=m)}return x<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(J8),c6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_w=(function(n){c6(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),l=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&l++;var c=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&c++;var d=e.calculateBlackPoints(a,l,c,r,i),f=new vi(r,i);e.calculateThresholdForBlock(a,l,c,r,i,d,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,l,c,d){for(var f=l-e.BLOCK_SIZE,g=a-e.BLOCK_SIZE,m=0;m<i;m++){var y=m<<e.BLOCK_SIZE_POWER;y>f&&(y=f);for(var x=e.cap(m,2,i-3),w=0;w<r;w++){var _=w<<e.BLOCK_SIZE_POWER;_>g&&(_=g);for(var A=e.cap(w,2,r-3),E=0,S=-2;S<=2;S++){var T=c[x+S];E+=T[A-2]+T[A-1]+T[A]+T[A+1]+T[A+2]}var R=E/25;e.thresholdBlock(t,_,y,R,a,d)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,l,c){for(var d=0,f=i*l+r;d<e.BLOCK_SIZE;d++,f+=l)for(var g=0;g<e.BLOCK_SIZE;g++)(t[f+g]&255)<=a&&c.set(r+g,i+d)},e.calculateBlackPoints=function(t,r,i,a,l){for(var c=l-e.BLOCK_SIZE,d=a-e.BLOCK_SIZE,f=new Array(i),g=0;g<i;g++){f[g]=new Int32Array(r);var m=g<<e.BLOCK_SIZE_POWER;m>c&&(m=c);for(var y=0;y<r;y++){var x=y<<e.BLOCK_SIZE_POWER;x>d&&(x=d);for(var w=0,_=255,A=0,E=0,S=m*a+x;E<e.BLOCK_SIZE;E++,S+=a){for(var T=0;T<e.BLOCK_SIZE;T++){var R=t[S+T]&255;w+=R,R<_&&(_=R),R>A&&(A=R)}if(A-_>e.MIN_DYNAMIC_RANGE)for(E++,S+=a;E<e.BLOCK_SIZE;E++,S+=a)for(var T=0;T<e.BLOCK_SIZE;T++)w+=t[S+T]&255}var N=w>>e.BLOCK_SIZE_POWER*2;if(A-_<=e.MIN_DYNAMIC_RANGE&&(N=_/2,g>0&&y>0)){var k=(f[g-1][y]+2*f[g][y-1]+f[g-1][y-1])/4;_<k&&(N=k)}f[g][y]=N}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(l6),tc=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new qu("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new qu("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new qu("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new yt,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var l=i[a]&255,c=void 0;l<64?c="#":l<128?c="+":l<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()},n})(),u6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Sd=(function(n){u6(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),l=0;l<a;l++)i[l]=255-(i[l]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(tc),d6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),f6=(function(n){d6(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var l=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var c=0,d=0,f=t.length;c<f;c+=4,d++){var g=void 0,m=t[c+3];if(m===0)g=255;else{var y=t[c],x=t[c+1],w=t[c+2];g=306*y+601*x+117*w+512>>10}l[d]=g}else for(var c=0,d=0,_=t.length;c<_;c+=4,d++){var g=void 0,m=t[c+3];if(m===0)g=255;else{var y=t[c],x=t[c+1],w=t[c+2];g=306*y+601*x+117*w+512>>10}l[d]=255-g}return l},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Je("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,l=this.canvas.width,c=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(a))*l+Math.abs(Math.sin(a))*c),f=Math.ceil(Math.abs(Math.sin(a))*l+Math.abs(Math.cos(a))*c);return r.width=d,r.height=f,i.translate(d/2,f/2),i.rotate(a),i.drawImage(this.canvas,l/-2,c/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Sd(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(tc),h6=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),sr=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{f(r.next(g))}catch(m){l(m)}}function d(g){try{f(r.throw(g))}catch(m){l(m)}}function f(g){g.done?a(g.value):i(g.value).then(c,d)}f((r=r.apply(n,e||[])).next())})},lr=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(g){return d([f,g])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(g){f=[6,g],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},p6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},As=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return sr(this,void 0,void 0,function(){var e,t,r,i,a,l,c,d,f,g,m,y;return lr(this,function(x){switch(x.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=x.sent(),t=[];try{for(r=p6(e),i=r.next();!i.done;i=r.next())a=i.value,l=a.kind==="video"?"videoinput":a.kind,l==="videoinput"&&(c=a.deviceId||a.id,d=a.label||"Video device "+(t.length+1),f=a.groupId,g={deviceId:c,label:d,kind:l,groupId:f},t.push(g))}catch(w){m={error:w}}finally{try{i&&!i.done&&(y=r.return)&&y.call(r)}finally{if(m)throw m.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return sr(this,void 0,void 0,function(){var e;return lr(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new h6(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return sr(this,void 0,void 0,function(){var t;return lr(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return sr(this,void 0,void 0,function(){return lr(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return sr(this,void 0,void 0,function(){var r,i;return lr(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return sr(this,void 0,void 0,function(){var r;return lr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return sr(this,void 0,void 0,function(){var r,i;return lr(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return sr(this,void 0,void 0,function(){return lr(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return sr(this,void 0,void 0,function(){var i,a;return lr(this,function(l){switch(l.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,l.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return sr(this,void 0,void 0,function(){var i;return lr(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return sr(this,void 0,void 0,function(){var i;return lr(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return sr(this,void 0,void 0,function(){var r;return lr(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return sr(this,void 0,void 0,function(){return lr(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Sn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Sn("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Sn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Sn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new Sn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new Sn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Sn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new Sn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Sn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Sn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return sr(this,void 0,void 0,function(){return lr(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return sr(this,void 0,void 0,function(){return lr(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(l,c){if(i._stopAsyncDecode){c(new le("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var d=i.decode(e);l(d)}catch(y){var f=t&&y instanceof le,g=y instanceof In||y instanceof Ae,m=g&&r;if(f||m)return setTimeout(a,i._timeBetweenDecodingAttempts,l,c);c(y)}};return new Promise(function(l,c){return a(l,c)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(d){t(null,d);var l=d instanceof In||d instanceof Ae,c=d instanceof le;(l||c)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new f6(r,t),a=new _w(i);return new ww(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),ar=(function(){function n(e,t,r,i,a,l){r===void 0&&(r=t==null?0:8*t.length),l===void 0&&(l=Kt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=l,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,l==null?this.timestamp=Kt.currentTimeMillis():this.timestamp=l}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Kt.arraycopy(t,0,r,0,t.length),Kt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),q0;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(q0||(q0={}));const Qe=q0;var G0;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(G0||(G0={}));const er=G0;var Cd=(function(){function n(e,t,r,i,a,l){a===void 0&&(a=-1),l===void 0&&(l=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=l,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),Rl=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Je;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),wa=(function(){function n(e,t){if(t.length===0)throw new Je;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Kt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var l=t[i];r=Rl.addOrSubtract(r,l)}return r}r=t[0];for(var c=t.length,d=this.field,i=1;i<c;i++)r=Rl.addOrSubtract(d.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Je("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),l=r.length-t.length;Kt.arraycopy(r,0,a,0,l);for(var c=l;c<r.length;c++)a[c]=Rl.addOrSubtract(t[c-l],r[c]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Je("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,l=new Int32Array(r+a-1),c=this.field,d=0;d<r;d++)for(var f=t[d],g=0;g<a;g++)l[d+g]=Rl.addOrSubtract(l[d+g],c.multiply(f,i[g]));return new n(c,l)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,l=0;l<t;l++)i[l]=r.multiply(a[l],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Je;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),l=this.field,c=0;c<i;c++)a[c]=l.multiply(r[c],t);return new n(l,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Je("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Je("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),l=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var c=i.getDegree()-e.getDegree(),d=t.multiply(i.getCoefficient(i.getDegree()),l),f=e.multiplyByMonomial(c,d),g=t.buildMonomial(c,d);r=r.addOrSubtract(g),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),g6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Sw=(function(n){g6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(wr),m6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xr=(function(n){m6(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var l=new Int32Array(r),c=1,d=0;d<r;d++)l[d]=c,c*=2,c>=r&&(c^=t,c&=r-1);a.expTable=l;for(var f=new Int32Array(r),d=0;d<r-1;d++)f[l[d]]=d;return a.logTable=f,a.zero=new wa(a,Int32Array.from([0])),a.one=new wa(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Je;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new wa(this,i)},e.prototype.inverse=function(t){if(t===0)throw new Sw;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+vt.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(Rl),y6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Nu=(function(n){y6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(wr),v6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),nc=(function(n){v6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(wr),Ed=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new wa(r,e),a=new Int32Array(t),l=!0,c=0;c<t;c++){var d=i.evaluateAt(r.exp(c+r.getGeneratorBase()));a[a.length-1-c]=d,d!==0&&(l=!1)}if(!l)for(var f=new wa(r,a),g=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),m=g[0],y=g[1],x=this.findErrorLocations(m),w=this.findErrorMagnitudes(y,x),c=0;c<x.length;c++){var _=e.length-1-r.log(x[c]);if(_<0)throw new Nu("Bad error location");e[_]=xr.addOrSubtract(e[_],w[c])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,l=e,c=t,d=a.getZero(),f=a.getOne();c.getDegree()>=(r/2|0);){var g=l,m=d;if(l=c,d=f,l.isZero())throw new Nu("r_{i-1} was zero");c=g;for(var y=a.getZero(),x=l.getCoefficient(l.getDegree()),w=a.inverse(x);c.getDegree()>=l.getDegree()&&!c.isZero();){var _=c.getDegree()-l.getDegree(),A=a.multiply(c.getCoefficient(c.getDegree()),w);y=y.addOrSubtract(a.buildMonomial(_,A)),c=c.addOrSubtract(l.multiplyByMonomial(_,A))}if(f=y.multiply(d).addOrSubtract(m),c.getDegree()>=l.getDegree())throw new nc("Division algorithm failed to reduce polynomial?")}var E=f.getCoefficient(0);if(E===0)throw new Nu("sigmaTilde(0) was zero");var S=a.inverse(E),T=f.multiplyScalar(S),R=c.multiplyScalar(S);return[T,R]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,l=1;l<a.getSize()&&i<t;l++)e.evaluateAt(l)===0&&(r[i]=a.inverse(l),i++);if(i!==t)throw new Nu("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,l=0;l<r;l++){for(var c=a.inverse(t[l]),d=1,f=0;f<r;f++)if(l!==f){var g=a.multiply(t[f],c),m=(g&1)===0?g|1:g&-2;d=a.multiply(d,m)}i[l]=a.multiply(e.evaluateAt(c),a.inverse(d)),a.getGeneratorBase()!==0&&(i[l]=a.multiply(i[l],c))}return i},n})(),Zn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Zn||(Zn={}));var cx=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),l=n.getEncodedData(i),c=new Cd(a,l,null,null);return c.setNumBits(i.length),c},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Zn.UPPER,i=Zn.UPPER,a="",l=0;l<t;)if(i===Zn.BINARY){if(t-l<5)break;var c=n.readCode(e,l,5);if(l+=5,c===0){if(t-l<11)break;c=n.readCode(e,l,11)+31,l+=11}for(var d=0;d<c;d++){if(t-l<8){l=t;break}var f=n.readCode(e,l,8);a+=At.castAsNonUtf8Char(f),l+=8}i=r}else{var g=i===Zn.DIGIT?4:5;if(t-l<g)break;var f=n.readCode(e,l,g);l+=g;var m=n.getCharacter(i,f);m.startsWith("CTRL_")?(r=i,i=n.getTable(m.charAt(5)),m.charAt(6)==="L"&&(r=i)):(a+=m,i=r)}return a},n.getTable=function(e){switch(e){case"L":return Zn.LOWER;case"P":return Zn.PUNCT;case"M":return Zn.MIXED;case"D":return Zn.DIGIT;case"B":return Zn.BINARY;case"U":default:return Zn.UPPER}},n.getCharacter=function(e,t){switch(e){case Zn.UPPER:return n.UPPER_TABLE[t];case Zn.LOWER:return n.LOWER_TABLE[t];case Zn.MIXED:return n.MIXED_TABLE[t];case Zn.PUNCT:return n.PUNCT_TABLE[t];case Zn.DIGIT:return n.DIGIT_TABLE[t];default:throw new nc("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=xr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=xr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=xr.AZTEC_DATA_10):(r=12,t=xr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new Ae;for(var l=e.length%r,c=new Int32Array(a),d=0;d<a;d++,l+=r)c[d]=n.readCode(e,l,r);try{var f=new Ed(t);f.decode(c,a-i)}catch(A){throw new Ae(A)}for(var g=(1<<r)-1,m=0,d=0;d<i;d++){var y=c[d];if(y===0||y===g)throw new Ae;(y===1||y===g-1)&&m++}for(var x=new Array(i*r-m),w=0,d=0;d<i;d++){var y=c[d];if(y===1||y===g-1)x.fill(y>1,w,w+r-1),w+=r-1;else for(var _=r-1;_>=0;--_)x[w++]=(y&1<<_)!==0}return x},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),l=new Array(this.totalBitsInLayer(r,t));if(t)for(var c=0;c<a.length;c++)a[c]=c;else for(var d=i+1+2*vt.truncDivision(vt.truncDivision(i,2)-1,15),f=i/2,g=vt.truncDivision(d,2),c=0;c<f;c++){var m=c+vt.truncDivision(c,15);a[f-c-1]=g-m-1,a[f+c]=g+m+1}for(var c=0,y=0;c<r;c++){for(var x=(r-c)*4+(t?9:12),w=c*2,_=i-1-w,A=0;A<x;A++)for(var E=A*2,S=0;S<2;S++)l[y+E+S]=e.get(a[w+S],a[w+A]),l[y+2*x+E+S]=e.get(a[w+A],a[_-S]),l[y+4*x+E+S]=e.get(a[_-S],a[_-A]),l[y+6*x+E+S]=e.get(a[_-A],a[w+S]);y+=x*8}return l},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),Nt=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,l=t-i;return Math.sqrt(a*a+l*l)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n})(),W0=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),qe=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*W0.floatToIntBits(this.x)+W0.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,l,c;if(r>=t&&r>=i?(l=e[0],a=e[1],c=e[2]):i>=r&&i>=t?(l=e[1],a=e[0],c=e[2]):(l=e[2],a=e[0],c=e[1]),this.crossProductZ(a,l,c)<0){var d=a;a=c,c=d}e[0]=a,e[1]=l,e[2]=c},n.distance=function(e,t){return Nt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n})(),Fp=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),x6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),b6=(function(n){x6(e,n);function e(t,r,i,a,l){var c=n.call(this,t,r)||this;return c.compact=i,c.nbDatablocks=a,c.nbLayers=l,c}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Fp),X0=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new le}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,l=!0,c=!1,d=!1,f=!1,g=!1,m=!1,y=this.width,x=this.height;l;){l=!1;for(var w=!0;(w||!d)&&t<y;)w=this.containsBlackPoint(r,i,t,!1),w?(t++,l=!0,d=!0):d||t++;if(t>=y){a=!0;break}for(var _=!0;(_||!f)&&i<x;)_=this.containsBlackPoint(e,t,i,!0),_?(i++,l=!0,f=!0):f||i++;if(i>=x){a=!0;break}for(var A=!0;(A||!g)&&e>=0;)A=this.containsBlackPoint(r,i,e,!1),A?(e--,l=!0,g=!0):g||e--;if(e<0){a=!0;break}for(var E=!0;(E||!m)&&r>=0;)E=this.containsBlackPoint(e,t,r,!0),E?(r--,l=!0,m=!0):m||r--;if(r<0){a=!0;break}l&&(c=!0)}if(!a&&c){for(var S=t-e,T=null,R=1;T===null&&R<S;R++)T=this.getBlackPointOnSegment(e,i-R,e+R,i);if(T==null)throw new le;for(var N=null,R=1;N===null&&R<S;R++)N=this.getBlackPointOnSegment(e,r+R,e+R,r);if(N==null)throw new le;for(var k=null,R=1;k===null&&R<S;R++)k=this.getBlackPointOnSegment(t,r+R,t-R,r);if(k==null)throw new le;for(var M=null,R=1;M===null&&R<S;R++)M=this.getBlackPointOnSegment(t,i-R,t-R,i);if(M==null)throw new le;return this.centerEdges(M,T,k,N)}else throw new le},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=Nt.round(Nt.distance(e,t,r,i)),l=(r-e)/a,c=(i-t)/a,d=this.image,f=0;f<a;f++){var g=Nt.round(e+f*l),m=Nt.round(t+f*c);if(d.get(g,m))return new qe(g,m)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),l=e.getY(),c=t.getX(),d=t.getY(),f=r.getX(),g=r.getY(),m=i.getX(),y=i.getY(),x=n.CORR;return a<this.width/2?[new qe(m-x,y+x),new qe(c+x,d+x),new qe(f-x,g-x),new qe(a+x,l-x)]:[new qe(m+x,y+x),new qe(c+x,d-x),new qe(f-x,g+x),new qe(a-x,l-x)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var l=e;l<=t;l++)if(a.get(l,r))return!0}else for(var c=e;c<=t;c++)if(a.get(r,c))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),ux=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,l=0;l<t.length&&a;l+=2){var c=Math.floor(t[l]),d=Math.floor(t[l+1]);if(c<-1||c>r||d<-1||d>i)throw new le;a=!1,c===-1?(t[l]=0,a=!0):c===r&&(t[l]=r-1,a=!0),d===-1?(t[l+1]=0,a=!0):d===i&&(t[l+1]=i-1,a=!0)}a=!0;for(var l=t.length-2;l>=0&&a;l-=2){var c=Math.floor(t[l]),d=Math.floor(t[l+1]);if(c<-1||c>r||d<-1||d>i)throw new le;a=!1,c===-1?(t[l]=0,a=!0):c===r&&(t[l]=r-1,a=!0),d===-1?(t[l+1]=0,a=!0):d===i&&(t[l+1]=i-1,a=!0)}},n})(),Cw=(function(){function n(e,t,r,i,a,l,c,d,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=l,this.a13=c,this.a23=d,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,l,c,d,f,g,m,y,x,w,_,A){var E=n.quadrilateralToSquare(e,t,r,i,a,l,c,d),S=n.squareToQuadrilateral(f,g,m,y,x,w,_,A);return S.times(E)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,l=this.a21,c=this.a22,d=this.a23,f=this.a31,g=this.a32,m=this.a33,y=0;y<t;y+=2){var x=e[y],w=e[y+1],_=a*x+d*w+m;e[y]=(r*x+l*w+f)/_,e[y+1]=(i*x+c*w+g)/_}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,l=this.a21,c=this.a22,d=this.a23,f=this.a31,g=this.a32,m=this.a33,y=e.length,x=0;x<y;x++){var w=e[x],_=t[x],A=a*w+d*_+m;e[x]=(r*w+l*_+f)/A,t[x]=(i*w+c*_+g)/A}},n.squareToQuadrilateral=function(e,t,r,i,a,l,c,d){var f=e-r+a-c,g=t-i+l-d;if(f===0&&g===0)return new n(r-e,a-r,e,i-t,l-i,t,0,0,1);var m=r-a,y=c-a,x=i-l,w=d-l,_=m*w-y*x,A=(f*w-y*g)/_,E=(m*g-f*x)/_;return new n(r-e+A*r,c-e+E*c,e,i-t+A*i,d-t+E*d,t,A,E,1)},n.quadrilateralToSquare=function(e,t,r,i,a,l,c,d){return n.squareToQuadrilateral(e,t,r,i,a,l,c,d).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),w6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_6=(function(n){w6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,l,c,d,f,g,m,y,x,w,_,A,E,S,T,R){var N=Cw.quadrilateralToQuadrilateral(a,l,c,d,f,g,m,y,x,w,_,A,E,S,T,R);return this.sampleGridWithTransform(t,r,i,N)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new le;for(var l=new vi(r,i),c=new Float32Array(2*r),d=0;d<i;d++){for(var f=c.length,g=d+.5,m=0;m<f;m+=2)c[m]=m/2+.5,c[m+1]=g;a.transformPoints(c),ux.checkAndNudgePoints(t,c);try{for(var m=0;m<f;m+=2)t.get(Math.floor(c[m]),Math.floor(c[m+1]))&&l.set(m/2,d)}catch{throw new le}}return l},e})(ux),Up=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new _6,n})(),vr=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new qe(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),S6=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),l=this.getMatrixCornerPoints(r);return new b6(a,l,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new le;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var l=r[(this.shift+a)%4];this.compact?(i<<=7,i+=l>>1&127):(i<<=10,i+=(l>>2&992)+(l>>1&31))}var c=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,l,c){var d=(a>>t-2<<1)+(a&1);r=(r<<3)+d}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(vt.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new le},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,l=new Int32Array(r),c=r-1;c>=0;--c)l[c]=e&15,e>>=4;try{var d=new Ed(xr.AZTEC_PARAM);d.decode(l,a)}catch{throw new le}for(var f=0,c=0;c<i;c++)f=(f<<4)+l[c];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,l=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var c=this.getFirstDifferent(t,l,1,-1),d=this.getFirstDifferent(r,l,1,1),f=this.getFirstDifferent(i,l,-1,1),g=this.getFirstDifferent(a,l,-1,-1);if(this.nbCenterLayers>2){var m=this.distancePoint(g,c)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(m<.75||m>1.25||!this.isWhiteOrBlackRectangle(c,d,f,g))break}t=c,r=d,i=f,a=g,l=!l}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new le;this.compact=this.nbCenterLayers===5;var y=new qe(t.getX()+.5,t.getY()-.5),x=new qe(r.getX()+.5,r.getY()+.5),w=new qe(i.getX()-.5,i.getY()+.5),_=new qe(a.getX()-.5,a.getY()-.5);return this.expandSquare([y,x,w,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new X0(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var l=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new vr(l+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new vr(l+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new vr(l-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new vr(l-7,c-7),!1,-1,-1).toResultPoint()}var d=Nt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=Nt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new X0(this.image,15,d,f).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new vr(d+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new vr(d+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new vr(d-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new vr(d-7,f-7),!1,-1,-1).toResultPoint()}return d=Nt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=Nt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new vr(d,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var l=Up.getInstance(),c=this.getDimension(),d=c/2-this.nbCenterLayers,f=c/2+this.nbCenterLayers;return l.sampleGrid(e,c,c,d,d,f,d,f,f,d,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),l=a/r,c=e.getX(),d=e.getY(),f=l*(t.getX()-e.getX())/a,g=l*(t.getY()-e.getY())/a,m=0;m<r;m++)this.image.get(Nt.round(c+m*f),Nt.round(d+m*g))&&(i|=1<<r-m-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new vr(e.getX()-a,e.getY()+a),t=new vr(t.getX()-a,t.getY()-a),r=new vr(r.getX()+a,r.getY()-a),i=new vr(i.getX()+a,i.getY()+a);var l=this.getColor(i,e);if(l===0)return!1;var c=this.getColor(e,t);return c!==l||(c=this.getColor(t,r),c!==l)?!1:(c=this.getColor(r,i),c===l)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,l=0,c=e.getX(),d=e.getY(),f=this.image.get(e.getX(),e.getY()),g=Math.ceil(r),m=0;m<g;m++)c+=i,d+=a,this.image.get(Nt.round(c),Nt.round(d))!==f&&l++;var y=l/r;return y>.1&&y<.9?0:y<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,l=e.getY()+i;this.isValid(a,l)&&this.image.get(a,l)===t;)a+=r,l+=i;for(a-=r,l-=i;this.isValid(a,l)&&this.image.get(a,l)===t;)a+=r;for(a-=r;this.isValid(a,l)&&this.image.get(a,l)===t;)l+=i;return l-=i,new vr(a,l)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),l=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,d=(e[0].getY()+e[2].getY())/2,f=new qe(c+i*a,d+i*l),g=new qe(c-i*a,d-i*l);a=e[1].getX()-e[3].getX(),l=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,d=(e[1].getY()+e[3].getY())/2;var m=new qe(c+i*a,d+i*l),y=new qe(c-i*a,d-i*l),x=[f,m,g,y];return x},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=Nt.round(e.getX()),r=Nt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return Nt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return Nt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(vt.truncDivision(this.nbLayers-4,8)+1)+15},n})(),ad=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new S6(e.getBlackMatrix()),a=null,l=null;try{var c=i.detectMirror(!1);a=c.getPoints(),this.reportFoundResultPoints(t,a),l=new cx().decode(c)}catch(m){r=m}if(l==null)try{var c=i.detectMirror(!0);a=c.getPoints(),this.reportFoundResultPoints(t,a),l=new cx().decode(c)}catch(m){throw r??m}var d=new ar(l.getText(),l.getRawBytes(),l.getNumBits(),a,Qe.AZTEC,Kt.currentTimeMillis()),f=l.getByteSegments();f!=null&&d.putMetadata(er.BYTE_SEGMENTS,f);var g=l.getECLevel();return g!=null&&d.putMetadata(er.ERROR_CORRECTION_LEVEL,g),d},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Zt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,l){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),C6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){C6(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new ad,t)||this}return e})(As);var Fn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Zt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),l=a.getResultMetadata(),c=270;l!==null&&l.get(er.ORIENTATION)===!0&&(c=c+l.get(er.ORIENTATION)%360),a.putMetadata(er.ORIENTATION,c);var d=a.getResultPoints();if(d!==null)for(var f=i.getHeight(),g=0;g<d.length;g++)d[g]=new qe(f-d[g].getY()-1,d[g].getX());return a}else throw new le}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new qn(r),l=t&&t.get(Zt.TRY_HARDER)===!0,c=Math.max(1,i>>(l?8:5)),d;l?d=i:d=15;for(var f=Math.trunc(i/2),g=0;g<d;g++){var m=Math.trunc((g+1)/2),y=(g&1)===0,x=f+c*(y?m:-m);if(x<0||x>=i)break;try{a=e.getBlackRow(x,a)}catch{continue}for(var w=function(S){if(S===1&&(a.reverse(),t&&t.get(Zt.NEED_RESULT_POINT_CALLBACK)===!0)){var T=new Map;t.forEach(function(k,M){return T.set(M,k)}),T.delete(Zt.NEED_RESULT_POINT_CALLBACK),t=T}try{var R=_.decodeRow(x,a,t);if(S===1){R.putMetadata(er.ORIENTATION,180);var N=R.getResultPoints();N!==null&&(N[0]=new qe(r-N[0].getX()-1,N[0].getY()),N[1]=new qe(r-N[1].getX()-1,N[1].getY()))}return{value:R}}catch{}},_=this,A=0;A<2;A++){var E=w(A);if(typeof E=="object")return E.value}}throw new le},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var l=e.getSize();if(t>=l)throw new le;for(var c=!e.get(t),d=0,f=t;f<l;){if(e.get(f)!==c)r[d]++;else{if(++d===i)break;r[d]=1,c=!c}f++}if(!(d===i||d===i-1&&f===l))throw new le},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new le;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,l=0,c=0;c<i;c++)a+=e[c],l+=t[c];if(a<l)return Number.POSITIVE_INFINITY;var d=a/l;r*=d;for(var f=0,g=0;g<i;g++){var m=e[g],y=t[g]*d,x=m>y?m-y:y-m;if(x>r)return Number.POSITIVE_INFINITY;f+=x}return f/a},n})(),E6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dx=(function(n){E6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,l=Int32Array.from([0,0,0,0,0,0]),c=i,d=!1,f=6,g=i;g<r;g++)if(t.get(g)!==d)l[a]++;else{if(a===f-1){for(var m=e.MAX_AVG_VARIANCE,y=-1,x=e.CODE_START_A;x<=e.CODE_START_C;x++){var w=Fn.patternMatchVariance(l,e.CODE_PATTERNS[x],e.MAX_INDIVIDUAL_VARIANCE);w<m&&(m=w,y=x)}if(y>=0&&t.isRange(Math.max(0,c-(g-c)/2),c,!1))return Int32Array.from([c,g,y]);c+=l[0]+l[1],l=l.slice(2,l.length),l[a-1]=0,l[a]=0,a--}else a++;l[a]=1,d=!d}throw new le},e.decodeCode=function(t,r,i){Fn.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,l=-1,c=0;c<e.CODE_PATTERNS.length;c++){var d=e.CODE_PATTERNS[c],f=this.patternMatchVariance(r,d,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,l=c)}if(l>=0)return l;throw new le},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Zt.ASSUME_GS1)===!0,l=e.findStartPattern(r),c=l[2],d=0,f=new Uint8Array(20);f[d++]=c;var g;switch(c){case e.CODE_START_A:g=e.CODE_CODE_A;break;case e.CODE_START_B:g=e.CODE_CODE_B;break;case e.CODE_START_C:g=e.CODE_CODE_C;break;default:throw new Ae}for(var m=!1,y=!1,x="",w=l[0],_=l[1],A=Int32Array.from([0,0,0,0,0,0]),E=0,S=0,T=c,R=0,N=!0,k=!1,M=!1;!m;){var V=y;switch(y=!1,E=S,S=e.decodeCode(r,A,_),f[d++]=S,S!==e.CODE_STOP&&(N=!0),S!==e.CODE_STOP&&(R++,T+=R*S),w=_,_+=A.reduce(function(te,ce){return te+ce},0),S){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Ae}switch(g){case e.CODE_CODE_A:if(S<64)M===k?x+=String.fromCharCode(32+S):x+=String.fromCharCode(32+S+128),M=!1;else if(S<96)M===k?x+=String.fromCharCode(S-64):x+=String.fromCharCode(S+64),M=!1;else switch(S!==e.CODE_STOP&&(N=!1),S){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!k&&M?(k=!0,M=!1):k&&M?(k=!1,M=!1):M=!0;break;case e.CODE_SHIFT:y=!0,g=e.CODE_CODE_B;break;case e.CODE_CODE_B:g=e.CODE_CODE_B;break;case e.CODE_CODE_C:g=e.CODE_CODE_C;break;case e.CODE_STOP:m=!0;break}break;case e.CODE_CODE_B:if(S<96)M===k?x+=String.fromCharCode(32+S):x+=String.fromCharCode(32+S+128),M=!1;else switch(S!==e.CODE_STOP&&(N=!1),S){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!k&&M?(k=!0,M=!1):k&&M?(k=!1,M=!1):M=!0;break;case e.CODE_SHIFT:y=!0,g=e.CODE_CODE_A;break;case e.CODE_CODE_A:g=e.CODE_CODE_A;break;case e.CODE_CODE_C:g=e.CODE_CODE_C;break;case e.CODE_STOP:m=!0;break}break;case e.CODE_CODE_C:if(S<100)S<10&&(x+="0"),x+=S;else switch(S!==e.CODE_STOP&&(N=!1),S){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_CODE_A:g=e.CODE_CODE_A;break;case e.CODE_CODE_B:g=e.CODE_CODE_B;break;case e.CODE_STOP:m=!0;break}break}V&&(g=g===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var ie=_-w;if(_=r.getNextUnset(_),!r.isRange(_,Math.min(r.getSize(),_+(_-w)/2),!1))throw new le;if(T-=R*E,T%103!==E)throw new In;var fe=x.length;if(fe===0)throw new le;fe>0&&N&&(g===e.CODE_CODE_C?x=x.substring(0,fe-2):x=x.substring(0,fe-1));for(var xe=(l[1]+l[0])/2,q=w+ie/2,we=f.length,Te=new Uint8Array(we),ae=0;ae<we;ae++)Te[ae]=f[ae];var L=[new qe(xe,t),new qe(q,t)];return new ar(x,Te,0,L,Qe.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(Fn),A6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),r0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fx=(function(n){A6(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,l,c,d,f=this.counters;f.fill(0),this.decodeRowResult="";var g=e.findAsteriskPattern(r,f),m=r.getNextSet(g[1]),y=r.getSize(),x,w;do{e.recordPattern(r,m,f);var _=e.toNarrowWidePattern(f);if(_<0)throw new le;x=e.patternToChar(_),this.decodeRowResult+=x,w=m;try{for(var A=(a=void 0,r0(f)),E=A.next();!E.done;E=A.next()){var S=E.value;m+=S}}catch(we){a={error:we}}finally{try{E&&!E.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}m=r.getNextSet(m)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var T=0;try{for(var R=r0(f),N=R.next();!N.done;N=R.next()){var S=N.value;T+=S}}catch(we){c={error:we}}finally{try{N&&!N.done&&(d=R.return)&&d.call(R)}finally{if(c)throw c.error}}var k=m-w-T;if(m!==y&&k*2<T)throw new le;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,V=0,ie=0;ie<M;ie++)V+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ie));if(this.decodeRowResult.charAt(M)!==e.ALPHABET_STRING.charAt(V%43))throw new In;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new le;var fe;this.extendedMode?fe=e.decodeExtended(this.decodeRowResult):fe=this.decodeRowResult;var xe=(g[1]+g[0])/2,q=w+T/2;return new ar(fe,null,0,[new qe(xe,t),new qe(q,t)],Qe.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),l=0,c=a,d=!1,f=r.length,g=a;g<i;g++)if(t.get(g)!==d)r[l]++;else{if(l===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((g-c)/2)),c,!1))return[c,g];c+=r[0]+r[1],r.copyWithin(0,2,2+l-1),r[l-1]=0,r[l]=0,l--}else l++;r[l]=1,d=!d}throw new le},e.toNarrowWidePattern=function(t){var r,i,a=t.length,l=0,c;do{var d=2147483647;try{for(var f=(r=void 0,r0(t)),g=f.next();!g.done;g=f.next()){var m=g.value;m<d&&m>l&&(d=m)}}catch(_){r={error:_}}finally{try{g&&!g.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}l=d,c=0;for(var y=0,x=0,w=0;w<a;w++){var m=t[w];m>l&&(x|=1<<a-1-w,c++,y+=m)}if(c===3){for(var w=0;w<a&&c>0;w++){var m=t[w];if(m>l&&(c--,m*2>=y))return-1}return x}}while(c>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new le},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var l=t.charAt(a);if(l==="+"||l==="$"||l==="%"||l==="/"){var c=t.charAt(a+1),d="\0";switch(l){case"+":if(c>="A"&&c<="Z")d=String.fromCharCode(c.charCodeAt(0)+32);else throw new Ae;break;case"$":if(c>="A"&&c<="Z")d=String.fromCharCode(c.charCodeAt(0)-64);else throw new Ae;break;case"%":if(c>="A"&&c<="E")d=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")d=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")d=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")d=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")d="\0";else if(c==="V")d="@";else if(c==="W")d="`";else if(c==="X"||c==="Y"||c==="Z")d="";else throw new Ae;break;case"/":if(c>="A"&&c<="O")d=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")d=":";else throw new Ae;break}i+=d,a++}else i+=l}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(Fn),T6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),i0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hx=(function(n){T6(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,l,c,d,f=this.findAsteriskPattern(r),g=r.getNextSet(f[1]),m=r.getSize(),y=this.counters;y.fill(0),this.decodeRowResult="";var x,w;do{e.recordPattern(r,g,y);var _=this.toPattern(y);if(_<0)throw new le;x=this.patternToChar(_),this.decodeRowResult+=x,w=g;try{for(var A=(a=void 0,i0(y)),E=A.next();!E.done;E=A.next()){var S=E.value;g+=S}}catch(ie){a={error:ie}}finally{try{E&&!E.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var T=0;try{for(var R=i0(y),N=R.next();!N.done;N=R.next()){var S=N.value;T+=S}}catch(ie){c={error:ie}}finally{try{N&&!N.done&&(d=R.return)&&d.call(R)}finally{if(c)throw c.error}}if(g===m||!r.get(g))throw new le;if(this.decodeRowResult.length<2)throw new le;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var k=this.decodeExtended(this.decodeRowResult),M=(f[1]+f[0])/2,V=w+T/2;return new ar(k,null,0,[new qe(M,t),new qe(V,t)],Qe.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,l=i,c=!1,d=a.length,f=0,g=i;g<r;g++)if(t.get(g)!==c)a[f]++;else{if(f===d-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([l,g]);l+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,c=!c}throw new le},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var l=i0(t),c=l.next();!c.done;c=l.next()){var d=c.value;a+=d}}catch(w){r={error:w}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}for(var f=0,g=t.length,m=0;m<g;m++){var y=Math.round(t[m]*9/a);if(y<1||y>4)return-1;if((m&1)===0)for(var x=0;x<y;x++)f=f<<1|1;else f<<=y}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new le},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var l=t.charAt(a);if(l>="a"&&l<="d"){if(a>=r-1)throw new Ae;var c=t.charAt(a+1),d="\0";switch(l){case"d":if(c>="A"&&c<="Z")d=String.fromCharCode(c.charCodeAt(0)+32);else throw new Ae;break;case"a":if(c>="A"&&c<="Z")d=String.fromCharCode(c.charCodeAt(0)-64);else throw new Ae;break;case"b":if(c>="A"&&c<="E")d=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")d=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")d=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")d=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")d="\0";else if(c==="V")d="@";else if(c==="W")d="`";else if(c>="X"&&c<="Z")d="";else throw new Ae;break;case"c":if(c>="A"&&c<="O")d=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")d=":";else throw new Ae;break}i+=d,a++}else i+=l}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,l=0,c=r-1;c>=0;c--)l+=a*e.ALPHABET_STRING.indexOf(t.charAt(c)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[l%47])throw new In},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(Fn),O6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),R6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},px=(function(n){O6(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,l,c=this.decodeStart(r),d=this.decodeEnd(r),f=new yt;e.decodeMiddle(r,c[1],d[0],f);var g=f.toString(),m=null;i!=null&&(m=i.get(Zt.ALLOWED_LENGTHS)),m==null&&(m=e.DEFAULT_ALLOWED_LENGTHS);var y=g.length,x=!1,w=0;try{for(var _=R6(m),A=_.next();!A.done;A=_.next()){var E=A.value;if(y===E){x=!0;break}E>w&&(w=E)}}catch(R){a={error:R}}finally{try{A&&!A.done&&(l=_.return)&&l.call(_)}finally{if(a)throw a.error}}if(!x&&y>w&&(x=!0),!x)throw new Ae;var S=[new qe(c[1],t),new qe(d[0],t)],T=new ar(g,null,0,S,Qe.ITF,new Date().getTime());return T},e.decodeMiddle=function(t,r,i,a){var l=new Int32Array(10),c=new Int32Array(5),d=new Int32Array(5);for(l.fill(0),c.fill(0),d.fill(0);r<i;){Fn.recordPattern(t,r,l);for(var f=0;f<5;f++){var g=2*f;c[f]=l[g],d[f]=l[g+1]}var m=e.decodeDigit(c);a.append(m.toString()),m=this.decodeDigit(d),a.append(m.toString()),l.forEach(function(y){r+=y})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new le},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new le;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(l){l instanceof le&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,l=new Int32Array(a),c=t.getSize(),d=!1,f=0,g=r;l.fill(0);for(var m=r;m<c;m++)if(t.get(m)!==d)l[f]++;else{if(f===a-1){if(Fn.patternMatchVariance(l,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[g,m];g+=l[0]+l[1],Kt.arraycopy(l,2,l,0,f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,d=!d}throw new le},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,l=0;l<a;l++){var c=e.PATTERNS[l],d=Fn.patternMatchVariance(t,c,e.MAX_INDIVIDUAL_VARIANCE);d<r?(r=d,i=l):d===r&&(i=-1)}if(i>=0)return i%10;throw new le},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(Fn),I6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xs=(function(n){I6(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,l=Int32Array.from([0,0,0]);!r;){l=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,l);var c=i[0];a=i[1];var d=c-(a-c);d>=0&&(r=t.isRange(d,c,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Ae;i+=l}i*=3;for(var a=r-2;a>=0;a-=2){var l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Ae;i+=l}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,l){var c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var d=0,f=r,g=a.length,m=i,y=r;y<c;y++)if(t.get(y)!==m)l[d]++;else{if(d===g-1){if(Fn.patternMatchVariance(l,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,y]);f+=l[0]+l[1];for(var x=l.slice(2,l.length),w=0;w<d-1;w++)l[w]=x[w];l[d-1]=0,l[d]=0,d--}else d++;l[d]=1,m=!m}throw new le},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var l=this.MAX_AVG_VARIANCE,c=-1,d=a.length,f=0;f<d;f++){var g=a[f],m=Fn.patternMatchVariance(r,g,e.MAX_INDIVIDUAL_VARIANCE);m<l&&(l=m,c=f)}if(c>=0)return c;throw new le},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(Fn),N6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k6=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),l=i.toString(),c=n.parseExtensionString(l),d=[new qe((r[0]+r[1])/2,e),new qe(a,e)],f=new ar(l,null,0,d,Qe.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&f.putAllMetadata(c),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=e.getSize(),d=t[1],f=0,g=0;g<5&&d<c;g++){var m=xs.decodeDigit(e,l,d,xs.L_AND_G_PATTERNS);r+=String.fromCharCode(48+m%10);try{for(var y=(i=void 0,N6(l)),x=y.next();!x.done;x=y.next()){var w=x.value;d+=w}}catch(A){i={error:A}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}m>=10&&(f|=1<<4-g),g!==4&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(r.length!==5)throw new le;var _=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==_)throw new le;return d},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new le},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[er.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,l=a<10?"0"+a:a.toString();return t+i+"."+l},n})(),D6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j6=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),l=i.toString(),c=n.parseExtensionString(l),d=[new qe((r[0]+r[1])/2,e),new qe(a,e)],f=new ar(l,null,0,d,Qe.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&f.putAllMetadata(c),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=e.getSize(),d=t[1],f=0,g=0;g<2&&d<c;g++){var m=xs.decodeDigit(e,l,d,xs.L_AND_G_PATTERNS);r+=String.fromCharCode(48+m%10);try{for(var y=(i=void 0,D6(l)),x=y.next();!x.done;x=y.next()){var w=x.value;d+=w}}catch(_){i={error:_}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}m>=10&&(f|=1<<1-g),g!==1&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(r.length!==2)throw new le;if(parseInt(r.toString())%4!==f)throw new le;return d},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[er.ISSUE_NUMBER,parseInt(e)]])},n})(),M6=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=xs.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new k6;return a.decodeRow(e,t,i)}catch{var l=new j6;return l.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),P6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Pn=(function(n){P6(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(c){return Int32Array.from(c)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),l=0;l<i.length;l++)a[l]=i[i.length-l-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),l=i==null?null:i.get(Zt.NEED_RESULT_POINT_CALLBACK);if(l!=null){var c=new qe((a[0]+a[1])/2,t);l.foundPossibleResultPoint(c)}var d=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=d.rowOffset,g=d.resultString;if(l!=null){var m=new qe(f,t);l.foundPossibleResultPoint(m)}var y=e.decodeEnd(r,f);if(l!=null){var x=new qe((y[0]+y[1])/2,t);l.foundPossibleResultPoint(x)}var w=y[1],_=w+(w-y[0]);if(_>=r.getSize()||!r.isRange(w,_,!1))throw new le;var A=g.toString();if(A.length<8)throw new Ae;if(!e.checkChecksum(A))throw new In;var E=(a[1]+a[0])/2,S=(y[1]+y[0])/2,T=this.getBarcodeFormat(),R=[new qe(E,t),new qe(S,t)],N=new ar(A,null,0,R,T,new Date().getTime()),k=0;try{var M=M6.decodeRow(t,r,y[1]);N.putMetadata(er.UPC_EAN_EXTENSION,M.getText()),N.putAllMetadata(M.getResultMetadata()),N.addResultPoints(M.getResultPoints()),k=M.getText().length}catch{}var V=i==null?null:i.get(Zt.ALLOWED_EAN_EXTENSIONS);if(V!=null){var ie=!1;for(var fe in V)if(k.toString()===fe){ie=!0;break}if(!ie)throw new le}return T===Qe.EAN_13||Qe.UPC_A,N},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Ae;i+=l}i*=3;for(var a=r-2;a>=0;a-=2){var l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Ae;i+=l}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(xs),B6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y0=(function(n){B6(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,l,c,d,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var g=t.getSize(),m=r[1],y=0,x=0;x<6&&m<g;x++){var w=Pn.decodeDigit(t,f,m,Pn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+w%10);try{for(var _=(a=void 0,gx(f)),A=_.next();!A.done;A=_.next()){var E=A.value;m+=E}}catch(N){a={error:N}}finally{try{A&&!A.done&&(l=_.return)&&l.call(_)}finally{if(a)throw a.error}}w>=10&&(y|=1<<5-x)}i=e.determineFirstDigit(i,y);var S=Pn.findGuardPattern(t,m,!0,Pn.MIDDLE_PATTERN,new Int32Array(Pn.MIDDLE_PATTERN.length).fill(0));m=S[1];for(var x=0;x<6&&m<g;x++){var w=Pn.decodeDigit(t,f,m,Pn.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var T=(c=void 0,gx(f)),R=T.next();!R.done;R=T.next()){var E=R.value;m+=E}}catch(M){c={error:M}}finally{try{R&&!R.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}}return{rowOffset:m,resultString:i}},e.prototype.getBarcodeFormat=function(){return Qe.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new le},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Pn),L6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yx=(function(n){L6(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,l,c,d,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var g=t.getSize(),m=r[1],y=0;y<4&&m<g;y++){var x=Pn.decodeDigit(t,f,m,Pn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var w=(a=void 0,mx(f)),_=w.next();!_.done;_=w.next()){var A=_.value;m+=A}}catch(R){a={error:R}}finally{try{_&&!_.done&&(l=w.return)&&l.call(w)}finally{if(a)throw a.error}}}var E=Pn.findGuardPattern(t,m,!0,Pn.MIDDLE_PATTERN,new Int32Array(Pn.MIDDLE_PATTERN.length).fill(0));m=E[1];for(var y=0;y<4&&m<g;y++){var x=Pn.decodeDigit(t,f,m,Pn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var S=(c=void 0,mx(f)),T=S.next();!T.done;T=S.next()){var A=T.value;m+=A}}catch(k){c={error:k}}finally{try{T&&!T.done&&(d=S.return)&&d.call(S)}finally{if(c)throw c.error}}}return{rowOffset:m,resultString:i}},e.prototype.getBarcodeFormat=function(){return Qe.EAN_8},e})(Pn),F6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vx=(function(n){F6(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new Y0,t}return e.prototype.getBarcodeFormat=function(){return Qe.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new ar(r.substring(1),null,null,t.getResultPoints(),Qe.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new le},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Pn),U6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),z6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xx=(function(n){U6(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,l,c=this.decodeMiddleCounters.map(function(A){return A});c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var d=t.getSize(),f=r[1],g=0,m=0;m<6&&f<d;m++){var y=e.decodeDigit(t,c,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+y%10);try{for(var x=(a=void 0,z6(c)),w=x.next();!w.done;w=x.next()){var _=w.value;f+=_}}catch(A){a={error:A}}finally{try{w&&!w.done&&(l=x.return)&&l.call(x)}finally{if(a)throw a.error}}y>=10&&(g|=1<<5-m)}return e.determineNumSysAndCheckDigit(new yt(i),g),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Pn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw le.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Qe.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(l){return l.charCodeAt(0)}),i=new yt;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Pn),V6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a0=(function(n){V6(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Zt.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Qe.EAN_13)>-1&&a.push(new Y0),i.indexOf(Qe.UPC_A)>-1&&a.push(new vx),i.indexOf(Qe.EAN_8)>-1&&a.push(new yx),i.indexOf(Qe.UPC_E)>-1&&a.push(new xx)),a.length===0&&(a.push(new Y0),a.push(new vx),a.push(new yx),a.push(new xx)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,l;try{for(var c=bx(this.readers),d=c.next();!d.done;d=c.next()){var f=d.value;try{var g=f.decodeRow(t,r,i),m=g.getBarcodeFormat()===Qe.EAN_13&&g.getText().charAt(0)==="0",y=i==null?null:i.get(Zt.POSSIBLE_FORMATS),x=y==null||y.includes(Qe.UPC_A);if(m&&x){var w=g.getRawBytes(),_=new ar(g.getText().substring(1),w,w?w.length:null,g.getResultPoints(),Qe.UPC_A);return _.putAllMetadata(g.getResultMetadata()),_}return g}catch{}}}catch(A){a={error:A}}finally{try{d&&!d.done&&(l=c.return)&&l.call(c)}finally{if(a)throw a.error}}throw new le},e.prototype.reset=function(){var t,r;try{for(var i=bx(this.readers),a=i.next();!a.done;a=i.next()){var l=a.value;l.reset()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(Fn),H6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$6=(function(n){H6(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new le;var l=this.codaBarDecodeRow(a.row);if(!l)throw new le;return new ar(l,null,0,[new qe(a.left,t),new qe(a.right,t)],Qe.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var l=[],c=r[0],d=1,f=1;f<r.length;f++)r[f]===c?d++:(c=r[f],l.push(d),d=1);return l.push(d),l.length<23&&(l.length+1)%8!==0?null:{row:l,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(d,f){return(d+f)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),l=a.map(function(d){return d<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[l]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[l])}var c=r.join("");return this.validCodaBarString(c)?c:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(Fn),q6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),G6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Za=(function(n){q6(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Fn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new le},e.count=function(t){return Nt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],l=1;l<t.length;l++)r[l]>a&&(a=r[l],i=l);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],l=1;l<t.length;l++)r[l]<a&&(a=r[l],i=l);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],l=a+t[2]+t[3],c=a/l;if(c>=e.MIN_FINDER_PATTERN_RATIO&&c<=e.MAX_FINDER_PATTERN_RATIO){var d=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var g=G6(t),m=g.next();!m.done;m=g.next()){var y=m.value;y>f&&(f=y),y<d&&(d=y)}}catch(x){r={error:x}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}return f<10*d}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(Fn),od=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),Ew=(function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new qe(r,a)),this.resultPoints.push(new qe(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),W6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},os=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,l=0;try{for(var c=W6(e),d=c.next();!d.done;d=c.next()){var f=d.value;l+=f}}catch(S){i={error:S}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}for(var g=0,m=0,y=e.length,x=0;x<y-1;x++){var w=void 0;for(w=1,m|=1<<x;w<e[x];w++,m&=~(1<<x)){var _=n.combins(l-w-1,y-x-2);if(r&&m===0&&l-w-(y-x-1)>=y-x-1&&(_-=n.combins(l-w-(y-x),y-x-2)),y-x-1>1){for(var A=0,E=l-w-(y-x-2);E>t;E--)A+=n.combins(l-w-E-1,y-x-3);_-=A*(y-1-x)}else l-w>t&&_--;g+=_}l-=w}return g},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,l=1,c=e;c>r;c--)a*=c,l<=i&&(a/=l,l++);for(;l<=i;)a/=l,l++;return a},n})(),X6=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new qn(r),a=0,l=e[0],c=l.getRightChar().getValue(),d=11;d>=0;--d)(c&1<<d)!==0&&i.set(a),a++;for(var d=1;d<e.length;++d){for(var f=e[d],g=f.getLeftChar().getValue(),m=11;m>=0;--m)(g&1<<m)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var y=f.getRightChar().getValue(),m=11;m>=0;--m)(y&1<<m)!==0&&i.set(a),a++}return i},n})(),Wa=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),zp=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),Y6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Jr=(function(n){Y6(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(zp),K6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Xa=(function(n){K6(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(zp),Z6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ts=(function(n){Z6(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new Ae;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(zp),ku=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q6=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,l,c,d,f;if(!e)return null;if(e.length<2)throw new le;var g=e.substring(0,2);try{for(var m=ku(n.TWO_DIGIT_DATA_LENGTH),y=m.next();!y.done;y=m.next()){var x=y.value;if(x[0]===g)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,x[2],e):n.processFixedAI(2,x[1],e)}}catch(k){t={error:k}}finally{try{y&&!y.done&&(r=m.return)&&r.call(m)}finally{if(t)throw t.error}}if(e.length<3)throw new le;var w=e.substring(0,3);try{for(var _=ku(n.THREE_DIGIT_DATA_LENGTH),A=_.next();!A.done;A=_.next()){var x=A.value;if(x[0]===w)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,x[2],e):n.processFixedAI(3,x[1],e)}}catch(k){i={error:k}}finally{try{A&&!A.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}try{for(var E=ku(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),S=E.next();!S.done;S=E.next()){var x=S.value;if(x[0]===w)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],e):n.processFixedAI(4,x[1],e)}}catch(k){l={error:k}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}if(e.length<4)throw new le;var T=e.substring(0,4);try{for(var R=ku(n.FOUR_DIGIT_DATA_LENGTH),N=R.next();!N.done;N=R.next()){var x=N.value;if(x[0]===T)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],e):n.processFixedAI(4,x[1],e)}}catch(k){d={error:k}}finally{try{N&&!N.done&&(f=R.return)&&f.call(R)}finally{if(d)throw d.error}}throw new le},n.processFixedAI=function(e,t,r){if(r.length<e)throw new le;var i=r.substring(0,e);if(r.length<e+t)throw new le;var a=r.substring(e,e+t),l=r.substring(e+t),c="("+i+")"+a,d=n.parseFieldsInGeneralPurpose(l);return d==null?c:c+d},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var l=r.substring(e,a),c=r.substring(a),d="("+i+")"+l,f=n.parseFieldsInGeneralPurpose(c);return f==null?d:d+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),Gu=(function(){function n(e){this.buffer=new yt,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),l=Q6.parseFieldsInGeneralPurpose(a.getNewString());if(l!=null&&e.append(l),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new ts(this.information.getSize(),ts.FNC1,ts.FNC1):new ts(this.information.getSize(),t-1,ts.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new ts(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Xa(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Xa(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Xa(this.current.getPosition(),this.buffer.toString()):t=new Xa(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Wa(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Xa(this.current.getPosition(),this.buffer.toString());return new Wa(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Wa(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Xa(this.current.getPosition(),this.buffer.toString());return new Wa(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Wa(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Xa(this.current.getPosition(),this.buffer.toString());return new Wa(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Wa(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Jr(e+5,Jr.FNC1);if(t>=5&&t<15)return new Jr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Jr(e+7,""+(r+1));if(r>=90&&r<116)return new Jr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new Ae}return new Jr(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Jr(e+5,Jr.FNC1);if(t>=5&&t<15)return new Jr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Jr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new nc("Decoding invalid alphanumeric value: "+r)}return new Jr(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),Aw=(function(){function n(e){this.information=e,this.generalDecoder=new Gu(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),J6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ai=(function(n){J6(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var l=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);l/100===0&&t.append("0"),l/10===0&&t.append("0"),t.append(l)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var l=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*l:l}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(Aw),eT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),tT=(function(n){eT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new yt;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(ai),nT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),rT=(function(n){nT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new yt;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(Aw),iT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Wu=(function(n){iT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var l=this.checkWeight(a),c=1e5,d=0;d<5;++d)l/c===0&&t.append("0"),c/=10;t.append(l)},e})(ai),aT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Tw=(function(n){aT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Wu.GTIN_SIZE+e.WEIGHT_SIZE)throw new le;var t=new yt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Wu.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Wu),oT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),sT=(function(n){oT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(Tw),lT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),cT=(function(n){lT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(Tw),uT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dT=(function(n){uT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ai.GTIN_SIZE)throw new le;var t=new yt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ai.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ai.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(ai),fT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hT=(function(n){fT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ai.GTIN_SIZE)throw new le;var t=new yt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ai.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ai.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ai.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(ai),pT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pa=(function(n){pT(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new le;var t=new yt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var l=i%12+1;i/=12;var c=i;c/10===0&&t.append("0"),t.append(c),l/10===0&&t.append("0"),t.append(l),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Wu);function gT(n){try{if(n.get(1))return new tT(n);if(!n.get(2))return new rT(n);var e=Gu.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new sT(n);case 5:return new cT(n)}var t=Gu.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new dT(n);case 13:return new hT(n)}var r=Gu.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new pa(n,"310","11");case 57:return new pa(n,"320","11");case 58:return new pa(n,"310","13");case 59:return new pa(n,"320","13");case 60:return new pa(n,"310","15");case 61:return new pa(n,"320","15");case 62:return new pa(n,"310","17");case 63:return new pa(n,"320","17")}}catch(i){throw console.log(i),new nc("unknown decoder: "+n)}}var wx=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),mT=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(l){i.getLeftChar().getValue()===l.getLeftChar().getValue()&&i.getRightChar().getValue()===l.getRightChar().getValue()&&i.getFinderPatter().getValue()===l.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),yT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ga=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vT=(function(n){yT(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof le){if(!this.pairs.length)throw new le;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new le},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,l=r;l<this.rows.length;l++){var c=this.rows[l];this.pairs.length=0;try{for(var d=(i=void 0,ga(t)),f=d.next();!f.done;f=d.next()){var g=f.value;this.pairs.push(g.getPairs())}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}if(this.pairs.push(c.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var m=new Array(t);m.push(c);try{return this.checkRows(m,l+1)}catch(y){console.log(y)}}}throw new le},e.isValidSequence=function(t){var r,i;try{for(var a=ga(e.FINDER_PATTERN_SEQUENCES),l=a.next();!l.done;l=a.next()){var c=l.value;if(!(t.length>c.length)){for(var d=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==c[f]){d=!1;break}if(d)return!0}}}catch(g){r={error:g}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,l=!1;i<this.rows.length;){var c=this.rows[i];if(c.getRowNumber()>t){l=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),i++}l||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new mT(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,l,c,d,f;try{for(var g=ga(r),m=g.next();!m.done;m=g.next()){var y=m.value;if(y.getPairs().length!==t.length){var x=!0;try{for(var w=(l=void 0,ga(y.getPairs())),_=w.next();!_.done;_=w.next()){var A=_.value,E=!1;try{for(var S=(d=void 0,ga(t)),T=S.next();!T.done;T=S.next()){var R=T.value;if(wx.equals(A,R)){E=!0;break}}}catch(N){d={error:N}}finally{try{T&&!T.done&&(f=S.return)&&f.call(S)}finally{if(d)throw d.error}}E||(x=!1)}}catch(N){l={error:N}}finally{try{_&&!_.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}}}}catch(N){i={error:N}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,l,c,d,f;try{for(var g=ga(r),m=g.next();!m.done;m=g.next()){var y=m.value,x=!0;try{for(var w=(l=void 0,ga(t)),_=w.next();!_.done;_=w.next()){var A=_.value,E=!1;try{for(var S=(d=void 0,ga(y.getPairs())),T=S.next();!T.done;T=S.next()){var R=T.value;if(A.equals(R)){E=!0;break}}}catch(N){d={error:N}}finally{try{T&&!T.done&&(f=S.return)&&f.call(S)}finally{if(d)throw d.error}}if(!E){x=!1;break}}}catch(N){l={error:N}}finally{try{_&&!_.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}if(x)return!0}}catch(N){i={error:N}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=X6.buildBitArray(t),i=gT(r),a=i.parseInformation(),l=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),d=[l[0],l[1],c[0],c[1]];return new ar(a,null,null,d,Qe.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),l=2,c=1;c<this.pairs.size();++c){var d=this.pairs.get(c);a+=d.getLeftChar().getChecksumPortion(),l++;var f=d.getRightChar();f!=null&&(a+=f.getChecksumPortion(),l++)}a%=211;var g=211*(l-4)+a;return g===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var l,c=!0,d=-1;do this.findNextPair(t,r,d),l=this.parseFoundFinderPattern(t,i,a),l===null?d=e.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);var f=this.decodeDataCharacter(t,l,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new le;var g;try{g=this.decodeDataCharacter(t,l,a,!1)}catch(m){g=null,console.log(m)}return new wx(f,g,l,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var l=t.getSize(),c;if(i>=0)c=i;else if(this.isEmptyPair(r))c=0;else{var d=r[r.length-1];c=d.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var g=!1;c<l&&(g=!t.get(c),!!g);)c++;for(var m=0,y=c,x=c;x<l;x++)if(t.get(x)!==g)a[m]++;else{if(m===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=y,this.startEnd[1]=x;return}f&&e.reverseCounters(a),y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,g=!g}throw new le},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,l,c;if(i){for(var d=this.startEnd[0]-1;d>=0&&!t.get(d);)d--;d++,a=this.startEnd[0]-d,l=d,c=this.startEnd[1]}else l=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];var f=this.getDecodeFinderCounters();Kt.arraycopy(f,0,f,1,f.length-1),f[0]=a;var g;try{g=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new Ew(g,[l,c],l,c,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var l=this.getDataCharacterCounters(),c=0;c<l.length;c++)l[c]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],l);else{e.recordPattern(t,r.getStartEnd()[1],l);for(var d=0,f=l.length-1;d<f;d++,f--){var g=l[d];l[d]=l[f],l[f]=g}}var m=17,y=Nt.sum(new Int32Array(l))/m,x=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(y-x)/x>.3)throw new le;for(var w=this.getOddCounts(),_=this.getEvenCounts(),A=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors(),d=0;d<l.length;d++){var S=1*l[d]/y,T=S+.5;if(T<1){if(S<.3)throw new le;T=1}else if(T>8){if(S>8.7)throw new le;T=8}var R=d/2;(d&1)===0?(w[R]=T,A[R]=S-T):(_[R]=T,E[R]=S-T)}this.adjustOddEvenCounts(m);for(var N=4*r.getValue()+(i?0:2)+(a?0:1)-1,k=0,M=0,d=w.length-1;d>=0;d--){if(e.isNotA1left(r,i,a)){var V=e.WEIGHTS[N][2*d];M+=w[d]*V}k+=w[d]}for(var ie=0,d=_.length-1;d>=0;d--)if(e.isNotA1left(r,i,a)){var V=e.WEIGHTS[N][2*d+1];ie+=_[d]*V}var fe=M+ie;if((k&1)!==0||k>13||k<4)throw new le;var xe=(13-k)/2,q=e.SYMBOL_WIDEST[xe],we=9-q,Te=os.getRSSvalue(w,q,!0),ae=os.getRSSvalue(_,we,!1),L=e.EVEN_TOTAL_SUBSET[xe],te=e.GSUM[xe],ce=Te*L+ae+te;return new od(ce,fe)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=Nt.sum(new Int32Array(this.getOddCounts())),i=Nt.sum(new Int32Array(this.getEvenCounts())),a=!1,l=!1;r>13?l=!0:r<4&&(a=!0);var c=!1,d=!1;i>13?d=!0:i<4&&(c=!0);var f=r+i-t,g=(r&1)===1,m=(i&1)===0;if(f===1)if(g){if(m)throw new le;l=!0}else{if(!m)throw new le;d=!0}else if(f===-1)if(g){if(m)throw new le;a=!0}else{if(!m)throw new le;c=!0}else if(f===0){if(g){if(!m)throw new le;r<i?(a=!0,d=!0):(l=!0,c=!0)}else if(m)throw new le}else throw new le;if(a){if(l)throw new le;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(d)throw new le;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(Za),xT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bT=(function(n){xT(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(od),wT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),o0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_x=(function(n){wT(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,l,c,d,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var g=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,g),r.reverse();try{for(var m=o0(this.possibleLeftPairs),y=m.next();!y.done;y=m.next()){var x=y.value;if(x.getCount()>1)try{for(var w=(c=void 0,o0(this.possibleRightPairs)),_=w.next();!_.done;_=w.next()){var A=_.value;if(A.getCount()>1&&e.checkChecksum(x,A))return e.constructResult(x,A)}}catch(E){c={error:E}}finally{try{_&&!_.done&&(d=w.return)&&d.call(w)}finally{if(c)throw c.error}}}}catch(E){a={error:E}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(a)throw a.error}}throw new le},e.addOrTally=function(t,r){var i,a;if(r!=null){var l=!1;try{for(var c=o0(t),d=c.next();!d.done;d=c.next()){var f=d.value;if(f.getValue()===r.getValue()){f.incrementCount(),l=!0;break}}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}l||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),l=new yt,c=13-a.length;c>0;c--)l.append("0");l.append(a);for(var d=0,c=0;c<13;c++){var f=l.charAt(c).charCodeAt(0)-48;d+=(c&1)===0?3*f:f}d=10-d%10,d===10&&(d=0),l.append(d.toString());var g=t.getFinderPattern().getResultPoints(),m=r.getFinderPattern().getResultPoints();return new ar(l.toString(),null,0,[g[0],g[1],m[0],m[1]],Qe.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var l=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,l),d=a==null?null:a.get(Zt.NEED_RESULT_POINT_CALLBACK);if(d!=null){var f=(l[0]+l[1])/2;r&&(f=t.getSize()-1-f),d.foundPossibleResultPoint(new qe(f,i))}var g=this.decodeDataCharacter(t,c,!0),m=this.decodeDataCharacter(t,c,!1);return new bT(1597*g.getValue()+m.getValue(),g.getChecksumPortion()+4*m.getChecksumPortion(),c)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),l=0;l<a.length;l++)a[l]=0;if(i)Fn.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Fn.recordPattern(t,r.getStartEnd()[1]+1,a);for(var c=0,d=a.length-1;c<d;c++,d--){var f=a[c];a[c]=a[d],a[d]=f}}for(var g=i?16:15,m=Nt.sum(new Int32Array(a))/g,y=this.getOddCounts(),x=this.getEvenCounts(),w=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),c=0;c<a.length;c++){var A=a[c]/m,E=Math.floor(A+.5);E<1?E=1:E>8&&(E=8);var S=Math.floor(c/2);(c&1)===0?(y[S]=E,w[S]=A-E):(x[S]=E,_[S]=A-E)}this.adjustOddEvenCounts(i,g);for(var T=0,R=0,c=y.length-1;c>=0;c--)R*=9,R+=y[c],T+=y[c];for(var N=0,k=0,c=x.length-1;c>=0;c--)N*=9,N+=x[c],k+=x[c];var M=R+3*N;if(i){if((T&1)!==0||T>12||T<4)throw new le;var V=(12-T)/2,ie=e.OUTSIDE_ODD_WIDEST[V],fe=9-ie,xe=os.getRSSvalue(y,ie,!1),q=os.getRSSvalue(x,fe,!0),we=e.OUTSIDE_EVEN_TOTAL_SUBSET[V],Te=e.OUTSIDE_GSUM[V];return new od(xe*we+q+Te,M)}else{if((k&1)!==0||k>10||k<4)throw new le;var V=(10-k)/2,ie=e.INSIDE_ODD_WIDEST[V],fe=9-ie,xe=os.getRSSvalue(y,ie,!0),q=os.getRSSvalue(x,fe,!1),ae=e.INSIDE_ODD_TOTAL_SUBSET[V],Te=e.INSIDE_GSUM[V];return new od(q*ae+xe+Te,M)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),l=!1,c=0;c<a&&(l=!t.get(c),r!==l);)c++;for(var d=0,f=c,g=c;g<a;g++)if(t.get(g)!==l)i[d]++;else{if(d===3){if(Za.isFinderPattern(i))return[f,g];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,d--}else d++;i[d]=1,l=!l}throw new le},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var l=t.get(a[0]),c=a[0]-1;c>=0&&l!==t.get(c);)c--;c++;var d=a[0]-c,f=this.getDecodeFinderCounters(),g=new Int32Array(f.length);Kt.arraycopy(f,0,g,1,f.length-1),g[0]=d;var m=this.parseFinderValue(g,e.FINDER_PATTERNS),y=c,x=a[1];return i&&(y=t.getSize()-1-y,x=t.getSize()-1-x),new Ew(m,[c,a[1]],y,x,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=Nt.sum(new Int32Array(this.getOddCounts())),a=Nt.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1,d=!1,f=!1;t?(i>12?c=!0:i<4&&(l=!0),a>12?f=!0:a<4&&(d=!0)):(i>11?c=!0:i<5&&(l=!0),a>10?f=!0:a<4&&(d=!0));var g=i+a-r,m=(i&1)===(t?1:0),y=(a&1)===1;if(g===1)if(m){if(y)throw new le;c=!0}else{if(!y)throw new le;f=!0}else if(g===-1)if(m){if(y)throw new le;l=!0}else{if(!y)throw new le;d=!0}else if(g===0){if(m){if(!y)throw new le;i<a?(l=!0,f=!0):(c=!0,d=!0)}else if(y)throw new le}else throw new le;if(l){if(c)throw new le;Za.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Za.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(f)throw new le;Za.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Za.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(Za),_T=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ss=(function(n){_T(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Zt.POSSIBLE_FORMATS):null,a=t&&t.get(Zt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,l=t&&t.get(Zt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Qe.EAN_13)||i.includes(Qe.UPC_A)||i.includes(Qe.EAN_8)||i.includes(Qe.UPC_E))&&r.readers.push(new a0(t)),i.includes(Qe.CODE_39)&&r.readers.push(new fx(a,l)),i.includes(Qe.CODE_93)&&r.readers.push(new hx),i.includes(Qe.CODE_128)&&r.readers.push(new dx),i.includes(Qe.ITF)&&r.readers.push(new px),i.includes(Qe.CODABAR)&&r.readers.push(new $6),i.includes(Qe.RSS_14)&&r.readers.push(new _x),i.includes(Qe.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new vT))),r.readers.length===0&&(r.readers.push(new a0(t)),r.readers.push(new fx),r.readers.push(new hx),r.readers.push(new a0(t)),r.readers.push(new dx),r.readers.push(new px),r.readers.push(new _x)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new le},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(Fn),ST=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){ST(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new ss(r),t,r)||this}return e})(As);var Sx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mt=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),Dt=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),CT=(function(){function n(e,t,r,i,a,l){var c,d;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=l;var f=0,g=l.getECCodewords(),m=l.getECBlocks();try{for(var y=Sx(m),x=y.next();!x.done;x=y.next()){var w=x.value;f+=w.getCount()*(w.getDataCodewords()+g)}}catch(_){c={error:_}}finally{try{x&&!x.done&&(d=y.return)&&d.call(y)}finally{if(c)throw c.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new Ae;try{for(var a=Sx(n.VERSIONS),l=a.next();!l.done;l=a.next()){var c=l.value;if(c.symbolSizeRows===e&&c.symbolSizeColumns===t)return c}}catch(d){r={error:d}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new Ae},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Mt(5,new Dt(1,3))),new n(2,12,12,10,10,new Mt(7,new Dt(1,5))),new n(3,14,14,12,12,new Mt(10,new Dt(1,8))),new n(4,16,16,14,14,new Mt(12,new Dt(1,12))),new n(5,18,18,16,16,new Mt(14,new Dt(1,18))),new n(6,20,20,18,18,new Mt(18,new Dt(1,22))),new n(7,22,22,20,20,new Mt(20,new Dt(1,30))),new n(8,24,24,22,22,new Mt(24,new Dt(1,36))),new n(9,26,26,24,24,new Mt(28,new Dt(1,44))),new n(10,32,32,14,14,new Mt(36,new Dt(1,62))),new n(11,36,36,16,16,new Mt(42,new Dt(1,86))),new n(12,40,40,18,18,new Mt(48,new Dt(1,114))),new n(13,44,44,20,20,new Mt(56,new Dt(1,144))),new n(14,48,48,22,22,new Mt(68,new Dt(1,174))),new n(15,52,52,24,24,new Mt(42,new Dt(2,102))),new n(16,64,64,14,14,new Mt(56,new Dt(2,140))),new n(17,72,72,16,16,new Mt(36,new Dt(4,92))),new n(18,80,80,18,18,new Mt(48,new Dt(4,114))),new n(19,88,88,20,20,new Mt(56,new Dt(4,144))),new n(20,96,96,22,22,new Mt(68,new Dt(4,174))),new n(21,104,104,24,24,new Mt(56,new Dt(6,136))),new n(22,120,120,18,18,new Mt(68,new Dt(6,175))),new n(23,132,132,20,20,new Mt(62,new Dt(8,163))),new n(24,144,144,22,22,new Mt(62,new Dt(8,156),new Dt(2,155))),new n(25,8,18,6,16,new Mt(7,new Dt(1,5))),new n(26,8,32,6,14,new Mt(11,new Dt(1,10))),new n(27,12,26,10,24,new Mt(14,new Dt(1,16))),new n(28,12,36,10,16,new Mt(18,new Dt(1,22))),new n(29,16,36,14,16,new Mt(24,new Dt(1,32))),new n(30,16,48,14,22,new Mt(28,new Dt(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),ET=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new Ae;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new vi(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return CT.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),l=this.mappingBitMatrix.getWidth(),c=!1,d=!1,f=!1,g=!1;do if(r===a&&i===0&&!c)e[t++]=this.readCorner1(a,l)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(l&3)!==0&&!d)e[t++]=this.readCorner2(a,l)&255,r-=2,i+=2,d=!0;else if(r===a+4&&i===2&&(l&7)===0&&!f)e[t++]=this.readCorner3(a,l)&255,r-=2,i+=2,f=!0;else if(r===a-2&&i===0&&(l&7)===4&&!g)e[t++]=this.readCorner4(a,l)&255,r-=2,i+=2,g=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,l)&255),r-=2,i+=2;while(r>=0&&i<l);r+=1,i+=3;do r>=0&&i<l&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,l)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<l);if(t!==this.version.getTotalCodewords())throw new Ae;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Je("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),l=t/i|0,c=r/a|0,d=l*i,f=c*a,g=new vi(f,d),m=0;m<l;++m)for(var y=m*i,x=0;x<c;++x)for(var w=x*a,_=0;_<i;++_)for(var A=m*(i+2)+1+_,E=y+_,S=0;S<a;++S){var T=x*(a+2)+1+S;if(e.get(T,A)){var R=w+S;g.set(R,E)}}return g},n})(),Cx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AT=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,l,c=t.getECBlocks(),d=0,f=c.getECBlocks();try{for(var g=Cx(f),m=g.next();!m.done;m=g.next()){var y=m.value;d+=y.getCount()}}catch(Te){r={error:Te}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var x=new Array(d),w=0;try{for(var _=Cx(f),A=_.next();!A.done;A=_.next())for(var y=A.value,E=0;E<y.getCount();E++){var S=y.getDataCodewords(),T=c.getECCodewords()+S;x[w++]=new n(S,new Uint8Array(T))}}catch(Te){a={error:Te}}finally{try{A&&!A.done&&(l=_.return)&&l.call(_)}finally{if(a)throw a.error}}for(var R=x[0].codewords.length,N=R-c.getECCodewords(),k=N-1,M=0,E=0;E<k;E++)for(var V=0;V<w;V++)x[V].codewords[E]=e[M++];for(var ie=t.getVersionNumber()===24,fe=ie?8:w,V=0;V<fe;V++)x[V].codewords[N-1]=e[M++];for(var xe=x[0].codewords.length,E=N;E<xe;E++)for(var V=0;V<w;V++){var q=ie?(V+8)%w:V,we=ie&&q>7?E-1:E;x[q].codewords[we]=e[M++]}if(M!==e.length)throw new Je;return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),Ow=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Je(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var l=8-r,c=e<l?e:l,d=l-c,f=255>>8-c<<d;t=(a[i]&f)>>d,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var d=8-e,f=255>>d<<d;t=t<<e|(a[i]&f)>>d,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),Dn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Dn||(Dn={}));var TT=(function(){function n(){}return n.decode=function(e){var t=new Ow(e),r=new yt,i=new yt,a=new Array,l=Dn.ASCII_ENCODE;do if(l===Dn.ASCII_ENCODE)l=this.decodeAsciiSegment(t,r,i);else{switch(l){case Dn.C40_ENCODE:this.decodeC40Segment(t,r);break;case Dn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Dn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Dn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Dn.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new Ae}l=Dn.ASCII_ENCODE}while(l!==Dn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Cd(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new Ae;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Dn.ASCII_ENCODE;if(a===129)return Dn.PAD_ENCODE;if(a<=229){var l=a-130;l<10&&t.append("0"),t.append(""+l)}else switch(a){case 230:return Dn.C40_ENCODE;case 231:return Dn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Dn.ANSIX12_ENCODE;case 239:return Dn.TEXT_ENCODE;case 240:return Dn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new Ae;break}}while(e.available()>0);return Dn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(var c=0;c<3;c++){var d=i[c];switch(a){case 0:if(d<3)a=d+1;else if(d<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[d];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new Ae;break;case 1:r?(t.append(String.fromCharCode(d+128)),r=!1):t.append(String.fromCharCode(d)),a=0;break;case 2:if(d<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[d];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(d){case 27:t.append("");break;case 30:r=!0;break;default:throw new Ae}a=0;break;case 3:r?(t.append(String.fromCharCode(d+224)),r=!1):t.append(String.fromCharCode(d+96)),a=0;break;default:throw new Ae}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),i);for(var c=0;c<3;c++){var d=i[c];switch(a){case 0:if(d<3)a=d+1;else if(d<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[d];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new Ae;break;case 1:r?(t.append(String.fromCharCode(d+128)),r=!1):t.append(String.fromCharCode(d)),a=0;break;case 2:if(d<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[d];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(d){case 27:t.append("");break;case 30:r=!0;break;default:throw new Ae}a=0;break;case 3:if(d<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[d];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),a=0}else throw new Ae;break;default:throw new Ae}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var l=r[a];switch(l){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(l<14)t.append(String.fromCharCode(l+44));else if(l<40)t.append(String.fromCharCode(l+51));else throw new Ae;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),l;if(a===0?l=e.available()/8|0:a<250?l=a:l=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),l<0)throw new Ae;for(var c=new Uint8Array(l),d=0;d<l;d++){if(e.available()<8)throw new Ae;c[d]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{t.append(Xr.decode(c,At.ISO88591))}catch(f){throw new nc("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),OT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RT=(function(){function n(){this.rsDecoder=new Ed(xr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new ET(e),a=i.getVersion(),l=i.readCodewords(),c=AT.getDataBlocks(l,a),d=0;try{for(var f=OT(c),g=f.next();!g.done;g=f.next()){var m=g.value;d+=m.getNumDataCodewords()}}catch(T){t={error:T}}finally{try{g&&!g.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var y=new Uint8Array(d),x=c.length,w=0;w<x;w++){var _=c[w],A=_.getCodewords(),E=_.getNumDataCodewords();this.correctErrors(A,E);for(var S=0;S<E;S++)y[S*x+w]=A[S]}return TT.decode(y)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new In}for(var i=0;i<t;i++)e[i]=r[i]},n})(),IT=(function(){function n(e){this.image=e,this.rectangleDetector=new X0(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new le;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],l=t[3],c=this.transitionsBetween(r,l)+1,d=this.transitionsBetween(a,l)+1;(c&1)===1&&(c+=1),(d&1)===1&&(d+=1),4*c<7*d&&4*d<7*c&&(c=d=Math.max(c,d));var f=n.sampleGrid(this.image,r,i,a,l,c,d);return new Fp(f,[r,i,a,l])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new qe(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new qe(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],l=this.transitionsBetween(t,r),c=this.transitionsBetween(r,i),d=this.transitionsBetween(i,a),f=this.transitionsBetween(a,t),g=l,m=[a,t,r,i];return g>c&&(g=c,m[0]=t,m[1]=r,m[2]=i,m[3]=a),g>d&&(g=d,m[0]=r,m[1]=i,m[2]=a,m[3]=t),g>f&&(m[0]=i,m[1]=a,m[2]=t,m[3]=r),m},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],l=this.transitionsBetween(t,a),c=n.shiftPoint(r,i,(l+1)*4),d=n.shiftPoint(i,r,(l+1)*4),f=this.transitionsBetween(c,t),g=this.transitionsBetween(d,a);return f<g?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],l=this.transitionsBetween(t,a),c=this.transitionsBetween(r,a),d=n.shiftPoint(t,r,(c+1)*4),f=n.shiftPoint(i,r,(l+1)*4);l=this.transitionsBetween(d,a),c=this.transitionsBetween(f,a);var g=new qe(a.getX()+(i.getX()-r.getX())/(l+1),a.getY()+(i.getY()-r.getY())/(l+1)),m=new qe(a.getX()+(t.getX()-r.getX())/(c+1),a.getY()+(t.getY()-r.getY())/(c+1));if(!this.isValid(g))return this.isValid(m)?m:null;if(!this.isValid(m))return g;var y=this.transitionsBetween(d,g)+this.transitionsBetween(f,g),x=this.transitionsBetween(d,m)+this.transitionsBetween(f,m);return y>x?g:m},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],l=this.transitionsBetween(t,a)+1,c=this.transitionsBetween(i,a)+1,d=n.shiftPoint(t,r,c*4),f=n.shiftPoint(i,r,l*4);l=this.transitionsBetween(d,a)+1,c=this.transitionsBetween(f,a)+1,(l&1)===1&&(l+=1),(c&1)===1&&(c+=1);var g=(t.getX()+r.getX()+i.getX()+a.getX())/4,m=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,g,m),r=n.moveAway(r,g,m),i=n.moveAway(i,g,m),a=n.moveAway(a,g,m);var y,x;return d=n.shiftPoint(t,r,c*4),d=n.shiftPoint(d,a,l*4),y=n.shiftPoint(r,t,c*4),y=n.shiftPoint(y,i,l*4),f=n.shiftPoint(i,a,c*4),f=n.shiftPoint(f,r,l*4),x=n.shiftPoint(a,i,c*4),x=n.shiftPoint(x,t,l*4),[d,y,f,x]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,l,c){var d=Up.getInstance();return d.sampleGrid(e,l,c,.5,.5,l-.5,.5,l-.5,c-.5,.5,c-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),l=Math.trunc(t.getY()),c=Math.abs(l-i)>Math.abs(a-r);if(c){var d=r;r=i,i=d,d=a,a=l,l=d}for(var f=Math.abs(a-r),g=Math.abs(l-i),m=-f/2,y=i<l?1:-1,x=r<a?1:-1,w=0,_=this.image.get(c?i:r,c?r:i),A=r,E=i;A!==a;A+=x){var S=this.image.get(c?E:A,c?A:E);if(S!==_&&(w++,_=S),m+=g,m>0){if(E===l)break;E+=y,m-=f}}return w},n})(),sd=(function(){function n(){this.decoder=new RT}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Zt.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var l=new IT(e.getBlackMatrix()).detect();r=this.decoder.decode(l.getBits()),i=l.getPoints()}var c=r.getRawBytes(),d=new ar(r.getText(),c,8*c.length,i,Qe.DATA_MATRIX,Kt.currentTimeMillis()),f=r.getByteSegments();f!=null&&d.putMetadata(er.BYTE_SEGMENTS,f);var g=r.getECLevel();return g!=null&&d.putMetadata(er.ERROR_CORRECTION_LEVEL,g),d},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new le;var i=this.moduleSize(t,e),a=t[1],l=r[1],c=t[0],d=r[0],f=(d-c+1)/i,g=(l-a+1)/i;if(f<=0||g<=0)throw new le;var m=i/2;a+=m,c+=m;for(var y=new vi(f,g),x=0;x<g;x++)for(var w=a+x*i,_=0;_<f;_++)e.get(c+_*i,w)&&y.set(_,x);return y},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new le;var l=i-e[0];if(l===0)throw new le;return l},n.NO_POINTS=[],n})(),NT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){NT(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new sd,t)||this}return e})(As);var ls;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(ls||(ls={}));var kT=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Sn(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Je;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(ls.L,"L",1),n.M=new n(ls.M,"M",0),n.Q=new n(ls.Q,"Q",3),n.H=new n(ls.H,"H",2),n})(),DT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rw=(function(){function n(e){this.errorCorrectionLevel=kT.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return vt.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,l=0;try{for(var c=DT(n.FORMAT_INFO_DECODE_LOOKUP),d=c.next();!d.done;d=c.next()){var f=d.value,g=f[0];if(g===e||g===t)return new n(f[1]);var m=n.numBitsDiffering(e,g);m<a&&(l=f[1],a=m),e!==t&&(m=n.numBitsDiffering(t,g),m<a&&(l=f[1],a=m))}}catch(y){r={error:y}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a<=3?new n(l):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),jT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=jT(i),l=a.next();!l.done;l=a.next()){var c=l.value;r+=c.getCount()}}catch(d){e={error:d}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),P=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),MT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ao=(function(){function n(e,t){for(var r,i,a=[],l=2;l<arguments.length;l++)a[l-2]=arguments[l];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var c=0,d=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var g=MT(f),m=g.next();!m.done;m=g.next()){var y=m.value;c+=y.getCount()*(y.getDataCodewords()+d)}}catch(x){r={error:x}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Ae;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Ae}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Je;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var l=Rw.numBitsDiffering(e,a);l<t&&(r=i+7,t=l)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new vi(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,l=0;l<r;l++)i===0&&(l===0||l===r-1)||i===r-1&&l===0||t.setRegion(this.alignmentPatternCenters[l]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Y(7,new P(1,19)),new Y(10,new P(1,16)),new Y(13,new P(1,13)),new Y(17,new P(1,9))),new n(2,Int32Array.from([6,18]),new Y(10,new P(1,34)),new Y(16,new P(1,28)),new Y(22,new P(1,22)),new Y(28,new P(1,16))),new n(3,Int32Array.from([6,22]),new Y(15,new P(1,55)),new Y(26,new P(1,44)),new Y(18,new P(2,17)),new Y(22,new P(2,13))),new n(4,Int32Array.from([6,26]),new Y(20,new P(1,80)),new Y(18,new P(2,32)),new Y(26,new P(2,24)),new Y(16,new P(4,9))),new n(5,Int32Array.from([6,30]),new Y(26,new P(1,108)),new Y(24,new P(2,43)),new Y(18,new P(2,15),new P(2,16)),new Y(22,new P(2,11),new P(2,12))),new n(6,Int32Array.from([6,34]),new Y(18,new P(2,68)),new Y(16,new P(4,27)),new Y(24,new P(4,19)),new Y(28,new P(4,15))),new n(7,Int32Array.from([6,22,38]),new Y(20,new P(2,78)),new Y(18,new P(4,31)),new Y(18,new P(2,14),new P(4,15)),new Y(26,new P(4,13),new P(1,14))),new n(8,Int32Array.from([6,24,42]),new Y(24,new P(2,97)),new Y(22,new P(2,38),new P(2,39)),new Y(22,new P(4,18),new P(2,19)),new Y(26,new P(4,14),new P(2,15))),new n(9,Int32Array.from([6,26,46]),new Y(30,new P(2,116)),new Y(22,new P(3,36),new P(2,37)),new Y(20,new P(4,16),new P(4,17)),new Y(24,new P(4,12),new P(4,13))),new n(10,Int32Array.from([6,28,50]),new Y(18,new P(2,68),new P(2,69)),new Y(26,new P(4,43),new P(1,44)),new Y(24,new P(6,19),new P(2,20)),new Y(28,new P(6,15),new P(2,16))),new n(11,Int32Array.from([6,30,54]),new Y(20,new P(4,81)),new Y(30,new P(1,50),new P(4,51)),new Y(28,new P(4,22),new P(4,23)),new Y(24,new P(3,12),new P(8,13))),new n(12,Int32Array.from([6,32,58]),new Y(24,new P(2,92),new P(2,93)),new Y(22,new P(6,36),new P(2,37)),new Y(26,new P(4,20),new P(6,21)),new Y(28,new P(7,14),new P(4,15))),new n(13,Int32Array.from([6,34,62]),new Y(26,new P(4,107)),new Y(22,new P(8,37),new P(1,38)),new Y(24,new P(8,20),new P(4,21)),new Y(22,new P(12,11),new P(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Y(30,new P(3,115),new P(1,116)),new Y(24,new P(4,40),new P(5,41)),new Y(20,new P(11,16),new P(5,17)),new Y(24,new P(11,12),new P(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Y(22,new P(5,87),new P(1,88)),new Y(24,new P(5,41),new P(5,42)),new Y(30,new P(5,24),new P(7,25)),new Y(24,new P(11,12),new P(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Y(24,new P(5,98),new P(1,99)),new Y(28,new P(7,45),new P(3,46)),new Y(24,new P(15,19),new P(2,20)),new Y(30,new P(3,15),new P(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Y(28,new P(1,107),new P(5,108)),new Y(28,new P(10,46),new P(1,47)),new Y(28,new P(1,22),new P(15,23)),new Y(28,new P(2,14),new P(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Y(30,new P(5,120),new P(1,121)),new Y(26,new P(9,43),new P(4,44)),new Y(28,new P(17,22),new P(1,23)),new Y(28,new P(2,14),new P(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Y(28,new P(3,113),new P(4,114)),new Y(26,new P(3,44),new P(11,45)),new Y(26,new P(17,21),new P(4,22)),new Y(26,new P(9,13),new P(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Y(28,new P(3,107),new P(5,108)),new Y(26,new P(3,41),new P(13,42)),new Y(30,new P(15,24),new P(5,25)),new Y(28,new P(15,15),new P(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Y(28,new P(4,116),new P(4,117)),new Y(26,new P(17,42)),new Y(28,new P(17,22),new P(6,23)),new Y(30,new P(19,16),new P(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Y(28,new P(2,111),new P(7,112)),new Y(28,new P(17,46)),new Y(30,new P(7,24),new P(16,25)),new Y(24,new P(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Y(30,new P(4,121),new P(5,122)),new Y(28,new P(4,47),new P(14,48)),new Y(30,new P(11,24),new P(14,25)),new Y(30,new P(16,15),new P(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Y(30,new P(6,117),new P(4,118)),new Y(28,new P(6,45),new P(14,46)),new Y(30,new P(11,24),new P(16,25)),new Y(30,new P(30,16),new P(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Y(26,new P(8,106),new P(4,107)),new Y(28,new P(8,47),new P(13,48)),new Y(30,new P(7,24),new P(22,25)),new Y(30,new P(22,15),new P(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Y(28,new P(10,114),new P(2,115)),new Y(28,new P(19,46),new P(4,47)),new Y(28,new P(28,22),new P(6,23)),new Y(30,new P(33,16),new P(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Y(30,new P(8,122),new P(4,123)),new Y(28,new P(22,45),new P(3,46)),new Y(30,new P(8,23),new P(26,24)),new Y(30,new P(12,15),new P(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Y(30,new P(3,117),new P(10,118)),new Y(28,new P(3,45),new P(23,46)),new Y(30,new P(4,24),new P(31,25)),new Y(30,new P(11,15),new P(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Y(30,new P(7,116),new P(7,117)),new Y(28,new P(21,45),new P(7,46)),new Y(30,new P(1,23),new P(37,24)),new Y(30,new P(19,15),new P(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Y(30,new P(5,115),new P(10,116)),new Y(28,new P(19,47),new P(10,48)),new Y(30,new P(15,24),new P(25,25)),new Y(30,new P(23,15),new P(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Y(30,new P(13,115),new P(3,116)),new Y(28,new P(2,46),new P(29,47)),new Y(30,new P(42,24),new P(1,25)),new Y(30,new P(23,15),new P(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Y(30,new P(17,115)),new Y(28,new P(10,46),new P(23,47)),new Y(30,new P(10,24),new P(35,25)),new Y(30,new P(19,15),new P(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Y(30,new P(17,115),new P(1,116)),new Y(28,new P(14,46),new P(21,47)),new Y(30,new P(29,24),new P(19,25)),new Y(30,new P(11,15),new P(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Y(30,new P(13,115),new P(6,116)),new Y(28,new P(14,46),new P(23,47)),new Y(30,new P(44,24),new P(7,25)),new Y(30,new P(59,16),new P(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Y(30,new P(12,121),new P(7,122)),new Y(28,new P(12,47),new P(26,48)),new Y(30,new P(39,24),new P(14,25)),new Y(30,new P(22,15),new P(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Y(30,new P(6,121),new P(14,122)),new Y(28,new P(6,47),new P(34,48)),new Y(30,new P(46,24),new P(10,25)),new Y(30,new P(2,15),new P(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Y(30,new P(17,122),new P(4,123)),new Y(28,new P(29,46),new P(14,47)),new Y(30,new P(49,24),new P(10,25)),new Y(30,new P(24,15),new P(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Y(30,new P(4,122),new P(18,123)),new Y(28,new P(13,46),new P(32,47)),new Y(30,new P(48,24),new P(14,25)),new Y(30,new P(42,15),new P(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Y(30,new P(20,117),new P(4,118)),new Y(28,new P(40,47),new P(7,48)),new Y(30,new P(43,24),new P(22,25)),new Y(30,new P(10,15),new P(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Y(30,new P(19,118),new P(6,119)),new Y(28,new P(18,47),new P(31,48)),new Y(30,new P(34,24),new P(34,25)),new Y(30,new P(20,15),new P(61,16)))],n})(),Vn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Vn||(Vn={}));var Ex=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Vn.DATA_MASK_000,new n(Vn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Vn.DATA_MASK_001,new n(Vn.DATA_MASK_001,function(e,t){return(e&1)===0})],[Vn.DATA_MASK_010,new n(Vn.DATA_MASK_010,function(e,t){return t%3===0})],[Vn.DATA_MASK_011,new n(Vn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Vn.DATA_MASK_100,new n(Vn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Vn.DATA_MASK_101,new n(Vn.DATA_MASK_101,function(e,t){return e*t%6===0})],[Vn.DATA_MASK_110,new n(Vn.DATA_MASK_110,function(e,t){return e*t%6<3})],[Vn.DATA_MASK_111,new n(Vn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),PT=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new Ae;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,l=i-7,r=i-1;r>=l;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=Rw.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Ae},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ao.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var l=e-9;l>=i;l--)r=this.copyBit(l,a,r);var c=ao.decodeVersionInformation(r);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;r=0;for(var l=5;l>=0;l--)for(var a=e-9;a>=i;a--)r=this.copyBit(l,a,r);if(c=ao.decodeVersionInformation(r),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new Ae},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=Ex.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),l=!0,c=new Uint8Array(t.getTotalCodewords()),d=0,f=0,g=0,m=i-1;m>0;m-=2){m===6&&m--;for(var y=0;y<i;y++)for(var x=l?i-1-y:y,w=0;w<2;w++)a.get(m-w,x)||(g++,f<<=1,this.bitMatrix.get(m-w,x)&&(f|=1),g===8&&(c[d++]=f,g=0,f=0));l=!l}if(d!==t.getTotalCodewords())throw new Ae;return c},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Ex.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),Ax=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BT=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,l,c;if(e.length!==t.getTotalCodewords())throw new Je;var d=t.getECBlocksForLevel(r),f=0,g=d.getECBlocks();try{for(var m=Ax(g),y=m.next();!y.done;y=m.next()){var x=y.value;f+=x.getCount()}}catch(we){i={error:we}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}var w=new Array(f),_=0;try{for(var A=Ax(g),E=A.next();!E.done;E=A.next())for(var x=E.value,S=0;S<x.getCount();S++){var T=x.getDataCodewords(),R=d.getECCodewordsPerBlock()+T;w[_++]=new n(T,new Uint8Array(R))}}catch(we){l={error:we}}finally{try{E&&!E.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}for(var N=w[0].codewords.length,k=w.length-1;k>=0;){var M=w[k].codewords.length;if(M===N)break;k--}k++;for(var V=N-d.getECCodewordsPerBlock(),ie=0,S=0;S<V;S++)for(var fe=0;fe<_;fe++)w[fe].codewords[S]=e[ie++];for(var fe=k;fe<_;fe++)w[fe].codewords[V]=e[ie++];for(var xe=w[0].codewords.length,S=V;S<xe;S++)for(var fe=0;fe<_;fe++){var q=fe<k?S:S+1;w[fe].codewords[q]=e[ie++]}return w},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),$r;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})($r||($r={}));var tn=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Je;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n($r.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n($r.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n($r.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n($r.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n($r.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n($r.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n($r.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n($r.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n($r.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n($r.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),LT=(function(){function n(){}return n.decode=function(e,t,r,i){var a=new Ow(e),l=new yt,c=new Array,d=-1,f=-1;try{var g=null,m=!1,y=void 0;do{if(a.available()<4)y=tn.TERMINATOR;else{var x=a.readBits(4);y=tn.forBits(x)}switch(y){case tn.TERMINATOR:break;case tn.FNC1_FIRST_POSITION:case tn.FNC1_SECOND_POSITION:m=!0;break;case tn.STRUCTURED_APPEND:if(a.available()<16)throw new Ae;d=a.readBits(8),f=a.readBits(8);break;case tn.ECI:var w=n.parseECIValue(a);if(g=Bn.getCharacterSetECIByValue(w),g===null)throw new Ae;break;case tn.HANZI:var _=a.readBits(4),A=a.readBits(y.getCharacterCountBits(t));_===n.GB2312_SUBSET&&n.decodeHanziSegment(a,l,A);break;default:var E=a.readBits(y.getCharacterCountBits(t));switch(y){case tn.NUMERIC:n.decodeNumericSegment(a,l,E);break;case tn.ALPHANUMERIC:n.decodeAlphanumericSegment(a,l,E,m);break;case tn.BYTE:n.decodeByteSegment(a,l,E,g,c,i);break;case tn.KANJI:n.decodeKanjiSegment(a,l,E);break;default:throw new Ae}break}}while(y!==tn.TERMINATOR)}catch{throw new Ae}return new Cd(e,l.toString(),c.length===0?null:c,r===null?null:r.toString(),d,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new Ae;for(var i=new Uint8Array(2*r),a=0;r>0;){var l=e.readBits(13),c=l/96<<8&4294967295|l%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{t.append(Xr.decode(i,At.GB2312))}catch(d){throw new Ae(d)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new Ae;for(var i=new Uint8Array(2*r),a=0;r>0;){var l=e.readBits(13),c=l/192<<8&4294967295|l%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{t.append(Xr.decode(i,At.SHIFT_JIS))}catch(d){throw new Ae(d)}},n.decodeByteSegment=function(e,t,r,i,a,l){if(8*r>e.available())throw new Ae;for(var c=new Uint8Array(r),d=0;d<r;d++)c[d]=e.readBits(8);var f;i===null?f=At.guessEncoding(c,l):f=i.getName();try{t.append(Xr.decode(c,f))}catch(g){throw new Ae(g)}a.push(c)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new Ae;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new Ae;var l=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(l/45))),t.append(n.toAlphaNumericChar(l%45)),r-=2}if(r===1){if(e.available()<6)throw new Ae;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var c=a;c<t.length();c++)t.charAt(c)==="%"&&(c<t.length()-1&&t.charAt(c+1)==="%"?t.deleteCharAt(c+1):t.setCharAt(c,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new Ae;var i=e.readBits(10);if(i>=1e3)throw new Ae;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new Ae;var a=e.readBits(7);if(a>=100)throw new Ae;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new Ae;var l=e.readBits(4);if(l>=10)throw new Ae;t.append(n.toAlphaNumericChar(l))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new Ae},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),Iw=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),Tx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FT=(function(){function n(){this.rsDecoder=new Ed(xr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(vi.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new PT(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(l){i=l}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new Iw(!0)),a}catch(l){throw i!==null?i:l}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,l,c=e.readVersion(),d=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),g=BT.getDataBlocks(f,c,d),m=0;try{for(var y=Tx(g),x=y.next();!x.done;x=y.next()){var w=x.value;m+=w.getNumDataCodewords()}}catch(k){r={error:k}}finally{try{x&&!x.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}var _=new Uint8Array(m),A=0;try{for(var E=Tx(g),S=E.next();!S.done;S=E.next()){var w=S.value,T=w.getCodewords(),R=w.getNumDataCodewords();this.correctErrors(T,R);for(var N=0;N<R;N++)_[A++]=T[N]}}catch(k){a={error:k}}finally{try{S&&!S.done&&(l=E.return)&&l.call(E)}finally{if(a)throw a.error}}return LT.decode(_,c,d,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new In}for(var i=0;i<t;i++)e[i]=r[i]},n})(),UT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zT=(function(n){UT(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,l=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new e(a,l,c)},e})(qe),VT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HT=(function(){function n(e,t,r,i,a,l,c){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=l,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,l=new Int32Array(3),c=this.image,d=0;d<t;d++){var f=a+((d&1)===0?Math.floor((d+1)/2):-Math.floor((d+1)/2));l[0]=0,l[1]=0,l[2]=0;for(var g=e;g<i&&!c.get(g,f);)g++;for(var m=0;g<i;){if(c.get(g,f))if(m===1)l[1]++;else if(m===2){if(this.foundPatternCross(l)){var y=this.handlePossibleCenter(l,f,g);if(y!==null)return y}l[0]=l[2],l[1]=1,l[2]=0,m=1}else l[++m]++;else m===1&&m++,l[m]++;g++}if(this.foundPatternCross(l)){var y=this.handlePossibleCenter(l,f,i);if(y!==null)return y}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new le},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,l=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;for(var d=e;d>=0&&a.get(t,d)&&c[1]<=r;)c[1]++,d--;if(d<0||c[1]>r)return NaN;for(;d>=0&&!a.get(t,d)&&c[0]<=r;)c[0]++,d--;if(c[0]>r)return NaN;for(d=e+1;d<l&&a.get(t,d)&&c[1]<=r;)c[1]++,d++;if(d===l||c[1]>r)return NaN;for(;d<l&&!a.get(t,d)&&c[2]<=r;)c[2]++,d++;if(c[2]>r)return NaN;var f=c[0]+c[1]+c[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(c)?n.centerFromEnd(c,d):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,l=e[0]+e[1]+e[2],c=n.centerFromEnd(e,r),d=this.crossCheckVertical(t,c,2*e[1],l);if(!isNaN(d)){var f=(e[0]+e[1]+e[2])/3;try{for(var g=VT(this.possibleCenters),m=g.next();!m.done;m=g.next()){var y=m.value;if(y.aboutEquals(f,d,c))return y.combineEstimate(d,c,f)}}catch(w){i={error:w}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var x=new zT(c,d,f);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null},n})(),$T=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qT=(function(n){$T(e,n);function e(t,r,i,a){var l=n.call(this,t,r)||this;return l.estimatedModuleSize=i,l.count=a,a===void 0&&(l.count=1),l}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,l=(this.count*this.getX()+r)/a,c=(this.count*this.getY()+t)/a,d=(this.count*this.estimatedModuleSize+i)/a;return new e(l,c,d,a)},e})(qe),GT=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),Sl=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WT=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Zt.TRY_HARDER)!==void 0,r=e!=null&&e.get(Zt.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),l=i.getWidth(),c=Math.floor(3*a/(4*n.MAX_MODULES));(c<n.MIN_SKIP||t)&&(c=n.MIN_SKIP);for(var d=!1,f=new Int32Array(5),g=c-1;g<a&&!d;g+=c){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var m=0,y=0;y<l;y++)if(i.get(y,g))(m&1)===1&&m++,f[m]++;else if((m&1)===0)if(m===4)if(n.foundPatternCross(f)){var x=this.handlePossibleCenter(f,g,y,r);if(x===!0)if(c=2,this.hasSkipped===!0)d=this.haveMultiplyConfirmedCenters();else{var w=this.findRowSkip();w>f[2]&&(g+=w-f[2]-c,y=l-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,m=3;continue}m=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,m=3;else f[++m]++;else f[m]++;if(n.foundPatternCross(f)){var x=this.handlePossibleCenter(f,g,l,r);x===!0&&(c=f[0],this.hasSkipped&&(d=this.haveMultiplyConfirmedCenters()))}}var _=this.selectBestPatterns();return qe.orderBestPatterns(_),new GT(_)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,l=a/2;return Math.abs(a-e[0])<l&&Math.abs(a-e[1])<l&&Math.abs(3*a-e[2])<3*l&&Math.abs(a-e[3])<l&&Math.abs(a-e[4])<l},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),l=0,c=this.image;e>=l&&t>=l&&c.get(t-l,e-l);)a[2]++,l++;if(e<l||t<l)return!1;for(;e>=l&&t>=l&&!c.get(t-l,e-l)&&a[1]<=r;)a[1]++,l++;if(e<l||t<l||a[1]>r)return!1;for(;e>=l&&t>=l&&c.get(t-l,e-l)&&a[0]<=r;)a[0]++,l++;if(a[0]>r)return!1;var d=c.getHeight(),f=c.getWidth();for(l=1;e+l<d&&t+l<f&&c.get(t+l,e+l);)a[2]++,l++;if(e+l>=d||t+l>=f)return!1;for(;e+l<d&&t+l<f&&!c.get(t+l,e+l)&&a[3]<r;)a[3]++,l++;if(e+l>=d||t+l>=f||a[3]>=r)return!1;for(;e+l<d&&t+l<f&&c.get(t+l,e+l)&&a[4]<r;)a[4]++,l++;if(a[4]>=r)return!1;var g=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(g-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,l=a.getHeight(),c=this.getCrossCheckStateCount(),d=e;d>=0&&a.get(t,d);)c[2]++,d--;if(d<0)return NaN;for(;d>=0&&!a.get(t,d)&&c[1]<=r;)c[1]++,d--;if(d<0||c[1]>r)return NaN;for(;d>=0&&a.get(t,d)&&c[0]<=r;)c[0]++,d--;if(c[0]>r)return NaN;for(d=e+1;d<l&&a.get(t,d);)c[2]++,d++;if(d===l)return NaN;for(;d<l&&!a.get(t,d)&&c[3]<r;)c[3]++,d++;if(d===l||c[3]>=r)return NaN;for(;d<l&&a.get(t,d)&&c[4]<r;)c[4]++,d++;if(c[4]>=r)return NaN;var f=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,d):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,l=a.getWidth(),c=this.getCrossCheckStateCount(),d=e;d>=0&&a.get(d,t);)c[2]++,d--;if(d<0)return NaN;for(;d>=0&&!a.get(d,t)&&c[1]<=r;)c[1]++,d--;if(d<0||c[1]>r)return NaN;for(;d>=0&&a.get(d,t)&&c[0]<=r;)c[0]++,d--;if(c[0]>r)return NaN;for(d=e+1;d<l&&a.get(d,t);)c[2]++,d++;if(d===l)return NaN;for(;d<l&&!a.get(d,t)&&c[3]<r;)c[3]++,d++;if(d===l||c[3]>=r)return NaN;for(;d<l&&a.get(d,t)&&c[4]<r;)c[4]++,d++;if(c[4]>=r)return NaN;var f=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,d):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],l=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,Math.floor(l),e[2],a);if(!isNaN(c)&&(l=this.crossCheckHorizontal(Math.floor(l),Math.floor(c),e[2],a),!isNaN(l)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(l),e[2],a)))){for(var d=a/7,f=!1,g=this.possibleCenters,m=0,y=g.length;m<y;m++){var x=g[m];if(x.aboutEquals(d,c,l)){g[m]=x.combineEstimate(c,l,d),f=!0;break}}if(!f){var w=new qT(l,c,d);g.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Sl(this.possibleCenters),l=a.next();!l.done;l=a.next()){var c=l.value;if(c.getCount()>=n.CENTER_QUORUM)if(i==null)i=c;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-c.getX())-Math.abs(i.getY()-c.getY()))/2)}}catch(d){e={error:d}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,l=0,c=this.possibleCenters.length;try{for(var d=Sl(this.possibleCenters),f=d.next();!f.done;f=d.next()){var g=f.value;g.getCount()>=n.CENTER_QUORUM&&(a++,l+=g.getEstimatedModuleSize())}}catch(_){e={error:_}}finally{try{f&&!f.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}if(a<3)return!1;var m=l/c,y=0;try{for(var x=Sl(this.possibleCenters),w=x.next();!w.done;w=x.next()){var g=w.value;y+=Math.abs(g.getEstimatedModuleSize()-m)}}catch(_){r={error:_}}finally{try{w&&!w.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}return y<=.05*l},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new le;var l=this.possibleCenters,c;if(a>3){var d=0,f=0;try{for(var g=Sl(this.possibleCenters),m=g.next();!m.done;m=g.next()){var y=m.value,x=y.getEstimatedModuleSize();d+=x,f+=x*x}}catch(N){e={error:N}}finally{try{m&&!m.done&&(t=g.return)&&t.call(g)}finally{if(e)throw e.error}}c=d/a;var w=Math.sqrt(f/a-c*c);l.sort(function(N,k){var M=Math.abs(k.getEstimatedModuleSize()-c),V=Math.abs(N.getEstimatedModuleSize()-c);return M<V?-1:M>V?1:0});for(var _=Math.max(.2*c,w),A=0;A<l.length&&l.length>3;A++){var E=l[A];Math.abs(E.getEstimatedModuleSize()-c)>_&&(l.splice(A,1),A--)}}if(l.length>3){var d=0;try{for(var S=Sl(l),T=S.next();!T.done;T=S.next()){var R=T.value;d+=R.getEstimatedModuleSize()}}catch(k){r={error:k}}finally{try{T&&!T.done&&(i=S.return)&&i.call(S)}finally{if(r)throw r.error}}c=d/l.length,l.sort(function(k,M){if(M.getCount()===k.getCount()){var V=Math.abs(M.getEstimatedModuleSize()-c),ie=Math.abs(k.getEstimatedModuleSize()-c);return V<ie?1:V>ie?-1:0}else return M.getCount()-k.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),XT=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Zt.NEED_RESULT_POINT_CALLBACK);var t=new WT(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new le("No pattern found in proccess finder.");var l=n.computeDimension(t,r,i,a),c=ao.getProvisionalVersionForDimension(l),d=c.getDimensionForVersion()-7,f=null;if(c.getAlignmentPatternCenters().length>0)for(var g=r.getX()-t.getX()+i.getX(),m=r.getY()-t.getY()+i.getY(),y=1-3/d,x=Math.floor(t.getX()+y*(g-t.getX())),w=Math.floor(t.getY()+y*(m-t.getY())),_=4;_<=16;_<<=1)try{f=this.findAlignmentInRegion(a,x,w,_);break}catch(T){if(!(T instanceof le))throw T}var A=n.createTransform(t,r,i,f,l),E=n.sampleGrid(this.image,A,l),S;return f===null?S=[i,t,r]:S=[i,t,r,f],new Fp(E,S)},n.createTransform=function(e,t,r,i,a){var l=a-3.5,c,d,f,g;return i!==null?(c=i.getX(),d=i.getY(),f=l-3,g=f):(c=t.getX()-e.getX()+r.getX(),d=t.getY()-e.getY()+r.getY(),f=l,g=l),Cw.quadrilateralToQuadrilateral(3.5,3.5,l,3.5,f,g,3.5,l,e.getX(),e.getY(),t.getX(),t.getY(),c,d,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Up.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=Nt.round(qe.distance(e,t)/i),l=Nt.round(qe.distance(e,r)/i),c=Math.floor((a+l)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new le("Dimensions could be not found.")}return c},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),l=1,c=e-(r-e);c<0?(l=e/(e-c),c=0):c>=this.image.getWidth()&&(l=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);var d=Math.floor(t-(i-t)*l);return l=1,d<0?(l=t/(t-d),d=0):d>=this.image.getHeight()&&(l=(this.image.getHeight()-1-t)/(d-t),d=this.image.getHeight()-1),c=Math.floor(e+(c-e)*l),a+=this.sizeOfBlackWhiteBlackRun(e,t,c,d),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var l=e;e=t,t=l,l=r,r=i,i=l}for(var c=Math.abs(r-e),d=Math.abs(i-t),f=-c/2,g=e<r?1:-1,m=t<i?1:-1,y=0,x=r+g,w=e,_=t;w!==x;w+=g){var A=a?_:w,E=a?w:_;if(y===1===this.image.get(A,E)){if(y===2)return Nt.distance(w,_,e,t);y++}if(f+=d,f>0){if(_===i)break;_+=m,f-=c}}return y===2?Nt.distance(r+g,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),l=Math.max(0,t-a),c=Math.min(this.image.getWidth()-1,t+a);if(c-l<e*3)throw new le("Alignment top exceeds estimated module size.");var d=Math.max(0,r-a),f=Math.min(this.image.getHeight()-1,r+a);if(f-d<e*3)throw new le("Alignment bottom exceeds estimated module size.");var g=new HT(this.image,l,d,c-l,f-d,e,this.resultPointCallback);return g.find()},n})(),ld=(function(){function n(){this.decoder=new FT}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Zt.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var l=new XT(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(l.getBits(),t),i=l.getPoints()}r.getOther()instanceof Iw&&r.getOther().applyMirroredCorrection(i);var c=new ar(r.getText(),r.getRawBytes(),void 0,i,Qe.QR_CODE,void 0),d=r.getByteSegments();d!==null&&c.putMetadata(er.BYTE_SEGMENTS,d);var f=r.getECLevel();return f!==null&&c.putMetadata(er.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(c.putMetadata(er.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),c.putMetadata(er.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new le;var i=this.moduleSize(t,e),a=t[1],l=r[1],c=t[0],d=r[0];if(c>=d||a>=l)throw new le;if(l-a!==d-c&&(d=c+(l-a),d>=e.getWidth()))throw new le;var f=Math.round((d-c+1)/i),g=Math.round((l-a+1)/i);if(f<=0||g<=0)throw new le;if(g!==f)throw new le;var m=Math.floor(i/2);a+=m,c+=m;var y=c+Math.floor((f-1)*i)-d;if(y>0){if(y>m)throw new le;c-=y}var x=a+Math.floor((g-1)*i)-l;if(x>0){if(x>m)throw new le;a-=x}for(var w=new vi(f,g),_=0;_<g;_++)for(var A=a+Math.floor(_*i),E=0;E<f;E++)e.get(c+Math.floor(E*i),A)&&w.set(E,_);return w},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],l=e[1],c=!0,d=0;a<i&&l<r;){if(c!==t.get(a,l)){if(++d===5)break;c=!c}a++,l++}if(a===i||l===r)throw new le;return(a-e[0])/7},n.NO_POINTS=new Array,n})(),YT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tt=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return Nt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var l=YT(e),c=l.next();!c.done;c=l.next()){var d=c.value;i[a++]=d}}catch(f){t={error:f}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Ln.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),KT=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),ZT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QT=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new KT(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,l=0,c=0,d=!1;l<t.getHeight();){var f=n.findVertices(t,l,c);if(f[0]==null&&f[3]==null){if(!d)break;d=!1,c=0;try{for(var g=(r=void 0,ZT(a)),m=g.next();!m.done;m=g.next()){var y=m.value;y[1]!=null&&(l=Math.trunc(Math.max(l,y[1].getY()))),y[3]!=null&&(l=Math.max(l,Math.trunc(y[3].getY())))}}catch(x){r={error:x}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}l+=n.ROW_STEP;continue}if(d=!0,a.push(f),!e)break;f[2]!=null?(c=Math.trunc(f[2].getX()),l=Math.trunc(f[2].getY())):(c=Math.trunc(f[4].getX()),l=Math.trunc(f[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),l=new Array(8);return n.copyToResult(l,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),l[4]!=null&&(r=Math.trunc(l[4].getX()),t=Math.trunc(l[4].getY())),n.copyToResult(l,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),l},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,l){for(var c=new Array(4),d=!1,f=new Int32Array(l.length);i<t;i+=n.ROW_STEP){var g=n.findGuardPattern(e,a,i,r,!1,l,f);if(g!=null){for(;i>0;){var m=n.findGuardPattern(e,a,--i,r,!1,l,f);if(m!=null)g=m;else{i++;break}}c[0]=new qe(g[0],i),c[1]=new qe(g[1],i),d=!0;break}}var y=i+1;if(d){for(var x=0,m=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);y<t;y++){var g=n.findGuardPattern(e,m[0],y,r,!1,l,f);if(g!=null&&Math.abs(m[0]-g[0])<n.MAX_PATTERN_DRIFT&&Math.abs(m[1]-g[1])<n.MAX_PATTERN_DRIFT)m=g,x=0;else{if(x>n.SKIPPED_ROW_COUNT_MAX)break;x++}}y-=x+1,c[2]=new qe(m[0],y),c[3]=new qe(m[1],y)}return y-i<n.BARCODE_MIN_HEIGHT&&Ln.fill(c,null),c},n.findGuardPattern=function(e,t,r,i,a,l,c){Ln.fillWithin(c,0,c.length,0);for(var d=t,f=0;e.get(d,r)&&d>0&&f++<n.MAX_PIXEL_DRIFT;)d--;for(var g=d,m=0,y=l.length,x=a;g<i;g++){var w=e.get(g,r);if(w!==x)c[m]++;else{if(m===y-1){if(n.patternMatchVariance(c,l,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([d,g]);d+=c[0]+c[1],Kt.arraycopy(c,2,c,0,m-1),c[m-1]=0,c[m]=0,m--}else m++;c[m]=1,x=!x}}return m===y-1&&n.patternMatchVariance(c,l,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([d,g-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,l=0,c=0;c<i;c++)a+=e[c],l+=t[c];if(a<l)return 1/0;var d=a/l;r*=d;for(var f=0,g=0;g<i;g++){var m=e[g],y=t[g]*d,x=m>y?m-y:y-m;if(x>r)return 1/0;f+=x}return f/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),JT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},no=(function(){function n(e,t){if(t.length===0)throw new Je;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Kt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=JT(this.coefficients),l=a.next();!l.done;l=a.next()){var c=l.value;i=this.field.add(i,c)}}catch(m){t={error:m}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var d=this.coefficients[0],f=this.coefficients.length,g=1;g<f;g++)d=this.field.add(this.field.multiply(e,d),this.coefficients[g]);return d},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Je("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),l=r.length-t.length;Kt.arraycopy(r,0,a,0,l);for(var c=l;c<r.length;c++)a[c]=this.field.add(t[c-l],r[c]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Je("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Je("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,l=new Int32Array(r+a-1),c=0;c<r;c++)for(var d=t[c],f=0;f<a;f++)l[c+f]=this.field.add(l[c+f],this.field.multiply(d,i[f]));return new n(this.field,l)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Je;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new yt,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),eO=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Je;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new Sw;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),tO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),nO=(function(n){tO(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,l=0;l<t;l++)i.expTable[l]=a,a=a*r%t;for(var l=0;l<t-1;l++)i.logTable[i.expTable[l]]=l;return i.zero=new no(i,new Int32Array([0])),i.one=new no(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Je;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new no(this,i)},e.PDF417_GF=new e(Tt.NUMBER_OF_CODEWORDS,3),e})(eO),rO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iO=(function(){function n(){this.field=nO.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,l=new no(this.field,e),c=new Int32Array(t),d=!1,f=t;f>0;f--){var g=l.evaluateAt(this.field.exp(f));c[t-f]=g,g!==0&&(d=!0)}if(!d)return 0;var m=this.field.getOne();if(r!=null)try{for(var y=rO(r),x=y.next();!x.done;x=y.next()){var w=x.value,_=this.field.exp(e.length-1-w),A=new no(this.field,new Int32Array([this.field.subtract(0,_),1]));m=m.multiply(A)}}catch(V){i={error:V}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}for(var E=new no(this.field,c),S=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),E,t),T=S[0],R=S[1],N=this.findErrorLocations(T),k=this.findErrorMagnitudes(R,T,N),f=0;f<N.length;f++){var M=e.length-1-this.field.log(N[f]);if(M<0)throw In.getChecksumInstance();e[M]=this.field.subtract(e[M],k[f])}return N.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,l=t,c=this.field.getZero(),d=this.field.getOne();l.getDegree()>=Math.round(r/2);){var f=a,g=c;if(a=l,c=d,a.isZero())throw In.getChecksumInstance();l=f;for(var m=this.field.getZero(),y=a.getCoefficient(a.getDegree()),x=this.field.inverse(y);l.getDegree()>=a.getDegree()&&!l.isZero();){var w=l.getDegree()-a.getDegree(),_=this.field.multiply(l.getCoefficient(l.getDegree()),x);m=m.add(this.field.buildMonomial(w,_)),l=l.subtract(a.multiplyByMonomial(w,_))}d=m.multiply(c).subtract(g).negative()}var A=d.getCoefficient(0);if(A===0)throw In.getChecksumInstance();var E=this.field.inverse(A),S=d.multiply(E),T=l.multiply(E);return[S,T]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw In.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),l=1;l<=i;l++)a[i-l]=this.field.multiply(l,t.getCoefficient(l));for(var c=new no(this.field,a),d=r.length,f=new Int32Array(d),l=0;l<d;l++){var g=this.field.inverse(r[l]),m=this.field.subtract(0,e.evaluateAt(g)),y=this.field.inverse(c.evaluateAt(g));f[l]=this.field.multiply(m,y)}return f},n})(),K0=(function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var l=t==null||r==null,c=i==null||a==null;if(l&&c)throw new le;l?(t=new qe(0,i.getY()),r=new qe(0,a.getY())):c&&(i=new qe(e.getWidth()-1,t.getY()),a=new qe(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,l=this.topRight,c=this.bottomRight;if(e>0){var d=r?this.topLeft:this.topRight,f=Math.trunc(d.getY()-e);f<0&&(f=0);var g=new qe(d.getX(),f);r?i=g:l=g}if(t>0){var m=r?this.bottomLeft:this.bottomRight,y=Math.trunc(m.getY()+t);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);var x=new qe(m.getX(),y);r?a=x:c=x}return new n(this.image,i,a,l,c)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),aO=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),Vp=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(l,c,d,f,g,m){if(l==="%%")return"%";if(t[++r]!==void 0){l=f?parseInt(f.substr(1)):void 0;var y=g?parseInt(g.substr(1)):void 0,x;switch(m){case"s":x=t[r];break;case"c":x=t[r][0];break;case"f":x=parseFloat(t[r]).toFixed(l);break;case"p":x=parseFloat(t[r]).toPrecision(l);break;case"e":x=parseFloat(t[r]).toExponential(l);break;case"x":x=parseInt(t[r]).toString(y||16);break;case"d":x=parseFloat(parseInt(t[r],y||10).toPrecision(l)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(y);for(var w=parseInt(d),_=d&&d[0]+""=="0"?"0":" ";x.length<w;)x=c!==void 0?x+_:_+x;return x}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),oO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nw=(function(){function n(e){this.boundingBox=new K0(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new Vp,i=0;try{for(var a=oO(this.codewords),l=a.next();!l.done;l=a.next()){var c=l.value;if(c==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue())}}catch(d){e={error:d}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),sO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lO=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){l={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return a},Il=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(m,y){var x={getKey:function(){return m},getValue:function(){return y}};x.getValue()>r?(r=x.getValue(),i=[],i.push(x.getKey())):x.getValue()===r&&i.push(x.getKey())};try{for(var l=sO(this.values.entries()),c=l.next();!c.done;c=l.next()){var d=lO(c.value,2),f=d[0],g=d[1];a(f,g)}}catch(m){e={error:m}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}return Tt.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),cO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),s0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ox=(function(n){cO(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=s0(this.getCodewords()),a=i.next();!a.done;a=i.next()){var l=a.value;l?.setRowNumberAsRowIndicatorColumn()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),l=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=-1,g=1,m=0,y=c;y<d;y++)if(r[y]!=null){var x=r[y],w=x.getRowNumber()-f;if(w===0)m++;else if(w===1)g=Math.max(g,m),m=1,f=x.getRowNumber();else if(w<0||x.getRowNumber()>=t.getRowCount()||w>y)r[y]=null;else{var _=void 0;g>2?_=(g-2)*w:_=w;for(var A=_>=y,E=1;E<=_&&!A;E++)A=r[y-E]!=null;A?r[y]=null:(f=x.getRowNumber(),m=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var l=s0(this.getCodewords()),c=l.next();!c.done;c=l.next()){var d=c.value;if(d!=null){var f=d.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(g){t={error:g}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.getCodewords(),f=-1,g=l;g<c;g++)if(d[g]!=null){var m=d[g];m.setRowNumberAsRowIndicatorColumn();var y=m.getRowNumber()-f;y===0||(y===1?f=m.getRowNumber():m.getRowNumber()>=t.getRowCount()?d[g]=null:f=m.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new Il,l=new Il,c=new Il,d=new Il;try{for(var f=s0(i),g=f.next();!g.done;g=f.next()){var m=g.value;if(m!=null){m.setRowNumberAsRowIndicatorColumn();var y=m.getValue()%30,x=m.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:l.setValue(y*3+1);break;case 1:d.setValue(y/3),c.setValue(y%3);break;case 2:a.setValue(y+1);break}}}}catch(_){t={error:_}}finally{try{g&&!g.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(a.getValue().length===0||l.getValue().length===0||c.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+c.getValue()[0]<Tt.MIN_ROWS_IN_BARCODE||l.getValue()[0]+c.getValue()[0]>Tt.MAX_ROWS_IN_BARCODE)return null;var w=new aO(a.getValue()[0],l.getValue()[0],c.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(i,w),w},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var l=a.getValue()%30,c=a.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:l*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(l/3)!==r.getErrorCorrectionLevel()||l%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:l+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(Nw),uO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dO=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Tt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,l=this.barcodeColumnCount+1;l>0&&a<this.ADJUST_ROW_NUMBER_SKIP;l--){var c=this.detectionResultColumns[l].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,l=1;l<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;l++){var c=this.detectionResultColumns[l].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var l=r[t],c=this.detectionResultColumns[e-1].getCodewords(),d=c;this.detectionResultColumns[e+1]!=null&&(d=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=c[t],f[3]=d[t],t>0&&(f[0]=r[t-1],f[4]=c[t-1],f[5]=d[t-1]),t>1&&(f[8]=r[t-2],f[10]=c[t-2],f[11]=d[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=c[t+1],f[7]=d[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=c[t+2],f[13]=d[t+2]);try{for(var g=uO(f),m=g.next();!m.done;m=g.next()){var y=m.value;if(n.adjustRowNumber(l,y))return}}catch(x){i={error:x}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Vp,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n})(),fO=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),hO=(function(){function n(){}return n.initialize=function(){for(var e=0;e<Tt.SYMBOL_TABLE.length;e++)for(var t=Tt.SYMBOL_TABLE[e],r=t&1,i=0;i<Tt.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Tt.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Tt.BARS_IN_MODULE-i-1]=Math.fround(a/Tt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=Nt.sum(e),r=new Int32Array(Tt.BARS_IN_MODULE),i=0,a=0,l=0;l<Tt.MODULES_IN_CODEWORD;l++){var c=t/(2*Tt.MODULES_IN_CODEWORD)+l*t/Tt.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Tt.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=Nt.sum(e),r=new Array(Tt.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=W0.MAX_VALUE,l=-1;this.bSymbolTableReady||n.initialize();for(var c=0;c<n.RATIOS_TABLE.length;c++){for(var d=0,f=n.RATIOS_TABLE[c],g=0;g<Tt.BARS_IN_MODULE;g++){var m=Math.fround(f[g]-r[g]);if(d+=Math.fround(m*m),d>=a)break}d<a&&(a=d,l=Tt.SYMBOL_TABLE[c])}return l},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Tt.SYMBOL_TABLE.length).map(function(e){return new Array(Tt.BARS_IN_MODULE)}),n})(),pO=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),Rx=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),gO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mO=(function(n){gO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(wr),yO=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new mO;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new Lp;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),vO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xO=(function(n){vO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(wr),bO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wO=(function(n){bO(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Je("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new xO;i=vt.MAX_VALUE}this.buf=Ln.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new Lp;this.ensureCapacity(this.count+i),Kt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ln.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(yO),$t;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})($t||($t={}));function kw(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Du;function xa(n){if(typeof Du>"u"&&(Du=kw()),Du===null)throw new Error("BigInt is not supported!");return Du(n)}function _O(){var n=[];n[0]=xa(1);var e=xa(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var SO=(function(){function n(){}return n.decode=function(e,t){var r=new yt(""),i=Bn.ISO8859_1;r.enableDecoding(i);for(var a=1,l=e[a++],c=new pO;a<e[0];){switch(l){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(l,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Bn.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,c);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new Ae;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)l=e[a++];else throw Ae.getFormatInstance()}if(r.length()===0)throw Ae.getFormatInstance();var d=new Cd(null,r.toString(),null,t);return d.setOther(c),d},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Ae.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(vt.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var l=new yt;t=n.textCompaction(e,t,l),r.setFileId(l.toString());var c=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var d=new yt;t=n.textCompaction(e,t+1,d),r.setFileName(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new yt;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var g=new yt;t=n.textCompaction(e,t+1,g),r.setAddressee(g.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var m=new yt;t=n.numericCompaction(e,t+1,m),r.setSegmentCount(vt.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var y=new yt;t=n.numericCompaction(e,t+1,y),r.setTimestamp(Rx.parseLong(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var x=new yt;t=n.numericCompaction(e,t+1,x),r.setChecksum(vt.parseInt(x.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var w=new yt;t=n.numericCompaction(e,t+1,w),r.setFileSize(Rx.parseLong(w.toString()));break;default:throw Ae.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw Ae.getFormatInstance()}if(c!==-1){var _=t-c;r.isLastSegment()&&_--,r.setOptionalData(Ln.copyOfRange(e,c,c+_))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),l=0,c=!1;t<e[0]&&!c;){var d=e[t++];if(d<n.TEXT_COMPACTION_MODE_LATCH)i[l]=d/30,i[l+1]=d%30,l+=2;else switch(d){case n.TEXT_COMPACTION_MODE_LATCH:i[l++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[l]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,d=e[t++],a[l]=d,l++;break}}return n.decodeTextCompaction(i,a,l,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=$t.ALPHA,l=$t.ALPHA,c=0;c<r;){var d=e[c],f="";switch(a){case $t.ALPHA:if(d<26)f=String.fromCharCode(65+d);else switch(d){case 26:f=" ";break;case n.LL:a=$t.LOWER;break;case n.ML:a=$t.MIXED;break;case n.PS:l=a,a=$t.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.LOWER:if(d<26)f=String.fromCharCode(97+d);else switch(d){case 26:f=" ";break;case n.AS:l=a,a=$t.ALPHA_SHIFT;break;case n.ML:a=$t.MIXED;break;case n.PS:l=a,a=$t.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.MIXED:if(d<n.PL)f=n.MIXED_CHARS[d];else switch(d){case n.PL:a=$t.PUNCT;break;case 26:f=" ";break;case n.LL:a=$t.LOWER;break;case n.AL:a=$t.ALPHA;break;case n.PS:l=a,a=$t.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.PUNCT:if(d<n.PAL)f=n.PUNCT_CHARS[d];else switch(d){case n.PAL:a=$t.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.ALPHA_SHIFT:if(a=l,d<26)f=String.fromCharCode(65+d);else switch(d){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.PUNCT_SHIFT:if(a=l,d<n.PAL)f=n.PUNCT_CHARS[d];else switch(d){case n.PAL:a=$t.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break}f!==""&&i.append(f),c++}},n.byteCompaction=function(e,t,r,i,a){var l=new wO,c=0,d=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var g=new Int32Array(6),m=t[i++];i<t[0]&&!f;)switch(g[c++]=m,d=900*d+m,m=t[i++],m){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(c%5===0&&c>0){for(var y=0;y<6;++y)l.write(Number(xa(d)>>xa(8*(5-y))));d=0,c=0}break}i===t[0]&&m<n.TEXT_COMPACTION_MODE_LATCH&&(g[c++]=m);for(var x=0;x<c;x++)l.write(g[x]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var w=t[i++];if(w<n.TEXT_COMPACTION_MODE_LATCH)c++,d=900*d+w;else switch(w){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(c%5===0&&c>0){for(var y=0;y<6;++y)l.write(Number(xa(d)>>xa(8*(5-y))));d=0,c=0}}break}return a.append(Xr.decode(l.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,l=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var c=e[t++];if(t===e[0]&&(a=!0),c<n.TEXT_COMPACTION_MODE_LATCH)l[i]=c,i++;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||c===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(l,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=xa(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*xa(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new Ae;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=kw()?_O():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),Cl=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CO=(function(){function n(){}return n.decode=function(e,t,r,i,a,l,c){for(var d=new K0(e,t,r,i,a),f=null,g=null,m,y=!0;;y=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,d,t,!0,l,c)),i!=null&&(g=n.getRowIndicatorColumn(e,d,i,!1,l,c)),m=n.merge(f,g),m==null)throw le.getNotFoundInstance();var x=m.getBoundingBox();if(y&&x!=null&&(x.getMinY()<d.getMinY()||x.getMaxY()>d.getMaxY()))d=x;else break}m.setBoundingBox(d);var w=m.getBarcodeColumnCount()+1;m.setDetectionResultColumn(0,f),m.setDetectionResultColumn(w,g);for(var _=f!=null,A=1;A<=w;A++){var E=_?A:w-A;if(m.getDetectionResultColumn(E)===void 0){var S=void 0;E===0||E===w?S=new Ox(d,E===0):S=new Nw(d),m.setDetectionResultColumn(E,S);for(var T=-1,R=T,N=d.getMinY();N<=d.getMaxY();N++){if(T=n.getStartColumn(m,E,N,_),T<0||T>d.getMaxX()){if(R===-1)continue;T=R}var k=n.detectCodeword(e,d.getMinX(),d.getMaxX(),_,T,N,l,c);k!=null&&(S.setCodeword(N,k),R=T,l=Math.min(l,k.getWidth()),c=Math.max(c,k.getWidth()))}}}return n.createDecoderResult(m)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=K0.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new dO(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),l=0;try{for(var c=Cl(i),d=c.next();!d.done;d=c.next()){var f=d.value;if(l+=a-f,f>0)break}}catch(x){t={error:x}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var g=e.getCodewords(),m=0;l>0&&g[m]==null;m++)l--;for(var y=0,m=i.length-1;m>=0&&(y+=a-i[m],!(i[m]>0));m--);for(var m=g.length-1;y>0&&g[m]==null;m--)y--;return e.getBoundingBox().addMissingRows(l,y,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Cl(e),l=a.next();!l.done;l=a.next()){var c=l.value;i=Math.max(i,c)}}catch(d){t={error:d}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,l){for(var c=new Ox(t,i),d=0;d<2;d++)for(var f=d===0?1:-1,g=Math.trunc(Math.trunc(r.getX())),m=Math.trunc(Math.trunc(r.getY()));m<=t.getMaxY()&&m>=t.getMinY();m+=f){var y=n.detectCodeword(e,0,e.getWidth(),i,g,m,a,l);y!=null&&(c.setCodeword(m,y),i?g=y.getStartX():g=y.getEndX())}return c},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Tt.MAX_CODEWORDS_IN_BARCODE)throw le.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],l=new Array,c=0;c<e.getBarcodeRowCount();c++)for(var d=0;d<e.getBarcodeColumnCount();d++){var f=t[c][d+1].getValue(),g=c*e.getBarcodeColumnCount()+d;f.length===0?r.push(g):f.length===1?i[g]=f[0]:(l.push(g),a.push(f))}for(var m=new Array(a.length),y=0;y<m.length;y++)m[y]=a[y];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Tt.toIntArray(r),Tt.toIntArray(l),m)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var l=new Int32Array(i.length),c=100;c-- >0;){for(var d=0;d<l.length;d++)t[i[d]]=a[d][l[d]];try{return n.decodeCodewords(t,e,r)}catch(g){var f=g instanceof In;if(!f)throw g}if(l.length===0)throw In.getChecksumInstance();for(var d=0;d<l.length;d++)if(l[d]<a[d].length-1){l[d]++;break}else if(l[d]=0,d===l.length-1)throw In.getChecksumInstance()}throw In.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,l=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),c=0;c<l.length;c++)for(var d=0;d<l[c].length;d++)l[c][d]=new Il;var f=0;try{for(var g=Cl(e.getDetectionResultColumns()),m=g.next();!m.done;m=g.next()){var y=m.value;if(y!=null)try{for(var x=(i=void 0,Cl(y.getCodewords())),w=x.next();!w.done;w=x.next()){var _=w.value;if(_!=null){var A=_.getRowNumber();if(A>=0){if(A>=l.length)continue;l[A][f].setValue(_.getValue())}}}}catch(E){i={error:E}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}f++}}catch(E){t={error:E}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}return l},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,l,c=i?1:-1,d=null;if(n.isValidBarcodeColumn(e,t-c)&&(d=e.getDetectionResultColumn(t-c).getCodeword(r)),d!=null)return i?d.getEndX():d.getStartX();if(d=e.getDetectionResultColumn(t).getCodewordNearby(r),d!=null)return i?d.getStartX():d.getEndX();if(n.isValidBarcodeColumn(e,t-c)&&(d=e.getDetectionResultColumn(t-c).getCodewordNearby(r)),d!=null)return i?d.getEndX():d.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-c);){t-=c;try{for(var g=(a=void 0,Cl(e.getDetectionResultColumn(t).getCodewords())),m=g.next();!m.done;m=g.next()){var y=m.value;if(y!=null)return(i?y.getEndX():y.getStartX())+c*f*(y.getEndX()-y.getStartX())}}catch(x){a={error:x}}finally{try{m&&!m.done&&(l=g.return)&&l.call(g)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,l,c,d){a=n.adjustCodewordStartColumn(e,t,r,i,a,l);var f=n.getModuleBitCount(e,t,r,i,a,l);if(f==null)return null;var g,m=Nt.sum(f);if(i)g=a+m;else{for(var y=0;y<f.length/2;y++){var x=f[y];f[y]=f[f.length-1-y],f[f.length-1-y]=x}g=a,a=g-m}if(!n.checkCodewordSkew(m,c,d))return null;var w=hO.getDecodedValue(f),_=Tt.getCodeword(w);return _===-1?null:new fO(a,g,n.getCodewordBucketNumber(w),_)},n.getModuleBitCount=function(e,t,r,i,a,l){for(var c=a,d=new Int32Array(8),f=0,g=i?1:-1,m=i;(i?c<r:c>=t)&&f<d.length;)e.get(c,l)===m?(d[f]++,c+=g):(f++,m=!m);return f===d.length||c===(i?r:t)&&f===d.length-1?d:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,l){for(var c=a,d=i?-1:1,f=0;f<2;f++){for(;(i?c>=t:c<r)&&i===e.get(c,l);){if(Math.abs(a-c)>n.CODEWORD_SKEW_SIZE)return a;c+=d}d=-d,i=!i}return c},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw Ae.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var l=SO.decode(e,""+t);return l.setErrorsCorrected(a),l.setErasures(r.length),l},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw In.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw Ae.getFormatInstance();var r=e[0];if(r>e.length)throw Ae.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw Ae.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new Vp,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new iO,n})(),EO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cd=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw le.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof Ae||r instanceof In?le.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,l=new Array,c=QT.detectMultiple(e,t,r);try{for(var d=EO(c.getPoints()),f=d.next();!f.done;f=d.next()){var g=f.value,m=CO.decode(c.getBits(),g[4],g[5],g[6],g[7],n.getMinCodewordWidth(g),n.getMaxCodewordWidth(g)),y=new ar(m.getText(),m.getRawBytes(),void 0,g,Qe.PDF_417);y.putMetadata(er.ERROR_CORRECTION_LEVEL,m.getECLevel());var x=m.getOther();x!=null&&y.putMetadata(er.PDF417_EXTRA_METADATA,x),l.push(y)}}catch(w){i={error:w}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return l.map(function(w){return w})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?vt.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Tt.MODULES_IN_CODEWORD/Tt.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Tt.MODULES_IN_CODEWORD/Tt.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Tt.MODULES_IN_CODEWORD/Tt.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Tt.MODULES_IN_CODEWORD/Tt.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),AO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ix=(function(n){AO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(wr),Nx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dw=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Zt.TRY_HARDER)!==void 0,r=e==null?null:e.get(Zt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(l){return l===Qe.UPC_A||l===Qe.UPC_E||l===Qe.EAN_13||l===Qe.EAN_8||l===Qe.CODABAR||l===Qe.CODE_39||l===Qe.CODE_93||l===Qe.CODE_128||l===Qe.ITF||l===Qe.RSS_14||l===Qe.RSS_EXPANDED});a&&!t&&i.push(new ss(e)),r.includes(Qe.QR_CODE)&&i.push(new ld),r.includes(Qe.DATA_MATRIX)&&i.push(new sd),r.includes(Qe.AZTEC)&&i.push(new ad),r.includes(Qe.PDF_417)&&i.push(new cd),a&&t&&i.push(new ss(e))}i.length===0&&(t||i.push(new ss(e)),i.push(new ld),i.push(new sd),i.push(new ad),i.push(new cd),t&&i.push(new ss(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=Nx(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new Ix("No readers where selected, nothing can be read.");try{for(var i=Nx(this.readers),a=i.next();!a.done;a=i.next()){var l=a.value;try{return l.decode(e,this.hints)}catch(c){if(c instanceof Ix)continue}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new le("No MultiFormat Readers were able to detect the code.")},n})(),TO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){TO(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new Dw;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(As);var OO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){OO(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new cd,t)||this}return e})(As);var RO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){RO(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new ld,t)||this}return e})(As);var Z0;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Z0||(Z0={}));const ju=Z0;var jw=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new wa(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var l=r.multiply(new wa(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(l),r=l}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Je("No error correction bytes");var r=e.length-t;if(r<=0)throw new Je("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Kt.arraycopy(e,0,a,0,r);var l=new wa(this.field,a);l=l.multiplyByMonomial(t,1);for(var c=l.divide(i)[1],d=c.getCoefficients(),f=t-d.length,g=0;g<f;g++)e[r+g]=0;Kt.arraycopy(d,0,e,r+f,d.length)},n})(),Nl=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),l=0;l<a-1;l++)for(var c=r[l],d=0;d<i-1;d++){var f=c[d];f===c[d+1]&&f===r[l+1][d]&&f===r[l+1][d+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),l=0;l<a;l++)for(var c=0;c<i;c++){var d=r[l];c+6<i&&d[c]===1&&d[c+1]===0&&d[c+2]===1&&d[c+3]===1&&d[c+4]===1&&d[c+5]===0&&d[c+6]===1&&(n.isWhiteHorizontal(d,c-4,c)||n.isWhiteHorizontal(d,c+7,c+11))&&t++,l+6<a&&r[l][c]===1&&r[l+1][c]===0&&r[l+2][c]===1&&r[l+3][c]===1&&r[l+4][c]===1&&r[l+5][c]===0&&r[l+6][c]===1&&(n.isWhiteVertical(r,c,l-4,l)||n.isWhiteVertical(r,c,l+7,l+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),l=0;l<a;l++)for(var c=r[l],d=0;d<i;d++)c[d]===1&&t++;var f=e.getHeight()*e.getWidth(),g=Math.floor(Math.abs(t*2-f)*10/f);return g*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Je("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),l=e.getArray(),c=0;c<i;c++){for(var d=0,f=-1,g=0;g<a;g++){var m=t?l[c][g]:l[g][c];m===f?d++:(d>=5&&(r+=n.N1+(d-5)),d=1,f=m)}d>=5&&(r+=n.N1+(d-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),IO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NO=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=IO(this.bytes),a=i.next();!a.done;a=i.next()){var l=a.value;Ln.fill(l,e)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],l=t.bytes[r],c=0,d=this.width;c<d;++c)if(a[c]!==l[c])return!1;return!0},n.prototype.toString=function(){for(var e=new yt,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,l=this.width;a<l;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),Q0=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new yt;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),kO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),en=(function(n){kO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(wr),kx=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new qn;n.makeTypeInfoBits(e,t,i);for(var a=0,l=i.getSize();a<l;++a){var c=i.get(i.getSize()-1-a),d=n.TYPE_INFO_COORDINATES[a],f=d[0],g=d[1];if(r.setBoolean(f,g,c),a<8){var m=r.getWidth()-a-1,y=8;r.setBoolean(m,y,c)}else{var m=8,y=r.getHeight()-7+(a-8);r.setBoolean(m,y,c)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new qn;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var l=0;l<3;++l){var c=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+l,c),t.setBoolean(t.getHeight()-11+l,a,c)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,l=r.getWidth()-1,c=r.getHeight()-1;l>0;){for(l===6&&(l-=1);c>=0&&c<r.getHeight();){for(var d=0;d<2;++d){var f=l-d;if(n.isEmpty(r.get(f,c))){var g=void 0;i<e.getSize()?(g=e.get(i),++i):g=!1,t!==255&&Nl.getDataMaskBit(t,f,c)&&(g=!g),r.setBoolean(f,c,g)}}c+=a}a=-a,c+=a,l-=2}if(i!==e.getSize())throw new en("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-vt.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Je("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Q0.isValidMaskPattern(t))throw new en("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var l=new qn;if(l.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(l),r.getSize()!==15)throw new en("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new en("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new en;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new en;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new en;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],l=0;l<5;++l)r.setNumber(e+l,t+i,a[l])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],l=0;l<7;++l)r.setNumber(e+l,t+i,a[l])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,l=i.length;a!==l;a++){var c=i[a];if(c>=0)for(var d=0;d!==l;d++){var f=i[d];f>=0&&n.isEmpty(t.get(f,c))&&n.embedPositionAdjustmentPattern(f-2,c-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),DO=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),Dx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return Nl.applyMaskPenaltyRule1(e)+Nl.applyMaskPenaltyRule2(e)+Nl.applyMaskPenaltyRule3(e)+Nl.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(ju.CHARACTER_SET)!==void 0;a&&(i=r.get(ju.CHARACTER_SET).toString());var l=this.chooseMode(e,i),c=new qn;if(l===tn.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var d=Bn.getCharacterSetECIByName(i);d!==void 0&&this.appendECI(d,c)}this.appendModeInfo(l,c);var f=new qn;this.appendBytes(e,l,f,i);var g;if(r!==null&&r.get(ju.QR_VERSION)!==void 0){var m=Number.parseInt(r.get(ju.QR_VERSION).toString(),10);g=ao.getVersionForNumber(m);var y=this.calculateBitsNeeded(l,c,f,g);if(!this.willFit(y,g,t))throw new en("Data too big for requested version")}else g=this.recommendVersion(t,l,c,f);var x=new qn;x.appendBitArray(c);var w=l===tn.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(w,g,l,x),x.appendBitArray(f);var _=g.getECBlocksForLevel(t),A=g.getTotalCodewords()-_.getTotalECCodewords();this.terminateBits(A,x);var E=this.interleaveWithECBytes(x,g.getTotalCodewords(),A,_.getNumBlocks()),S=new Q0;S.setECLevel(t),S.setMode(l),S.setVersion(g);var T=g.getDimensionForVersion(),R=new NO(T,T),N=this.chooseMaskPattern(E,t,g,R);return S.setMaskPattern(N),kx.buildMatrix(E,t,g,N,R),S.setMatrix(R),S},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,ao.getVersionForNumber(1)),l=this.chooseVersion(a,e),c=this.calculateBitsNeeded(t,r,i,l);return this.chooseVersion(c,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Bn.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return tn.KANJI;for(var r=!1,i=!1,a=0,l=e.length;a<l;++a){var c=e.charAt(a);if(n.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return tn.BYTE}return i?tn.ALPHANUMERIC:r?tn.NUMERIC:tn.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Xr.encode(e,Bn.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,l=-1,c=0;c<Q0.NUM_MASK_PATTERNS;c++){kx.buildMatrix(e,t,r,c,i);var d=this.calculateMaskPenalty(i);d<a&&(a=d,l=c)}return l},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=ao.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new en("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),l=a.getTotalECCodewords(),c=i-l,d=(e+7)/8;return c>=d},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new en("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var l=e-t.getSizeInBytes(),i=0;i<l;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new en("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,l){if(i>=r)throw new en("Block ID too large");var c=e%r,d=r-c,f=Math.floor(e/r),g=f+1,m=Math.floor(t/r),y=m+1,x=f-m,w=g-y;if(x!==w)throw new en("EC bytes mismatch");if(r!==d+c)throw new en("RS blocks mismatch");if(e!==(m+x)*d+(y+w)*c)throw new en("Total bytes mismatch");i<d?(a[0]=m,l[0]=x):(a[0]=y,l[0]=w)},n.interleaveWithECBytes=function(e,t,r,i){var a,l,c,d;if(e.getSizeInBytes()!==r)throw new en("Number of bits and data bytes does not match");for(var f=0,g=0,m=0,y=new Array,x=0;x<i;++x){var w=new Int32Array(1),_=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,x,w,_);var A=w[0],E=new Uint8Array(A);e.toBytes(8*f,E,0,A);var S=n.generateECBytes(E,_[0]);y.push(new DO(E,S)),g=Math.max(g,A),m=Math.max(m,S.length),f+=w[0]}if(r!==f)throw new en("Data bytes does not match offset");for(var T=new qn,x=0;x<g;++x)try{for(var R=(a=void 0,Dx(y)),N=R.next();!N.done;N=R.next()){var k=N.value,E=k.getDataBytes();x<E.length&&T.appendBits(E[x],8)}}catch(fe){a={error:fe}}finally{try{N&&!N.done&&(l=R.return)&&l.call(R)}finally{if(a)throw a.error}}for(var x=0;x<m;++x)try{for(var M=(c=void 0,Dx(y)),V=M.next();!V.done;V=M.next()){var k=V.value,S=k.getErrorCorrectionBytes();x<S.length&&T.appendBits(S[x],8)}}catch(fe){c={error:fe}}finally{try{V&&!V.done&&(d=M.return)&&d.call(M)}finally{if(c)throw c.error}}if(t!==T.getSizeInBytes())throw new en("Interleaving error: "+t+" and "+T.getSizeInBytes()+" differ.");return T},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new jw(xr.QR_CODE_FIELD_256).encode(i,t);for(var l=new Uint8Array(t),a=0;a<t;a++)l[a]=i[r+a];return l},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new en(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case tn.NUMERIC:n.appendNumericBytes(e,r);break;case tn.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case tn.BYTE:n.append8BitBytes(e,r,i);break;case tn.KANJI:n.appendKanjiBytes(e,r);break;default:throw new en("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var l=n.getDigit(e.charAt(i+1)),c=n.getDigit(e.charAt(i+2));t.appendBits(a*100+l*10+c,10),i+=3}else if(i+1<r){var l=n.getDigit(e.charAt(i+1));t.appendBits(a*10+l,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new en;if(i+1<r){var l=n.getAlphanumericCode(e.charCodeAt(i+1));if(l===-1)throw new en;t.appendBits(a*45+l,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Xr.encode(e,r)}catch(d){throw new en(d)}for(var a=0,l=i.length;a!==l;a++){var c=i[a];t.appendBits(c,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Xr.encode(e,Bn.SJIS)}catch(m){throw new en(m)}for(var i=r.length,a=0;a<i;a+=2){var l=r[a]&255,c=r[a+1]&255,d=l<<8&4294967295|c,f=-1;if(d>=33088&&d<=40956?f=d-33088:d>=57408&&d<=60351&&(f=d-49472),f===-1)throw new en("Invalid byte sequence");var g=(f>>8)*192+(f&255);t.appendBits(g,13)}},n.appendECI=function(e,t){t.appendBits(tn.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Bn.UTF8.getName(),n})();var jO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){jO(e,n);function e(t,r,i,a,l,c,d,f){var g=n.call(this,c,d)||this;if(g.yuvData=t,g.dataWidth=r,g.dataHeight=i,g.left=a,g.top=l,a+c>r||l+d>i)throw new Je("Crop rectangle does not fit within image data.");return f&&g.reverseHorizontal(c,d),g}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Je("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Kt.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Kt.arraycopy(this.yuvData,l,a,0,i),a;for(var c=0;c<r;c++){var d=c*t;Kt.arraycopy(this.yuvData,l,a,d,t),l+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,l=this.top*this.dataWidth+this.left,c=0;c<r;c++){for(var d=c*t,f=0;f<t;f++){var g=a[l+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[d+f]=4278190080|g*65793}l+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,l=this.top*this.dataWidth+this.left;a<r;a++,l+=this.dataWidth)for(var c=l+t/2,d=l,f=l+t-1;d<c;d++,f--){var g=i[d];i[d]=i[f],i[f]=g}},e.prototype.invert=function(){return new Sd(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(tc);var MO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){MO(e,n);function e(t,r,i,a,l,c,d){var f=n.call(this,r,i)||this;if(f.dataWidth=a,f.dataHeight=l,f.left=c,f.top=d,t.BYTES_PER_ELEMENT===4){for(var g=r*i,m=new Uint8ClampedArray(g),y=0;y<g;y++){var x=t[y],w=x>>16&255,_=x>>7&510,A=x&255;m[y]=(w+_+A)/4&255}f.luminances=m}else f.luminances=t;if(a===void 0&&(f.dataWidth=r),l===void 0&&(f.dataHeight=i),c===void 0&&(f.left=0),d===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new Je("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Je("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Kt.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Kt.arraycopy(this.luminances,l,a,0,i),a;for(var c=0;c<r;c++){var d=c*t;Kt.arraycopy(this.luminances,l,a,d,t),l+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new Sd(this)},e})(tc);var PO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),BO=(function(n){PO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(Bn),LO=(function(){function n(){}return n.ISO_8859_1=Bn.ISO8859_1,n})(),J0,FO=301,UO=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=FO);return{LOG:n,ALOG:e}};J0=UO([],[]),J0.LOG;J0.ALOG;var jx;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(jx||(jx={}));var Mx=129,Mw=230,zO=231,VO=235,HO=236,$O=237,qO=238,GO=239,WO=240,l0=254,XO=254,Px="[)>05",Bx="[)>06",Lx="",Ut=0,Qn=1,cr=2,jn=3,Hn=4,rr=5,YO=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Ut},n.prototype.encode=function(e){var t=oi.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case rr:e.writeCodeword(zO),e.signalEncoderChange(rr);return;case Qn:e.writeCodeword(Mw),e.signalEncoderChange(Qn);return;case jn:e.writeCodeword(qO),e.signalEncoderChange(jn);break;case cr:e.writeCodeword(GO),e.signalEncoderChange(cr);break;case Hn:e.writeCodeword(WO),e.signalEncoderChange(Hn);break;default:throw new Error("Illegal mode: "+i)}else oi.isExtendedASCII(r)?(e.writeCodeword(VO),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(oi.isDigit(e)&&oi.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),KO=(function(){function n(){}return n.prototype.getEncodingMode=function(){return rr},n.prototype.encode=function(e){var t=new yt;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Ut);break}}var a=t.length()-1,l=1,c=e.getCodewordCount()+a+l;e.updateSymbolInfo(c);var d=e.getSymbolInfo().getDataCapacity()-c>0;if(e.hasMoreCharacters()||d)if(a<=249)t.setCharAt(0,At.getCharAt(a));else if(a<=1555)t.setCharAt(0,At.getCharAt(Math.floor(a/250)+249)),t.insert(1,At.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),Hp=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Qn},n.prototype.encodeMaximal=function(e){for(var t=new yt,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var l=e.getCurrentChar();e.pos++,r=this.encodeChar(l,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var c=Math.floor(t.length()/3*2),d=Math.floor(e.getCodewordCount()+c+1);e.updateSymbolInfo(d);var f=e.getSymbolInfo().getDataCapacity()-d,g=Math.floor(t.length()%3);(g===2&&f!==2||g===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Mw),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new yt;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,l=e.getCodewordCount()+a;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l;if(!e.hasMoreCharacters()){var d=new yt;for(t.length()%3===2&&c!==2&&(i=this.backtrackOneCharacter(e,t,d,i));t.length()%3===1&&(i>3||c!==1);)i=this.backtrackOneCharacter(e,t,d,i);break}var f=t.length();if(f%3===0){var g=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(g!==this.getEncodingMode()){e.signalEncoderChange(Ut);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),l=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(l),e.pos--;var c=e.getCurrentChar();return i=this.encodeChar(c,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var l=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(l0)}else if(l===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(l0),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(l>0||e.hasMoreCharacters())&&e.writeCodeword(l0)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Ut)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new yt;return a.append(r),a.append(i),a.toString()},n})(),ZO=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Hn},n.prototype.encode=function(e){for(var t=new yt;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var l=oi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(l!==this.getEncodingMode()){e.signalEncoderChange(Ut);break}}}t.append(At.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var l=r-1,c=this.encodeToCodewords(t.toString()),d=!e.hasMoreCharacters(),f=d&&l<=2;if(l<=2){e.updateSymbolInfo(e.getCodewordCount()+l);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+c.length))}f?(e.resetSymbolInfo(),e.pos-=l):e.writeCodewords(c)}finally{e.signalEncoderChange(Ut)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(At.getCharAt(e-64)):oi.illegalCharacter(At.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,l=t>=4?e.charAt(3).charCodeAt(0):0,c=(r<<18)+(i<<12)+(a<<6)+l,d=c>>16&255,f=c>>8&255,g=c&255,m=new yt;return m.append(d),t>=2&&m.append(f),t>=3&&m.append(g),m.toString()},n})(),QO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),JO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jt=(function(){function n(e,t,r,i,a,l,c,d){c===void 0&&(c=0),d===void 0&&(d=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=l,this.rsBlockData=c,this.rsBlockError=d}return n.lookup=function(e,t,r,i,a){var l,c;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var d=JO(t5),f=d.next();!f.done;f=d.next()){var g=f.value;if(!(t===1&&g.rectangular)&&!(t===2&&!g.rectangular)&&!(r!=null&&(g.getSymbolWidth()<r.getWidth()||g.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(g.getSymbolWidth()>i.getWidth()||g.getSymbolHeight()>i.getHeight()))&&e<=g.dataCapacity)return g}}catch(m){l={error:m}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),e5=(function(n){QO(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(jt),t5=[new jt(!1,3,5,8,8,1),new jt(!1,5,7,10,10,1),new jt(!0,5,7,16,6,1),new jt(!1,8,10,12,12,1),new jt(!0,10,11,14,6,2),new jt(!1,12,12,14,14,1),new jt(!0,16,14,24,10,1),new jt(!1,18,14,16,16,1),new jt(!1,22,18,18,18,1),new jt(!0,22,18,16,10,2),new jt(!1,30,20,20,20,1),new jt(!0,32,24,16,14,2),new jt(!1,36,24,22,22,1),new jt(!1,44,28,24,24,1),new jt(!0,49,28,22,14,2),new jt(!1,62,36,14,14,4),new jt(!1,86,42,16,16,4),new jt(!1,114,48,18,18,4),new jt(!1,144,56,20,20,4),new jt(!1,174,68,22,22,4),new jt(!1,204,84,24,24,4,102,42),new jt(!1,280,112,14,14,16,140,56),new jt(!1,368,144,16,16,16,92,36),new jt(!1,456,192,18,18,16,114,48),new jt(!1,576,224,20,20,16,144,56),new jt(!1,696,272,22,22,16,174,68),new jt(!1,816,336,24,24,16,136,56),new jt(!1,1050,408,18,18,36,175,68),new jt(!1,1304,496,20,20,36,163,62),new e5],n5=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(c){return c.charCodeAt(0)}),r=new yt,i=0,a=t.length;i<a;i++){var l=String.fromCharCode(t[i]&255);if(l==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(l)}this.msg=r.toString(),this.shape=0,this.codewords=new yt,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=jt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),r5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),i5=(function(n){r5(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return jn},e.prototype.encode=function(t){for(var r=new yt;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var l=oi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(l!==this.getEncodingMode()){t.signalEncoderChange(Ut);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):oi.illegalCharacter(At.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(XO),t.getNewEncoding()<0&&t.signalEncoderChange(Ut)},e})(Hp),a5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),o5=(function(n){a5(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return cr},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(Hp),oi=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=Mx+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var l=new Hp,c=[new YO,l,new o5,new i5,new ZO,new KO],d=new n5(e);d.setSymbolShape(t),d.setSizeConstraints(r,i),e.startsWith(Px)&&e.endsWith(Lx)?(d.writeCodeword(HO),d.setSkipAtEnd(2),d.pos+=Px.length):e.startsWith(Bx)&&e.endsWith(Lx)&&(d.writeCodeword($O),d.setSkipAtEnd(2),d.pos+=Bx.length);var f=Ut;for(a&&(l.encodeMaximal(d),f=d.getNewEncoding(),d.resetEncoderSignal());d.hasMoreCharacters();)c[f].encode(d),d.getNewEncoding()>=0&&(f=d.getNewEncoding(),d.resetEncoderSignal());var g=d.getCodewordCount();d.updateSymbolInfo();var m=d.getSymbolInfo().getDataCapacity();g<m&&f!==Ut&&f!==rr&&f!==Hn&&d.writeCodeword("");var y=d.getCodewords();for(y.length()<m&&y.append(Mx);y.length()<m;)y.append(this.randomize253State(y.length()+1));return d.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===jn&&i===jn){for(var a=Math.min(t+3,e.length),l=t;l<a;l++)if(!this.isNativeX12(e.charCodeAt(l)))return Ut}else if(r===Hn&&i===Hn){for(var a=Math.min(t+4,e.length),l=t;l<a;l++)if(!this.isNativeEDIFACT(e.charCodeAt(l)))return Ut}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===Ut?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,l=new Uint8Array(6),c=[];;){if(t+a===e.length){Ln.fill(l,0),Ln.fill(c,0);var d=this.findMinimums(i,c,vt.MAX_VALUE,l),f=this.getMinimumCount(l);if(c[Ut]===d)return Ut;if(f===1){if(l[rr]>0)return rr;if(l[Hn]>0)return Hn;if(l[cr]>0)return cr;if(l[jn]>0)return jn}return Qn}var g=e.charCodeAt(t+a);if(a++,this.isDigit(g)?i[Ut]+=.5:this.isExtendedASCII(g)?(i[Ut]=Math.ceil(i[Ut]),i[Ut]+=2):(i[Ut]=Math.ceil(i[Ut]),i[Ut]++),this.isNativeC40(g)?i[Qn]+=2/3:this.isExtendedASCII(g)?i[Qn]+=8/3:i[Qn]+=4/3,this.isNativeText(g)?i[cr]+=2/3:this.isExtendedASCII(g)?i[cr]+=8/3:i[cr]+=4/3,this.isNativeX12(g)?i[jn]+=2/3:this.isExtendedASCII(g)?i[jn]+=13/3:i[jn]+=10/3,this.isNativeEDIFACT(g)?i[Hn]+=3/4:this.isExtendedASCII(g)?i[Hn]+=17/4:i[Hn]+=13/4,this.isSpecialB256(g)?i[rr]+=4:i[rr]++,a>=4){if(Ln.fill(l,0),Ln.fill(c,0),this.findMinimums(i,c,vt.MAX_VALUE,l),c[Ut]<this.min(c[rr],c[Qn],c[cr],c[jn],c[Hn]))return Ut;if(c[rr]<c[Ut]||c[rr]+1<this.min(c[Qn],c[cr],c[jn],c[Hn]))return rr;if(c[Hn]+1<this.min(c[rr],c[Qn],c[cr],c[jn],c[Ut]))return Hn;if(c[cr]+1<this.min(c[rr],c[Qn],c[Hn],c[jn],c[Ut]))return cr;if(c[jn]+1<this.min(c[rr],c[Qn],c[Hn],c[cr],c[Ut]))return jn;if(c[Qn]+1<this.min(c[Ut],c[rr],c[Hn],c[cr])){if(c[Qn]<c[jn])return Qn;if(c[Qn]===c[jn]){for(var m=t+a+1;m<e.length;){var y=e.charCodeAt(m);if(this.isX12TermSep(y))return jn;if(!this.isNativeX12(y))break;m++}return Qn}}}}},n.min=function(e,t,r,i,a){var l=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?l:Math.min(l,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var l=t[a]=Math.ceil(e[a]);r>l&&(r=l,Ln.fill(i,0)),r===l&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=vt.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),c0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fx=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Xr.encode(e,this.charset)!=null}catch{return!1}},n})(),s5=(function(){function n(e,t,r){var i,a,l,c,d,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(ie){return new Fx(BO.forName(ie))}),this.encoders=[];var g=[];g.push(new Fx(LO.ISO_8859_1));for(var m=t!=null&&t.name.startsWith("UTF"),y=0;y<e.length;y++){var x=!1;try{for(var w=(i=void 0,c0(g)),_=w.next();!_.done;_=w.next()){var A=_.value,E=e.charAt(y),S=E.charCodeAt(0);if(S===r||A.canEncode(E)){x=!0;break}}}catch(ie){i={error:ie}}finally{try{_&&!_.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}if(!x)try{for(var T=(l=void 0,c0(this.ENCODERS)),R=T.next();!R.done;R=T.next()){var A=R.value;if(A.canEncode(e.charAt(y))){g.push(A),x=!0;break}}}catch(ie){l={error:ie}}finally{try{R&&!R.done&&(c=T.return)&&c.call(T)}finally{if(l)throw l.error}}x||(m=!0)}if(g.length===1&&!m)this.encoders=[g[0]];else{this.encoders=[];var N=0;try{for(var k=c0(g),M=k.next();!M.done;M=k.next()){var A=M.value;this.encoders[N++]=A}}catch(ie){d={error:ie}}finally{try{M&&!M.done&&(f=k.return)&&f.call(k)}finally{if(d)throw d.error}}}var V=-1;if(t!=null){for(var y=0;y<this.encoders.length;y++)if(this.encoders[y]!=null&&t.name===this.encoders[y].name){V=y;break}}this.priorityEncoderIndex=V}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Xr.encode(At.getCharAt(e),this.encoders[t].name)},n})(),l5=3,c5=(function(){function n(e,t,r){this.fnc1=r;var i=new s5(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var l=e.charAt(a).charCodeAt(0);this.bytes[a]=l===r?1e3:l}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new yt,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,l){var c=e.charAt(i).charCodeAt(0),d=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(c===l||t.canEncode(c,t.getPriorityEncoderIndex()))&&(d=t.getPriorityEncoderIndex(),f=d+1);for(var g=d;g<f;g++)(c===l||t.canEncode(c,g))&&this.addEdge(r,i+1,new Ux(c,t,g,a,l))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new Ux[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var l=1;l<=i;l++){for(var c=0;c<t.length();c++)a[l][c]!=null&&l<i&&this.addEdges(e,t,a,l,a[l][c],r);for(var c=0;c<t.length();c++)a[l-1][c]=null}for(var d=-1,f=vt.MAX_VALUE,c=0;c<t.length();c++)if(a[i][c]!=null){var g=a[i][c];g.cachedTotalSize<f&&(f=g.cachedTotalSize,d=c)}if(d<0)throw new Error('Failed to encode "'+e+'"');for(var m=[],y=a[i][d];y!=null;){if(y.isFNC1())m.unshift(1e3);else for(var x=t.encode(y.c,y.encoderIndex),l=x.length-1;l>=0;l--)m.unshift(x[l]&255);var w=y.previous===null?0:y.previous.encoderIndex;w!==y.encoderIndex&&m.unshift(256+t.getECIValue(y.encoderIndex)),y=y.previous}for(var _=[],l=0;l<_.length;l++)_[l]=m[l];return _},n})(),Ux=(function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var l=this.isFNC1()?1:t.encode(e,r).length,c=i===null?0:i.encoderIndex;c!==r&&(l+=l5),i!=null&&(l+=i.cachedTotalSize),this.cachedTotalSize=l}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),u5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var zx;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(zx||(zx={}));(function(n){u5(e,n);function e(t,r,i,a,l){var c=n.call(this,t,r,i)||this;return c.shape=a,c.macroId=l,c}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(c5);var d5=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),Vx=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),f5=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),h5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$p=(function(n){h5(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+vt.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(f5),p5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),g5=(function(n){p5(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})($p);function m5(n,e,t){return new g5(n,e,t)}function El(n,e,t){return new $p(n,e,t)}var y5=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],_a=0,ud=1,Gr=2,Pw=3,pi=4,v5=new $p(null,0,0),u0=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],x5=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function b5(n){var e,t;try{for(var r=x5(n),i=r.next();!i.done;i=r.next()){var a=i.value;Ln.fill(a,-1)}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[_a][pi]=0,n[ud][pi]=0,n[ud][_a]=28,n[Pw][pi]=0,n[Gr][pi]=0,n[Gr][_a]=15,n}var Bw=b5(Ln.createInt32Array(6,6)),w5=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_5=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=u0[this.mode][e];i=El(i,a&65535,a>>16),r+=a>>16}var l=e===Gr?4:5;return i=El(i,t,l),new n(i,e,0,r+l)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===Gr?4:5;return r=El(r,Bw[this.mode][e],i),r=El(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===pi||this.mode===Gr){var a=u0[r][_a];t=El(t,a&65535,a>>16),i+=a>>16,r=_a}var l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new n(t,r,this.binaryShiftByteCount+1,i+l);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=m5(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(u0[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var l=new qn;try{for(var c=w5(i),d=c.next();!d.done;d=c.next()){var f=d.value;f.appendTo(l,e)}}catch(g){t={error:g}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return l},n.prototype.toString=function(){return At.format("%s bits=%d bytes=%d",y5[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(v5,_a,0,0),n})();function S5(n){var e=At.getCharCode(" "),t=At.getCharCode("."),r=At.getCharCode(",");n[_a][e]=1;for(var i=At.getCharCode("Z"),a=At.getCharCode("A"),l=a;l<=i;l++)n[_a][l]=l-a+2;n[ud][e]=1;for(var c=At.getCharCode("z"),d=At.getCharCode("a"),l=d;l<=c;l++)n[ud][l]=l-d+2;n[Gr][e]=1;for(var f=At.getCharCode("9"),g=At.getCharCode("0"),l=g;l<=f;l++)n[Gr][l]=l-g+2;n[Gr][r]=12,n[Gr][t]=13;for(var m=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],y=0;y<m.length;y++)n[Pw][At.getCharCode(m[y])]=y;for(var x=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],y=0;y<x.length;y++)At.getCharCode(x[y])>0&&(n[pi][At.getCharCode(x[y])]=y);return n}var d0=S5(Ln.createInt32Array(5,256)),Mu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C5=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=At.getCharCode(" "),t=At.getCharCode(`
`),r=Vx.singletonList(_5.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,l=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case At.getCharCode("\r"):a=l===t?2:0;break;case At.getCharCode("."):a=l===e?3:0;break;case At.getCharCode(","):a=l===e?4:0;break;case At.getCharCode(":"):a=l===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var c=Vx.min(r,function(d,f){return d.getBitCount()-f.getBitCount()});return c.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var l=Mu(e),c=l.next();!c.done;c=l.next()){var d=c.value;this.updateStateForChar(d,t,a)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=d0[e.getMode()][i]>0,l=null,c=0;c<=pi;c++){var d=d0[c][i];if(d>0){if(l==null&&(l=e.endBinaryShift(t)),!a||c===e.getMode()||c===Gr){var f=l.latchAndAppend(c,d);r.push(f)}if(!a&&Bw[e.getMode()][c]>=0){var g=l.shiftAndAppend(c,d);r.push(g)}}}if(e.getBinaryShiftByteCount()>0||d0[e.getMode()][i]===0){var m=e.addBinaryShiftChar(t);r.push(m)}},n.updateStateListForPair=function(e,t,r){var i,a,l=[];try{for(var c=Mu(e),d=c.next();!d.done;d=c.next()){var f=d.value;this.updateStateForPair(f,t,r,l)}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return this.simplifyStates(l)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(pi,r)),e.getMode()!==pi&&i.push(a.shiftAndAppend(pi,r)),r===3||r===4){var l=a.latchAndAppend(Gr,16-r).latchAndAppend(Gr,1);i.push(l)}if(e.getBinaryShiftByteCount()>0){var c=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(c)}},n.simplifyStates=function(e){var t,r,i,a,l=[];try{for(var c=Mu(e),d=c.next();!d.done;d=c.next()){var f=d.value,g=!0,m=function(A){if(A.isBetterThanOrEqualTo(f))return g=!1,"break";f.isBetterThanOrEqualTo(A)&&(l=l.filter(function(E){return E!==A}))};try{for(var y=(i=void 0,Mu(l)),x=y.next();!x.done;x=y.next()){var w=x.value,_=m(w);if(_==="break")break}}catch(A){i={error:A}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}g&&l.push(f)}}catch(A){t={error:A}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return l},n})(),E5=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new C5(e).encode(),a=vt.truncDivision(i.getSize()*t,100)+11,l=i.getSize()+a,c,d,f,g,m;if(r!==n.DEFAULT_AZTEC_LAYERS){if(c=r<0,d=Math.abs(r),d>(c?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Je(At.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(d,c),g=n.WORD_SIZE[d];var y=f-f%g;if(m=n.stuffBits(i,g),m.getSize()+a>y)throw new Je("Data to large for user specified layer");if(c&&m.getSize()>g*64)throw new Je("Data to large for user specified layer")}else{g=0,m=null;for(var x=0;;x++){if(x>n.MAX_NB_BITS)throw new Je("Data too large for an Aztec code");if(c=x<=3,d=c?x+1:x,f=n.totalBitsInLayer(d,c),!(l>f)){(m==null||g!==n.WORD_SIZE[d])&&(g=n.WORD_SIZE[d],m=n.stuffBits(i,g));var y=f-f%g;if(!(c&&m.getSize()>g*64)&&m.getSize()+a<=y)break}}}var w=n.generateCheckWords(m,f,g),_=m.getSize()/g,A=n.generateModeMessage(c,d,_),E=(c?11:14)+d*4,S=new Int32Array(E),T;if(c){T=E;for(var x=0;x<S.length;x++)S[x]=x}else{T=E+1+2*vt.truncDivision(vt.truncDivision(E,2)-1,15);for(var R=vt.truncDivision(E,2),N=vt.truncDivision(T,2),x=0;x<R;x++){var k=x+vt.truncDivision(x,15);S[R-x-1]=N-k-1,S[R+x]=N+k+1}}for(var M=new vi(T),x=0,V=0;x<d;x++){for(var ie=(d-x)*4+(c?9:12),fe=0;fe<ie;fe++)for(var xe=fe*2,q=0;q<2;q++)w.get(V+xe+q)&&M.set(S[x*2+q],S[x*2+fe]),w.get(V+ie*2+xe+q)&&M.set(S[x*2+fe],S[E-1-x*2-q]),w.get(V+ie*4+xe+q)&&M.set(S[E-1-x*2-q],S[E-1-x*2-fe]),w.get(V+ie*6+xe+q)&&M.set(S[E-1-x*2-fe],S[x*2+q]);V+=ie*8}if(n.drawModeMessage(M,c,T,A),c)n.drawBullsEye(M,vt.truncDivision(T,2),5);else{n.drawBullsEye(M,vt.truncDivision(T,2),7);for(var x=0,fe=0;x<vt.truncDivision(E,2)-1;x+=15,fe+=16)for(var q=vt.truncDivision(T,2)&1;q<T;q+=2)M.set(vt.truncDivision(T,2)-fe,q),M.set(vt.truncDivision(T,2)+fe,q),M.set(q,vt.truncDivision(T,2)-fe),M.set(q,vt.truncDivision(T,2)+fe)}var we=new d5;return we.setCompact(c),we.setSize(T),we.setLayers(d),we.setCodeWords(_),we.setMatrix(M),we},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new qn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=vt.truncDivision(r,2);if(t)for(var l=0;l<7;l++){var c=a-3+l;i.get(l)&&e.set(c,a-5),i.get(l+7)&&e.set(a+5,c),i.get(20-l)&&e.set(c,a+5),i.get(27-l)&&e.set(a-5,c)}else for(var l=0;l<10;l++){var c=a-5+l+vt.truncDivision(l,5);i.get(l)&&e.set(c,a-7),i.get(l+10)&&e.set(a+7,c),i.get(29-l)&&e.set(c,a+7),i.get(39-l)&&e.set(a-7,c)}},n.generateCheckWords=function(e,t,r){var i,a,l=e.getSize()/r,c=new jw(n.getGF(r)),d=vt.truncDivision(t,r),f=n.bitsToWords(e,r,d);c.encode(f,d-l);var g=t%r,m=new qn;m.appendBits(0,g);try{for(var y=E5(Array.from(f)),x=y.next();!x.done;x=y.next()){var w=x.value;m.appendBits(w,r)}}catch(_){i={error:_}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}return m},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,l;for(a=0,l=e.getSize()/t;a<l;a++){for(var c=0,d=0;d<t;d++)c|=e.get(a*t+d)?1<<t-d-1:0;i[a]=c}return i},n.getGF=function(e){switch(e){case 4:return xr.AZTEC_PARAM;case 6:return xr.AZTEC_DATA_6;case 8:return xr.AZTEC_DATA_8;case 10:return xr.AZTEC_DATA_10;case 12:return xr.AZTEC_DATA_12;default:throw new Je("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new qn,i=e.getSize(),a=(1<<t)-2,l=0;l<i;l+=t){for(var c=0,d=0;d<t;d++)(l+d>=i||e.get(l+d))&&(c|=1<<t-1-d);(c&a)===a?(r.appendBits(c&a,t),l--):(c&a)===0?(r.appendBits(c|1,t),l--):r.appendBits(c,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var A5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),T5=(function(n){A5(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),l=0,c=0,d=t.length;l<d;l+=4,c++){var f=void 0,g=t[l+3];if(g===0)f=255;else{var m=t[l],y=t[l+1],x=t[l+2];f=306*m+601*y+117*x+512>>10}a[c]=f}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Je("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Sd(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*l),d=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*l);r.width=c,r.height=d;var f=r.getContext("2d");if(!f)throw new Error("Could not create a Canvas Context element.");return f.translate(c/2,d/2),f.rotate(i),f.drawImage(this.canvas,a/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(tc);function Lw(){return typeof navigator<"u"}function O5(){return Lw()&&!!navigator.mediaDevices}function R5(){return!!(O5()&&navigator.mediaDevices.enumerateDevices)}var cs=function(){return cs=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},cs.apply(this,arguments)},dn=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{f(r.next(g))}catch(m){l(m)}}function d(g){try{f(r.throw(g))}catch(m){l(m)}}function f(g){g.done?a(g.value):i(g.value).then(c,d)}f((r=r.apply(n,e||[])).next())})},fn=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(g){return d([f,g])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(g){f=[6,g],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},f0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I5={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Ts=(function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=cs(cs({},I5),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(Zt.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return dn(this,void 0,void 0,function(){return fn(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=f0(i),l=a.next();!l.done;l=a.next()){var c=l.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0}}catch(d){t={error:d}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Sn("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Sn("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new T5(e),r=new _w(t);return new ww(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new Sn("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return dn(this,void 0,void 0,function(){var t;return fn(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return dn(this,void 0,void 0,function(){var e,t,r,i,a,l,c,d,f,g,m,y;return fn(this,function(x){switch(x.label){case 0:if(!Lw())throw new Error("Can't enumerate devices, navigator is not present.");if(!R5())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=x.sent(),t=[];try{for(r=f0(e),i=r.next();!i.done;i=r.next())a=i.value,l=a.kind==="video"?"videoinput":a.kind,l==="videoinput"&&(c=a.deviceId||a.id,d=a.label||"Video device ".concat(t.length+1),f=a.groupId,g={deviceId:c,label:d,kind:l,groupId:f},t.push(g))}catch(w){m={error:w}}finally{try{i&&!i.done&&(y=r.return)&&y.call(r)}finally{if(m)throw m.error}}return[2,t]}})})},n.findDeviceById=function(e){return dn(this,void 0,void 0,function(){var t;return fn(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return dn(this,void 0,void 0,function(){var r;return fn(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,l){var c=setTimeout(function(){n.isVideoPlaying(e)||(l(!1),e.removeEventListener("canplay",d))},t),d=function(){n.tryPlayVideo(e).then(function(f){clearTimeout(c),e.removeEventListener("canplay",d),a(f)})};e.addEventListener("canplay",d)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),dn(this,void 0,void 0,function(){var i;return fn(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",l),r())},i),l=function(){clearTimeout(a),e.removeEventListener("load",l),t()};e.addEventListener("load",l)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new Sn("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return dn(this,void 0,void 0,function(){var t;return fn(this,function(r){switch(r.label){case 0:if(!e)throw new Sn("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return dn(this,void 0,void 0,function(){var t;return fn(this,function(r){switch(r.label){case 0:if(!e)throw new Sn("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return dn(this,void 0,void 0,function(){var i,a;return fn(this,function(l){switch(l.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=l.sent(),l.label=2;case 2:return l.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,l.sent()];case 4:throw a=l.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return dn(this,void 0,void 0,function(){var i,a,l,c,d,f,g,m,y,x=this;return fn(this,function(w){switch(w.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=w.sent(),l=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},c=this.scan(a,r,l),d=e.getVideoTracks(),f=cs(cs({},c),{stop:function(){c.stop()},streamVideoConstraintsApply:function(_,A){return dn(this,void 0,void 0,function(){var E,S,T,R,N,k,M;return fn(this,function(V){switch(V.label){case 0:E=A?d.filter(A):d,V.label=1;case 1:V.trys.push([1,6,7,8]),S=f0(E),T=S.next(),V.label=2;case 2:return T.done?[3,5]:(R=T.value,[4,R.applyConstraints(_)]);case 3:V.sent(),V.label=4;case 4:return T=S.next(),[3,2];case 5:return[3,8];case 6:return N=V.sent(),k={error:N},[3,8];case 7:try{T&&!T.done&&(M=S.return)&&M.call(S)}finally{if(k)throw k.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(_){return d.find(_).getConstraints()},streamVideoSettingsGet:function(_){return d.find(_).getSettings()},streamVideoCapabilitiesGet:function(_){return d.find(_).getCapabilities()}}),g=n.mediaStreamIsTorchCompatible(e),g&&(m=d?.find(function(_){return n.mediaStreamIsTorchCompatibleTrack(_)}),y=function(_){return dn(x,void 0,void 0,function(){return fn(this,function(A){switch(A.label){case 0:return[4,n.mediaStreamSetTorch(m,_)];case 1:return A.sent(),[2]}})})},f.switchTorch=y,f.stop=function(){return dn(x,void 0,void 0,function(){return fn(this,function(_){switch(_.label){case 0:return c.stop(),[4,y(!1)];case 1:return _.sent(),[2]}})})}),[2,f]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return dn(this,void 0,void 0,function(){var i,a;return fn(this,function(l){switch(l.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,l.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return dn(this,void 0,void 0,function(){var r,i;return fn(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new Sn("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return dn(this,void 0,void 0,function(){var r,i,a,l;return fn(this,function(c){switch(c.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new Sn("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return c.sent(),l=this.scan(r,t,i),[2,l]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return dn(this,void 0,void 0,function(){var r;return fn(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return dn(this,void 0,void 0,function(){var r,i,a;return fn(this,function(l){switch(l.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=l.sent(),l.label=2;case 2:return l.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=l.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return dn(this,void 0,void 0,function(){var r,i;return fn(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return dn(this,void 0,void 0,function(){var t,r;return fn(this,function(i){switch(i.label){case 0:if(!e)throw new Sn("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return dn(this,void 0,void 0,function(){var t,r;return fn(this,function(i){switch(i.label){case 0:if(!e)throw new Sn("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(l,c){a.scan(e,function(d,f,g){if(d){l(d),g.stop();return}if(f){if(f instanceof le&&t||f instanceof In&&r||f instanceof Ae&&i)return;g.stop(),c(f)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),l;try{l=a.getContext("2d",{willReadFrequently:!0})}catch{l=a.getContext("2d")}if(!l)throw new Error("Couldn't create canvas for visual element scan.");var c=function(){l=void 0,a=void 0},d=!1,f,g=function(){d=!0,clearTimeout(f),c(),r&&r()},m={stop:g},y=function(){if(!d)try{n.drawImageOnCanvas(l,e);var x=i.decodeFromCanvas(a);t(x,void 0,m),f=setTimeout(y,i.options.delayBetweenScanSuccess)}catch(E){t(void 0,E,m);var w=E instanceof In,_=E instanceof Ae,A=E instanceof le;if(w||_||A){f=setTimeout(y,i.options.delayBetweenScanAttempts);return}c(),r&&r(E)}};return y(),m},n.prototype._decodeOnLoadImage=function(e){return dn(this,void 0,void 0,function(){var t;return fn(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return dn(this,void 0,void 0,function(){var t;return fn(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n})(),N5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){N5(e,n);function e(t,r){return n.call(this,new ad,t,r)||this}return e})(Ts);var k5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){k5(e,n);function e(t,r){return n.call(this,new ss(t),t,r)||this}return e})(Ts);var D5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){D5(e,n);function e(t,r){return n.call(this,new sd,t,r)||this}return e})(Ts);var j5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){j5(e,n);function e(t,r){var i=this,a=new Dw;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Zt.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(Ts);var M5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){M5(e,n);function e(t,r){return n.call(this,new cd,t,r)||this}return e})(Ts);var P5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){P5(e,n);function e(t,r){return n.call(this,new ld,t,r)||this}return e})(Ts);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L5=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Hx=n=>{const e=L5(n);return e.charAt(0).toUpperCase()+e.slice(1)},Fw=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),F5=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var U5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=O.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...c},d)=>O.createElement("svg",{ref:d,...U5,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Fw("lucide",i),...!a&&!F5(c)&&{"aria-hidden":"true"},...c},[...l.map(([f,g])=>O.createElement(f,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(n,e)=>{const t=O.forwardRef(({className:r,...i},a)=>O.createElement(z5,{ref:a,iconNode:e,className:Fw(`lucide-${B5(Hx(n))}`,`lucide-${n}`,r),...i}));return t.displayName=Hx(n),t};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],H5=mt("bell",V5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],q5=mt("brain",$5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],W5=mt("chevron-left",G5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Y5=mt("chevron-right",X5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$n=mt("circle-alert",K5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],lo=mt("circle-check-big",Z5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],J5=mt("circle-plus",Q5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v.832",key:"1ujtp2"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h2",key:"qvpao1"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],$x=mt("clipboard-clock",eR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Uw=mt("clipboard-list",tR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zw=mt("clock-4",nR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M12 6v6l1.56.78",key:"14ed3g"}],["path",{d:"M13.227 21.925a10 10 0 1 1 8.767-9.588",key:"jwkls1"}],["path",{d:"m14 18 4-4 4 4",key:"ftkppy"}],["path",{d:"M18 22v-8",key:"su0gjh"}]],Vw=mt("clock-arrow-up",rR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],aR=mt("clock",iR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],sR=mt("eye-off",oR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cR=mt("eye",lR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],dR=mt("graduation-cap",uR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]],hR=mt("hand-coins",fR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],gR=mt("house",pR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],qp=mt("image",mR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Hw=mt("list",yR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],gi=mt("loader",vR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],bR=mt("lock",xR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_R=mt("log-out",wR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M5 12h14",key:"1ays0h"}]],CR=mt("minus",SR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],$w=mt("moon",ER);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],qw=mt("package",AR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],OR=mt("plus",TR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],IR=mt("refresh-cw",RR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Pu=mt("rotate-ccw",NR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],qx=mt("save",kR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],jR=mt("scan-line",DR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gx=mt("settings",MR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],as=mt("shopping-cart",PR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Gw=mt("sun",BR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ww=mt("trash-2",LR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],UR=mt("upload",FR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],VR=mt("user-check",zR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Wx=mt("user",HR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],Xw=mt("utensils-crossed",$R);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],GR=mt("utensils",qR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rn=mt("x",WR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],YR=mt("zap",XR),Yw=O.createContext(),Kw=()=>{const n=O.useContext(Yw);if(!n)throw new Error("useCanteenStatus must be used within a CanteenStatusProvider");return n},KR=({children:n})=>{const[e,t]=O.useState("closed"),[r,i]=O.useState(!0),[a,l]=O.useState(!1),[c,d]=O.useState(null);O.useEffect(()=>{f()},[]);const f=async(A=!1)=>{if(!A&&c&&Date.now()-c<2e3){console.log(" Skipping fetch - recent update detected");return}console.log(" Fetching canteen status from database...");try{const{data:E,error:S}=await Ee.from("canteen_status").select("is_open, updated_at").eq("id",1).single();if(S)throw console.error(" Error fetching canteen status:",S),S;const T=E?.is_open?"open":"closed";console.log(" Fetched status from database:",T),console.log(" Raw data:",E),console.log(" is_open value:",E?.is_open,"type:",typeof E?.is_open),t(T)}catch(E){console.error(" Error fetching canteen status:",E),t("closed")}finally{i(!1)}},g=async A=>{console.log(" updateStatus called! New status:",A),l(!0);const E=e;console.log(" Setting optimistic status to:",A),t(A),d(Date.now());try{console.log(` Updating database: is_open = ${A==="open"}`),console.log(" Checking current database state...");const{data:S,error:T}=await Ee.from("canteen_status").select("*").eq("id",1).single();if(T)throw console.error(" Error fetching current data:",T),new Error(`Cannot fetch current data: ${T.message}`);console.log(" Current database data:",S),console.log(` Attempting to update is_open to: ${A==="open"}`);const{data:R,error:N}=await Ee.from("canteen_status").update({is_open:A==="open",updated_at:new Date().toISOString()}).eq("id",1).select();if(N)throw console.error(" Database update error:",N),console.error(" Full error details:",JSON.stringify(N,null,2)),N;console.log(" Database update response:",R),console.log(" Database update response length:",R?.length),R&&R.length>0?(console.log(" Updated row data:",R[0]),console.log(" Updated is_open value:",R[0].is_open)):console.warn(" Update response is empty - this might indicate the update failed"),console.log(` Database updated successfully! is_open = ${A==="open"}`);const{data:k,error:M}=await Ee.from("canteen_status").select("is_open").eq("id",1).single();M?console.warn("Could not verify database update:",M):console.log(` Database verification: is_open = ${k.is_open}`),console.log(" Update completed successfully - UI should reflect the change")}catch(S){throw console.error(" Error updating canteen status:",S),console.log(" Reverting to previous status:",E),t(E),S}finally{l(!1)}},_={status:e,loading:r,updating:a,isOpen:e==="open",isClosed:e==="closed",updateStatus:g,toggleStatus:async()=>{const A=e==="open"?"closed":"open";console.log(" toggleStatus called! Current:",e,"New:",A),await g(A)},fetchCanteenStatus:f,refreshStatus:async()=>{console.log(" Manual refresh requested"),i(!0),await f(!0)}};return p.jsx(Yw.Provider,{value:_,children:n})},Gp=O.createContext({});function Wp(n){const e=O.useRef(null);return e.current===null&&(e.current=n()),e.current}const Xp=typeof window<"u",Zw=Xp?O.useLayoutEffect:O.useEffect,Ad=O.createContext(null);function Yp(n,e){n.indexOf(e)===-1&&n.push(e)}function Kp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const zi=(n,e,t)=>t>e?e:t<n?n:t;let Zp=()=>{};const Vi={},Qw=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function Jw(n){return typeof n=="object"&&n!==null}const e_=n=>/^0[^.\s]+$/u.test(n);function Qp(n){let e;return()=>(e===void 0&&(e=n()),e)}const Yr=n=>n,ZR=(n,e)=>t=>e(n(t)),rc=(...n)=>n.reduce(ZR),ql=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class Jp{constructor(){this.subscriptions=[]}add(e){return Yp(this.subscriptions,e),()=>Kp(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mi=n=>n*1e3,Wr=n=>n/1e3;function t_(n,e){return e?n*(1e3/e):0}const n_=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,QR=1e-7,JR=12;function eI(n,e,t,r,i){let a,l,c=0;do l=e+(t-e)/2,a=n_(l,r,i)-n,a>0?t=l:e=l;while(Math.abs(a)>QR&&++c<JR);return l}function ic(n,e,t,r){if(n===e&&t===r)return Yr;const i=a=>eI(a,0,1,n,t);return a=>a===0||a===1?a:n_(i(a),e,r)}const r_=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,i_=n=>e=>1-n(1-e),a_=ic(.33,1.53,.69,.99),e1=i_(a_),o_=r_(e1),s_=n=>(n*=2)<1?.5*e1(n):.5*(2-Math.pow(2,-10*(n-1))),t1=n=>1-Math.sin(Math.acos(n)),l_=i_(t1),c_=r_(t1),tI=ic(.42,0,1,1),nI=ic(0,0,.58,1),u_=ic(.42,0,.58,1),rI=n=>Array.isArray(n)&&typeof n[0]!="number",d_=n=>Array.isArray(n)&&typeof n[0]=="number",iI={linear:Yr,easeIn:tI,easeInOut:u_,easeOut:nI,circIn:t1,circInOut:c_,circOut:l_,backIn:e1,backInOut:o_,backOut:a_,anticipate:s_},aI=n=>typeof n=="string",Xx=n=>{if(d_(n)){Zp(n.length===4);const[e,t,r,i]=n;return ic(e,t,r,i)}else if(aI(n))return iI[n];return n},Bu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function oI(n,e){let t=new Set,r=new Set,i=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(f.schedule(g),n()),g(c)}const f={schedule:(g,m=!1,y=!1)=>{const w=y&&i?t:r;return m&&l.add(g),w.has(g)||w.add(g),g},cancel:g=>{r.delete(g),l.delete(g)},process:g=>{if(c=g,i){a=!0;return}i=!0,[t,r]=[r,t],t.forEach(d),t.clear(),i=!1,a&&(a=!1,f.process(g))}};return f}const sI=40;function f_(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=Bu.reduce((T,R)=>(T[R]=oI(a),T),{}),{setup:c,read:d,resolveKeyframes:f,preUpdate:g,update:m,preRender:y,render:x,postRender:w}=l,_=()=>{const T=Vi.useManualTiming?i.timestamp:performance.now();t=!1,Vi.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,sI),1)),i.timestamp=T,i.isProcessing=!0,c.process(i),d.process(i),f.process(i),g.process(i),m.process(i),y.process(i),x.process(i),w.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(_))},A=()=>{t=!0,r=!0,i.isProcessing||n(_)};return{schedule:Bu.reduce((T,R)=>{const N=l[R];return T[R]=(k,M=!1,V=!1)=>(t||A(),N.schedule(k,M,V)),T},{}),cancel:T=>{for(let R=0;R<Bu.length;R++)l[Bu[R]].cancel(T)},state:i,steps:l}}const{schedule:sn,cancel:Sa,state:Jn,steps:h0}=f_(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yr,!0);let Xu;function lI(){Xu=void 0}const br={now:()=>(Xu===void 0&&br.set(Jn.isProcessing||Vi.useManualTiming?Jn.timestamp:performance.now()),Xu),set:n=>{Xu=n,queueMicrotask(lI)}},h_=n=>e=>typeof e=="string"&&e.startsWith(n),n1=h_("--"),cI=h_("var(--"),r1=n=>cI(n)?uI.test(n.split("/*")[0].trim()):!1,uI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Os={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Gl={...Os,transform:n=>zi(0,1,n)},Lu={...Os,default:1},Pl=n=>Math.round(n*1e5)/1e5,i1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dI(n){return n==null}const fI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,a1=(n,e)=>t=>!!(typeof t=="string"&&fI.test(t)&&t.startsWith(n)||e&&!dI(t)&&Object.prototype.hasOwnProperty.call(t,e)),p_=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,a,l,c]=r.match(i1);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},hI=n=>zi(0,255,n),p0={...Os,transform:n=>Math.round(hI(n))},ro={test:a1("rgb","red"),parse:p_("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+p0.transform(n)+", "+p0.transform(e)+", "+p0.transform(t)+", "+Pl(Gl.transform(r))+")"};function pI(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ep={test:a1("#"),parse:pI,transform:ro.transform},ac=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),va=ac("deg"),yi=ac("%"),st=ac("px"),gI=ac("vh"),mI=ac("vw"),Yx={...yi,parse:n=>yi.parse(n)/100,transform:n=>yi.transform(n*100)},us={test:a1("hsl","hue"),parse:p_("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+yi.transform(Pl(e))+", "+yi.transform(Pl(t))+", "+Pl(Gl.transform(r))+")"},Rn={test:n=>ro.test(n)||ep.test(n)||us.test(n),parse:n=>ro.test(n)?ro.parse(n):us.test(n)?us.parse(n):ep.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ro.transform(n):us.transform(n),getAnimatableNone:n=>{const e=Rn.parse(n);return e.alpha=0,Rn.transform(e)}},yI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vI(n){return isNaN(n)&&typeof n=="string"&&(n.match(i1)?.length||0)+(n.match(yI)?.length||0)>0}const g_="number",m_="color",xI="var",bI="var(",Kx="${}",wI=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wl(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(wI,d=>(Rn.test(d)?(r.color.push(a),i.push(m_),t.push(Rn.parse(d))):d.startsWith(bI)?(r.var.push(a),i.push(xI),t.push(d)):(r.number.push(a),i.push(g_),t.push(parseFloat(d))),++a,Kx)).split(Kx);return{values:t,split:c,indexes:r,types:i}}function y_(n){return Wl(n).values}function v_(n){const{split:e,types:t}=Wl(n),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const c=t[l];c===g_?a+=Pl(i[l]):c===m_?a+=Rn.transform(i[l]):a+=i[l]}return a}}const _I=n=>typeof n=="number"?0:Rn.test(n)?Rn.getAnimatableNone(n):n;function SI(n){const e=y_(n);return v_(n)(e.map(_I))}const Ca={test:vI,parse:y_,createTransformer:v_,getAnimatableNone:SI};function g0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function CI({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,a=0,l=0;if(!e)i=a=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;i=g0(d,c,n+1/3),a=g0(d,c,n),l=g0(d,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function dd(n,e){return t=>t>0?e:n}const pn=(n,e,t)=>n+(e-n)*t,m0=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},EI=[ep,ro,us],AI=n=>EI.find(e=>e.test(n));function Zx(n){const e=AI(n);if(!e)return!1;let t=e.parse(n);return e===us&&(t=CI(t)),t}const Qx=(n,e)=>{const t=Zx(n),r=Zx(e);if(!t||!r)return dd(n,e);const i={...t};return a=>(i.red=m0(t.red,r.red,a),i.green=m0(t.green,r.green,a),i.blue=m0(t.blue,r.blue,a),i.alpha=pn(t.alpha,r.alpha,a),ro.transform(i))},tp=new Set(["none","hidden"]);function TI(n,e){return tp.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function OI(n,e){return t=>pn(n,e,t)}function o1(n){return typeof n=="number"?OI:typeof n=="string"?r1(n)?dd:Rn.test(n)?Qx:NI:Array.isArray(n)?x_:typeof n=="object"?Rn.test(n)?Qx:RI:dd}function x_(n,e){const t=[...n],r=t.length,i=n.map((a,l)=>o1(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)t[l]=i[l](a);return t}}function RI(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=o1(n[i])(n[i],e[i]));return i=>{for(const a in r)t[a]=r[a](i);return t}}function II(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],l=n.indexes[a][r[a]],c=n.values[l]??0;t[i]=c,r[a]++}return t}const NI=(n,e)=>{const t=Ca.createTransformer(e),r=Wl(n),i=Wl(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?tp.has(n)&&!i.values.length||tp.has(e)&&!r.values.length?TI(n,e):rc(x_(II(r,i),i.values),t):dd(n,e)};function b_(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?pn(n,e,t):o1(n)(n,e)}const kI=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>sn.update(e,t),stop:()=>Sa(e),now:()=>Jn.isProcessing?Jn.timestamp:br.now()}},w_=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)r+=Math.round(n(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},fd=2e4;function s1(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<fd;)e+=t,r=n.next(e);return e>=fd?1/0:e}function DI(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(s1(r),fd);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Wr(i)}}const jI=5;function __(n,e,t){const r=Math.max(e-jI,0);return t_(t-n(r),e-r)}const vn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},y0=.001;function MI({duration:n=vn.duration,bounce:e=vn.bounce,velocity:t=vn.velocity,mass:r=vn.mass}){let i,a,l=1-e;l=zi(vn.minDamping,vn.maxDamping,l),n=zi(vn.minDuration,vn.maxDuration,Wr(n)),l<1?(i=f=>{const g=f*l,m=g*n,y=g-t,x=np(f,l),w=Math.exp(-m);return y0-y/x*w},a=f=>{const m=f*l*n,y=m*t+t,x=Math.pow(l,2)*Math.pow(f,2)*n,w=Math.exp(-m),_=np(Math.pow(f,2),l);return(-i(f)+y0>0?-1:1)*((y-x)*w)/_}):(i=f=>{const g=Math.exp(-f*n),m=(f-t)*n+1;return-y0+g*m},a=f=>{const g=Math.exp(-f*n),m=(t-f)*(n*n);return g*m});const c=5/n,d=BI(i,a,c);if(n=mi(n),isNaN(d))return{stiffness:vn.stiffness,damping:vn.damping,duration:n};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:n}}}const PI=12;function BI(n,e,t){let r=t;for(let i=1;i<PI;i++)r=r-n(r)/e(r);return r}function np(n,e){return n*Math.sqrt(1-e*e)}const LI=["duration","bounce"],FI=["stiffness","damping","mass"];function Jx(n,e){return e.some(t=>n[t]!==void 0)}function UI(n){let e={velocity:vn.velocity,stiffness:vn.stiffness,damping:vn.damping,mass:vn.mass,isResolvedFromDuration:!1,...n};if(!Jx(n,FI)&&Jx(n,LI))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,a=2*zi(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:vn.mass,stiffness:i,damping:a}}else{const t=MI(n);e={...e,...t,mass:vn.mass},e.isResolvedFromDuration=!0}return e}function hd(n=vn.visualDuration,e=vn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:a},{stiffness:d,damping:f,mass:g,duration:m,velocity:y,isResolvedFromDuration:x}=UI({...t,velocity:-Wr(t.velocity||0)}),w=y||0,_=f/(2*Math.sqrt(d*g)),A=l-a,E=Wr(Math.sqrt(d/g)),S=Math.abs(A)<5;r||(r=S?vn.restSpeed.granular:vn.restSpeed.default),i||(i=S?vn.restDelta.granular:vn.restDelta.default);let T;if(_<1){const N=np(E,_);T=k=>{const M=Math.exp(-_*E*k);return l-M*((w+_*E*A)/N*Math.sin(N*k)+A*Math.cos(N*k))}}else if(_===1)T=N=>l-Math.exp(-E*N)*(A+(w+E*A)*N);else{const N=E*Math.sqrt(_*_-1);T=k=>{const M=Math.exp(-_*E*k),V=Math.min(N*k,300);return l-M*((w+_*E*A)*Math.sinh(V)+N*A*Math.cosh(V))/N}}const R={calculatedDuration:x&&m||null,next:N=>{const k=T(N);if(x)c.done=N>=m;else{let M=N===0?w:0;_<1&&(M=N===0?mi(w):__(T,N,k));const V=Math.abs(M)<=r,ie=Math.abs(l-k)<=i;c.done=V&&ie}return c.value=c.done?l:k,c},toString:()=>{const N=Math.min(s1(R),fd),k=w_(M=>R.next(N*M).value,N,30);return N+"ms "+k},toTransition:()=>{}};return R}hd.applyToOptions=n=>{const e=DI(n,100,hd);return n.ease=e.ease,n.duration=mi(e.duration),n.type="keyframes",n};function rp({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:d,restDelta:f=.5,restSpeed:g}){const m=n[0],y={done:!1,value:m},x=V=>c!==void 0&&V<c||d!==void 0&&V>d,w=V=>c===void 0?d:d===void 0||Math.abs(c-V)<Math.abs(d-V)?c:d;let _=t*e;const A=m+_,E=l===void 0?A:l(A);E!==A&&(_=E-m);const S=V=>-_*Math.exp(-V/r),T=V=>E+S(V),R=V=>{const ie=S(V),fe=T(V);y.done=Math.abs(ie)<=f,y.value=y.done?E:fe};let N,k;const M=V=>{x(y.value)&&(N=V,k=hd({keyframes:[y.value,w(y.value)],velocity:__(T,V,y.value),damping:i,stiffness:a,restDelta:f,restSpeed:g}))};return M(0),{calculatedDuration:null,next:V=>{let ie=!1;return!k&&N===void 0&&(ie=!0,R(V),M(V)),N!==void 0&&V>=N?k.next(V-N):(!ie&&R(V),y)}}}function zI(n,e,t){const r=[],i=t||Vi.mix||b_,a=n.length-1;for(let l=0;l<a;l++){let c=i(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Yr:e;c=rc(d,c)}r.push(c)}return r}function VI(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const a=n.length;if(Zp(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=zI(e,r,i),d=c.length,f=g=>{if(l&&g<n[0])return e[0];let m=0;if(d>1)for(;m<n.length-2&&!(g<n[m+1]);m++);const y=ql(n[m],n[m+1],g);return c[m](y)};return t?g=>f(zi(n[0],n[a-1],g)):f}function HI(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=ql(0,e,r);n.push(pn(t,1,i))}}function $I(n){const e=[0];return HI(e,n.length-1),e}function qI(n,e){return n.map(t=>t*e)}function GI(n,e){return n.map(()=>e||u_).splice(0,n.length-1)}function Bl({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=rI(r)?r.map(Xx):Xx(r),a={done:!1,value:e[0]},l=qI(t&&t.length===e.length?t:$I(e),n),c=VI(l,e,{ease:Array.isArray(i)?i:GI(e,i)});return{calculatedDuration:n,next:d=>(a.value=c(d),a.done=d>=n,a)}}const WI=n=>n!==null;function l1(n,{repeat:e,repeatType:t="loop"},r,i=1){const a=n.filter(WI),c=i<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const XI={decay:rp,inertia:rp,tween:Bl,keyframes:Bl,spring:hd};function S_(n){typeof n.type=="string"&&(n.type=XI[n.type])}class c1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const YI=n=>n/100;class u1 extends c1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==br.now()&&this.tick(br.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;S_(e);const{type:t=Bl,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=e;let{keyframes:c}=e;const d=t||Bl;d!==Bl&&typeof c[0]!="number"&&(this.mixKeyframes=rc(YI,b_(c[0],c[1])),c=[0,100]);const f=d({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=s1(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:g,repeat:m,repeatType:y,repeatDelay:x,type:w,onUpdate:_,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const E=this.currentTime-f*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let T=this.currentTime,R=r;if(m){const V=Math.min(this.currentTime,i)/c;let ie=Math.floor(V),fe=V%1;!fe&&V>=1&&(fe=1),fe===1&&ie--,ie=Math.min(ie,m+1),!!(ie%2)&&(y==="reverse"?(fe=1-fe,x&&(fe-=x/c)):y==="mirror"&&(R=l)),T=zi(0,1,fe)*c}const N=S?{done:!1,value:g[0]}:R.next(T);a&&(N.value=a(N.value));let{done:k}=N;!S&&d!==null&&(k=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return M&&w!==rp&&(N.value=l1(g,this.options,A,this.speed)),_&&_(N.value),M&&this.finish(),N}then(e,t){return this.finished.then(e,t)}get duration(){return Wr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Wr(e)}get time(){return Wr(this.currentTime)}set time(e){e=mi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(br.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Wr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=kI,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(br.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function KI(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const io=n=>n*180/Math.PI,ip=n=>{const e=io(Math.atan2(n[1],n[0]));return ap(e)},ZI={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:ip,rotateZ:ip,skewX:n=>io(Math.atan(n[1])),skewY:n=>io(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},ap=n=>(n=n%360,n<0&&(n+=360),n),e2=ip,t2=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),n2=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),QI={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:t2,scaleY:n2,scale:n=>(t2(n)+n2(n))/2,rotateX:n=>ap(io(Math.atan2(n[6],n[5]))),rotateY:n=>ap(io(Math.atan2(-n[2],n[0]))),rotateZ:e2,rotate:e2,skewX:n=>io(Math.atan(n[4])),skewY:n=>io(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function op(n){return n.includes("scale")?1:0}function sp(n,e){if(!n||n==="none")return op(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=QI,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=ZI,i=c}if(!i)return op(e);const a=r[e],l=i[1].split(",").map(eN);return typeof a=="function"?a(l):l[a]}const JI=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return sp(t,e)};function eN(n){return parseFloat(n.trim())}const Rs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Is=new Set(Rs),r2=n=>n===Os||n===st,tN=new Set(["x","y","z"]),nN=Rs.filter(n=>!tN.has(n));function rN(n){const e=[];return nN.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const oo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>sp(e,"x"),y:(n,{transform:e})=>sp(e,"y")};oo.translateX=oo.x;oo.translateY=oo.y;const so=new Set;let lp=!1,cp=!1,up=!1;function C_(){if(cp){const n=Array.from(so).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=rN(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([a,l])=>{r.getValue(a)?.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}cp=!1,lp=!1,so.forEach(n=>n.complete(up)),so.clear()}function E_(){so.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(cp=!0)})}function iN(){up=!0,E_(),C_(),up=!1}class d1{constructor(e,t,r,i,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(so.add(this),lp||(lp=!0,sn.read(E_),sn.resolveKeyframes(C_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const c=r.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),i&&a===void 0&&i.set(e[0])}KI(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),so.delete(this)}cancel(){this.state==="scheduled"&&(so.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const aN=n=>n.startsWith("--");function oN(n,e,t){aN(e)?n.style.setProperty(e,t):n.style[e]=t}const sN=Qp(()=>window.ScrollTimeline!==void 0),lN={};function cN(n,e){const t=Qp(n);return()=>lN[e]??t()}const A_=cN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),kl=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,i2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:kl([0,.65,.55,1]),circOut:kl([.55,0,1,.45]),backIn:kl([.31,.01,.66,-.59]),backOut:kl([.33,1.53,.69,.99])};function T_(n,e){if(n)return typeof n=="function"?A_()?w_(n,e):"ease-out":d_(n)?kl(n):Array.isArray(n)?n.map(t=>T_(t,e)||i2.easeOut):i2[n]}function uN(n,e,t,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:c="easeOut",times:d}={},f=void 0){const g={[e]:t};d&&(g.offset=d);const m=T_(c,i);Array.isArray(m)&&(g.easing=m);const y={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(y.pseudoElement=f),n.animate(g,y)}function O_(n){return typeof n=="function"&&"applyToOptions"in n}function dN({type:n,...e}){return O_(n)&&A_()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class fN extends c1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,Zp(typeof e.type!="string");const f=dN(e);this.animation=uN(t,r,i,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=l1(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):oN(t,r,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Wr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Wr(e)}get time(){return Wr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=mi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&sN()?(this.animation.timeline=e,Yr):t(this)}}const R_={anticipate:s_,backInOut:o_,circInOut:c_};function hN(n){return n in R_}function pN(n){typeof n.ease=="string"&&hN(n.ease)&&(n.ease=R_[n.ease])}const a2=10;class gN extends fN{constructor(e){pN(e),S_(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new u1({...l,autoplay:!1}),d=mi(this.finishedTime??this.time);t.setWithVelocity(c.sample(d-a2).value,c.sample(d).value,a2),c.stop()}}const o2=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ca.test(n)||n==="0")&&!n.startsWith("url("));function mN(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function yN(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=o2(i,e),c=o2(a,e);return!l||!c?!1:mN(n)||(t==="spring"||O_(t))&&r}function dp(n){n.duration=0,n.type="keyframes"}const vN=new Set(["opacity","clipPath","filter","transform"]),xN=Qp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function bN(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:a,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return xN()&&t&&vN.has(t)&&(t!=="transform"||!f)&&!d&&!r&&i!=="mirror"&&a!==0&&l!=="inertia"}const wN=40;class _N extends c1{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",keyframes:c,name:d,motionValue:f,element:g,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=br.now();const y={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:a,repeatType:l,name:d,motionValue:f,element:g,...m},x=g?.KeyframeResolver||d1;this.keyframeResolver=new x(c,(w,_,A)=>this.onKeyframesResolved(w,_,y,!A),d,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:a,type:l,velocity:c,delay:d,isHandoff:f,onUpdate:g}=r;this.resolvedAt=br.now(),yN(e,a,l,c)||((Vi.instantAnimations||!d)&&g?.(l1(e,r,t)),e[0]=e[e.length-1],dp(r),r.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>wN?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},x=!f&&bN(y)?new gN({...y,element:y.motionValue.owner.current}):new u1(y);x.finished.then(()=>this.notifyFinished()).catch(Yr),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),iN()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const SN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CN(n){const e=SN.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function I_(n,e,t=1){const[r,i]=CN(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return Qw(l)?parseFloat(l):l}return r1(i)?I_(i,e,t+1):i}function f1(n,e){return n?.[e]??n?.default??n}const N_=new Set(["width","height","top","left","right","bottom",...Rs]),EN={test:n=>n==="auto",parse:n=>n},k_=n=>e=>e.test(n),D_=[Os,st,yi,va,mI,gI,EN],s2=n=>D_.find(k_(n));function AN(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||e_(n):!0}const TN=new Set(["brightness","contrast","saturate","opacity"]);function ON(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(i1)||[];if(!r)return n;const i=t.replace(r,"");let a=TN.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+i+")"}const RN=/\b([a-z-]*)\(.*?\)/gu,fp={...Ca,getAnimatableNone:n=>{const e=n.match(RN);return e?e.map(ON).join(" "):n}},l2={...Os,transform:Math.round},IN={rotate:va,rotateX:va,rotateY:va,rotateZ:va,scale:Lu,scaleX:Lu,scaleY:Lu,scaleZ:Lu,skew:va,skewX:va,skewY:va,distance:st,translateX:st,translateY:st,translateZ:st,x:st,y:st,z:st,perspective:st,transformPerspective:st,opacity:Gl,originX:Yx,originY:Yx,originZ:st},h1={borderWidth:st,borderTopWidth:st,borderRightWidth:st,borderBottomWidth:st,borderLeftWidth:st,borderRadius:st,radius:st,borderTopLeftRadius:st,borderTopRightRadius:st,borderBottomRightRadius:st,borderBottomLeftRadius:st,width:st,maxWidth:st,height:st,maxHeight:st,top:st,right:st,bottom:st,left:st,padding:st,paddingTop:st,paddingRight:st,paddingBottom:st,paddingLeft:st,margin:st,marginTop:st,marginRight:st,marginBottom:st,marginLeft:st,backgroundPositionX:st,backgroundPositionY:st,...IN,zIndex:l2,fillOpacity:Gl,strokeOpacity:Gl,numOctaves:l2},NN={...h1,color:Rn,backgroundColor:Rn,outlineColor:Rn,fill:Rn,stroke:Rn,borderColor:Rn,borderTopColor:Rn,borderRightColor:Rn,borderBottomColor:Rn,borderLeftColor:Rn,filter:fp,WebkitFilter:fp},j_=n=>NN[n];function M_(n,e){let t=j_(n);return t!==fp&&(t=Ca),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const kN=new Set(["auto","none","0"]);function DN(n,e,t){let r=0,i;for(;r<n.length&&!i;){const a=n[r];typeof a=="string"&&!kN.has(a)&&Wl(a).values.length&&(i=n[r]),r++}if(i&&t)for(const a of e)n[a]=M_(t,i)}class jN extends d1{constructor(e,t,r,i,a){super(e,t,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),r1(f))){const g=I_(f,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!N_.has(r)||e.length!==2)return;const[i,a]=e,l=s2(i),c=s2(a);if(l!==c)if(r2(l)&&r2(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else oo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||AN(e[i]))&&r.push(i);r.length&&DN(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=oo[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function MN(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const P_=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function B_(n){return Jw(n)&&"offsetHeight"in n}const c2=30,PN=n=>!isNaN(parseFloat(n));class BN{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=br.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=br.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=PN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Jp);const r=this.events[e].add(t);return e==="change"?()=>{r(),sn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=br.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>c2)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,c2);return t_(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bs(n,e){return new BN(n,e)}const{schedule:p1}=f_(queueMicrotask,!1),ni={x:!1,y:!1};function L_(){return ni.x||ni.y}function LN(n){return n==="x"||n==="y"?ni[n]?null:(ni[n]=!0,()=>{ni[n]=!1}):ni.x||ni.y?null:(ni.x=ni.y=!0,()=>{ni.x=ni.y=!1})}function F_(n,e){const t=MN(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function u2(n){return!(n.pointerType==="touch"||L_())}function FN(n,e,t={}){const[r,i,a]=F_(n,t),l=c=>{if(!u2(c))return;const{target:d}=c,f=e(d,c);if(typeof f!="function"||!d)return;const g=m=>{u2(m)&&(f(m),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,i)};return r.forEach(c=>{c.addEventListener("pointerenter",l,i)}),a}const U_=(n,e)=>e?n===e?!0:U_(n,e.parentElement):!1,g1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,UN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zN(n){return UN.has(n.tagName)||n.tabIndex!==-1}const Yu=new WeakSet;function d2(n){return e=>{e.key==="Enter"&&n(e)}}function v0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const VN=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=d2(()=>{if(Yu.has(t))return;v0(t,"down");const i=d2(()=>{v0(t,"up")}),a=()=>v0(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function f2(n){return g1(n)&&!L_()}function HN(n,e,t={}){const[r,i,a]=F_(n,t),l=c=>{const d=c.currentTarget;if(!f2(c))return;Yu.add(d);const f=e(d,c),g=(x,w)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),Yu.has(d)&&Yu.delete(d),f2(x)&&typeof f=="function"&&f(x,{success:w})},m=x=>{g(x,d===window||d===document||t.useGlobalTarget||U_(d,x.target))},y=x=>{g(x,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",y,i)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",l,i),B_(c)&&(c.addEventListener("focus",f=>VN(f,i)),!zN(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function z_(n){return Jw(n)&&"ownerSVGElement"in n}function $N(n){return z_(n)&&n.tagName==="svg"}const ir=n=>!!(n&&n.getVelocity),qN=[...D_,Rn,Ca],GN=n=>qN.find(k_(n)),m1=O.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function h2(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function WN(...n){return e=>{let t=!1;const r=n.map(i=>{const a=h2(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():h2(n[i],null)}}}}function XN(...n){return O.useCallback(WN(...n),n)}class YN extends O.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=B_(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function KN({children:n,isPresent:e,anchorX:t,root:r}){const i=O.useId(),a=O.useRef(null),l=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=O.useContext(m1),d=XN(a,n?.ref);return O.useInsertionEffect(()=>{const{width:f,height:g,top:m,left:y,right:x}=l.current;if(e||!a.current||!f||!g)return;const w=t==="left"?`left: ${y}`:`right: ${x}`;a.current.dataset.motionPopId=i;const _=document.createElement("style");c&&(_.nonce=c);const A=r??document.head;return A.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${w}px !important;
            top: ${m}px !important;
          }
        `),()=>{A.contains(_)&&A.removeChild(_)}},[e]),p.jsx(YN,{isPresent:e,childRef:a,sizeRef:l,children:O.cloneElement(n,{ref:d})})}const ZN=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:l,anchorX:c,root:d})=>{const f=Wp(QN),g=O.useId();let m=!0,y=O.useMemo(()=>(m=!1,{id:g,initial:e,isPresent:t,custom:i,onExitComplete:x=>{f.set(x,!0);for(const w of f.values())if(!w)return;r&&r()},register:x=>(f.set(x,!1),()=>f.delete(x))}),[t,f,r]);return a&&m&&(y={...y}),O.useMemo(()=>{f.forEach((x,w)=>f.set(w,!1))},[t]),O.useEffect(()=>{!t&&!f.size&&r&&r()},[t]),l==="popLayout"&&(n=p.jsx(KN,{isPresent:t,anchorX:c,root:d,children:n})),p.jsx(Ad.Provider,{value:y,children:n})};function QN(){return new Map}function V_(n=!0){const e=O.useContext(Ad);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,a=O.useId();O.useEffect(()=>{if(n)return i(a)},[n]);const l=O.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,l]:[!0]}const Fu=n=>n.key||"";function p2(n){const e=[];return O.Children.forEach(n,t=>{O.isValidElement(t)&&e.push(t)}),e}const Gn=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:c="left",root:d})=>{const[f,g]=V_(l),m=O.useMemo(()=>p2(n),[n]),y=l&&!f?[]:m.map(Fu),x=O.useRef(!0),w=O.useRef(m),_=Wp(()=>new Map),[A,E]=O.useState(m),[S,T]=O.useState(m);Zw(()=>{x.current=!1,w.current=m;for(let k=0;k<S.length;k++){const M=Fu(S[k]);y.includes(M)?_.delete(M):_.get(M)!==!0&&_.set(M,!1)}},[S,y.length,y.join("-")]);const R=[];if(m!==A){let k=[...m];for(let M=0;M<S.length;M++){const V=S[M],ie=Fu(V);y.includes(ie)||(k.splice(M,0,V),R.push(V))}return a==="wait"&&R.length&&(k=R),T(p2(k)),E(m),null}const{forceRender:N}=O.useContext(Gp);return p.jsx(p.Fragment,{children:S.map(k=>{const M=Fu(k),V=l&&!f?!1:m===S||y.includes(M),ie=()=>{if(_.has(M))_.set(M,!0);else return;let fe=!0;_.forEach(xe=>{xe||(fe=!1)}),fe&&(N?.(),T(w.current),l&&g?.(),r&&r())};return p.jsx(ZN,{isPresent:V,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:d,onExitComplete:V?void 0:ie,anchorX:c,children:k},M)})})},H_=O.createContext({strict:!1}),g2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ws={};for(const n in g2)ws[n]={isEnabled:e=>g2[n].some(t=>!!e[t])};function JN(n){for(const e in n)ws[e]={...ws[e],...n[e]}}const ek=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pd(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||ek.has(n)}let $_=n=>!pd(n);function tk(n){typeof n=="function"&&($_=e=>e.startsWith("on")?!pd(e):n(e))}try{tk(require("@emotion/is-prop-valid").default)}catch{}function nk(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||($_(i)||t===!0&&pd(i)||!e&&!pd(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Td=O.createContext({});function Od(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Xl(n){return typeof n=="string"||Array.isArray(n)}const y1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],v1=["initial",...y1];function Rd(n){return Od(n.animate)||v1.some(e=>Xl(n[e]))}function q_(n){return!!(Rd(n)||n.variants)}function rk(n,e){if(Rd(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Xl(t)?t:void 0,animate:Xl(r)?r:void 0}}return n.inherit!==!1?e:{}}function ik(n){const{initial:e,animate:t}=rk(n,O.useContext(Td));return O.useMemo(()=>({initial:e,animate:t}),[m2(e),m2(t)])}function m2(n){return Array.isArray(n)?n.join(" "):n}const Yl={};function ak(n){for(const e in n)Yl[e]=n[e],n1(e)&&(Yl[e].isCSSVariable=!0)}function G_(n,{layout:e,layoutId:t}){return Is.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Yl[n]||n==="opacity")}const ok={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sk=Rs.length;function lk(n,e,t){let r="",i=!0;for(let a=0;a<sk;a++){const l=Rs[a],c=n[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||t){const f=P_(c,h1[l]);if(!d){i=!1;const g=ok[l]||l;r+=`${g}(${f}) `}t&&(e[l]=f)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function x1(n,e,t){const{style:r,vars:i,transformOrigin:a}=n;let l=!1,c=!1;for(const d in e){const f=e[d];if(Is.has(d)){l=!0;continue}else if(n1(d)){i[d]=f;continue}else{const g=P_(f,h1[d]);d.startsWith("origin")?(c=!0,a[d]=g):r[d]=g}}if(e.transform||(l||t?r.transform=lk(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:g=0}=a;r.transformOrigin=`${d} ${f} ${g}`}}const b1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function W_(n,e,t){for(const r in e)!ir(e[r])&&!G_(r,t)&&(n[r]=e[r])}function ck({transformTemplate:n},e){return O.useMemo(()=>{const t=b1();return x1(t,e,n),Object.assign({},t.vars,t.style)},[e])}function uk(n,e){const t=n.style||{},r={};return W_(r,t,n),Object.assign(r,ck(n,e)),r}function dk(n,e){const t={},r=uk(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const fk={offset:"stroke-dashoffset",array:"stroke-dasharray"},hk={offset:"strokeDashoffset",array:"strokeDasharray"};function pk(n,e,t=1,r=0,i=!0){n.pathLength=1;const a=i?fk:hk;n[a.offset]=st.transform(-r);const l=st.transform(e),c=st.transform(t);n[a.array]=`${l} ${c}`}function X_(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...c},d,f,g){if(x1(n,c,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:y}=n;m.transform&&(y.transform=m.transform,delete m.transform),(y.transform||m.transformOrigin)&&(y.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),y.transform&&(y.transformBox=g?.transformBox??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),r!==void 0&&(m.scale=r),i!==void 0&&pk(m,i,a,l,!1)}const Y_=()=>({...b1(),attrs:{}}),K_=n=>typeof n=="string"&&n.toLowerCase()==="svg";function gk(n,e,t,r){const i=O.useMemo(()=>{const a=Y_();return X_(a,e,K_(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};W_(a,n.style,n),i.style={...a,...i.style}}return i}const mk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function w1(n){return typeof n!="string"||n.includes("-")?!1:!!(mk.indexOf(n)>-1||/[A-Z]/u.test(n))}function yk(n,e,t,{latestValues:r},i,a=!1){const c=(w1(n)?gk:dk)(e,r,i,n),d=nk(e,typeof n=="string",a),f=n!==O.Fragment?{...d,...c,ref:t}:{},{children:g}=e,m=O.useMemo(()=>ir(g)?g.get():g,[g]);return O.createElement(n,{...f,children:m})}function y2(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function _1(n,e,t,r){if(typeof e=="function"){const[i,a]=y2(r);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=y2(r);e=e(t!==void 0?t:n.custom,i,a)}return e}function Ku(n){return ir(n)?n.get():n}function vk({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:xk(t,r,i,n),renderState:e()}}function xk(n,e,t,r){const i={},a=r(n,{});for(const y in a)i[y]=Ku(a[y]);let{initial:l,animate:c}=n;const d=Rd(n),f=q_(n);e&&f&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const m=g?c:l;if(m&&typeof m!="boolean"&&!Od(m)){const y=Array.isArray(m)?m:[m];for(let x=0;x<y.length;x++){const w=_1(n,y[x]);if(w){const{transitionEnd:_,transition:A,...E}=w;for(const S in E){let T=E[S];if(Array.isArray(T)){const R=g?T.length-1:0;T=T[R]}T!==null&&(i[S]=T)}for(const S in _)i[S]=_[S]}}}return i}const Z_=n=>(e,t)=>{const r=O.useContext(Td),i=O.useContext(Ad),a=()=>vk(n,e,r,i);return t?a():Wp(a)};function S1(n,e,t){const{style:r}=n,i={};for(const a in r)(ir(r[a])||e.style&&ir(e.style[a])||G_(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const bk=Z_({scrapeMotionValuesFromProps:S1,createRenderState:b1});function Q_(n,e,t){const r=S1(n,e,t);for(const i in n)if(ir(n[i])||ir(e[i])){const a=Rs.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=n[i]}return r}const wk=Z_({scrapeMotionValuesFromProps:Q_,createRenderState:Y_}),_k=Symbol.for("motionComponentSymbol");function ds(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Sk(n,e,t){return O.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ds(t)&&(t.current=r))},[e])}const C1=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ck="framerAppearId",J_="data-"+C1(Ck),eS=O.createContext({});function Ek(n,e,t,r,i){const{visualElement:a}=O.useContext(Td),l=O.useContext(H_),c=O.useContext(Ad),d=O.useContext(m1).reducedMotion,f=O.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const g=f.current,m=O.useContext(eS);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&Ak(f.current,t,i,m);const y=O.useRef(!1);O.useInsertionEffect(()=>{g&&y.current&&g.update(t,c)});const x=t[J_],w=O.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return Zw(()=>{g&&(y.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),w.current&&g.animationState&&g.animationState.animateChanges())}),O.useEffect(()=>{g&&(!w.current&&g.animationState&&g.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),w.current=!1),g.enteringChildren=void 0)}),g}function Ak(n,e,t,r){const{layoutId:i,layout:a,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:f,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:tS(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||c&&ds(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:f})}function tS(n){if(n)return n.options.allowProjection!==!1?n.projection:tS(n.parent)}function x0(n,{forwardMotionProps:e=!1}={},t,r){t&&JN(t);const i=w1(n)?wk:bk;function a(c,d){let f;const g={...O.useContext(m1),...c,layoutId:Tk(c)},{isStatic:m}=g,y=ik(c),x=i(c,m);if(!m&&Xp){Ok();const w=Rk(g);f=w.MeasureLayout,y.visualElement=Ek(n,x,g,r,w.ProjectionNode)}return p.jsxs(Td.Provider,{value:y,children:[f&&y.visualElement?p.jsx(f,{visualElement:y.visualElement,...g}):null,yk(n,c,Sk(x,y.visualElement,d),x,m,e)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=O.forwardRef(a);return l[_k]=n,l}function Tk({layoutId:n}){const e=O.useContext(Gp).id;return e&&n!==void 0?e+"-"+n:n}function Ok(n,e){O.useContext(H_).strict}function Rk(n){const{drag:e,layout:t}=ws;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Ik(n,e){if(typeof Proxy>"u")return x0;const t=new Map,r=(a,l)=>x0(a,l,n,e),i=(a,l)=>r(a,l);return new Proxy(i,{get:(a,l)=>l==="create"?r:(t.has(l)||t.set(l,x0(l,void 0,n,e)),t.get(l))})}function nS({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Nk({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function kk(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function b0(n){return n===void 0||n===1}function hp({scale:n,scaleX:e,scaleY:t}){return!b0(n)||!b0(e)||!b0(t)}function Qa(n){return hp(n)||rS(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function rS(n){return v2(n.x)||v2(n.y)}function v2(n){return n&&n!=="0%"}function gd(n,e,t){const r=n-t,i=e*r;return t+i}function x2(n,e,t,r,i){return i!==void 0&&(n=gd(n,i,r)),gd(n,t,r)+e}function pp(n,e=0,t=1,r,i){n.min=x2(n.min,e,t,r,i),n.max=x2(n.max,e,t,r,i)}function iS(n,{x:e,y:t}){pp(n.x,e.translate,e.scale,e.originPoint),pp(n.y,t.translate,t.scale,t.originPoint)}const b2=.999999999999,w2=1.0000000000001;function Dk(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,l;for(let c=0;c<i;c++){a=t[c],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&hs(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,iS(n,l)),r&&Qa(a.latestValues)&&hs(n,a.latestValues))}e.x<w2&&e.x>b2&&(e.x=1),e.y<w2&&e.y>b2&&(e.y=1)}function fs(n,e){n.min=n.min+e,n.max=n.max+e}function _2(n,e,t,r,i=.5){const a=pn(n.min,n.max,i);pp(n,e,t,a,r)}function hs(n,e){_2(n.x,e.x,e.scaleX,e.scale,e.originX),_2(n.y,e.y,e.scaleY,e.scale,e.originY)}function aS(n,e){return nS(kk(n.getBoundingClientRect(),e))}function jk(n,e,t){const r=aS(n,t),{scroll:i}=e;return i&&(fs(r.x,i.offset.x),fs(r.y,i.offset.y)),r}const S2=()=>({translate:0,scale:1,origin:0,originPoint:0}),ps=()=>({x:S2(),y:S2()}),C2=()=>({min:0,max:0}),wn=()=>({x:C2(),y:C2()}),gp={current:null},oS={current:!1};function Mk(){if(oS.current=!0,!!Xp)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>gp.current=n.matches;n.addEventListener("change",e),e()}else gp.current=!1}const Pk=new WeakMap;function Bk(n,e,t){for(const r in e){const i=e[r],a=t[r];if(ir(i))n.addValue(r,i);else if(ir(a))n.addValue(r,bs(i,{owner:n}));else if(a!==i)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=n.getStaticValue(r);n.addValue(r,bs(l!==void 0?l:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const E2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Lk{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=d1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=br.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,sn.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Rd(t),this.isVariantNode=q_(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in m){const x=m[y];d[y]!==void 0&&ir(x)&&x.set(d[y])}}mount(e){this.current=e,Pk.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),oS.current||Mk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gp.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Sa(this.notifyUpdate),Sa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Is.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&sn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ws){const t=ws[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<E2.length;r++){const i=E2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=Bk(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=bs(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Qw(r)||e_(r))?r=parseFloat(r):!GN(r)&&Ca.test(t)&&(r=M_(e,t)),this.setBaseTarget(e,ir(r)?r.get():r)),ir(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const a=_1(this.props,t,this.presenceContext?.custom);a&&(r=a[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ir(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Jp),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){p1.render(this.render)}}class sS extends Lk{constructor(){super(...arguments),this.KeyframeResolver=jN}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ir(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function lS(n,{style:e,vars:t},r,i){const a=n.style;let l;for(l in e)a[l]=e[l];i?.applyProjectionStyles(a,r);for(l in t)a.setProperty(l,t[l])}function Fk(n){return window.getComputedStyle(n)}class Uk extends sS{constructor(){super(...arguments),this.type="html",this.renderInstance=lS}readValueFromInstance(e,t){if(Is.has(t))return this.projection?.isProjecting?op(t):JI(e,t);{const r=Fk(e),i=(n1(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return aS(e,t)}build(e,t,r){x1(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return S1(e,t,r)}}const cS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zk(n,e,t,r){lS(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(cS.has(i)?i:C1(i),e.attrs[i])}class Vk extends sS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Is.has(t)){const r=j_(t);return r&&r.default||0}return t=cS.has(t)?t:C1(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return Q_(e,t,r)}build(e,t,r){X_(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){zk(e,t,r,i)}mount(e){this.isSVGTag=K_(e.tagName),super.mount(e)}}const Hk=(n,e)=>w1(n)?new Vk(e):new Uk(e,{allowProjection:n!==O.Fragment});function ms(n,e,t){const r=n.getProps();return _1(r,e,t!==void 0?t:r.custom,n)}const mp=n=>Array.isArray(n);function $k(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,bs(t))}function qk(n){return mp(n)?n[n.length-1]||0:n}function Gk(n,e){const t=ms(n,e);let{transitionEnd:r={},transition:i={},...a}=t||{};a={...a,...r};for(const l in a){const c=qk(a[l]);$k(n,l,c)}}function Wk(n){return!!(ir(n)&&n.add)}function yp(n,e){const t=n.getValue("willChange");if(Wk(t))return t.add(e);if(!t&&Vi.WillChange){const r=new Vi.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function uS(n){return n.props[J_]}const Xk=n=>n!==null;function Yk(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(Xk),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[a]}const Kk={type:"spring",stiffness:500,damping:25,restSpeed:10},Zk=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Qk={type:"keyframes",duration:.8},Jk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eD=(n,{keyframes:e})=>e.length>2?Qk:Is.has(n)?n.startsWith("scale")?Zk(e[1]):Kk:Jk;function tD({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:c,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const E1=(n,e,t,r={},i,a)=>l=>{const c=f1(r,n)||{},d=c.delay||r.delay||0;let{elapsed:f=0}=r;f=f-mi(d);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:a?void 0:i};tD(c)||Object.assign(g,eD(n,g)),g.duration&&(g.duration=mi(g.duration)),g.repeatDelay&&(g.repeatDelay=mi(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let m=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(dp(g),g.delay===0&&(m=!0)),(Vi.instantAnimations||Vi.skipAnimations)&&(m=!0,dp(g),g.delay=0),g.allowFlatten=!c.type&&!c.ease,m&&!a&&e.get()!==void 0){const y=Yk(g.keyframes,c);if(y!==void 0){sn.update(()=>{g.onUpdate(y),g.onComplete()});return}}return c.isSync?new u1(g):new _N(g)};function nD({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function dS(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...c}=e;r&&(a=r);const d=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const g in c){const m=n.getValue(g,n.latestValues[g]??null),y=c[g];if(y===void 0||f&&nD(f,g))continue;const x={delay:t,...f1(a||{},g)},w=m.get();if(w!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===w&&!x.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const E=uS(n);if(E){const S=window.MotionHandoffAnimation(E,g,sn);S!==null&&(x.startTime=S,_=!0)}}yp(n,g),m.start(E1(g,m,y,n.shouldReduceMotion&&N_.has(g)?{type:!1}:x,n,_));const A=m.animation;A&&d.push(A)}return l&&Promise.all(d).then(()=>{sn.update(()=>{l&&Gk(n,l)})}),d}function fS(n,e,t,r=0,i=1){const a=Array.from(n).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),l=n.size,c=(l-1)*r;return typeof t=="function"?t(a,l):i===1?a*r:c-a*r}function vp(n,e,t={}){const r=ms(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const a=r?()=>Promise.all(dS(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:m}=i;return rD(n,e,d,f,g,m,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,f]=c==="beforeChildren"?[a,l]:[l,a];return d().then(()=>f())}else return Promise.all([a(),l(t.delay)])}function rD(n,e,t=0,r=0,i=0,a=1,l){const c=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),c.push(vp(d,e,{...l,delay:t+(typeof r=="function"?0:r)+fS(n.variantChildren,d,r,i,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(c)}function iD(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>vp(n,a,t));r=Promise.all(i)}else if(typeof e=="string")r=vp(n,e,t);else{const i=typeof e=="function"?ms(n,e,t.custom):e;r=Promise.all(dS(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function hS(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const aD=v1.length;function pS(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?pS(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<aD;t++){const r=v1[t],i=n.props[r];(Xl(i)||i===!1)&&(e[r]=i)}return e}const oD=[...y1].reverse(),sD=y1.length;function lD(n){return e=>Promise.all(e.map(({animation:t,options:r})=>iD(n,t,r)))}function cD(n){let e=lD(n),t=A2(),r=!0;const i=d=>(f,g)=>{const m=ms(n,g,d==="exit"?n.presenceContext?.custom:void 0);if(m){const{transition:y,transitionEnd:x,...w}=m;f={...f,...w,...x}}return f};function a(d){e=d(n)}function l(d){const{props:f}=n,g=pS(n.parent)||{},m=[],y=new Set;let x={},w=1/0;for(let A=0;A<sD;A++){const E=oD[A],S=t[E],T=f[E]!==void 0?f[E]:g[E],R=Xl(T),N=E===d?S.isActive:null;N===!1&&(w=A);let k=T===g[E]&&T!==f[E]&&R;if(k&&r&&n.manuallyAnimateOnMount&&(k=!1),S.protectedKeys={...x},!S.isActive&&N===null||!T&&!S.prevProp||Od(T)||typeof T=="boolean")continue;const M=uD(S.prevProp,T);let V=M||E===d&&S.isActive&&!k&&R||A>w&&R,ie=!1;const fe=Array.isArray(T)?T:[T];let xe=fe.reduce(i(E),{});N===!1&&(xe={});const{prevResolvedValues:q={}}=S,we={...q,...xe},Te=te=>{V=!0,y.has(te)&&(ie=!0,y.delete(te)),S.needsAnimating[te]=!0;const ce=n.getValue(te);ce&&(ce.liveStyle=!1)};for(const te in we){const ce=xe[te],Z=q[te];if(x.hasOwnProperty(te))continue;let pe=!1;mp(ce)&&mp(Z)?pe=!hS(ce,Z):pe=ce!==Z,pe?ce!=null?Te(te):y.add(te):ce!==void 0&&y.has(te)?Te(te):S.protectedKeys[te]=!0}S.prevProp=T,S.prevResolvedValues=xe,S.isActive&&(x={...x,...xe}),r&&n.blockInitialAnimation&&(V=!1);const ae=k&&M;V&&(!ae||ie)&&m.push(...fe.map(te=>{const ce={type:E};if(typeof te=="string"&&r&&!ae&&n.manuallyAnimateOnMount&&n.parent){const{parent:Z}=n,pe=ms(Z,te);if(Z.enteringChildren&&pe){const{delayChildren:B}=pe.transition||{};ce.delay=fS(Z.enteringChildren,n,B)}}return{animation:te,options:ce}}))}if(y.size){const A={};if(typeof f.initial!="boolean"){const E=ms(n,Array.isArray(f.initial)?f.initial[0]:f.initial);E&&E.transition&&(A.transition=E.transition)}y.forEach(E=>{const S=n.getBaseTarget(E),T=n.getValue(E);T&&(T.liveStyle=!0),A[E]=S??null}),m.push({animation:A})}let _=!!m.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(m):Promise.resolve()}function c(d,f){if(t[d].isActive===f)return Promise.resolve();n.variantChildren?.forEach(m=>m.animationState?.setActive(d,f)),t[d].isActive=f;const g=l(d);for(const m in t)t[m].protectedKeys={};return g}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>t,reset:()=>{t=A2()}}}function uD(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!hS(e,n):!1}function Ya(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function A2(){return{animate:Ya(!0),whileInView:Ya(),whileHover:Ya(),whileTap:Ya(),whileDrag:Ya(),whileFocus:Ya(),exit:Ya()}}class Ta{constructor(e){this.isMounted=!1,this.node=e}update(){}}class dD extends Ta{constructor(e){super(e),e.animationState||(e.animationState=cD(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Od(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let fD=0;class hD extends Ta{constructor(){super(...arguments),this.id=fD++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const pD={animation:{Feature:dD},exit:{Feature:hD}};function Kl(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function oc(n){return{point:{x:n.pageX,y:n.pageY}}}const gD=n=>e=>g1(e)&&n(e,oc(e));function Ll(n,e,t,r){return Kl(n,e,gD(t),r)}const gS=1e-4,mD=1-gS,yD=1+gS,mS=.01,vD=0-mS,xD=0+mS;function ur(n){return n.max-n.min}function bD(n,e,t){return Math.abs(n-e)<=t}function T2(n,e,t,r=.5){n.origin=r,n.originPoint=pn(e.min,e.max,n.origin),n.scale=ur(t)/ur(e),n.translate=pn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=mD&&n.scale<=yD||isNaN(n.scale))&&(n.scale=1),(n.translate>=vD&&n.translate<=xD||isNaN(n.translate))&&(n.translate=0)}function Fl(n,e,t,r){T2(n.x,e.x,t.x,r?r.originX:void 0),T2(n.y,e.y,t.y,r?r.originY:void 0)}function O2(n,e,t){n.min=t.min+e.min,n.max=n.min+ur(e)}function wD(n,e,t){O2(n.x,e.x,t.x),O2(n.y,e.y,t.y)}function R2(n,e,t){n.min=e.min-t.min,n.max=n.min+ur(e)}function Ul(n,e,t){R2(n.x,e.x,t.x),R2(n.y,e.y,t.y)}function qr(n){return[n("x"),n("y")]}const yS=({current:n})=>n?n.ownerDocument.defaultView:null,I2=(n,e)=>Math.abs(n-e);function _D(n,e){const t=I2(n.x,e.x),r=I2(n.y,e.y);return Math.sqrt(t**2+r**2)}class vS{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=_0(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,w=_D(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!w)return;const{point:_}=y,{timestamp:A}=Jn;this.history.push({..._,timestamp:A});const{onStart:E,onMove:S}=this.handlers;x||(E&&E(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,y)},this.handlePointerMove=(y,x)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=w0(x,this.transformPagePoint),sn.update(this.updatePoint,!0)},this.handlePointerUp=(y,x)=>{this.end();const{onEnd:w,onSessionEnd:_,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=_0(y.type==="pointercancel"?this.lastMoveEventInfo:w0(x,this.transformPagePoint),this.history);this.startEvent&&w&&w(y,E),_&&_(y,E)},!g1(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=i||window;const c=oc(e),d=w0(c,this.transformPagePoint),{point:f}=d,{timestamp:g}=Jn;this.history=[{...f,timestamp:g}];const{onSessionStart:m}=t;m&&m(e,_0(d,this.history)),this.removeListeners=rc(Ll(this.contextWindow,"pointermove",this.handlePointerMove),Ll(this.contextWindow,"pointerup",this.handlePointerUp),Ll(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Sa(this.updatePoint)}}function w0(n,e){return e?{point:e(n.point)}:n}function N2(n,e){return{x:n.x-e.x,y:n.y-e.y}}function _0({point:n},e){return{point:n,delta:N2(n,xS(e)),offset:N2(n,SD(e)),velocity:CD(e,.1)}}function SD(n){return n[0]}function xS(n){return n[n.length-1]}function CD(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=xS(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>mi(e)));)t--;if(!r)return{x:0,y:0};const a=Wr(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function ED(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?pn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?pn(t,n,r.max):Math.min(n,t)),n}function k2(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function AD(n,{top:e,left:t,bottom:r,right:i}){return{x:k2(n.x,t,i),y:k2(n.y,e,r)}}function D2(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function TD(n,e){return{x:D2(n.x,e.x),y:D2(n.y,e.y)}}function OD(n,e){let t=.5;const r=ur(n),i=ur(e);return i>r?t=ql(e.min,e.max-r,n.min):r>i&&(t=ql(n.min,n.max-i,e.min)),zi(0,1,t)}function RD(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const xp=.35;function ID(n=xp){return n===!1?n=0:n===!0&&(n=xp),{x:j2(n,"left","right"),y:j2(n,"top","bottom")}}function j2(n,e,t){return{min:M2(n,e),max:M2(n,t)}}function M2(n,e){return typeof n=="number"?n:n[e]||0}const ND=new WeakMap;class kD{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(oc(m).point)},l=(m,y)=>{const{drag:x,dragPropagation:w,onDragStart:_}=this.getProps();if(x&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=LN(x),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qr(E=>{let S=this.getAxisMotionValue(E).get()||0;if(yi.test(S)){const{projection:T}=this.visualElement;if(T&&T.layout){const R=T.layout.layoutBox[E];R&&(S=ur(R)*(parseFloat(S)/100))}}this.originPoint[E]=S}),_&&sn.postRender(()=>_(m,y)),yp(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},c=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y;const{dragPropagation:x,dragDirectionLock:w,onDirectionLock:_,onDrag:A}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:E}=y;if(w&&this.currentDirection===null){this.currentDirection=DD(E),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",y.point,E),this.updateAxis("y",y.point,E),this.visualElement.render(),A&&A(m,y)},d=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y,this.stop(m,y),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>qr(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new vS(e,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:yS(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&sn.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Uu(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=ED(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&ds(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=AD(r.layoutBox,e):this.constraints=!1,this.elastic=ID(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&qr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=RD(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ds(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=jk(r,i.root,this.visualElement.getTransformPagePoint());let l=TD(i.layout.layoutBox,a);if(t){const c=t(Nk(l));this.hasMutatedConstraints=!!c,c&&(l=nS(c))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=qr(g=>{if(!Uu(g,t,this.currentDirection))return;let m=d&&d[g]||{};l&&(m={min:0,max:0});const y=i?200:1e6,x=i?40:1e7,w={type:"inertia",velocity:r?e[g]:0,bounceStiffness:y,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(g,w)});return Promise.all(f).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return yp(this.visualElement,e),r.start(E1(e,r,0,t,this.visualElement,!1))}stopAnimation(){qr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){qr(t=>{const{drag:r}=this.getProps();if(!Uu(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:l,max:c}=i.layout.layoutBox[t];a.set(e[t]-pn(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ds(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};qr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();i[l]=OD({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qr(l=>{if(!Uu(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];c.set(pn(d,f,i[l]))})}addListeners(){if(!this.visualElement.current)return;ND.set(this.visualElement,this);const e=this.visualElement.current,t=Ll(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();ds(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),sn.read(r);const l=Kl(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(qr(g=>{const m=this.getAxisMotionValue(g);m&&(this.originPoint[g]+=d[g].translate,m.set(m.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=xp,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function Uu(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function DD(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class jD extends Ta{constructor(e){super(e),this.removeGroupControls=Yr,this.removeListeners=Yr,this.controls=new kD(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yr}unmount(){this.removeGroupControls(),this.removeListeners()}}const P2=n=>(e,t)=>{n&&sn.postRender(()=>n(e,t))};class MD extends Ta{constructor(){super(...arguments),this.removePointerDownListener=Yr}onPointerDown(e){this.session=new vS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:P2(e),onStart:P2(t),onMove:r,onEnd:(a,l)=>{delete this.session,i&&sn.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=Ll(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Zu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function B2(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Al={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(st.test(n))n=parseFloat(n);else return n;const t=B2(n,e.target.x),r=B2(n,e.target.y);return`${t}% ${r}%`}},PD={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Ca.parse(n);if(i.length>5)return r;const a=Ca.createTransformer(n),l=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;i[0+l]/=c,i[1+l]/=d;const f=pn(c,d,.5);return typeof i[2+l]=="number"&&(i[2+l]/=f),typeof i[3+l]=="number"&&(i[3+l]/=f),a(i)}};let S0=!1;class BD extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;ak(LD),a&&(t.group&&t.group.add(a),r&&r.register&&i&&r.register(a),S0&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Zu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:a}=this.props,{projection:l}=r;return l&&(l.isPresent=a,S0=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||sn.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),p1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;S0=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bS(n){const[e,t]=V_(),r=O.useContext(Gp);return p.jsx(BD,{...n,layoutGroup:r,switchLayoutGroup:O.useContext(eS),isPresent:e,safeToRemove:t})}const LD={borderRadius:{...Al,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Al,borderTopRightRadius:Al,borderBottomLeftRadius:Al,borderBottomRightRadius:Al,boxShadow:PD};function FD(n,e,t){const r=ir(n)?n:bs(n);return r.start(E1("",r,e,t)),r.animation}const UD=(n,e)=>n.depth-e.depth;class zD{constructor(){this.children=[],this.isDirty=!1}add(e){Yp(this.children,e),this.isDirty=!0}remove(e){Kp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(UD),this.isDirty=!1,this.children.forEach(e)}}function VD(n,e){const t=br.now(),r=({timestamp:i})=>{const a=i-t;a>=e&&(Sa(r),n(a-e))};return sn.setup(r,!0),()=>Sa(r)}const wS=["TopLeft","TopRight","BottomLeft","BottomRight"],HD=wS.length,L2=n=>typeof n=="string"?parseFloat(n):n,F2=n=>typeof n=="number"||st.test(n);function $D(n,e,t,r,i,a){i?(n.opacity=pn(0,t.opacity??1,qD(r)),n.opacityExit=pn(e.opacity??1,0,GD(r))):a&&(n.opacity=pn(e.opacity??1,t.opacity??1,r));for(let l=0;l<HD;l++){const c=`border${wS[l]}Radius`;let d=U2(e,c),f=U2(t,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||F2(d)===F2(f)?(n[c]=Math.max(pn(L2(d),L2(f),r),0),(yi.test(f)||yi.test(d))&&(n[c]+="%")):n[c]=f}(e.rotate||t.rotate)&&(n.rotate=pn(e.rotate||0,t.rotate||0,r))}function U2(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const qD=_S(0,.5,l_),GD=_S(.5,.95,Yr);function _S(n,e,t){return r=>r<n?0:r>e?1:t(ql(n,e,r))}function z2(n,e){n.min=e.min,n.max=e.max}function Hr(n,e){z2(n.x,e.x),z2(n.y,e.y)}function V2(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function H2(n,e,t,r,i){return n-=e,n=gd(n,1/t,r),i!==void 0&&(n=gd(n,1/i,r)),n}function WD(n,e=0,t=1,r=.5,i,a=n,l=n){if(yi.test(e)&&(e=parseFloat(e),e=pn(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=pn(a.min,a.max,r);n===a&&(c-=e),n.min=H2(n.min,e,t,c,i),n.max=H2(n.max,e,t,c,i)}function $2(n,e,[t,r,i],a,l){WD(n,e[t],e[r],e[i],e.scale,a,l)}const XD=["x","scaleX","originX"],YD=["y","scaleY","originY"];function q2(n,e,t,r){$2(n.x,e,XD,t?t.x:void 0,r?r.x:void 0),$2(n.y,e,YD,t?t.y:void 0,r?r.y:void 0)}function G2(n){return n.translate===0&&n.scale===1}function SS(n){return G2(n.x)&&G2(n.y)}function W2(n,e){return n.min===e.min&&n.max===e.max}function KD(n,e){return W2(n.x,e.x)&&W2(n.y,e.y)}function X2(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function CS(n,e){return X2(n.x,e.x)&&X2(n.y,e.y)}function Y2(n){return ur(n.x)/ur(n.y)}function K2(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class ZD{constructor(){this.members=[]}add(e){Yp(this.members,e),e.scheduleRender()}remove(e){if(Kp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QD(n,e,t){let r="";const i=n.x.translate/e.x,a=n.y.translate/e.y,l=t?.z||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:g,rotateX:m,rotateY:y,skewX:x,skewY:w}=t;f&&(r=`perspective(${f}px) ${r}`),g&&(r+=`rotate(${g}deg) `),m&&(r+=`rotateX(${m}deg) `),y&&(r+=`rotateY(${y}deg) `),x&&(r+=`skewX(${x}deg) `),w&&(r+=`skewY(${w}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const C0=["","X","Y","Z"],JD=1e3;let e7=0;function E0(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function ES(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=uS(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",sn,!(i||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&ES(r)}function AS({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},c=e?.()){this.id=e7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(r7),this.nodes.forEach(s7),this.nodes.forEach(l7),this.nodes.forEach(i7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new zD)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Jp),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=z_(l)&&!$N(l),this.instance=l;const{layoutId:c,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),n){let g,m=0;const y=()=>this.root.updateBlockedByResize=!1;sn.read(()=>{m=window.innerWidth}),n(l,()=>{const x=window.innerWidth;x!==m&&(m=x,this.root.updateBlockedByResize=!0,g&&g(),g=VD(y,250),Zu.hasAnimatedSinceResize&&(Zu.hasAnimatedSinceResize=!1,this.nodes.forEach(J2)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||h7,{onLayoutAnimationStart:_,onLayoutAnimationComplete:A}=f.getProps(),E=!this.targetLayout||!CS(this.targetLayout,x),S=!m&&y;if(this.options.layoutRoot||this.resumeFrom||S||m&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...f1(w,"layout"),onPlay:_,onComplete:A};(f.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(g,S)}else m||J2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Sa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(c7),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ES(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const m=this.path[g];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Z2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Q2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(o7),this.nodes.forEach(t7),this.nodes.forEach(n7)):this.nodes.forEach(Q2),this.clearAllSnapshots();const c=br.now();Jn.delta=zi(0,1e3/60,c-Jn.timestamp),Jn.timestamp=c,Jn.isProcessing=!0,h0.update.process(Jn),h0.preRender.process(Jn),h0.render.process(Jn),Jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,p1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(a7),this.sharedNodes.forEach(u7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ur(this.snapshot.measuredBox.x)&&!ur(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!SS(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;l&&this.instance&&(c||Qa(this.latestValues)||g)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),p7(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return wn();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(g7))){const{scroll:f}=this.root;f&&(fs(c.x,f.offset.x),fs(c.y,f.offset.y))}return c}removeElementScroll(l){const c=wn();if(Hr(c,l),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:g,options:m}=f;f!==this.root&&g&&m.layoutScroll&&(g.wasRoot&&Hr(c,l),fs(c.x,g.offset.x),fs(c.y,g.offset.y))}return c}applyTransform(l,c=!1){const d=wn();Hr(d,l);for(let f=0;f<this.path.length;f++){const g=this.path[f];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&hs(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Qa(g.latestValues)&&hs(d,g.latestValues)}return Qa(this.latestValues)&&hs(d,this.latestValues),d}removeTransform(l){const c=wn();Hr(c,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Qa(f.latestValues))continue;hp(f.latestValues)&&f.updateSnapshot();const g=wn(),m=f.measurePageBox();Hr(g,m),q2(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return Qa(this.latestValues)&&q2(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:m}=this.options;if(!(!this.layout||!(g||m))){if(this.resolvedRelativeTargetAt=Jn.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),Ul(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wn(),this.targetWithTransforms=wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wD(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Hr(this.target,this.layout.layoutBox),iS(this.target,this.targetDelta)):Hr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),Ul(this.relativeTargetOrigin,this.target,y.target),Hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hp(this.parent.latestValues)||rS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Jn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;Hr(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;Dk(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=wn());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(V2(this.prevProjectionDelta.x,this.projectionDelta.x),V2(this.prevProjectionDelta.y,this.projectionDelta.y)),Fl(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!K2(this.projectionDelta.x,this.prevProjectionDelta.x)||!K2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ps(),this.projectionDelta=ps(),this.projectionDeltaWithTransform=ps()}setAnimationOrigin(l,c=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},m=ps();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=wn(),x=d?d.source:void 0,w=this.layout?this.layout.source:void 0,_=x!==w,A=this.getStack(),E=!A||A.members.length<=1,S=!!(_&&!E&&this.options.crossfade===!0&&!this.path.some(f7));this.animationProgress=0;let T;this.mixTargetDelta=R=>{const N=R/1e3;eb(m.x,l.x,N),eb(m.y,l.y,N),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ul(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),d7(this.relativeTarget,this.relativeTargetOrigin,y,N),T&&KD(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=wn()),Hr(T,this.relativeTarget)),_&&(this.animationValues=g,$D(g,f,this.latestValues,N,S,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Sa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sn.update(()=>{Zu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bs(0)),this.currentAnimation=FD(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(JD),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:g}=l;if(!(!c||!d||!f)){if(this!==l&&this.layout&&f&&TS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||wn();const m=ur(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+m;const y=ur(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+y}Hr(c,d),hs(c,g),Fl(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new ZD),this.sharedNodes.get(l).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&E0("z",l,f,this.animationValues);for(let g=0;g<C0.length;g++)E0(`rotate${C0[g]}`,l,f,this.animationValues),E0(`skew${C0[g]}`,l,f,this.animationValues);l.render();for(const g in f)l.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Ku(c?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Ku(c?.pointerEvents)||""),this.hasProjected&&!Qa(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let m=QD(this.projectionDeltaWithTransform,this.treeScale,g);d&&(m=d(g,m)),l.transform=m;const{x:y,y:x}=this.projectionDelta;l.transformOrigin=`${y.origin*100}% ${x.origin*100}% 0`,f.animationValues?l.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const w in Yl){if(g[w]===void 0)continue;const{correct:_,applyTo:A,isCSSVariable:E}=Yl[w],S=m==="none"?g[w]:_(g[w],f);if(A){const T=A.length;for(let R=0;R<T;R++)l[A[R]]=S}else E?this.options.visualElement.renderState.vars[w]=S:l[w]=S}this.options.layoutId&&(l.pointerEvents=f===this?Ku(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(Z2),this.root.sharedNodes.clear()}}}function t7(n){n.updateLayout()}function n7(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,a=e.source!==n.layout.source;i==="size"?qr(g=>{const m=a?e.measuredBox[g]:e.layoutBox[g],y=ur(m);m.min=t[g].min,m.max=m.min+y}):TS(i,e.layoutBox,t)&&qr(g=>{const m=a?e.measuredBox[g]:e.layoutBox[g],y=ur(t[g]);m.max=m.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+y)});const l=ps();Fl(l,t,e.layoutBox);const c=ps();a?Fl(c,n.applyTransform(r,!0),e.measuredBox):Fl(c,t,e.layoutBox);const d=!SS(l);let f=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:m,layout:y}=g;if(m&&y){const x=wn();Ul(x,e.layoutBox,m.layoutBox);const w=wn();Ul(w,t,y.layoutBox),CS(x,w)||(f=!0),g.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=x,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function r7(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function i7(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function a7(n){n.clearSnapshot()}function Z2(n){n.clearMeasurements()}function Q2(n){n.isLayoutDirty=!1}function o7(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function J2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function s7(n){n.resolveTargetDelta()}function l7(n){n.calcProjection()}function c7(n){n.resetSkewAndRotation()}function u7(n){n.removeLeadSnapshot()}function eb(n,e,t){n.translate=pn(e.translate,0,t),n.scale=pn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function tb(n,e,t,r){n.min=pn(e.min,t.min,r),n.max=pn(e.max,t.max,r)}function d7(n,e,t,r){tb(n.x,e.x,t.x,r),tb(n.y,e.y,t.y,r)}function f7(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const h7={duration:.45,ease:[.4,0,.1,1]},nb=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),rb=nb("applewebkit/")&&!nb("chrome/")?Math.round:Yr;function ib(n){n.min=rb(n.min),n.max=rb(n.max)}function p7(n){ib(n.x),ib(n.y)}function TS(n,e,t){return n==="position"||n==="preserve-aspect"&&!bD(Y2(e),Y2(t),.2)}function g7(n){return n!==n.root&&n.scroll?.wasRoot}const m7=AS({attachResizeListener:(n,e)=>Kl(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),A0={current:void 0},OS=AS({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!A0.current){const n=new m7({});n.mount(window),n.setOptions({layoutScroll:!0}),A0.current=n}return A0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),y7={pan:{Feature:MD},drag:{Feature:jD,ProjectionNode:OS,MeasureLayout:bS}};function ab(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=r[i];a&&sn.postRender(()=>a(e,oc(e)))}class v7 extends Ta{mount(){const{current:e}=this.node;e&&(this.unmount=FN(e,(t,r)=>(ab(this.node,r,"Start"),i=>ab(this.node,i,"End"))))}unmount(){}}class x7 extends Ta{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rc(Kl(this.node.current,"focus",()=>this.onFocus()),Kl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ob(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=r[i];a&&sn.postRender(()=>a(e,oc(e)))}class b7 extends Ta{mount(){const{current:e}=this.node;e&&(this.unmount=HN(e,(t,r)=>(ob(this.node,r,"Start"),(i,{success:a})=>ob(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const bp=new WeakMap,T0=new WeakMap,w7=n=>{const e=bp.get(n.target);e&&e(n)},_7=n=>{n.forEach(w7)};function S7({root:n,...e}){const t=n||document;T0.has(t)||T0.set(t,{});const r=T0.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(_7,{root:n,...e})),r[i]}function C7(n,e,t){const r=S7(e);return bp.set(n,t),r.observe(n),()=>{bp.delete(n),r.unobserve(n)}}const E7={some:0,all:1};class A7 extends Ta{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:E7[i]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:m}=this.node.getProps(),y=f?g:m;y&&y(d)};return C7(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(T7(e,t))&&this.startObserver()}unmount(){}}function T7({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const O7={inView:{Feature:A7},tap:{Feature:b7},focus:{Feature:x7},hover:{Feature:v7}},R7={layout:{ProjectionNode:OS,MeasureLayout:bS}},I7={...pD,...O7,...y7,...R7},ct=Ik(I7,Hk),N7=()=>{const{status:n,loading:e,updating:t,toggleStatus:r}=Kw(),[i,a]=O.useState({show:!1,message:"",type:"success"}),l=(f,g="success")=>{a({show:!0,message:f,type:g}),setTimeout(()=>{a({show:!1,message:"",type:"success"})},3e3)},c=async()=>{try{const f=n==="open"?"closed":"open";console.log(" handleToggle - Current status:",n,"New status:",f),console.log(" is_open value should be:",f==="open"),await r(),console.log(" toggleStatus completed, showing toast"),l(`Canteen ${f==="open"?"opened":"closed"} successfully!`)}catch(f){console.error(" Toggle failed:",f),l("Failed to update canteen status. Please try again.","error")}},d=n==="open";return e?p.jsxs("div",{className:"canteen-status-toggle-loading",children:[p.jsx("div",{className:"spinner"}),p.jsx("span",{children:"Loading..."})]}):p.jsxs(p.Fragment,{children:[p.jsxs(ct.button,{onClick:c,disabled:t,className:`canteen-status-toggle ${d?"open":"closed"} ${t?"disabled":""}`,whileHover:t?{}:{scale:1.05},whileTap:t?{}:{scale:.95},transition:{duration:.2},children:[p.jsx(ct.div,{className:"icon-wrapper",animate:{rotate:d?0:180},transition:{type:"spring",stiffness:200,damping:20},children:d?p.jsx(GR,{strokeWidth:2.5}):p.jsx(Xw,{strokeWidth:2.5})}),p.jsxs("div",{className:"text-content",children:[p.jsx("span",{className:"status-label",children:"Status"}),p.jsx("span",{className:"status-text",children:d?"Open":"Closed"})]}),p.jsx(ct.div,{className:`indicator ${d?"open":"closed"}`,animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),p.jsx(Gn,{children:i.show&&p.jsx(ct.div,{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9999},initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3},children:p.jsx("div",{style:{padding:"16px 24px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",color:"white",fontSize:"14px",fontWeight:"600",background:i.type==="success"?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #ef4444, #dc2626)"},children:i.message})})})]})},k7=()=>{const[n,e]=O.useState([]),[t,r]=O.useState(!0),[i,a]=O.useState(new Set),[l,c]=O.useState({}),[d,f]=O.useState({}),[g,m]=O.useState(null),y=O.useRef({}),x=async()=>{try{r(!0);const{data:S,error:T}=await Ee.from("food_items").select("id, name, price, available_quantity, pending_deliver_count, ready_to_deliver_count");if(T)throw console.error("Food items error:",T),T;const R=(S||[]).map(k=>({...k,pendingCount:k.pending_deliver_count||0,readyCount:k.ready_to_deliver_count||0}));R.sort((k,M)=>M.readyCount!==k.readyCount?M.readyCount-k.readyCount:M.pendingCount!==k.pendingCount?M.pendingCount-k.pendingCount:k.name.localeCompare(M.name)),console.log(" Food items with counts (sorted by priority):",R.map(k=>({name:k.name,pendingCount:k.pendingCount}))),e(R);const N={};R.forEach(k=>{N[k.id]=""}),c(N)}catch(S){console.error("Error fetching food items:",S),A("Error loading food items","error")}finally{r(!1)}},w=(S,T)=>{const R=n.find(k=>k.id===S),N=parseInt(T)||0;f(k=>{const M={...k};return delete M[S],M}),T!==""&&(N<0||N>R.pendingCount)&&f(k=>({...k,[S]:`Must be between 0 and ${R.pendingCount}`})),c(k=>({...k,[S]:T}))},_=async S=>{const T=n.find(N=>N.id===S),R=parseInt(l[S])||0;if(R<=0||R>T.pendingCount){f(N=>({...N,[S]:`Must be between 1 and ${T.pendingCount}`}));return}try{a(M=>new Set([...M,S]));const{data:N,error:k}=await Ee.rpc("allocate_ready_items",{p_food_item_id:S,p_add_count:R});if(k)throw console.error(" RPC allocate_ready_items error:",k),k;c(M=>({...M,[S]:""})),await x()}catch(N){console.error(" FATAL ERROR in markOrdersReady:",N),console.error(" Error stack:",N.stack),A(`Error: ${N.message||"Failed to update orders"}`,"error")}finally{a(N=>{const k=new Set(N);return k.delete(S),k})}},A=(S,T="success")=>{m({message:S,type:T}),setTimeout(()=>m(null),3e3)};O.useEffect(()=>{x()},[]),O.useEffect(()=>{!t&&n.length>0&&y.current[0]&&y.current[0].focus()},[t,n]);const E=(S,T,R)=>{const N=Math.ceil(Math.sqrt(R));let k=T;switch(S.key){case"ArrowUp":S.preventDefault(),k=Math.max(0,T-N);break;case"ArrowDown":S.preventDefault(),k=Math.min(R-1,T+N);break;case"ArrowLeft":S.preventDefault(),k=Math.max(0,T-1);break;case"ArrowRight":S.preventDefault(),k=Math.min(R-1,T+1);break;default:return}y.current[k]&&y.current[k].focus()};return p.jsxs("div",{className:"home-dashboard",children:[p.jsx("style",{children:`
        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }
      `}),p.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"16px"},children:p.jsx("button",{onClick:x,disabled:t,className:"btn btn-primary",style:{padding:"8px",minWidth:"auto",display:"flex",alignItems:"center",justifyContent:"center",opacity:t?.6:1,cursor:t?"not-allowed":"pointer",transition:"opacity 0.2s"},title:"Refresh",children:p.jsx(IR,{className:"w-5 h-5",style:{animation:t?"spin 1s linear infinite":"none"}})})}),p.jsx("div",{className:"food-items-grid",children:n.filter(S=>S.pendingCount>0).map((S,T)=>{const N=n.filter(k=>k.pendingCount>0).length;return p.jsxs(ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.2},className:"card compact-card",children:[p.jsxs("div",{className:"card-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[p.jsx("h3",{className:"food-item-name",children:S.name}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[S.readyCount>0&&p.jsxs("span",{className:"pending-badge",style:{backgroundColor:"#22c55e"},children:[S.readyCount," ready"]}),p.jsxs("span",{className:"pending-badge",children:[S.pendingCount," pending"]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:"Orders Ready"}),p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("input",{ref:k=>{y.current[T]=k},type:"number",min:"0",max:S.pendingCount,value:l[S.id]||"",onChange:k=>w(S.id,k.target.value),onKeyDown:k=>{k.key==="Enter"&&l[S.id]&&!d[S.id]&&S.pendingCount>0?(k.preventDefault(),_(S.id)):(k.key==="ArrowUp"||k.key==="ArrowDown"||k.key==="ArrowLeft"||k.key==="ArrowRight")&&!l[S.id]&&E(k,T,N)},placeholder:"0",className:"flex-1 input",disabled:S.pendingCount===0||i.has(S.id)}),p.jsx("button",{onClick:()=>_(S.id),disabled:S.pendingCount===0||i.has(S.id)||!l[S.id]||d[S.id],className:"btn btn-success",style:{minWidth:"auto",padding:"8px"},children:i.has(S.id)?p.jsx(gi,{className:"w-4 h-4 animate-spin"}):p.jsx(lo,{className:"w-4 h-4"})})]})]}),p.jsx(Gn,{children:d[S.id]&&p.jsxs(ct.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center text-sm text-red-500",children:[p.jsx($n,{className:"w-4 h-4 mr-1"}),d[S.id]]})})]})]},S.id)})}),p.jsx(Gn,{children:g&&p.jsx(ct.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg z-50 ${g.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:p.jsxs("div",{className:"flex items-center",children:[g.type==="success"?p.jsx(lo,{className:"w-5 h-5 mr-2"}):p.jsx($n,{className:"w-5 h-5 mr-2"}),g.message]})})})]})},D7=()=>p.jsx("div",{className:"home-dashboard",children:p.jsx("div",{className:"dashboard-content",children:p.jsx(ct.div,{className:"card coming-soon-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:p.jsxs("div",{className:"coming-soon-content",children:[p.jsx(ct.div,{className:"coming-soon-icon",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:""}),p.jsx("h2",{className:"coming-soon-title",children:"Pre-Order Feature"}),p.jsx("p",{className:"coming-soon-description",children:"We're working on an exciting pre-order system that will allow you to reserve your favorite meals in advance. Stay tuned for updates!"}),p.jsx("div",{className:"coming-soon-status",children:p.jsxs("div",{className:"status-indicator",children:[p.jsx(gi,{className:"w-4 h-4 animate-spin"}),p.jsx("span",{children:"In Development"})]})}),p.jsxs("div",{className:"features-preview",children:[p.jsx("h3",{className:"features-title",children:"What to Expect:"}),p.jsxs("div",{className:"features-list",children:[p.jsxs("div",{className:"feature-item",children:[p.jsx(aR,{className:"w-5 h-5 text-primary"}),p.jsx("span",{children:"Schedule orders in advance"})]}),p.jsxs("div",{className:"feature-item",children:[p.jsx(qw,{className:"w-5 h-5 text-primary"}),p.jsx("span",{children:"Pickup time slots"})]})]})]})]})})})}),j7=({isOpen:n,onClose:e,onItemRestored:t})=>{const[r,i]=O.useState([]),[a,l]=O.useState(!1),[c,d]=O.useState(new Set),[f,g]=O.useState(null),[m,y]=O.useState(null),[x,w]=O.useState(null),_=async()=>{try{l(!0);const{data:N,error:k}=await Ee.from("food_items").select("*").eq("is_active",!1).order("name");if(k){console.error("Error fetching removed items:",k),R("Failed to load removed items","error");return}i(N||[])}catch(N){console.error("Error fetching removed items:",N),R("Failed to load removed items","error")}finally{l(!1)}},A=(N,k)=>{w({itemId:N,itemName:k})},E=async(N,k)=>{try{d(V=>new Set([...V,N])),w(null);const{error:M}=await Ee.from("food_items").update({is_active:!0}).eq("id",N);if(M){console.error("Error restoring item:",M),R(`Failed to restore ${k}`,"error");return}R(`${k} has been restored successfully!`,"success"),await _(),t&&t()}catch(M){console.error("Error restoring item:",M),R(`Failed to restore ${k}`,"error")}finally{d(M=>{const V=new Set(M);return V.delete(N),V})}},S=(N,k)=>{y({itemId:N,itemName:k})},T=async(N,k)=>{try{d(V=>new Set([...V,N])),y(null);const{error:M}=await Ee.from("food_items").delete().eq("id",N);if(M){console.error("Error permanently deleting item:",M),R(`Failed to delete ${k}`,"error");return}R(`${k} has been permanently deleted`,"success"),await _(),t&&t()}catch(M){console.error("Error permanently deleting item:",M),R(`Failed to delete ${k}`,"error")}finally{d(M=>{const V=new Set(M);return V.delete(N),V})}},R=(N,k="success")=>{g({message:N,type:k}),setTimeout(()=>g(null),3e3)};return O.useEffect(()=>{n&&_()},[n]),O.useEffect(()=>{const N=k=>{k.key==="Escape"&&e()};if(n)return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[n,e]),p.jsx(Gn,{children:n&&p.jsxs(p.Fragment,{children:[p.jsx(ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999}}),p.jsxs(ct.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:{position:"fixed",right:0,top:0,height:"100vh",width:"400px",backgroundColor:"#ffffff",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.3)",zIndex:1e3,display:"flex",flexDirection:"column",opacity:1},className:"dark:!bg-gray-800",children:[p.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:!bg-gray-900",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",backgroundColor:"#f9fafb"},children:[p.jsxs("div",{children:[p.jsx("h2",{className:"dark:!text-white",style:{fontSize:"20px",fontWeight:"600",margin:0,color:"#111827"},children:"Removed Items"}),p.jsxs("p",{className:"dark:!text-gray-300",style:{fontSize:"14px",marginTop:"4px",color:"#6b7280"},children:[r.length," item",r.length!==1?"s":""," removed"]})]}),p.jsx("button",{onClick:e,className:"hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",style:{padding:"8px",borderRadius:"8px",border:"none",cursor:"pointer",background:"transparent"},children:p.jsx(rn,{size:20,className:"dark:!text-gray-300",style:{color:"#6b7280"}})})]}),p.jsx("div",{className:"bg-white dark:!bg-gray-800",style:{flex:1,overflowY:"auto",padding:"24px",backgroundColor:"#ffffff"},children:a?p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"48px 0"},children:[p.jsx(gi,{style:{width:"32px",height:"32px",color:"#3b82f6"},className:"animate-spin"}),p.jsx("span",{className:"dark:!text-gray-300",style:{marginLeft:"12px",color:"#6b7280"},children:"Loading removed items..."})]}):r.length===0?p.jsxs("div",{style:{textAlign:"center",padding:"48px 0"},children:[p.jsx("div",{className:"dark:!text-gray-400",style:{marginBottom:"16px",color:"#9ca3af"},children:p.jsx($n,{size:48,style:{margin:"0 auto"}})}),p.jsx("h3",{className:"dark:!text-white",style:{fontSize:"18px",fontWeight:"500",marginBottom:"8px",color:"#111827"},children:"No Removed Items"}),p.jsx("p",{className:"dark:!text-gray-300",style:{color:"#6b7280"},children:"All items are currently active in your inventory."})]}):p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:r.map(N=>p.jsx(ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-gray-50 dark:!bg-gray-700 border border-gray-200 dark:border-gray-600",style:{borderRadius:"12px",padding:"16px",backgroundColor:"#f9fafb"},children:p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[p.jsxs("div",{style:{flex:1},children:[p.jsx("h4",{className:"dark:!text-white",style:{fontWeight:"500",marginBottom:"4px",color:"#111827"},children:N.name}),p.jsxs("p",{className:"dark:!text-gray-300",style:{fontSize:"14px",marginTop:"4px",color:"#6b7280"},children:["Price: ",N.price||N.cost||"N/A"]}),N.description&&p.jsx("p",{className:"dark:!text-gray-400",style:{fontSize:"12px",marginTop:"4px",color:"#9ca3af"},children:N.description})]}),p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsxs("button",{onClick:()=>A(N.id,N.name),disabled:c.has(N.id),style:{flex:1,padding:"8px 12px",backgroundColor:c.has(N.id)?"#d1d5db":"#10b981",color:"#ffffff",fontSize:"14px",borderRadius:"8px",border:"none",cursor:c.has(N.id)?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500"},onMouseEnter:k=>{c.has(N.id)||(k.currentTarget.style.backgroundColor="#059669")},onMouseLeave:k=>{c.has(N.id)||(k.currentTarget.style.backgroundColor="#10b981")},children:[c.has(N.id)?p.jsx(gi,{size:16,className:"animate-spin",style:{color:"#ffffff"}}):p.jsx(Pu,{size:16,style:{color:"#ffffff"}}),p.jsx("span",{style:{color:"#ffffff"},children:c.has(N.id)?"Restoring...":"Add Back"})]}),p.jsxs("button",{onClick:()=>S(N.id,N.name),disabled:c.has(N.id),style:{flex:1,padding:"8px 12px",backgroundColor:c.has(N.id)?"#d1d5db":"#ef4444",color:"#ffffff",fontSize:"14px",borderRadius:"8px",border:"none",cursor:c.has(N.id)?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500"},onMouseEnter:k=>{c.has(N.id)||(k.currentTarget.style.backgroundColor="#dc2626")},onMouseLeave:k=>{c.has(N.id)||(k.currentTarget.style.backgroundColor="#ef4444")},children:[p.jsx(rn,{size:16,style:{color:"#ffffff"}}),p.jsx("span",{style:{color:"#ffffff"},children:"Delete"})]})]})]})},N.id))})}),p.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-white dark:!bg-gray-800",style:{padding:"24px",backgroundColor:"#ffffff"},children:p.jsxs("button",{onClick:_,disabled:a,className:"bg-gray-100 hover:bg-gray-200 dark:!bg-gray-700 dark:hover:!bg-gray-600 dark:!text-gray-200 transition-colors",style:{width:"100%",padding:"10px 16px",borderRadius:"8px",border:"none",cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:[p.jsx(Pu,{size:16,className:`${a?"animate-spin":""} dark:!text-gray-200`,style:{color:"#374151"}}),p.jsx("span",{style:{color:"#374151"},className:"dark:!text-gray-200",children:"Refresh List"})]})})]}),p.jsx(Gn,{children:m&&p.jsxs(p.Fragment,{children:[p.jsx(ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>y(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),p.jsxs(ct.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:N=>N.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[p.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:p.jsx($n,{size:24,style:{color:"#dc2626"}})}),p.jsx("div",{children:p.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Permanently Delete Item?"})})]}),p.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["Are you sure you want to permanently delete ",p.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',m.itemName,'"']}),"? This action cannot be undone and the item will be removed from the database."]}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>y(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},className:"dark:!bg-gray-700 dark:!text-gray-200",onMouseEnter:N=>{N.target.style.backgroundColor="#e5e7eb"},onMouseLeave:N=>{N.target.style.backgroundColor="#f3f4f6"},children:"Cancel"}),p.jsxs("button",{onClick:()=>T(m.itemId,m.itemName),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#dc2626",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:N=>{N.target.style.backgroundColor="#b91c1c"},onMouseLeave:N=>{N.target.style.backgroundColor="#dc2626"},children:[p.jsx(rn,{size:16}),"Delete Permanently"]})]})]})]})}),p.jsx(Gn,{children:x&&p.jsxs(p.Fragment,{children:[p.jsx(ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>w(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),p.jsxs(ct.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:N=>N.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[p.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#d1fae5",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:p.jsx(Pu,{size:24,style:{color:"#059669"}})}),p.jsx("div",{children:p.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Restore Item?"})})]}),p.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["Are you sure you want to restore ",p.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',x.itemName,'"']})," back to the active inventory? This item will be available for ordering again."]}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>w(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},className:"dark:!bg-gray-700 dark:!text-gray-200",onMouseEnter:N=>{N.target.style.backgroundColor="#e5e7eb"},onMouseLeave:N=>{N.target.style.backgroundColor="#f3f4f6"},children:"Cancel"}),p.jsxs("button",{onClick:()=>E(x.itemId,x.itemName),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#10b981",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:N=>{N.target.style.backgroundColor="#059669"},onMouseLeave:N=>{N.target.style.backgroundColor="#10b981"},children:[p.jsx(Pu,{size:16}),"Restore Item"]})]})]})]})}),p.jsx(Gn,{children:f&&p.jsx(ct.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},style:{position:"fixed",bottom:"20px",right:"20px",padding:"16px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",zIndex:9999,backgroundColor:f.type==="success"?"#10b981":"#ef4444",color:"white"},children:p.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[f.type==="success"?p.jsx(lo,{style:{width:"20px",height:"20px",marginRight:"8px"}}):p.jsx($n,{style:{width:"20px",height:"20px",marginRight:"8px"}}),f.message]})})})]})})},sb=({value:n,onChange:e,disabled:t=!1,maxSize:r=10*1024*1024,acceptedTypes:i=["image/jpeg","image/jpg","image/png","image/gif","image/webp"],className:a=""})=>{const[l,c]=O.useState(!1),[d,f]=O.useState(""),g=O.useRef(null),m=E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?c(!0):E.type==="dragleave"&&c(!1)},y=E=>{if(E.preventDefault(),E.stopPropagation(),c(!1),t)return;const S=E.dataTransfer.files;S&&S[0]&&w(S[0])},x=E=>{if(t)return;const S=E.target.files?.[0];S&&w(S)},w=E=>{if(f(""),!i.includes(E.type)){f(`Invalid file type. Allowed types: ${i.join(", ")}`);return}if(E.size>r){f(`File too large. Maximum size is ${(r/1024/1024).toFixed(1)}MB`);return}e(E)},_=()=>{e(null),f(""),g.current&&(g.current.value="")},A=E=>{if(E===0)return"0 Bytes";const S=1024,T=["Bytes","KB","MB","GB"],R=Math.floor(Math.log(E)/Math.log(S));return parseFloat((E/Math.pow(S,R)).toFixed(2))+" "+T[R]};return p.jsxs("div",{className:`image-upload-container ${a}`,children:[p.jsx("input",{ref:g,type:"file",accept:i.join(","),onChange:x,style:{display:"none"},disabled:t}),p.jsx("div",{className:`upload-area ${l?"drag-active":""} ${t?"disabled":""}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:y,onClick:()=>!t&&g.current?.click(),children:n?p.jsxs("div",{className:"file-selected",children:[p.jsx("div",{className:"file-preview",children:p.jsx("img",{src:URL.createObjectURL(n),alt:"Preview",className:"preview-image"})}),p.jsxs("div",{className:"file-info",children:[p.jsx("div",{className:"file-name",children:n.name}),p.jsx("div",{className:"file-size",children:A(n.size)})]}),p.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),_()},className:"remove-file-btn",disabled:t,children:p.jsx(rn,{size:16})})]}):p.jsxs("div",{className:"upload-empty",children:[p.jsx("div",{className:"upload-icon",children:p.jsx(qp,{size:32})}),p.jsxs("div",{className:"upload-text",children:[p.jsx("div",{className:"upload-title",children:l?"Drop image here":"Click or drag to upload"}),p.jsxs("div",{className:"upload-subtitle",children:["Supports: JPG, PNG, GIF, WebP (max ",A(r),")"]})]}),p.jsx(UR,{size:20,className:"upload-arrow"})]})}),d&&p.jsxs(ct.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"upload-error",children:[p.jsx($n,{size:16}),p.jsx("span",{children:d})]})]})},O0="dd856fdc-905b-4de3-a7e3-771ad81df52c",RS=O.createContext(),A1=()=>{const n=O.useContext(RS);if(!n)throw new Error("useNotification must be used within a NotificationProvider");return n},M7=({children:n})=>{const[e,t]=O.useState(!0),[r,i]=O.useState(0),[a,l]=O.useState(!0),[c,d]=O.useState(0),[f,g]=O.useState(null),m=O.useRef(null),y=O.useRef(null),x=O.useRef(3e3),w=O.useRef(null),_=O.useRef(null),A=O.useRef(new Set),E=O.useCallback(M=>{w.current&&clearTimeout(w.current);const V=M.isCancellation||M.order_type==="cancelled",ie=M.isAvailabilityChange,fe=M.isError;let xe={id:Date.now(),timestamp:new Date().toISOString(),orderData:M};if(!V){if(!fe&&!ie){console.log(" Popup suppressed for new order - order appears directly in orders panel");return}fe?(xe.type="error",xe.title="Error!",xe.message=M.item_name||"An error occurred"):ie&&(xe.type="availability_change",xe.title="Item Availability Updated!",xe.message=M.item_name||"Item availability has been changed"),g(xe),w.current=setTimeout(()=>{g(null)},5e3)}},[]),S=O.useCallback(async M=>{if(console.log(" showOrderNotification called with:",M),console.log(" Current state:",{isEnabled:e,isInitialized:a,timeSinceLastNotification:Date.now()-c,cooldown:x.current}),!e){console.log(" Notifications disabled");return}const V=Date.now(),ie=V-c,fe=[M?.id,M?.order_id,M?.token_no,M?.order_token].filter(Boolean);for(const q of fe)if(A.current.has(q)){console.log(" Notification suppressed for local order:",q),A.current.delete(q);return}const xe=M.id||M.order_id||M.token_no;if(_.current===xe){console.log(" Notification skipped (duplicate order ID):",xe);return}if(ie<x.current){console.log(" Notification skipped (cooldown active):",ie,"ms <",x.current,"ms");return}console.log(" Showing order notification...",M),d(V),_.current=xe,console.log(" Showing popup notification..."),E(M)},[c,E,e,a]),T=O.useCallback(()=>{g(null),w.current&&clearTimeout(w.current)},[]);O.useEffect(()=>{if(!e||!a)return;const M=async()=>{try{const{data:V,error:ie}=await Ee.from("orders").select("id, status, user_id").in("status",["pending","PENDING"]).neq("user_id",O0).gte("created_at",new Date(Date.now()-6e4).toISOString());if(ie){console.warn(" Failed to check for new orders:",ie);return}const fe=V?.length||0;if(fe>r&&r>0){console.log(" New order detected via polling!");try{const{data:xe}=await Ee.from("orders").select("*").in("status",["pending","PENDING"]).neq("user_id",O0).order("created_at",{ascending:!1}).limit(1).single();xe?await S(xe):await S({item_name:"New Order",order_token:"N/A"})}catch(xe){console.warn(" Failed to get latest order details:",xe),await S({item_name:"New Order",order_token:"N/A"})}}i(fe)}catch(V){console.warn(" Error checking for new orders:",V)}};return m.current=setInterval(M,5e3),()=>{m.current&&clearInterval(m.current)}},[e,a,r,S]),O.useEffect(()=>{if(!(!e||!a))return y.current&&y.current.unsubscribe(),y.current=Ee.channel("orders-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},async M=>{console.log(" NotificationContext: New order inserted via real-time:",M.new),console.log(" Order details:",{status:M.new.status,user_id:M.new.user_id,item_name:M.new.item_name,created_at:M.new.created_at,id:M.new.id});const V=M.new.status==="pending"||M.new.status==="PENDING",ie=M.new.user_id!==O0;if(console.log(" Filter check:",{isPending:V,isNotAppOrder:ie,willNotify:V&&ie,statusValue:M.new.status,userIdValue:M.new.user_id}),V&&ie){console.log(" NotificationContext: Showing notification for counter order!");try{await S(M.new),console.log(" NotificationContext: Notification triggered successfully")}catch(fe){console.error(" NotificationContext: Error showing notification:",fe)}}else console.log(" NotificationContext: Notification filtered out:",{reason:V?"App order":"Not pending status",status:M.new.status,user_id:M.new.user_id})}).subscribe(),()=>{y.current&&(y.current.unsubscribe(),y.current=null)}},[e,a,S]),O.useEffect(()=>{if(!e||!a)return;const M=async V=>{console.log(" NotificationContext: Received orderInserted event from Orders Panel:",V.detail),console.log(" Event details:",{orderData:V.detail,isEnabled:e,isInitialized:a});try{const ie=V.detail;console.log(" NotificationContext: Triggering notification from Orders Panel event!"),await S(ie),console.log(" NotificationContext: Orders Panel notification triggered successfully")}catch(ie){console.warn(" NotificationContext: Error handling orderInserted event:",ie)}};return window.addEventListener("orderInserted",M),()=>{window.removeEventListener("orderInserted",M)}},[e,a,S]);const k={isEnabled:e,toggleNotifications:()=>{t(!e)},playTestSound:async()=>{console.log(" Sound notifications are disabled in this version")},isInitialized:a,popupNotification:f,closePopupNotification:T,showOrderNotification:S,suppressNotificationForOrder:M=>{if(M)try{A.current.add(M),setTimeout(()=>A.current.delete(M),6e4)}catch{}}};return p.jsx(RS.Provider,{value:k,children:n})},P7=2e3,B7=n=>{if(!n)return null;const e=String(n).trim();if(!e)return null;if(!e.includes("://"))return e;try{const r=new URL(e).searchParams,i=r.get("order_token")||r.get("token")||r.get("qr_code")||r.get("order_qr_code")||r.get("code");return i?i.trim():e}catch{return e}},L7=n=>{if(!n)return null;const e=String(n).trim();return e?e.startsWith("ORD-")?e.substring(4):e:null};function F7(){const[n,e]=O.useState(null),[t,r]=O.useState(!1),[i,a]=O.useState(""),[l,c]=O.useState(null),d=O.useRef({code:"",timestamp:0}),f=O.useCallback(async y=>{if(!y)return null;try{console.log(" Fetching order for scanned code:",y);let{data:x,error:w}=await Ee.from("orders").select("id,item_name,qr_code,order_token,created_at,status,total_amount,user_id,order_type").eq("order_token",y).limit(1).maybeSingle();if((!x||w)&&!w?.message?.includes("No rows")){console.log(" Token lookup failed, trying qr_code fallback...");const _=L7(y),A=await Ee.from("orders").select("id,item_name,qr_code,order_token,created_at,status,total_amount,user_id,order_type").eq("qr_code",_).limit(1).maybeSingle();!A.error&&A.data?(x=A.data,w=null):A.error&&!A.error?.message?.includes("No rows")&&(w=A.error)}if(w)throw console.error(" Order lookup failed:",w),w;return x?(console.log(" Matched order:",x),x):(console.log(" No order matched scanned code:",y),null)}catch(x){return console.error(" Unexpected error fetching order:",x),null}},[]),g=O.useCallback(async y=>{const x=B7(y);if(!x){console.log(" Ignoring empty scan payload"),a("Invalid barcode"),setTimeout(()=>a(""),2e3);return}const w=Date.now();if(d.current.code===x&&w-d.current.timestamp<P7){console.log(" Duplicate scan ignored:",x);return}if(d.current={code:x,timestamp:w},c(x),t||n){console.log(" Scanner busy, ignoring new input"),a("Finish current order first"),setTimeout(()=>a(""),1500);return}r(!0);const _=await f(x);_?(e(_),a(" Order located"),setTimeout(()=>a(""),2e3)):(e(null),a(" Order not found"),setTimeout(()=>a(""),2e3)),r(!1)},[f,t,n]),m=O.useCallback(()=>{e(null),a("")},[]);return{scannedOrder:n,isProcessing:t,scanMessage:i,closeModal:m,processScan:g,lastScannedCode:l}}const U7="dd856fdc-905b-4de3-a7e3-771ad81df52c",z7=n=>{const e=String(n||"").toLowerCase();return e==="pending"?"PENDING":e==="preparing"?"PREPARING":e==="ready"?"READY":e==="delivered"?"DELIVERED":e==="cancelled"?"CANCELLED":e.toUpperCase()};function V7({order:n,onClose:e}){const[t,r]=O.useState(!1),[i,a]=O.useState("");if(!n)return null;const l=()=>{a(""),e?.()},c=async g=>{if(n){r(!0),a("");try{const{error:m}=await Ee.rpc("update_order_status_flexible",{p_order_id:n.id,p_new_status:String(g).toLowerCase()});if(m)throw m;a(g==="delivered"?" Order marked as delivered":" Order cancelled"),setTimeout(()=>{l()},1e3)}catch(m){console.error("Failed to update order:",m),a(` Failed: ${m.message||"Unknown error"}`),setTimeout(()=>a(""),3e3)}finally{r(!1)}}},d=()=>c("delivered"),f=async()=>{n&&window.confirm("Are you sure you want to cancel this order?")&&await c("cancelled")};return p.jsx(Gn,{children:p.jsxs(ct.div,{initial:{opacity:0,x:40},animate:{opacity:1,x:0},exit:{opacity:0,x:40},transition:{type:"spring",stiffness:300,damping:25},style:{position:"fixed",top:16,right:16,bottom:16,width:420,backgroundColor:"#ffffff",borderRadius:16,padding:24,zIndex:1e5,overflow:"auto",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"2px solid #e5e7eb",paddingBottom:"16px",position:"sticky",top:0,background:"#ffffff",zIndex:1},children:[p.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:" Order Ready"}),p.jsx("button",{onClick:l,disabled:t,style:{background:"none",border:"none",cursor:t?"not-allowed":"pointer",padding:"4px",display:"flex",alignItems:"center",color:"#6b7280",opacity:t?.5:1},children:p.jsx(rn,{size:24})})]}),p.jsxs("div",{style:{backgroundColor:"#f9fafb",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid #e5e7eb"},children:[p.jsx("span",{style:{color:"#6b7280",fontSize:"14px",fontWeight:"500"},children:"Token Number:"}),p.jsxs("span",{style:{fontSize:"32px",fontWeight:"700",color:"#1f2937",backgroundColor:"#fff",padding:"8px 16px",borderRadius:"10px",border:"3px solid #3b82f6",letterSpacing:"2px"},children:["#",n.order_token||"N/A"]})]}),p.jsxs("div",{style:{marginBottom:"12px"},children:[p.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Items:"}),p.jsx("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:n.item_name||"Order Items"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[p.jsxs("div",{children:[p.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Total Amount:"}),p.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"18px"},children:["",n.total_amount!=null?n.total_amount:"-"]})]}),p.jsxs("div",{children:[p.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Current Status:"}),p.jsx("div",{style:{fontWeight:"600",fontSize:"16px",color:n.status==="pending"?"#f59e0b":n.status==="preparing"?"#3b82f6":n.status==="ready"?"#10b981":n.status==="delivered"?"#6b7280":"#dc2626"},children:z7(n.status)})]})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[p.jsxs("div",{children:[p.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Order Type:"}),p.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"14px"},children:n.order_type?" Takeaway":" Dine In"})]}),p.jsxs("div",{children:[p.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Placed Via:"}),p.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"14px"},children:n.user_id===U7?" App":" Counter"})]})]})]}),i&&p.jsx("div",{style:{marginBottom:"16px",padding:"12px",borderRadius:"8px",backgroundColor:i.includes("")?"#d1fae5":"#fee2e2",color:i.includes("")?"#065f46":"#991b1b",fontSize:"14px",fontWeight:"500",textAlign:"center"},children:i}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[n.status!=="delivered"&&n.status!=="cancelled"&&p.jsxs("button",{onClick:d,disabled:t,style:{width:"100%",padding:"16px 20px",fontSize:"16px",fontWeight:"600",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"10px",cursor:t?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",opacity:t?.6:1},onMouseEnter:g=>{t||(g.currentTarget.style.backgroundColor="#059669")},onMouseLeave:g=>{t||(g.currentTarget.style.backgroundColor="#10b981")},children:[t?p.jsx(gi,{size:18,className:"spin"}):p.jsx(lo,{size:18}),t?"Updating...":"Mark as Delivered"]}),n.status==="delivered"&&p.jsx("div",{style:{padding:"16px",backgroundColor:"#d1fae5",color:"#065f46",borderRadius:"10px",textAlign:"center",fontWeight:"600"},children:" This order has already been delivered"}),p.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.status!=="delivered"&&n.status!=="cancelled"&&p.jsx("button",{onClick:f,disabled:t,title:"Cancel order","aria-label":"Cancel order",style:{width:40,height:40,padding:0,backgroundColor:"#ffffff",color:"#dc2626",border:"1px solid #dc2626",borderRadius:"8px",cursor:t?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",opacity:t?.6:1},onMouseEnter:g=>{t||(g.currentTarget.style.backgroundColor="#fef2f2")},onMouseLeave:g=>{t||(g.currentTarget.style.backgroundColor="#ffffff")},children:p.jsx(rn,{size:16})}),p.jsx("button",{onClick:l,disabled:t,style:{flex:1,padding:"12px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:t?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:t?.6:1},onMouseEnter:g=>{t||(g.currentTarget.style.backgroundColor="#e5e7eb")},onMouseLeave:g=>{t||(g.currentTarget.style.backgroundColor="#f3f4f6")},children:"Close"})]})]}),p.jsx("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:p.jsxs("details",{style:{cursor:"pointer"},children:[p.jsx("summary",{style:{fontSize:"12px",color:"#6b7280",userSelect:"none"},children:"Order Identifier"}),p.jsx("code",{style:{fontSize:"11px",backgroundColor:"#f3f4f6",padding:"6px 10px",borderRadius:"4px",display:"block",marginTop:"8px",wordBreak:"break-all",color:"#374151",fontFamily:"monospace"},children:n.order_token||n.qr_code||"Not available"})]})})]})})}const H7=120,$7=500;function q7({onScan:n,isEnabled:e=!1}){const t=O.useRef(""),r=O.useRef(null),i=O.useRef(0);return O.useEffect(()=>{if(!e)return;const a=()=>{t.current=""},l=c=>{if(!e)return;const d=c.target;if(d&&(d.tagName==="INPUT"||d.tagName==="TEXTAREA"||d.isContentEditable))return;if(c.altKey||c.ctrlKey||c.metaKey){a();return}const f=Date.now(),g=f-(i.current||0);if(i.current=f,g>H7&&a(),c.key==="Enter"){const m=t.current.trim();if(a(),!m)return;console.log(" Barcode scanned:",m),n?.(m),c.preventDefault();return}c.key.length===1&&(t.current+=c.key,r.current&&clearTimeout(r.current),r.current=setTimeout(a,$7))};return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l),r.current&&(clearTimeout(r.current),r.current=null),a()}},[e,n]),null}const IS=O.createContext({}),zu="biyyanisuhas@gmail.com",T1=()=>{const n=O.useContext(IS);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},G7=({children:n})=>{const[e,t]=O.useState(null),[r,i]=O.useState(!0);O.useEffect(()=>{(async()=>{try{const{data:{session:g}}=await Ee.auth.getSession(),m=g?.user?.email?String(g.user.email).toLowerCase():null;if(m&&m!==zu){try{await Ee.auth.signOut()}catch{}t(null)}else t(g?.user??null)}catch(g){console.error("Error getting session:",g)}finally{i(!1)}})();const{data:{subscription:f}}=Ee.auth.onAuthStateChange(async(g,m)=>{const y=m?.user?.email?String(m.user.email).toLowerCase():null;if(y&&y!==zu){try{await Ee.auth.signOut()}catch{}t(null)}else t(m?.user??null);i(!1)});return()=>f.unsubscribe()},[]);const a=async(d,f)=>{try{const g=String(d||"").toLowerCase().trim();if(g!==zu)return{data:null,error:new Error("Access restricted: only administrators may sign in")};const{data:m,error:y}=await Ee.auth.signInWithPassword({email:g,password:f});if(y)throw y;return{data:m,error:null}}catch(g){return{data:null,error:g}}},l=async()=>{try{const{error:d}=await Ee.auth.signOut();if(d)throw d}catch(d){console.error("Error signing out:",d)}},c={user:e,loading:r,isAdmin:!!(e?.email&&String(e.email).toLowerCase()===zu),signIn:a,signOut:l};return p.jsx(IS.Provider,{value:c,children:n})},W7=()=>{const[n,e]=O.useState(""),[t,r]=O.useState(""),[i,a]=O.useState(!1),[l,c]=O.useState(""),[d,f]=O.useState(!1),{signIn:g}=T1(),[m,y]=O.useState(()=>localStorage.getItem("theme")||"light");O.useEffect(()=>{document.documentElement.setAttribute("data-theme",m),document.documentElement.classList.toggle("dark",m==="dark"),localStorage.setItem("theme",m)},[m]);const x=()=>{y(_=>_==="light"?"dark":"light")},w=async _=>{_.preventDefault(),c(""),f(!0);try{const{data:A,error:E}=await g(n,t);E&&c(E.message)}catch{c("An unexpected error occurred")}finally{f(!1)}};return p.jsxs("div",{className:"login-container",children:[p.jsx(ct.button,{onClick:x,className:"login-theme-toggle",title:`Switch to ${m==="light"?"dark":"light"} mode`,whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:p.jsx(ct.div,{animate:{rotate:m==="dark"?180:0,scale:m==="dark"?1.1:1},transition:{duration:.3,ease:"easeInOut"},children:m==="dark"?p.jsx($w,{size:20}):p.jsx(Gw,{size:20})})}),p.jsxs("div",{className:"login-card",children:[p.jsxs("div",{className:"login-header",children:[p.jsx("div",{className:"login-icon",children:p.jsx(Wx,{size:32})}),p.jsx("h1",{children:"Welcome Back"}),p.jsx("p",{children:"Please sign in to access the canteen management system"})]}),p.jsxs("form",{onSubmit:w,className:"login-form",children:[l&&p.jsxs("div",{className:"error-message",children:[p.jsx($n,{size:16}),p.jsx("span",{children:l})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",children:"Email Address"}),p.jsxs("div",{className:"input-wrapper",children:[p.jsx(Wx,{size:20,className:"input-icon"}),p.jsx("input",{id:"email",type:"email",value:n,onChange:_=>e(_.target.value),placeholder:"Enter your email",required:!0,disabled:d})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"password",children:"Password"}),p.jsxs("div",{className:"input-wrapper",children:[p.jsx(bR,{size:20,className:"input-icon"}),p.jsx("input",{id:"password",type:i?"text":"password",value:t,onChange:_=>r(_.target.value),placeholder:"Enter your password",required:!0,disabled:d}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>a(!i),disabled:d,children:i?p.jsx(sR,{size:20}):p.jsx(cR,{size:20})})]})]}),p.jsx("button",{type:"submit",className:"login-button",disabled:d||!n||!t,children:d?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"spinner"}),"Signing In..."]}):"Sign In"})]}),p.jsx("div",{className:"login-footer",children:p.jsx("p",{children:"Contact your administrator for account access"})})]})]})},md={BASE_URL:"/IARE-Canteen-Web/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE:"/IARE-Canteen-Web/",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY",VITE_SUPABASE_URL:"https://znqhoohjugyblgwepovp.supabase.co"},nn=n=>String(n||"").toUpperCase(),yd="dd856fdc-905b-4de3-a7e3-771ad81df52c",wp="1e47a19b-baf5-4dd7-86b5-c02243c00d58",Qu=n=>n===wp,X7=async()=>{try{const{data:{session:n}}=await Ee.auth.getSession();if(n)return n;const e=md?.VITE_COUNTER_EMAIL,t=md?.VITE_COUNTER_PASSWORD;if(e&&t){const{data:r,error:i}=await Ee.auth.signInWithPassword({email:e,password:t});if(i)throw i;return r.session}return null}catch{return null}};let ma=null;const NS=async()=>{if(ma)return ma;const{data:{session:n}}=await Ee.auth.getSession();if(n?.user?.id){const e=md?.VITE_COUNTER_EMAIL;return e&&n.user.email===e?(ma=wp,ma):(ma=n.user.id,ma)}return await X7(),ma=wp,ma};let _n=null;function Y7(){return p.jsx(K7,{children:p.jsx(G7,{children:p.jsx(KR,{children:p.jsx(M7,{children:p.jsx(Z7,{})})})})})}class K7 extends ub.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Unhandled error in App:",e,t)}render(){return this.state.hasError?p.jsxs("div",{style:{padding:24},children:[p.jsx("h2",{children:"Application error"}),p.jsx("pre",{style:{whiteSpace:"pre-wrap",color:"crimson"},children:String(this.state.error)})]}):this.props.children}}function Z7(){const n=Ea();xd();const[e,t]=O.useState("checking"),{showOrderNotification:r}=A1(),{user:i,loading:a,signOut:l}=T1(),[c,d]=O.useState([]),[f,g]=O.useState(!1),[m,y]=O.useState("dine_in");O.useEffect(()=>{const X=setTimeout(()=>{e==="checking"&&(console.log(" Fallback timer: showing main content"),t("connected"))},15e3);return()=>clearTimeout(X)},[e]);const{scannedOrder:x,scanMessage:w,closeModal:_,processScan:A,lastScannedCode:E,isProcessing:S}=F7(),T=O.useRef(null);O.useEffect(()=>{const X=oe=>{const Be=T.current;!Be||!Be.hasAttribute("open")||Be.contains(oe.target)||Be.removeAttribute("open")};return document.addEventListener("mousedown",X),document.addEventListener("touchstart",X,{passive:!0}),()=>{document.removeEventListener("mousedown",X),document.removeEventListener("touchstart",X)}},[]);const[R,N]=O.useState(()=>localStorage.getItem("theme")||"light"),[k,M]=O.useState(()=>{const X=localStorage.getItem("sidebarExpanded");return X!==null?JSON.parse(X):!0});O.useEffect(()=>{document.documentElement.setAttribute("data-theme",R),document.documentElement.classList.toggle("dark",R==="dark"),localStorage.setItem("theme",R)},[R]),O.useEffect(()=>{localStorage.setItem("sidebarExpanded",JSON.stringify(k))},[k]),O.useEffect(()=>{NS().catch(()=>{})},[]);const V=X=>{try{console.log(" Printing barcode receipt with data:",X),ie(X)}catch(oe){console.error("Failed to print barcode receipt",oe)}},ie=X=>{console.log(" Generating barcode receipt with data:",X),console.log(" QR Code for barcode:",X.qrCode),console.log(" Token for barcode:",X.token);const oe=X.items||[{name:X.itemName,quantity:X.quantity||1,price:X.pricePerUnit||X.totalAmount,total:X.totalAmount}];console.log(" Print Receipt Data:",{items:oe,token:X.token,qrCode:X.qrCode});const Be=oe.reduce((Fe,j)=>Fe+(j.total||j.price*j.quantity),0);oe.map(Fe=>`
        <div style="display: flex; justify-content: space-between; margin: 5px 0; font-size: 11px; padding: 3px 0; border-bottom: 1px dashed #ccc;">
          <div style="flex: 1;">
            <span style="font-weight: bold;">${Fe.name}</span>
            ${Fe.quantity>1?`<span style="color: #666;">  ${Fe.quantity}</span>`:""}
          </div>
          <span style="font-weight: bold;">${Fe.total||Fe.price*Fe.quantity}</span>
        </div>
      `).join("");const Ne=new Date,je=Ne.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),_e=Ne.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}),Re=`
        <div class="receipt" style="
          width: 80mm;
          min-height: 297mm;
          font-family: 'Arial', sans-serif;
          padding: 6mm 3mm 6mm 5mm;
          background: white;
          margin: 0;
          box-sizing: border-box;
        ">
          <div class="header" style="
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
          ">
            <h1 style="font-size: 24px; font-weight: bold; margin: 0 0 2px 0; letter-spacing: 1px; color: #000;">IARE College Canteen</h1>
            <p style="font-size: 12px; margin: 0; color: #000;">DUNDIGAL</p>
          </div>
          
          <div class="order-info" style="margin: 6px 0; font-size: 11px; padding-bottom: 6px; border-bottom: 1px solid #333;">
            <div style="display: flex; justify-content: space-between;">
              <span>${je}</span>
              <span>${_e}</span>
            </div>
            <div style="margin-top: 4px;">Order Type : ${X.orderType&&X.orderType.includes("takeaway")?"Takeaway":"Dine-in"}</div>
          </div>
          
          <div class="item-details" style="margin: 12px 0;">
            <div style="font-weight: bold; font-size: 12px; margin-bottom: 8px;">Item Details</div>
            ${oe.map((Fe,j)=>{const U=Number(Fe.price||0),G=Number(Fe.quantity||1),ne=Number(Fe.total||U*G);return`
                <div style="margin: 6px 0 10px 0;">
                  <div style="display: flex; font-size: 13px; align-items: center; gap: 8px;">
                    <div style="flex: 1; min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                      <span style="font-weight: 600;">${j+1}.</span>
                      <span style="margin-left: 6px; font-weight: 700;">${Fe.name||""}</span>
                    </div>
                    <div style="margin-left: auto; white-space: nowrap; font-weight: 800; flex: 0 0 auto;">#${Fe.token||X.token||""}  Qty: ${G}</div>
                  </div>
                  <div style="display: flex; justify-content: flex-end; font-size: 11px; margin-top: 2px;">
                    <div style="white-space: nowrap;">${U.toFixed(2)}  ${G} = <strong>${ne.toFixed(2)}</strong></div>
                  </div>
                  <div id="barcode-${j}" style="margin: 6px auto 0; display: block; width: 100%; height: 56px;"></div>
                  <div style="height: 1px; background: #ddd; margin: 8px 0 4px 0;"></div>
                </div>
              `}).join("")}
          </div>
          
          <div style="margin-top: 15px;">
            <div style="border-top: 1px solid #333;"></div>
            <div style="display: flex; justify-content: space-between; font-size: 13px; font-weight: bold; margin-top: 8px;">
              <span>Total</span>
              <span>${Be.toFixed(2)}</span>
            </div>
          </div>
          
          <div class="barcode-section" style="text-align: center; margin-top: 4px;">
            <p style="margin: 2px 0; font-size: 10px; color: #666;">Scan to collect your order</p>
            <div id="barcode" style="margin: 6px auto 0; display: block; width: 100%; height: 56px;"></div>
            <p style="margin: 2px 0; font-weight: bold; font-size: 10px;">Thanks for choosing us today!</p>
          </div>
          
          <div class="footer" style="
            text-align: center;
            margin-top: 25px;
            font-size: 10px;
            color: #666;
          ">
            <p style="margin: 5px 0; font-weight: bold;">Thanks for choosing us today!</p>
            <p style="margin: 3px 0; color: #999;">Powered by CustomBridge Technologies</p>
          </div>
        </div>
      `,ke=document.createElement("div");ke.id="print-receipt",ke.style.position="absolute",ke.style.left="-9999px",ke.style.top="-9999px",ke.style.width="80mm",ke.style.height="297mm",ke.innerHTML=Re;const Ue=document.getElementById("print-styles");Ue&&Ue.remove();const it=document.createElement("style");it.id="print-styles",it.textContent=`
        /* Ensure only the receipt prints and the rest of the app is hidden */
        @media print {
          body { margin: 0 !important; padding: 0 !important; }
          /* Improve printed color fidelity */
          * {
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          /* Hide everything by default */
          body * { visibility: hidden !important; }
          /* Only show the receipt and ensure barcodes are visible */
          #print-receipt, #print-receipt * { 
            visibility: visible !important; 
          }
          /* Preserve table layout for proper alignment */
          #print-receipt table {
            display: table !important;
            table-layout: fixed !important;
            width: 100% !important;
          }
          #print-receipt tr {
            display: table-row !important;
          }
          #print-receipt td {
            display: table-cell !important;
            vertical-align: top !important;
          }
          /* Prevent text wrapping in total amount */
          #print-receipt td:last-child {
            white-space: nowrap !important;
            word-wrap: normal !important;
            overflow-wrap: normal !important;
          }
          /* Ensure SVG barcodes are visible */
          #print-receipt svg, #print-receipt svg * {
            visibility: visible !important;
            display: block !important;
          }
          /* Place the receipt at the top-left and set exact width */
          #print-receipt {
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: 80mm !important;
            min-height: auto !important;
            background: white !important;
            padding: 0 !important;
            margin: 0 !important;
          }
          body {
            margin: 0 !important;
            padding: 0 !important;
          }
        }
        /* Set paper size to thermal roll width */
        @page {
          size: 80mm auto;
          margin: 0;
        }
        /* Lock scaling for Chrome print dialog */
        @media print {
          html, body {
            width: 80mm;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
        }
      `,document.head.appendChild(it),document.body.appendChild(ke),setTimeout(()=>{try{if(console.log(" Generating barcodes in hidden div"),console.log(" Checking JsBarcode availability..."),console.log(" window.JsBarcode:",typeof window.JsBarcode),console.log(" window.JsBarcode available:",!!window.JsBarcode),typeof window.JsBarcode>"u"){console.log(" JsBarcode not loaded yet, waiting..."),setTimeout(()=>{if(console.log(" Re-checking JsBarcode after delay..."),console.log(" window.JsBarcode:",typeof window.JsBarcode),console.log(" window.JsBarcode available:",!!window.JsBarcode),typeof window.JsBarcode>"u"){console.error(" JsBarcode still not loaded after delay"),alert("Barcode library failed to load. Please refresh the page and try again.");return}fe(ke,X,oe)},1e3);return}fe(ke,X,oe)}catch(Fe){console.error(" Barcode generation failed:",Fe),ke.parentNode&&ke.parentNode.removeChild(ke)}},500)},fe=(X,oe,Be)=>{try{if(oe.isCombinedReceipt&&Be&&Be.length>1)console.log(" Generating individual barcodes for",Be.length,"items"),Be.forEach((Ne,je)=>{console.log(` Looking for barcode element #barcode-${je}...`);const _e=X.querySelector(`#barcode-${je}`);if(console.log(` Barcode element #barcode-${je} found:`,!!_e),_e)try{const Re=Ne.qrCode||oe.qrCode;if(console.log(` Generating barcode for item ${je+1} with QR code:`,Re),!Re||Re.length<8)throw console.error(` Invalid QR code for item ${je+1}:`,Re),new Error(`Invalid QR code: ${Re}`);if(console.log(" Checking JsBarcode availability for item barcode..."),console.log(" window.JsBarcode:",typeof window.JsBarcode),console.log(" window.JsBarcode available:",!!window.JsBarcode),typeof window.JsBarcode>"u")throw console.error(" JsBarcode library not loaded for item barcode"),new Error("JsBarcode library not loaded");const ke=document.createElement("canvas");window.JsBarcode(ke,Re,{format:"CODE128",width:1.8,height:56,displayValue:!1,margin:4,lineColor:"#000000",background:"#ffffff"});const Ue=document.createElement("img");Ue.src=ke.toDataURL("image/png"),Ue.style.display="block",Ue.style.margin="0 auto",Ue.style.maxWidth="100%",_e.replaceWith(Ue),console.log(` Barcode ${je+1} generated as image for ${Ne.name}`)}catch(Re){console.error(` Barcode generation failed for item ${je+1}:`,Re),_e.innerHTML=`<text x="50%" y="50%" text-anchor="middle" dy=".3em" font-family="Arial" font-size="10" fill="black">Token: ${Ne.token}</text>`}else console.error(` Barcode element not found for item ${je+1}`)});else{console.log(" Looking for single barcode element...");const Ne=X.querySelector("#barcode");if(console.log(" Barcode element found:",!!Ne),console.log(" Barcode element:",Ne),Ne)try{if(console.log(" Generating single barcode with QR code:",oe.qrCode),console.log(" Barcode element found:",Ne),!oe.qrCode||oe.qrCode.length<8)throw new Error(`Invalid QR code: ${oe.qrCode}`);if(console.log(" Checking JsBarcode availability..."),console.log(" window.JsBarcode:",typeof window.JsBarcode),console.log(" window.JsBarcode available:",!!window.JsBarcode),typeof window.JsBarcode>"u")throw console.error(" JsBarcode library not loaded"),new Error("JsBarcode library not loaded");const je=document.createElement("canvas");window.JsBarcode(je,oe.qrCode,{format:"CODE128",width:1.8,height:56,displayValue:!1,margin:4,lineColor:"#000000",background:"#ffffff"});const _e=document.createElement("img");_e.src=je.toDataURL("image/png"),_e.style.display="block",_e.style.margin="0 auto",_e.style.maxWidth="100%",Ne.replaceWith(_e),console.log(" Single barcode generated successfully as image")}catch(je){console.error(" Single barcode generation failed:",je),console.log(" QR Code data:",oe.qrCode),console.log(" JsBarcode available:",typeof window.JsBarcode),Ne.innerHTML=`<div style="text-align: center; padding: 20px; border: 1px dashed #ccc; font-family: Arial; font-size: 12px; color: #666;">Barcode Error: ${je.message}<br/>QR: ${oe.qrCode||"N/A"}</div>`}else console.error(" Barcode element not found for single receipt")}setTimeout(()=>{try{console.log(" Opening print dialog in current window..."),X.style.position="absolute",X.style.top="0",X.style.left="-10000px",X.style.zIndex="-1",X.style.backgroundColor="white",X.style.display="block",setTimeout(()=>{try{window.print(),console.log(" Print dialog opened in current window"),setTimeout(()=>{X.parentNode&&X.parentNode.removeChild(X);const Ne=document.getElementById("print-styles");Ne&&Ne.remove()},1e3)}catch(Ne){console.error(" Print failed:",Ne),X.parentNode&&X.parentNode.removeChild(X);const je=document.getElementById("print-styles");je&&je.remove(),alert(`Print failed! Please try manually:
1. Right-click and select "Print"
2. Or use Ctrl+P`)}},500)}catch(Ne){console.error(" Print setup failed:",Ne),X.parentNode&&X.parentNode.removeChild(X);const je=document.getElementById("print-styles");je&&je.remove(),alert(`Print setup failed: ${Ne.message}

Please try manually:
1. Right-click and select "Print"
2. Or use Ctrl+P`)}},1e3)}catch(Ne){console.error(" Error in generateBarcodes:",Ne),X.parentNode&&X.parentNode.removeChild(X);const je=document.getElementById("print-styles");je&&je.remove(),alert("Error generating barcodes! Please try printing manually.")}},q=["/","/orders","/place-order","/manage-orders"].includes(n.pathname),Te={"/":"Dashboard","/place-order":"Place Order","/orders":"Orders","/inventory":"Inventory Management","/manage-orders":"Manage Orders","/pre-order":"Pre-Order","/scan":"Scan Orders","/ai":"AI Predictions","/settings":"Settings"}[n.pathname]||"Dashboard",[ae,L]=O.useState("live"),[te,ce]=O.useState(!1),[Z,pe]=O.useState([]),[B,H]=O.useState([]),[se,Se]=O.useState([]),[De,Me]=O.useState([]),[Ye,ut]=O.useState({}),[$,Oe]=O.useState(null),[Ce,$e]=O.useState([]),Ie=async(X,oe)=>{const Be=[...B];H(Ne=>Ne.map(_e=>_e.id===X?{..._e,status:oe}:_e).sort((_e,Re)=>new Date(_e.created_at)-new Date(Re.created_at))),ut(Ne=>({...Ne,[X]:!0}));try{const{data:Ne,error:je}=await Ee.rpc("update_order_status_flexible",{p_order_id:X,p_new_status:String(oe).toLowerCase()});if(je)throw je;const _e=Be.find(Ue=>Ue.id===X)||B.find(Ue=>Ue.id===X);if(!_e)return;const Re=_e.status,ke=new Date().toLocaleString();if(oe==="READY"){H(Ue=>Ue.map(Fe=>Fe.id===X?{...Fe,status:"READY"}:Fe).sort((Fe,j)=>new Date(Fe.created_at)-new Date(j.created_at))),pe(Ue=>{const it=Ue.filter(Fe=>!(Fe.orderId===X&&Fe.to==="PREPARING"));return[{orderId:X,itemName:_e.item_name,from:Re,to:"READY",ts:Date.now()},...it]}),Me(Ue=>[{orderId:X,itemName:_e.item_name,from:Re,to:"READY",at:ke,ts:Date.now(),prevLoc:"live",nextLoc:"live"},...Ue.filter(it=>!(it.orderId===X&&it.to==="PREPARING"))]);return}if(oe==="DELIVERED"){H(Ue=>Ue.filter(it=>it.id!==X)),Se(Ue=>[{..._e,status:"DELIVERED",deliveredAt:Date.now()},...Ue]),pe(Ue=>{const it=Ue.filter(Fe=>!(Fe.orderId===X&&Fe.to==="PREPARING"));return[{orderId:X,itemName:_e.item_name,from:Re,to:"DELIVERED",ts:Date.now()},...it]}),Me(Ue=>[{orderId:X,itemName:_e.item_name,from:Re,to:"DELIVERED",at:ke,ts:Date.now(),prevLoc:"live",nextLoc:"delivered"},...Ue.filter(it=>!(it.orderId===X&&it.to==="PREPARING"))]),console.log(" Order marked as delivered - stock was already reduced on order placement");return}H(Ue=>Ue.map(Fe=>Fe.id===X?{...Fe,status:oe}:Fe).sort((Fe,j)=>new Date(Fe.created_at)-new Date(j.created_at))),pe(Ue=>[{orderId:X,itemName:_e.item_name,from:Re,to:oe,ts:Date.now()},...Ue]),Me(Ue=>[{orderId:X,itemName:_e.item_name,from:Re,to:oe,at:ke,ts:Date.now(),prevLoc:"live",nextLoc:"live"},...Ue])}catch(Ne){console.error("Failed to update order status:",Ne);try{H(Be)}catch{}alert("Failed to update order status: "+(Ne.message||Ne))}finally{ut(Ne=>{const je={...Ne};return delete je[X],je})}},Ge=async X=>{const oe=B.find(Be=>Be.id===X);oe&&Oe({orderId:X,itemName:oe.item_name})};O.useEffect(()=>{const X=$?.orderId;if(!X){$e([]);return}const oe=B.find(Be=>Be.id===X);$e(oe?[{quantity:oe.quantity??1,food_items:{name:oe.item_name}}]:[])},[$?.orderId,B]),O.useEffect(()=>{if(!$)return;const X=oe=>{if(oe.key==="Escape")oe.preventDefault(),Oe(null);else if(oe.key==="Enter"&&document.activeElement.tagName!=="INPUT"&&document.activeElement.tagName!=="TEXTAREA"){oe.preventDefault();const Be=$.orderId;Oe(null),$e([]),(async()=>{try{const{data:je,error:_e}=await Ee.from("orders").select("item_name, status, id").eq("id",Be).single();if(_e){alert(`Failed to fetch order details: ${_e.message}`);return}if(nn(je.status)==="DELIVERED"){alert('Cannot cancel delivered orders. Use "Revert" instead.');return}const{error:ke}=await Ee.from("orders").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",Be);if(ke){alert(`Failed to cancel order: ${ke.message}`);return}if(je.item_name){const{data:Ue}=await Ee.from("food_items").select("available_quantity").eq("name",je.item_name).single();Ue&&await Ee.from("food_items").update({available_quantity:Ue.available_quantity+1,is_available:!0,updated_at:new Date().toISOString()}).eq("name",je.item_name)}}catch(je){console.error("Failed to cancel order:",je)}})()}};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[$]);const Pe=async X=>{Oe(null),$e([]);try{console.log(" Starting order cancellation for ID:",X);const{data:oe,error:Be}=await Ee.from("orders").select("item_name, status, id").eq("id",X).single();if(Be){console.error(" Could not fetch order details:",Be),alert(`Failed to fetch order details: ${Be.message}`);return}if(console.log(" Order data retrieved:",oe),nn(oe.status)==="DELIVERED"){alert('Cannot cancel delivered orders. Use "Revert" instead.');return}const{error:je}=await Ee.from("orders").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",X);if(je){console.error(" Failed to update order status:",je),alert(`Failed to cancel order: ${je.message}`);return}if(console.log(" Order status updated to CANCELLED"),oe.item_name){console.log(" Order canceled, restoring stock for:",oe.item_name);try{const{data:_e,error:Re}=await Ee.from("food_items").select("available_quantity").eq("name",oe.item_name).single();if(Re)console.error(" Could not fetch current stock for restore:",Re),console.warn(" Order canceled but stock not restored. Please update manually.");else{const ke=_e.available_quantity+1,{error:Ue}=await Ee.from("food_items").update({available_quantity:ke,is_available:!0,updated_at:new Date().toISOString()}).eq("name",oe.item_name);Ue?(console.error(" Failed to restore stock on cancel:",Ue),console.warn(" Order canceled but stock not restored. Please update manually.")):(console.log(" Stock restored on cancel (marked as available)"),_n&&_n())}}catch(_e){console.error(" Stock restoration error:",_e)}}H(_e=>_e.filter(Re=>Re.id!==X));try{await r({item_name:oe.item_name||"Order",order_token:"CANCELLED",total_amount:0,order_type:"cancelled",user_id:yd,isCancellation:!0})}catch(_e){console.warn(" Failed to show notification:",_e)}console.log(" Order cancellation completed successfully")}catch(oe){console.error(" Error canceling order:",oe),alert(`Failed to cancel order: ${oe.message||"Unknown error"}`)}},nt=async X=>{console.log(" fetchOrders called");try{const oe="https://znqhoohjugyblgwepovp.supabase.co",Be="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY";t("connecting");const Ne=1e3;let je=0,_e=[];for(;;){const Fe=je+Ne-1,{data:j,error:U}=await Ee.from("orders").select("*").order("created_at",{ascending:!0}).range(je,Fe);if(U)throw U;const G=j||[];if(console.log("Fetched batch:",G.length,"orders"),_e=_e.concat(G),G.length<Ne)break;je+=Ne}try{const Fe=Array.from(new Set((_e||[]).map(j=>j.item_id||j.itemId||j.item||j.food_item_id).filter(Boolean)));if(Fe.length>0){const j=Object.create(null),{data:U,error:G}=await Ee.from("food_items").select("*").in("id",Fe);if(!G){for(const ne of U||[]){const ve=ne.id||ne.item_id||ne.code||ne.slug,ge=ne.price??ne.cost??ne.rate??ne.amount;ve&&typeof ge=="number"&&(j[ve]=ge)}_e=_e.map(ne=>{const ve=ne.item_id||ne.itemId||ne.item||ne.food_item_id,ge=ve!=null?j[ve]:void 0;return ge!=null&&(ne.total_amount==null||Number.isNaN(ne.total_amount))?{...ne,total_amount:ge}:ne})}}}catch(Fe){console.warn("Price merge skipped:",Fe?.message||Fe)}const Re=(_e||[]).filter(Fe=>{const j=nn(Fe.status);return j!=="DELIVERED"&&j!=="CANCELLED"}),Ue=(_e||[]).filter(Fe=>{const j=nn(Fe.status);return j==="DELIVERED"||j==="CANCELLED"}).sort((Fe,j)=>new Date(j.created_at)-new Date(Fe.created_at)),it=Re.sort((Fe,j)=>new Date(j.created_at)-new Date(Fe.created_at));console.log("Total orders fetched:",_e.length),console.log("Live orders:",it.length),console.log("Past orders:",Ue.length),console.log("Sample order:",_e[0]),H(it),Se(Ue),t("connected"),X&&clearTimeout(X)}catch(oe){console.error("Supabase orders fetch failed:",oe),t("error"),oe.message?.includes("JWT")?console.error("Authentication error - check your Supabase anon key"):oe.message?.includes('relation "orders" does not exist')&&console.error("Orders table does not exist - run the SQL script in Supabase")}};O.useEffect(()=>{console.log(" DashboardShell useEffect triggered");const X=setTimeout(()=>{e==="checking"&&(console.log(" Connection timeout, proceeding anyway"),t("connected"))},1e4);nt(X);let oe=setInterval(()=>nt(void 0),1e3),Be=!1;const Ne=Ee.channel("public:orders").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},async je=>{console.log(" Orders Panel: New order received via real-time:",je.new),Be||(Be=!0,oe&&(clearInterval(oe),oe=null));let _e=je.new;try{const Re=_e&&_e.total_amount!=null&&!Number.isNaN(Number(_e.total_amount));if(_e&&!Re){const ke=_e.item_id||_e.itemId||_e.item||_e.food_item_id;if(ke!=null){const{data:Ue,error:it}=await Ee.from("food_items").select("*").or(`id.eq.${ke},item_id.eq.${ke}`);if(!it){const Fe=(Ue||[])[0],j=Fe!=null?Fe.price??Fe.cost??Fe.rate??Fe.amount??null:null;typeof j=="number"&&(_e={..._e,total_amount:j})}}}}catch{}H(Re=>[_e,...Re].sort((Ue,it)=>new Date(it.created_at)-new Date(Ue.created_at)));try{console.log(" Orders Panel: Checking if notification should be triggered for order:",_e);const Re=_e.status==="preparing"||_e.status==="PREPARING",ke=_e.user_id!==yd;console.log(" Orders Panel: Filter check:",{status:_e.status,user_id:_e.user_id,isPreparing:Re,isNotAppOrder:ke,willNotify:Re&&ke}),console.log(" Orders Panel: New order added directly to list (popup disabled)")}catch(Re){console.warn(" Orders Panel: Error triggering notification:",Re)}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},async je=>{Be||(Be=!0,oe&&(clearInterval(oe),oe=null));let _e=je.new;try{H(Re=>{const ke=Re.find(j=>j.id===je.new.id),Ue=ke&&(ke.order_token||ke.token_no);let it={...je.new};return Ue&&(it.token_no=Ue,it.order_token=Ue),nn(it.status)==="DELIVERED"||nn(it.status)==="CANCELLED"?Re.filter(j=>j.id!==it.id):Re.map(j=>j.id===it.id?it:j).sort((j,U)=>new Date(U.created_at)-new Date(j.created_at))}),(nn(je.new.status)==="DELIVERED"||nn(je.new.status)==="CANCELLED")&&Se(Re=>[{..._e,deliveredAt:Date.now()},...Re.filter(ke=>ke.id!==_e.id)]);return}catch{nn(_e.status)==="DELIVERED"||nn(_e.status)==="CANCELLED"?(H(ke=>ke.filter(Ue=>Ue.id!==_e.id)),Se(ke=>[{..._e,deliveredAt:Date.now()},...ke.filter(Ue=>Ue.id!==_e.id)])):H(ke=>ke.map(it=>it.id===_e.id?_e:it).sort((it,Fe)=>new Date(Fe.created_at)-new Date(it.created_at)))}}).subscribe();return()=>{clearTimeout(X),oe&&clearInterval(oe);try{Ne.unsubscribe()}catch{}}},[]);const at=async X=>{if(!X)return;const{orderId:oe,from:Be,to:Ne,prevLoc:je,nextLoc:_e}=X;if(je==="live"&&_e==="delivered"){const Re=se.find(ke=>ke.id===oe);if(!Re)return;Se(ke=>ke.filter(Ue=>Ue.id!==oe)),H(ke=>[{...Re,status:Be},...ke]),pe(ke=>[{orderId:oe,itemName:Re.item_name,from:Ne,to:Be,ts:Date.now()},...ke]);try{await Ee.rpc("update_order_status_flexible",{p_order_id:oe,p_new_status:String(Be).toLowerCase()})}catch{}}else if(je==="live"&&_e==="live"){H(Re=>Re.map(ke=>ke.id===oe?{...ke,status:Be}:ke));try{const ke=B.find(Ue=>Ue.id===oe)?.item_name||"Order Item";pe(Ue=>[{orderId:oe,itemName:ke,from:Ne,to:Be,ts:Date.now()},...Ue])}catch{}try{await Ee.rpc("update_order_status_flexible",{p_order_id:oe,p_new_status:String(Be).toLowerCase()})}catch{}}Me(Re=>Re.filter(ke=>ke!==X))};return O.useEffect(()=>{const X=setInterval(()=>{pe(oe=>oe.filter(Be=>Date.now()-Be.ts<25e3)),Me(oe=>oe.filter(Be=>Be.ts?Date.now()-Be.ts<25e3:!0))},1e3);return()=>clearInterval(X)},[]),O.useEffect(()=>{window.__IARE_ORDERS__=B,window.__IARE_DELIVERED__=se},[B,se]),a?p.jsx("div",{className:"login-container",children:p.jsx("div",{className:"login-card",children:p.jsxs("div",{className:"login-header",children:[p.jsx("div",{className:"login-icon",children:p.jsx(gi,{size:32,className:"spinner"})}),p.jsx("h1",{children:"Loading..."}),p.jsx("p",{children:"Checking authentication"})]})})}):i?p.jsxs("div",{className:"app",children:[p.jsxs("aside",{className:`sidebar ${k?"expanded":"collapsed"}`,children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[k&&p.jsx("h2",{className:"brand",style:{margin:0},children:"IARE Canteen"}),p.jsx("button",{onClick:()=>M(!k),className:"sidebar-toggle-btn",style:{padding:"8px",borderRadius:"8px",border:"1px solid #e5e7eb",backgroundColor:R==="dark"?"#374151":"#f9fafb",color:R==="dark"?"#ffffff":"#1f2937",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",marginLeft:k?"0":"auto",marginRight:k?"0":"auto",width:"36px",height:"36px"},title:k?"Collapse sidebar":"Expand sidebar",children:k?p.jsx(W5,{size:20}):p.jsx(Y5,{size:20})})]}),p.jsxs("nav",{className:"nav",children:[p.jsxs(ei,{to:"/",end:!0,title:"Home",children:[p.jsx(gR,{size:20}),k&&p.jsx("span",{children:"Home"})]}),p.jsxs(ei,{to:"/place-order",title:"Place Order",children:[p.jsx(as,{size:20}),k&&p.jsx("span",{children:"Place Order"})]}),p.jsxs(ei,{to:"/orders",title:"Orders",children:[p.jsx(Uw,{size:20}),k&&p.jsx("span",{children:"Orders"})]}),p.jsxs(ei,{to:"/inventory",title:"Inventory Management",children:[p.jsx(qw,{size:20}),k&&p.jsx("span",{children:"Inventory Management"})]}),p.jsxs(ei,{to:"/manage-orders",title:"Manage Orders",children:[p.jsx($x,{size:20}),k&&p.jsx("span",{children:"Manage Orders"})]}),p.jsxs(ei,{to:"/scan",title:"Scan Orders",children:[p.jsx(jR,{size:20}),k&&p.jsx("span",{children:"Scan Orders"})]}),p.jsxs(ei,{to:"/ai",title:"AI Predictions",children:[p.jsx(q5,{size:20}),k&&p.jsx("span",{children:"AI Predictions"})]}),p.jsxs(ei,{to:"/pre-order",title:"Pre-Order",children:[p.jsx(Vw,{size:20}),k&&p.jsx("span",{children:"Pre-Order"})]}),p.jsxs(ei,{to:"/settings",title:"Settings",children:[p.jsx(Gx,{size:20}),k&&p.jsx("span",{children:"Settings"})]})]})]}),p.jsxs("main",{className:"main",children:[p.jsxs("header",{className:"topbar",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[p.jsx("h1",{style:{margin:0},children:Te}),w&&p.jsx("div",{style:{padding:"6px 12px",backgroundColor:w.includes("")?"#d1fae5":w.includes("")?"#fef3c7":"#fee2e2",color:w.includes("")?"#065f46":w.includes("")?"#92400e":"#991b1b",borderRadius:"20px",fontSize:"12px",fontWeight:"500",animation:"fadeIn 0.3s ease"},children:w})]}),p.jsxs("div",{className:"header-actions",children:[n.pathname==="/orders"&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{className:`btn orders-btn recent-btn ${ae==="activity"?"active":""}`,onClick:()=>{L("activity"),console.log(" Recent orders view activated")},disabled:ae==="activity",title:"View recent order activity",children:[p.jsx(zw,{className:"w-4 h-4"}),"Recent"]}),p.jsxs("button",{className:`btn orders-btn live-btn ${ae==="live"?"active":""}`,onClick:()=>{L("live"),console.log(" Live orders view activated")},disabled:ae==="live",title:"View live orders in real-time",children:[p.jsx(YR,{className:"w-4 h-4"}),"Live"]}),p.jsxs("button",{className:`btn orders-btn past-btn ${ae==="past"?"active":""}`,onClick:X=>{X.preventDefault(),X.stopPropagation(),L("past"),console.log(" Past orders view activated, ordersView will be set to:","past")},disabled:ae==="past",title:"View completed orders history",children:[p.jsx($x,{className:"w-4 h-4"}),"Past"]})]}),n.pathname==="/orders"&&ae==="live"&&p.jsxs("button",{className:`btn orders-btn picture-btn ${te?"active":""}`,onClick:()=>{ce(X=>!X),console.log(` Switched to ${te?"List":"Picture"} mode`)},title:`Switch to ${te?"List":"Picture"} view`,children:[te?p.jsx(Hw,{className:"w-4 h-4"}):p.jsx(qp,{className:"w-4 h-4"}),te?"List Mode":"Picture Mode"]}),n.pathname==="/orders"&&p.jsxs("button",{className:"btn orders-btn bulk-cancel-btn",onClick:()=>{const X=new CustomEvent("openBulkCancel");window.dispatchEvent(X)},title:"Bulk update orders - cancel or mark as delivered",children:[p.jsx(lo,{className:"w-4 h-4"}),"Bulk Update"]}),n.pathname==="/manage-orders"&&p.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px 16px",backgroundColor:"#fef3c7",color:"#92400e",borderRadius:"8px",fontSize:"14px",fontWeight:"500",border:"1px solid #f59e0b",marginRight:"12px"},children:[p.jsx("span",{style:{marginRight:"8px"},children:""}),"Under Development, Coming Soon!"]}),p.jsx(ct.button,{className:"theme-toggle-btn bg-white dark:bg-gray-800 text-black dark:text-white transition-colors duration-300",onClick:()=>N(R==="dark"?"light":"dark"),title:"Toggle Dark Mode",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:p.jsx(ct.div,{animate:{rotate:R==="dark"?180:0,scale:R==="dark"?1.1:1},transition:{duration:.3,ease:"easeInOut"},className:"text-black dark:text-white",children:R==="dark"?p.jsx($w,{size:20}):p.jsx(Gw,{size:20})})}),n.pathname==="/"&&p.jsx(N7,{}),p.jsxs("details",{ref:T,style:{position:"relative",marginLeft:"12px"},className:"user-menu",children:[p.jsxs("summary",{style:{listStyle:"none",display:"flex",alignItems:"center",gap:"8px",padding:"6px 10px",borderRadius:"9999px",border:"1px solid var(--border)",backgroundColor:"var(--panel-bg)",color:"var(--text)",cursor:"pointer"},className:"hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[p.jsx("div",{"aria-hidden":!0,style:{width:28,height:28,borderRadius:"9999px",display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundImage:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#ffffff",fontSize:12,fontWeight:700,boxShadow:"0 6px 18px rgba(59,130,246,0.35)"},children:(()=>{const X=i?.user_metadata?.full_name||"",oe=i?.email||"",Ne=String(X||oe).trim()[0];return Ne?Ne.toUpperCase():"A"})()}),p.jsx("span",{style:{fontSize:12,fontWeight:600},children:i?.user_metadata?.full_name||(i?.email?String(i.email).split("@")[0]:"Admin")})]}),p.jsxs("div",{style:{position:"absolute",right:0,top:"calc(100% + 8px)",minWidth:220,backgroundColor:"var(--panel-bg)",border:"1px solid var(--border)",borderRadius:16,boxShadow:"0 12px 32px rgba(59,130,246,0.15)",zIndex:50,overflow:"hidden"},children:[p.jsxs("div",{style:{padding:"12px 14px",borderBottom:"1px solid var(--border)"},children:[p.jsx("div",{style:{fontSize:13,fontWeight:700,color:"var(--text)"},children:i?.user_metadata?.full_name||"Administrator"}),p.jsx("div",{style:{fontSize:12,color:"var(--text-secondary)"},children:i?.email})]}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",padding:6},children:[p.jsxs(ei,{to:"/settings",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",borderRadius:8,color:"var(--text)",textDecoration:"none"},className:"hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[p.jsx(Gx,{size:16}),p.jsx("span",{style:{fontSize:13,fontWeight:600},children:"Profile & Settings"})]}),p.jsxs("button",{onClick:l,style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",borderRadius:8,background:"transparent",border:"none",color:"#b91c1c",cursor:"pointer",textAlign:"left"},className:"hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Sign out",children:[p.jsx(_R,{size:16}),p.jsx("span",{style:{fontSize:13,fontWeight:600},children:"Sign out"})]})]})]})]})]})]}),e==="not-configured"?p.jsx("div",{className:"home-dashboard",children:p.jsxs("div",{className:"card",children:[p.jsx("h2",{style:{marginTop:0,color:"#ef4444"},children:" Supabase Not Configured"}),p.jsxs("div",{style:{marginBottom:"16px"},children:[p.jsx("p",{children:"The app needs Supabase credentials to work properly."}),p.jsx("p",{children:"Please follow these steps:"})]}),p.jsxs("div",{style:{marginBottom:"16px"},children:[p.jsx("h3",{children:"1. Get Your Supabase Credentials"}),p.jsxs("p",{children:["Go to ",p.jsx("a",{href:"https://supabase.com/dashboard",target:"_blank",rel:"noopener noreferrer",children:"Supabase Dashboard"}),"  Your Project  Settings  API"]}),p.jsx("p",{children:"Copy your Project URL and anon public key"})]}),p.jsxs("div",{style:{marginBottom:"16px"},children:[p.jsx("h3",{children:"2. Create .env File"}),p.jsxs("p",{children:["Create a file named ",p.jsx("code",{children:".env"})," in the project root with:"]}),p.jsx("pre",{style:{backgroundColor:"#f3f4f6",padding:"12px",borderRadius:"4px",fontSize:"14px",overflow:"auto"},children:`VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key_here`})]}),p.jsxs("div",{style:{marginBottom:"16px"},children:[p.jsx("h3",{children:"3. Restart Development Server"}),p.jsx("p",{children:"After creating the .env file, restart the server:"}),p.jsx("code",{children:"npm run dev"})]}),p.jsxs("div",{style:{marginBottom:"16px"},children:[p.jsx("h3",{children:"4. Check Console"}),p.jsx("p",{children:"Open browser console (F12) to see connection status and any errors."})]}),p.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:" Refresh Page"})]})}):e==="checking"?p.jsx("div",{className:"home-dashboard",children:p.jsxs("div",{className:"card",children:[p.jsx("h2",{style:{marginTop:0},children:" Connecting to Supabase..."}),p.jsx("p",{children:"Please wait while we connect to the database."}),p.jsx("div",{style:{textAlign:"center",marginTop:"20px"},children:p.jsx("div",{className:"spinner",style:{margin:"0 auto"}})}),p.jsx("button",{className:"btn btn-primary",onClick:()=>t("connected"),style:{marginTop:"20px"},children:"Continue Anyway (Skip Connection Check)"})]})}):e==="error"?p.jsx("div",{className:"home-dashboard",children:p.jsxs("div",{className:"card",children:[p.jsx("h2",{style:{marginTop:0,color:"#ef4444"},children:" Connection Error"}),p.jsx("p",{children:"Failed to connect to Supabase. Please check:"}),p.jsxs("ul",{style:{marginLeft:"20px"},children:[p.jsx("li",{children:"Your Supabase credentials in .env file"}),p.jsx("li",{children:"Internet connection"}),p.jsx("li",{children:"Supabase project status"})]}),p.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:" Try Again"})]})}):p.jsx(p.Fragment,{children:p.jsxs(F3,{children:[p.jsx(hi,{path:"/",element:p.jsx(Q7,{recent:Z,orders:B,onUpdateStatus:Ie,updatingIds:Ye})}),p.jsx(hi,{path:"/place-order",element:p.jsx(e9,{globalCart:c,setGlobalCart:d,globalShowCart:f,setGlobalShowCart:g,globalCartOrderType:m,setGlobalCartOrderType:y,fetchOrders:nt,printBarcodeReceipt:V})}),p.jsx(hi,{path:"/orders",element:p.jsx(n9,{orders:B,deliveredOrders:se,activity:De,onUpdateStatus:Ie,onRevert:at,onCancel:Ge,onCancelOrder:Pe,view:ae,pictureMode:te,updatingIds:Ye})}),p.jsx(hi,{path:"/inventory",element:p.jsx(r9,{})}),p.jsx(hi,{path:"/manage-orders",element:p.jsx(k7,{})}),p.jsx(hi,{path:"/pre-order",element:p.jsx(D7,{})}),p.jsx(hi,{path:"/scan",element:p.jsx(l9,{onScan:A,scanMessage:w,lastScannedCode:E,isProcessing:S})}),p.jsx(hi,{path:"/ai",element:p.jsx(o9,{})}),p.jsx(hi,{path:"/settings",element:p.jsx(s9,{})})]})}),p.jsx(c9,{}),p.jsx(q7,{isEnabled:q,onScan:A}),p.jsx(V7,{order:x,onClose:_}),p.jsx(Gn,{children:$&&p.jsxs(p.Fragment,{children:[p.jsx(ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Oe(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),p.jsxs(ct.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:X=>X.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"none"},className:"dark:!bg-gray-800",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[p.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:p.jsx($n,{size:24,style:{color:"#dc2626"}})}),p.jsx("div",{children:p.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Cancel Order?"})})]}),p.jsx("div",{className:"dark:!text-gray-300",style:{margin:"0 0 16px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:"Are you sure you want to cancel this order?"}),p.jsx("div",{className:"dark:!bg-gray-700 dark:!border-gray-600",style:{maxHeight:"160px",overflowY:"auto",margin:"0 0 16px 0",padding:"8px",border:"1px solid #e5e7eb",borderRadius:"8px",background:"#f9fafb"},children:Array.isArray(Ce)&&Ce.length>0?p.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[Ce.slice(0,12).map((X,oe)=>p.jsxs("span",{style:{background:"#eef2ff",color:"#1e3a8a",padding:"4px 8px",borderRadius:"9999px",fontSize:"12px",fontWeight:600,whiteSpace:"nowrap"},children:[X.food_items?.name||"Item"," ",X.quantity||1]},oe)),Ce.length>12&&p.jsxs("span",{style:{background:"#fee2e2",color:"#991b1b",padding:"4px 8px",borderRadius:"9999px",fontSize:"12px",fontWeight:700,whiteSpace:"nowrap"},children:["+",Ce.length-12," more"]})]}):p.jsx("div",{style:{color:"#374151"},className:"dark:!text-gray-200",children:p.jsxs("strong",{children:['"',$.itemName,'"']})})}),p.jsxs("div",{style:{backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"12px",marginBottom:"24px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[p.jsx($n,{size:16,style:{color:"#f59e0b",marginTop:"2px",flexShrink:0}}),p.jsx("p",{style:{margin:0,fontSize:"13px",color:"#92400e",lineHeight:"1.4"},children:"This will mark the order as cancelled and the customer will need to place a new order."})]}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>Oe(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},className:"dark:!bg-gray-700 dark:!text-gray-200",onMouseEnter:X=>{X.target.style.backgroundColor="#e5e7eb"},onMouseLeave:X=>{X.target.style.backgroundColor="#f3f4f6"},children:"Keep Order"}),p.jsxs("button",{onClick:()=>Pe($.orderId),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ef4444",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:X=>{X.target.style.backgroundColor="#dc2626"},onMouseLeave:X=>{X.target.style.backgroundColor="#ef4444"},children:[p.jsx(rn,{size:16}),"Cancel Order"]})]})]})]})})]})]}):p.jsx(W7,{})}function Mn({title:n,children:e,titleAction:t}){return p.jsxs("section",{className:"card bg-white dark:bg-gray-800 transition-colors duration-300",children:[n?p.jsxs("div",{className:"card-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[p.jsx("h2",{className:"text-black dark:text-white",style:{margin:0},children:n}),t&&p.jsx("div",{className:"card-title-action",style:{marginLeft:"auto"},children:t})]}):null,e]})}function Q7({orders:n,recent:e=[],onUpdateStatus:t,updatingIds:r={}}){xd(),[...n].sort((ae,L)=>(L.createdAt??0)-(ae.createdAt??0)).slice(0,5);const i=window.__IARE_DELIVERED__||[],a=n.length+i.length,l=n.filter(ae=>nn(ae.status)!=="READY").length,c=i.length,d=i.reduce((ae,L)=>ae+(L.total_amount||L.amount||0),0);ub.useMemo(()=>{const ae=[...n,...i],L={};ae.forEach(Z=>{const pe=Z.item_name||Z.item||Z.name||"Unknown Item";L[pe]=(L[pe]||0)+1});const te=Object.entries(L).map(([Z,pe])=>({name:Z,orders:pe})).sort((Z,pe)=>pe.orders-Z.orders).slice(0,4),ce=te[0]?.orders||1;return te.map(Z=>({...Z,percentage:Math.round(Z.orders/ce*100)}))},[n,i]);const[f,g]=O.useState([]),[m,y]=O.useState(!1),[x,w]=O.useState(!1),[_,A]=O.useState(!1),[E,S]=O.useState([]),[T,R]=O.useState([]),[N,k]=O.useState(!1),[M,V]=O.useState(!1),ie=()=>{const ae=["Order Token","Item","Total","Received At","Delivered At"],L=se=>'"'+String(se).replace(/"/g,'""')+'"',te=se=>se?new Date(se).toISOString().slice(0,19).replace("T"," "):"",ce=i.map(se=>{const Se=new Date(se.createdAt).getTime(),De=new Date(se.deliveredAt).getTime(),Me=se.token||se.id?.slice(-4);return[L(Me?"#"+Me:""),L(se.item_name||"Food Item"),L(se.total_amount||se.amount||0),L(te(Se)),L(te(De))].join(",")}),Z=[ae.join(","),...ce].join(`
`),pe=new Blob([Z],{type:"text/csv;charset=utf-8;"}),B=URL.createObjectURL(pe),H=document.createElement("a");H.href=B,H.download=`reports_${new Date().toISOString().slice(0,10)}.csv`,H.click(),URL.revokeObjectURL(B)},fe=()=>{const ae=`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body>
      <table border="1">
        <tr><th>Order Token</th><th>Item</th><th>Total</th><th>Received At</th><th>Delivered At</th></tr>
        ${i.map(Z=>{const pe=Z.token||Z.id?.slice(-4);return`<tr>
            <td>${pe?"#"+pe:""}</td>
            <td>${Z.item_name||"Food Item"}</td>
            <td>${Z.total_amount||Z.amount||0}</td>
            <td>${new Date(Z.createdAt).toLocaleString()}</td>
            <td>${new Date(Z.deliveredAt).toLocaleString()}</td>
          </tr>`}).join("")}
      </table></body></html>`,L=new Blob(["\uFEFF",ae],{type:"application/vnd.ms-excel"}),te=URL.createObjectURL(L),ce=document.createElement("a");ce.href=te,ce.download=`reports_${new Date().toISOString().slice(0,10)}.xls`,ce.click(),URL.revokeObjectURL(te)};O.useEffect(()=>{(async()=>{try{let te=0,ce=[];for(;;){const pe=te+1e3-1,{data:B,error:H}=await Ee.from("food_items").select("*").range(te,pe);if(H)throw H;const se=B||[];if(ce=ce.concat(se),se.length<1e3)break;te+=1e3}const Z=ce.map(pe=>{const B=pe.name??pe.item_name??pe.title??pe.label??"Item",H=(typeof pe.available_quantity=="number"?pe.available_quantity>0:void 0)??pe.in_stock??pe.available??pe.is_available??(typeof pe.stock=="number"?pe.stock>0:void 0)??(typeof pe.status=="string"?String(pe.status).toLowerCase()==="in":void 0)??!0;return{name:B,inStock:!!H}});g(Z.filter(pe=>!pe.inStock))}catch{g([])}})()},[]),O.useEffect(()=>{m&&xe()},[m]),O.useEffect(()=>{x&&q()},[x]);const xe=async()=>{try{k(!0);const{data:ae,error:L}=await Ee.from("food_items").select("*").eq("is_active",!0).order("name");if(L)throw L;S(ae||[])}catch(ae){console.error("Error fetching menu items:",ae),alert("Failed to load menu items")}finally{k(!1)}},q=async()=>{try{V(!0);const{data:ae,error:L}=await Ee.from("orders").select("*").eq("status","delivered").order("created_at",{ascending:!1}).limit(10);if(L)throw L;R(ae||[])}catch(ae){console.error("Error fetching delivered orders:",ae),alert("Failed to load delivered orders")}finally{V(!1)}},we=async(ae,L)=>{try{const te=!L,ce=E.find(H=>H.id===ae),Z={is_available:te,available_quantity:te?ce?.available_quantity||10:0},{error:pe}=await Ee.from("food_items").update(Z).eq("id",ae);if(pe)throw pe;S(H=>H.map(se=>se.id===ae?{...se,is_available:te,available_quantity:Z.available_quantity}:se));const B=`${ce?.name||"Item"} ${te?"enabled":"disabled"} successfully!`;await showAvailabilityNotification(B,!1)}catch(te){console.error("Error updating item availability:",te),await showAvailabilityNotification("Failed to update item availability",!0)}},Te=async ae=>{if(confirm("Are you sure you want to revert this order?"))try{const{data:L,error:te}=await Ee.from("orders").select("item_name").eq("id",ae).single();if(te)throw console.error(" Could not fetch order details:",te),te;const{error:ce}=await Ee.from("orders").update({status:"pending"}).eq("id",ae);if(ce)throw ce;console.log(" Order reverted, restoring stock for:",L.item_name);try{const{data:Z,error:pe}=await Ee.from("food_items").select("available_quantity").eq("name",L.item_name).single();if(pe){console.error(" Could not fetch current stock for restore:",pe);return}const B=Z.available_quantity+1,{error:H}=await Ee.from("food_items").update({available_quantity:B,is_available:!0,updated_at:new Date().toISOString()}).eq("name",L.item_name);H?(console.error(" Failed to restore stock on revert:",H),console.warn(" Order reverted but stock not restored. Please update manually.")):(console.log(" Stock restored on revert (marked as available)"),_n&&_n())}catch(Z){console.error(" Stock restoration error:",Z)}R(Z=>Z.filter(pe=>pe.id!==ae)),alert("Order reverted successfully! Stock has been restored.")}catch(L){console.error("Error reverting order:",L),alert("Failed to revert order")}};return p.jsxs("div",{className:"home-dashboard",children:[p.jsxs("div",{className:"summary-cards",children:[p.jsxs("div",{className:"summary-card",children:[p.jsx("div",{className:"summary-icon",children:p.jsx(Uw,{className:"w-6 h-6"})}),p.jsxs("div",{className:"summary-content",children:[p.jsx("div",{className:"summary-value",children:a}),p.jsx("div",{className:"summary-label",children:"Total Orders"})]})]}),p.jsxs("div",{className:"summary-card",children:[p.jsx("div",{className:"summary-icon",children:p.jsx(Vw,{className:"w-6 h-6"})}),p.jsxs("div",{className:"summary-content",children:[p.jsx("div",{className:"summary-value",children:l}),p.jsx("div",{className:"summary-label",children:"Pending"})]})]}),p.jsxs("div",{className:"summary-card",children:[p.jsx("div",{className:"summary-icon",children:p.jsx(lo,{className:"w-6 h-6"})}),p.jsxs("div",{className:"summary-content",children:[p.jsx("div",{className:"summary-value",children:c}),p.jsx("div",{className:"summary-label",children:"Completed"})]})]}),p.jsxs("div",{className:"summary-card",children:[p.jsx("div",{className:"summary-icon",children:p.jsx(hR,{className:"w-6 h-6"})}),p.jsxs("div",{className:"summary-content",children:[p.jsxs("div",{className:"summary-value",children:["",d]}),p.jsx("div",{className:"summary-label",children:"Revenue"})]})]})]}),p.jsx("div",{className:"charts-section",children:p.jsx(Mn,{title:"Quick Actions",children:p.jsx("div",{className:"quick-actions-grid",children:p.jsxs("button",{className:"quick-action-btn toggle-availability-btn bg-gray-100 dark:bg-gray-700 text-black dark:text-white transition-colors duration-300",onClick:()=>y(!0),children:[p.jsx(Xw,{className:"btn-icon text-black dark:text-white",size:24}),p.jsx("div",{className:"btn-text text-black dark:text-white",children:"Toggle Item Availability"})]})})})}),p.jsx("div",{className:"reports-section",children:p.jsx(Mn,{title:"Reports",titleAction:p.jsx("button",{className:"reports-shortcut-btn",onClick:()=>A(!0),children:"View Full Reports"}),children:p.jsx("div",{className:"reports-preview",children:p.jsxs("div",{className:"reports-buttons",children:[p.jsx("button",{className:"reports-btn export-csv-btn",onClick:ie,children:"Export CSV"}),p.jsx("button",{className:"reports-btn export-excel-btn",onClick:fe,children:"Export Excel"})]})})})}),m&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"Toggle Item Availability"}),p.jsx("button",{className:"modal-close",onClick:()=>y(!1),children:p.jsx(rn,{size:20})})]}),p.jsx("div",{className:"modal-body",children:N?p.jsx("div",{className:"loading",children:"Loading items..."}):p.jsx("div",{className:"items-list",children:E.map(ae=>p.jsxs("div",{className:"item-row",children:[p.jsx("span",{className:"item-name",children:ae.name}),p.jsxs("div",{className:"availability-toggle",children:[p.jsx("span",{className:`availability-badge ${ae.is_available?"on":"off"}`,children:ae.is_available?"On":"Off"}),p.jsxs("label",{className:"toggle-switch","aria-label":`Toggle availability for ${ae.name}`,children:[p.jsx("input",{type:"checkbox",checked:ae.is_available||!1,onChange:()=>we(ae.id,ae.is_available||!1)}),p.jsx("span",{className:"slider"})]})]})]},ae.id))})})]})}),x&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"Revert Delivered Orders"}),p.jsx("button",{className:"modal-close",onClick:()=>w(!1),children:p.jsx(rn,{size:20})})]}),p.jsx("div",{className:"modal-body",children:M?p.jsx("div",{className:"loading",children:"Loading orders..."}):p.jsx("div",{className:"orders-list",children:T.length===0?p.jsx("div",{className:"no-orders",children:"No delivered orders found"}):T.map(ae=>{const L=ae.token_no??ae.order_token??null,te=L?"#"+L:ae.id?"#"+String(ae.id).slice(-4):"N/A",ce=ae.created_at||ae.createdAt||ae.received_at,Z=ae.delivered_at||ae.deliveredAt||ae.updated_at,pe=ae.total_amount??ae.total??ae.amount;return p.jsxs("div",{className:"order-row",children:[p.jsxs("div",{className:"order-info",children:[p.jsx("div",{className:"order-id",style:{fontFamily:"monospace",fontWeight:700},children:te}),p.jsx("div",{className:"order-item",children:ae.item_name||ae.item||"Food Item"}),p.jsxs("div",{className:"order-time",style:{fontSize:"12px",color:"#6b7280"},children:[ce?new Date(ce).toLocaleString():"",Z?`  ${new Date(Z).toLocaleString()}`:"",typeof pe=="number"?`  ${pe}`:""]})]}),p.jsx("button",{className:"revert-btn",onClick:()=>Te(ae.id),children:"Revert"})]},ae.id)})})})]})}),_&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content reports-modal",children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:"Reports"}),p.jsx("button",{className:"modal-close",onClick:()=>A(!1),children:p.jsx(rn,{size:20})})]}),p.jsx("div",{className:"modal-body",children:p.jsx(J7,{})})]})})]})}function J7(){const[n,e]=O.useState(()=>new Date(Date.now()-864e5).toISOString().slice(0,10)),[t,r]=O.useState(()=>new Date().toISOString().slice(0,10)),[i,a]=O.useState([]);O.useEffect(()=>{(async()=>{try{if(window.__IARE_DELIVERED__&&window.__IARE_DELIVERED__.length>0)a(window.__IARE_DELIVERED__);else{const{data:y,error:x}=await Ee.from("orders").select("*").eq("status","DELIVERED").order("created_at",{ascending:!1});if(x)throw x;a(y||[])}}catch(y){console.error("Failed to fetch delivered orders:",y),a([])}})()},[]);const l=m=>{const y=new Date(m);return isNaN(y)?null:y.getTime()},c=i.filter(m=>{const y=l(m.created_at||m.createdAt||m.received_at);l(m.delivered_at||m.deliveredAt||m.updated_at);const x=new Date(n).getTime(),w=new Date(t).getTime()+1440*60*1e3-1;return y&&y>=x&&y<=w}).map(m=>{const y=l(m.created_at||m.createdAt||m.received_at),x=l(m.delivered_at||m.deliveredAt||m.updated_at),w=m.token_no??m.order_token??m.token??m.token_number??m.id??null;return{id:m.id,token:w,item:m.item_name||m.item||"Food Item",total_amount:m.total_amount||m.total||m.price||0,receivedTs:y,deliveredTs:x}}),d=c.reduce((m,y)=>({orders:m.orders+1,revenue:m.revenue+(y.total_amount||0),items:m.items+1,PENDING:m.PENDING+(nn(y.status)==="PENDING"?1:0),PREPARING:m.PREPARING+(nn(y.status)==="PREPARING"?1:0),READY:m.READY+(nn(y.status)==="READY"?1:0)}),{orders:0,revenue:0,items:0,PENDING:0,PREPARING:0,READY:0}),f=()=>{const m=["Order Token","Item","Total","Received At","Delivered At"],y=R=>'"'+String(R).replace(/"/g,'""')+'"',x=R=>R?new Date(R).toISOString().slice(0,19).replace("T"," "):"",w=c.map(R=>[y(R.token?"#"+R.token:""),y(R.item),y(R.total_amount||0),y(x(R.receivedTs)),y(x(R.deliveredTs))].join(",")),_=["",y("Total Revenue"),y(d.revenue)].join(","),A=[m.join(","),...w,"",_].join(`
`),E=new Blob([A],{type:"text/csv;charset=utf-8;"}),S=URL.createObjectURL(E),T=document.createElement("a");T.href=S,T.download=`reports_${n}_to_${t}.csv`,T.click(),URL.revokeObjectURL(S)},g=()=>{const m=`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body>
      <table border="1">
        <tr><th>Order Token</th><th>Item</th><th>Total</th><th>Received At</th><th>Delivered At</th></tr>
        ${c.map(_=>`<tr>
          <td>${_.token?"#"+_.token:""}</td>
          <td>${_.item}</td>
          <td>${_.total_amount||0}</td>
          <td>${new Date(_.receivedTs).toLocaleString()}</td>
          <td>${new Date(_.deliveredTs).toLocaleString()}</td>
        </tr>`).join("")}
        <tr><td colspan="2"><strong>Total Revenue</strong></td><td><strong>${d.revenue}</strong></td><td colspan="2"></td></tr>
      </table></body></html>`,y=new Blob(["\uFEFF",m],{type:"application/vnd.ms-excel"}),x=URL.createObjectURL(y),w=document.createElement("a");w.href=x,w.download=`reports_${n}_to_${t}.xls`,w.click(),URL.revokeObjectURL(x)};return p.jsxs("div",{className:"reports-modal-content",children:[p.jsxs("div",{className:"reports-filters",children:[p.jsxs("div",{className:"field",style:{minWidth:220},children:[p.jsx("label",{className:"label",children:"From"}),p.jsx("input",{type:"date",className:"input",value:n,onChange:m=>e(m.target.value)})]}),p.jsxs("div",{className:"field",style:{minWidth:220},children:[p.jsx("label",{className:"label",children:"To"}),p.jsx("input",{type:"date",className:"input",value:t,onChange:m=>r(m.target.value)})]}),p.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[p.jsx("button",{className:"btn",onClick:f,children:"Export CSV"}),p.jsx("button",{className:"btn",onClick:g,children:"Export Excel"})]})]}),p.jsxs("div",{className:"reports-table",children:[p.jsxs("table",{className:"table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Order Token"}),p.jsx("th",{children:"Item"}),p.jsx("th",{children:"Total"}),p.jsx("th",{children:"Received"}),p.jsx("th",{children:"Delivered"})]})}),p.jsx("tbody",{children:c.slice(0,10).map(m=>p.jsxs("tr",{children:[p.jsx("td",{children:m.token?"#"+m.token:""}),p.jsx("td",{children:m.item}),p.jsxs("td",{children:["",m.total_amount||0]}),p.jsx("td",{children:new Date(m.receivedTs).toLocaleString()}),p.jsx("td",{children:new Date(m.deliveredTs).toLocaleString()})]},m.id))})]}),c.length>10&&p.jsxs("div",{className:"table-note",children:["Showing first 10 of ",c.length," orders. Export to see all data."]})]})]})}function e9({globalCart:n,setGlobalCart:e,globalShowCart:t,setGlobalShowCart:r,globalCartOrderType:i,setGlobalCartOrderType:a,fetchOrders:l,printBarcodeReceipt:c}){const[d,f]=O.useState(null),[g,m]=O.useState(null),[y,x]=O.useState([]),[w,_]=O.useState([]),[A,E]=O.useState(!1),[S,T]=O.useState(""),[R,N]=O.useState([]),[k,M]=O.useState("all"),[V,ie]=O.useState("button"),[fe,xe]=O.useState(0),q=O.useRef(null),we=O.useRef(null),[Te,ae]=O.useState(5),{status:L,updateStatus:te,refreshStatus:ce}=Kw(),Z=n,pe=e,B=t,H=r,se=i,Se=a,[De,Me]=O.useState(null),{suppressNotificationForOrder:Ye,showOrderNotification:ut}=A1(),$=O.useRef(""),Oe=O.useRef(null),[Ce,$e]=O.useState(!1),Ie=O.useRef({hash:null,ts:0}),Ge=j=>{if(k==="all")return!0;if(k==="lunch"){const U=R.find(ve=>ve.name.toLowerCase()==="cuisine"),G=R.find(ve=>ve.name.toLowerCase()==="lunch"),ne=R.find(ve=>{const ge=(ve.name||"").toLowerCase();return ge==="beverages"||ge==="beverage"});return j.categoryId===U?.id||j.categoryId===G?.id||j.categoryId===ne?.id}if(k==="breakfast"){const U=R.find(ve=>ve.name.toLowerCase()==="snacks"),G=R.find(ve=>ve.name.toLowerCase()==="breakfast"),ne=R.find(ve=>{const ge=(ve.name||"").toLowerCase();return ge==="beverages"||ge==="beverage"});return j.categoryId===U?.id||j.categoryId===G?.id||j.categoryId===ne?.id}return j.categoryId===k},Pe=()=>{const j=y.filter(Ge);if(k==="breakfast"){const U=R.find(be=>be.name.toLowerCase()==="snacks"),G=R.find(be=>be.name.toLowerCase()==="breakfast"),ne=R.find(be=>{const ze=(be.name||"").toLowerCase();return ze==="beverages"||ze==="beverage"}),ve=j.filter(be=>be.categoryId===U?.id||be.categoryId===G?.id),ge=j.filter(be=>be.categoryId===ne?.id),me=be=>be.sort((ze,pt)=>{const ot=ze.inStock?1:0,Xt=pt.inStock?1:0;if(ot!==Xt)return Xt-ot;const qt=S.trim().toLowerCase(),wt=String(ze.name||"").toLowerCase(),Pt=String(pt.name||"").toLowerCase();if(qt){const Ot=wt.startsWith(qt),an=Pt.startsWith(qt);if(Ot&&!an)return-1;if(!Ot&&an)return 1}return wt.localeCompare(Pt)});return[...me(ve),...me(ge)]}if(k==="lunch"){const U=R.find(be=>be.name.toLowerCase()==="cuisine"),G=R.find(be=>be.name.toLowerCase()==="lunch"),ne=R.find(be=>{const ze=(be.name||"").toLowerCase();return ze==="beverages"||ze==="beverage"}),ve=j.filter(be=>be.categoryId===U?.id||be.categoryId===G?.id),ge=j.filter(be=>be.categoryId===ne?.id),me=be=>be.sort((ze,pt)=>{const ot=ze.inStock?1:0,Xt=pt.inStock?1:0;if(ot!==Xt)return Xt-ot;const qt=S.trim().toLowerCase(),wt=String(ze.name||"").toLowerCase(),Pt=String(pt.name||"").toLowerCase();if(qt){const Ot=wt.startsWith(qt),an=Pt.startsWith(qt);if(Ot&&!an)return-1;if(!Ot&&an)return 1}return wt.localeCompare(Pt)});return[...me(ve),...me(ge)]}return j.sort((U,G)=>{const ne=U.inStock?1:0,ve=G.inStock?1:0;if(ne!==ve)return ve-ne;const ge=S.trim().toLowerCase(),me=String(U.name||"").toLowerCase(),be=String(G.name||"").toLowerCase();if(ge){const ze=me.startsWith(ge),pt=be.startsWith(ge);if(ze&&!pt)return-1;if(!ze&&pt)return 1}return me.localeCompare(be)}).map((U,G)=>({...U,displayNumber:G+1})).filter(U=>{const G=S.trim().toLowerCase();if(!G)return!0;const ne=G.split(/[\s,]+/).filter(Boolean);if(ne.length===0)return!0;const ve=String(U.name||"").toLowerCase(),ge=String(U.displayNumber);return ne.some(me=>me?/^\d+$/.test(me)?ge===me:ve.includes(me):!1)})};O.useEffect(()=>{const j=Pe();if(!j||j.length===0){xe(0);return}const U=j.findIndex(G=>!!G.inStock);xe(U>=0?U:0)},[S,k]),O.useEffect(()=>{xe(0)},[]),O.useEffect(()=>{const j=()=>{const ne=we.current;if(!ne)return;const ve=Array.from(ne.children);if(ve.length>0){const me=ve[0].getBoundingClientRect();let be=0;for(let ze=0;ze<ve.length;ze++){const pt=ve[ze].getBoundingClientRect();if(Math.abs(pt.top-me.top)<5)be++;else break}be>0&&ae(be)}},U=setTimeout(j,100);window.addEventListener("resize",j);let G;return window.ResizeObserver&&we.current&&(G=new ResizeObserver(()=>j()),G.observe(we.current)),()=>{if(clearTimeout(U),window.removeEventListener("resize",j),G)try{G.disconnect()}catch{}}},[y.length,k,S]),O.useEffect(()=>{const j=(ne,ve,ge)=>{if(!ge||ge.length===0)return 0;let me=Math.min(Math.max(ne,0),ge.length-1),be=me;for(let ze=0;ze<ge.length;ze++)if(be=(be+ve+ge.length)%ge.length,ge[be]&&ge[be].inStock)return be;return me},U=(ne,ve,ge)=>{if(!ge||ge.length===0)return 0;const me=ge.length,be=Math.max(1,Te),ze=Math.ceil(me/be),pt=Math.min(Math.max(ne,0),me-1),ot=Math.floor(pt/be),Xt=pt%be;for(let qt=1;qt<=ze;qt++){const wt=(ot+ve*qt+ze)%ze,Pt=wt*be,an=wt===ze-1?me-Pt:be;if(an<=0)continue;const dr=Math.min(Xt,an-1);for(let kr=0;kr<an;kr++){const D=(dr+kr)%an,J=Pt+D;if(ge[J]&&ge[J].inStock)return J}}return pt},G=ne=>{if(ne.target===q.current){const ge=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Enter"],me=ne.key==="Backspace"&&!S;if(ge.includes(ne.key)||me)ne.preventDefault();else return}const ve=Pe();if(ve.length!==0)switch(ne.key){case"ArrowRight":ne.preventDefault(),xe(ge=>j(ge,1,ve));break;case"ArrowLeft":ne.preventDefault(),xe(ge=>j(ge,-1,ve));break;case"ArrowDown":ne.preventDefault(),xe(ge=>U(ge,1,ve));break;case"ArrowUp":ne.preventDefault(),xe(ge=>U(ge,-1,ve));break;case"Enter":if(ne.preventDefault(),$.current){const ge=$.current;$.current="";const me=parseInt(ge,10);if(!isNaN(me)&&me>0){const be=Pe(),ze=be[me-1];if(ze&&L!=="closed"&&ze.inStock){const pt=Z.find(ot=>ot.id===ze.id)?.quantity||0;pt===0?X(ze,1):oe(ze.id,pt+1),xe(Math.min(me-1,Math.max(0,be.length-1)))}}break}if(De){if(De.onConfirm)try{De.onConfirm()}finally{Me(null)}return}if(ne.shiftKey)Array.isArray(Z)&&Z.length>0&&Fe(se);else{const ge=ve[fe];if(ge&&L!=="closed"&&ge.inStock){const me=Z.find(be=>be.id===ge.id)?.quantity||0;me===0?X(ge,1):oe(ge.id,me+1)}}break;case"Backspace":if(ne.preventDefault(),$.current){const ge=$.current;$.current="";const me=parseInt(ge,10);if(!isNaN(me)&&me>0){const ze=Pe()[me-1];if(ze){const pt=Z.find(ot=>ot.id===ze.id)?.quantity||0;pt>1?oe(ze.id,pt-1):pt===1&&(typeof Be=="function"?Be(ze.id):oe(ze.id,0))}}break}if(ne.shiftKey)Array.isArray(Z)&&Z.length>0&&Me({title:"Clear Cart?",message:"This will remove all items from the cart. You cannot undo this action.",confirmText:"Clear Cart",confirmStyle:"danger",onConfirm:()=>{pe([]),at({type:"success",message:"Cart cleared!"}),setTimeout(()=>at(null),2e3)}});else{const ge=ve[fe];if(ge){const me=Z.find(be=>be.id===ge.id)?.quantity||0;me>1?oe(ge.id,me-1):me===1&&(typeof Be=="function"?Be(ge.id):oe(ge.id,0))}}break;case"Escape":if(ne.preventDefault(),De){Me(null);return}break;case"s":ne.ctrlKey&&(ne.preventDefault(),q.current&&q.current.focus());break;default:/^\d$/.test(ne.key)&&($.current=($.current+ne.key).slice(0,4),Oe.current&&clearTimeout(Oe.current),Oe.current=setTimeout(()=>{const ge=$.current;$.current="";const me=parseInt(ge,10);if(!isNaN(me)&&me>0){const be=Pe(),ze=be[me-1];if(ze&&L!=="closed"&&ze.inStock){const pt=Z.find(ot=>ot.id===ze.id)?.quantity||0;pt===0?X(ze,1):oe(ze.id,pt+1),xe(Math.min(me-1,Math.max(0,be.length-1)))}}},500))}};return window.addEventListener("keydown",G),()=>{window.removeEventListener("keydown",G),Oe.current&&clearTimeout(Oe.current)}},[fe,Z,L,Pe,De]),O.useEffect(()=>{const U=setTimeout(()=>{if(fe===0){const G=document.getElementById("po-item-btn-0");G&&G.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}else{const G=document.getElementById(`po-item-btn-${fe}`);G&&G.scrollIntoView({block:"center",inline:"nearest",behavior:"smooth"})}},50);return()=>clearTimeout(U)},[fe]);const[nt,at]=O.useState(null),X=(j,U=1)=>{pe(G=>G.find(ve=>ve.id===j.id)?G.map(ve=>ve.id===j.id?{...ve,quantity:ve.quantity+U}:ve):[...G,{...j,quantity:U}])},oe=(j,U)=>{const G=Math.max(1,U||1);pe(ne=>ne.map(ve=>ve.id===j?{...ve,quantity:G}:ve))},Be=j=>{pe(U=>U.filter(G=>G.id!==j))},Ne=()=>{pe([])},je=()=>{const U=se==="takeaway";return Z.reduce((G,ne)=>{const ve=U?ne.price+10:ne.price;return G+ve*ne.quantity},0)},_e=()=>Z.reduce((j,U)=>j+U.price*U.quantity,0),Re=()=>se!=="takeaway"?0:Z.reduce((U,G)=>U+10*G.quantity,0),ke=()=>Z.reduce((j,U)=>j+U.quantity,0);O.useEffect(()=>{const j=async()=>{try{let G=0,ne=[];for(;;){const me=G+1e3-1,{data:be,error:ze}=await Ee.from("food_items").select("*").eq("is_active",!0).range(G,me);if(ze)throw ze;const pt=be||[];if(ne=ne.concat(pt),pt.length<1e3)break;G+=1e3}const ge=ne.map(me=>({id:me.id??me.item_id??me.slug??String(Math.random()).slice(2),name:me.name??me.item_name??"Item",price:me.price??me.cost??0,image:me.image_url??me.image??me.photo??"https://via.placeholder.com/300?text=Food",description:me.description??"",availableQuantity:me.available_quantity??0,isAvailable:me.is_available??!0,inStock:me.is_available!==!1&&me.available_quantity>0,categoryId:me.category_id??null,serialNumber:me.serial_number??null})).sort((me,be)=>me.serialNumber!=null&&be.serialNumber!=null?me.serialNumber-be.serialNumber:me.serialNumber!=null&&be.serialNumber==null?-1:me.serialNumber==null&&be.serialNumber!=null?1:(me.name||"").localeCompare(be.name||""));ge.length===0?(console.log("No food items found in database, using fallback items"),x([{id:"fallback_1",name:"Veg Biryani",price:180,image:"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg",description:"Delicious vegetarian biryani",serialNumber:1},{id:"fallback_2",name:"Masala Dosa",price:80,image:"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg",description:"Crispy dosa with potato filling",serialNumber:2},{id:"fallback_3",name:"Samosa",price:40,image:"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg",description:"Spicy potato and pea samosa",serialNumber:3}])):x(ge)}catch(U){console.error("Failed to load food_items:",U),x([{id:"fallback_1",name:"Veg Biryani",price:180,image:"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg",description:"Delicious vegetarian biryani",serialNumber:1},{id:"fallback_2",name:"Masala Dosa",price:80,image:"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg",description:"Crispy dosa with potato filling",serialNumber:2},{id:"fallback_3",name:"Samosa",price:40,image:"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg",description:"Spicy potato and pea samosa",serialNumber:3}])}};_n=j,j()},[]),O.useEffect(()=>{(async()=>{try{const{data:U,error:G}=await Ee.from("categories").select("*").order("name",{ascending:!0});if(G)throw G;N(U||[])}catch(U){console.error("Failed to load categories:",U),N([])}})()},[]);const Ue=async()=>{E(!0);try{let U=0,G=[];for(;;){const ne=U+1e3-1,{data:ve,error:ge}=await Ee.from("orders").select("id, item_name, status, user_id, created_at, order_token").neq("user_id",yd).order("created_at",{ascending:!1}).range(U,ne);if(ge)throw ge;const me=ve||[];if(G=G.concat(me),me.length<1e3)break;U+=1e3}_(G)}catch(j){console.error("Failed to fetch Counter tokens:",j)}finally{E(!1)}};O.useEffect(()=>{Ue()},[]);const it=async(j,U=1,G=0)=>{try{const ge=Math.max(0,Number(U)||0);if(!j||ge===0)return;const me=new Promise((pt,ot)=>{setTimeout(()=>ot(new Error("Stock update timeout")),8e3)}),be=async()=>{const{data:pt,error:ot}=await Ee.from("food_items").select("available_quantity, is_available").eq("id",j).single();if(ot)throw ot;const Xt=pt.available_quantity||0,qt=Math.max(0,Xt-ge),wt=qt>0,{data:Pt,error:Ot}=await Ee.from("food_items").update({available_quantity:qt,is_available:wt,updated_at:new Date().toISOString()}).eq("id",j).select("available_quantity, is_available");if(Ot)throw Ot;return Pt},ze=await Promise.race([be(),me]);return console.log(` Stock reduced atomically: ${ze[0]?.available_quantity} remaining`),_n&&_n(),ze}catch(ge){if(console.error(` Stock update failed (attempt ${G+1}):`,ge),G<3){const me=Math.pow(2,G)*1e3;return console.log(` Retrying stock update in ${me}ms...`),await new Promise(be=>setTimeout(be,me)),it(j,U,G+1)}throw new Error(`Failed to update stock after 3 attempts: ${ge.message}`)}},Fe=async j=>{if(Ce)return;if(Z.length===0){at({type:"error",message:"Your cart is empty!"}),setTimeout(()=>at(null),2e3);return}const U=ve=>{const ge=(ve||[]).map(me=>({id:me.id,q:me.quantity||0,p:me.price||0})).sort((me,be)=>String(me.id).localeCompare(String(be.id)));return JSON.stringify(ge)},G=Date.now(),ne=U(Z);if(Ie.current.hash===ne&&G-Ie.current.ts<5e3){at({type:"error",message:"Checkout already in progress. Please wait"}),setTimeout(()=>at(null),2e3);return}Ie.current={hash:ne,ts:G},$e(!0);try{console.log(" Starting optimized checkout process for:",Z.length,"items - creating separate orders");const ve=[],ge=12e3,me=10,be=j==="takeaway";for(const ot of Z){console.log(" Creating separate order for:",ot.name,"Qty:",ot.quantity);const Xt=new Promise((wt,Pt)=>{setTimeout(()=>Pt(new Error(`Timeout processing ${ot.name}`)),ge)}),qt=async()=>{const wt=be?ot.price+me:ot.price,Pt=wt*ot.quantity;console.log(` Price: Base ${ot.price} + Takeaway ${be?me:0} = ${wt}  ${ot.quantity} = ${Pt}`);const Ot=crypto.randomUUID();console.log(" Generated order ID (backend will assign token/qr):",Ot);const an=await NS(),{data:dr,error:kr}=await Ee.from("orders").insert({id:Ot,order_id:Ot,user_id:an,item_name:ot.name,total_amount:Pt,status:"preparing",order_type:be,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(Ye(Ot),kr)throw console.error(" Failed to create order for item:",ot.name,kr),new Error(`Failed to create order for ${ot.name}: ${kr.message}`);console.log(" Order created for item:",ot.name,dr),await it(ot.id,ot.quantity);let D=dr?.order_token||dr?.token_no||dr?.token||null,J=dr?.qr_code||dr?.[0]?.qr_code||null;if(!J||J.length<8)try{const{data:ye}=await Ee.from("orders").select("order_token, qr_code").eq("id",Ot).single();!D&&(ye?.order_token||ye?.token_no)&&(D=ye.order_token||ye.token_no),ye?.qr_code&&ye.qr_code.length>=8&&(J=ye.qr_code)}catch{}if(!D)try{console.warn(" order_token missing from backend; generating fallback token on client");const{data:ye}=await Ee.from("orders").select("order_token, created_at").not("order_token","is",null).order("created_at",{ascending:!1}).limit(50),He=(ye||[]).map(lt=>parseInt(String(lt.order_token).replace(/\D/g,""),10)).filter(lt=>Number.isFinite(lt));let Ze=(He.length?Math.max(...He):999)%9999+1;Ze<1e3&&(Ze+=1e3);for(let lt=0;lt<20;lt++){const Gt=String(Ze).padStart(4,"0"),{data:ln}=await Ee.from("orders").select("id").eq("order_token",Gt).order("created_at",{ascending:!1}).limit(1);if(!ln||ln.length===0){await Ee.from("orders").update({order_token:Gt}).eq("id",Ot),D=Gt;break}Ze=Ze%9999+1||1e3}}catch(ye){console.error(" Failed to assign fallback token:",ye)}return{item:ot.name,token:D,orderId:Ot,qrCode:J}};try{const wt=await Promise.race([qt(),Xt]);ve.push(wt),console.log(" Item processed successfully:",ot.name)}catch(wt){throw console.error(` Failed to process ${ot.name}:`,wt),new Error(`Failed to add item ${ot.name} to order: ${wt.message}`)}}if(ve.length>0){console.log(" Printing single combined receipt for",ve.length,"orders");const ot=ve.map((wt,Pt)=>{const Ot=Z[Pt],an=be?Ot.price+me:Ot.price,dr=an*Ot.quantity;return{name:wt.item,quantity:Ot.quantity,price:an,total:dr,token:wt.token,orderId:wt.orderId,qrCode:wt.qrCode}}),Xt=ot.reduce((wt,Pt)=>wt+Pt.total,0),qt=ve[0];setTimeout(()=>{try{c({orderId:qt.orderId,token:qt.token||ve[0]?.token||"",qrCode:qt.qrCode||ve[0]?.qrCode||"",items:ot,totalAmount:Xt,orderType:j,status:"preparing",isCombinedReceipt:!0,allTokens:ve.map(wt=>wt.token||"")})}catch{}},0)}pe([]),H(!1),m(ve[ve.length-1]?.token);const ze=j==="dine_in"?"Dine In":"Takeaway",pt=ve.map(ot=>`#${ot.token}`).join(", ");at({type:"success",message:` Checkout successful! ${ve.length} order(s) created  Tokens: ${pt}  ${ze}`}),setTimeout(()=>at(null),3500),_n&&_n(),Ue(),console.log(" Refreshing orders after checkout..."),l(void 0),console.log(" Checkout completed successfully!")}catch(ve){console.error(" Checkout failed:",ve),at({type:"error",message:` Checkout failed: ${ve.message}`}),setTimeout(()=>at(null),3500),Ie.current={hash:null,ts:0}}finally{$e(!1)}};return p.jsxs("div",{className:"home-dashboard",children:[p.jsxs(Mn,{title:"Menu - Place Order (Counter)",titleAction:p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[p.jsxs("div",{style:{position:"relative",width:"300px"},children:[p.jsx("input",{ref:q,className:"input search-input",placeholder:"Search menu items or serial number...",value:S,onChange:j=>T(j.target.value),onKeyDown:j=>{(j.key==="Enter"||j.key==="ArrowLeft"||j.key==="ArrowRight"||j.key==="ArrowUp"||j.key==="ArrowDown"||j.key==="Backspace"&&!S)&&j.preventDefault()},style:{paddingRight:S?"40px":"12px",width:"100%",fontSize:"14px"}}),S&&p.jsx("button",{onClick:()=>{T("")},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",color:"#6b7280",borderRadius:"4px",transition:"all 0.2s"},onMouseEnter:j=>{j.target.style.backgroundColor="#f3f4f6",j.target.style.color="#374151"},onMouseLeave:j=>{j.target.style.backgroundColor="transparent",j.target.style.color="#6b7280"},children:p.jsx(rn,{size:18})})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsxs("button",{onClick:()=>ie("list"),style:{padding:"8px 12px",fontSize:"13px",fontWeight:"600",backgroundColor:V==="list"?"#3b82f6":"var(--muted-bg)",color:V==="list"?"#ffffff":"var(--text)",border:V==="list"?"1px solid #2563eb":"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},title:"List Mode",children:[p.jsx(Hw,{size:16}),p.jsx("span",{children:"List"})]}),p.jsxs("button",{onClick:()=>ie("card"),style:{padding:"8px 12px",fontSize:"13px",fontWeight:"600",backgroundColor:V==="card"?"#3b82f6":"var(--muted-bg)",color:V==="card"?"#ffffff":"var(--text)",border:V==="card"?"1px solid #2563eb":"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},title:"Card Mode",children:[p.jsx(qp,{size:16}),p.jsx("span",{children:"Card"})]}),p.jsxs("button",{onClick:()=>ie("button"),style:{padding:"8px 12px",fontSize:"13px",fontWeight:"600",backgroundColor:V==="button"?"#3b82f6":"var(--muted-bg)",color:V==="button"?"#ffffff":"var(--text)",border:V==="button"?"1px solid #2563eb":"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},title:"Button Mode",children:[p.jsx(J5,{size:16}),p.jsx("span",{children:"Button"})]})]})]}),children:[p.jsxs("div",{style:{marginTop:"16px",marginBottom:"8px",display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},onKeyDown:j=>{j.key==="Escape"&&!bulkCancelLoading&&(j.stopPropagation(),setShowBulkCancel(!1))},tabIndex:-1,children:[p.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text-primary)"},children:"Quick Search:"}),["Biryani","Dosa","Idli","Paratha","Manchuria","Noodles","Rice","Omlette","Egg","Chicken"].map(j=>p.jsx("button",{onClick:()=>T(j),style:{padding:"6px 12px",fontSize:"13px",fontWeight:"500",backgroundColor:"var(--muted-bg)",color:"var(--text)",border:j&&S&&S.toLowerCase()===j.toLowerCase()?"1px solid #3b82f6":"1px solid var(--border)",borderRadius:"16px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:U=>{U.target.style.backgroundColor="var(--panel-bg)",U.target.style.borderColor="#3b82f6",U.target.style.color="#3b82f6"},onMouseLeave:U=>{S&&S.toLowerCase()===j.toLowerCase()||(U.target.style.backgroundColor="var(--muted-bg)",U.target.style.borderColor="var(--border)",U.target.style.color="var(--text)")},children:j},j))]}),R.length>0&&p.jsxs("div",{style:{marginTop:"16px",marginBottom:"8px",display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[p.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text)",marginRight:"4px"},children:"Special Categories:"}),p.jsxs("button",{onClick:()=>M("all"),style:{padding:"6px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:k==="all"?"#3b82f6":"var(--muted-bg)",color:k==="all"?"#ffffff":"var(--text)",border:"none",borderRadius:"20px",cursor:"pointer",transition:"all 0.2s",boxShadow:k==="all"?"0 2px 8px rgba(59, 130, 246, 0.3)":"none"},onMouseEnter:j=>{k!=="all"&&(j.target.style.backgroundColor="var(--panel-bg)")},onMouseLeave:j=>{k!=="all"&&(j.target.style.backgroundColor="var(--muted-bg)")},children:["All (",y.length,")"]}),R.map(j=>({...j,itemCount:y.filter(U=>U.categoryId===j.id).length})).filter(j=>j.itemCount>0).reduce((j,U)=>{if(U.name.toLowerCase()==="cuisine"||U.name.toLowerCase()==="lunch"){const G=j.find(ne=>ne.name==="Lunch");G?G.itemCount+=U.itemCount:j.push({...U,name:"Lunch",id:"lunch",originalIds:[U.id]})}else if(U.name.toLowerCase()==="snacks"||U.name.toLowerCase()==="breakfast"||U.name.toLowerCase()==="beverages"||U.name.toLowerCase()==="beverage"){const G=j.find(ne=>ne.id==="breakfast"||ne.name==="Breakfast");G?G.itemCount+=U.itemCount:j.push({...U,name:"Breakfast",id:"breakfast",originalIds:[U.id]}),(U.name.toLowerCase()==="beverages"||U.name.toLowerCase()==="beverage")&&j.push(U)}else j.push(U);return j},[]).sort((j,U)=>U.itemCount-j.itemCount).map(j=>p.jsxs("button",{onClick:()=>M(j.id),style:{padding:"6px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:k===j.id?"#3b82f6":"var(--muted-bg)",color:k===j.id?"#ffffff":"var(--text)",border:"none",borderRadius:"20px",cursor:"pointer",transition:"all 0.2s",boxShadow:k===j.id?"0 2px 8px rgba(59, 130, 246, 0.3)":"none"},onMouseEnter:U=>{k!==j.id&&(U.target.style.backgroundColor="var(--panel-bg)")},onMouseLeave:U=>{k!==j.id&&(U.target.style.backgroundColor="var(--muted-bg)")},children:[j.name," (",j.itemCount,")"]},j.id))]}),V==="list"?p.jsx("div",{className:"menu-items-grid",style:{marginTop:"20px",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"20px"},children:y.filter(Ge).sort((j,U)=>{const G=j.inStock?1:0,ne=U.inStock?1:0;if(G!==ne)return ne-G;const ve=S.trim().toLowerCase(),ge=String(j.name||"").toLowerCase(),me=String(U.name||"").toLowerCase();if(ve){const be=ge.startsWith(ve),ze=me.startsWith(ve);if(be&&!ze)return-1;if(!be&&ze)return 1}return ge.localeCompare(me)}).map((j,U)=>({...j,displayNumber:U+1})).filter(j=>{const U=S.trim().toLowerCase();if(!U)return!0;const G=U.split(/[\s,]+/).filter(Boolean);if(G.length===0)return!0;const ne=String(j.name||"").toLowerCase(),ve=String(j.displayNumber);return G.some(ge=>/^\d+$/.test(ge)?ve===ge:ne.includes(ge))}).map(j=>p.jsxs("div",{className:"menu-item-card",style:{padding:"14px",border:"1px solid #e5e7eb",borderRadius:"12px",backgroundColor:"#ffffff",opacity:j.inStock?1:.6,minHeight:"220px",display:"flex",flexDirection:"column",boxSizing:"border-box",position:"relative"},children:[p.jsxs("div",{style:{position:"absolute",top:"8px",left:"8px",backgroundColor:"#3b82f6",color:"white",padding:"4px 10px",borderRadius:"20px",fontSize:"11px",fontWeight:"700",zIndex:1},children:["#",j.displayNumber]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",minWidth:0},children:[p.jsx("img",{src:j.image,alt:j.name,loading:"lazy",style:{width:"46px",height:"46px",borderRadius:"10px",objectFit:"cover",backgroundColor:"#f3f4f6",flexShrink:0},onError:U=>{const G=U.currentTarget;G.src!=="https://via.placeholder.com/80?text=Food"&&(G.src="https://via.placeholder.com/80?text=Food")}}),p.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:700,color:"#111827",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:j.name})]}),p.jsxs("div",{style:{fontSize:"16px",fontWeight:700,color:"#111827"},children:["",j.price]})]}),!j.inStock&&p.jsx("div",{style:{marginBottom:"10px",padding:"8px",backgroundColor:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"8px",textAlign:"center",color:"#991b1b",fontWeight:"500",fontSize:"12px"},children:" Currently Unavailable"}),p.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginTop:"12px"},children:p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("button",{onClick:()=>{const U=Z.find(G=>G.id===j.id)?.quantity||0;U>1?oe(j.id,U-1):U===1&&Be(j.id)},disabled:L==="closed"||!j.inStock,style:{width:"34px",height:"34px",borderRadius:"50%",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:L==="closed"||!j.inStock?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:L==="closed"||!j.inStock?.5:1},children:"-"}),p.jsx("span",{style:{minWidth:"56px",textAlign:"center",fontWeight:"700",fontSize:"15px"},children:Z.find(U=>U.id===j.id)?.quantity||0}),p.jsx("button",{onClick:()=>{const U=Z.find(G=>G.id===j.id)?.quantity||0;U===0?X(j,1):oe(j.id,U+1)},disabled:L==="closed"||!j.inStock,style:{width:"34px",height:"34px",borderRadius:"50%",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:L==="closed"||!j.inStock?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:L==="closed"||!j.inStock?.5:1},children:"+"})]})}),p.jsx("button",{type:"button",className:`order-btn ${L==="closed"||!j.inStock?"btn-disabled":"btn-primary"}`,onClick:()=>{const U=Z.find(G=>G.id===j.id)?.quantity||0;U===0?X(j,1):oe(j.id,U+1)},disabled:L==="closed"||!j.inStock,style:{padding:"12px 14px",fontSize:"13px",marginTop:"14px",width:"100%"},children:L==="closed"?" Closed":j.inStock?Z.find(U=>U.id===j.id)?.quantity>0?" Add More":" Add to Cart":" Out of Stock"})]},j.id))}):V==="card"?p.jsx("div",{className:"menu-items-grid",children:y.filter(Ge).sort((j,U)=>{const G=j.inStock?1:0,ne=U.inStock?1:0;if(G!==ne)return ne-G;const ve=S.trim().toLowerCase(),ge=String(j.name||"").toLowerCase(),me=String(U.name||"").toLowerCase();if(ve){const be=ge.startsWith(ve),ze=me.startsWith(ve);if(be&&!ze)return-1;if(!be&&ze)return 1}return ge.localeCompare(me)}).map((j,U)=>({...j,displayNumber:U+1})).filter(j=>{const U=S.trim().toLowerCase();if(!U)return!0;const G=U.split(/[\s,]+/).filter(Boolean);if(G.length===0)return!0;const ne=String(j.name||"").toLowerCase(),ve=String(j.displayNumber);return G.some(ge=>/^\d+$/.test(ge)?ve===ge:ne.includes(ge))}).map(j=>p.jsxs("div",{className:"menu-item-card",style:{opacity:j.inStock?1:.6,position:"relative"},children:[p.jsxs("div",{className:"menu-item-image",style:{backgroundImage:`url(${j.image})`},children:[p.jsxs("div",{style:{position:"absolute",top:"8px",left:"8px",backgroundColor:"#3b82f6",color:"white",padding:"4px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:"700",zIndex:1,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:["#",j.displayNumber]}),p.jsxs("div",{className:"price-badge",children:["",j.price]}),!j.inStock&&p.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(239, 68, 68, 0.95)",color:"white",padding:"8px 16px",borderRadius:"8px",fontWeight:"bold",fontSize:"14px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:2},children:" OUT OF STOCK"})]}),p.jsxs("div",{className:"menu-item-content",children:[p.jsx("h3",{className:"menu-item-title",children:j.name}),p.jsx("p",{className:"menu-item-description",children:j.description}),j.inStock?p.jsx(p.Fragment,{children:p.jsxs("div",{style:{marginTop:"12px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",justifyContent:"center"},children:[p.jsx("button",{onClick:()=>{const U=Z.find(G=>G.id===j.id)?.quantity||0;U>1?oe(j.id,U-1):U===1&&Be(j.id)},disabled:L==="closed",style:{width:"28px",height:"28px",borderRadius:"50%",border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-primary)",cursor:L==="closed"?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:L==="closed"?.5:1},children:"-"}),p.jsx("span",{style:{minWidth:"40px",textAlign:"center",fontWeight:"500",color:"var(--text-primary)",fontSize:"16px"},children:Z.find(U=>U.id===j.id)?.quantity||0}),p.jsx("button",{onClick:()=>{const U=Z.find(G=>G.id===j.id)?.quantity||0;U===0?X(j,1):oe(j.id,U+1)},disabled:L==="closed",style:{width:"28px",height:"28px",borderRadius:"50%",border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-primary)",cursor:L==="closed"?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:L==="closed"?.5:1},children:"+"})]}),p.jsx("button",{type:"button",className:`order-btn ${L==="closed"?"btn-disabled":"btn-primary"}`,onClick:()=>{const U=Z.find(G=>G.id===j.id)?.quantity||0;U===0?X(j,1):oe(j.id,U+1)},disabled:L==="closed",style:{width:"100%"},children:L==="closed"?" Canteen Closed":Z.find(U=>U.id===j.id)?.quantity>0?" Add More":" Add to Cart"})]})}):p.jsx("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"8px",textAlign:"center",color:"#991b1b",fontWeight:"500",fontSize:"14px"},children:" Currently Unavailable"})]})]},j.id))}):V==="button"?p.jsxs("div",{style:{marginTop:"20px",display:"flex",gap:"20px"},children:[p.jsx("div",{ref:we,style:{flex:"1",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px",alignContent:"start"},children:Pe().map((j,U)=>p.jsxs("button",{type:"button",id:`po-item-btn-${U}`,onClick:()=>{if(L==="closed"||!j.inStock)return;const G=Z.find(ne=>ne.id===j.id)?.quantity||0;G===0?X(j,1):oe(j.id,G+1)},disabled:L==="closed"||!j.inStock,style:{padding:"10px",fontSize:"14px",fontWeight:"600",backgroundColor:j.inStock?Z.find(G=>G.id===j.id)?.quantity>0?"#3b82f6":U===fe?"var(--muted-bg)":"var(--panel-bg)":"#f3f4f6",color:j.inStock?Z.find(G=>G.id===j.id)?.quantity>0?"#ffffff":"var(--text)":"#9ca3af",border:j.inStock?Z.find(G=>G.id===j.id)?.quantity>0?"2px solid #2563eb":U===fe?"2px solid #0ea5e9":"2px solid var(--border)":"2px dashed #d1d5db",borderRadius:"12px",cursor:L==="closed"||!j.inStock?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",position:"relative",opacity:j.inStock?1:.5,minHeight:"64px",justifyContent:"center",textAlign:"center",wordBreak:"break-word",boxShadow:Z.find(G=>G.id===j.id)?.quantity>0?"0 4px 12px rgba(59, 130, 246, 0.3)":U===fe?"0 4px 12px rgba(14, 165, 233, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.05)"},onMouseEnter:G=>{L!=="closed"&&j.inStock&&!Z.find(ne=>ne.id===j.id)?.quantity&&(G.currentTarget.style.backgroundColor="var(--muted-bg)",G.currentTarget.style.borderColor="#3b82f6")},onMouseLeave:G=>{L!=="closed"&&j.inStock&&!Z.find(ne=>ne.id===j.id)?.quantity&&(G.currentTarget.style.backgroundColor="var(--panel-bg)",G.currentTarget.style.borderColor="var(--border)")},children:[p.jsx("div",{style:{position:"absolute",top:"6px",right:"6px",backgroundColor:"#3b82f6",color:"white",padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"700",zIndex:1},children:U+1}),Z.find(G=>G.id===j.id)?.quantity>0&&p.jsx("div",{style:{position:"absolute",top:"6px",right:"6px",backgroundColor:"#ef4444",color:"white",padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"700",zIndex:1,minWidth:"24px",textAlign:"center"},children:Z.find(G=>G.id===j.id)?.quantity}),p.jsx("span",{style:{fontSize:"14px",lineHeight:"1.3",fontWeight:"600",marginTop:"6px"},children:j.name})]},j.id))}),p.jsxs("div",{style:{width:"350px",flexShrink:0,backgroundColor:"var(--panel-bg)",borderRadius:"12px",border:"2px solid var(--border)",display:"flex",flexDirection:"column",maxHeight:"600px",position:"sticky",top:"20px",alignSelf:"start"},children:[p.jsxs("div",{style:{padding:"16px 20px",borderBottom:"2px solid var(--border)",backgroundColor:"var(--muted-bg)",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("h3",{style:{margin:0,color:"var(--text)",display:"flex",alignItems:"center",gap:"8px",fontSize:"18px",fontWeight:"700"},children:[p.jsx(as,{size:20}),"Your Cart",Z.length>0&&p.jsx("span",{style:{backgroundColor:"#ef4444",color:"white",borderRadius:"20px",padding:"2px 8px",fontSize:"12px",fontWeight:"700",marginLeft:"4px"},children:ke()})]}),p.jsx("button",{onClick:()=>{Me({title:"Clear Cart?",message:"This will remove all items from the cart. You cannot undo this action.",confirmText:"Clear Cart",confirmStyle:"danger",onConfirm:()=>{Ne(),at({type:"success",message:"Cart cleared!"}),setTimeout(()=>at(null),2e3)}})},disabled:L==="closed"||Z.length===0,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"600",backgroundColor:L==="closed"||Z.length===0?"#d1d5db":"#ef4444",color:Z.length===0?"#111827":"#ffffff",border:"none",borderRadius:"6px",cursor:L==="closed"||Z.length===0?"not-allowed":"pointer",transition:"all 0.2s",boxShadow:L==="closed"||Z.length===0?"none":"0 2px 4px rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"6px",opacity:Z.length===0?.5:1,minWidth:"80px"},children:L==="closed"?" Closed":Z.length===0?"Empty":"Clear Cart"})]}),p.jsx("div",{style:{flex:1,padding:"16px",overflowY:"auto",display:"flex",flexDirection:"column"},children:Z.length===0?p.jsxs("div",{style:{textAlign:"center",color:"var(--text-secondary)",padding:"40px 20px",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[p.jsx(as,{size:48,style:{opacity:.3,color:"var(--text-secondary)"}}),p.jsx("div",{style:{fontSize:"15px",fontWeight:"500",color:"var(--text)"},children:"Your cart is empty"}),p.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:"Click on items to add"})]}):p.jsx("div",{style:{flex:1},children:Z.map(j=>p.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px",backgroundColor:"var(--muted-bg)",borderRadius:"10px",marginBottom:"10px",border:"1px solid var(--border)",gap:"10px"},children:[p.jsxs("div",{style:{flex:1,minWidth:0},children:[p.jsx("div",{style:{fontWeight:"600",color:"var(--text)",marginBottom:"4px",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:j.name}),p.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:["",j.price," each"]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexShrink:0},children:[p.jsx("button",{onClick:()=>{j.quantity<=1?Be(j.id):oe(j.id,j.quantity-1)},style:{width:"32px",height:"32px",borderRadius:"8px",border:"2px solid #ef4444",backgroundColor:"#fef2f2",color:"#dc2626",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"700",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(239, 68, 68, 0.2)"},onMouseEnter:U=>{U.target.style.backgroundColor="#fecaca",U.target.style.borderColor="#dc2626"},onMouseLeave:U=>{U.target.style.backgroundColor="#fef2f2",U.target.style.borderColor="#ef4444"},children:"-"}),p.jsx("span",{style:{fontWeight:"700",fontSize:"14px",minWidth:"30px",textAlign:"center",color:"var(--text)"},children:j.quantity}),p.jsx("button",{type:"button",onClick:()=>oe(j.id,j.quantity+1),style:{width:"32px",height:"32px",borderRadius:"8px",border:"2px solid #10b981",backgroundColor:"#f0fdf4",color:"#059669",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"700",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(16, 185, 129, 0.2)"},onMouseEnter:U=>{U.target.style.backgroundColor="#d1fae5",U.target.style.borderColor="#059669"},onMouseLeave:U=>{U.target.style.backgroundColor="#f0fdf4",U.target.style.borderColor="#10b981"},children:"+"}),p.jsx("button",{type:"button",onClick:()=>Be(j.id),style:{width:"32px",height:"32px",borderRadius:"8px",border:"2px solid #dc2626",backgroundColor:"#fef2f2",color:"#dc2626",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"6px",fontSize:"18px",fontWeight:"700",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(220, 38, 38, 0.2)"},onMouseEnter:U=>{U.target.style.backgroundColor="#fecaca",U.target.style.borderColor="#b91c1c"},onMouseLeave:U=>{U.target.style.backgroundColor="#fef2f2",U.target.style.borderColor="#dc2626"},children:""})]})]},j.id))})}),Z.length>0&&p.jsxs("div",{style:{padding:"16px",borderTop:"2px solid var(--border)",backgroundColor:"var(--muted-bg)",borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px"},children:[p.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[p.jsx("button",{type:"button",onClick:()=>Se("dine_in"),style:{flex:1,padding:"8px",fontSize:"13px",fontWeight:"600",backgroundColor:se==="dine_in"?"#3b82f6":"var(--panel-bg)",color:se==="dine_in"?"#ffffff":"var(--text)",border:se==="dine_in"?"2px solid #2563eb":"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:" Dine In"}),p.jsx("button",{type:"button",onClick:()=>Se("takeaway"),style:{flex:1,padding:"8px",fontSize:"13px",fontWeight:"600",backgroundColor:se==="takeaway"?"#3b82f6":"var(--panel-bg)",color:se==="takeaway"?"#ffffff":"var(--text)",border:se==="takeaway"?"2px solid #2563eb":"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:" Takeaway"})]}),p.jsxs("div",{style:{marginBottom:"12px"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"13px",color:"var(--text-secondary)"},children:[p.jsx("span",{children:"Subtotal:"}),p.jsxs("span",{children:["",_e()]})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"13px",color:"var(--text-secondary)"},children:[p.jsx("span",{children:"Takeaway Charges:"}),p.jsxs("span",{children:["",Re()]})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"700",color:"var(--text-primary)",paddingTop:"8px",borderTop:"1px solid var(--border)"},children:[p.jsx("span",{children:"Total:"}),p.jsxs("span",{children:["",je()]})]})]}),p.jsx("button",{type:"button",onClick:()=>Fe(se),style:{width:"100%",padding:"8px",marginTop:"8px",fontSize:"13px",fontWeight:"600",backgroundColor:Ce||L==="closed"||Z.length===0?"#9ca3af":"#10b981",color:"#ffffff",border:"1px solid #059669",borderRadius:"8px",cursor:Ce||L==="closed"||Z.length===0?"not-allowed":"pointer",transition:"all 0.2s",opacity:Ce?.8:1},disabled:Ce||L==="closed"||Z.length===0,children:Ce?"Processing":"Checkout"})]})]})]}):null,g&&p.jsxs("div",{className:"success-message",children:[p.jsx("div",{className:"success-title",children:" Order Placed Successfully!"}),p.jsxs("div",{className:"token-number",children:["Token No: #",g]}),p.jsx("div",{className:"success-description",children:"Please note this token number for order tracking"})]}),p.jsxs("div",{className:"instructions-section",children:[p.jsx("strong",{children:"Instructions:"})," Click on any menu item to place an order for cash payment. Each order will be created with a unique token number and automatically appear in the Orders panel."]})]}),Ce&&p.jsxs("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",zIndex:999999,display:"flex",alignItems:"center",justifyContent:"center"},children:[p.jsx("style",{children:`
            @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
          `}),p.jsxs("div",{style:{background:"var(--panel-bg)",border:"1px solid var(--border)",borderRadius:12,padding:"14px 16px",display:"flex",alignItems:"center",gap:10,color:"var(--text)"},children:[p.jsx("div",{style:{width:22,height:22,borderRadius:"50%",border:"3px solid var(--border)",borderTopColor:"#10b981",animation:"spin 1s linear infinite"}}),p.jsx("div",{style:{fontWeight:600,fontSize:14},children:"Processing checkout"})]})]}),g&&p.jsx(Mn,{title:"Your Token",children:p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[p.jsxs("div",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666",fontSize:"1.1em"},children:["#",g]}),p.jsx("div",{className:"muted",children:"Please share this token at the counter."})]})}),V!=="button"&&p.jsx("div",{className:"floating-cart-icon",style:{position:"fixed",bottom:"20px",right:"40px",zIndex:9999},children:p.jsxs("button",{onClick:()=>H(!B),className:"cart-icon-button",style:{width:"70px",height:"70px",borderRadius:"50%",backgroundColor:"#3b82f6",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease",position:"relative"},onMouseEnter:j=>{j.target.style.transform="scale(1.1)",j.target.style.boxShadow="0 6px 20px rgba(0, 0, 0, 0.25)",j.target.style.backgroundColor="#2563eb"},onMouseLeave:j=>{j.target.style.transform="scale(1)",j.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",j.target.style.backgroundColor="#3b82f6"},children:[p.jsx(as,{size:28}),ke()>0&&p.jsx("div",{className:"cart-badge",style:{position:"absolute",top:"-8px",right:"-8px",backgroundColor:"#ef4444",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid white"},children:ke()})]})}),V!=="button"&&p.jsx(Gn,{children:B&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"cart-backdrop",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998},onClick:()=>H(!1)}),p.jsxs(ct.div,{className:"cart-side-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:{position:"fixed",top:0,right:0,width:"400px",height:"100vh",backgroundColor:"#ffffff",borderLeft:"1px solid #e5e7eb",zIndex:9999,display:"flex",flexDirection:"column",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.15)"},children:[p.jsxs("div",{className:"cart-header",style:{padding:"20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9fafb"},children:[p.jsxs("h3",{style:{margin:0,color:"#1f2937",display:"flex",alignItems:"center",gap:"8px",fontSize:"18px",fontWeight:"600"},children:[p.jsx(as,{size:20}),"Your Cart"]}),p.jsx("button",{onClick:()=>H(!1),className:"cart-close-btn",style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:j=>{j.target.style.backgroundColor="#f3f4f6",j.target.style.borderColor="#9ca3af"},onMouseLeave:j=>{j.target.style.backgroundColor="#ffffff",j.target.style.borderColor="#d1d5db"},children:p.jsx(rn,{size:16})})]}),p.jsx("div",{className:"cart-content",style:{flex:1,padding:"20px",overflowY:"auto",display:"flex",flexDirection:"column",backgroundColor:"#ffffff"},children:Z.length===0?p.jsxs("div",{className:"cart-empty-state",style:{textAlign:"center",color:"#6b7280",padding:"40px 20px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[p.jsx(as,{size:48,style:{opacity:.3,color:"var(--text-secondary)"}}),p.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"var(--text-primary)"},children:"Your cart is empty"}),p.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"Add some items to get started!"})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{flex:1},children:Z.map(j=>p.jsxs("div",{className:"cart-item",style:{display:"flex",alignItems:"center",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"12px",marginBottom:"12px",border:"1px solid #e5e7eb",gap:"12px"},children:[p.jsxs("div",{style:{flex:1,minWidth:0},children:[p.jsx("div",{style:{fontWeight:"500",color:"#1f2937",marginBottom:"4px",fontSize:"16px",wordWrap:"break-word",overflowWrap:"break-word"},children:j.name}),p.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:["",j.price," each"]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("button",{onClick:()=>oe(j.id,j.quantity-1),className:"quantity-btn",style:{width:"32px",height:"32px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:"16px",fontWeight:"bold"},onMouseEnter:U=>{U.target.style.backgroundColor="#f3f4f6",U.target.style.borderColor="#9ca3af",U.target.style.color="#1f2937"},onMouseLeave:U=>{U.target.style.backgroundColor="#ffffff",U.target.style.borderColor="#d1d5db",U.target.style.color="#374151"},children:p.jsx(CR,{size:16})}),p.jsx("input",{type:"number",min:"0",value:j.quantity,onChange:U=>{const G=parseInt(U.target.value)||0;oe(j.id,G)},onBlur:U=>{const G=U.target.value.trim(),ne=parseInt(G)||0;G==="0"||ne<=0&&G!==""?Be(j.id):(G===""||ne<1)&&oe(j.id,1)},onKeyDown:U=>{U.key==="Backspace"&&U.target.value===""&&(U.preventDefault(),U.target.value="1",oe(j.id,1)),U.key==="Enter"&&U.target.blur()},style:{width:"50px",height:"32px",textAlign:"center",fontWeight:"500",color:"#1f2937",fontSize:"16px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#ffffff",outline:"none",padding:"0 4px"},onFocus:U=>U.target.select()}),p.jsx("button",{onClick:()=>oe(j.id,j.quantity+1),className:"quantity-btn",style:{width:"32px",height:"32px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:"16px",fontWeight:"bold"},onMouseEnter:U=>{U.target.style.backgroundColor="#f3f4f6",U.target.style.borderColor="#9ca3af",U.target.style.color="#1f2937"},onMouseLeave:U=>{U.target.style.backgroundColor="#ffffff",U.target.style.borderColor="#d1d5db",U.target.style.color="#374151"},children:p.jsx(OR,{size:16})})]}),p.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",minWidth:"60px",textAlign:"right",fontSize:"16px"},children:["",j.price*j.quantity]}),p.jsx("button",{onClick:()=>Be(j.id),className:"remove-btn",style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"#ef4444",color:"white",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",marginLeft:"8px"},onMouseEnter:U=>{U.target.style.backgroundColor="#dc2626"},onMouseLeave:U=>{U.target.style.backgroundColor="#ef4444"},children:p.jsx(Ww,{size:14})})]})]},j.id))}),p.jsxs("div",{className:"cart-footer",style:{borderTop:"1px solid #e5e7eb",paddingTop:"20px",marginTop:"20px"},children:[p.jsxs("div",{style:{marginBottom:"20px"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[p.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:se==="takeaway"&&Z.length>0?p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:["",_e()," + ",Re()," ="]}),p.jsxs("div",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",lineHeight:1.2},children:["Total: ",je()]})]}):p.jsxs("div",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937"},children:["Total: ",je()]})}),p.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[ke()," items"]})]}),se==="takeaway"&&Z.length>0&&p.jsxs("div",{style:{fontSize:"12px",color:"#f59e0b",backgroundColor:"#fef3c7",padding:"8px 12px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",border:"1px solid #fbbf24"},children:[p.jsx("span",{children:""}),p.jsx("span",{children:"Takeaway surcharge: +10 per item included"})]})]}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"12px",alignItems:"center"},children:[p.jsx("span",{style:{fontSize:"14px",color:"#374151",fontWeight:500},children:"Order Type:"}),p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[p.jsx("input",{type:"radio",name:"orderType",value:"dine_in",checked:se==="dine_in",onChange:()=>Se("dine_in")}),p.jsx("span",{children:" Dine In"})]}),p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[p.jsx("input",{type:"radio",name:"orderType",value:"takeaway",checked:se==="takeaway",onChange:()=>Se("takeaway")}),p.jsx("span",{children:" Takeaway"})]})]}),p.jsxs("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[p.jsxs("button",{onClick:()=>{Me({title:"Clear Cart?",message:"This will remove all items from the cart. You cannot undo this action.",confirmText:"Clear Cart",confirmStyle:"danger",onConfirm:()=>{pe([]),at({type:"success",message:"Cart cleared!"}),setTimeout(()=>at(null),2e3)}})},className:"clear-cart-btn",style:{width:"100%",padding:"10px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ffffff",color:"#dc2626",border:"1px solid #dc2626",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:j=>{j.target.style.backgroundColor="#fef2f2"},onMouseLeave:j=>{j.target.style.backgroundColor="#ffffff"},children:[p.jsx(rn,{size:16}),"Clear Cart"]}),p.jsx("button",{onClick:()=>{Ce||L==="closed"||Z.length===0||Fe(se)},className:"checkout-btn",disabled:Ce||L==="closed"||Z.length===0,style:{width:"100%",padding:"12px 16px",fontSize:"16px",fontWeight:"600",backgroundColor:Ce||L==="closed"||Z.length===0?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:Ce||L==="closed"||Z.length===0?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",opacity:Ce?.85:1},children:Ce?"Processing":L==="closed"?"Canteen Closed":"Place Order"})]})]})]})})]})]})}),p.jsx(Gn,{children:nt&&p.jsx(ct.div,{initial:{opacity:0,y:-40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-40,scale:.98},transition:{type:"spring",stiffness:300,damping:24},style:{position:"fixed",top:16,left:0,right:0,margin:"0 auto",zIndex:1e4,background:nt.type==="success"?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",padding:"12px 16px",borderRadius:10,boxShadow:"0 14px 30px rgba(0,0,0,0.22)",fontWeight:700,maxWidth:520,width:"calc(100% - 32px)",textAlign:"center",border:"1px solid rgba(255,255,255,0.15)",backdropFilter:"blur(6px)"},children:nt.message})}),p.jsx(Gn,{children:De&&p.jsxs(p.Fragment,{children:[p.jsx(ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Me(null),style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e4,backdropFilter:"blur(2px)"}}),p.jsxs(ct.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:24},style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",color:"#111827",borderRadius:12,width:"90%",maxWidth:420,padding:20,zIndex:10001,boxShadow:"0 20px 40px rgba(0,0,0,0.2)"},onClick:j=>j.stopPropagation(),children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[p.jsx("div",{style:{width:40,height:40,borderRadius:8,backgroundColor:De.confirmStyle==="danger"?"#fee2e2":"#eff6ff",display:"flex",alignItems:"center",justifyContent:"center"},children:p.jsx($n,{size:20,style:{color:De.confirmStyle==="danger"?"#dc2626":"#2563eb"}})}),p.jsx("h3",{style:{margin:0,fontSize:18,fontWeight:700},children:De.title||"Are you sure?"})]}),p.jsx("p",{style:{margin:"0 0 16px 0",fontSize:14,color:"#4b5563"},children:De.message||"Please confirm your action."}),p.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:10},children:[p.jsx("button",{onClick:()=>Me(null),style:{padding:"8px 14px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:8,cursor:"pointer",fontWeight:500},children:"Cancel"}),p.jsx("button",{onClick:()=>{try{De.onConfirm&&De.onConfirm()}finally{Me(null)}},style:{padding:"8px 14px",backgroundColor:De.confirmStyle==="danger"?"#ef4444":"#3b82f6",color:"#ffffff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600},children:De.confirmText||"Confirm"})]})]})]})})]})}function t9({withTitle:n=!0,orders:e=[],orderItems:t=[],onUpdateStatus:r=()=>{},onCancel:i=()=>{},idHeader:a="Order ID",updatingIds:l={},selectMode:c=!1,selectedOrderIds:d=new Set,onToggleSelect:f=()=>{},onToggleSelectAll:g=()=>{}}){const[m,y]=O.useState(Date.now());O.useEffect(()=>{const E=setInterval(()=>y(Date.now()),1e3);return()=>clearInterval(E)},[]);const x=E=>{const S=E?new Date(E).getTime():0,T=Math.max(0,Math.floor(((m||Date.now())-(isFinite(S)?S:0))/1e3)),R=Math.floor(T/3600),N=Math.floor(T%3600/60);return R>0?`${R}:${String(N).padStart(2,"0")}`:`${N}m`},w=E=>t.filter(S=>S.order_id===E),_=E=>typeof E=="boolean"?E?" Takeaway":" Dine In":E==="takeaway"?" Takeaway":" Dine In",A=e;return p.jsx(Mn,{title:n?"Orders":void 0,children:p.jsxs("table",{className:"table orders-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[c&&p.jsx("th",{style:{width:"3%",textAlign:"center"},children:p.jsx("input",{type:"checkbox",checked:A.length>0&&A.every(E=>d.has(E.id)),onChange:E=>g(A,E.target.checked)})}),p.jsx("th",{style:{width:"7%"},children:a}),p.jsx("th",{style:{width:"24%"},children:"Items"}),p.jsx("th",{style:{width:"6%",textAlign:"left"},children:"Quantity"}),p.jsx("th",{style:{width:"9%"},children:"Total"}),p.jsx("th",{style:{width:"11%",textAlign:"center"},children:"Status"}),p.jsx("th",{style:{width:"8%",textAlign:"center"},children:"Type"}),p.jsx("th",{style:{width:"10%",textAlign:"center"},children:"Placed By"}),p.jsx("th",{style:{width:"22%",textAlign:"center"},children:"Actions"})]})}),p.jsx("tbody",{children:A.map(E=>{const S=w(E.id),T=S&&S.length>0?S:[{food_items:{name:E.item_name,price:E.total_amount||0},quantity:1}],R=T.length>0;return p.jsxs("tr",{children:[c&&p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:p.jsx("input",{type:"checkbox",checked:d.has(E.id),onChange:()=>f(E)})}),p.jsx("td",{style:{verticalAlign:"middle"},children:p.jsx("span",{className:"dark:!text-white",style:{fontFamily:"monospace",fontWeight:"800"},children:E.token_no||E.order_token?"#"+(E.token_no||E.order_token):"Not available"})}),p.jsx("td",{style:{position:"relative",verticalAlign:"middle"},children:R?p.jsx("div",{className:"order-items-cell",style:{minWidth:"200px",maxWidth:"300px"},children:T.map((N,k)=>p.jsx("div",{style:{marginBottom:k<S.length-1?"4px":"0",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:p.jsx("strong",{children:N.food_items?.name||N.item_name||N.name||"Unknown Item"})},k))}):p.jsx("div",{children:p.jsx("strong",{children:E.item_name||"Unknown Item"})})}),p.jsx("td",{style:{verticalAlign:"middle"},children:R?p.jsx("div",{style:{minWidth:"40px"},children:T.map((N,k)=>p.jsx("div",{style:{marginBottom:k<S.length-1?"4px":"0",fontSize:"14px"},children:N.quantity||1},k))}):p.jsx("div",{style:{fontSize:"14px"},children:"1"})}),p.jsx("td",{style:{verticalAlign:"middle"},children:E.total_amount!=null?`${E.total_amount}`:"-"}),p.jsx("td",{style:{verticalAlign:"middle",textAlign:"center"},children:p.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},children:[p.jsxs("div",{children:[nn(E.status)==="PENDING"&&p.jsx("span",{className:"badge pending",children:"PENDING"}),nn(E.status)==="PREPARING"&&p.jsx("span",{className:"badge preparing",children:"PREPARING"}),nn(E.status)==="READY"&&p.jsx("span",{className:"badge ready",children:"READY"})]}),p.jsxs("div",{title:E.created_at?`Started: ${new Date(E.created_at).toLocaleString()}`:"",style:{display:"flex",alignItems:"center",gap:6,fontSize:12,color:"#374151",fontVariantNumeric:"tabular-nums"},children:[p.jsx(zw,{size:14}),p.jsx("span",{children:x(E.created_at)})]})]})}),p.jsx("td",{style:{verticalAlign:"middle",textAlign:"center"},children:p.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:_(E.order_type)})}),p.jsx("td",{style:{verticalAlign:"middle"},children:p.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap",justifyContent:"center"},children:Qu(E.user_id)?p.jsx(VR,{className:"w-5 h-5 text-gray-700 dark:text-white"}):p.jsx(dR,{className:"w-5 h-5 text-gray-700 dark:text-white"})})}),p.jsx("td",{style:{verticalAlign:"middle",textAlign:"center"},children:p.jsx("div",{className:"actions",style:{justifyContent:"center"},children:l[E.id]?p.jsxs("button",{className:"btn",disabled:!0,style:{minWidth:"140px"},children:[p.jsx("span",{className:"spinner",style:{marginRight:6}}),"Updating..."]}):p.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",justifyContent:"center"},children:[nn(E.status)==="PENDING"&&p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("button",{className:"btn",onClick:()=>r(E.id,"PREPARING"),style:{minWidth:"110px"},children:"Mark Preparing"}),p.jsx("button",{className:"btn",onClick:()=>i(E.id),title:"Cancel order","aria-label":"Cancel order",style:{backgroundColor:"#ef4444",color:"white",border:"none",width:36,height:36,minWidth:36,padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:p.jsx(rn,{size:16})})]}),nn(E.status)==="PREPARING"&&p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("button",{className:"btn",onClick:()=>r(E.id,"READY"),style:{minWidth:"110px"},children:"Mark Ready"}),p.jsx("button",{className:"btn",onClick:()=>i(E.id),title:"Cancel order","aria-label":"Cancel order",style:{backgroundColor:"#ef4444",color:"white",border:"none",width:36,height:36,minWidth:36,padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:p.jsx(rn,{size:16})})]}),nn(E.status)==="READY"&&p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("button",{className:"btn",onClick:()=>r(E.id,"DELIVERED"),style:{minWidth:"120px"},children:"Mark Delivered"}),p.jsx("button",{className:"btn",onClick:()=>i(E.id),title:"Cancel order","aria-label":"Cancel order",style:{backgroundColor:"#ef4444",color:"white",border:"none",width:36,height:36,minWidth:36,padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:p.jsx(rn,{size:16})})]})]})})})]},E.id)})})]})})}function n9({orders:n,deliveredOrders:e=[],activity:t=[],onUpdateStatus:r,onRevert:i,onCancel:a,onCancelOrder:l,view:c="live",pictureMode:d=!1,updatingIds:f={}}){console.log(" OrdersPage received view:",c);const g=c==="live",[m,y]=O.useState([]),x=O.useMemo(()=>{if(!n||n.length===0)return[];const $=new Map,Oe=new Map;for(const Ce of m||[]){const $e=[Ce?.id,Ce?.item_id,Ce?.code,Ce?.slug].map(Ge=>Ge!=null?String(Ge).toLowerCase():null).filter(Boolean),Ie=(Ce?.name||Ce?.item_name||"").toLowerCase().trim();for(const Ge of $e)$.has(Ge)||$.set(Ge,Ce);Ie&&!Oe.has(Ie)&&Oe.set(Ie,Ce)}return n.map(Ce=>{const $e=[Ce?.food_item_id,Ce?.foodItemId,Ce?.item_id,Ce?.itemId,Ce?.item].map(X=>X!=null?String(X).toLowerCase():null).filter(Boolean);let Ie=null;for(const X of $e)if($.has(X)){Ie=$.get(X);break}if(!Ie){const X=(Ce?.item_name||"").toLowerCase().trim();X&&Oe.has(X)&&(Ie=Oe.get(X))}const Ge=Ce?.quantity!=null?Number(Ce.quantity):1,Pe=Number.isFinite(Ge)&&Ge>0?Ge:1,nt=Ce?.total_amount!=null&&!Number.isNaN(Number(Ce.total_amount))?Number(Ce.total_amount):null,at=nt!=null&&Pe?Number((nt/Pe).toFixed(2)):nt;return{order_id:Ce?.id,item_name:Ce?.item_name,quantity:Pe,price_per_unit:Number.isFinite(at)?at:null,total_price:nt,food_items:Ie?{name:Ie?.name??Ie?.item_name??null,image_url:Ie?.image_url??null,price:Ie?.price!=null&&!Number.isNaN(Number(Ie.price))?Number(Ie.price):null}:null}})},[n,m]),[w,_]=O.useState(!1),[A,E]=O.useState("cancel"),[S,T]=O.useState(""),[R,N]=O.useState(!1),[k,M]=O.useState({text:"",type:""}),[V,ie]=O.useState(!1),[fe,xe]=O.useState([]),[q,we]=O.useState(""),Te=O.useRef(null),[ae,L]=O.useState(new Set),te=q.trim(),ce=te?n.filter($=>String($.token_no||$.order_token||"").includes(te)):n,Z=te?e.filter($=>String($.token_no||$.order_token||"").includes(te)):e,pe=typeof document<"u"&&document.documentElement.classList.contains("dark");O.useEffect(()=>{const $=()=>{g&&_(!0)};return window.addEventListener("openBulkCancel",$),()=>{window.removeEventListener("openBulkCancel",$)}},[g]),O.useEffect(()=>{const $=Oe=>{Oe.key==="Escape"&&(_(!1),ie(!1))};return(w||V)&&window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[w,V]),O.useEffect(()=>{const $=Oe=>{Oe.key.toLowerCase()==="s"&&document.activeElement.tagName!=="INPUT"&&document.activeElement.tagName!=="TEXTAREA"&&(Oe.preventDefault(),Te.current&&Te.current.focus())};return window.addEventListener("keydown",$),()=>{window.removeEventListener("keydown",$)}},[]),n.filter($=>ae.has($.id));const B=$=>{L(Oe=>{const Ce=new Set(Oe);return Ce.has($.id)?Ce.delete($.id):Ce.add($.id),Ce})},H=($,Oe)=>{L(Ce=>{const $e=new Set(Ce);return Oe?$.forEach(Ie=>$e.add(Ie.id)):$.forEach(Ie=>$e.delete(Ie.id)),$e})},se=$=>{switch(nn($)){case"PENDING":return{nextStatus:"PREPARING",buttonText:"Start Preparing",buttonClass:"btn-primary"};case"PREPARING":return{nextStatus:"READY",buttonText:"Mark Ready",buttonClass:"btn-success"};case"READY":return{nextStatus:"DELIVERED",buttonText:"Mark Delivered",buttonClass:"btn-primary"};default:return null}};O.useEffect(()=>{let $=!0;return(async()=>{try{let $e=0,Ie=[];for(;;){const Ge=$e+1e3-1,{data:Pe,error:nt}=await Ee.from("food_items").select("*").range($e,Ge);if(nt)throw nt;const at=Pe||[];if(Ie=Ie.concat(at),at.length<1e3)break;$e+=1e3}$&&y(Ie)}catch(Ce){console.error("Failed to fetch data for orders:",Ce),$&&y([])}})(),()=>{$=!1}},[]);const Se=$=>{try{const Oe=n.find($e=>$e.id===$)||e.find($e=>$e.id===$),Ce=Oe&&(Oe.token_no||Oe.order_token);return Ce?"#"+Ce:"Not available"}catch{return"Not available"}},De=$=>x.filter(Oe=>Oe.order_id===$),Me=$=>{const Oe=De($.id);if(Oe.length>0){const Ie=Oe[0];if(Ie.food_items&&Ie.food_items.image_url)return Ie.food_items.image_url}const Ce=($.item_name||"").toLowerCase(),$e=m.find(Ie=>{const Ge=(Ie.name||Ie.item_name||"").toLowerCase();return Ge===Ce||Ge.includes(Ce)||Ce.includes(Ge)});return $e&&$e.image_url?$e.image_url:Ce.includes("samosa")?"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg":Ce.includes("biryani")?"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg":Ce.includes("dosa")?"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg":"https://via.placeholder.com/300?text=Food"},Ye=async $=>{const Oe=$||A,Ce=n.filter(Ie=>ae.has(Ie.id)).map(Ie=>String(Ie.token_no||Ie.order_token)).filter(Boolean),$e=Ce.length>0?Ce.join(","):S;if(!$e.trim()){M({text:"Please select orders from the table",type:"error"});return}if(Oe==="cancel"){const Ie=$e.split(/[,\s\n]+/).map(Pe=>Pe.trim().replace(/^#/,"")).filter(Pe=>Pe.length>0);if(Ie.length===0){M({text:"No valid token numbers found",type:"error"});return}const Ge=n.filter(Pe=>{const nt=Pe.token_no||Pe.order_token;return nt&&Ie.includes(String(nt))});if(Ge.length===0){M({text:`No orders found with token numbers: ${Ie.join(", ")}`,type:"error"});return}console.log(" Showing confirmation modal for orders:",Ge),xe(Ge),ie(!0);return}N(!0),M({text:"",type:""});try{const Ie=$e.split(/[,\s\n]+/).map(X=>X.trim().replace(/^#/,"")).filter(X=>X.length>0);if(Ie.length===0){M({text:"No valid token numbers found",type:"error"}),N(!1);return}console.log(` Bulk ${Oe==="cancel"?"Cancel":"Mark Delivered"}: Looking for orders with tokens:`,Ie);const Ge=n.filter(X=>{const oe=X.token_no||X.order_token;return oe&&Ie.includes(String(oe))});if(Ge.length===0){M({text:`No orders found with token numbers: ${Ie.join(", ")}`,type:"error"}),N(!1);return}console.log(` Found ${Ge.length} orders to ${Oe}`);let Pe=0,nt=0;const at=[];for(const X of Ge)try{const oe=X.token_no||X.order_token;if(console.log(`${Oe==="cancel"?"Cancelling":"Marking delivered"} order with token #${oe}`),Oe==="cancel"){const Be=X.token_no||X.order_token,{data:Ne,error:je}=await Ee.from("orders").select("item_name, status, id").eq("id",X.id).single();if(je)throw new Error(`Failed to fetch order: ${je.message}`);const{error:_e}=await Ee.from("orders").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",X.id);if(_e)throw new Error(`Failed to cancel order: ${_e.message}`);if(Ne.item_name){const{data:Re}=await Ee.from("food_items").select("available_quantity").eq("name",Ne.item_name).single();Re&&await Ee.from("food_items").update({available_quantity:Re.available_quantity+1,is_available:!0,updated_at:new Date().toISOString()}).eq("name",Ne.item_name)}}else await r(X.id,"DELIVERED");Pe++}catch(oe){console.error(`Failed to ${Oe==="cancel"?"cancel":"mark delivered"} order ${X.id}:`,oe),nt++,at.push(X.token_no||X.order_token)}Pe===Ge.length?(M({text:` Successfully ${Oe==="cancel"?"cancelled":"marked as delivered"} ${Pe} order(s)`,type:"success"}),T(""),setTimeout(()=>{_(!1),M({text:"",type:""})},2e3)):M({text:` ${Oe==="cancel"?"Cancelled":"Marked delivered"} ${Pe} order(s). Failed: ${nt} (Tokens: ${at.join(", ")})`,type:"warning"})}catch(Ie){console.error(` Bulk ${Oe} error:`,Ie),M({text:`Error: ${Ie.message}`,type:"error"})}finally{N(!1)}},ut=async()=>{ie(!1),N(!0),M({text:"",type:""});try{let $=0,Oe=0;const Ce=[];for(const $e of fe)try{const Ie=$e.token_no||$e.order_token;console.log(`Cancelling order with token #${Ie}`);const{data:Ge,error:Pe}=await Ee.from("orders").select("item_name, status, id").eq("id",$e.id).single();if(Pe)throw new Error(`Failed to fetch order: ${Pe.message}`);const{error:nt}=await Ee.from("orders").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",$e.id);if(nt)throw new Error(`Failed to cancel order: ${nt.message}`);if(Ge.item_name){const{data:at}=await Ee.from("food_items").select("available_quantity").eq("name",Ge.item_name).single();at&&await Ee.from("food_items").update({available_quantity:at.available_quantity+1,is_available:!0,updated_at:new Date().toISOString()}).eq("name",Ge.item_name)}$++}catch(Ie){console.error(`Failed to cancel order ${$e.id}:`,Ie),Oe++,Ce.push($e.token_no||$e.order_token)}$===fe.length?(M({text:` Successfully cancelled ${$} order(s)`,type:"success"}),T(""),setTimeout(()=>{_(!1),M({text:"",type:""})},2e3)):M({text:` Cancelled ${$} order(s). Failed: ${Oe} (Tokens: ${Ce.join(", ")})`,type:"warning"})}catch($){console.error(" Bulk cancel error:",$),M({text:`Error: ${$.message}`,type:"error"})}finally{N(!1)}};return p.jsxs("div",{className:"home-dashboard",children:[c!=="activity"&&p.jsx("div",{style:{display:"flex",justifyContent:"flex-end",padding:"0 4px",marginBottom:d&&g?12:16},children:p.jsx("input",{ref:Te,value:q,onChange:$=>we($.target.value),placeholder:"Search token number (press S)",style:{width:"min(320px, 100%)",padding:"8px 14px",borderRadius:10,border:`1px solid ${pe?"#374151":"#d1d5db"}`,backgroundColor:pe?"#0f172a":"#ffffff",color:pe?"#e5e7eb":"#111827",fontSize:13,boxShadow:pe?"0 1px 2px rgba(15, 23, 42, 0.35)":"0 1px 2px rgba(148, 163, 184, 0.25)",transition:"border-color 0.2s ease, box-shadow 0.2s ease"},onFocus:$=>{$.currentTarget.style.borderColor=pe?"#60a5fa":"#2563eb"},onBlur:$=>{$.currentTarget.style.borderColor=pe?"#374151":"#d1d5db"}})}),c==="activity"?p.jsx(Mn,{title:void 0,children:p.jsxs("table",{className:"table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{style:{width:"25%"},children:"Item Name"}),p.jsx("th",{style:{width:"15%",textAlign:"center"},children:"Token No"}),p.jsx("th",{style:{width:"20%",textAlign:"center"},children:"From  To"}),p.jsx("th",{style:{width:"20%",textAlign:"center"},children:"At"}),p.jsx("th",{style:{width:"20%",textAlign:"center"},children:"Actions"})]})}),p.jsx("tbody",{children:t.slice(0,20).map(($,Oe)=>{const $e=$.ts&&Date.now()-$.ts<3e5;return p.jsxs("tr",{children:[p.jsx("td",{style:{verticalAlign:"middle"},children:p.jsx("strong",{children:$.itemName||"Order Item"})}),p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:p.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666"},children:Se($.orderId)})}),p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:p.jsxs("span",{style:{whiteSpace:"nowrap"},children:[$.from,"  ",$.to]})}),p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",fontSize:"13px"},children:$.at}),p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:$e?p.jsx("button",{className:"btn btn-secondary",onClick:()=>i($),style:{minWidth:"80px",margin:"0 auto"},children:"Revert"}):p.jsx("span",{style:{fontSize:"12px",color:"#9ca3af",fontStyle:"italic",whiteSpace:"nowrap"},children:"Expired"})})]},Oe)})})]})}):g?d?p.jsx(Mn,{title:void 0,children:p.jsx("div",{className:"cards-grid",children:ce.length===0?p.jsx("div",{style:{gridColumn:"1 / -1",padding:"32px 0",textAlign:"center",color:"#6b7280",fontSize:14},children:"No live orders match that token."}):ce.map($=>{const Oe=De($.id),Ce=Oe&&Oe.length>0?Oe:[{food_items:{name:$.item_name,price:$.total_amount||0,image_url:null},quantity:1}],$e=p.jsxs("div",{style:{marginBottom:12},children:[nn($.status)==="PENDING"&&p.jsx("span",{className:"badge pending",children:"PENDING"}),nn($.status)==="PREPARING"&&p.jsx("span",{className:"badge preparing",children:"PREPARING"}),nn($.status)==="READY"&&p.jsx("span",{className:"badge ready",children:"READY"}),nn($.status)==="DELIVERED"&&p.jsx("span",{className:"badge ready",children:"DELIVERED"})]}),Ie=()=>{if(f&&f[$.id])return p.jsxs("button",{className:"btn",disabled:!0,style:{minWidth:"140px"},children:[p.jsx("span",{className:"spinner",style:{marginRight:6}}),"Updating..."]});const Pe=se($.status);return Pe?p.jsxs(p.Fragment,{children:[p.jsx("button",{className:`btn ${Pe.buttonClass}`,onClick:()=>r($.id,Pe.nextStatus),style:{minWidth:"140px"},children:Pe.buttonText}),p.jsx("button",{className:"btn btn-danger",onClick:()=>a($.id),title:"Cancel order","aria-label":"Cancel order",style:{width:36,height:36,minWidth:36,padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:p.jsx(rn,{size:16})})]}):null},Ge=Math.max(1,Math.min(3,Ce.length||1));return Ce.length>1?p.jsxs("div",{className:"order-card",style:{gridColumn:`span ${Ge}`},children:[p.jsx("div",{style:{fontFamily:"monospace",fontWeight:800,color:"#111827",fontSize:"1.2em",marginBottom:8},children:$.token_no||$.order_token?"#"+($.token_no||$.order_token):"Not available"}),p.jsx("div",{style:{marginBottom:12},children:Qu($.user_id)?p.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:" Counter"}):p.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:" App"})}),p.jsx("div",{className:"pm-items",children:Ce.map((Pe,nt)=>{const at=Pe.food_items?.image_url||Me({item_name:Pe.food_items?.name});return p.jsxs("div",{className:"pm-item",style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("img",{src:at,alt:Pe.food_items?.name||"Item",style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"6px",flexShrink:0},onError:X=>{const oe=X.currentTarget;oe.src!=="https://via.placeholder.com/300?text=Food"&&(oe.src="https://via.placeholder.com/300?text=Food")}}),p.jsxs("div",{style:{flex:1,minWidth:0},children:[p.jsxs("div",{className:"pm-item-name",style:{fontSize:"13px",lineHeight:"1.3"},children:[Pe.food_items?.name||"Unknown Item"," ",Pe.quantity||1]}),p.jsxs("div",{className:"pm-item-meta",children:["",Pe.food_items?.price||Pe.price||0]})]})]},nt)})}),$e,p.jsx("div",{className:"actions",style:{justifyContent:"center",display:"flex",flexDirection:"column",gap:"8px",minHeight:0,width:"100%"},children:Ie()})]},$.id):p.jsxs("div",{className:"order-card",children:[p.jsx("div",{className:"avatar",style:{width:"100px",height:"100px"},children:p.jsx("img",{src:Me($),alt:$.item_name||"Order Item",loading:"lazy",style:{objectFit:"cover",width:"100%",height:"100%",transition:"opacity 0.2s ease-in-out",backgroundColor:"#f3f4f6"},onLoad:Pe=>{Pe.currentTarget.style.opacity="1"},onError:Pe=>{const nt=Pe.currentTarget;nt.src!=="https://via.placeholder.com/300?text=Food"&&(nt.style.opacity="0.5",setTimeout(()=>{nt.src="https://via.placeholder.com/300?text=Food",nt.style.opacity="1"},100))}})}),p.jsx("div",{style:{fontFamily:"monospace",fontWeight:800,color:"#111827",fontSize:"0.95em",marginBottom:4},children:$.token_no||$.order_token?"#"+($.token_no||$.order_token):"Not available"}),p.jsx("div",{className:"pm-item-name",children:$.item_name}),p.jsx("div",{style:{margin:"8px 0"},children:Qu($.user_id)?p.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:" Counter"}):p.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:" App"})}),$e,p.jsx("div",{className:"actions",style:{justifyContent:"center",display:"flex",flexDirection:"column",gap:"8px",minHeight:0},children:Ie()})]},$.id)})})}):p.jsx(t9,{withTitle:!1,idHeader:"Token No",orders:ce,orderItems:x,onUpdateStatus:r,onCancel:a,updatingIds:f,selectMode:w,selectedOrderIds:ae,onToggleSelect:B,onToggleSelectAll:H}):p.jsx(Mn,{title:void 0,children:p.jsxs("table",{className:"table past-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Token No"}),p.jsx("th",{style:{width:"20%"},children:"Item Name"}),p.jsx("th",{style:{width:"10%",textAlign:"right"},children:"Price"}),p.jsx("th",{style:{width:"10%",textAlign:"center"},children:"ETA"}),p.jsx("th",{style:{width:"24%",textAlign:"center"},children:"Delivered At"}),p.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Placed By"}),p.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Status"})]})}),p.jsx("tbody",{children:Z.map($=>{const Oe=$.created_at?new Date($.created_at):null,Ce=$.delivered_at?new Date($.delivered_at):Oe,$e=De($.id),Ie=$e.length>0;return p.jsxs("tr",{children:[p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:p.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666"},children:$.token_no||$.order_token?"#"+($.token_no||$.order_token):"N/A"})}),p.jsx("td",{style:{position:"relative",verticalAlign:"middle"},children:Ie?p.jsx("div",{className:"order-items-cell",style:{minWidth:"200px",maxWidth:"300px"},children:$e.map((Ge,Pe)=>p.jsx("div",{style:{marginBottom:Pe<$e.length-1?"4px":"0",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:p.jsx("strong",{children:Ge.food_items?.name||"Unknown Item"})},Pe))}):p.jsx("strong",{children:$.item_name||"Unknown Item"})}),p.jsx("td",{style:{textAlign:"right",verticalAlign:"middle"},children:$.total_amount!=null?`${$.total_amount}`:"-"}),p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",fontSize:"13px",fontVariantNumeric:"tabular-nums",whiteSpace:"nowrap"},children:(()=>{const Ge=Oe?Oe.getTime():null,Pe=$.delivered_at?new Date($.delivered_at).getTime():$.updated_at?new Date($.updated_at).getTime():null;if(!Ge||!Pe||!isFinite(Ge)||!isFinite(Pe)||Pe<Ge)return"-";const nt=Math.floor((Pe-Ge)/1e3),at=Math.floor(nt/3600),X=Math.floor(nt%3600/60),oe=nt%60;return at>0?`${at}:${String(X).padStart(2,"0")}:${String(oe).padStart(2,"0")}`:`${X}:${String(oe).padStart(2,"0")}`})()}),p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",fontSize:"13px",whiteSpace:"nowrap"},children:Ce?Ce.toLocaleString():"-"}),p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:Qu($.user_id)?p.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:"Counter"}):p.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:"App"})}),p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:p.jsx("span",{className:"badge ready",children:"DELIVERED"})})]},$.id)})})]})}),p.jsx(Gn,{mode:"wait",children:w&&p.jsx(p.Fragment,{children:kv.createPortal(p.jsx(ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999999,display:"flex",alignItems:"flex-start",justifyContent:"flex-end",padding:"20px",pointerEvents:"none",backgroundColor:"rgba(0,0,0,0.4)"},children:p.jsxs(ct.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{x:100,opacity:0},transition:{duration:.3,ease:"easeOut"},onClick:$=>$.stopPropagation(),style:{position:"relative",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",width:"400px",height:"fit-content",maxHeight:"80vh",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",zIndex:1e6,marginTop:"20px",pointerEvents:"auto"},className:"dark:!bg-gray-800",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[p.jsx("button",{onClick:()=>_(!1),disabled:R,style:{width:"64px",height:"64px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px",border:"none",cursor:R?"not-allowed":"pointer",opacity:R?.5:1,transition:"all 0.2s"},title:"Close",onMouseEnter:$=>{R||($.target.style.backgroundColor="#fecaca")},onMouseLeave:$=>{R||($.target.style.backgroundColor="#fee2e2")},children:p.jsx(rn,{size:38,style:{color:"#dc2626"}})}),p.jsx("div",{style:{flex:1},children:p.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Bulk Order Actions"})})]}),p.jsx("p",{className:"dark:!text-gray-300",style:{margin:"0 0 16px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:"Select orders directly in the table using the checkboxes, then choose an action."}),p.jsx("div",{style:{marginBottom:"16px",padding:"10px 12px",borderRadius:"8px",backgroundColor:"#f3f4f6"},className:"dark:!bg-gray-700",children:p.jsxs("span",{className:"dark:!text-gray-200",style:{fontSize:"14px"},children:["Selected orders: ",p.jsx("strong",{children:Array.from(ae).length})]})}),k.text&&p.jsx(ct.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{padding:"12px 16px",borderRadius:"8px",marginBottom:"20px",backgroundColor:k.type==="success"?"#d1fae5":k.type==="error"?"#fee2e2":"#fff3cd",color:k.type==="success"?"#065f46":k.type==="error"?"#991b1b":"#92400e",fontSize:"14px",fontWeight:"500"},children:k.text}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[p.jsx("button",{onClick:()=>_(!1),disabled:R,style:{width:"100%",padding:"20px 24px",fontSize:"18px",fontWeight:"700",lineHeight:"1",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"10px",cursor:R?"not-allowed":"pointer",transition:"all 0.2s",height:"64px",display:"flex",alignItems:"center",justifyContent:"center"},className:"dark:!bg-gray-700 dark:!text-gray-200 bulk-close-btn",onMouseEnter:$=>{R||($.target.style.backgroundColor="#e5e7eb")},onMouseLeave:$=>{R||($.target.style.backgroundColor="#f3f4f6")},children:"Close"}),p.jsxs("div",{style:{display:"flex",gap:"12px"},children:[p.jsx("button",{onClick:()=>{E("deliver"),Ye("deliver")},disabled:R||Array.from(ae).length===0,style:{flex:1,padding:"12px 20px",fontSize:"14px",fontWeight:"600",backgroundColor:R||Array.from(ae).length===0?"#9ca3af":"#10b981",color:"#ffffff",border:"none",borderRadius:"8px",cursor:R||Array.from(ae).length===0?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:$=>{!R&&Array.from(ae).length>0&&($.target.style.backgroundColor="#059669")},onMouseLeave:$=>{!R&&Array.from(ae).length>0&&($.target.style.backgroundColor="#10b981")},children:R&&A==="deliver"?p.jsxs(p.Fragment,{children:[p.jsx(gi,{className:"w-4 h-4 animate-spin"}),"Marking..."]}):p.jsxs(p.Fragment,{children:[p.jsx(lo,{size:18}),"Mark Delivered"]})}),p.jsx("button",{onClick:()=>{E("cancel"),Ye("cancel")},disabled:R||Array.from(ae).length===0,style:{flex:1,padding:"12px 20px",fontSize:"14px",fontWeight:"600",backgroundColor:R||Array.from(ae).length===0?"#9ca3af":"#ef4444",color:"#ffffff",border:"none",borderRadius:"8px",cursor:R||Array.from(ae).length===0?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:$=>{!R&&Array.from(ae).length>0&&($.target.style.backgroundColor="#dc2626")},onMouseLeave:$=>{!R&&Array.from(ae).length>0&&($.target.style.backgroundColor="#ef4444")},children:R&&A==="cancel"?p.jsxs(p.Fragment,{children:[p.jsx(gi,{className:"w-4 h-4 animate-spin"}),"Cancelling..."]}):p.jsxs(p.Fragment,{children:[p.jsx(rn,{size:18}),"Cancel Orders"]})})]})]})]})}),document.body)})}),V&&kv.createPortal(p.jsx(ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:9999999,backdropFilter:"blur(4px)"},children:p.jsxs(ct.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",stiffness:300,damping:25},style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[p.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"20px"},children:[p.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:p.jsx($n,{size:24,style:{color:"#dc2626"}})}),p.jsxs("div",{style:{flex:1},children:[p.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"20px",fontWeight:"600",color:"#111827"},className:"dark:text-white",children:"Cancel Orders?"}),p.jsx("p",{style:{margin:0,fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},className:"dark:text-gray-300",children:"Are you sure you want to cancel these orders?"})]})]}),p.jsx("div",{style:{marginBottom:"20px"},children:p.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",backgroundColor:"#f3f4f6",borderRadius:"8px",padding:"8px 12px"},children:fe.map(($,Oe)=>p.jsx("div",{style:{display:"inline-block",margin:"4px 4px 4px 0",padding:"6px 12px",backgroundColor:"#ffffff",borderRadius:"16px",fontSize:"14px",fontWeight:"500",color:"#111827",border:"1px solid #e5e7eb"},children:$.item_name},$.id))})}),p.jsxs("div",{style:{backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"12px",marginBottom:"24px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[p.jsx($n,{size:16,style:{color:"#f59e0b",flexShrink:0,marginTop:"2px"}}),p.jsx("p",{style:{margin:0,fontSize:"14px",color:"#92400e",lineHeight:"1.5"},children:"This will mark the orders as cancelled and the customer will need to place a new order."})]}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>ie(!1),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:$=>{$.target.style.backgroundColor="#e5e7eb"},onMouseLeave:$=>{$.target.style.backgroundColor="#f3f4f6"},children:"Keep Orders"}),p.jsx("button",{onClick:ut,disabled:R,style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:R?"#d1d5db":"#ef4444",color:"#ffffff",border:"none",borderRadius:"8px",cursor:R?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:$=>{R||($.target.style.backgroundColor="#dc2626")},onMouseLeave:$=>{R||($.target.style.backgroundColor="#ef4444")},children:R?p.jsxs(p.Fragment,{children:[p.jsx(gi,{size:16,className:"animate-spin"}),p.jsx("span",{children:"Cancelling..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(rn,{size:16}),p.jsx("span",{children:"Cancel Orders"})]})})]})]})}),document.body)]})}function r9(){xd();const[n,e]=O.useState([]),[t,r]=O.useState({id:"",name:"",removeItemName:""}),[i,a]=O.useState(""),[l,c]=O.useState("all"),[d,f]=O.useState(!1),[g,m]=O.useState(!1),[y,x]=O.useState({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),[w,_]=O.useState(!1),[A,E]=O.useState(""),[S,T]=O.useState("id"),[R,N]=O.useState("available_quantity"),[k,M]=O.useState(null),[V,ie]=O.useState(null),[fe,xe]=O.useState({show:!1,message:"",type:"success"}),[q,we]=O.useState("all"),[Te,ae]=O.useState(!1),[L,te]=O.useState(null),[ce,Z]=O.useState(null),[pe,B]=O.useState(!1),[H,se]=O.useState({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),[Se,De]=O.useState([]),[Me,Ye]=O.useState(!1),[ut,$]=O.useState("all"),[Oe,Ce]=O.useState(""),[$e,Ie]=O.useState([]),[Ge,Pe]=O.useState(-1),[nt,at]=O.useState(null),[X,oe]=O.useState(null),[Be,Ne]=O.useState(null),je=async()=>{try{Ye(!0);const{data:D,error:J}=await Ee.from("categories").select("*").order("name");if(J){console.error("Error fetching categories:",J);return}De(D||[]),console.log(" Loaded categories:",D)}catch(D){console.error("Error fetching categories:",D)}finally{Ye(!1)}},_e=async()=>{try{let J=0,ye=[];for(;;){const et=J+1e3-1,{data:cn,error:_t}=await Ee.from("food_items").select("*").range(J,et);if(_t)throw _t;const un=cn||[];if(ye=ye.concat(un),un.length<1e3)break;J+=1e3}ye=ye.filter(et=>et.is_active!==!1);const He=ye[0]||{},Le=["id","item_id","slug","code"],Ze=["available_quantity","in_stock","available","is_available","stock","status"],lt=Le.find(et=>Object.prototype.hasOwnProperty.call(He,et))||"id",Gt=Ze.find(et=>Object.prototype.hasOwnProperty.call(He,et))||"in_stock";T(lt),N(Gt);const ln=ye.map(et=>{const cn=et[lt]??String(Math.random()).slice(2),_t=et.name??et.item_name??et.title??et.label??"Item",un=et.price??et.cost??0,li=et.available_quantity??et.quantity??et.stock??0,fo=et.category_id??et.categoryId??et.category??null,sc=fo!=null?String(fo):null,Id=et.category_name??et.categoryName??null,lc=(typeof li=="number"?li>0:void 0)??et.in_stock??et.available??et.is_available??(typeof et.stock=="number"?et.stock>0:void 0)??(typeof et.status=="string"?String(et.status).toLowerCase()==="in":void 0)??!0;return{id:cn,name:_t,price:un,availableQuantity:li,inStock:!!lc,categoryId:sc,category_id:sc,categoryName:Id??null,image_url:et.image_url,description:et.description,originalData:et}});e(ln)}catch(D){console.error("Error fetching items:",D)}},Re=()=>{_e()},ke=D=>{if(!D)return null;const J=n.find(ye=>ye.name.toLowerCase().trim()===D.toLowerCase().trim());return console.log("Searching for:",D,"Found:",J,"Items:",n.map(ye=>ye.name)),J},Ue=O.useMemo(()=>{const D=new Map;for(const J of Se||[]){const ye=J?.id!=null?String(J.id):null;ye&&D.set(ye,J.name||"Uncategorized")}return D},[Se]),it=O.useMemo(()=>n.reduce((D,J)=>{const ye=J?.categoryId!=null?String(J.categoryId):"uncategorized";return D[ye]=(D[ye]||0)+1,D},{}),[n]);O.useEffect(()=>{if(ut==="all"||ut==="uncategorized")return;n.some(J=>String(J.categoryId)===ut)||$("all")},[n,ut]);const Fe=D=>{if(!D.trim())return[];const J=D.toLowerCase().trim();return n.filter(ye=>ye.name.toLowerCase().includes(J)).slice(0,5)},j=D=>{Ce(D),te(null);const J=Fe(D);Ie(J),Pe(-1)},U=()=>{if(!Oe.trim())return;const D=Oe.trim(),J=ke(D);J?at({item:J}):(x({...y,name:D}),m(!0),Ce(""),Ie([]))},G=D=>{nt&&(D==="edit"?(ot(nt.item),at(null),Ce(""),Ie([])):D==="remove"&&(oe({itemId:nt.item.id,itemName:nt.item.name}),at(null)))},ne=async()=>{X&&(await dr(X.itemId),oe(null),Ce(""),Ie([]))},ve=D=>{Ce(D.name),Ie([]),Pe(-1)},ge=()=>q==="all"?n:n.filter(D=>{switch(q){case"in-stock":return D.inStock&&D.availableQuantity>20;case"low-stock":return D.inStock&&D.availableQuantity<=20&&D.availableQuantity>5;case"very-low":return D.inStock&&D.availableQuantity<=5&&D.availableQuantity>0;case"out-of-stock":return!D.inStock||D.availableQuantity===0;default:return!0}}),me=async()=>{try{console.log(" Checking if food_images bucket exists...");const{data:D,error:J}=await Ee.storage.listBuckets();if(J)return console.error(" Error listing buckets:",J),!1;if(D.find(He=>He.name==="food_images"))return console.log(" food_images bucket already exists"),!0;{console.log(" food_images bucket not found, attempting to create...");const{error:He}=await Ee.rpc("create_food_images_bucket");if(He){console.log(" RPC method failed, trying direct SQL...");const{error:Le}=await Ee.from("storage.buckets").insert([{id:"food_images",name:"food_images",public:!0,file_size_limit:52428800,allowed_mime_types:["image/jpeg","image/png","image/gif","image/webp"]}]);if(Le)return console.error(" Failed to create bucket:",Le),!1}return console.log(" food_images bucket created successfully!"),!0}}catch(D){return console.error(" Error creating bucket:",D),!1}};O.useEffect(()=>{(async()=>{try{if(console.log(" Testing Supabase Storage connection..."),!await me()){console.warn(" Could not ensure food_images bucket exists");return}const{data:ye,error:He}=await Ee.storage.listBuckets();if(He){console.error(" Error listing buckets:",He);return}if(console.log(" Available buckets:",ye.map(Ze=>Ze.name)),ye.find(Ze=>Ze.name==="food_images")){console.log(" food_images bucket ready for use!");const{data:Ze,error:lt}=await Ee.storage.from("food_images").list();lt?console.warn(" Could not list files in bucket:",lt.message):console.log(" Files in food_images bucket:",Ze.length)}}catch(J){console.error(" Storage connection test failed:",J)}})()},[]),O.useEffect(()=>{_e(),je()},[]);const be=async()=>{console.log(" Using direct Supabase upload fallback...");let D=null,J=!1;if(y.image)try{console.log(" Uploading image to Supabase Storage..."),console.log(" Image file details:",{name:y.image.name,size:y.image.size,type:y.image.type});const lt=Date.now(),Gt=y.image.name.split(".").pop().toLowerCase(),ln=y.name.replace(/[^a-zA-Z0-9]/g,"_"),et=`items/${lt}-${ln}.${Gt}`;console.log(" Generated filename:",et);const{data:cn,error:_t}=await Ee.storage.from("images_food").upload(et,y.image,{cacheControl:"3600",upsert:!1,contentType:y.image.type});if(_t)throw console.error(" Upload error:",_t),console.error(" Upload error details:",{message:_t.message,statusCode:_t.statusCode,error:_t.error}),new Error(`Upload failed: ${_t.message}`);console.log(" Upload successful:",cn);const{data:un}=Ee.storage.from("images_food").getPublicUrl(et);D=un.publicUrl,J=!0,console.log(" Public URL generated:",D)}catch(lt){console.error(" Image upload failed:",lt),console.error(" Upload error details:",lt)}else console.log(" No image provided for upload");const ye={name:y.name.trim(),price:parseFloat(y.cost),available_quantity:100,is_active:!0};y.description.trim()&&(ye.description=y.description.trim()),y.category_id.trim()&&(ye.category_id=y.category_id.trim()),D&&(ye.image_url=D),y.serialNumber&&(ye.serial_number=parseInt(y.serialNumber)),console.log(" Inserting item data:",ye);const{data:He,error:Le}=await Ee.from("food_items").insert([ye]).select();if(Le)throw console.error(" Database insert error:",Le),console.error(" Database error details:",{message:Le.message,details:Le.details,hint:Le.hint,code:Le.code}),new Error(`Database error: ${Le.message}`);console.log(" Item inserted successfully:",He);const Ze=J?`Item "${y.name}" added successfully with image!`:`Item "${y.name}" added successfully!`;xe({show:!0,message:Ze,type:"success"}),x({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),m(!1),r({id:"",name:"",removeItemName:""}),E(""),_e(),_n&&_n()},ze=async D=>{D.preventDefault(),_(!0),E("");try{if(!y.name.trim())throw new Error("Item name is required");if(!y.cost||parseFloat(y.cost)<=0)throw new Error("Valid cost is required");console.log(" Creating FormData for API request...");const J=new FormData;J.append("name",y.name.trim()),J.append("price",y.cost),J.append("description",y.description.trim()),J.append("category_id",y.category_id.trim()),y.serialNumber&&J.append("serial_number",y.serialNumber),y.image&&(J.append("image",y.image),console.log(" Added image file to FormData:",y.image.name)),console.log(" Sending request to /api/items...");let ye,He;try{ye=await fetch("/api/items",{method:"POST",body:J}),console.log(" Response status:",ye.status),console.log(" Response headers:",Object.fromEntries(ye.headers.entries()));const Le=ye.headers.get("content-type");if(!Le||!Le.includes("application/json")){const Ze=await ye.text();throw console.error(" Non-JSON response:",Ze),new Error(`Server returned non-JSON response (${ye.status}): ${Ze.substring(0,200)}`)}try{He=await ye.json()}catch(Ze){console.error(" JSON parsing error:",Ze);const lt=await ye.text();throw console.error(" Raw response:",lt),new Error(`Invalid JSON response: ${Ze.message}`)}if(console.log(" Parsed response:",He),!ye.ok)throw new Error(He.error||`HTTP ${ye.status}: ${ye.statusText}`);if(!He.success)throw new Error(He.error||"API request failed");console.log(" API response:",He)}catch(Le){console.warn(" API server not available, using direct Supabase upload:",Le.message),await be();return}xe({show:!0,message:He.message,type:"success"}),x({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),m(!1),r({id:"",name:"",removeItemName:""}),E(""),_e(),_n&&_n()}catch(J){console.error(" Failed to add item:",J);const ye=J.message||"Failed to add item";E(ye),alert(` Error: ${ye}`)}finally{_(!1)}},pt=()=>{m(!1),x({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),E(""),_(!1)},ot=D=>{Z(D),se({name:D.name||"",cost:D.price||"",description:D.description||"",category_id:D.category_id||D.categoryId||"",image:null,serialNumber:D.serial_number||D.serialNumber||""}),B(!0)},Xt=()=>{B(!1),Z(null),se({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),E(""),_(!1)},qt=async D=>{D.preventDefault(),_(!0),E("");try{if(!H.name.trim())throw new Error("Item name is required");if(!H.cost||parseFloat(H.cost)<=0)throw new Error("Valid cost is required");console.log(" Updating item:",ce.name);const J=new FormData;J.append("name",H.name.trim()),J.append("price",H.cost),J.append("description",H.description.trim()),J.append("category_id",H.category_id.trim()),J.append("id",ce.id),H.serialNumber&&J.append("serial_number",H.serialNumber),H.image&&(J.append("image",H.image),console.log(" Added new image file to FormData:",H.image.name)),console.log(" Sending update request to /api/items...");let ye,He;try{ye=await fetch("/api/items",{method:"PUT",body:J}),console.log(" Response status:",ye.status);const Le=ye.headers.get("content-type");if(!Le||!Le.includes("application/json")){const lt=await ye.text();throw console.error(" Non-JSON response:",lt),new Error(`Server returned non-JSON response (${ye.status}): ${lt.substring(0,200)}`)}try{He=await ye.json()}catch(lt){console.error(" JSON parsing error:",lt);const Gt=await ye.text();throw console.error(" Raw response:",Gt),new Error(`Invalid JSON response: ${lt.message}`)}if(console.log(" Parsed response:",He),!He.success)throw new Error(He.error||"Update failed");console.log(" Item updated successfully via API:",He.data);const Ze=H.image?`Item "${H.name}" updated successfully with new image!`:`Item "${H.name}" updated successfully!`;xe({show:!0,message:Ze,type:"success"})}catch(Le){console.warn(" API update failed, trying direct Supabase update:",Le),await wt()}Xt(),_e(),_n&&_n()}catch(J){console.error(" Edit item failed:",J),E(J.message),xe({show:!0,message:`Update failed: ${J.message}`,type:"error"})}finally{_(!1)}},wt=async()=>{console.log(" Using direct Supabase update fallback...");let D=ce.image_url,J=!1;if(H.image)try{console.log(" Uploading new image to Supabase Storage..."),console.log(" Image file details:",{name:H.image.name,size:H.image.size,type:H.image.type});const lt=Date.now(),Gt=H.image.name.split(".").pop().toLowerCase(),ln=H.name.replace(/[^a-zA-Z0-9]/g,"_"),et=`items/${lt}-${ln}.${Gt}`;console.log(" Generated filename:",et);const{data:cn,error:_t}=await Ee.storage.from("images_food").upload(et,H.image,{cacheControl:"3600",upsert:!1,contentType:H.image.type});if(_t)throw console.error(" Upload error:",_t),console.error(" Upload error details:",{message:_t.message,statusCode:_t.statusCode,error:_t.error}),new Error(`Image upload failed: ${_t.message}`);console.log(" Image uploaded successfully:",cn);const{data:un}=Ee.storage.from("images_food").getPublicUrl(et);D=un.publicUrl,J=!0,console.log(" Public URL generated:",D)}catch(lt){throw console.error(" Image upload failed:",lt),new Error(`Image upload failed: ${lt.message}`)}const ye={name:H.name.trim(),price:parseFloat(H.cost),description:H.description?.trim()||null,image_url:D,updated_at:new Date().toISOString()};H.serialNumber&&(ye.serial_number=parseInt(H.serialNumber)),console.log(" Updating item data in food_items:",ye);const{data:He,error:Le}=await Ee.from("food_items").update(ye).eq("id",ce.id).select();if(Le)throw console.error(" Database update error:",Le),console.error(" Database error details:",{message:Le.message,details:Le.details,hint:Le.hint,code:Le.code}),new Error(`Database error: ${Le.message}`);console.log(" Item updated successfully:",He);const Ze=J?`Item "${H.name}" updated successfully with new image!`:`Item "${H.name}" updated successfully!`;xe({show:!0,message:Ze,type:"success"})};O.useEffect(()=>{const D=J=>{J.key==="Escape"&&g&&pt(),J.key==="Escape"&&pe&&Xt()};if(g||pe)return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[g,pe]);const Pt=async(D,J)=>{const ye=n,He=n.find(Ze=>Ze.id===D);let Le=He?.availableQuantity||0;e(Ze=>Ze.map(lt=>lt.id===D?{...lt,inStock:J,availableQuantity:Le}:lt));try{if(He&&He._local)return;let Ze={};R==="stock"?Ze[R]=Le:R==="status"?Ze[R]=J?"in":"out":R==="available_quantity"?Ze[R]=Le:Ze[R]=!!J,console.log(" Updating stock status:",{id:D,inStock:J,newQuantity:Le,update:Ze,field:R});const{data:lt,error:Gt}=await Ee.from("food_items").update(Ze).eq(S,D).select();if(Gt)throw Gt;console.log(" Stock status updated successfully:",lt),xe({show:!0,message:`Item marked as ${J?`In Stock (Qty: ${Le})`:"Out of Stock"}`,type:"success"}),setTimeout(()=>xe({show:!1,message:"",type:"success"}),3e3),_n&&_n()}catch(Ze){console.error(" Failed to update stock in Supabase:",Ze),e(ye),xe({show:!0,message:`Failed to update stock: ${Ze.message}`,type:"error"}),setTimeout(()=>xe({show:!1,message:"",type:"success"}),3e3)}},Ot=async(D,J)=>{if(J<0||isNaN(J)){xe({show:!0,message:"Quantity must be a positive number or zero",type:"error"}),setTimeout(()=>xe({show:!1,message:"",type:"success"}),3e3);return}const ye=n;e(He=>He.map(Le=>Le.id===D?{...Le,availableQuantity:J,inStock:J>0}:Le));try{const He=n.find(Gt=>Gt.id===D);if(He&&He._local){xe({show:!0,message:"Quantity updated successfully",type:"success"}),setTimeout(()=>xe({show:!1,message:"",type:"success"}),3e3);return}const Le={available_quantity:J,is_available:J>0},{error:Ze}=await Ee.from("food_items").update(Le).eq(S,D);if(Ze)throw Ze;xe({show:!0,message:J===0?"Quantity updated to 0 (marked unavailable)":"Quantity updated successfully",type:"success"}),setTimeout(()=>xe({show:!1,message:"",type:"success"}),3e3),_n&&_n()}catch(He){console.error("Failed to update quantity in Supabase:",He),e(ye),xe({show:!0,message:"Error updating quantity",type:"error"}),setTimeout(()=>xe({show:!1,message:"",type:"success"}),3e3)}},an=async(D,J)=>{if(J<0||isNaN(J)){xe({show:!0,message:"Price must be a positive number or zero",type:"error"}),setTimeout(()=>xe({show:!1,message:"",type:"success"}),3e3);return}const ye=n;e(He=>He.map(Le=>Le.id===D?{...Le,price:J}:Le));try{const He=n.find(Ze=>Ze.id===D);if(He&&He._local){xe({show:!0,message:"Price updated successfully",type:"success"}),setTimeout(()=>xe({show:!1,message:"",type:"success"}),3e3);return}const{error:Le}=await Ee.from("food_items").update({price:J}).eq(S,D);if(Le)throw Le;xe({show:!0,message:"Price updated successfully",type:"success"}),setTimeout(()=>xe({show:!1,message:"",type:"success"}),3e3)}catch(He){console.error("Failed to update price in Supabase:",He),e(ye),xe({show:!0,message:"Error updating price",type:"error"}),setTimeout(()=>xe({show:!1,message:"",type:"success"}),3e3)}},dr=async D=>{const J=n;e(ye=>ye.filter(He=>He.id!==D));try{const ye=n.find(Ze=>Ze.id===D);if(ye&&ye._local)return;console.log(" Attempting to soft delete item:",{id:D,idField:S,target:ye});const{data:He,error:Le}=await Ee.from("food_items").update({is_active:!1}).eq(S,D).select();if(Le){console.error(" Error from Supabase:",Le),console.error("Error details:",{message:Le.message,details:Le.details,hint:Le.hint,code:Le.code}),e(J),alert(`Failed to remove item.

Error: ${Le.message}

Details: ${Le.details||"Check console for more info"}`);return}console.log(" Item soft deleted successfully:",He),xe({show:!0,message:"Item moved to Removed Items",type:"success"}),setTimeout(()=>xe({show:!1,message:"",type:"success"}),3e3),_n&&_n()}catch(ye){console.error(" Exception during soft delete:",ye),e(J),alert(`Failed to remove item.

Error: ${ye.message||"Unknown error"}`)}},kr=ge().filter(D=>{const J=i.trim().toLowerCase(),ye=J?String(D.name||"").toLowerCase().includes(J):!0,He=l==="all"||(l==="in"?D.inStock:!D.inStock),Le=ut==="all"?!0:ut==="uncategorized"?!D.categoryId:String(D.categoryId)===ut;return ye&&He&&Le}).sort((D,J)=>{const ye=i.trim().toLowerCase(),He=String(D.name||"").toLowerCase(),Le=String(J.name||"").toLowerCase(),Ze=Ue.get(D?.categoryId!=null?String(D.categoryId):"")||D.categoryName||"Uncategorized",lt=Ue.get(J?.categoryId!=null?String(J.categoryId):"")||J.categoryName||"Uncategorized";if(Ze!==lt)return Ze.localeCompare(lt);const Gt=D.availableQuantity||0,ln=J.availableQuantity||0;if(Gt!==ln)return Gt-ln;if(ye){const et=He.startsWith(ye),cn=Le.startsWith(ye);if(et&&!cn)return-1;if(!et&&cn)return 1;if(et===cn)return He.localeCompare(Le)}return He.localeCompare(Le)});return p.jsxs("div",{style:{display:"grid",gap:16},children:[p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"12px",marginBottom:"16px"},children:[p.jsxs("div",{style:{backgroundColor:q==="all"?"#e2e8f0":"#f8fafc",border:q==="all"?"2px solid #64748b":"1px solid #e2e8f0",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:q==="all"?"scale(1.02)":"scale(1)",boxShadow:q==="all"?"0 4px 12px rgba(100, 116, 139, 0.3)":"none"},onClick:()=>we("all"),children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1e293b"},children:n.length}),p.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Total"})]}),p.jsxs("div",{style:{backgroundColor:q==="in-stock"?"#bbf7d0":"#f0fdf4",border:q==="in-stock"?"2px solid #16a34a":"1px solid #bbf7d0",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:q==="in-stock"?"scale(1.02)":"scale(1)",boxShadow:q==="in-stock"?"0 4px 12px rgba(22, 163, 74, 0.3)":"none"},onClick:()=>we(q==="in-stock"?"all":"in-stock"),children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#166534"},children:n.filter(D=>D.inStock&&D.availableQuantity>20).length}),p.jsx("div",{style:{fontSize:"12px",color:"#16a34a"},children:"In Stock"})]}),p.jsxs("div",{style:{backgroundColor:q==="low-stock"?"#fef3c7":"#fefce8",border:q==="low-stock"?"2px solid #ca8a04":"1px solid #fde047",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:q==="low-stock"?"scale(1.02)":"scale(1)",boxShadow:q==="low-stock"?"0 4px 12px rgba(202, 138, 4, 0.3)":"none"},onClick:()=>we(q==="low-stock"?"all":"low-stock"),children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#a16207"},children:n.filter(D=>D.inStock&&D.availableQuantity<=20&&D.availableQuantity>5).length}),p.jsx("div",{style:{fontSize:"12px",color:"#ca8a04"},children:"Low Stock"})]}),p.jsxs("div",{style:{backgroundColor:q==="very-low"?"#fecaca":"#fef2f2",border:q==="very-low"?"2px solid #dc2626":"1px solid #fca5a5",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:q==="very-low"?"scale(1.02)":"scale(1)",boxShadow:q==="very-low"?"0 4px 12px rgba(220, 38, 38, 0.3)":"none"},onClick:()=>we(q==="very-low"?"all":"very-low"),children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#991b1b"},children:n.filter(D=>D.inStock&&D.availableQuantity<=5&&D.availableQuantity>0).length}),p.jsx("div",{style:{fontSize:"12px",color:"#dc2626"},children:"Very Low"})]}),p.jsxs("div",{style:{backgroundColor:q==="out-of-stock"?"#e2e8f0":"#f1f5f9",border:q==="out-of-stock"?"2px solid #64748b":"1px solid #cbd5e1",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:q==="out-of-stock"?"scale(1.02)":"scale(1)",boxShadow:q==="out-of-stock"?"0 4px 12px rgba(100, 116, 139, 0.3)":"none"},onClick:()=>we(q==="out-of-stock"?"all":"out-of-stock"),children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#475569"},children:n.filter(D=>!D.inStock||D.availableQuantity===0).length}),p.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Out of Stock"})]})]}),p.jsx(Mn,{title:"Inventory Controls",titleAction:p.jsxs("button",{onClick:()=>ae(!0),className:"btn btn-secondary",style:{padding:"8px 16px",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx(Ww,{size:16}),"Removed Items"]}),children:p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",gap:"16px",alignItems:"start",justifyContent:"flex-start"},children:[p.jsx("div",{style:{position:"relative"},children:p.jsx("input",{className:"search-input",placeholder:"Search food items...",value:i,onChange:D=>a(D.target.value),style:{width:"350px"}})}),p.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[p.jsxs("div",{style:{position:"relative"},children:[p.jsx("input",{className:"search-input",placeholder:"Manage Food Items",value:Oe,onChange:D=>j(D.target.value),onKeyDown:D=>{if(D.key==="Enter"){if(Ge>=0&&Ge<$e.length){const J=$e[Ge];Ce(J.name),Ie([]),Pe(-1)}else U();D.preventDefault()}else D.key==="ArrowDown"?(D.preventDefault(),Pe(J=>J<$e.length-1?J+1:J)):D.key==="ArrowUp"?(D.preventDefault(),Pe(J=>J>0?J-1:-1)):D.key==="Escape"&&(Ie([]),Pe(-1))},style:{width:"400px",paddingLeft:"16px",paddingRight:"16px",fontSize:"15px"}}),$e.length>0&&p.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",marginTop:"4px",maxHeight:"200px",overflowY:"auto",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3},children:$e.map((D,J)=>p.jsxs("div",{onClick:ye=>{ye.preventDefault(),ye.stopPropagation(),ve(D)},style:{padding:"10px 16px",cursor:"pointer",backgroundColor:Ge===J?"#f3f4f6":"white",borderBottom:J<$e.length-1?"1px solid #e5e7eb":"none"},onMouseEnter:()=>Pe(J),children:[p.jsx("div",{style:{fontWeight:"500",color:"#111827"},children:D.name}),p.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:["",D.price]})]},D.id))})]}),Oe.trim()&&p.jsx("div",{style:{display:"flex",gap:"8px",marginLeft:"8px"},children:ke(Oe.trim())?p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:U,style:{width:"75px",height:"36px",fontSize:"13px",fontWeight:"600",color:"white",backgroundColor:"#3b82f6",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:D=>D.target.style.backgroundColor="#2563eb",onMouseLeave:D=>D.target.style.backgroundColor="#3b82f6",children:"Edit"}),p.jsx("button",{onClick:()=>{const D=ke(Oe.trim());D&&oe({itemId:D.id,itemName:D.name})},style:{width:"85px",height:"36px",fontSize:"13px",fontWeight:"600",color:"white",backgroundColor:"#ef4444",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:D=>D.target.style.backgroundColor="#dc2626",onMouseLeave:D=>D.target.style.backgroundColor="#ef4444",children:"Remove"})]}):p.jsx("button",{onClick:U,style:{width:"100px",height:"36px",fontSize:"14px",fontWeight:"600",color:"white",backgroundColor:"#10b981",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:D=>D.target.style.backgroundColor="#059669",onMouseLeave:D=>D.target.style.backgroundColor="#10b981",children:"Add Item"})})]})]})}),p.jsxs(Mn,{title:"Inventory Items",children:[Se.length>0&&p.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"12px",alignItems:"center"},children:[p.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:"var(--text)"},children:"Categories:"}),p.jsxs("button",{onClick:()=>$("all"),style:{padding:"6px 14px",fontSize:"13px",fontWeight:500,borderRadius:999,border:"none",cursor:"pointer",backgroundColor:ut==="all"?"#2563eb":"var(--muted-bg)",color:ut==="all"?"#ffffff":"var(--text)",transition:"all 0.2s ease",boxShadow:ut==="all"?"0 2px 8px rgba(37, 99, 235, 0.3)":"none"},children:["All (",n.length,")"]}),(()=>{const D=it.uncategorized||0;return D?p.jsxs("button",{onClick:()=>$(ut==="uncategorized"?"all":"uncategorized"),style:{padding:"6px 14px",fontSize:"13px",fontWeight:500,borderRadius:999,border:"none",cursor:"pointer",backgroundColor:ut==="uncategorized"?"#2563eb":"var(--muted-bg)",color:ut==="uncategorized"?"#ffffff":"var(--text)",transition:"all 0.2s ease",boxShadow:ut==="uncategorized"?"0 2px 8px rgba(37, 99, 235, 0.3)":"none"},children:["Uncategorized (",D,")"]}):null})(),Se.map(D=>{const J=D?.id!=null?String(D.id):null,ye=J&&it[J]||0;return{category:D,key:J,count:ye}}).filter(({count:D})=>D>0).sort((D,J)=>(D.category?.name||"").localeCompare(J.category?.name||"")).map(({category:D,key:J,count:ye})=>p.jsxs("button",{onClick:()=>$(J),style:{padding:"6px 14px",fontSize:"13px",fontWeight:500,borderRadius:999,border:"none",cursor:"pointer",backgroundColor:ut===J?"#2563eb":"var(--muted-bg)",color:ut===J?"#ffffff":"var(--text)",transition:"all 0.2s ease",boxShadow:ut===J?"0 2px 8px rgba(37, 99, 235, 0.3)":"none"},children:[D.name," (",ye,")"]},J))]}),q!=="all"&&p.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"6px",fontSize:"14px",color:"#0369a1"},children:[p.jsx("strong",{children:" Filter Active:"})," Showing ",q==="in-stock"?"In Stock":q==="low-stock"?"Low Stock":q==="very-low"?"Very Low":"Out of Stock"," items only",p.jsx("button",{onClick:()=>we("all"),style:{marginLeft:"8px",padding:"2px 8px",fontSize:"12px",backgroundColor:"#0ea5e9",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear Filter"})]}),p.jsxs("table",{className:"table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{style:{width:"60px",textAlign:"center"},children:"Image"}),p.jsx("th",{style:{width:"25%"},children:"Item Name"}),p.jsx("th",{style:{width:"12%",textAlign:"right"},children:"Price"}),p.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Quantity"}),p.jsx("th",{style:{width:"15%",textAlign:"center"},children:"Stock Status"}),p.jsx("th",{style:{width:"200px",textAlign:"center"},children:"Actions"})]})}),p.jsx("tbody",{children:kr.map(D=>p.jsxs("tr",{children:[p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",padding:"8px"},children:p.jsxs("div",{style:{width:"40px",height:"40px",borderRadius:"8px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",margin:"0 auto"},children:[D.image_url?p.jsx("img",{src:D.image_url,alt:D.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:J=>{J.target.style.display="none",J.target.nextSibling.style.display="flex"}}):null,p.jsx("div",{style:{display:D.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",fontSize:"20px",color:"#6b7280"},children:""})]})}),p.jsx("td",{style:{verticalAlign:"middle"},children:p.jsx("strong",{children:D.name})}),p.jsx("td",{style:{textAlign:"right",verticalAlign:"middle"},children:k===D.id?p.jsx("input",{type:"number",className:"price-input",value:D.price,onChange:J=>e(n.map(ye=>ye.id===D.id?{...ye,price:Number(J.target.value)}:ye)),onBlur:()=>{an(D.id,D.price),M(null)},onKeyDown:J=>{J.key==="Enter"?(an(D.id,D.price),M(null)):J.key==="Escape"&&M(null)},min:"0",step:"0.01",autoFocus:!0,style:{MozAppearance:"textfield"}}):p.jsxs("span",{className:"price-cell",onClick:()=>M(D.id),children:["",D.price]})}),p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:V===D.id?p.jsx("input",{type:"number",className:"quantity-input",value:D.availableQuantity,onChange:J=>e(n.map(ye=>ye.id===D.id?{...ye,availableQuantity:Number(J.target.value)}:ye)),onBlur:()=>{Ot(D.id,D.availableQuantity),ie(null)},onKeyDown:J=>{J.key==="Enter"?(Ot(D.id,D.availableQuantity),ie(null)):J.key==="Escape"&&ie(null)},min:"0",autoFocus:!0}):p.jsx("span",{className:"quantity-cell",onClick:()=>ie(D.id),style:{cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s ease",display:"inline-block",minWidth:"40px",textAlign:"center",fontSize:"14px",fontWeight:"600",color:D.availableQuantity>20?"#10b981":D.availableQuantity>5?"#f59e0b":D.availableQuantity>0?"#ef4444":"#6b7280"},children:D.availableQuantity})}),p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:p.jsx("span",{className:"stock-status-badge",style:{backgroundColor:D.availableQuantity>20?"#dcfce7":D.availableQuantity>5?"#fef3c7":D.availableQuantity>0?"#fee2e2":"#f3f4f6",color:D.availableQuantity>20?"#166534":D.availableQuantity>5?"#92400e":D.availableQuantity>0?"#991b1b":"#6b7280"},children:D.availableQuantity>20?" In Stock":D.availableQuantity>5?" Low Stock":D.availableQuantity>0?" Very Low":" Out of Stock"})}),p.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:p.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center",justifyContent:"center",flexWrap:"nowrap"},children:D.inStock?p.jsx("button",{className:"btn",onClick:()=>Pt(D.id,!1),style:{padding:"10px 16px",fontSize:"14px",minWidth:"100px",whiteSpace:"nowrap"},children:"Mark Out"}):p.jsx("button",{className:"btn",onClick:()=>Ne({itemId:D.id,itemName:D.name,qty:""}),style:{padding:"10px 16px",fontSize:"14px",minWidth:"100px",whiteSpace:"nowrap"},children:"Mark In"})})})]},D.id))})]})]}),Be&&p.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:999999,display:"grid",placeItems:"center"},onClick:()=>Ne(null),children:p.jsxs("div",{onClick:D=>D.stopPropagation(),style:{background:"var(--panel-bg)",border:"1px solid var(--border)",borderRadius:12,width:360,padding:16},className:"dark:!bg-gray-800",children:[p.jsx("h3",{style:{margin:0,fontSize:18,fontWeight:700,color:"var(--text)"},children:"Mark In"}),p.jsxs("p",{style:{margin:"8px 0 12px 0",fontSize:14,color:"var(--text)"},children:['Enter quantity for "',Be.itemName,'"']}),p.jsx("style",{children:`
              .no-spin::-webkit-outer-spin-button, .no-spin::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
              .no-spin { -moz-appearance: textfield; appearance: textfield; }
            `}),p.jsx("input",{type:"number",min:"0",value:Be.qty,onChange:D=>Ne({...Be,qty:D.target.value}),className:"form-input no-spin",style:{width:"100%",boxSizing:"border-box",marginBottom:12,MozAppearance:"textfield"},placeholder:"Enter Quantity",autoFocus:!0,onKeyDown:D=>{if(D.key==="Enter"){const J=parseInt(Be.qty);if(!Number.isFinite(J)||J<0)return;Ot(Be.itemId,J),Ne(null)}}}),p.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:12},children:[p.jsx("button",{className:"btn",onClick:()=>Ne(null),style:{background:"#e5e7eb",color:"#111827"},children:"Cancel"}),p.jsx("button",{className:"btn",onClick:()=>{const D=parseInt(Be.qty);!Number.isFinite(D)||D<0||(Ot(Be.itemId,D),Ne(null))},style:{background:"#10b981",color:"#ffffff"},children:"Add"})]})]})}),g&&p.jsx("div",{className:"add-item-panel-overlay",onClick:pt,children:p.jsxs(ct.div,{className:"add-item-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},onClick:D=>D.stopPropagation(),children:[p.jsxs("div",{className:"add-item-panel-header",children:[p.jsx("h3",{children:"Add New Item"}),p.jsx("button",{className:"add-item-panel-close",onClick:pt,children:p.jsx(rn,{size:20})})]}),p.jsxs("form",{onSubmit:ze,className:"add-item-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"item-name",children:"Item Name *"}),p.jsx("input",{id:"item-name",type:"text",className:"form-input",value:y.name,onChange:D=>x({...y,name:D.target.value}),placeholder:"Enter item name",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"item-cost",children:"Cost () *"}),p.jsx("input",{id:"item-cost",type:"number",className:"form-input",value:y.cost,onChange:D=>x({...y,cost:D.target.value}),placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"item-description",children:"Description"}),p.jsx("textarea",{id:"item-description",className:"form-textarea",value:y.description,onChange:D=>x({...y,description:D.target.value}),placeholder:"Enter item description (optional)",rows:"3"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"item-category",children:"Category"}),p.jsxs("select",{id:"item-category",className:"form-input",value:y.category_id,onChange:D=>x({...y,category_id:D.target.value}),disabled:Me,style:{cursor:Me?"wait":"pointer"},children:[p.jsx("option",{value:"",children:"Select a category..."}),Se.map(D=>p.jsx("option",{value:D.id,children:D.name},D.id))]}),Me&&p.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Loading categories..."}),!Me&&Se.length===0&&p.jsx("div",{style:{fontSize:"12px",color:"#ef4444",marginTop:"4px"},children:"No categories found. Please add categories first."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"item-serial",children:"Serial Number (Display Order)"}),p.jsx("input",{id:"item-serial",type:"number",className:"form-input",value:y.serialNumber,onChange:D=>x({...y,serialNumber:D.target.value}),placeholder:"e.g., 1, 2, 3...",min:"1",step:"1"}),p.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Controls the display order in Place Order panel (lower numbers appear first)"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Image Upload (Optional)"}),p.jsx(sb,{value:y.image,onChange:D=>x({...y,image:D}),disabled:w}),p.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"10px"},children:[p.jsx("button",{type:"button",className:"btn-secondary",onClick:async()=>{console.log("=== TESTING SUPABASE STORAGE CONNECTION ===");try{console.log(" Step 1: Testing bucket access...");const{data:D,error:J}=await Ee.storage.listBuckets();if(J){console.error(" Bucket list failed:",J),alert(` Bucket access failed: ${J.message}`);return}console.log(" Available buckets:",D.map(ln=>ln.name));const ye=D.find(ln=>ln.name==="food_images");if(!ye){console.log(" food_images bucket not found, attempting to create...");try{const{data:ln,error:et}=await Ee.storage.createBucket("food_images",{public:!0,fileSizeLimit:52428800,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp"]});if(et){console.error(" Failed to create bucket:",et),alert(` Cannot create bucket automatically: ${et.message}

Please create it manually in Supabase Dashboard:
1. Go to Storage
2. Click "New bucket"
3. Name: food_images
4. Check "Public bucket"
5. Click "Create bucket"`);return}console.log(" Bucket created successfully:",ln),alert(` food_images bucket created successfully!

Now setting up permissions...`);try{alert(` Bucket created! Now you need to set up permissions:

1. Go to Supabase Dashboard  SQL Editor
2. Run these commands:

`+[`CREATE POLICY "Public Access" ON storage.objects FOR SELECT USING (bucket_id = 'food_images')`,`CREATE POLICY "Public Upload" ON storage.objects FOR INSERT WITH CHECK (bucket_id = 'food_images')`,`CREATE POLICY "Public Update" ON storage.objects FOR UPDATE USING (bucket_id = 'food_images')`,`CREATE POLICY "Public Delete" ON storage.objects FOR DELETE USING (bucket_id = 'food_images')`].join(`

`)+`

3. Then test storage access again!`);return}catch(cn){console.error(" Policy setup failed:",cn),alert(" Bucket created but policy setup failed. Please set up permissions manually in Supabase Dashboard.");return}}catch(ln){console.error(" Bucket creation failed:",ln),alert(` Failed to create bucket: ${ln.message}

Please create it manually in Supabase Dashboard.`);return}}console.log(" food_images bucket found:",ye),console.log(" Step 2: Testing file listing...");const{data:He,error:Le}=await Ee.storage.from("food_images").list();if(Le){console.error(" File listing failed:",Le),alert(` Cannot access files in bucket: ${Le.message}

This is likely a permissions issue. Check bucket policies.`);return}console.log(" Files in bucket:",He.length),console.log(" Step 3: Testing upload permissions...");const Ze=new File(["test"],"test.txt",{type:"text/plain"}),{data:lt,error:Gt}=await Ee.storage.from("food_images").upload(`test_${Date.now()}.txt`,Ze);if(Gt){console.error(" Upload test failed:",Gt),alert(` Upload test failed: ${Gt.message}

Bucket exists but upload permissions are missing.`);return}console.log(" Upload test successful:",lt),await Ee.storage.from("food_images").remove([lt.path]),alert(` Storage test successful!

- Buckets: ${D.length} found
- food_images bucket:  Accessible
- File listing:  Working
- Upload:  Working

Your storage is ready!`)}catch(D){console.error(" Storage test error:",D),alert(` Storage test error: ${D.message}`)}},style:{fontSize:"12px",padding:"6px 12px"},children:"Test Storage Access"}),y.image&&p.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{x({...y,image:null}),document.getElementById("item-image").value=""},style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#ef4444",color:"white"},children:"Remove Image"}),p.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{const D=`
-- Copy and paste these SQL commands in your Supabase SQL Editor:

-- 1. Create storage policies for food_images bucket
CREATE POLICY "Public Access" ON storage.objects
FOR SELECT USING (bucket_id = 'food_images');

CREATE POLICY "Public Upload" ON storage.objects
FOR INSERT WITH CHECK (bucket_id = 'food_images');

CREATE POLICY "Public Update" ON storage.objects
FOR UPDATE USING (bucket_id = 'food_images');

CREATE POLICY "Public Delete" ON storage.objects
FOR DELETE USING (bucket_id = 'food_images');

-- 2. If the above fails, try this alternative:
INSERT INTO storage.policies (id, bucket_id, name, definition, check_expression)
VALUES 
  ('food_images_select', 'food_images', 'Public Access', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_insert', 'food_images', 'Public Upload', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_update', 'food_images', 'Public Update', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_delete', 'food_images', 'Public Delete', 'bucket_id = ''food_images''', 'bucket_id = ''food_images''')
ON CONFLICT (id) DO NOTHING;
                      `;navigator.clipboard.writeText(D).then(()=>{alert(` SQL commands copied to clipboard!

1. Go to Supabase Dashboard  SQL Editor
2. Paste and run the commands
3. Test storage access again`)}).catch(()=>{alert(` SQL Commands:

`+D+`

Copy these and run in Supabase SQL Editor`)})},style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#3b82f6",color:"white"},children:"Fix Permissions"})]})]}),A&&p.jsxs("div",{className:"form-error",style:{backgroundColor:"#fef2f2",border:"2px solid #fecaca",borderRadius:"8px",padding:"12px",marginTop:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx($n,{size:20,style:{color:"#dc2626"}}),p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"600",color:"#dc2626",marginBottom:"4px"},children:" Upload Failed"}),p.jsx("div",{style:{color:"#991b1b",fontSize:"14px"},children:A}),p.jsx("div",{style:{color:"#6b7280",fontSize:"12px",marginTop:"4px"},children:"Check the browser console (F12) for more details"}),p.jsx("button",{type:"button",onClick:()=>E(""),style:{marginTop:"8px",padding:"4px 8px",fontSize:"12px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear Error & Try Again"})]})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"btn btn-secondary",onClick:pt,disabled:w,children:"Cancel"}),p.jsx("button",{type:"submit",className:"btn btn-primary",disabled:w,children:w?p.jsxs(p.Fragment,{children:[p.jsx(gi,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):p.jsxs(p.Fragment,{children:[p.jsx(qx,{size:16}),"Add Item"]})})]})]})]})}),pe&&p.jsx("div",{className:"add-item-panel-overlay",onClick:Xt,children:p.jsxs(ct.div,{className:"add-item-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},onClick:D=>D.stopPropagation(),children:[p.jsxs("div",{className:"add-item-panel-header",children:[p.jsx("h3",{children:"Edit Item"}),p.jsx("button",{className:"add-item-panel-close",onClick:Xt,children:p.jsx(rn,{size:20})})]}),p.jsxs("form",{onSubmit:qt,className:"add-item-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"edit-item-name",children:"Item Name *"}),p.jsx("input",{id:"edit-item-name",type:"text",className:"form-input",value:H.name,onChange:D=>se({...H,name:D.target.value}),placeholder:"Enter item name",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"edit-item-cost",children:"Cost () *"}),p.jsx("input",{id:"edit-item-cost",type:"number",className:"form-input",value:H.cost,onChange:D=>se({...H,cost:D.target.value}),placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"edit-item-description",children:"Description"}),p.jsx("textarea",{id:"edit-item-description",className:"form-textarea",value:H.description,onChange:D=>se({...H,description:D.target.value}),placeholder:"Enter item description (optional)",rows:"3"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"edit-item-category",children:"Category"}),p.jsxs("select",{id:"edit-item-category",className:"form-input",value:H.category_id,onChange:D=>se({...H,category_id:D.target.value}),disabled:Me,style:{cursor:Me?"wait":"pointer"},children:[p.jsx("option",{value:"",children:"Select a category..."}),Se.map(D=>p.jsx("option",{value:D.id,children:D.name},D.id))]}),Me&&p.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Loading categories..."}),!Me&&Se.length===0&&p.jsx("div",{style:{fontSize:"12px",color:"#ef4444",marginTop:"4px"},children:"No categories found. Please add categories first."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"edit-item-serial",children:"Serial Number (Display Order)"}),p.jsx("input",{id:"edit-item-serial",type:"number",className:"form-input",value:H.serialNumber,onChange:D=>se({...H,serialNumber:D.target.value}),placeholder:"e.g., 1, 2, 3...",min:"1",step:"1"}),p.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Controls the display order in Place Order panel (lower numbers appear first)"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Current Image"}),ce?.image_url&&p.jsxs("div",{style:{marginBottom:"10px"},children:[p.jsx("img",{src:ce.image_url,alt:ce.name,style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb"}}),p.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Current image"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"New Image Upload (Optional)"}),p.jsx(sb,{value:H.image,onChange:D=>se({...H,image:D}),disabled:w}),p.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Upload a new image to replace the current one, or leave empty to keep current image"})]}),A&&p.jsxs("div",{className:"form-error",style:{backgroundColor:"#fef2f2",border:"2px solid #fecaca",borderRadius:"8px",padding:"12px",marginTop:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx($n,{size:20,style:{color:"#dc2626"}}),p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"600",color:"#dc2626",marginBottom:"4px"},children:" Update Failed"}),p.jsx("div",{style:{color:"#991b1b",fontSize:"14px"},children:A}),p.jsx("div",{style:{color:"#6b7280",fontSize:"12px",marginTop:"4px"},children:"Check the browser console (F12) for more details"})]})]}),p.jsxs("div",{className:"form-actions",style:{display:"flex",gap:"12px",marginTop:"20px"},children:[p.jsx("button",{type:"button",className:"btn-secondary",onClick:Xt,disabled:w,style:{flex:1},children:"Cancel"}),p.jsx("button",{type:"submit",className:"btn-primary",disabled:w,style:{flex:1},children:w?"Updating...":"Update Item"})]})]})]})}),p.jsx(Gn,{children:fe.show&&p.jsx(ct.div,{className:"fixed bottom-4 right-4 z-50",style:{pointerEvents:"none"},initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3},children:p.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${fe.type==="success"?"bg-green-500":"bg-red-500"}`,style:{pointerEvents:"auto"},children:fe.message})})}),p.jsx(j7,{isOpen:Te,onClose:()=>ae(!1),onItemRestored:Re}),p.jsx(Gn,{children:L&&p.jsxs(p.Fragment,{children:[p.jsx(ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>te(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),p.jsxs(ct.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:D=>D.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[p.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fef3c7",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:p.jsx($n,{size:24,style:{color:"#f59e0b"}})}),p.jsx("div",{children:p.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Item Not Found"})})]}),p.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["The item ",p.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',L.itemName,'"']})," was not found in the inventory. Please check the spelling and try again."]}),p.jsxs("div",{style:{backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"8px",padding:"12px",marginBottom:"24px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[p.jsx($n,{size:16,style:{color:"#0284c7",marginTop:"2px",flexShrink:0}}),p.jsx("p",{style:{margin:0,fontSize:"13px",color:"#075985",lineHeight:"1.4"},children:"Tip: Item names are case-insensitive. Make sure you're using the exact name as it appears in the inventory list."})]}),p.jsx("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:p.jsx("button",{onClick:()=>te(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#3b82f6",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:D=>{D.target.style.backgroundColor="#2563eb"},onMouseLeave:D=>{D.target.style.backgroundColor="#3b82f6"},children:"Got It"})})]})]})}),p.jsx(Gn,{children:nt&&p.jsxs(p.Fragment,{children:[p.jsx(ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>at(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),p.jsxs(ct.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:D=>D.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[p.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fef3c7",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:p.jsx($n,{size:24,style:{color:"#f59e0b"}})}),p.jsx("div",{children:p.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Item Already Exists"})})]}),p.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["The item ",p.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',nt.item.name,'"']})," already exists in your inventory. What would you like to do?"]}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>at(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:D=>{D.target.style.backgroundColor="#e5e7eb"},onMouseLeave:D=>{D.target.style.backgroundColor="#f3f4f6"},children:"Cancel"}),p.jsxs("button",{onClick:()=>G("remove"),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ef4444",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:D=>{D.target.style.backgroundColor="#dc2626"},onMouseLeave:D=>{D.target.style.backgroundColor="#ef4444"},children:[p.jsx(rn,{size:16}),"Remove"]}),p.jsxs("button",{onClick:()=>G("edit"),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#3b82f6",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:D=>{D.target.style.backgroundColor="#2563eb"},onMouseLeave:D=>{D.target.style.backgroundColor="#3b82f6"},children:[p.jsx(qx,{size:16}),"Edit"]})]})]})]})}),p.jsx(Gn,{children:X&&p.jsxs(p.Fragment,{children:[p.jsx(ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>oe(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),p.jsxs(ct.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:D=>D.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[p.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:p.jsx($n,{size:24,style:{color:"#dc2626"}})}),p.jsx("div",{children:p.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Remove Item?"})})]}),p.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["Are you sure you want to remove ",p.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',X.itemName,'"']})," from your active inventory? The item will be moved to the Removed Items list and can be restored later."]}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[p.jsx("button",{onClick:()=>oe(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:D=>{D.target.style.backgroundColor="#e5e7eb"},onMouseLeave:D=>{D.target.style.backgroundColor="#f3f4f6"},children:"Cancel"}),p.jsxs("button",{onClick:ne,style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ef4444",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:D=>{D.target.style.backgroundColor="#dc2626"},onMouseLeave:D=>{D.target.style.backgroundColor="#ef4444"},children:[p.jsx(rn,{size:16}),"Remove Item"]})]})]})]})})]})}const _p=["","","","","","",""],i9=[{month:0,day:14,name:"Sankranti",reduction:.4},{month:2,day:8,name:"Maha Shivaratri",reduction:.35},{month:2,day:31,name:"Ugadi",reduction:.3},{month:7,day:15,name:"Independence Day",reduction:.2},{month:9,day:24,name:"Dussehra",reduction:.5},{month:10,day:1,name:"Diwali",reduction:.45},{month:11,day:25,name:"Christmas",reduction:.25}],Vu={seasonal:{summer:{Buttermilk:1.25,"Curd Rice":1.2,"Lemon Rice":1.15},monsoon:{Pakoda:1.35,"Masala Chai":1.2,Samosa:1.15},winter:{Tea:1.2,"Vegetable Soup":1.25,Upma:1.1},default:{}}},ns=n=>{const e=i9.find(t=>t.month===n.getMonth()&&t.day===n.getDate());return e?{...e}:null},Tl=(n=new Date)=>{const e=n.getMonth();return e>=3&&e<=5?"summer":e>=6&&e<=8?"monsoon":"winter"},a9=n=>{try{return{day:_p[n.getDay()],month:n.toLocaleDateString("te-IN",{month:"long"}),year:n.getFullYear()}}catch{return{day:_p[n.getDay()],month:n.toLocaleDateString("en-IN",{month:"long"}),year:n.getFullYear()}}};function o9(){const n=md?.VITE_ENABLE_AI_PREDICTIONS!=="false",[e,t]=O.useState(null),[r,i]=O.useState("english"),[a,l]=O.useState("tomorrow"),[c,d]=O.useState(!1),[f,g]=O.useState(!1),[m,y]=O.useState(null),[x,w]=O.useState([]),[_,A]=O.useState([]),[E,S]=O.useState(()=>new Date),[T,R]=O.useState(()=>new Date),N=_p,k=(q,we)=>{if(!q||q.length===0){t(null);return}console.log(" AI Predictions: Generating predictions...");const Te=new Date,ae=new Date(Te.getFullYear(),Te.getMonth(),Te.getDate()),L=new Date(ae);L.setDate(L.getDate()-1);const te=new Date(ae);te.setDate(te.getDate()-7);const ce=new Date(ae);ce.setDate(ce.getDate()-30);const Z=q.filter(G=>new Date(G.created_at)>=ae),pe=q.filter(G=>{const ne=new Date(G.created_at);return ne>=L&&ne<ae}),B=q.filter(G=>new Date(G.created_at)>=te),H=q.filter(G=>new Date(G.created_at)>=ce),se=Z.length,Se=pe.length,De=B.length/7,Me=H.length/30,Ye={};q.forEach(G=>{const ne=G.item_name;Ye[ne]||(Ye[ne]={totalOrders:0,totalRevenue:0,avgPrice:0,lastOrdered:null}),Ye[ne].totalOrders++,Ye[ne].totalRevenue+=G.total_amount||G.price||0,Ye[ne].avgPrice=Ye[ne].totalRevenue/Ye[ne].totalOrders;const ve=new Date(G.created_at);(!Ye[ne].lastOrdered||ve>Ye[ne].lastOrdered)&&(Ye[ne].lastOrdered=ve)});const ut=Object.entries(Ye).sort(([,G],[,ne])=>ne.totalOrders-G.totalOrders).slice(0,10),$={};q.forEach(G=>{const ne=new Date(G.created_at).getHours();$[ne]||($[ne]=0),$[ne]++});const Oe=Object.entries($).sort(([,G],[,ne])=>ne-G).slice(0,3).map(([G])=>`${G}:00`),Ce=Tl(ae),$e=a9(ae),Ie=ns(ae),Ge=new Date(ae);Ge.setDate(Ge.getDate()+1);const Pe=ns(Ge);Tl(Ge);const nt=new Date(ae);nt.setDate(nt.getDate()+2),ns(nt),Tl(nt);const at=[];for(let G=1;G<=7;G++){const ne=new Date(ae);ne.setDate(ae.getDate()+G);const ve=ns(ne),ge=Tl(ne),me=ne.getDay()===0||ne.getDay()===6;let be=De;me&&(ne.getDay()===0?be=0:be*=.75),ve&&(be*=1-ve.reduction+.3);const ze=Vu.seasonal[ge]||Vu.seasonal.default||{},pt=Object.values(ze).reduce((ot,Xt)=>ot+Xt,0)/Math.max(Object.keys(ze).length,1);be*=pt||1,at.push({date:ne,day:N[ne.getDay()],predicted:Math.round(be),festival:ve,season:ge,isWeekend:me,isHoliday:ne.getDay()===0})}const X=at[0].predicted,oe=at[1].predicted,Be=Math.round(at.reduce((G,ne)=>G+ne.predicted,0)/7),Ne=[];we.forEach(G=>{const ne=G.available_quantity||G.stock||0,ve=Ye[G.name]?.totalOrders||0;ne<=5&&ve>0?Ne.push({type:"low_stock",priority:"high",message:`${G.name} is running low (${ne} left) but is popular (${ve} orders)`,action:"Restock immediately"}):ne<=10&&ve>5&&Ne.push({type:"low_stock",priority:"medium",message:`${G.name} has ${ne} units left and moderate demand`,action:"Consider restocking soon"})}),ut.length>0&&Ne.push({type:"popular_item",priority:"medium",message:`${ut[0][0]} is your most popular item (${ut[0][1].totalOrders} orders)`,action:"Ensure adequate stock"}),Oe.length>0&&Ne.push({type:"peak_hours",priority:"low",message:`Peak ordering hours: ${Oe.join(", ")}`,action:"Prepare extra staff during these hours"}),Pe&&Ne.push({type:"festival_nonveg_reduction",priority:"high",message:`Tomorrow is ${Pe.name} - Non-veg consumption will be ${Math.round(Pe.reduction*100)}% lower`,action:`Reduce non-veg items by ${Math.round(Pe.reduction*100)}%. Focus on vegetarian options like Dosa, Idli, Sambar, Curd Rice`});const je=Vu.seasonal[Ce]||Vu.seasonal.default||{},_e=Object.entries(je).sort(([,G],[,ne])=>ne-G)[0];_e&&_e[1]>1.2&&Ne.push({type:"seasonal_boost",priority:"medium",message:`Current season (${Ce}) favors ${_e[0]} - demand is ${Math.round(_e[1]*100)}% higher`,action:`Increase ${_e[0]} preparation for seasonal demand`});const Re=at.find(G=>G.isHoliday),ke=at.find(G=>G.isWeekend&&!G.isHoliday);Re&&Ne.push({type:"holiday_planning",priority:"medium",message:"Sunday is college holiday - no orders expected (0 orders)",action:"College closed on Sunday. Focus on maintenance and preparation for Monday"}),ke&&Ne.push({type:"saturday_pattern",priority:"medium",message:"Saturday shows 25% lower demand due to Telangana college non-veg consumption patterns",action:"Reduce non-veg items by 20-30%. Focus on vegetarian options and lighter meals"});const Ue=q.reduce((G,ne)=>G+(Number(ne.total_amount??ne.price??0)||0),0),it=q.length>0?Ue/q.length:0,Fe=X*it,j=oe*it,U=Be*7*it;t({summary:{todayOrders:se,yesterdayOrders:Se,weekAverage:Math.round(De),monthAverage:Math.round(Me),predictedTomorrow:X,predictedDayAfter:oe,weeklyAverage:Be,predictedRevenue:Math.round(Fe),predictedRevenueDayAfter:Math.round(j),predictedWeeklyRevenue:Math.round(U),totalItems:we.length,totalOrders:q.length},popularItems:ut.slice(0,5),peakHours:Oe,recommendations:Ne,itemStats:Ye,weeklyPredictions:at,teluguDate:$e,currentSeason:Ce,festival:Ie,lastUpdated:new Date}),console.log(" AI Predictions: Generated predictions successfully")},M=async({showSpinner:q=!1,silent:we=!1}={})=>{q&&g(!0);try{const Te=new Date(Date.now()-2592e6).toISOString(),{data:ae,error:L}=await Ee.from("orders").select("*").gte("created_at",Te).order("created_at",{ascending:!1});if(L)throw L;const{data:te,error:ce}=await Ee.from("food_items").select("*").order("name",{ascending:!0});if(ce)throw ce;const Z=ae??[],pe=te??[];w(Z),A(pe),k(Z,pe),y(new Date),console.log(" AI Predictions: data refreshed",{orders:Z.length,items:pe.length})}catch(Te){console.error(" AI Predictions: Failed to fetch data",Te),we||alert("Failed to fetch AI predictions data")}finally{q&&g(!1)}};O.useEffect(()=>{M({showSpinner:!0})},[]),O.useEffect(()=>{if(!c)return;M({silent:!0});const q=setInterval(()=>{console.log(" AI Predictions: Auto-refreshing data..."),M({silent:!0})},3600*1e3);return()=>clearInterval(q)},[c]);const V=q=>{const we=new Date(E);q==="prev"?we.setMonth(we.getMonth()-1):we.setMonth(we.getMonth()+1),S(we)},ie=(q,we,Te)=>{new Date(Te.getFullYear(),Te.getMonth(),1);const L=new Date(Te.getFullYear(),Te.getMonth()+1,0).getDate(),te=[];for(let ce=1;ce<=L;ce++){const Z=new Date(Te.getFullYear(),Te.getMonth(),ce),pe=ns(Z),B=Z.getDay()===0||Z.getDay()===6,H=Z.getDay()===0;let Se=q.length>0?q.length/30:10;B&&(H?Se=0:Se*=.75),pe&&(Se*=1-pe.reduction+.3),te.push({date:Z,day:N[Z.getDay()],predicted:Math.round(Se),festival:pe,season:Tl(Z),isWeekend:B,isHoliday:H})}return te},fe=()=>{if(!e)return null;const we=ie(x,_,E).find(Te=>Te.date.toDateString()===T.toDateString());return we?p.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[p.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"18px"},children:r==="telugu"?"  ":"Selected Day Details"}),p.jsxs("div",{style:{marginBottom:"16px"},children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937"},children:we.date.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),r==="telugu"&&p.jsx("div",{style:{fontSize:"16px",color:"#6b7280",marginTop:"4px"},children:we.day})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",marginBottom:"16px"},children:[p.jsxs("div",{style:{padding:"12px",backgroundColor:we.isHoliday?"#fef2f2":"#ffffff",borderRadius:"8px",border:`1px solid ${we.isHoliday?"#fca5a5":"#e5e7eb"}`},children:[p.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:r==="telugu"?" ":"Predicted Orders"}),p.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:we.isHoliday?"#dc2626":"#16a34a"},children:we.predicted})]}),p.jsxs("div",{style:{padding:"12px",backgroundColor:"#ffffff",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[p.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:r==="telugu"?" ":"Day Type"}),p.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:we.isHoliday?" Holiday":we.isWeekend?" Saturday (Less Non-veg)":" Weekday"})]})]}),we.festival&&p.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fde047",marginBottom:"16px"},children:[p.jsxs("div",{style:{fontSize:"12px",color:"#d97706",marginBottom:"4px"},children:[" ",r==="telugu"?"":"Festival"]}),p.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#d97706",marginBottom:"4px"},children:we.festival.name}),p.jsxs("div",{style:{fontSize:"14px",color:"#d97706"},children:["Non-veg reduction: ",Math.round(we.festival.reduction*100),"%"]})]}),p.jsxs("div",{style:{padding:"12px",backgroundColor:"#f0fdf4",borderRadius:"8px",border:"1px solid #bbf7d0"},children:[p.jsxs("div",{style:{fontSize:"12px",color:"#16a34a",marginBottom:"4px"},children:[" ",r==="telugu"?"":"Recommendations"]}),p.jsx("div",{style:{fontSize:"14px",color:"#16a34a"},children:we.isHoliday?r==="telugu"?" .   ":"College closed. Focus on maintenance":r==="telugu"?"  -    ":"Normal day - regular staff and stock"})]})]}):null},xe=async()=>{console.log(" Manual refresh triggered - fetching fresh data from backend"),await M({showSpinner:!0})};return n?p.jsxs("div",{style:{display:"grid",gap:"16px"},children:[p.jsx(Mn,{children:p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[p.jsxs("div",{children:[p.jsx("h2",{style:{margin:0},children:" AI Predictions & Analytics - Hyderabad"}),p.jsx("p",{style:{margin:"8px 0 0 0",color:"#666",fontSize:"14px"},children:m?`Last updated: ${m.toLocaleString()}`:"No data loaded yet"}),e&&p.jsxs("div",{style:{margin:"8px 0 0 0",fontSize:"14px",color:"#059669"},children:[" ",e.teluguDate.day,", ",e.teluguDate.month," ",e.teluguDate.year,e.festival&&`   ${e.festival}`,e.currentSeason&&`   ${e.currentSeason} season`]})]}),p.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("label",{style:{fontSize:"14px"},children:"Language:"}),p.jsxs("select",{value:r,onChange:q=>i(q.target.value),style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #ccc"},children:[p.jsx("option",{value:"english",children:"English"}),p.jsx("option",{value:"telugu",children:""})]})]}),p.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[p.jsx("label",{style:{fontSize:"14px"},children:"Period:"}),p.jsxs("select",{value:a,onChange:q=>l(q.target.value),style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #ccc"},children:[p.jsx("option",{value:"tomorrow",children:"Tomorrow"}),p.jsx("option",{value:"day_after",children:"Day After"}),p.jsx("option",{value:"week",children:"Weekly"})]})]}),p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[p.jsx("input",{type:"checkbox",checked:c,onChange:q=>d(q.target.checked)}),"Auto-refresh (1hr)"]}),p.jsx("button",{className:"btn",onClick:xe,disabled:f,style:{minWidth:"100px"},children:f?"Loading...":"Refresh Now"})]})]})}),f&&p.jsx(Mn,{children:p.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[p.jsx("div",{style:{fontSize:"18px",marginBottom:"8px"},children:""}),p.jsx("div",{children:"Loading AI predictions..."})]})}),e&&p.jsxs(p.Fragment,{children:[p.jsx(Mn,{title:" Hyderabad Food Analytics & Predictions",children:p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[p.jsxs("div",{style:{backgroundColor:"#f0f9ff",padding:"16px",borderRadius:"8px",border:"1px solid #0ea5e9"},children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0369a1"},children:e.summary.todayOrders}),p.jsx("div",{style:{fontSize:"14px",color:"#0369a1"},children:r==="telugu"?" ":"Orders Today"})]}),p.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"16px",borderRadius:"8px",border:"1px solid #22c55e"},children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#15803d"},children:a==="tomorrow"?e.summary.predictedTomorrow:a==="day_after"?e.summary.predictedDayAfter:e.summary.weeklyAverage}),p.jsx("div",{style:{fontSize:"14px",color:"#15803d"},children:r==="telugu"?a==="tomorrow"?" ":a==="day_after"?"  ":" ":a==="tomorrow"?"Predicted Tomorrow":a==="day_after"?"Day After Tomorrow":"Weekly Average"})]}),p.jsxs("div",{style:{backgroundColor:"#fef3c7",padding:"16px",borderRadius:"8px",border:"1px solid #f59e0b"},children:[p.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#d97706"},children:["",a==="tomorrow"?e.summary.predictedRevenue:a==="day_after"?e.summary.predictedRevenueDayAfter:e.summary.predictedWeeklyRevenue]}),p.jsx("div",{style:{fontSize:"14px",color:"#d97706"},children:r==="telugu"?a==="tomorrow"?" ":a==="day_after"?"  ":" ":a==="tomorrow"?"Predicted Revenue":a==="day_after"?"Day After Revenue":"Weekly Revenue"})]}),p.jsxs("div",{style:{backgroundColor:"#f3e8ff",padding:"16px",borderRadius:"8px",border:"1px solid #a855f7"},children:[p.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#7c3aed"},children:e.summary.weekAverage}),p.jsx("div",{style:{fontSize:"14px",color:"#7c3aed"},children:r==="telugu"?" ":"Weekly Average"})]})]})}),p.jsx(Mn,{title:" Most Popular Items",children:p.jsxs("table",{className:"table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Item"}),p.jsx("th",{children:"Total Orders"}),p.jsx("th",{children:"Avg Price"}),p.jsx("th",{children:"Total Revenue"}),p.jsx("th",{children:"Last Ordered"})]})}),p.jsx("tbody",{children:e.popularItems.map(([q,we],Te)=>p.jsxs("tr",{children:[p.jsx("td",{children:p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsxs("span",{style:{backgroundColor:Te===0?"#fbbf24":Te===1?"#9ca3af":"#cd7c2f",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:["#",Te+1]}),q]})}),p.jsx("td",{children:we.totalOrders}),p.jsxs("td",{children:["",Math.round(we.avgPrice)]}),p.jsxs("td",{children:["",Math.round(we.totalRevenue)]}),p.jsx("td",{children:we.lastOrdered?new Date(we.lastOrdered).toLocaleDateString():"N/A"})]},q))})]})}),p.jsx(Mn,{title:" Calendar View",children:p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[p.jsxs("div",{style:{backgroundColor:"#1f2937",borderRadius:"12px",padding:"16px",color:"white",fontFamily:"system-ui, -apple-system, sans-serif"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid #374151"},children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:"white"},children:T.toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"long"})}),r==="telugu"&&p.jsx("div",{style:{fontSize:"14px",color:"#9ca3af",marginTop:"2px"},children:N[T.getDay()]})]}),p.jsx("div",{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:"4px",backgroundColor:"#374151"},children:p.jsx("span",{style:{color:"#9ca3af",fontSize:"12px"},children:""})})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[p.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"white"},children:E.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsx("button",{onClick:()=>V("prev"),style:{width:"24px",height:"24px",border:"none",backgroundColor:"#374151",color:"#9ca3af",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),p.jsx("button",{onClick:()=>V("next"),style:{width:"24px",height:"24px",border:"none",backgroundColor:"#374151",color:"#9ca3af",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]})]}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",marginBottom:"8px"},children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(q=>p.jsx("div",{style:{padding:"8px 4px",textAlign:"center",fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:r==="telugu"?q==="Su"?"":q==="Mo"?"":q==="Tu"?"":q==="We"?"":q==="Th"?"":q==="Fr"?"":"":q},q))}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px"},children:(()=>{const q=E.getMonth(),we=E.getFullYear(),Te=new Date(we,q,1),ae=new Date(Te);ae.setDate(ae.getDate()-Te.getDay());const L=[];for(let ce=0;ce<42;ce++){const Z=new Date(ae);Z.setDate(ae.getDate()+ce),L.push(Z)}const te=e?ie(x,_,E):[];return L.map((ce,Z)=>{const pe=ce.getMonth()===q,B=ce.toDateString()===new Date().toDateString(),H=ce.toDateString()===T.toDateString(),se=te.find(Ye=>Ye.date.toDateString()===ce.toDateString()),Se=ce.getDay()===0,De=ce.getDay()===0||ce.getDay()===6,Me=ns(ce);return p.jsxs("div",{onClick:()=>R(ce),style:{padding:"8px 4px",textAlign:"center",cursor:"pointer",borderRadius:"6px",backgroundColor:H?"#3b82f6":B?"#f59e0b":Se?"#ef4444":De?"#8b5cf6":Me?"#f97316":"transparent",color:H||pe?"white":"#6b7280",fontSize:"14px",fontWeight:B?"bold":"normal",transition:"all 0.2s ease",position:"relative"},children:[p.jsx("div",{style:{marginBottom:"2px"},children:ce.getDate()}),se&&p.jsx("div",{style:{fontSize:"10px",fontWeight:"bold",color:H?"white":Se?"#fca5a5":De?"#c4b5fd":Me?"#fed7aa":"#10b981"},children:se.predicted}),Me&&p.jsx("div",{style:{position:"absolute",top:"2px",right:"2px",width:"6px",height:"6px",backgroundColor:"#f59e0b",borderRadius:"50%"}}),De&&!Se&&p.jsx("div",{style:{position:"absolute",top:"2px",left:"2px",width:"6px",height:"6px",backgroundColor:"#8b5cf6",borderRadius:"50%"}})]},Z)})})()}),p.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",fontSize:"10px",marginTop:"12px",padding:"8px",backgroundColor:"#374151",borderRadius:"6px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[p.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#f59e0b",borderRadius:"50%"}}),p.jsx("span",{style:{color:"#9ca3af"},children:"Festival"})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[p.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#8b5cf6",borderRadius:"50%"}}),p.jsx("span",{style:{color:"#9ca3af"},children:"Saturday (Less Non-veg)"})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[p.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%"}}),p.jsx("span",{style:{color:"#9ca3af"},children:"Sunday (Holiday)"})]})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px",paddingTop:"12px",borderTop:"1px solid #374151"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.jsx("button",{style:{width:"20px",height:"20px",border:"none",backgroundColor:"#374151",color:"#9ca3af",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),p.jsx("span",{style:{fontSize:"14px",color:"white"},children:(()=>{const q=e.weeklyPredictions.find(we=>we.date.toDateString()===T.toDateString());return q?`${q.predicted} orders`:"0 orders"})()}),p.jsx("button",{style:{width:"20px",height:"20px",border:"none",backgroundColor:"#374151",color:"#9ca3af",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]}),p.jsxs("button",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:"#374151",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:[p.jsx("span",{children:""}),r==="telugu"?"":"Focus"]})]})]}),p.jsx("div",{children:fe()})]})}),p.jsx(Mn,{title:" Weekly Predictions List",children:p.jsx("div",{style:{display:"grid",gap:"12px"},children:e.weeklyPredictions.map((q,we)=>p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",backgroundColor:q.isHoliday?"#fef2f2":q.isWeekend?"#f0f9ff":"#f9fafb",border:`1px solid ${q.isHoliday?"#fca5a5":q.isWeekend?"#0ea5e9":"#e5e7eb"}`,borderRadius:"8px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[p.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:q.isHoliday?"#dc2626":q.isWeekend?"#0ea5e9":"#6b7280",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold"},children:q.date.getDate()}),p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"600",fontSize:"16px"},children:r==="telugu"?q.day:q.date.toLocaleDateString("en-US",{weekday:"long"})}),p.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[q.date.toLocaleDateString("en-US",{month:"short",day:"numeric"}),q.festival&&`   ${q.festival.name} (Non-veg -${Math.round(q.festival.reduction*100)}%)`,q.isHoliday&&"   College Holiday",q.isWeekend&&!q.isHoliday&&"   Weekend"]})]})]}),p.jsxs("div",{style:{textAlign:"right"},children:[p.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:q.isHoliday?"#dc2626":q.isWeekend?"#0ea5e9":"#374151"},children:q.predicted}),p.jsx("div",{style:{fontSize:"12px",color:"#666"},children:r==="telugu"?"":"Predicted"})]})]},we))})}),p.jsx(Mn,{title:" Peak Ordering Hours",children:p.jsx("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:e.peakHours.map((q,we)=>p.jsxs("div",{style:{backgroundColor:we===0?"#fef2f2":we===1?"#fef3c7":"#f0fdf4",border:`1px solid ${we===0?"#fca5a5":we===1?"#fde047":"#bbf7d0"}`,padding:"12px 16px",borderRadius:"8px",textAlign:"center",minWidth:"80px"},children:[p.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:we===0?"#dc2626":we===1?"#d97706":"#16a34a"},children:q}),p.jsx("div",{style:{fontSize:"12px",color:"#666"},children:we===0?"Peak":we===1?"High":"Medium"})]},q))})}),p.jsx(Mn,{title:" AI Recommendations",children:e.recommendations.length===0?p.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#666",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[p.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),p.jsx("div",{children:"All systems running smoothly! No urgent recommendations."})]}):p.jsx("div",{style:{display:"grid",gap:"16px"},children:["high","medium","low"].map(q=>{const we=e.recommendations.filter(Te=>Te.priority===q).sort((Te,ae)=>{const L={low_stock:0,popular_item:1,peak_hours:2};return L[Te.type]-L[ae.type]});return we.length===0?null:p.jsxs("div",{children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",padding:"8px 12px",backgroundColor:q==="high"?"#fef2f2":q==="medium"?"#fefce8":"#f0fdf4",borderRadius:"6px",border:`1px solid ${q==="high"?"#fca5a5":q==="medium"?"#fde047":"#bbf7d0"}`},children:[p.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:q==="high"?"#dc2626":q==="medium"?"#d97706":"#16a34a",color:"white"},children:q.toUpperCase()}),p.jsx("span",{style:{fontWeight:"600",color:q==="high"?"#dc2626":q==="medium"?"#d97706":"#16a34a"},children:q==="high"?" High Priority Alerts":q==="medium"?" Medium Priority Alerts":" Low Priority Alerts"}),p.jsxs("span",{style:{fontSize:"12px",color:"#666",marginLeft:"auto"},children:[we.length," alert",we.length!==1?"s":""]})]}),p.jsx("div",{style:{display:"grid",gap:"12px"},children:we.map((Te,ae)=>p.jsxs("div",{style:{padding:"16px",borderRadius:"8px",border:`1px solid ${Te.priority==="high"?"#fca5a5":Te.priority==="medium"?"#fde047":"#bbf7d0"}`,backgroundColor:Te.priority==="high"?"#fef2f2":Te.priority==="medium"?"#fefce8":"#f0fdf4"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[p.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:Te.priority==="high"?"#dc2626":Te.priority==="medium"?"#d97706":"#16a34a",color:"white"},children:Te.priority.toUpperCase()}),p.jsx("span",{style:{fontWeight:"600"},children:Te.type==="low_stock"?" Stock Alert":Te.type==="popular_item"?" Popular Item":Te.type==="peak_hours"?" Peak Hours":" Suggestion"})]}),p.jsx("div",{style:{marginBottom:"8px"},children:Te.message}),p.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:Te.priority==="high"?"#dc2626":Te.priority==="medium"?"#d97706":"#16a34a"},children:[" ",Te.action]})]},ae))})]},q)})})})]}),!e&&!f&&p.jsx(Mn,{children:p.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[p.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),p.jsx("h3",{style:{margin:"0 0 8px 0"},children:"AI Predictions Ready"}),p.jsx("p",{style:{margin:"0 0 16px 0",color:"#666"},children:'Click "Refresh Now" to load the latest data and generate predictions'}),p.jsx("button",{className:"btn",onClick:xe,children:"Load Predictions"})]})})]}):p.jsx("div",{className:"home-dashboard",children:p.jsx("div",{className:"card coming-soon-card",children:p.jsxs("div",{className:"coming-soon-content",children:[p.jsx("div",{className:"coming-soon-icon",children:""}),p.jsx("h1",{className:"coming-soon-title",children:"AI Predictions"}),p.jsx("p",{className:"coming-soon-description",children:"Get intelligent insights and predictions about your canteen operations powered by advanced AI algorithms."}),p.jsx("div",{className:"coming-soon-status",children:p.jsxs("div",{className:"status-indicator",children:[p.jsx("span",{style:{marginRight:"8px"},children:""}),"Coming Soon"]})}),p.jsxs("div",{className:"features-preview",children:[p.jsx("h3",{className:"features-title",children:"Planned Features:"}),p.jsxs("div",{className:"features-list",children:[p.jsxs("div",{className:"feature-item",children:[p.jsx("span",{children:""}),p.jsx("span",{children:"Order volume predictions for tomorrow and next week"})]}),p.jsxs("div",{className:"feature-item",children:[p.jsx("span",{children:""}),p.jsx("span",{children:"Revenue forecasting based on historical data"})]}),p.jsxs("div",{className:"feature-item",children:[p.jsx("span",{children:""}),p.jsx("span",{children:"Popular items analysis and recommendations"})]}),p.jsxs("div",{className:"feature-item",children:[p.jsx("span",{children:""}),p.jsx("span",{children:"Peak hours identification for better staffing"})]}),p.jsxs("div",{className:"feature-item",children:[p.jsx("span",{children:""}),p.jsx("span",{children:"Trend analysis with seasonal adjustments"})]})]})]})]})})})}function s9(){const{signOut:n}=T1();return p.jsx("div",{className:"home-dashboard",children:p.jsxs("div",{className:"card",children:[p.jsx("h2",{style:{marginTop:0,marginBottom:"16px"},children:"Account"}),p.jsx("div",{style:{display:"flex",justifyContent:"flex-start"},children:p.jsx("button",{className:"btn btn-danger",onClick:async()=>{try{await n()}catch(e){console.error("Error signing out:",e)}},style:{padding:"10px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",display:"inline-flex",alignItems:"center",justifyContent:"center",width:"auto"},children:"Log out"})})]})})}function l9({onScan:n,scanMessage:e,lastScannedCode:t,isProcessing:r}){const[i,a]=O.useState(""),[l,c]=O.useState([]),d=O.useRef(null);O.useEffect(()=>{d.current?.focus()},[]),O.useEffect(()=>{t&&c(g=>[t,...g.filter(y=>y!==t)].slice(0,6))},[t]);const f=g=>{g.preventDefault();const m=i.trim();m&&(n?.(m),a(""))};return p.jsx("div",{style:{padding:"24px",display:"flex",justifyContent:"center"},children:p.jsxs("div",{style:{width:"100%",maxWidth:"960px",display:"flex",flexDirection:"column",gap:"24px"},children:[p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[p.jsx("h2",{style:{margin:0,fontSize:"28px",fontWeight:700,color:"#111827"},children:"Scan Orders"}),p.jsx("p",{style:{margin:0,fontSize:"15px",color:"#4b5563",lineHeight:1.5},children:"Connect your 2D barcode scanner. Each scan searches for the order token and opens the order panel on the right for quick fulfilment."})]}),p.jsxs("div",{style:{display:"grid",gap:"24px",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))"},children:[p.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 20px 40px -15px rgba(15, 23, 42, 0.15)",display:"flex",flexDirection:"column",gap:"16px"},children:[p.jsxs("div",{children:[p.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#111827"},children:"Manual entry"}),p.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"14px",color:"#6b7280",lineHeight:1.6},children:"If the scanner is unavailable, type or paste an order token and press enter to locate the order."})]}),p.jsxs("form",{onSubmit:f,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[p.jsx("input",{ref:d,value:i,onChange:g=>a(g.target.value),placeholder:"Scan or enter order token",style:{padding:"12px 16px",borderRadius:"12px",border:"1px solid #d1d5db",fontSize:"14px",outline:"none",transition:"border-color 0.2s ease"},onFocus:g=>g.currentTarget.style.borderColor="#2563eb",onBlur:g=>g.currentTarget.style.borderColor="#d1d5db"}),p.jsxs("div",{style:{display:"flex",gap:"12px"},children:[p.jsx("button",{type:"submit",disabled:!i.trim()||r,style:{flex:1,padding:"12px 16px",borderRadius:"12px",border:"none",backgroundColor:!i.trim()||r?"#bfdbfe":"#2563eb",color:"#ffffff",fontWeight:600,cursor:!i.trim()||r?"not-allowed":"pointer",transition:"background-color 0.2s ease"},children:r?"Searching":"Search order"}),p.jsx("button",{type:"button",onClick:()=>a(""),style:{padding:"12px 16px",borderRadius:"12px",border:"1px solid #e5e7eb",backgroundColor:"#f9fafb",color:"#374151",fontWeight:500,cursor:"pointer"},children:"Clear"})]})]}),p.jsxs("div",{style:{fontSize:"13px",color:"#6b7280",lineHeight:1.5},children:[p.jsx("strong",{style:{color:"#111827"},children:"Tip:"})," Keep the input focused so the scanner can type directly if needed. The right-hand panel confirms successful scans."]})]}),p.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",boxShadow:"0 20px 40px -15px rgba(15, 23, 42, 0.15)",display:"flex",flexDirection:"column",gap:"16px"},children:[p.jsxs("div",{children:[p.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#111827"},children:"Recent scans"}),p.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"14px",color:"#6b7280"},children:"Quick reference for the last few barcodes processed on this device."})]}),l.length===0?p.jsx("div",{style:{padding:"24px",borderRadius:"12px",border:"1px dashed #d1d5db",color:"#6b7280",textAlign:"center",fontSize:"14px"},children:"Scan a barcode to populate this list."}):p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:l.map(g=>p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",borderRadius:"12px",border:"1px solid #e5e7eb",backgroundColor:"#f9fafb",fontSize:"13px",fontFamily:"monospace"},children:[p.jsx("span",{children:g}),p.jsx("button",{type:"button",onClick:()=>n?.(g),style:{padding:"6px 10px",borderRadius:"10px",border:"none",backgroundColor:"#22c55e",color:"#ffffff",fontWeight:600,cursor:"pointer"},children:"Rescan"})]},g))}),p.jsxs("div",{style:{fontSize:"13px",color:"#6b7280"},children:["Last scan: ",t||""]})]})]}),p.jsxs("div",{style:{backgroundColor:"#ecfdf5",borderRadius:"16px",padding:"24px",border:"1px solid rgba(16, 185, 129, 0.25)",display:"flex",flexDirection:"column",gap:"8px"},children:[p.jsx("strong",{style:{color:"#047857"},children:"How it works"}),p.jsxs("ul",{style:{margin:0,paddingLeft:"20px",color:"#0f172a",fontSize:"14px",lineHeight:1.7},children:[p.jsx("li",{children:"Plug in a 2D barcode scanner configured in keyboard mode."}),p.jsx("li",{children:"Keep the scanner aimed at order barcodes. Each scan types the token automatically."}),p.jsx("li",{children:"The right-side order panel pops open for status updates when a match is found."})]}),e&&p.jsx("div",{style:{marginTop:"8px",padding:"10px 14px",borderRadius:"12px",backgroundColor:e.includes("")?"#d1fae5":"#fee2e2",color:e.includes("")?"#065f46":"#991b1b",fontSize:"13px",fontWeight:600,alignSelf:"flex-start"},children:e})]})]})})}function c9(){const{popupNotification:n,closePopupNotification:e}=A1();if(!n)return null;const t=n.type==="order_cancelled",r=n.type==="availability_change",i=n.type==="error";let a;return i?a={border:"border-red-200 dark:border-red-700",borderLeft:"#ef4444",shadow:"rgba(239, 68, 68, 0.1)",bgHeader:"bg-red-50 dark:bg-red-900/20",bgIcon:"bg-red-500",textTitle:"text-red-800 dark:text-red-200",textTime:"text-red-600 dark:text-red-300",textBtn:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",bgProgress:"bg-red-200 dark:bg-red-800",progress:"bg-red-500"}:r?a={border:"border-blue-200 dark:border-blue-700",borderLeft:"#3b82f6",shadow:"rgba(59, 130, 246, 0.1)",bgHeader:"bg-blue-50 dark:bg-blue-900/20",bgIcon:"bg-blue-500",textTitle:"text-blue-800 dark:text-blue-200",textTime:"text-blue-600 dark:text-blue-300",textBtn:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",bgProgress:"bg-blue-200 dark:bg-blue-800",progress:"bg-blue-500"}:t?a={border:"border-red-200 dark:border-red-700",borderLeft:"#ef4444",shadow:"rgba(239, 68, 68, 0.1)",bgHeader:"bg-red-50 dark:bg-red-900/20",bgIcon:"bg-red-500",textTitle:"text-red-800 dark:text-red-200",textTime:"text-red-600 dark:text-red-300",textBtn:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",bgProgress:"bg-red-200 dark:bg-red-800",progress:"bg-red-500"}:a={border:"border-green-200 dark:border-green-700",borderLeft:"#10b981",shadow:"rgba(16, 185, 129, 0.1)",bgHeader:"bg-green-50 dark:bg-green-900/20",bgIcon:"bg-green-500",textTitle:"text-green-800 dark:text-green-200",textTime:"text-green-600 dark:text-green-300",textBtn:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200",bgProgress:"bg-green-200 dark:bg-green-800",progress:"bg-green-500"},p.jsx(Gn,{children:p.jsx(ct.div,{className:"fixed top-4 right-4 z-50 max-w-sm w-full",initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{type:"spring",stiffness:300,damping:25,duration:.3},children:p.jsxs("div",{className:`bg-white dark:bg-gray-800 border ${a.border} rounded-lg shadow-lg overflow-hidden`,style:{borderLeft:`4px solid ${a.borderLeft}`,boxShadow:`0 10px 25px rgba(0, 0, 0, 0.1), 0 0 0 1px ${a.shadow}`},children:[p.jsxs("div",{className:`flex items-center justify-between p-4 ${a.bgHeader}`,children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`w-8 h-8 ${a.bgIcon} rounded-full flex items-center justify-center`,children:p.jsx(H5,{className:"w-4 h-4 text-white"})}),p.jsxs("div",{children:[p.jsx("h4",{className:`font-semibold ${a.textTitle} text-sm`,children:n.title}),p.jsx("p",{className:`text-xs ${a.textTime}`,children:new Date(n.timestamp).toLocaleTimeString()})]})]}),p.jsx("button",{onClick:e,className:`${a.textBtn} transition-colors`,children:p.jsx(rn,{className:"w-4 h-4"})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("p",{className:"text-gray-800 dark:text-gray-200 text-sm leading-relaxed",children:n.message}),n.orderData&&!t&&p.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:p.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[n.orderData.total_amount&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Amount:"}),p.jsxs("span",{className:"font-medium",children:["",n.orderData.total_amount]})]}),n.orderData.order_type&&n.orderData.order_type!=="cancelled"&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Type:"}),p.jsx("span",{className:"font-medium capitalize",children:n.orderData.order_type})]}),n.orderData.user_id&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Placed by:"}),p.jsx("span",{className:"font-medium capitalize",children:n.orderData.user_id===yd?"App":"Counter"})]})]})})]}),p.jsx("div",{className:`h-1 ${a.bgProgress}`,children:p.jsx(ct.div,{className:`h-full ${a.progress}`,initial:{width:"100%"},animate:{width:"0%"},transition:{duration:5,ease:"linear"}})})]})})})}YE.createRoot(document.getElementById("root")).render(p.jsx(O.StrictMode,{children:p.jsx(lA,{children:p.jsx(Y7,{})})}));
