(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function a2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function nE(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var rh={exports:{}},Ws={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function rE(){if(wm)return Ws;wm=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:s,ref:i!==void 0?i:null,props:a}}return Ws.Fragment=e,Ws.jsx=t,Ws.jsxs=t,Ws}var _m;function iE(){return _m||(_m=1,rh.exports=rE()),rh.exports}var v=iE(),ih={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function aE(){if(bm)return Pe;bm=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=g&&R[g]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function C(R,B,Z){this.props=R,this.context=B,this.refs=E,this.updater=Z||x}C.prototype.isReactComponent={},C.prototype.setState=function(R,B){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,B,"setState")},C.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function b(){}b.prototype=C.prototype;function T(R,B,Z){this.props=R,this.context=B,this.refs=E,this.updater=Z||x}var O=T.prototype=new b;O.constructor=T,_(O,C.prototype),O.isPureReactComponent=!0;var I=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function H(R,B,Z,ne,ce,xe){return Z=xe.ref,{$$typeof:n,type:R,key:B,ref:Z!==void 0?Z:null,props:xe}}function G(R,B){return H(R.type,B,void 0,void 0,void 0,R.props)}function V(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function Q(R){var B={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(Z){return B[Z]})}var re=/\/+/g;function te(R,B){return typeof R=="object"&&R!==null&&R.key!=null?Q(""+R.key):B.toString(36)}function ae(){}function fe(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(ae,ae):(R.status="pending",R.then(function(B){R.status==="pending"&&(R.status="fulfilled",R.value=B)},function(B){R.status==="pending"&&(R.status="rejected",R.reason=B)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function L(R,B,Z,ne,ce){var xe=typeof R;(xe==="undefined"||xe==="boolean")&&(R=null);var he=!1;if(R===null)he=!0;else switch(xe){case"bigint":case"string":case"number":he=!0;break;case"object":switch(R.$$typeof){case n:case e:he=!0;break;case p:return he=R._init,L(he(R._payload),B,Z,ne,ce)}}if(he)return ce=ce(R),he=ne===""?"."+te(R,0):ne,I(ce)?(Z="",he!=null&&(Z=he.replace(re,"$&/")+"/"),L(ce,B,Z,"",function(Tt){return Tt})):ce!=null&&(V(ce)&&(ce=G(ce,Z+(ce.key==null||R&&R.key===ce.key?"":(""+ce.key).replace(re,"$&/")+"/")+he)),B.push(ce)),1;he=0;var Me=ne===""?".":ne+":";if(I(R))for(var Oe=0;Oe<R.length;Oe++)ne=R[Oe],xe=Me+te(ne,Oe),he+=L(ne,B,Z,xe,ce);else if(Oe=y(R),typeof Oe=="function")for(R=Oe.call(R),Oe=0;!(ne=R.next()).done;)ne=ne.value,xe=Me+te(ne,Oe++),he+=L(ne,B,Z,xe,ce);else if(xe==="object"){if(typeof R.then=="function")return L(fe(R),B,Z,ne,ce);throw B=String(R),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return he}function S(R,B,Z){if(R==null)return R;var ne=[],ce=0;return L(R,ne,"","",function(xe){return B.call(Z,xe,ce++)}),ne}function k(R){if(R._status===-1){var B=R._result;B=B(),B.then(function(Z){(R._status===0||R._status===-1)&&(R._status=1,R._result=Z)},function(Z){(R._status===0||R._status===-1)&&(R._status=2,R._result=Z)}),R._status===-1&&(R._status=0,R._result=B)}if(R._status===1)return R._result.default;throw R._result}var U=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function K(){}return Pe.Children={map:S,forEach:function(R,B,Z){S(R,function(){B.apply(this,arguments)},Z)},count:function(R){var B=0;return S(R,function(){B++}),B},toArray:function(R){return S(R,function(B){return B})||[]},only:function(R){if(!V(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Pe.Component=C,Pe.Fragment=t,Pe.Profiler=i,Pe.PureComponent=T,Pe.StrictMode=r,Pe.Suspense=f,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(R){return P.H.useMemoCache(R)}},Pe.cache=function(R){return function(){return R.apply(null,arguments)}},Pe.cloneElement=function(R,B,Z){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ne=_({},R.props),ce=R.key,xe=void 0;if(B!=null)for(he in B.ref!==void 0&&(xe=void 0),B.key!==void 0&&(ce=""+B.key),B)!F.call(B,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&B.ref===void 0||(ne[he]=B[he]);var he=arguments.length-2;if(he===1)ne.children=Z;else if(1<he){for(var Me=Array(he),Oe=0;Oe<he;Oe++)Me[Oe]=arguments[Oe+2];ne.children=Me}return H(R.type,ce,void 0,void 0,xe,ne)},Pe.createContext=function(R){return R={$$typeof:s,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:a,_context:R},R},Pe.createElement=function(R,B,Z){var ne,ce={},xe=null;if(B!=null)for(ne in B.key!==void 0&&(xe=""+B.key),B)F.call(B,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ce[ne]=B[ne]);var he=arguments.length-2;if(he===1)ce.children=Z;else if(1<he){for(var Me=Array(he),Oe=0;Oe<he;Oe++)Me[Oe]=arguments[Oe+2];ce.children=Me}if(R&&R.defaultProps)for(ne in he=R.defaultProps,he)ce[ne]===void 0&&(ce[ne]=he[ne]);return H(R,xe,void 0,void 0,null,ce)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(R){return{$$typeof:c,render:R}},Pe.isValidElement=V,Pe.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:k}},Pe.memo=function(R,B){return{$$typeof:d,type:R,compare:B===void 0?null:B}},Pe.startTransition=function(R){var B=P.T,Z={};P.T=Z;try{var ne=R(),ce=P.S;ce!==null&&ce(Z,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(K,U)}catch(xe){U(xe)}finally{P.T=B}},Pe.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Pe.use=function(R){return P.H.use(R)},Pe.useActionState=function(R,B,Z){return P.H.useActionState(R,B,Z)},Pe.useCallback=function(R,B){return P.H.useCallback(R,B)},Pe.useContext=function(R){return P.H.useContext(R)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(R,B){return P.H.useDeferredValue(R,B)},Pe.useEffect=function(R,B,Z){var ne=P.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(R,B)},Pe.useId=function(){return P.H.useId()},Pe.useImperativeHandle=function(R,B,Z){return P.H.useImperativeHandle(R,B,Z)},Pe.useInsertionEffect=function(R,B){return P.H.useInsertionEffect(R,B)},Pe.useLayoutEffect=function(R,B){return P.H.useLayoutEffect(R,B)},Pe.useMemo=function(R,B){return P.H.useMemo(R,B)},Pe.useOptimistic=function(R,B){return P.H.useOptimistic(R,B)},Pe.useReducer=function(R,B,Z){return P.H.useReducer(R,B,Z)},Pe.useRef=function(R){return P.H.useRef(R)},Pe.useState=function(R){return P.H.useState(R)},Pe.useSyncExternalStore=function(R,B,Z){return P.H.useSyncExternalStore(R,B,Z)},Pe.useTransition=function(){return P.H.useTransition()},Pe.version="19.1.1",Pe}var Em;function M0(){return Em||(Em=1,ih.exports=aE()),ih.exports}var N=M0();const oE=a2(N);var ah={exports:{}},Ks={},oh={exports:{}},sh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function sE(){return Sm||(Sm=1,(function(n){function e(S,k){var U=S.length;S.push(k);e:for(;0<U;){var K=U-1>>>1,R=S[K];if(0<i(R,k))S[K]=k,S[U]=R,U=K;else break e}}function t(S){return S.length===0?null:S[0]}function r(S){if(S.length===0)return null;var k=S[0],U=S.pop();if(U!==k){S[0]=U;e:for(var K=0,R=S.length,B=R>>>1;K<B;){var Z=2*(K+1)-1,ne=S[Z],ce=Z+1,xe=S[ce];if(0>i(ne,U))ce<R&&0>i(xe,ne)?(S[K]=xe,S[ce]=U,K=ce):(S[K]=ne,S[Z]=U,K=Z);else if(ce<R&&0>i(xe,U))S[K]=xe,S[ce]=U,K=ce;else break e}}return k}function i(S,k){var U=S.sortIndex-k.sortIndex;return U!==0?U:S.id-k.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();n.unstable_now=function(){return s.now()-c}}var f=[],d=[],p=1,g=null,y=3,x=!1,_=!1,E=!1,C=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function I(S){for(var k=t(d);k!==null;){if(k.callback===null)r(d);else if(k.startTime<=S)r(d),k.sortIndex=k.expirationTime,e(f,k);else break;k=t(d)}}function P(S){if(E=!1,I(S),!_)if(t(f)!==null)_=!0,F||(F=!0,te());else{var k=t(d);k!==null&&L(P,k.startTime-S)}}var F=!1,H=-1,G=5,V=-1;function Q(){return C?!0:!(n.unstable_now()-V<G)}function re(){if(C=!1,F){var S=n.unstable_now();V=S;var k=!0;try{e:{_=!1,E&&(E=!1,T(H),H=-1),x=!0;var U=y;try{t:{for(I(S),g=t(f);g!==null&&!(g.expirationTime>S&&Q());){var K=g.callback;if(typeof K=="function"){g.callback=null,y=g.priorityLevel;var R=K(g.expirationTime<=S);if(S=n.unstable_now(),typeof R=="function"){g.callback=R,I(S),k=!0;break t}g===t(f)&&r(f),I(S)}else r(f);g=t(f)}if(g!==null)k=!0;else{var B=t(d);B!==null&&L(P,B.startTime-S),k=!1}}break e}finally{g=null,y=U,x=!1}k=void 0}}finally{k?te():F=!1}}}var te;if(typeof O=="function")te=function(){O(re)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,fe=ae.port2;ae.port1.onmessage=re,te=function(){fe.postMessage(null)}}else te=function(){b(re,0)};function L(S,k){H=b(function(){S(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(S){S.callback=null},n.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<S?Math.floor(1e3/S):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(S){switch(y){case 1:case 2:case 3:var k=3;break;default:k=y}var U=y;y=k;try{return S()}finally{y=U}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(S,k){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var U=y;y=S;try{return k()}finally{y=U}},n.unstable_scheduleCallback=function(S,k,U){var K=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?K+U:K):U=K,S){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=U+R,S={id:p++,callback:k,priorityLevel:S,startTime:U,expirationTime:R,sortIndex:-1},U>K?(S.sortIndex=U,e(d,S),t(f)===null&&S===t(d)&&(E?(T(H),H=-1):E=!0,L(P,U-K))):(S.sortIndex=R,e(f,S),_||x||(_=!0,F||(F=!0,te()))),S},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(S){var k=y;return function(){var U=y;y=k;try{return S.apply(this,arguments)}finally{y=U}}}})(sh)),sh}var Am;function lE(){return Am||(Am=1,oh.exports=sE()),oh.exports}var lh={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function cE(){if(Cm)return yn;Cm=1;var n=M0();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:d,implementation:p}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yn.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,p)},yn.flushSync=function(f){var d=s.T,p=r.p;try{if(s.T=null,r.p=2,f)return f()}finally{s.T=d,r.p=p,r.d.f()}},yn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},yn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},yn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,g=c(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:x}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},yn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},yn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=c(p,d.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},yn.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},yn.requestFormReset=function(f){r.d.r(f)},yn.unstable_batchedUpdates=function(f,d){return f(d)},yn.useFormState=function(f,d,p){return s.H.useFormState(f,d,p)},yn.useFormStatus=function(){return s.H.useHostTransitionStatus()},yn.version="19.1.1",yn}var Tm;function uE(){if(Tm)return lh.exports;Tm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),lh.exports=cE(),lh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om;function fE(){if(Om)return Ks;Om=1;var n=lE(),e=M0(),t=uE();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var l=o,u=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(u=l.return),o=l.return;while(o)}return l.tag===3?u:null}function s(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(a(o)!==o)throw Error(r(188))}function f(o){var l=o.alternate;if(!l){if(l=a(o),l===null)throw Error(r(188));return l!==o?null:o}for(var u=o,h=l;;){var m=u.return;if(m===null)break;var w=m.alternate;if(w===null){if(h=m.return,h!==null){u=h;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===u)return c(m),o;if(w===h)return c(m),l;w=w.sibling}throw Error(r(188))}if(u.return!==h.return)u=m,h=w;else{for(var A=!1,D=m.child;D;){if(D===u){A=!0,u=m,h=w;break}if(D===h){A=!0,h=m,u=w;break}D=D.sibling}if(!A){for(D=w.child;D;){if(D===u){A=!0,u=w,h=m;break}if(D===h){A=!0,h=w,u=m;break}D=D.sibling}if(!A)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?o:l}function d(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=d(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),O=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function te(o){return o===null||typeof o!="object"?null:(o=re&&o[re]||o["@@iterator"],typeof o=="function"?o:null)}var ae=Symbol.for("react.client.reference");function fe(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ae?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case F:return"SuspenseList";case V:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case O:return(o.displayName||"Context")+".Provider";case T:return(o._context.displayName||"Context")+".Consumer";case I:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case H:return l=o.displayName||null,l!==null?l:fe(o.type)||"Memo";case G:l=o._payload,o=o._init;try{return fe(o(l))}catch{}}return null}var L=Array.isArray,S=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},K=[],R=-1;function B(o){return{current:o}}function Z(o){0>R||(o.current=K[R],K[R]=null,R--)}function ne(o,l){R++,K[R]=o.current,o.current=l}var ce=B(null),xe=B(null),he=B(null),Me=B(null);function Oe(o,l){switch(ne(he,l),ne(xe,o),ne(ce,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?Yv(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=Yv(l),o=Wv(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Z(ce),ne(ce,o)}function Tt(){Z(ce),Z(xe),Z(he)}function pn(o){o.memoizedState!==null&&ne(Me,o);var l=ce.current,u=Wv(l,o.type);l!==u&&(ne(xe,o),ne(ce,u))}function xt(o){xe.current===o&&(Z(ce),Z(xe)),Me.current===o&&(Z(Me),Gs._currentValue=U)}var Rn=Object.prototype.hasOwnProperty,_r=n.unstable_scheduleCallback,Br=n.unstable_cancelCallback,ci=n.unstable_shouldYield,Na=n.unstable_requestPaint,bn=n.unstable_now,ui=n.unstable_getCurrentPriorityLevel,Lr=n.unstable_ImmediatePriority,q=n.unstable_UserBlockingPriority,ue=n.unstable_NormalPriority,ge=n.unstable_LowPriority,ye=n.unstable_IdlePriority,ve=n.log,je=n.unstable_setDisableYieldValue,Ge=null,Ze=null;function vt(o){if(typeof ve=="function"&&je(o),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(Ge,o)}catch{}}var be=Math.clz32?Math.clz32:Yn,gn=Math.log,Ot=Math.LN2;function Yn(o){return o>>>=0,o===0?32:31-(gn(o)/Ot|0)|0}var br=256,De=4194304;function Ae(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function En(o,l,u){var h=o.pendingLanes;if(h===0)return 0;var m=0,w=o.suspendedLanes,A=o.pingedLanes;o=o.warmLanes;var D=h&134217727;return D!==0?(h=D&~w,h!==0?m=Ae(h):(A&=D,A!==0?m=Ae(A):u||(u=D&~o,u!==0&&(m=Ae(u))))):(D=h&~w,D!==0?m=Ae(D):A!==0?m=Ae(A):u||(u=h&~o,u!==0&&(m=Ae(u)))),m===0?0:l!==0&&l!==m&&(l&w)===0&&(w=m&-m,u=l&-l,w>=u||w===32&&(u&4194048)!==0)?l:m}function fi(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function jl(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(){var o=br;return br<<=1,(br&4194048)===0&&(br=256),o}function Jo(){var o=De;return De<<=1,(De&62914560)===0&&(De=4194304),o}function es(o){for(var l=[],u=0;31>u;u++)l.push(o);return l}function Wi(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function $u(o,l,u,h,m,w){var A=o.pendingLanes;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=u,o.entangledLanes&=u,o.errorRecoveryDisabledLanes&=u,o.shellSuspendCounter=0;var D=o.entanglements,j=o.expirationTimes,Y=o.hiddenUpdates;for(u=A&~u;0<u;){var oe=31-be(u),le=1<<oe;D[oe]=0,j[oe]=-1;var J=Y[oe];if(J!==null)for(Y[oe]=null,oe=0;oe<J.length;oe++){var ee=J[oe];ee!==null&&(ee.lane&=-536870913)}u&=~le}h!==0&&k1(o,h,0),w!==0&&m===0&&o.tag!==0&&(o.suspendedLanes|=w&~(A&~l))}function k1(o,l,u){o.pendingLanes|=l,o.suspendedLanes&=~l;var h=31-be(l);o.entangledLanes|=l,o.entanglements[h]=o.entanglements[h]|1073741824|u&4194090}function M1(o,l){var u=o.entangledLanes|=l;for(o=o.entanglements;u;){var h=31-be(u),m=1<<h;m&l|o[h]&l&&(o[h]|=l),u&=~m}}function qu(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Xu(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function P1(){var o=k.p;return o!==0?o:(o=window.event,o===void 0?32:pm(o.type))}function $_(o,l){var u=k.p;try{return k.p=o,l()}finally{k.p=u}}var hi=Math.random().toString(36).slice(2),vn="__reactFiber$"+hi,Nn="__reactProps$"+hi,Ia="__reactContainer$"+hi,Yu="__reactEvents$"+hi,q_="__reactListeners$"+hi,X_="__reactHandles$"+hi,j1="__reactResources$"+hi,ts="__reactMarker$"+hi;function Wu(o){delete o[vn],delete o[Nn],delete o[Yu],delete o[q_],delete o[X_]}function ka(o){var l=o[vn];if(l)return l;for(var u=o.parentNode;u;){if(l=u[Ia]||u[vn]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(o=Jv(o);o!==null;){if(u=o[vn])return u;o=Jv(o)}return l}o=u,u=o.parentNode}return null}function Ma(o){if(o=o[vn]||o[Ia]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function ns(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function Pa(o){var l=o[j1];return l||(l=o[j1]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Zt(o){o[ts]=!0}var B1=new Set,L1={};function Ki(o,l){ja(o,l),ja(o+"Capture",l)}function ja(o,l){for(L1[o]=l,o=0;o<l.length;o++)B1.add(l[o])}var Y_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),F1={},U1={};function W_(o){return Rn.call(U1,o)?!0:Rn.call(F1,o)?!1:Y_.test(o)?U1[o]=!0:(F1[o]=!0,!1)}function Bl(o,l,u){if(W_(l))if(u===null)o.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var h=l.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+u)}}function Ll(o,l,u){if(u===null)o.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+u)}}function Fr(o,l,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttributeNS(l,u,""+h)}}var Ku,V1;function Ba(o){if(Ku===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);Ku=l&&l[1]||"",V1=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ku+o+V1}var Zu=!1;function Qu(o,l){if(!o||Zu)return"";Zu=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(l){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var J=ee}Reflect.construct(o,[],le)}else{try{le.call()}catch(ee){J=ee}o.call(le.prototype)}}else{try{throw Error()}catch(ee){J=ee}(le=o())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),A=w[0],D=w[1];if(A&&D){var j=A.split(`
`),Y=D.split(`
`);for(m=h=0;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;for(;m<Y.length&&!Y[m].includes("DetermineComponentFrameRoot");)m++;if(h===j.length||m===Y.length)for(h=j.length-1,m=Y.length-1;1<=h&&0<=m&&j[h]!==Y[m];)m--;for(;1<=h&&0<=m;h--,m--)if(j[h]!==Y[m]){if(h!==1||m!==1)do if(h--,m--,0>m||j[h]!==Y[m]){var oe=`
`+j[h].replace(" at new "," at ");return o.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",o.displayName)),oe}while(1<=h&&0<=m);break}}}finally{Zu=!1,Error.prepareStackTrace=u}return(u=o?o.displayName||o.name:"")?Ba(u):""}function K_(o){switch(o.tag){case 26:case 27:case 5:return Ba(o.type);case 16:return Ba("Lazy");case 13:return Ba("Suspense");case 19:return Ba("SuspenseList");case 0:case 15:return Qu(o.type,!1);case 11:return Qu(o.type.render,!1);case 1:return Qu(o.type,!0);case 31:return Ba("Activity");default:return""}}function z1(o){try{var l="";do l+=K_(o),o=o.return;while(o);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Wn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function H1(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Z_(o){var l=H1(o)?"checked":"value",u=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),h=""+o[l];if(!o.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,w=u.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return m.call(this)},set:function(A){h=""+A,w.call(this,A)}}),Object.defineProperty(o,l,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(A){h=""+A},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Fl(o){o._valueTracker||(o._valueTracker=Z_(o))}function G1(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var u=l.getValue(),h="";return o&&(h=H1(o)?o.checked?"true":"false":o.value),o=h,o!==u?(l.setValue(o),!0):!1}function Ul(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Q_=/[\n"\\]/g;function Kn(o){return o.replace(Q_,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Ju(o,l,u,h,m,w,A,D){o.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.type=A:o.removeAttribute("type"),l!=null?A==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Wn(l)):o.value!==""+Wn(l)&&(o.value=""+Wn(l)):A!=="submit"&&A!=="reset"||o.removeAttribute("value"),l!=null?ef(o,A,Wn(l)):u!=null?ef(o,A,Wn(u)):h!=null&&o.removeAttribute("value"),m==null&&w!=null&&(o.defaultChecked=!!w),m!=null&&(o.checked=m&&typeof m!="function"&&typeof m!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?o.name=""+Wn(D):o.removeAttribute("name")}function $1(o,l,u,h,m,w,A,D){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),l!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||l!=null))return;u=u!=null?""+Wn(u):"",l=l!=null?""+Wn(l):u,D||l===o.value||(o.value=l),o.defaultValue=l}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,o.checked=D?o.checked:!!h,o.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.name=A)}function ef(o,l,u){l==="number"&&Ul(o.ownerDocument)===o||o.defaultValue===""+u||(o.defaultValue=""+u)}function La(o,l,u,h){if(o=o.options,l){l={};for(var m=0;m<u.length;m++)l["$"+u[m]]=!0;for(u=0;u<o.length;u++)m=l.hasOwnProperty("$"+o[u].value),o[u].selected!==m&&(o[u].selected=m),m&&h&&(o[u].defaultSelected=!0)}else{for(u=""+Wn(u),l=null,m=0;m<o.length;m++){if(o[m].value===u){o[m].selected=!0,h&&(o[m].defaultSelected=!0);return}l!==null||o[m].disabled||(l=o[m])}l!==null&&(l.selected=!0)}}function q1(o,l,u){if(l!=null&&(l=""+Wn(l),l!==o.value&&(o.value=l),u==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=u!=null?""+Wn(u):""}function X1(o,l,u,h){if(l==null){if(h!=null){if(u!=null)throw Error(r(92));if(L(h)){if(1<h.length)throw Error(r(93));h=h[0]}u=h}u==null&&(u=""),l=u}u=Wn(l),o.defaultValue=u,h=o.textContent,h===u&&h!==""&&h!==null&&(o.value=h)}function Fa(o,l){if(l){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=l;return}}o.textContent=l}var J_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Y1(o,l,u){var h=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":h?o.setProperty(l,u):typeof u!="number"||u===0||J_.has(l)?l==="float"?o.cssFloat=u:o[l]=(""+u).trim():o[l]=u+"px"}function W1(o,l,u){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||l!=null&&l.hasOwnProperty(h)||(h.indexOf("--")===0?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="");for(var m in l)h=l[m],l.hasOwnProperty(m)&&u[m]!==h&&Y1(o,m,h)}else for(var w in l)l.hasOwnProperty(w)&&Y1(o,w,l[w])}function tf(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vl(o){return tb.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var nf=null;function rf(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ua=null,Va=null;function K1(o){var l=Ma(o);if(l&&(o=l.stateNode)){var u=o[Nn]||null;e:switch(o=l.stateNode,l.type){case"input":if(Ju(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Kn(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var h=u[l];if(h!==o&&h.form===o.form){var m=h[Nn]||null;if(!m)throw Error(r(90));Ju(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(l=0;l<u.length;l++)h=u[l],h.form===o.form&&G1(h)}break e;case"textarea":q1(o,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&La(o,!!u.multiple,l,!1)}}}var af=!1;function Z1(o,l,u){if(af)return o(l,u);af=!0;try{var h=o(l);return h}finally{if(af=!1,(Ua!==null||Va!==null)&&(Cc(),Ua&&(l=Ua,o=Va,Va=Ua=null,K1(l),o)))for(l=0;l<o.length;l++)K1(o[l])}}function rs(o,l){var u=o.stateNode;if(u===null)return null;var h=u[Nn]||null;if(h===null)return null;u=h[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(o=o.type,h=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!h;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(r(231,l,typeof u));return u}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),of=!1;if(Ur)try{var is={};Object.defineProperty(is,"passive",{get:function(){of=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{of=!1}var pi=null,sf=null,zl=null;function Q1(){if(zl)return zl;var o,l=sf,u=l.length,h,m="value"in pi?pi.value:pi.textContent,w=m.length;for(o=0;o<u&&l[o]===m[o];o++);var A=u-o;for(h=1;h<=A&&l[u-h]===m[w-h];h++);return zl=m.slice(o,1<h?1-h:void 0)}function Hl(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Gl(){return!0}function J1(){return!1}function In(o){function l(u,h,m,w,A){this._reactName=u,this._targetInst=m,this.type=h,this.nativeEvent=w,this.target=A,this.currentTarget=null;for(var D in o)o.hasOwnProperty(D)&&(u=o[D],this[D]=u?u(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Gl:J1,this.isPropagationStopped=J1,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Gl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Gl)},persist:function(){},isPersistent:Gl}),l}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$l=In(Zi),as=p({},Zi,{view:0,detail:0}),nb=In(as),lf,cf,os,ql=p({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ff,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==os&&(os&&o.type==="mousemove"?(lf=o.screenX-os.screenX,cf=o.screenY-os.screenY):cf=lf=0,os=o),lf)},movementY:function(o){return"movementY"in o?o.movementY:cf}}),ep=In(ql),rb=p({},ql,{dataTransfer:0}),ib=In(rb),ab=p({},as,{relatedTarget:0}),uf=In(ab),ob=p({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),sb=In(ob),lb=p({},Zi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),cb=In(lb),ub=p({},Zi,{data:0}),tp=In(ub),fb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},db={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pb(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=hb[o])?!!l[o]:!1}function ff(){return pb}var gb=p({},as,{key:function(o){if(o.key){var l=fb[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Hl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?db[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ff,charCode:function(o){return o.type==="keypress"?Hl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Hl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),vb=In(gb),mb=p({},ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),np=In(mb),yb=p({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ff}),xb=In(yb),wb=p({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_b=In(wb),bb=p({},ql,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Eb=In(bb),Sb=p({},Zi,{newState:0,oldState:0}),Ab=In(Sb),Cb=[9,13,27,32],df=Ur&&"CompositionEvent"in window,ss=null;Ur&&"documentMode"in document&&(ss=document.documentMode);var Tb=Ur&&"TextEvent"in window&&!ss,rp=Ur&&(!df||ss&&8<ss&&11>=ss),ip=" ",ap=!1;function op(o,l){switch(o){case"keyup":return Cb.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sp(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var za=!1;function Ob(o,l){switch(o){case"compositionend":return sp(l);case"keypress":return l.which!==32?null:(ap=!0,ip);case"textInput":return o=l.data,o===ip&&ap?null:o;default:return null}}function Db(o,l){if(za)return o==="compositionend"||!df&&op(o,l)?(o=Q1(),zl=sf=pi=null,za=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return rp&&l.locale!=="ko"?null:l.data;default:return null}}var Rb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lp(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Rb[o.type]:l==="textarea"}function cp(o,l,u,h){Ua?Va?Va.push(h):Va=[h]:Ua=h,l=Ic(l,"onChange"),0<l.length&&(u=new $l("onChange","change",null,u,h),o.push({event:u,listeners:l}))}var ls=null,cs=null;function Nb(o){Hv(o,0)}function Xl(o){var l=ns(o);if(G1(l))return o}function up(o,l){if(o==="change")return l}var fp=!1;if(Ur){var hf;if(Ur){var pf="oninput"in document;if(!pf){var dp=document.createElement("div");dp.setAttribute("oninput","return;"),pf=typeof dp.oninput=="function"}hf=pf}else hf=!1;fp=hf&&(!document.documentMode||9<document.documentMode)}function hp(){ls&&(ls.detachEvent("onpropertychange",pp),cs=ls=null)}function pp(o){if(o.propertyName==="value"&&Xl(cs)){var l=[];cp(l,cs,o,rf(o)),Z1(Nb,l)}}function Ib(o,l,u){o==="focusin"?(hp(),ls=l,cs=u,ls.attachEvent("onpropertychange",pp)):o==="focusout"&&hp()}function kb(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Xl(cs)}function Mb(o,l){if(o==="click")return Xl(l)}function Pb(o,l){if(o==="input"||o==="change")return Xl(l)}function jb(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Un=typeof Object.is=="function"?Object.is:jb;function us(o,l){if(Un(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var u=Object.keys(o),h=Object.keys(l);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var m=u[h];if(!Rn.call(l,m)||!Un(o[m],l[m]))return!1}return!0}function gp(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function vp(o,l){var u=gp(o);o=0;for(var h;u;){if(u.nodeType===3){if(h=o+u.textContent.length,o<=l&&h>=l)return{node:u,offset:l-o};o=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=gp(u)}}function mp(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?mp(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function yp(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Ul(o.document);l instanceof o.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)o=l.contentWindow;else break;l=Ul(o.document)}return l}function gf(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var Bb=Ur&&"documentMode"in document&&11>=document.documentMode,Ha=null,vf=null,fs=null,mf=!1;function xp(o,l,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;mf||Ha==null||Ha!==Ul(h)||(h=Ha,"selectionStart"in h&&gf(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),fs&&us(fs,h)||(fs=h,h=Ic(vf,"onSelect"),0<h.length&&(l=new $l("onSelect","select",null,l,u),o.push({event:l,listeners:h}),l.target=Ha)))}function Qi(o,l){var u={};return u[o.toLowerCase()]=l.toLowerCase(),u["Webkit"+o]="webkit"+l,u["Moz"+o]="moz"+l,u}var Ga={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionrun:Qi("Transition","TransitionRun"),transitionstart:Qi("Transition","TransitionStart"),transitioncancel:Qi("Transition","TransitionCancel"),transitionend:Qi("Transition","TransitionEnd")},yf={},wp={};Ur&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function Ji(o){if(yf[o])return yf[o];if(!Ga[o])return o;var l=Ga[o],u;for(u in l)if(l.hasOwnProperty(u)&&u in wp)return yf[o]=l[u];return o}var _p=Ji("animationend"),bp=Ji("animationiteration"),Ep=Ji("animationstart"),Lb=Ji("transitionrun"),Fb=Ji("transitionstart"),Ub=Ji("transitioncancel"),Sp=Ji("transitionend"),Ap=new Map,xf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xf.push("scrollEnd");function ur(o,l){Ap.set(o,l),Ki(l,[o])}var Cp=new WeakMap;function Zn(o,l){if(typeof o=="object"&&o!==null){var u=Cp.get(o);return u!==void 0?u:(l={value:o,source:l,stack:z1(l)},Cp.set(o,l),l)}return{value:o,source:l,stack:z1(l)}}var Qn=[],$a=0,wf=0;function Yl(){for(var o=$a,l=wf=$a=0;l<o;){var u=Qn[l];Qn[l++]=null;var h=Qn[l];Qn[l++]=null;var m=Qn[l];Qn[l++]=null;var w=Qn[l];if(Qn[l++]=null,h!==null&&m!==null){var A=h.pending;A===null?m.next=m:(m.next=A.next,A.next=m),h.pending=m}w!==0&&Tp(u,m,w)}}function Wl(o,l,u,h){Qn[$a++]=o,Qn[$a++]=l,Qn[$a++]=u,Qn[$a++]=h,wf|=h,o.lanes|=h,o=o.alternate,o!==null&&(o.lanes|=h)}function _f(o,l,u,h){return Wl(o,l,u,h),Kl(o)}function qa(o,l){return Wl(o,null,null,l),Kl(o)}function Tp(o,l,u){o.lanes|=u;var h=o.alternate;h!==null&&(h.lanes|=u);for(var m=!1,w=o.return;w!==null;)w.childLanes|=u,h=w.alternate,h!==null&&(h.childLanes|=u),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(m=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,m&&l!==null&&(m=31-be(u),o=w.hiddenUpdates,h=o[m],h===null?o[m]=[l]:h.push(l),l.lane=u|536870912),w):null}function Kl(o){if(50<js)throw js=0,Td=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var Xa={};function Vb(o,l,u,h){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(o,l,u,h){return new Vb(o,l,u,h)}function bf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Vr(o,l){var u=o.alternate;return u===null?(u=Vn(o.tag,l,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=l,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&65011712,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,l=o.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u.refCleanup=o.refCleanup,u}function Op(o,l){o.flags&=65011714;var u=o.alternate;return u===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,l=u.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Zl(o,l,u,h,m,w){var A=0;if(h=o,typeof o=="function")bf(o)&&(A=1);else if(typeof o=="string")A=H3(o,u,ce.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case V:return o=Vn(31,u,l,m),o.elementType=V,o.lanes=w,o;case _:return ea(u.children,m,w,l);case E:A=8,m|=24;break;case C:return o=Vn(12,u,l,m|2),o.elementType=C,o.lanes=w,o;case P:return o=Vn(13,u,l,m),o.elementType=P,o.lanes=w,o;case F:return o=Vn(19,u,l,m),o.elementType=F,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case b:case O:A=10;break e;case T:A=9;break e;case I:A=11;break e;case H:A=14;break e;case G:A=16,h=null;break e}A=29,u=Error(r(130,o===null?"null":typeof o,"")),h=null}return l=Vn(A,u,l,m),l.elementType=o,l.type=h,l.lanes=w,l}function ea(o,l,u,h){return o=Vn(7,o,h,l),o.lanes=u,o}function Ef(o,l,u){return o=Vn(6,o,null,l),o.lanes=u,o}function Sf(o,l,u){return l=Vn(4,o.children!==null?o.children:[],o.key,l),l.lanes=u,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var Ya=[],Wa=0,Ql=null,Jl=0,Jn=[],er=0,ta=null,zr=1,Hr="";function na(o,l){Ya[Wa++]=Jl,Ya[Wa++]=Ql,Ql=o,Jl=l}function Dp(o,l,u){Jn[er++]=zr,Jn[er++]=Hr,Jn[er++]=ta,ta=o;var h=zr;o=Hr;var m=32-be(h)-1;h&=~(1<<m),u+=1;var w=32-be(l)+m;if(30<w){var A=m-m%5;w=(h&(1<<A)-1).toString(32),h>>=A,m-=A,zr=1<<32-be(l)+m|u<<m|h,Hr=w+o}else zr=1<<w|u<<m|h,Hr=o}function Af(o){o.return!==null&&(na(o,1),Dp(o,1,0))}function Cf(o){for(;o===Ql;)Ql=Ya[--Wa],Ya[Wa]=null,Jl=Ya[--Wa],Ya[Wa]=null;for(;o===ta;)ta=Jn[--er],Jn[er]=null,Hr=Jn[--er],Jn[er]=null,zr=Jn[--er],Jn[er]=null}var Sn=null,Dt=null,Qe=!1,ra=null,Er=!1,Tf=Error(r(519));function ia(o){var l=Error(r(418,""));throw ps(Zn(l,o)),Tf}function Rp(o){var l=o.stateNode,u=o.type,h=o.memoizedProps;switch(l[vn]=o,l[Nn]=h,u){case"dialog":ze("cancel",l),ze("close",l);break;case"iframe":case"object":case"embed":ze("load",l);break;case"video":case"audio":for(u=0;u<Ls.length;u++)ze(Ls[u],l);break;case"source":ze("error",l);break;case"img":case"image":case"link":ze("error",l),ze("load",l);break;case"details":ze("toggle",l);break;case"input":ze("invalid",l),$1(l,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Fl(l);break;case"select":ze("invalid",l);break;case"textarea":ze("invalid",l),X1(l,h.value,h.defaultValue,h.children),Fl(l)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||h.suppressHydrationWarning===!0||Xv(l.textContent,u)?(h.popover!=null&&(ze("beforetoggle",l),ze("toggle",l)),h.onScroll!=null&&ze("scroll",l),h.onScrollEnd!=null&&ze("scrollend",l),h.onClick!=null&&(l.onclick=kc),l=!0):l=!1,l||ia(o)}function Np(o){for(Sn=o.return;Sn;)switch(Sn.tag){case 5:case 13:Er=!1;return;case 27:case 3:Er=!0;return;default:Sn=Sn.return}}function ds(o){if(o!==Sn)return!1;if(!Qe)return Np(o),Qe=!0,!1;var l=o.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=o.type,u=!(u!=="form"&&u!=="button")||Hd(o.type,o.memoizedProps)),u=!u),u&&Dt&&ia(o),Np(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(u=o.data,u==="/$"){if(l===0){Dt=dr(o.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;o=o.nextSibling}Dt=null}}else l===27?(l=Dt,Ri(o.type)?(o=Xd,Xd=null,Dt=o):Dt=l):Dt=Sn?dr(o.stateNode.nextSibling):null;return!0}function hs(){Dt=Sn=null,Qe=!1}function Ip(){var o=ra;return o!==null&&(Pn===null?Pn=o:Pn.push.apply(Pn,o),ra=null),o}function ps(o){ra===null?ra=[o]:ra.push(o)}var Of=B(null),aa=null,Gr=null;function gi(o,l,u){ne(Of,l._currentValue),l._currentValue=u}function $r(o){o._currentValue=Of.current,Z(Of)}function Df(o,l,u){for(;o!==null;){var h=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,h!==null&&(h.childLanes|=l)):h!==null&&(h.childLanes&l)!==l&&(h.childLanes|=l),o===u)break;o=o.return}}function Rf(o,l,u,h){var m=o.child;for(m!==null&&(m.return=o);m!==null;){var w=m.dependencies;if(w!==null){var A=m.child;w=w.firstContext;e:for(;w!==null;){var D=w;w=m;for(var j=0;j<l.length;j++)if(D.context===l[j]){w.lanes|=u,D=w.alternate,D!==null&&(D.lanes|=u),Df(w.return,u,o),h||(A=null);break e}w=D.next}}else if(m.tag===18){if(A=m.return,A===null)throw Error(r(341));A.lanes|=u,w=A.alternate,w!==null&&(w.lanes|=u),Df(A,u,o),A=null}else A=m.child;if(A!==null)A.return=m;else for(A=m;A!==null;){if(A===o){A=null;break}if(m=A.sibling,m!==null){m.return=A.return,A=m;break}A=A.return}m=A}}function gs(o,l,u,h){o=null;for(var m=l,w=!1;m!==null;){if(!w){if((m.flags&524288)!==0)w=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var A=m.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var D=m.type;Un(m.pendingProps.value,A.value)||(o!==null?o.push(D):o=[D])}}else if(m===Me.current){if(A=m.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(o!==null?o.push(Gs):o=[Gs])}m=m.return}o!==null&&Rf(l,o,u,h),l.flags|=262144}function ec(o){for(o=o.firstContext;o!==null;){if(!Un(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function oa(o){aa=o,Gr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function mn(o){return kp(aa,o)}function tc(o,l){return aa===null&&oa(o),kp(o,l)}function kp(o,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},Gr===null){if(o===null)throw Error(r(308));Gr=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else Gr=Gr.next=l;return u}var zb=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(u,h){o.push(h)}};this.abort=function(){l.aborted=!0,o.forEach(function(u){return u()})}},Hb=n.unstable_scheduleCallback,Gb=n.unstable_NormalPriority,Vt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nf(){return{controller:new zb,data:new Map,refCount:0}}function vs(o){o.refCount--,o.refCount===0&&Hb(Gb,function(){o.controller.abort()})}var ms=null,If=0,Ka=0,Za=null;function $b(o,l){if(ms===null){var u=ms=[];If=0,Ka=Md(),Za={status:"pending",value:void 0,then:function(h){u.push(h)}}}return If++,l.then(Mp,Mp),l}function Mp(){if(--If===0&&ms!==null){Za!==null&&(Za.status="fulfilled");var o=ms;ms=null,Ka=0,Za=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function qb(o,l){var u=[],h={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return o.then(function(){h.status="fulfilled",h.value=l;for(var m=0;m<u.length;m++)(0,u[m])(l)},function(m){for(h.status="rejected",h.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),h}var Pp=S.S;S.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&$b(o,l),Pp!==null&&Pp(o,l)};var sa=B(null);function kf(){var o=sa.current;return o!==null?o:ft.pooledCache}function nc(o,l){l===null?ne(sa,sa.current):ne(sa,l.pool)}function jp(){var o=kf();return o===null?null:{parent:Vt._currentValue,pool:o}}var ys=Error(r(460)),Bp=Error(r(474)),rc=Error(r(542)),Mf={then:function(){}};function Lp(o){return o=o.status,o==="fulfilled"||o==="rejected"}function ic(){}function Fp(o,l,u){switch(u=o[u],u===void 0?o.push(l):u!==l&&(l.then(ic,ic),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Vp(o),o;default:if(typeof l.status=="string")l.then(ic,ic);else{if(o=ft,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(h){if(l.status==="pending"){var m=l;m.status="fulfilled",m.value=h}},function(h){if(l.status==="pending"){var m=l;m.status="rejected",m.reason=h}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Vp(o),o}throw xs=l,ys}}var xs=null;function Up(){if(xs===null)throw Error(r(459));var o=xs;return xs=null,o}function Vp(o){if(o===ys||o===rc)throw Error(r(483))}var vi=!1;function Pf(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jf(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function mi(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function yi(o,l,u){var h=o.updateQueue;if(h===null)return null;if(h=h.shared,(nt&2)!==0){var m=h.pending;return m===null?l.next=l:(l.next=m.next,m.next=l),h.pending=l,l=Kl(o),Tp(o,null,u),l}return Wl(o,h,l,u),Kl(o)}function ws(o,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var h=l.lanes;h&=o.pendingLanes,u|=h,l.lanes=u,M1(o,u)}}function Bf(o,l){var u=o.updateQueue,h=o.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var m=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?m=w=A:w=w.next=A,u=u.next}while(u!==null);w===null?m=w=l:w=w.next=l}else m=w=l;u={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=l:o.next=l,u.lastBaseUpdate=l}var Lf=!1;function _s(){if(Lf){var o=Za;if(o!==null)throw o}}function bs(o,l,u,h){Lf=!1;var m=o.updateQueue;vi=!1;var w=m.firstBaseUpdate,A=m.lastBaseUpdate,D=m.shared.pending;if(D!==null){m.shared.pending=null;var j=D,Y=j.next;j.next=null,A===null?w=Y:A.next=Y,A=j;var oe=o.alternate;oe!==null&&(oe=oe.updateQueue,D=oe.lastBaseUpdate,D!==A&&(D===null?oe.firstBaseUpdate=Y:D.next=Y,oe.lastBaseUpdate=j))}if(w!==null){var le=m.baseState;A=0,oe=Y=j=null,D=w;do{var J=D.lane&-536870913,ee=J!==D.lane;if(ee?($e&J)===J:(h&J)===J){J!==0&&J===Ka&&(Lf=!0),oe!==null&&(oe=oe.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Re=o,Ce=D;J=l;var lt=u;switch(Ce.tag){case 1:if(Re=Ce.payload,typeof Re=="function"){le=Re.call(lt,le,J);break e}le=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ce.payload,J=typeof Re=="function"?Re.call(lt,le,J):Re,J==null)break e;le=p({},le,J);break e;case 2:vi=!0}}J=D.callback,J!==null&&(o.flags|=64,ee&&(o.flags|=8192),ee=m.callbacks,ee===null?m.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:D.tag,payload:D.payload,callback:D.callback,next:null},oe===null?(Y=oe=ee,j=le):oe=oe.next=ee,A|=J;if(D=D.next,D===null){if(D=m.shared.pending,D===null)break;ee=D,D=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);oe===null&&(j=le),m.baseState=j,m.firstBaseUpdate=Y,m.lastBaseUpdate=oe,w===null&&(m.shared.lanes=0),Ci|=A,o.lanes=A,o.memoizedState=le}}function zp(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function Hp(o,l){var u=o.callbacks;if(u!==null)for(o.callbacks=null,o=0;o<u.length;o++)zp(u[o],l)}var Qa=B(null),ac=B(0);function Gp(o,l){o=Qr,ne(ac,o),ne(Qa,l),Qr=o|l.baseLanes}function Ff(){ne(ac,Qr),ne(Qa,Qa.current)}function Uf(){Qr=ac.current,Z(Qa),Z(ac)}var xi=0,Be=null,ot=null,Bt=null,oc=!1,Ja=!1,la=!1,sc=0,Es=0,eo=null,Xb=0;function kt(){throw Error(r(321))}function Vf(o,l){if(l===null)return!1;for(var u=0;u<l.length&&u<o.length;u++)if(!Un(o[u],l[u]))return!1;return!0}function zf(o,l,u,h,m,w){return xi=w,Be=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,S.H=o===null||o.memoizedState===null?Tg:Og,la=!1,w=u(h,m),la=!1,Ja&&(w=qp(l,u,h,m)),$p(o),w}function $p(o){S.H=hc;var l=ot!==null&&ot.next!==null;if(xi=0,Bt=ot=Be=null,oc=!1,Es=0,eo=null,l)throw Error(r(300));o===null||Qt||(o=o.dependencies,o!==null&&ec(o)&&(Qt=!0))}function qp(o,l,u,h){Be=o;var m=0;do{if(Ja&&(eo=null),Es=0,Ja=!1,25<=m)throw Error(r(301));if(m+=1,Bt=ot=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}S.H=e3,w=l(u,h)}while(Ja);return w}function Yb(){var o=S.H,l=o.useState()[0];return l=typeof l.then=="function"?Ss(l):l,o=o.useState()[0],(ot!==null?ot.memoizedState:null)!==o&&(Be.flags|=1024),l}function Hf(){var o=sc!==0;return sc=0,o}function Gf(o,l,u){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~u}function $f(o){if(oc){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}oc=!1}xi=0,Bt=ot=Be=null,Ja=!1,Es=sc=0,eo=null}function kn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Be.memoizedState=Bt=o:Bt=Bt.next=o,Bt}function Lt(){if(ot===null){var o=Be.alternate;o=o!==null?o.memoizedState:null}else o=ot.next;var l=Bt===null?Be.memoizedState:Bt.next;if(l!==null)Bt=l,ot=o;else{if(o===null)throw Be.alternate===null?Error(r(467)):Error(r(310));ot=o,o={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Bt===null?Be.memoizedState=Bt=o:Bt=Bt.next=o}return Bt}function qf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ss(o){var l=Es;return Es+=1,eo===null&&(eo=[]),o=Fp(eo,o,l),l=Be,(Bt===null?l.memoizedState:Bt.next)===null&&(l=l.alternate,S.H=l===null||l.memoizedState===null?Tg:Og),o}function lc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ss(o);if(o.$$typeof===O)return mn(o)}throw Error(r(438,String(o)))}function Xf(o){var l=null,u=Be.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var h=Be.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(l={data:h.data.map(function(m){return m.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=qf(),Be.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(o),h=0;h<o;h++)u[h]=Q;return l.index++,u}function qr(o,l){return typeof l=="function"?l(o):l}function cc(o){var l=Lt();return Yf(l,ot,o)}function Yf(o,l,u){var h=o.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var m=o.baseQueue,w=h.pending;if(w!==null){if(m!==null){var A=m.next;m.next=w.next,w.next=A}l.baseQueue=m=w,h.pending=null}if(w=o.baseState,m===null)o.memoizedState=w;else{l=m.next;var D=A=null,j=null,Y=l,oe=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?($e&le)===le:(xi&le)===le){var J=Y.revertLane;if(J===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===Ka&&(oe=!0);else if((xi&J)===J){Y=Y.next,J===Ka&&(oe=!0);continue}else le={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(D=j=le,A=w):j=j.next=le,Be.lanes|=J,Ci|=J;le=Y.action,la&&u(w,le),w=Y.hasEagerState?Y.eagerState:u(w,le)}else J={lane:le,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(D=j=J,A=w):j=j.next=J,Be.lanes|=le,Ci|=le;Y=Y.next}while(Y!==null&&Y!==l);if(j===null?A=w:j.next=D,!Un(w,o.memoizedState)&&(Qt=!0,oe&&(u=Za,u!==null)))throw u;o.memoizedState=w,o.baseState=A,o.baseQueue=j,h.lastRenderedState=w}return m===null&&(h.lanes=0),[o.memoizedState,h.dispatch]}function Wf(o){var l=Lt(),u=l.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var h=u.dispatch,m=u.pending,w=l.memoizedState;if(m!==null){u.pending=null;var A=m=m.next;do w=o(w,A.action),A=A.next;while(A!==m);Un(w,l.memoizedState)||(Qt=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),u.lastRenderedState=w}return[w,h]}function Xp(o,l,u){var h=Be,m=Lt(),w=Qe;if(w){if(u===void 0)throw Error(r(407));u=u()}else u=l();var A=!Un((ot||m).memoizedState,u);A&&(m.memoizedState=u,Qt=!0),m=m.queue;var D=Kp.bind(null,h,m,o);if(As(2048,8,D,[o]),m.getSnapshot!==l||A||Bt!==null&&Bt.memoizedState.tag&1){if(h.flags|=2048,to(9,uc(),Wp.bind(null,h,m,u,l),null),ft===null)throw Error(r(349));w||(xi&124)!==0||Yp(h,l,u)}return u}function Yp(o,l,u){o.flags|=16384,o={getSnapshot:l,value:u},l=Be.updateQueue,l===null?(l=qf(),Be.updateQueue=l,l.stores=[o]):(u=l.stores,u===null?l.stores=[o]:u.push(o))}function Wp(o,l,u,h){l.value=u,l.getSnapshot=h,Zp(l)&&Qp(o)}function Kp(o,l,u){return u(function(){Zp(l)&&Qp(o)})}function Zp(o){var l=o.getSnapshot;o=o.value;try{var u=l();return!Un(o,u)}catch{return!0}}function Qp(o){var l=qa(o,2);l!==null&&qn(l,o,2)}function Kf(o){var l=kn();if(typeof o=="function"){var u=o;if(o=u(),la){vt(!0);try{u()}finally{vt(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:o},l}function Jp(o,l,u,h){return o.baseState=u,Yf(o,ot,typeof h=="function"?h:qr)}function Wb(o,l,u,h,m){if(dc(o))throw Error(r(485));if(o=l.action,o!==null){var w={payload:m,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){w.listeners.push(A)}};S.T!==null?u(!0):w.isTransition=!1,h(w),u=l.pending,u===null?(w.next=l.pending=w,eg(l,w)):(w.next=u.next,l.pending=u.next=w)}}function eg(o,l){var u=l.action,h=l.payload,m=o.state;if(l.isTransition){var w=S.T,A={};S.T=A;try{var D=u(m,h),j=S.S;j!==null&&j(A,D),tg(o,l,D)}catch(Y){Zf(o,l,Y)}finally{S.T=w}}else try{w=u(m,h),tg(o,l,w)}catch(Y){Zf(o,l,Y)}}function tg(o,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){ng(o,l,h)},function(h){return Zf(o,l,h)}):ng(o,l,u)}function ng(o,l,u){l.status="fulfilled",l.value=u,rg(l),o.state=u,l=o.pending,l!==null&&(u=l.next,u===l?o.pending=null:(u=u.next,l.next=u,eg(o,u)))}function Zf(o,l,u){var h=o.pending;if(o.pending=null,h!==null){h=h.next;do l.status="rejected",l.reason=u,rg(l),l=l.next;while(l!==h)}o.action=null}function rg(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function ig(o,l){return l}function ag(o,l){if(Qe){var u=ft.formState;if(u!==null){e:{var h=Be;if(Qe){if(Dt){t:{for(var m=Dt,w=Er;m.nodeType!==8;){if(!w){m=null;break t}if(m=dr(m.nextSibling),m===null){m=null;break t}}w=m.data,m=w==="F!"||w==="F"?m:null}if(m){Dt=dr(m.nextSibling),h=m.data==="F!";break e}}ia(h)}h=!1}h&&(l=u[0])}}return u=kn(),u.memoizedState=u.baseState=l,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ig,lastRenderedState:l},u.queue=h,u=Sg.bind(null,Be,h),h.dispatch=u,h=Kf(!1),w=nd.bind(null,Be,!1,h.queue),h=kn(),m={state:l,dispatch:null,action:o,pending:null},h.queue=m,u=Wb.bind(null,Be,m,w,u),m.dispatch=u,h.memoizedState=o,[l,u,!1]}function og(o){var l=Lt();return sg(l,ot,o)}function sg(o,l,u){if(l=Yf(o,l,ig)[0],o=cc(qr)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var h=Ss(l)}catch(A){throw A===ys?rc:A}else h=l;l=Lt();var m=l.queue,w=m.dispatch;return u!==l.memoizedState&&(Be.flags|=2048,to(9,uc(),Kb.bind(null,m,u),null)),[h,w,o]}function Kb(o,l){o.action=l}function lg(o){var l=Lt(),u=ot;if(u!==null)return sg(l,u,o);Lt(),l=l.memoizedState,u=Lt();var h=u.queue.dispatch;return u.memoizedState=o,[l,h,!1]}function to(o,l,u,h){return o={tag:o,create:u,deps:h,inst:l,next:null},l=Be.updateQueue,l===null&&(l=qf(),Be.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=o.next=o:(h=u.next,u.next=o,o.next=h,l.lastEffect=o),o}function uc(){return{destroy:void 0,resource:void 0}}function cg(){return Lt().memoizedState}function fc(o,l,u,h){var m=kn();h=h===void 0?null:h,Be.flags|=o,m.memoizedState=to(1|l,uc(),u,h)}function As(o,l,u,h){var m=Lt();h=h===void 0?null:h;var w=m.memoizedState.inst;ot!==null&&h!==null&&Vf(h,ot.memoizedState.deps)?m.memoizedState=to(l,w,u,h):(Be.flags|=o,m.memoizedState=to(1|l,w,u,h))}function ug(o,l){fc(8390656,8,o,l)}function fg(o,l){As(2048,8,o,l)}function dg(o,l){return As(4,2,o,l)}function hg(o,l){return As(4,4,o,l)}function pg(o,l){if(typeof l=="function"){o=o();var u=l(o);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function gg(o,l,u){u=u!=null?u.concat([o]):null,As(4,4,pg.bind(null,l,o),u)}function Qf(){}function vg(o,l){var u=Lt();l=l===void 0?null:l;var h=u.memoizedState;return l!==null&&Vf(l,h[1])?h[0]:(u.memoizedState=[o,l],o)}function mg(o,l){var u=Lt();l=l===void 0?null:l;var h=u.memoizedState;if(l!==null&&Vf(l,h[1]))return h[0];if(h=o(),la){vt(!0);try{o()}finally{vt(!1)}}return u.memoizedState=[h,l],h}function Jf(o,l,u){return u===void 0||(xi&1073741824)!==0?o.memoizedState=l:(o.memoizedState=u,o=wv(),Be.lanes|=o,Ci|=o,u)}function yg(o,l,u,h){return Un(u,l)?u:Qa.current!==null?(o=Jf(o,u,h),Un(o,l)||(Qt=!0),o):(xi&42)===0?(Qt=!0,o.memoizedState=u):(o=wv(),Be.lanes|=o,Ci|=o,l)}function xg(o,l,u,h,m){var w=k.p;k.p=w!==0&&8>w?w:8;var A=S.T,D={};S.T=D,nd(o,!1,l,u);try{var j=m(),Y=S.S;if(Y!==null&&Y(D,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var oe=qb(j,h);Cs(o,l,oe,$n(o))}else Cs(o,l,h,$n(o))}catch(le){Cs(o,l,{then:function(){},status:"rejected",reason:le},$n())}finally{k.p=w,S.T=A}}function Zb(){}function ed(o,l,u,h){if(o.tag!==5)throw Error(r(476));var m=wg(o).queue;xg(o,m,l,U,u===null?Zb:function(){return _g(o),u(h)})}function wg(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:U},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:u},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function _g(o){var l=wg(o).next.queue;Cs(o,l,{},$n())}function td(){return mn(Gs)}function bg(){return Lt().memoizedState}function Eg(){return Lt().memoizedState}function Qb(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var u=$n();o=mi(u);var h=yi(l,o,u);h!==null&&(qn(h,l,u),ws(h,l,u)),l={cache:Nf()},o.payload=l;return}l=l.return}}function Jb(o,l,u){var h=$n();u={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},dc(o)?Ag(l,u):(u=_f(o,l,u,h),u!==null&&(qn(u,o,h),Cg(u,l,h)))}function Sg(o,l,u){var h=$n();Cs(o,l,u,h)}function Cs(o,l,u,h){var m={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(dc(o))Ag(l,m);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var A=l.lastRenderedState,D=w(A,u);if(m.hasEagerState=!0,m.eagerState=D,Un(D,A))return Wl(o,l,m,0),ft===null&&Yl(),!1}catch{}finally{}if(u=_f(o,l,m,h),u!==null)return qn(u,o,h),Cg(u,l,h),!0}return!1}function nd(o,l,u,h){if(h={lane:2,revertLane:Md(),action:h,hasEagerState:!1,eagerState:null,next:null},dc(o)){if(l)throw Error(r(479))}else l=_f(o,u,h,2),l!==null&&qn(l,o,2)}function dc(o){var l=o.alternate;return o===Be||l!==null&&l===Be}function Ag(o,l){Ja=oc=!0;var u=o.pending;u===null?l.next=l:(l.next=u.next,u.next=l),o.pending=l}function Cg(o,l,u){if((u&4194048)!==0){var h=l.lanes;h&=o.pendingLanes,u|=h,l.lanes=u,M1(o,u)}}var hc={readContext:mn,use:lc,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt},Tg={readContext:mn,use:lc,useCallback:function(o,l){return kn().memoizedState=[o,l===void 0?null:l],o},useContext:mn,useEffect:ug,useImperativeHandle:function(o,l,u){u=u!=null?u.concat([o]):null,fc(4194308,4,pg.bind(null,l,o),u)},useLayoutEffect:function(o,l){return fc(4194308,4,o,l)},useInsertionEffect:function(o,l){fc(4,2,o,l)},useMemo:function(o,l){var u=kn();l=l===void 0?null:l;var h=o();if(la){vt(!0);try{o()}finally{vt(!1)}}return u.memoizedState=[h,l],h},useReducer:function(o,l,u){var h=kn();if(u!==void 0){var m=u(l);if(la){vt(!0);try{u(l)}finally{vt(!1)}}}else m=l;return h.memoizedState=h.baseState=m,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:m},h.queue=o,o=o.dispatch=Jb.bind(null,Be,o),[h.memoizedState,o]},useRef:function(o){var l=kn();return o={current:o},l.memoizedState=o},useState:function(o){o=Kf(o);var l=o.queue,u=Sg.bind(null,Be,l);return l.dispatch=u,[o.memoizedState,u]},useDebugValue:Qf,useDeferredValue:function(o,l){var u=kn();return Jf(u,o,l)},useTransition:function(){var o=Kf(!1);return o=xg.bind(null,Be,o.queue,!0,!1),kn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,u){var h=Be,m=kn();if(Qe){if(u===void 0)throw Error(r(407));u=u()}else{if(u=l(),ft===null)throw Error(r(349));($e&124)!==0||Yp(h,l,u)}m.memoizedState=u;var w={value:u,getSnapshot:l};return m.queue=w,ug(Kp.bind(null,h,w,o),[o]),h.flags|=2048,to(9,uc(),Wp.bind(null,h,w,u,l),null),u},useId:function(){var o=kn(),l=ft.identifierPrefix;if(Qe){var u=Hr,h=zr;u=(h&~(1<<32-be(h)-1)).toString(32)+u,l=""+l+"R"+u,u=sc++,0<u&&(l+="H"+u.toString(32)),l+=""}else u=Xb++,l=""+l+"r"+u.toString(32)+"";return o.memoizedState=l},useHostTransitionStatus:td,useFormState:ag,useActionState:ag,useOptimistic:function(o){var l=kn();l.memoizedState=l.baseState=o;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=nd.bind(null,Be,!0,u),u.dispatch=l,[o,l]},useMemoCache:Xf,useCacheRefresh:function(){return kn().memoizedState=Qb.bind(null,Be)}},Og={readContext:mn,use:lc,useCallback:vg,useContext:mn,useEffect:fg,useImperativeHandle:gg,useInsertionEffect:dg,useLayoutEffect:hg,useMemo:mg,useReducer:cc,useRef:cg,useState:function(){return cc(qr)},useDebugValue:Qf,useDeferredValue:function(o,l){var u=Lt();return yg(u,ot.memoizedState,o,l)},useTransition:function(){var o=cc(qr)[0],l=Lt().memoizedState;return[typeof o=="boolean"?o:Ss(o),l]},useSyncExternalStore:Xp,useId:bg,useHostTransitionStatus:td,useFormState:og,useActionState:og,useOptimistic:function(o,l){var u=Lt();return Jp(u,ot,o,l)},useMemoCache:Xf,useCacheRefresh:Eg},e3={readContext:mn,use:lc,useCallback:vg,useContext:mn,useEffect:fg,useImperativeHandle:gg,useInsertionEffect:dg,useLayoutEffect:hg,useMemo:mg,useReducer:Wf,useRef:cg,useState:function(){return Wf(qr)},useDebugValue:Qf,useDeferredValue:function(o,l){var u=Lt();return ot===null?Jf(u,o,l):yg(u,ot.memoizedState,o,l)},useTransition:function(){var o=Wf(qr)[0],l=Lt().memoizedState;return[typeof o=="boolean"?o:Ss(o),l]},useSyncExternalStore:Xp,useId:bg,useHostTransitionStatus:td,useFormState:lg,useActionState:lg,useOptimistic:function(o,l){var u=Lt();return ot!==null?Jp(u,ot,o,l):(u.baseState=o,[o,u.queue.dispatch])},useMemoCache:Xf,useCacheRefresh:Eg},no=null,Ts=0;function pc(o){var l=Ts;return Ts+=1,no===null&&(no=[]),Fp(no,o,l)}function Os(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function gc(o,l){throw l.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function Dg(o){var l=o._init;return l(o._payload)}function Rg(o){function l($,z){if(o){var X=$.deletions;X===null?($.deletions=[z],$.flags|=16):X.push(z)}}function u($,z){if(!o)return null;for(;z!==null;)l($,z),z=z.sibling;return null}function h($){for(var z=new Map;$!==null;)$.key!==null?z.set($.key,$):z.set($.index,$),$=$.sibling;return z}function m($,z){return $=Vr($,z),$.index=0,$.sibling=null,$}function w($,z,X){return $.index=X,o?(X=$.alternate,X!==null?(X=X.index,X<z?($.flags|=67108866,z):X):($.flags|=67108866,z)):($.flags|=1048576,z)}function A($){return o&&$.alternate===null&&($.flags|=67108866),$}function D($,z,X,se){return z===null||z.tag!==6?(z=Ef(X,$.mode,se),z.return=$,z):(z=m(z,X),z.return=$,z)}function j($,z,X,se){var me=X.type;return me===_?oe($,z,X.props.children,se,X.key):z!==null&&(z.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===G&&Dg(me)===z.type)?(z=m(z,X.props),Os(z,X),z.return=$,z):(z=Zl(X.type,X.key,X.props,null,$.mode,se),Os(z,X),z.return=$,z)}function Y($,z,X,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==X.containerInfo||z.stateNode.implementation!==X.implementation?(z=Sf(X,$.mode,se),z.return=$,z):(z=m(z,X.children||[]),z.return=$,z)}function oe($,z,X,se,me){return z===null||z.tag!==7?(z=ea(X,$.mode,se,me),z.return=$,z):(z=m(z,X),z.return=$,z)}function le($,z,X){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Ef(""+z,$.mode,X),z.return=$,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case y:return X=Zl(z.type,z.key,z.props,null,$.mode,X),Os(X,z),X.return=$,X;case x:return z=Sf(z,$.mode,X),z.return=$,z;case G:var se=z._init;return z=se(z._payload),le($,z,X)}if(L(z)||te(z))return z=ea(z,$.mode,X,null),z.return=$,z;if(typeof z.then=="function")return le($,pc(z),X);if(z.$$typeof===O)return le($,tc($,z),X);gc($,z)}return null}function J($,z,X,se){var me=z!==null?z.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return me!==null?null:D($,z,""+X,se);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case y:return X.key===me?j($,z,X,se):null;case x:return X.key===me?Y($,z,X,se):null;case G:return me=X._init,X=me(X._payload),J($,z,X,se)}if(L(X)||te(X))return me!==null?null:oe($,z,X,se,null);if(typeof X.then=="function")return J($,z,pc(X),se);if(X.$$typeof===O)return J($,z,tc($,X),se);gc($,X)}return null}function ee($,z,X,se,me){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return $=$.get(X)||null,D(z,$,""+se,me);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case y:return $=$.get(se.key===null?X:se.key)||null,j(z,$,se,me);case x:return $=$.get(se.key===null?X:se.key)||null,Y(z,$,se,me);case G:var Fe=se._init;return se=Fe(se._payload),ee($,z,X,se,me)}if(L(se)||te(se))return $=$.get(X)||null,oe(z,$,se,me,null);if(typeof se.then=="function")return ee($,z,X,pc(se),me);if(se.$$typeof===O)return ee($,z,X,tc(z,se),me);gc(z,se)}return null}function Re($,z,X,se){for(var me=null,Fe=null,_e=z,Te=z=0,en=null;_e!==null&&Te<X.length;Te++){_e.index>Te?(en=_e,_e=null):en=_e.sibling;var Ye=J($,_e,X[Te],se);if(Ye===null){_e===null&&(_e=en);break}o&&_e&&Ye.alternate===null&&l($,_e),z=w(Ye,z,Te),Fe===null?me=Ye:Fe.sibling=Ye,Fe=Ye,_e=en}if(Te===X.length)return u($,_e),Qe&&na($,Te),me;if(_e===null){for(;Te<X.length;Te++)_e=le($,X[Te],se),_e!==null&&(z=w(_e,z,Te),Fe===null?me=_e:Fe.sibling=_e,Fe=_e);return Qe&&na($,Te),me}for(_e=h(_e);Te<X.length;Te++)en=ee(_e,$,Te,X[Te],se),en!==null&&(o&&en.alternate!==null&&_e.delete(en.key===null?Te:en.key),z=w(en,z,Te),Fe===null?me=en:Fe.sibling=en,Fe=en);return o&&_e.forEach(function(Pi){return l($,Pi)}),Qe&&na($,Te),me}function Ce($,z,X,se){if(X==null)throw Error(r(151));for(var me=null,Fe=null,_e=z,Te=z=0,en=null,Ye=X.next();_e!==null&&!Ye.done;Te++,Ye=X.next()){_e.index>Te?(en=_e,_e=null):en=_e.sibling;var Pi=J($,_e,Ye.value,se);if(Pi===null){_e===null&&(_e=en);break}o&&_e&&Pi.alternate===null&&l($,_e),z=w(Pi,z,Te),Fe===null?me=Pi:Fe.sibling=Pi,Fe=Pi,_e=en}if(Ye.done)return u($,_e),Qe&&na($,Te),me;if(_e===null){for(;!Ye.done;Te++,Ye=X.next())Ye=le($,Ye.value,se),Ye!==null&&(z=w(Ye,z,Te),Fe===null?me=Ye:Fe.sibling=Ye,Fe=Ye);return Qe&&na($,Te),me}for(_e=h(_e);!Ye.done;Te++,Ye=X.next())Ye=ee(_e,$,Te,Ye.value,se),Ye!==null&&(o&&Ye.alternate!==null&&_e.delete(Ye.key===null?Te:Ye.key),z=w(Ye,z,Te),Fe===null?me=Ye:Fe.sibling=Ye,Fe=Ye);return o&&_e.forEach(function(tE){return l($,tE)}),Qe&&na($,Te),me}function lt($,z,X,se){if(typeof X=="object"&&X!==null&&X.type===_&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case y:e:{for(var me=X.key;z!==null;){if(z.key===me){if(me=X.type,me===_){if(z.tag===7){u($,z.sibling),se=m(z,X.props.children),se.return=$,$=se;break e}}else if(z.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===G&&Dg(me)===z.type){u($,z.sibling),se=m(z,X.props),Os(se,X),se.return=$,$=se;break e}u($,z);break}else l($,z);z=z.sibling}X.type===_?(se=ea(X.props.children,$.mode,se,X.key),se.return=$,$=se):(se=Zl(X.type,X.key,X.props,null,$.mode,se),Os(se,X),se.return=$,$=se)}return A($);case x:e:{for(me=X.key;z!==null;){if(z.key===me)if(z.tag===4&&z.stateNode.containerInfo===X.containerInfo&&z.stateNode.implementation===X.implementation){u($,z.sibling),se=m(z,X.children||[]),se.return=$,$=se;break e}else{u($,z);break}else l($,z);z=z.sibling}se=Sf(X,$.mode,se),se.return=$,$=se}return A($);case G:return me=X._init,X=me(X._payload),lt($,z,X,se)}if(L(X))return Re($,z,X,se);if(te(X)){if(me=te(X),typeof me!="function")throw Error(r(150));return X=me.call(X),Ce($,z,X,se)}if(typeof X.then=="function")return lt($,z,pc(X),se);if(X.$$typeof===O)return lt($,z,tc($,X),se);gc($,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,z!==null&&z.tag===6?(u($,z.sibling),se=m(z,X),se.return=$,$=se):(u($,z),se=Ef(X,$.mode,se),se.return=$,$=se),A($)):u($,z)}return function($,z,X,se){try{Ts=0;var me=lt($,z,X,se);return no=null,me}catch(_e){if(_e===ys||_e===rc)throw _e;var Fe=Vn(29,_e,null,$.mode);return Fe.lanes=se,Fe.return=$,Fe}finally{}}}var ro=Rg(!0),Ng=Rg(!1),tr=B(null),Sr=null;function wi(o){var l=o.alternate;ne(zt,zt.current&1),ne(tr,o),Sr===null&&(l===null||Qa.current!==null||l.memoizedState!==null)&&(Sr=o)}function Ig(o){if(o.tag===22){if(ne(zt,zt.current),ne(tr,o),Sr===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(Sr=o)}}else _i()}function _i(){ne(zt,zt.current),ne(tr,tr.current)}function Xr(o){Z(tr),Sr===o&&(Sr=null),Z(zt)}var zt=B(0);function vc(o){for(var l=o;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||qd(u)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function rd(o,l,u,h){l=o.memoizedState,u=u(h,l),u=u==null?l:p({},l,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var id={enqueueSetState:function(o,l,u){o=o._reactInternals;var h=$n(),m=mi(h);m.payload=l,u!=null&&(m.callback=u),l=yi(o,m,h),l!==null&&(qn(l,o,h),ws(l,o,h))},enqueueReplaceState:function(o,l,u){o=o._reactInternals;var h=$n(),m=mi(h);m.tag=1,m.payload=l,u!=null&&(m.callback=u),l=yi(o,m,h),l!==null&&(qn(l,o,h),ws(l,o,h))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var u=$n(),h=mi(u);h.tag=2,l!=null&&(h.callback=l),l=yi(o,h,u),l!==null&&(qn(l,o,u),ws(l,o,u))}};function kg(o,l,u,h,m,w,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(h,w,A):l.prototype&&l.prototype.isPureReactComponent?!us(u,h)||!us(m,w):!0}function Mg(o,l,u,h){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,h),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,h),l.state!==o&&id.enqueueReplaceState(l,l.state,null)}function ca(o,l){var u=l;if("ref"in l){u={};for(var h in l)h!=="ref"&&(u[h]=l[h])}if(o=o.defaultProps){u===l&&(u=p({},u));for(var m in o)u[m]===void 0&&(u[m]=o[m])}return u}var mc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Pg(o){mc(o)}function jg(o){console.error(o)}function Bg(o){mc(o)}function yc(o,l){try{var u=o.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(h){setTimeout(function(){throw h})}}function Lg(o,l,u){try{var h=o.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function ad(o,l,u){return u=mi(u),u.tag=3,u.payload={element:null},u.callback=function(){yc(o,l)},u}function Fg(o){return o=mi(o),o.tag=3,o}function Ug(o,l,u,h){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var w=h.value;o.payload=function(){return m(w)},o.callback=function(){Lg(l,u,h)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(o.callback=function(){Lg(l,u,h),typeof m!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var D=h.stack;this.componentDidCatch(h.value,{componentStack:D!==null?D:""})})}function t3(o,l,u,h,m){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(l=u.alternate,l!==null&&gs(l,u,m,!0),u=tr.current,u!==null){switch(u.tag){case 13:return Sr===null?Dd():u.alternate===null&&Rt===0&&(Rt=3),u.flags&=-257,u.flags|=65536,u.lanes=m,h===Mf?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([h]):l.add(h),Nd(o,h,m)),!1;case 22:return u.flags|=65536,h===Mf?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([h]):u.add(h)),Nd(o,h,m)),!1}throw Error(r(435,u.tag))}return Nd(o,h,m),Dd(),!1}if(Qe)return l=tr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=m,h!==Tf&&(o=Error(r(422),{cause:h}),ps(Zn(o,u)))):(h!==Tf&&(l=Error(r(423),{cause:h}),ps(Zn(l,u))),o=o.current.alternate,o.flags|=65536,m&=-m,o.lanes|=m,h=Zn(h,u),m=ad(o.stateNode,h,m),Bf(o,m),Rt!==4&&(Rt=2)),!1;var w=Error(r(520),{cause:h});if(w=Zn(w,u),Ps===null?Ps=[w]:Ps.push(w),Rt!==4&&(Rt=2),l===null)return!0;h=Zn(h,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,o=m&-m,u.lanes|=o,o=ad(u.stateNode,h,o),Bf(u,o),!1;case 1:if(l=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ti===null||!Ti.has(w))))return u.flags|=65536,m&=-m,u.lanes|=m,m=Fg(m),Ug(m,o,u,h),Bf(u,m),!1}u=u.return}while(u!==null);return!1}var Vg=Error(r(461)),Qt=!1;function on(o,l,u,h){l.child=o===null?Ng(l,null,u,h):ro(l,o.child,u,h)}function zg(o,l,u,h,m){u=u.render;var w=l.ref;if("ref"in h){var A={};for(var D in h)D!=="ref"&&(A[D]=h[D])}else A=h;return oa(l),h=zf(o,l,u,A,w,m),D=Hf(),o!==null&&!Qt?(Gf(o,l,m),Yr(o,l,m)):(Qe&&D&&Af(l),l.flags|=1,on(o,l,h,m),l.child)}function Hg(o,l,u,h,m){if(o===null){var w=u.type;return typeof w=="function"&&!bf(w)&&w.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=w,Gg(o,l,w,h,m)):(o=Zl(u.type,null,h,l,l.mode,m),o.ref=l.ref,o.return=l,l.child=o)}if(w=o.child,!hd(o,m)){var A=w.memoizedProps;if(u=u.compare,u=u!==null?u:us,u(A,h)&&o.ref===l.ref)return Yr(o,l,m)}return l.flags|=1,o=Vr(w,h),o.ref=l.ref,o.return=l,l.child=o}function Gg(o,l,u,h,m){if(o!==null){var w=o.memoizedProps;if(us(w,h)&&o.ref===l.ref)if(Qt=!1,l.pendingProps=h=w,hd(o,m))(o.flags&131072)!==0&&(Qt=!0);else return l.lanes=o.lanes,Yr(o,l,m)}return od(o,l,u,h,m)}function $g(o,l,u){var h=l.pendingProps,m=h.children,w=o!==null?o.memoizedState:null;if(h.mode==="hidden"){if((l.flags&128)!==0){if(h=w!==null?w.baseLanes|u:u,o!==null){for(m=l.child=o.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;l.childLanes=w&~h}else l.childLanes=0,l.child=null;return qg(o,l,h,u)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&nc(l,w!==null?w.cachePool:null),w!==null?Gp(l,w):Ff(),Ig(l);else return l.lanes=l.childLanes=536870912,qg(o,l,w!==null?w.baseLanes|u:u,u)}else w!==null?(nc(l,w.cachePool),Gp(l,w),_i(),l.memoizedState=null):(o!==null&&nc(l,null),Ff(),_i());return on(o,l,m,u),l.child}function qg(o,l,u,h){var m=kf();return m=m===null?null:{parent:Vt._currentValue,pool:m},l.memoizedState={baseLanes:u,cachePool:m},o!==null&&nc(l,null),Ff(),Ig(l),o!==null&&gs(o,l,h,!0),null}function xc(o,l){var u=l.ref;if(u===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(o===null||o.ref!==u)&&(l.flags|=4194816)}}function od(o,l,u,h,m){return oa(l),u=zf(o,l,u,h,void 0,m),h=Hf(),o!==null&&!Qt?(Gf(o,l,m),Yr(o,l,m)):(Qe&&h&&Af(l),l.flags|=1,on(o,l,u,m),l.child)}function Xg(o,l,u,h,m,w){return oa(l),l.updateQueue=null,u=qp(l,h,u,m),$p(o),h=Hf(),o!==null&&!Qt?(Gf(o,l,w),Yr(o,l,w)):(Qe&&h&&Af(l),l.flags|=1,on(o,l,u,w),l.child)}function Yg(o,l,u,h,m){if(oa(l),l.stateNode===null){var w=Xa,A=u.contextType;typeof A=="object"&&A!==null&&(w=mn(A)),w=new u(h,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=id,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=h,w.state=l.memoizedState,w.refs={},Pf(l),A=u.contextType,w.context=typeof A=="object"&&A!==null?mn(A):Xa,w.state=l.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(rd(l,u,A,h),w.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(A=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),A!==w.state&&id.enqueueReplaceState(w,w.state,null),bs(l,h,w,m),_s(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),h=!0}else if(o===null){w=l.stateNode;var D=l.memoizedProps,j=ca(u,D);w.props=j;var Y=w.context,oe=u.contextType;A=Xa,typeof oe=="object"&&oe!==null&&(A=mn(oe));var le=u.getDerivedStateFromProps;oe=typeof le=="function"||typeof w.getSnapshotBeforeUpdate=="function",D=l.pendingProps!==D,oe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D||Y!==A)&&Mg(l,w,h,A),vi=!1;var J=l.memoizedState;w.state=J,bs(l,h,w,m),_s(),Y=l.memoizedState,D||J!==Y||vi?(typeof le=="function"&&(rd(l,u,le,h),Y=l.memoizedState),(j=vi||kg(l,u,j,h,J,Y,A))?(oe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=h,l.memoizedState=Y),w.props=h,w.state=Y,w.context=A,h=j):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),h=!1)}else{w=l.stateNode,jf(o,l),A=l.memoizedProps,oe=ca(u,A),w.props=oe,le=l.pendingProps,J=w.context,Y=u.contextType,j=Xa,typeof Y=="object"&&Y!==null&&(j=mn(Y)),D=u.getDerivedStateFromProps,(Y=typeof D=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==le||J!==j)&&Mg(l,w,h,j),vi=!1,J=l.memoizedState,w.state=J,bs(l,h,w,m),_s();var ee=l.memoizedState;A!==le||J!==ee||vi||o!==null&&o.dependencies!==null&&ec(o.dependencies)?(typeof D=="function"&&(rd(l,u,D,h),ee=l.memoizedState),(oe=vi||kg(l,u,oe,h,J,ee,j)||o!==null&&o.dependencies!==null&&ec(o.dependencies))?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ee,j),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ee,j)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===o.memoizedProps&&J===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&J===o.memoizedState||(l.flags|=1024),l.memoizedProps=h,l.memoizedState=ee),w.props=h,w.state=ee,w.context=j,h=oe):(typeof w.componentDidUpdate!="function"||A===o.memoizedProps&&J===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&J===o.memoizedState||(l.flags|=1024),h=!1)}return w=h,xc(o,l),h=(l.flags&128)!==0,w||h?(w=l.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,o!==null&&h?(l.child=ro(l,o.child,null,m),l.child=ro(l,null,u,m)):on(o,l,u,m),l.memoizedState=w.state,o=l.child):o=Yr(o,l,m),o}function Wg(o,l,u,h){return hs(),l.flags|=256,on(o,l,u,h),l.child}var sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ld(o){return{baseLanes:o,cachePool:jp()}}function cd(o,l,u){return o=o!==null?o.childLanes&~u:0,l&&(o|=nr),o}function Kg(o,l,u){var h=l.pendingProps,m=!1,w=(l.flags&128)!==0,A;if((A=w)||(A=o!==null&&o.memoizedState===null?!1:(zt.current&2)!==0),A&&(m=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,o===null){if(Qe){if(m?wi(l):_i(),Qe){var D=Dt,j;if(j=D){e:{for(j=D,D=Er;j.nodeType!==8;){if(!D){D=null;break e}if(j=dr(j.nextSibling),j===null){D=null;break e}}D=j}D!==null?(l.memoizedState={dehydrated:D,treeContext:ta!==null?{id:zr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},j=Vn(18,null,null,0),j.stateNode=D,j.return=l,l.child=j,Sn=l,Dt=null,j=!0):j=!1}j||ia(l)}if(D=l.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return qd(D)?l.lanes=32:l.lanes=536870912,null;Xr(l)}return D=h.children,h=h.fallback,m?(_i(),m=l.mode,D=wc({mode:"hidden",children:D},m),h=ea(h,m,u,null),D.return=l,h.return=l,D.sibling=h,l.child=D,m=l.child,m.memoizedState=ld(u),m.childLanes=cd(o,A,u),l.memoizedState=sd,h):(wi(l),ud(l,D))}if(j=o.memoizedState,j!==null&&(D=j.dehydrated,D!==null)){if(w)l.flags&256?(wi(l),l.flags&=-257,l=fd(o,l,u)):l.memoizedState!==null?(_i(),l.child=o.child,l.flags|=128,l=null):(_i(),m=h.fallback,D=l.mode,h=wc({mode:"visible",children:h.children},D),m=ea(m,D,u,null),m.flags|=2,h.return=l,m.return=l,h.sibling=m,l.child=h,ro(l,o.child,null,u),h=l.child,h.memoizedState=ld(u),h.childLanes=cd(o,A,u),l.memoizedState=sd,l=m);else if(wi(l),qd(D)){if(A=D.nextSibling&&D.nextSibling.dataset,A)var Y=A.dgst;A=Y,h=Error(r(419)),h.stack="",h.digest=A,ps({value:h,source:null,stack:null}),l=fd(o,l,u)}else if(Qt||gs(o,l,u,!1),A=(u&o.childLanes)!==0,Qt||A){if(A=ft,A!==null&&(h=u&-u,h=(h&42)!==0?1:qu(h),h=(h&(A.suspendedLanes|u))!==0?0:h,h!==0&&h!==j.retryLane))throw j.retryLane=h,qa(o,h),qn(A,o,h),Vg;D.data==="$?"||Dd(),l=fd(o,l,u)}else D.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=j.treeContext,Dt=dr(D.nextSibling),Sn=l,Qe=!0,ra=null,Er=!1,o!==null&&(Jn[er++]=zr,Jn[er++]=Hr,Jn[er++]=ta,zr=o.id,Hr=o.overflow,ta=l),l=ud(l,h.children),l.flags|=4096);return l}return m?(_i(),m=h.fallback,D=l.mode,j=o.child,Y=j.sibling,h=Vr(j,{mode:"hidden",children:h.children}),h.subtreeFlags=j.subtreeFlags&65011712,Y!==null?m=Vr(Y,m):(m=ea(m,D,u,null),m.flags|=2),m.return=l,h.return=l,h.sibling=m,l.child=h,h=m,m=l.child,D=o.child.memoizedState,D===null?D=ld(u):(j=D.cachePool,j!==null?(Y=Vt._currentValue,j=j.parent!==Y?{parent:Y,pool:Y}:j):j=jp(),D={baseLanes:D.baseLanes|u,cachePool:j}),m.memoizedState=D,m.childLanes=cd(o,A,u),l.memoizedState=sd,h):(wi(l),u=o.child,o=u.sibling,u=Vr(u,{mode:"visible",children:h.children}),u.return=l,u.sibling=null,o!==null&&(A=l.deletions,A===null?(l.deletions=[o],l.flags|=16):A.push(o)),l.child=u,l.memoizedState=null,u)}function ud(o,l){return l=wc({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function wc(o,l){return o=Vn(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function fd(o,l,u){return ro(l,o.child,null,u),o=ud(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function Zg(o,l,u){o.lanes|=l;var h=o.alternate;h!==null&&(h.lanes|=l),Df(o.return,l,u)}function dd(o,l,u,h,m){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:m}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=h,w.tail=u,w.tailMode=m)}function Qg(o,l,u){var h=l.pendingProps,m=h.revealOrder,w=h.tail;if(on(o,l,h.children,u),h=zt.current,(h&2)!==0)h=h&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Zg(o,u,l);else if(o.tag===19)Zg(o,u,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}h&=1}switch(ne(zt,h),m){case"forwards":for(u=l.child,m=null;u!==null;)o=u.alternate,o!==null&&vc(o)===null&&(m=u),u=u.sibling;u=m,u===null?(m=l.child,l.child=null):(m=u.sibling,u.sibling=null),dd(l,!1,m,u,w);break;case"backwards":for(u=null,m=l.child,l.child=null;m!==null;){if(o=m.alternate,o!==null&&vc(o)===null){l.child=m;break}o=m.sibling,m.sibling=u,u=m,m=o}dd(l,!0,u,null,w);break;case"together":dd(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Yr(o,l,u){if(o!==null&&(l.dependencies=o.dependencies),Ci|=l.lanes,(u&l.childLanes)===0)if(o!==null){if(gs(o,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,u=Vr(o,o.pendingProps),l.child=u,u.return=l;o.sibling!==null;)o=o.sibling,u=u.sibling=Vr(o,o.pendingProps),u.return=l;u.sibling=null}return l.child}function hd(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&ec(o)))}function n3(o,l,u){switch(l.tag){case 3:Oe(l,l.stateNode.containerInfo),gi(l,Vt,o.memoizedState.cache),hs();break;case 27:case 5:pn(l);break;case 4:Oe(l,l.stateNode.containerInfo);break;case 10:gi(l,l.type,l.memoizedProps.value);break;case 13:var h=l.memoizedState;if(h!==null)return h.dehydrated!==null?(wi(l),l.flags|=128,null):(u&l.child.childLanes)!==0?Kg(o,l,u):(wi(l),o=Yr(o,l,u),o!==null?o.sibling:null);wi(l);break;case 19:var m=(o.flags&128)!==0;if(h=(u&l.childLanes)!==0,h||(gs(o,l,u,!1),h=(u&l.childLanes)!==0),m){if(h)return Qg(o,l,u);l.flags|=128}if(m=l.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ne(zt,zt.current),h)break;return null;case 22:case 23:return l.lanes=0,$g(o,l,u);case 24:gi(l,Vt,o.memoizedState.cache)}return Yr(o,l,u)}function Jg(o,l,u){if(o!==null)if(o.memoizedProps!==l.pendingProps)Qt=!0;else{if(!hd(o,u)&&(l.flags&128)===0)return Qt=!1,n3(o,l,u);Qt=(o.flags&131072)!==0}else Qt=!1,Qe&&(l.flags&1048576)!==0&&Dp(l,Jl,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var h=l.elementType,m=h._init;if(h=m(h._payload),l.type=h,typeof h=="function")bf(h)?(o=ca(h,o),l.tag=1,l=Yg(null,l,h,o,u)):(l.tag=0,l=od(null,l,h,o,u));else{if(h!=null){if(m=h.$$typeof,m===I){l.tag=11,l=zg(null,l,h,o,u);break e}else if(m===H){l.tag=14,l=Hg(null,l,h,o,u);break e}}throw l=fe(h)||h,Error(r(306,l,""))}}return l;case 0:return od(o,l,l.type,l.pendingProps,u);case 1:return h=l.type,m=ca(h,l.pendingProps),Yg(o,l,h,m,u);case 3:e:{if(Oe(l,l.stateNode.containerInfo),o===null)throw Error(r(387));h=l.pendingProps;var w=l.memoizedState;m=w.element,jf(o,l),bs(l,h,null,u);var A=l.memoizedState;if(h=A.cache,gi(l,Vt,h),h!==w.cache&&Rf(l,[Vt],u,!0),_s(),h=A.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=Wg(o,l,h,u);break e}else if(h!==m){m=Zn(Error(r(424)),l),ps(m),l=Wg(o,l,h,u);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Dt=dr(o.firstChild),Sn=l,Qe=!0,ra=null,Er=!0,u=Ng(l,null,h,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(hs(),h===m){l=Yr(o,l,u);break e}on(o,l,h,u)}l=l.child}return l;case 26:return xc(o,l),o===null?(u=rm(l.type,null,l.pendingProps,null))?l.memoizedState=u:Qe||(u=l.type,o=l.pendingProps,h=Mc(he.current).createElement(u),h[vn]=l,h[Nn]=o,ln(h,u,o),Zt(h),l.stateNode=h):l.memoizedState=rm(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return pn(l),o===null&&Qe&&(h=l.stateNode=em(l.type,l.pendingProps,he.current),Sn=l,Er=!0,m=Dt,Ri(l.type)?(Xd=m,Dt=dr(h.firstChild)):Dt=m),on(o,l,l.pendingProps.children,u),xc(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&Qe&&((m=h=Dt)&&(h=R3(h,l.type,l.pendingProps,Er),h!==null?(l.stateNode=h,Sn=l,Dt=dr(h.firstChild),Er=!1,m=!0):m=!1),m||ia(l)),pn(l),m=l.type,w=l.pendingProps,A=o!==null?o.memoizedProps:null,h=w.children,Hd(m,w)?h=null:A!==null&&Hd(m,A)&&(l.flags|=32),l.memoizedState!==null&&(m=zf(o,l,Yb,null,null,u),Gs._currentValue=m),xc(o,l),on(o,l,h,u),l.child;case 6:return o===null&&Qe&&((o=u=Dt)&&(u=N3(u,l.pendingProps,Er),u!==null?(l.stateNode=u,Sn=l,Dt=null,o=!0):o=!1),o||ia(l)),null;case 13:return Kg(o,l,u);case 4:return Oe(l,l.stateNode.containerInfo),h=l.pendingProps,o===null?l.child=ro(l,null,h,u):on(o,l,h,u),l.child;case 11:return zg(o,l,l.type,l.pendingProps,u);case 7:return on(o,l,l.pendingProps,u),l.child;case 8:return on(o,l,l.pendingProps.children,u),l.child;case 12:return on(o,l,l.pendingProps.children,u),l.child;case 10:return h=l.pendingProps,gi(l,l.type,h.value),on(o,l,h.children,u),l.child;case 9:return m=l.type._context,h=l.pendingProps.children,oa(l),m=mn(m),h=h(m),l.flags|=1,on(o,l,h,u),l.child;case 14:return Hg(o,l,l.type,l.pendingProps,u);case 15:return Gg(o,l,l.type,l.pendingProps,u);case 19:return Qg(o,l,u);case 31:return h=l.pendingProps,u=l.mode,h={mode:h.mode,children:h.children},o===null?(u=wc(h,u),u.ref=l.ref,l.child=u,u.return=l,l=u):(u=Vr(o.child,h),u.ref=l.ref,l.child=u,u.return=l,l=u),l;case 22:return $g(o,l,u);case 24:return oa(l),h=mn(Vt),o===null?(m=kf(),m===null&&(m=ft,w=Nf(),m.pooledCache=w,w.refCount++,w!==null&&(m.pooledCacheLanes|=u),m=w),l.memoizedState={parent:h,cache:m},Pf(l),gi(l,Vt,m)):((o.lanes&u)!==0&&(jf(o,l),bs(l,null,null,u),_s()),m=o.memoizedState,w=l.memoizedState,m.parent!==h?(m={parent:h,cache:h},l.memoizedState=m,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=m),gi(l,Vt,h)):(h=w.cache,gi(l,Vt,h),h!==m.cache&&Rf(l,[Vt],u,!0))),on(o,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Wr(o){o.flags|=4}function ev(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!lm(l)){if(l=tr.current,l!==null&&(($e&4194048)===$e?Sr!==null:($e&62914560)!==$e&&($e&536870912)===0||l!==Sr))throw xs=Mf,Bp;o.flags|=8192}}function _c(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Jo():536870912,o.lanes|=l,so|=l)}function Ds(o,l){if(!Qe)switch(o.tailMode){case"hidden":l=o.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:h.sibling=null}}function bt(o){var l=o.alternate!==null&&o.alternate.child===o.child,u=0,h=0;if(l)for(var m=o.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=o,m=m.sibling;else for(m=o.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=o,m=m.sibling;return o.subtreeFlags|=h,o.childLanes=u,l}function r3(o,l,u){var h=l.pendingProps;switch(Cf(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(l),null;case 1:return bt(l),null;case 3:return u=l.stateNode,h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),$r(Vt),Tt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(o===null||o.child===null)&&(ds(l)?Wr(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ip())),bt(l),null;case 26:return u=l.memoizedState,o===null?(Wr(l),u!==null?(bt(l),ev(l,u)):(bt(l),l.flags&=-16777217)):u?u!==o.memoizedState?(Wr(l),bt(l),ev(l,u)):(bt(l),l.flags&=-16777217):(o.memoizedProps!==h&&Wr(l),bt(l),l.flags&=-16777217),null;case 27:xt(l),u=he.current;var m=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==h&&Wr(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return bt(l),null}o=ce.current,ds(l)?Rp(l):(o=em(m,h,u),l.stateNode=o,Wr(l))}return bt(l),null;case 5:if(xt(l),u=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==h&&Wr(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return bt(l),null}if(o=ce.current,ds(l))Rp(l);else{switch(m=Mc(he.current),o){case 1:o=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:o=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":o=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":o=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":o=m.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?o.multiple=!0:h.size&&(o.size=h.size);break;default:o=typeof h.is=="string"?m.createElement(u,{is:h.is}):m.createElement(u)}}o[vn]=l,o[Nn]=h;e:for(m=l.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===l)break e;for(;m.sibling===null;){if(m.return===null||m.return===l)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}l.stateNode=o;e:switch(ln(o,u,h),u){case"button":case"input":case"select":case"textarea":o=!!h.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Wr(l)}}return bt(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==h&&Wr(l);else{if(typeof h!="string"&&l.stateNode===null)throw Error(r(166));if(o=he.current,ds(l)){if(o=l.stateNode,u=l.memoizedProps,h=null,m=Sn,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}o[vn]=l,o=!!(o.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||Xv(o.nodeValue,u)),o||ia(l)}else o=Mc(o).createTextNode(h),o[vn]=l,l.stateNode=o}return bt(l),null;case 13:if(h=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(m=ds(l),h!==null&&h.dehydrated!==null){if(o===null){if(!m)throw Error(r(318));if(m=l.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[vn]=l}else hs(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;bt(l),m=!1}else m=Ip(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=m),m=!0;if(!m)return l.flags&256?(Xr(l),l):(Xr(l),null)}if(Xr(l),(l.flags&128)!==0)return l.lanes=u,l;if(u=h!==null,o=o!==null&&o.memoizedState!==null,u){h=l.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var w=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==m&&(h.flags|=2048)}return u!==o&&u&&(l.child.flags|=8192),_c(l,l.updateQueue),bt(l),null;case 4:return Tt(),o===null&&Ld(l.stateNode.containerInfo),bt(l),null;case 10:return $r(l.type),bt(l),null;case 19:if(Z(zt),m=l.memoizedState,m===null)return bt(l),null;if(h=(l.flags&128)!==0,w=m.rendering,w===null)if(h)Ds(m,!1);else{if(Rt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(w=vc(o),w!==null){for(l.flags|=128,Ds(m,!1),o=w.updateQueue,l.updateQueue=o,_c(l,o),l.subtreeFlags=0,o=u,u=l.child;u!==null;)Op(u,o),u=u.sibling;return ne(zt,zt.current&1|2),l.child}o=o.sibling}m.tail!==null&&bn()>Sc&&(l.flags|=128,h=!0,Ds(m,!1),l.lanes=4194304)}else{if(!h)if(o=vc(w),o!==null){if(l.flags|=128,h=!0,o=o.updateQueue,l.updateQueue=o,_c(l,o),Ds(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Qe)return bt(l),null}else 2*bn()-m.renderingStartTime>Sc&&u!==536870912&&(l.flags|=128,h=!0,Ds(m,!1),l.lanes=4194304);m.isBackwards?(w.sibling=l.child,l.child=w):(o=m.last,o!==null?o.sibling=w:l.child=w,m.last=w)}return m.tail!==null?(l=m.tail,m.rendering=l,m.tail=l.sibling,m.renderingStartTime=bn(),l.sibling=null,o=zt.current,ne(zt,h?o&1|2:o&1),l):(bt(l),null);case 22:case 23:return Xr(l),Uf(),h=l.memoizedState!==null,o!==null?o.memoizedState!==null!==h&&(l.flags|=8192):h&&(l.flags|=8192),h?(u&536870912)!==0&&(l.flags&128)===0&&(bt(l),l.subtreeFlags&6&&(l.flags|=8192)):bt(l),u=l.updateQueue,u!==null&&_c(l,u.retryQueue),u=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==u&&(l.flags|=2048),o!==null&&Z(sa),null;case 24:return u=null,o!==null&&(u=o.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),$r(Vt),bt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function i3(o,l){switch(Cf(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return $r(Vt),Tt(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return xt(l),null;case 13:if(Xr(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));hs()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Z(zt),null;case 4:return Tt(),null;case 10:return $r(l.type),null;case 22:case 23:return Xr(l),Uf(),o!==null&&Z(sa),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return $r(Vt),null;case 25:return null;default:return null}}function tv(o,l){switch(Cf(l),l.tag){case 3:$r(Vt),Tt();break;case 26:case 27:case 5:xt(l);break;case 4:Tt();break;case 13:Xr(l);break;case 19:Z(zt);break;case 10:$r(l.type);break;case 22:case 23:Xr(l),Uf(),o!==null&&Z(sa);break;case 24:$r(Vt)}}function Rs(o,l){try{var u=l.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&o)===o){h=void 0;var w=u.create,A=u.inst;h=w(),A.destroy=h}u=u.next}while(u!==m)}}catch(D){ut(l,l.return,D)}}function bi(o,l,u){try{var h=l.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var w=m.next;h=w;do{if((h.tag&o)===o){var A=h.inst,D=A.destroy;if(D!==void 0){A.destroy=void 0,m=l;var j=u,Y=D;try{Y()}catch(oe){ut(m,j,oe)}}}h=h.next}while(h!==w)}}catch(oe){ut(l,l.return,oe)}}function nv(o){var l=o.updateQueue;if(l!==null){var u=o.stateNode;try{Hp(l,u)}catch(h){ut(o,o.return,h)}}}function rv(o,l,u){u.props=ca(o.type,o.memoizedProps),u.state=o.memoizedState;try{u.componentWillUnmount()}catch(h){ut(o,l,h)}}function Ns(o,l){try{var u=o.ref;if(u!==null){switch(o.tag){case 26:case 27:case 5:var h=o.stateNode;break;case 30:h=o.stateNode;break;default:h=o.stateNode}typeof u=="function"?o.refCleanup=u(h):u.current=h}}catch(m){ut(o,l,m)}}function Ar(o,l){var u=o.ref,h=o.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(m){ut(o,l,m)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){ut(o,l,m)}else u.current=null}function iv(o){var l=o.type,u=o.memoizedProps,h=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(m){ut(o,o.return,m)}}function pd(o,l,u){try{var h=o.stateNode;A3(h,o.type,u,l),h[Nn]=l}catch(m){ut(o,o.return,m)}}function av(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ri(o.type)||o.tag===4}function gd(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||av(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ri(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function vd(o,l,u){var h=o.tag;if(h===5||h===6)o=o.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(o,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(o),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=kc));else if(h!==4&&(h===27&&Ri(o.type)&&(u=o.stateNode,l=null),o=o.child,o!==null))for(vd(o,l,u),o=o.sibling;o!==null;)vd(o,l,u),o=o.sibling}function bc(o,l,u){var h=o.tag;if(h===5||h===6)o=o.stateNode,l?u.insertBefore(o,l):u.appendChild(o);else if(h!==4&&(h===27&&Ri(o.type)&&(u=o.stateNode),o=o.child,o!==null))for(bc(o,l,u),o=o.sibling;o!==null;)bc(o,l,u),o=o.sibling}function ov(o){var l=o.stateNode,u=o.memoizedProps;try{for(var h=o.type,m=l.attributes;m.length;)l.removeAttributeNode(m[0]);ln(l,h,u),l[vn]=o,l[Nn]=u}catch(w){ut(o,o.return,w)}}var Kr=!1,Mt=!1,md=!1,sv=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function a3(o,l){if(o=o.containerInfo,Vd=Uc,o=yp(o),gf(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var m=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var A=0,D=-1,j=-1,Y=0,oe=0,le=o,J=null;t:for(;;){for(var ee;le!==u||m!==0&&le.nodeType!==3||(D=A+m),le!==w||h!==0&&le.nodeType!==3||(j=A+h),le.nodeType===3&&(A+=le.nodeValue.length),(ee=le.firstChild)!==null;)J=le,le=ee;for(;;){if(le===o)break t;if(J===u&&++Y===m&&(D=A),J===w&&++oe===h&&(j=A),(ee=le.nextSibling)!==null)break;le=J,J=le.parentNode}le=ee}u=D===-1||j===-1?null:{start:D,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(zd={focusedElem:o,selectionRange:u},Uc=!1,Jt=l;Jt!==null;)if(l=Jt,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,Jt=o;else for(;Jt!==null;){switch(l=Jt,w=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,u=l,m=w.memoizedProps,w=w.memoizedState,h=u.stateNode;try{var Re=ca(u.type,m,u.elementType===u.type);o=h.getSnapshotBeforeUpdate(Re,w),h.__reactInternalSnapshotBeforeUpdate=o}catch(Ce){ut(u,u.return,Ce)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,u=o.nodeType,u===9)$d(o);else if(u===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":$d(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,Jt=o;break}Jt=l.return}}function lv(o,l,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:Ei(o,u),h&4&&Rs(5,u);break;case 1:if(Ei(o,u),h&4)if(o=u.stateNode,l===null)try{o.componentDidMount()}catch(A){ut(u,u.return,A)}else{var m=ca(u.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(m,l,o.__reactInternalSnapshotBeforeUpdate)}catch(A){ut(u,u.return,A)}}h&64&&nv(u),h&512&&Ns(u,u.return);break;case 3:if(Ei(o,u),h&64&&(o=u.updateQueue,o!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{Hp(o,l)}catch(A){ut(u,u.return,A)}}break;case 27:l===null&&h&4&&ov(u);case 26:case 5:Ei(o,u),l===null&&h&4&&iv(u),h&512&&Ns(u,u.return);break;case 12:Ei(o,u);break;case 13:Ei(o,u),h&4&&fv(o,u),h&64&&(o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(u=p3.bind(null,u),I3(o,u))));break;case 22:if(h=u.memoizedState!==null||Kr,!h){l=l!==null&&l.memoizedState!==null||Mt,m=Kr;var w=Mt;Kr=h,(Mt=l)&&!w?Si(o,u,(u.subtreeFlags&8772)!==0):Ei(o,u),Kr=m,Mt=w}break;case 30:break;default:Ei(o,u)}}function cv(o){var l=o.alternate;l!==null&&(o.alternate=null,cv(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Wu(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var wt=null,Mn=!1;function Zr(o,l,u){for(u=u.child;u!==null;)uv(o,l,u),u=u.sibling}function uv(o,l,u){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Ge,u)}catch{}switch(u.tag){case 26:Mt||Ar(u,l),Zr(o,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Mt||Ar(u,l);var h=wt,m=Mn;Ri(u.type)&&(wt=u.stateNode,Mn=!1),Zr(o,l,u),Us(u.stateNode),wt=h,Mn=m;break;case 5:Mt||Ar(u,l);case 6:if(h=wt,m=Mn,wt=null,Zr(o,l,u),wt=h,Mn=m,wt!==null)if(Mn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(u.stateNode)}catch(w){ut(u,l,w)}else try{wt.removeChild(u.stateNode)}catch(w){ut(u,l,w)}break;case 18:wt!==null&&(Mn?(o=wt,Qv(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,u.stateNode),Ys(o)):Qv(wt,u.stateNode));break;case 4:h=wt,m=Mn,wt=u.stateNode.containerInfo,Mn=!0,Zr(o,l,u),wt=h,Mn=m;break;case 0:case 11:case 14:case 15:Mt||bi(2,u,l),Mt||bi(4,u,l),Zr(o,l,u);break;case 1:Mt||(Ar(u,l),h=u.stateNode,typeof h.componentWillUnmount=="function"&&rv(u,l,h)),Zr(o,l,u);break;case 21:Zr(o,l,u);break;case 22:Mt=(h=Mt)||u.memoizedState!==null,Zr(o,l,u),Mt=h;break;default:Zr(o,l,u)}}function fv(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Ys(o)}catch(u){ut(l,l.return,u)}}function o3(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new sv),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new sv),l;default:throw Error(r(435,o.tag))}}function yd(o,l){var u=o3(o);l.forEach(function(h){var m=g3.bind(null,o,h);u.has(h)||(u.add(h),h.then(m,m))})}function zn(o,l){var u=l.deletions;if(u!==null)for(var h=0;h<u.length;h++){var m=u[h],w=o,A=l,D=A;e:for(;D!==null;){switch(D.tag){case 27:if(Ri(D.type)){wt=D.stateNode,Mn=!1;break e}break;case 5:wt=D.stateNode,Mn=!1;break e;case 3:case 4:wt=D.stateNode.containerInfo,Mn=!0;break e}D=D.return}if(wt===null)throw Error(r(160));uv(w,A,m),wt=null,Mn=!1,w=m.alternate,w!==null&&(w.return=null),m.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)dv(l,o),l=l.sibling}var fr=null;function dv(o,l){var u=o.alternate,h=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:zn(l,o),Hn(o),h&4&&(bi(3,o,o.return),Rs(3,o),bi(5,o,o.return));break;case 1:zn(l,o),Hn(o),h&512&&(Mt||u===null||Ar(u,u.return)),h&64&&Kr&&(o=o.updateQueue,o!==null&&(h=o.callbacks,h!==null&&(u=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var m=fr;if(zn(l,o),Hn(o),h&512&&(Mt||u===null||Ar(u,u.return)),h&4){var w=u!==null?u.memoizedState:null;if(h=o.memoizedState,u===null)if(h===null)if(o.stateNode===null){e:{h=o.type,u=o.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":w=m.getElementsByTagName("title")[0],(!w||w[ts]||w[vn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=m.createElement(h),m.head.insertBefore(w,m.querySelector("head > title"))),ln(w,h,u),w[vn]=o,Zt(w),h=w;break e;case"link":var A=om("link","href",m).get(h+(u.href||""));if(A){for(var D=0;D<A.length;D++)if(w=A[D],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(D,1);break t}}w=m.createElement(h),ln(w,h,u),m.head.appendChild(w);break;case"meta":if(A=om("meta","content",m).get(h+(u.content||""))){for(D=0;D<A.length;D++)if(w=A[D],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(D,1);break t}}w=m.createElement(h),ln(w,h,u),m.head.appendChild(w);break;default:throw Error(r(468,h))}w[vn]=o,Zt(w),h=w}o.stateNode=h}else sm(m,o.type,o.stateNode);else o.stateNode=am(m,h,o.memoizedProps);else w!==h?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,h===null?sm(m,o.type,o.stateNode):am(m,h,o.memoizedProps)):h===null&&o.stateNode!==null&&pd(o,o.memoizedProps,u.memoizedProps)}break;case 27:zn(l,o),Hn(o),h&512&&(Mt||u===null||Ar(u,u.return)),u!==null&&h&4&&pd(o,o.memoizedProps,u.memoizedProps);break;case 5:if(zn(l,o),Hn(o),h&512&&(Mt||u===null||Ar(u,u.return)),o.flags&32){m=o.stateNode;try{Fa(m,"")}catch(ee){ut(o,o.return,ee)}}h&4&&o.stateNode!=null&&(m=o.memoizedProps,pd(o,m,u!==null?u.memoizedProps:m)),h&1024&&(md=!0);break;case 6:if(zn(l,o),Hn(o),h&4){if(o.stateNode===null)throw Error(r(162));h=o.memoizedProps,u=o.stateNode;try{u.nodeValue=h}catch(ee){ut(o,o.return,ee)}}break;case 3:if(Bc=null,m=fr,fr=Pc(l.containerInfo),zn(l,o),fr=m,Hn(o),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Ys(l.containerInfo)}catch(ee){ut(o,o.return,ee)}md&&(md=!1,hv(o));break;case 4:h=fr,fr=Pc(o.stateNode.containerInfo),zn(l,o),Hn(o),fr=h;break;case 12:zn(l,o),Hn(o);break;case 13:zn(l,o),Hn(o),o.child.flags&8192&&o.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Sd=bn()),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,yd(o,h)));break;case 22:m=o.memoizedState!==null;var j=u!==null&&u.memoizedState!==null,Y=Kr,oe=Mt;if(Kr=Y||m,Mt=oe||j,zn(l,o),Mt=oe,Kr=Y,Hn(o),h&8192)e:for(l=o.stateNode,l._visibility=m?l._visibility&-2:l._visibility|1,m&&(u===null||j||Kr||Mt||ua(o)),u=null,l=o;;){if(l.tag===5||l.tag===26){if(u===null){j=u=l;try{if(w=j.stateNode,m)A=w.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{D=j.stateNode;var le=j.memoizedProps.style,J=le!=null&&le.hasOwnProperty("display")?le.display:null;D.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ee){ut(j,j.return,ee)}}}else if(l.tag===6){if(u===null){j=l;try{j.stateNode.nodeValue=m?"":j.memoizedProps}catch(ee){ut(j,j.return,ee)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}h&4&&(h=o.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,yd(o,u))));break;case 19:zn(l,o),Hn(o),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,yd(o,h)));break;case 30:break;case 21:break;default:zn(l,o),Hn(o)}}function Hn(o){var l=o.flags;if(l&2){try{for(var u,h=o.return;h!==null;){if(av(h)){u=h;break}h=h.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var m=u.stateNode,w=gd(o);bc(o,w,m);break;case 5:var A=u.stateNode;u.flags&32&&(Fa(A,""),u.flags&=-33);var D=gd(o);bc(o,D,A);break;case 3:case 4:var j=u.stateNode.containerInfo,Y=gd(o);vd(o,Y,j);break;default:throw Error(r(161))}}catch(oe){ut(o,o.return,oe)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function hv(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;hv(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Ei(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)lv(o,l.alternate,l),l=l.sibling}function ua(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:bi(4,l,l.return),ua(l);break;case 1:Ar(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&rv(l,l.return,u),ua(l);break;case 27:Us(l.stateNode);case 26:case 5:Ar(l,l.return),ua(l);break;case 22:l.memoizedState===null&&ua(l);break;case 30:ua(l);break;default:ua(l)}o=o.sibling}}function Si(o,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var h=l.alternate,m=o,w=l,A=w.flags;switch(w.tag){case 0:case 11:case 15:Si(m,w,u),Rs(4,w);break;case 1:if(Si(m,w,u),h=w,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Y){ut(h,h.return,Y)}if(h=w,m=h.updateQueue,m!==null){var D=h.stateNode;try{var j=m.shared.hiddenCallbacks;if(j!==null)for(m.shared.hiddenCallbacks=null,m=0;m<j.length;m++)zp(j[m],D)}catch(Y){ut(h,h.return,Y)}}u&&A&64&&nv(w),Ns(w,w.return);break;case 27:ov(w);case 26:case 5:Si(m,w,u),u&&h===null&&A&4&&iv(w),Ns(w,w.return);break;case 12:Si(m,w,u);break;case 13:Si(m,w,u),u&&A&4&&fv(m,w);break;case 22:w.memoizedState===null&&Si(m,w,u),Ns(w,w.return);break;case 30:break;default:Si(m,w,u)}l=l.sibling}}function xd(o,l){var u=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==u&&(o!=null&&o.refCount++,u!=null&&vs(u))}function wd(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&vs(o))}function Cr(o,l,u,h){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)pv(o,l,u,h),l=l.sibling}function pv(o,l,u,h){var m=l.flags;switch(l.tag){case 0:case 11:case 15:Cr(o,l,u,h),m&2048&&Rs(9,l);break;case 1:Cr(o,l,u,h);break;case 3:Cr(o,l,u,h),m&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&vs(o)));break;case 12:if(m&2048){Cr(o,l,u,h),o=l.stateNode;try{var w=l.memoizedProps,A=w.id,D=w.onPostCommit;typeof D=="function"&&D(A,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(j){ut(l,l.return,j)}}else Cr(o,l,u,h);break;case 13:Cr(o,l,u,h);break;case 23:break;case 22:w=l.stateNode,A=l.alternate,l.memoizedState!==null?w._visibility&2?Cr(o,l,u,h):Is(o,l):w._visibility&2?Cr(o,l,u,h):(w._visibility|=2,io(o,l,u,h,(l.subtreeFlags&10256)!==0)),m&2048&&xd(A,l);break;case 24:Cr(o,l,u,h),m&2048&&wd(l.alternate,l);break;default:Cr(o,l,u,h)}}function io(o,l,u,h,m){for(m=m&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var w=o,A=l,D=u,j=h,Y=A.flags;switch(A.tag){case 0:case 11:case 15:io(w,A,D,j,m),Rs(8,A);break;case 23:break;case 22:var oe=A.stateNode;A.memoizedState!==null?oe._visibility&2?io(w,A,D,j,m):Is(w,A):(oe._visibility|=2,io(w,A,D,j,m)),m&&Y&2048&&xd(A.alternate,A);break;case 24:io(w,A,D,j,m),m&&Y&2048&&wd(A.alternate,A);break;default:io(w,A,D,j,m)}l=l.sibling}}function Is(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=o,h=l,m=h.flags;switch(h.tag){case 22:Is(u,h),m&2048&&xd(h.alternate,h);break;case 24:Is(u,h),m&2048&&wd(h.alternate,h);break;default:Is(u,h)}l=l.sibling}}var ks=8192;function ao(o){if(o.subtreeFlags&ks)for(o=o.child;o!==null;)gv(o),o=o.sibling}function gv(o){switch(o.tag){case 26:ao(o),o.flags&ks&&o.memoizedState!==null&&$3(fr,o.memoizedState,o.memoizedProps);break;case 5:ao(o);break;case 3:case 4:var l=fr;fr=Pc(o.stateNode.containerInfo),ao(o),fr=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=ks,ks=16777216,ao(o),ks=l):ao(o));break;default:ao(o)}}function vv(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Ms(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var h=l[u];Jt=h,yv(h,o)}vv(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)mv(o),o=o.sibling}function mv(o){switch(o.tag){case 0:case 11:case 15:Ms(o),o.flags&2048&&bi(9,o,o.return);break;case 3:Ms(o);break;case 12:Ms(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Ec(o)):Ms(o);break;default:Ms(o)}}function Ec(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var h=l[u];Jt=h,yv(h,o)}vv(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:bi(8,l,l.return),Ec(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Ec(l));break;default:Ec(l)}o=o.sibling}}function yv(o,l){for(;Jt!==null;){var u=Jt;switch(u.tag){case 0:case 11:case 15:bi(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:vs(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Jt=h;else e:for(u=o;Jt!==null;){h=Jt;var m=h.sibling,w=h.return;if(cv(h),h===u){Jt=null;break e}if(m!==null){m.return=w,Jt=m;break e}Jt=w}}}var s3={getCacheForType:function(o){var l=mn(Vt),u=l.data.get(o);return u===void 0&&(u=o(),l.data.set(o,u)),u}},l3=typeof WeakMap=="function"?WeakMap:Map,nt=0,ft=null,Ve=null,$e=0,rt=0,Gn=null,Ai=!1,oo=!1,_d=!1,Qr=0,Rt=0,Ci=0,fa=0,bd=0,nr=0,so=0,Ps=null,Pn=null,Ed=!1,Sd=0,Sc=1/0,Ac=null,Ti=null,sn=0,Oi=null,lo=null,co=0,Ad=0,Cd=null,xv=null,js=0,Td=null;function $n(){if((nt&2)!==0&&$e!==0)return $e&-$e;if(S.T!==null){var o=Ka;return o!==0?o:Md()}return P1()}function wv(){nr===0&&(nr=($e&536870912)===0||Qe?di():536870912);var o=tr.current;return o!==null&&(o.flags|=32),nr}function qn(o,l,u){(o===ft&&(rt===2||rt===9)||o.cancelPendingCommit!==null)&&(uo(o,0),Di(o,$e,nr,!1)),Wi(o,u),((nt&2)===0||o!==ft)&&(o===ft&&((nt&2)===0&&(fa|=u),Rt===4&&Di(o,$e,nr,!1)),Tr(o))}function _v(o,l,u){if((nt&6)!==0)throw Error(r(327));var h=!u&&(l&124)===0&&(l&o.expiredLanes)===0||fi(o,l),m=h?f3(o,l):Rd(o,l,!0),w=h;do{if(m===0){oo&&!h&&Di(o,l,0,!1);break}else{if(u=o.current.alternate,w&&!c3(u)){m=Rd(o,l,!1),w=!1;continue}if(m===2){if(w=l,o.errorRecoveryDisabledLanes&w)var A=0;else A=o.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var D=o;m=Ps;var j=D.current.memoizedState.isDehydrated;if(j&&(uo(D,A).flags|=256),A=Rd(D,A,!1),A!==2){if(_d&&!j){D.errorRecoveryDisabledLanes|=w,fa|=w,m=4;break e}w=Pn,Pn=m,w!==null&&(Pn===null?Pn=w:Pn.push.apply(Pn,w))}m=A}if(w=!1,m!==2)continue}}if(m===1){uo(o,0),Di(o,l,0,!0);break}e:{switch(h=o,w=m,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Di(h,l,nr,!Ai);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(m=Sd+300-bn(),10<m)){if(Di(h,l,nr,!Ai),En(h,0,!0)!==0)break e;h.timeoutHandle=Kv(bv.bind(null,h,u,Pn,Ac,Ed,l,nr,fa,so,Ai,w,2,-0,0),m);break e}bv(h,u,Pn,Ac,Ed,l,nr,fa,so,Ai,w,0,-0,0)}}break}while(!0);Tr(o)}function bv(o,l,u,h,m,w,A,D,j,Y,oe,le,J,ee){if(o.timeoutHandle=-1,le=l.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(Hs={stylesheets:null,count:0,unsuspend:G3},gv(l),le=q3(),le!==null)){o.cancelPendingCommit=le(Dv.bind(null,o,l,w,u,h,m,A,D,j,oe,1,J,ee)),Di(o,w,A,!Y);return}Dv(o,l,w,u,h,m,A,D,j)}function c3(o){for(var l=o;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var m=u[h],w=m.getSnapshot;m=m.value;try{if(!Un(w(),m))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Di(o,l,u,h){l&=~bd,l&=~fa,o.suspendedLanes|=l,o.pingedLanes&=~l,h&&(o.warmLanes|=l),h=o.expirationTimes;for(var m=l;0<m;){var w=31-be(m),A=1<<w;h[w]=-1,m&=~A}u!==0&&k1(o,u,l)}function Cc(){return(nt&6)===0?(Bs(0),!1):!0}function Od(){if(Ve!==null){if(rt===0)var o=Ve.return;else o=Ve,Gr=aa=null,$f(o),no=null,Ts=0,o=Ve;for(;o!==null;)tv(o.alternate,o),o=o.return;Ve=null}}function uo(o,l){var u=o.timeoutHandle;u!==-1&&(o.timeoutHandle=-1,T3(u)),u=o.cancelPendingCommit,u!==null&&(o.cancelPendingCommit=null,u()),Od(),ft=o,Ve=u=Vr(o.current,null),$e=l,rt=0,Gn=null,Ai=!1,oo=fi(o,l),_d=!1,so=nr=bd=fa=Ci=Rt=0,Pn=Ps=null,Ed=!1,(l&8)!==0&&(l|=l&32);var h=o.entangledLanes;if(h!==0)for(o=o.entanglements,h&=l;0<h;){var m=31-be(h),w=1<<m;l|=o[m],h&=~w}return Qr=l,Yl(),u}function Ev(o,l){Be=null,S.H=hc,l===ys||l===rc?(l=Up(),rt=3):l===Bp?(l=Up(),rt=4):rt=l===Vg?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Gn=l,Ve===null&&(Rt=1,yc(o,Zn(l,o.current)))}function Sv(){var o=S.H;return S.H=hc,o===null?hc:o}function Av(){var o=S.A;return S.A=s3,o}function Dd(){Rt=4,Ai||($e&4194048)!==$e&&tr.current!==null||(oo=!0),(Ci&134217727)===0&&(fa&134217727)===0||ft===null||Di(ft,$e,nr,!1)}function Rd(o,l,u){var h=nt;nt|=2;var m=Sv(),w=Av();(ft!==o||$e!==l)&&(Ac=null,uo(o,l)),l=!1;var A=Rt;e:do try{if(rt!==0&&Ve!==null){var D=Ve,j=Gn;switch(rt){case 8:Od(),A=6;break e;case 3:case 2:case 9:case 6:tr.current===null&&(l=!0);var Y=rt;if(rt=0,Gn=null,fo(o,D,j,Y),u&&oo){A=0;break e}break;default:Y=rt,rt=0,Gn=null,fo(o,D,j,Y)}}u3(),A=Rt;break}catch(oe){Ev(o,oe)}while(!0);return l&&o.shellSuspendCounter++,Gr=aa=null,nt=h,S.H=m,S.A=w,Ve===null&&(ft=null,$e=0,Yl()),A}function u3(){for(;Ve!==null;)Cv(Ve)}function f3(o,l){var u=nt;nt|=2;var h=Sv(),m=Av();ft!==o||$e!==l?(Ac=null,Sc=bn()+500,uo(o,l)):oo=fi(o,l);e:do try{if(rt!==0&&Ve!==null){l=Ve;var w=Gn;t:switch(rt){case 1:rt=0,Gn=null,fo(o,l,w,1);break;case 2:case 9:if(Lp(w)){rt=0,Gn=null,Tv(l);break}l=function(){rt!==2&&rt!==9||ft!==o||(rt=7),Tr(o)},w.then(l,l);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Lp(w)?(rt=0,Gn=null,Tv(l)):(rt=0,Gn=null,fo(o,l,w,7));break;case 5:var A=null;switch(Ve.tag){case 26:A=Ve.memoizedState;case 5:case 27:var D=Ve;if(!A||lm(A)){rt=0,Gn=null;var j=D.sibling;if(j!==null)Ve=j;else{var Y=D.return;Y!==null?(Ve=Y,Tc(Y)):Ve=null}break t}}rt=0,Gn=null,fo(o,l,w,5);break;case 6:rt=0,Gn=null,fo(o,l,w,6);break;case 8:Od(),Rt=6;break e;default:throw Error(r(462))}}d3();break}catch(oe){Ev(o,oe)}while(!0);return Gr=aa=null,S.H=h,S.A=m,nt=u,Ve!==null?0:(ft=null,$e=0,Yl(),Rt)}function d3(){for(;Ve!==null&&!ci();)Cv(Ve)}function Cv(o){var l=Jg(o.alternate,o,Qr);o.memoizedProps=o.pendingProps,l===null?Tc(o):Ve=l}function Tv(o){var l=o,u=l.alternate;switch(l.tag){case 15:case 0:l=Xg(u,l,l.pendingProps,l.type,void 0,$e);break;case 11:l=Xg(u,l,l.pendingProps,l.type.render,l.ref,$e);break;case 5:$f(l);default:tv(u,l),l=Ve=Op(l,Qr),l=Jg(u,l,Qr)}o.memoizedProps=o.pendingProps,l===null?Tc(o):Ve=l}function fo(o,l,u,h){Gr=aa=null,$f(l),no=null,Ts=0;var m=l.return;try{if(t3(o,m,l,u,$e)){Rt=1,yc(o,Zn(u,o.current)),Ve=null;return}}catch(w){if(m!==null)throw Ve=m,w;Rt=1,yc(o,Zn(u,o.current)),Ve=null;return}l.flags&32768?(Qe||h===1?o=!0:oo||($e&536870912)!==0?o=!1:(Ai=o=!0,(h===2||h===9||h===3||h===6)&&(h=tr.current,h!==null&&h.tag===13&&(h.flags|=16384))),Ov(l,o)):Tc(l)}function Tc(o){var l=o;do{if((l.flags&32768)!==0){Ov(l,Ai);return}o=l.return;var u=r3(l.alternate,l,Qr);if(u!==null){Ve=u;return}if(l=l.sibling,l!==null){Ve=l;return}Ve=l=o}while(l!==null);Rt===0&&(Rt=5)}function Ov(o,l){do{var u=i3(o.alternate,o);if(u!==null){u.flags&=32767,Ve=u;return}if(u=o.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(o=o.sibling,o!==null)){Ve=o;return}Ve=o=u}while(o!==null);Rt=6,Ve=null}function Dv(o,l,u,h,m,w,A,D,j){o.cancelPendingCommit=null;do Oc();while(sn!==0);if((nt&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=wf,$u(o,u,w,A,D,j),o===ft&&(Ve=ft=null,$e=0),lo=l,Oi=o,co=u,Ad=w,Cd=m,xv=h,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,v3(ue,function(){return Mv(),null})):(o.callbackNode=null,o.callbackPriority=0),h=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||h){h=S.T,S.T=null,m=k.p,k.p=2,A=nt,nt|=4;try{a3(o,l,u)}finally{nt=A,k.p=m,S.T=h}}sn=1,Rv(),Nv(),Iv()}}function Rv(){if(sn===1){sn=0;var o=Oi,l=lo,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=S.T,S.T=null;var h=k.p;k.p=2;var m=nt;nt|=4;try{dv(l,o);var w=zd,A=yp(o.containerInfo),D=w.focusedElem,j=w.selectionRange;if(A!==D&&D&&D.ownerDocument&&mp(D.ownerDocument.documentElement,D)){if(j!==null&&gf(D)){var Y=j.start,oe=j.end;if(oe===void 0&&(oe=Y),"selectionStart"in D)D.selectionStart=Y,D.selectionEnd=Math.min(oe,D.value.length);else{var le=D.ownerDocument||document,J=le&&le.defaultView||window;if(J.getSelection){var ee=J.getSelection(),Re=D.textContent.length,Ce=Math.min(j.start,Re),lt=j.end===void 0?Ce:Math.min(j.end,Re);!ee.extend&&Ce>lt&&(A=lt,lt=Ce,Ce=A);var $=vp(D,Ce),z=vp(D,lt);if($&&z&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==z.node||ee.focusOffset!==z.offset)){var X=le.createRange();X.setStart($.node,$.offset),ee.removeAllRanges(),Ce>lt?(ee.addRange(X),ee.extend(z.node,z.offset)):(X.setEnd(z.node,z.offset),ee.addRange(X))}}}}for(le=[],ee=D;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<le.length;D++){var se=le[D];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Uc=!!Vd,zd=Vd=null}finally{nt=m,k.p=h,S.T=u}}o.current=l,sn=2}}function Nv(){if(sn===2){sn=0;var o=Oi,l=lo,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=S.T,S.T=null;var h=k.p;k.p=2;var m=nt;nt|=4;try{lv(o,l.alternate,l)}finally{nt=m,k.p=h,S.T=u}}sn=3}}function Iv(){if(sn===4||sn===3){sn=0,Na();var o=Oi,l=lo,u=co,h=xv;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?sn=5:(sn=0,lo=Oi=null,kv(o,o.pendingLanes));var m=o.pendingLanes;if(m===0&&(Ti=null),Xu(u),l=l.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Ge,l,void 0,(l.current.flags&128)===128)}catch{}if(h!==null){l=S.T,m=k.p,k.p=2,S.T=null;try{for(var w=o.onRecoverableError,A=0;A<h.length;A++){var D=h[A];w(D.value,{componentStack:D.stack})}}finally{S.T=l,k.p=m}}(co&3)!==0&&Oc(),Tr(o),m=o.pendingLanes,(u&4194090)!==0&&(m&42)!==0?o===Td?js++:(js=0,Td=o):js=0,Bs(0)}}function kv(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,vs(l)))}function Oc(o){return Rv(),Nv(),Iv(),Mv()}function Mv(){if(sn!==5)return!1;var o=Oi,l=Ad;Ad=0;var u=Xu(co),h=S.T,m=k.p;try{k.p=32>u?32:u,S.T=null,u=Cd,Cd=null;var w=Oi,A=co;if(sn=0,lo=Oi=null,co=0,(nt&6)!==0)throw Error(r(331));var D=nt;if(nt|=4,mv(w.current),pv(w,w.current,A,u),nt=D,Bs(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Ge,w)}catch{}return!0}finally{k.p=m,S.T=h,kv(o,l)}}function Pv(o,l,u){l=Zn(u,l),l=ad(o.stateNode,l,2),o=yi(o,l,2),o!==null&&(Wi(o,2),Tr(o))}function ut(o,l,u){if(o.tag===3)Pv(o,o,u);else for(;l!==null;){if(l.tag===3){Pv(l,o,u);break}else if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ti===null||!Ti.has(h))){o=Zn(u,o),u=Fg(2),h=yi(l,u,2),h!==null&&(Ug(u,h,l,o),Wi(h,2),Tr(h));break}}l=l.return}}function Nd(o,l,u){var h=o.pingCache;if(h===null){h=o.pingCache=new l3;var m=new Set;h.set(l,m)}else m=h.get(l),m===void 0&&(m=new Set,h.set(l,m));m.has(u)||(_d=!0,m.add(u),o=h3.bind(null,o,l,u),l.then(o,o))}function h3(o,l,u){var h=o.pingCache;h!==null&&h.delete(l),o.pingedLanes|=o.suspendedLanes&u,o.warmLanes&=~u,ft===o&&($e&u)===u&&(Rt===4||Rt===3&&($e&62914560)===$e&&300>bn()-Sd?(nt&2)===0&&uo(o,0):bd|=u,so===$e&&(so=0)),Tr(o)}function jv(o,l){l===0&&(l=Jo()),o=qa(o,l),o!==null&&(Wi(o,l),Tr(o))}function p3(o){var l=o.memoizedState,u=0;l!==null&&(u=l.retryLane),jv(o,u)}function g3(o,l){var u=0;switch(o.tag){case 13:var h=o.stateNode,m=o.memoizedState;m!==null&&(u=m.retryLane);break;case 19:h=o.stateNode;break;case 22:h=o.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(l),jv(o,u)}function v3(o,l){return _r(o,l)}var Dc=null,ho=null,Id=!1,Rc=!1,kd=!1,da=0;function Tr(o){o!==ho&&o.next===null&&(ho===null?Dc=ho=o:ho=ho.next=o),Rc=!0,Id||(Id=!0,y3())}function Bs(o,l){if(!kd&&Rc){kd=!0;do for(var u=!1,h=Dc;h!==null;){if(o!==0){var m=h.pendingLanes;if(m===0)var w=0;else{var A=h.suspendedLanes,D=h.pingedLanes;w=(1<<31-be(42|o)+1)-1,w&=m&~(A&~D),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,Uv(h,w))}else w=$e,w=En(h,h===ft?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||fi(h,w)||(u=!0,Uv(h,w));h=h.next}while(u);kd=!1}}function m3(){Bv()}function Bv(){Rc=Id=!1;var o=0;da!==0&&(C3()&&(o=da),da=0);for(var l=bn(),u=null,h=Dc;h!==null;){var m=h.next,w=Lv(h,l);w===0?(h.next=null,u===null?Dc=m:u.next=m,m===null&&(ho=u)):(u=h,(o!==0||(w&3)!==0)&&(Rc=!0)),h=m}Bs(o)}function Lv(o,l){for(var u=o.suspendedLanes,h=o.pingedLanes,m=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var A=31-be(w),D=1<<A,j=m[A];j===-1?((D&u)===0||(D&h)!==0)&&(m[A]=jl(D,l)):j<=l&&(o.expiredLanes|=D),w&=~D}if(l=ft,u=$e,u=En(o,o===l?u:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h=o.callbackNode,u===0||o===l&&(rt===2||rt===9)||o.cancelPendingCommit!==null)return h!==null&&h!==null&&Br(h),o.callbackNode=null,o.callbackPriority=0;if((u&3)===0||fi(o,u)){if(l=u&-u,l===o.callbackPriority)return l;switch(h!==null&&Br(h),Xu(u)){case 2:case 8:u=q;break;case 32:u=ue;break;case 268435456:u=ye;break;default:u=ue}return h=Fv.bind(null,o),u=_r(u,h),o.callbackPriority=l,o.callbackNode=u,l}return h!==null&&h!==null&&Br(h),o.callbackPriority=2,o.callbackNode=null,2}function Fv(o,l){if(sn!==0&&sn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var u=o.callbackNode;if(Oc()&&o.callbackNode!==u)return null;var h=$e;return h=En(o,o===ft?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h===0?null:(_v(o,h,l),Lv(o,bn()),o.callbackNode!=null&&o.callbackNode===u?Fv.bind(null,o):null)}function Uv(o,l){if(Oc())return null;_v(o,l,!0)}function y3(){O3(function(){(nt&6)!==0?_r(Lr,m3):Bv()})}function Md(){return da===0&&(da=di()),da}function Vv(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Vl(""+o)}function zv(o,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,o.id&&u.setAttribute("form",o.id),l.parentNode.insertBefore(u,l),o=new FormData(o),u.parentNode.removeChild(u),o}function x3(o,l,u,h,m){if(l==="submit"&&u&&u.stateNode===m){var w=Vv((m[Nn]||null).action),A=h.submitter;A&&(l=(l=A[Nn]||null)?Vv(l.formAction):A.getAttribute("formAction"),l!==null&&(w=l,A=null));var D=new $l("action","action",null,h,m);o.push({event:D,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(da!==0){var j=A?zv(m,A):new FormData(m);ed(u,{pending:!0,data:j,method:m.method,action:w},null,j)}}else typeof w=="function"&&(D.preventDefault(),j=A?zv(m,A):new FormData(m),ed(u,{pending:!0,data:j,method:m.method,action:w},w,j))},currentTarget:m}]})}}for(var Pd=0;Pd<xf.length;Pd++){var jd=xf[Pd],w3=jd.toLowerCase(),_3=jd[0].toUpperCase()+jd.slice(1);ur(w3,"on"+_3)}ur(_p,"onAnimationEnd"),ur(bp,"onAnimationIteration"),ur(Ep,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(Lb,"onTransitionRun"),ur(Fb,"onTransitionStart"),ur(Ub,"onTransitionCancel"),ur(Sp,"onTransitionEnd"),ja("onMouseEnter",["mouseout","mouseover"]),ja("onMouseLeave",["mouseout","mouseover"]),ja("onPointerEnter",["pointerout","pointerover"]),ja("onPointerLeave",["pointerout","pointerover"]),Ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ls));function Hv(o,l){l=(l&4)!==0;for(var u=0;u<o.length;u++){var h=o[u],m=h.event;h=h.listeners;e:{var w=void 0;if(l)for(var A=h.length-1;0<=A;A--){var D=h[A],j=D.instance,Y=D.currentTarget;if(D=D.listener,j!==w&&m.isPropagationStopped())break e;w=D,m.currentTarget=Y;try{w(m)}catch(oe){mc(oe)}m.currentTarget=null,w=j}else for(A=0;A<h.length;A++){if(D=h[A],j=D.instance,Y=D.currentTarget,D=D.listener,j!==w&&m.isPropagationStopped())break e;w=D,m.currentTarget=Y;try{w(m)}catch(oe){mc(oe)}m.currentTarget=null,w=j}}}}function ze(o,l){var u=l[Yu];u===void 0&&(u=l[Yu]=new Set);var h=o+"__bubble";u.has(h)||(Gv(l,o,2,!1),u.add(h))}function Bd(o,l,u){var h=0;l&&(h|=4),Gv(u,o,h,l)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function Ld(o){if(!o[Nc]){o[Nc]=!0,B1.forEach(function(u){u!=="selectionchange"&&(b3.has(u)||Bd(u,!1,o),Bd(u,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Nc]||(l[Nc]=!0,Bd("selectionchange",!1,l))}}function Gv(o,l,u,h){switch(pm(l)){case 2:var m=W3;break;case 8:m=K3;break;default:m=Qd}u=m.bind(null,l,u,o),m=void 0,!of||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(m=!0),h?m!==void 0?o.addEventListener(l,u,{capture:!0,passive:m}):o.addEventListener(l,u,!0):m!==void 0?o.addEventListener(l,u,{passive:m}):o.addEventListener(l,u,!1)}function Fd(o,l,u,h,m){var w=h;if((l&1)===0&&(l&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var D=h.stateNode.containerInfo;if(D===m)break;if(A===4)for(A=h.return;A!==null;){var j=A.tag;if((j===3||j===4)&&A.stateNode.containerInfo===m)return;A=A.return}for(;D!==null;){if(A=ka(D),A===null)return;if(j=A.tag,j===5||j===6||j===26||j===27){h=w=A;continue e}D=D.parentNode}}h=h.return}Z1(function(){var Y=w,oe=rf(u),le=[];e:{var J=Ap.get(o);if(J!==void 0){var ee=$l,Re=o;switch(o){case"keypress":if(Hl(u)===0)break e;case"keydown":case"keyup":ee=vb;break;case"focusin":Re="focus",ee=uf;break;case"focusout":Re="blur",ee=uf;break;case"beforeblur":case"afterblur":ee=uf;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ep;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=ib;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=xb;break;case _p:case bp:case Ep:ee=sb;break;case Sp:ee=_b;break;case"scroll":case"scrollend":ee=nb;break;case"wheel":ee=Eb;break;case"copy":case"cut":case"paste":ee=cb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=np;break;case"toggle":case"beforetoggle":ee=Ab}var Ce=(l&4)!==0,lt=!Ce&&(o==="scroll"||o==="scrollend"),$=Ce?J!==null?J+"Capture":null:J;Ce=[];for(var z=Y,X;z!==null;){var se=z;if(X=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||X===null||$===null||(se=rs(z,$),se!=null&&Ce.push(Fs(z,se,X))),lt)break;z=z.return}0<Ce.length&&(J=new ee(J,Re,null,u,oe),le.push({event:J,listeners:Ce}))}}if((l&7)===0){e:{if(J=o==="mouseover"||o==="pointerover",ee=o==="mouseout"||o==="pointerout",J&&u!==nf&&(Re=u.relatedTarget||u.fromElement)&&(ka(Re)||Re[Ia]))break e;if((ee||J)&&(J=oe.window===oe?oe:(J=oe.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(Re=u.relatedTarget||u.toElement,ee=Y,Re=Re?ka(Re):null,Re!==null&&(lt=a(Re),Ce=Re.tag,Re!==lt||Ce!==5&&Ce!==27&&Ce!==6)&&(Re=null)):(ee=null,Re=Y),ee!==Re)){if(Ce=ep,se="onMouseLeave",$="onMouseEnter",z="mouse",(o==="pointerout"||o==="pointerover")&&(Ce=np,se="onPointerLeave",$="onPointerEnter",z="pointer"),lt=ee==null?J:ns(ee),X=Re==null?J:ns(Re),J=new Ce(se,z+"leave",ee,u,oe),J.target=lt,J.relatedTarget=X,se=null,ka(oe)===Y&&(Ce=new Ce($,z+"enter",Re,u,oe),Ce.target=X,Ce.relatedTarget=lt,se=Ce),lt=se,ee&&Re)t:{for(Ce=ee,$=Re,z=0,X=Ce;X;X=po(X))z++;for(X=0,se=$;se;se=po(se))X++;for(;0<z-X;)Ce=po(Ce),z--;for(;0<X-z;)$=po($),X--;for(;z--;){if(Ce===$||$!==null&&Ce===$.alternate)break t;Ce=po(Ce),$=po($)}Ce=null}else Ce=null;ee!==null&&$v(le,J,ee,Ce,!1),Re!==null&&lt!==null&&$v(le,lt,Re,Ce,!0)}}e:{if(J=Y?ns(Y):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var me=up;else if(lp(J))if(fp)me=Pb;else{me=kb;var Fe=Ib}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Y&&tf(Y.elementType)&&(me=up):me=Mb;if(me&&(me=me(o,Y))){cp(le,me,u,oe);break e}Fe&&Fe(o,J,Y),o==="focusout"&&Y&&J.type==="number"&&Y.memoizedProps.value!=null&&ef(J,"number",J.value)}switch(Fe=Y?ns(Y):window,o){case"focusin":(lp(Fe)||Fe.contentEditable==="true")&&(Ha=Fe,vf=Y,fs=null);break;case"focusout":fs=vf=Ha=null;break;case"mousedown":mf=!0;break;case"contextmenu":case"mouseup":case"dragend":mf=!1,xp(le,u,oe);break;case"selectionchange":if(Bb)break;case"keydown":case"keyup":xp(le,u,oe)}var _e;if(df)e:{switch(o){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else za?op(o,u)&&(Te="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(Te="onCompositionStart");Te&&(rp&&u.locale!=="ko"&&(za||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&za&&(_e=Q1()):(pi=oe,sf="value"in pi?pi.value:pi.textContent,za=!0)),Fe=Ic(Y,Te),0<Fe.length&&(Te=new tp(Te,o,null,u,oe),le.push({event:Te,listeners:Fe}),_e?Te.data=_e:(_e=sp(u),_e!==null&&(Te.data=_e)))),(_e=Tb?Ob(o,u):Db(o,u))&&(Te=Ic(Y,"onBeforeInput"),0<Te.length&&(Fe=new tp("onBeforeInput","beforeinput",null,u,oe),le.push({event:Fe,listeners:Te}),Fe.data=_e)),x3(le,o,Y,u,oe)}Hv(le,l)})}function Fs(o,l,u){return{instance:o,listener:l,currentTarget:u}}function Ic(o,l){for(var u=l+"Capture",h=[];o!==null;){var m=o,w=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||w===null||(m=rs(o,u),m!=null&&h.unshift(Fs(o,m,w)),m=rs(o,l),m!=null&&h.push(Fs(o,m,w))),o.tag===3)return h;o=o.return}return[]}function po(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function $v(o,l,u,h,m){for(var w=l._reactName,A=[];u!==null&&u!==h;){var D=u,j=D.alternate,Y=D.stateNode;if(D=D.tag,j!==null&&j===h)break;D!==5&&D!==26&&D!==27||Y===null||(j=Y,m?(Y=rs(u,w),Y!=null&&A.unshift(Fs(u,Y,j))):m||(Y=rs(u,w),Y!=null&&A.push(Fs(u,Y,j)))),u=u.return}A.length!==0&&o.push({event:l,listeners:A})}var E3=/\r\n?/g,S3=/\u0000|\uFFFD/g;function qv(o){return(typeof o=="string"?o:""+o).replace(E3,`
`).replace(S3,"")}function Xv(o,l){return l=qv(l),qv(o)===l}function kc(){}function st(o,l,u,h,m,w){switch(u){case"children":typeof h=="string"?l==="body"||l==="textarea"&&h===""||Fa(o,h):(typeof h=="number"||typeof h=="bigint")&&l!=="body"&&Fa(o,""+h);break;case"className":Ll(o,"class",h);break;case"tabIndex":Ll(o,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ll(o,u,h);break;case"style":W1(o,h,w);break;case"data":if(l!=="object"){Ll(o,"data",h);break}case"src":case"href":if(h===""&&(l!=="a"||u!=="href")){o.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(u);break}h=Vl(""+h),o.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){o.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(l!=="input"&&st(o,l,"name",m.name,m,null),st(o,l,"formEncType",m.formEncType,m,null),st(o,l,"formMethod",m.formMethod,m,null),st(o,l,"formTarget",m.formTarget,m,null)):(st(o,l,"encType",m.encType,m,null),st(o,l,"method",m.method,m,null),st(o,l,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(u);break}h=Vl(""+h),o.setAttribute(u,h);break;case"onClick":h!=null&&(o.onclick=kc);break;case"onScroll":h!=null&&ze("scroll",o);break;case"onScrollEnd":h!=null&&ze("scrollend",o);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(m.children!=null)throw Error(r(60));o.innerHTML=u}}break;case"multiple":o.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":o.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){o.removeAttribute("xlink:href");break}u=Vl(""+h),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,""+h):o.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,""):o.removeAttribute(u);break;case"capture":case"download":h===!0?o.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,h):o.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?o.setAttribute(u,h):o.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?o.removeAttribute(u):o.setAttribute(u,h);break;case"popover":ze("beforetoggle",o),ze("toggle",o),Bl(o,"popover",h);break;case"xlinkActuate":Fr(o,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Fr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Fr(o,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Fr(o,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Fr(o,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Fr(o,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Fr(o,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Fr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Fr(o,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Bl(o,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=eb.get(u)||u,Bl(o,u,h))}}function Ud(o,l,u,h,m,w){switch(u){case"style":W1(o,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(m.children!=null)throw Error(r(60));o.innerHTML=u}}break;case"children":typeof h=="string"?Fa(o,h):(typeof h=="number"||typeof h=="bigint")&&Fa(o,""+h);break;case"onScroll":h!=null&&ze("scroll",o);break;case"onScrollEnd":h!=null&&ze("scrollend",o);break;case"onClick":h!=null&&(o.onclick=kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!L1.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),l=u.slice(2,m?u.length-7:void 0),w=o[Nn]||null,w=w!=null?w[u]:null,typeof w=="function"&&o.removeEventListener(l,w,m),typeof h=="function")){typeof w!="function"&&w!==null&&(u in o?o[u]=null:o.hasAttribute(u)&&o.removeAttribute(u)),o.addEventListener(l,h,m);break e}u in o?o[u]=h:h===!0?o.setAttribute(u,""):Bl(o,u,h)}}}function ln(o,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",o),ze("load",o);var h=!1,m=!1,w;for(w in u)if(u.hasOwnProperty(w)){var A=u[w];if(A!=null)switch(w){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:st(o,l,w,A,u,null)}}m&&st(o,l,"srcSet",u.srcSet,u,null),h&&st(o,l,"src",u.src,u,null);return;case"input":ze("invalid",o);var D=w=A=m=null,j=null,Y=null;for(h in u)if(u.hasOwnProperty(h)){var oe=u[h];if(oe!=null)switch(h){case"name":m=oe;break;case"type":A=oe;break;case"checked":j=oe;break;case"defaultChecked":Y=oe;break;case"value":w=oe;break;case"defaultValue":D=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,l));break;default:st(o,l,h,oe,u,null)}}$1(o,w,D,j,Y,A,m,!1),Fl(o);return;case"select":ze("invalid",o),h=A=w=null;for(m in u)if(u.hasOwnProperty(m)&&(D=u[m],D!=null))switch(m){case"value":w=D;break;case"defaultValue":A=D;break;case"multiple":h=D;default:st(o,l,m,D,u,null)}l=w,u=A,o.multiple=!!h,l!=null?La(o,!!h,l,!1):u!=null&&La(o,!!h,u,!0);return;case"textarea":ze("invalid",o),w=m=h=null;for(A in u)if(u.hasOwnProperty(A)&&(D=u[A],D!=null))switch(A){case"value":h=D;break;case"defaultValue":m=D;break;case"children":w=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:st(o,l,A,D,u,null)}X1(o,h,m,w),Fl(o);return;case"option":for(j in u)if(u.hasOwnProperty(j)&&(h=u[j],h!=null))switch(j){case"selected":o.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:st(o,l,j,h,u,null)}return;case"dialog":ze("beforetoggle",o),ze("toggle",o),ze("cancel",o),ze("close",o);break;case"iframe":case"object":ze("load",o);break;case"video":case"audio":for(h=0;h<Ls.length;h++)ze(Ls[h],o);break;case"image":ze("error",o),ze("load",o);break;case"details":ze("toggle",o);break;case"embed":case"source":case"link":ze("error",o),ze("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in u)if(u.hasOwnProperty(Y)&&(h=u[Y],h!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:st(o,l,Y,h,u,null)}return;default:if(tf(l)){for(oe in u)u.hasOwnProperty(oe)&&(h=u[oe],h!==void 0&&Ud(o,l,oe,h,u,void 0));return}}for(D in u)u.hasOwnProperty(D)&&(h=u[D],h!=null&&st(o,l,D,h,u,null))}function A3(o,l,u,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,w=null,A=null,D=null,j=null,Y=null,oe=null;for(ee in u){var le=u[ee];if(u.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":j=le;default:h.hasOwnProperty(ee)||st(o,l,ee,null,h,le)}}for(var J in h){var ee=h[J];if(le=u[J],h.hasOwnProperty(J)&&(ee!=null||le!=null))switch(J){case"type":w=ee;break;case"name":m=ee;break;case"checked":Y=ee;break;case"defaultChecked":oe=ee;break;case"value":A=ee;break;case"defaultValue":D=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,l));break;default:ee!==le&&st(o,l,J,ee,h,le)}}Ju(o,A,D,j,Y,oe,w,m);return;case"select":ee=A=D=J=null;for(w in u)if(j=u[w],u.hasOwnProperty(w)&&j!=null)switch(w){case"value":break;case"multiple":ee=j;default:h.hasOwnProperty(w)||st(o,l,w,null,h,j)}for(m in h)if(w=h[m],j=u[m],h.hasOwnProperty(m)&&(w!=null||j!=null))switch(m){case"value":J=w;break;case"defaultValue":D=w;break;case"multiple":A=w;default:w!==j&&st(o,l,m,w,h,j)}l=D,u=A,h=ee,J!=null?La(o,!!u,J,!1):!!h!=!!u&&(l!=null?La(o,!!u,l,!0):La(o,!!u,u?[]:"",!1));return;case"textarea":ee=J=null;for(D in u)if(m=u[D],u.hasOwnProperty(D)&&m!=null&&!h.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:st(o,l,D,null,h,m)}for(A in h)if(m=h[A],w=u[A],h.hasOwnProperty(A)&&(m!=null||w!=null))switch(A){case"value":J=m;break;case"defaultValue":ee=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==w&&st(o,l,A,m,h,w)}q1(o,J,ee);return;case"option":for(var Re in u)if(J=u[Re],u.hasOwnProperty(Re)&&J!=null&&!h.hasOwnProperty(Re))switch(Re){case"selected":o.selected=!1;break;default:st(o,l,Re,null,h,J)}for(j in h)if(J=h[j],ee=u[j],h.hasOwnProperty(j)&&J!==ee&&(J!=null||ee!=null))switch(j){case"selected":o.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:st(o,l,j,J,h,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in u)J=u[Ce],u.hasOwnProperty(Ce)&&J!=null&&!h.hasOwnProperty(Ce)&&st(o,l,Ce,null,h,J);for(Y in h)if(J=h[Y],ee=u[Y],h.hasOwnProperty(Y)&&J!==ee&&(J!=null||ee!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,l));break;default:st(o,l,Y,J,h,ee)}return;default:if(tf(l)){for(var lt in u)J=u[lt],u.hasOwnProperty(lt)&&J!==void 0&&!h.hasOwnProperty(lt)&&Ud(o,l,lt,void 0,h,J);for(oe in h)J=h[oe],ee=u[oe],!h.hasOwnProperty(oe)||J===ee||J===void 0&&ee===void 0||Ud(o,l,oe,J,h,ee);return}}for(var $ in u)J=u[$],u.hasOwnProperty($)&&J!=null&&!h.hasOwnProperty($)&&st(o,l,$,null,h,J);for(le in h)J=h[le],ee=u[le],!h.hasOwnProperty(le)||J===ee||J==null&&ee==null||st(o,l,le,J,h,ee)}var Vd=null,zd=null;function Mc(o){return o.nodeType===9?o:o.ownerDocument}function Yv(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wv(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Hd(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Gd=null;function C3(){var o=window.event;return o&&o.type==="popstate"?o===Gd?!1:(Gd=o,!0):(Gd=null,!1)}var Kv=typeof setTimeout=="function"?setTimeout:void 0,T3=typeof clearTimeout=="function"?clearTimeout:void 0,Zv=typeof Promise=="function"?Promise:void 0,O3=typeof queueMicrotask=="function"?queueMicrotask:typeof Zv<"u"?function(o){return Zv.resolve(null).then(o).catch(D3)}:Kv;function D3(o){setTimeout(function(){throw o})}function Ri(o){return o==="head"}function Qv(o,l){var u=l,h=0,m=0;do{var w=u.nextSibling;if(o.removeChild(u),w&&w.nodeType===8)if(u=w.data,u==="/$"){if(0<h&&8>h){u=h;var A=o.ownerDocument;if(u&1&&Us(A.documentElement),u&2&&Us(A.body),u&4)for(u=A.head,Us(u),A=u.firstChild;A;){var D=A.nextSibling,j=A.nodeName;A[ts]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&A.rel.toLowerCase()==="stylesheet"||u.removeChild(A),A=D}}if(m===0){o.removeChild(w),Ys(l);return}m--}else u==="$"||u==="$?"||u==="$!"?m++:h=u.charCodeAt(0)-48;else h=0;u=w}while(u);Ys(l)}function $d(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":$d(u),Wu(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}o.removeChild(u)}}function R3(o,l,u,h){for(;o.nodeType===1;){var m=u;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!h&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(h){if(!o[ts])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==m.rel||o.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||o.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||o.getAttribute("title")!==(m.title==null?null:m.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(m.src==null?null:m.src)||o.getAttribute("type")!==(m.type==null?null:m.type)||o.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var w=m.name==null?null:""+m.name;if(m.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=dr(o.nextSibling),o===null)break}return null}function N3(o,l,u){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=dr(o.nextSibling),o===null))return null;return o}function qd(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function I3(o,l){var u=o.ownerDocument;if(o.data!=="$?"||u.readyState==="complete")l();else{var h=function(){l(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),o._reactRetry=h}}function dr(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var Xd=null;function Jv(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return o;l--}else u==="/$"&&l++}o=o.previousSibling}return null}function em(o,l,u){switch(l=Mc(u),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Us(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Wu(o)}var rr=new Map,tm=new Set;function Pc(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Jr=k.d;k.d={f:k3,r:M3,D:P3,C:j3,L:B3,m:L3,X:U3,S:F3,M:V3};function k3(){var o=Jr.f(),l=Cc();return o||l}function M3(o){var l=Ma(o);l!==null&&l.tag===5&&l.type==="form"?_g(l):Jr.r(o)}var go=typeof document>"u"?null:document;function nm(o,l,u){var h=go;if(h&&typeof l=="string"&&l){var m=Kn(l);m='link[rel="'+o+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),tm.has(m)||(tm.add(m),o={rel:o,crossOrigin:u,href:l},h.querySelector(m)===null&&(l=h.createElement("link"),ln(l,"link",o),Zt(l),h.head.appendChild(l)))}}function P3(o){Jr.D(o),nm("dns-prefetch",o,null)}function j3(o,l){Jr.C(o,l),nm("preconnect",o,l)}function B3(o,l,u){Jr.L(o,l,u);var h=go;if(h&&o&&l){var m='link[rel="preload"][as="'+Kn(l)+'"]';l==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+Kn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+Kn(u.imageSizes)+'"]')):m+='[href="'+Kn(o)+'"]';var w=m;switch(l){case"style":w=vo(o);break;case"script":w=mo(o)}rr.has(w)||(o=p({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:o,as:l},u),rr.set(w,o),h.querySelector(m)!==null||l==="style"&&h.querySelector(Vs(w))||l==="script"&&h.querySelector(zs(w))||(l=h.createElement("link"),ln(l,"link",o),Zt(l),h.head.appendChild(l)))}}function L3(o,l){Jr.m(o,l);var u=go;if(u&&o){var h=l&&typeof l.as=="string"?l.as:"script",m='link[rel="modulepreload"][as="'+Kn(h)+'"][href="'+Kn(o)+'"]',w=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=mo(o)}if(!rr.has(w)&&(o=p({rel:"modulepreload",href:o},l),rr.set(w,o),u.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(zs(w)))return}h=u.createElement("link"),ln(h,"link",o),Zt(h),u.head.appendChild(h)}}}function F3(o,l,u){Jr.S(o,l,u);var h=go;if(h&&o){var m=Pa(h).hoistableStyles,w=vo(o);l=l||"default";var A=m.get(w);if(!A){var D={loading:0,preload:null};if(A=h.querySelector(Vs(w)))D.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},u),(u=rr.get(w))&&Yd(o,u);var j=A=h.createElement("link");Zt(j),ln(j,"link",o),j._p=new Promise(function(Y,oe){j.onload=Y,j.onerror=oe}),j.addEventListener("load",function(){D.loading|=1}),j.addEventListener("error",function(){D.loading|=2}),D.loading|=4,jc(A,l,h)}A={type:"stylesheet",instance:A,count:1,state:D},m.set(w,A)}}}function U3(o,l){Jr.X(o,l);var u=go;if(u&&o){var h=Pa(u).hoistableScripts,m=mo(o),w=h.get(m);w||(w=u.querySelector(zs(m)),w||(o=p({src:o,async:!0},l),(l=rr.get(m))&&Wd(o,l),w=u.createElement("script"),Zt(w),ln(w,"link",o),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(m,w))}}function V3(o,l){Jr.M(o,l);var u=go;if(u&&o){var h=Pa(u).hoistableScripts,m=mo(o),w=h.get(m);w||(w=u.querySelector(zs(m)),w||(o=p({src:o,async:!0,type:"module"},l),(l=rr.get(m))&&Wd(o,l),w=u.createElement("script"),Zt(w),ln(w,"link",o),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(m,w))}}function rm(o,l,u,h){var m=(m=he.current)?Pc(m):null;if(!m)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=vo(u.href),u=Pa(m).hoistableStyles,h=u.get(l),h||(h={type:"style",instance:null,count:0,state:null},u.set(l,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){o=vo(u.href);var w=Pa(m).hoistableStyles,A=w.get(o);if(A||(m=m.ownerDocument||m,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,A),(w=m.querySelector(Vs(o)))&&!w._p&&(A.instance=w,A.state.loading=5),rr.has(o)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},rr.set(o,u),w||z3(m,o,u,A.state))),l&&h===null)throw Error(r(528,""));return A}if(l&&h!==null)throw Error(r(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=mo(u),u=Pa(m).hoistableScripts,h=u.get(l),h||(h={type:"script",instance:null,count:0,state:null},u.set(l,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function vo(o){return'href="'+Kn(o)+'"'}function Vs(o){return'link[rel="stylesheet"]['+o+"]"}function im(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function z3(o,l,u,h){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?h.loading=1:(l=o.createElement("link"),h.preload=l,l.addEventListener("load",function(){return h.loading|=1}),l.addEventListener("error",function(){return h.loading|=2}),ln(l,"link",u),Zt(l),o.head.appendChild(l))}function mo(o){return'[src="'+Kn(o)+'"]'}function zs(o){return"script[async]"+o}function am(o,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var h=o.querySelector('style[data-href~="'+Kn(u.href)+'"]');if(h)return l.instance=h,Zt(h),h;var m=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(o.ownerDocument||o).createElement("style"),Zt(h),ln(h,"style",m),jc(h,u.precedence,o),l.instance=h;case"stylesheet":m=vo(u.href);var w=o.querySelector(Vs(m));if(w)return l.state.loading|=4,l.instance=w,Zt(w),w;h=im(u),(m=rr.get(m))&&Yd(h,m),w=(o.ownerDocument||o).createElement("link"),Zt(w);var A=w;return A._p=new Promise(function(D,j){A.onload=D,A.onerror=j}),ln(w,"link",h),l.state.loading|=4,jc(w,u.precedence,o),l.instance=w;case"script":return w=mo(u.src),(m=o.querySelector(zs(w)))?(l.instance=m,Zt(m),m):(h=u,(m=rr.get(w))&&(h=p({},u),Wd(h,m)),o=o.ownerDocument||o,m=o.createElement("script"),Zt(m),ln(m,"link",h),o.head.appendChild(m),l.instance=m);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(h=l.instance,l.state.loading|=4,jc(h,u.precedence,o));return l.instance}function jc(o,l,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,w=m,A=0;A<h.length;A++){var D=h[A];if(D.dataset.precedence===l)w=D;else if(w!==m)break}w?w.parentNode.insertBefore(o,w.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(o,l.firstChild))}function Yd(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Wd(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Bc=null;function om(o,l,u){if(Bc===null){var h=new Map,m=Bc=new Map;m.set(u,h)}else m=Bc,h=m.get(u),h||(h=new Map,m.set(u,h));if(h.has(o))return h;for(h.set(o,null),u=u.getElementsByTagName(o),m=0;m<u.length;m++){var w=u[m];if(!(w[ts]||w[vn]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var A=w.getAttribute(l)||"";A=o+A;var D=h.get(A);D?D.push(w):h.set(A,[w])}}return h}function sm(o,l,u){o=o.ownerDocument||o,o.head.insertBefore(u,l==="title"?o.querySelector("head > title"):null)}function H3(o,l,u){if(u===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function lm(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Hs=null;function G3(){}function $3(o,l,u){if(Hs===null)throw Error(r(475));var h=Hs;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=vo(u.href),w=o.querySelector(Vs(m));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(h.count++,h=Lc.bind(h),o.then(h,h)),l.state.loading|=4,l.instance=w,Zt(w);return}w=o.ownerDocument||o,u=im(u),(m=rr.get(m))&&Yd(u,m),w=w.createElement("link"),Zt(w);var A=w;A._p=new Promise(function(D,j){A.onload=D,A.onerror=j}),ln(w,"link",u),l.instance=w}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(h.count++,l=Lc.bind(h),o.addEventListener("load",l),o.addEventListener("error",l))}}function q3(){if(Hs===null)throw Error(r(475));var o=Hs;return o.stylesheets&&o.count===0&&Kd(o,o.stylesheets),0<o.count?function(l){var u=setTimeout(function(){if(o.stylesheets&&Kd(o,o.stylesheets),o.unsuspend){var h=o.unsuspend;o.unsuspend=null,h()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(u)}}:null}function Lc(){if(this.count--,this.count===0){if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Fc=null;function Kd(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Fc=new Map,l.forEach(X3,o),Fc=null,Lc.call(o))}function X3(o,l){if(!(l.state.loading&4)){var u=Fc.get(o);if(u)var h=u.get(null);else{u=new Map,Fc.set(o,u);for(var m=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<m.length;w++){var A=m[w];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),h=A)}h&&u.set(null,h)}m=l.instance,A=m.getAttribute("data-precedence"),w=u.get(A)||h,w===h&&u.set(null,m),u.set(A,m),this.count++,h=Lc.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),w?w.parentNode.insertBefore(m,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(m,o.firstChild)),l.state.loading|=4}}var Gs={$$typeof:O,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function Y3(o,l,u,h,m,w,A,D){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=es(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=es(0),this.hiddenUpdates=es(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=w,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function cm(o,l,u,h,m,w,A,D,j,Y,oe,le){return o=new Y3(o,l,u,A,D,j,Y,le),l=1,w===!0&&(l|=24),w=Vn(3,null,null,l),o.current=w,w.stateNode=o,l=Nf(),l.refCount++,o.pooledCache=l,l.refCount++,w.memoizedState={element:h,isDehydrated:u,cache:l},Pf(w),o}function um(o){return o?(o=Xa,o):Xa}function fm(o,l,u,h,m,w){m=um(m),h.context===null?h.context=m:h.pendingContext=m,h=mi(l),h.payload={element:u},w=w===void 0?null:w,w!==null&&(h.callback=w),u=yi(o,h,l),u!==null&&(qn(u,o,l),ws(u,o,l))}function dm(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<l?u:l}}function Zd(o,l){dm(o,l),(o=o.alternate)&&dm(o,l)}function hm(o){if(o.tag===13){var l=qa(o,67108864);l!==null&&qn(l,o,67108864),Zd(o,67108864)}}var Uc=!0;function W3(o,l,u,h){var m=S.T;S.T=null;var w=k.p;try{k.p=2,Qd(o,l,u,h)}finally{k.p=w,S.T=m}}function K3(o,l,u,h){var m=S.T;S.T=null;var w=k.p;try{k.p=8,Qd(o,l,u,h)}finally{k.p=w,S.T=m}}function Qd(o,l,u,h){if(Uc){var m=Jd(h);if(m===null)Fd(o,l,h,Vc,u),gm(o,h);else if(Q3(m,o,l,u,h))h.stopPropagation();else if(gm(o,h),l&4&&-1<Z3.indexOf(o)){for(;m!==null;){var w=Ma(m);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var A=Ae(w.pendingLanes);if(A!==0){var D=w;for(D.pendingLanes|=2,D.entangledLanes|=2;A;){var j=1<<31-be(A);D.entanglements[1]|=j,A&=~j}Tr(w),(nt&6)===0&&(Sc=bn()+500,Bs(0))}}break;case 13:D=qa(w,2),D!==null&&qn(D,w,2),Cc(),Zd(w,2)}if(w=Jd(h),w===null&&Fd(o,l,h,Vc,u),w===m)break;m=w}m!==null&&h.stopPropagation()}else Fd(o,l,h,null,u)}}function Jd(o){return o=rf(o),eh(o)}var Vc=null;function eh(o){if(Vc=null,o=ka(o),o!==null){var l=a(o);if(l===null)o=null;else{var u=l.tag;if(u===13){if(o=s(l),o!==null)return o;o=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Vc=o,null}function pm(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ui()){case Lr:return 2;case q:return 8;case ue:case ge:return 32;case ye:return 268435456;default:return 32}default:return 32}}var th=!1,Ni=null,Ii=null,ki=null,$s=new Map,qs=new Map,Mi=[],Z3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gm(o,l){switch(o){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":$s.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":qs.delete(l.pointerId)}}function Xs(o,l,u,h,m,w){return o===null||o.nativeEvent!==w?(o={blockedOn:l,domEventName:u,eventSystemFlags:h,nativeEvent:w,targetContainers:[m]},l!==null&&(l=Ma(l),l!==null&&hm(l)),o):(o.eventSystemFlags|=h,l=o.targetContainers,m!==null&&l.indexOf(m)===-1&&l.push(m),o)}function Q3(o,l,u,h,m){switch(l){case"focusin":return Ni=Xs(Ni,o,l,u,h,m),!0;case"dragenter":return Ii=Xs(Ii,o,l,u,h,m),!0;case"mouseover":return ki=Xs(ki,o,l,u,h,m),!0;case"pointerover":var w=m.pointerId;return $s.set(w,Xs($s.get(w)||null,o,l,u,h,m)),!0;case"gotpointercapture":return w=m.pointerId,qs.set(w,Xs(qs.get(w)||null,o,l,u,h,m)),!0}return!1}function vm(o){var l=ka(o.target);if(l!==null){var u=a(l);if(u!==null){if(l=u.tag,l===13){if(l=s(u),l!==null){o.blockedOn=l,$_(o.priority,function(){if(u.tag===13){var h=$n();h=qu(h);var m=qa(u,h);m!==null&&qn(m,u,h),Zd(u,h)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function zc(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var u=Jd(o.nativeEvent);if(u===null){u=o.nativeEvent;var h=new u.constructor(u.type,u);nf=h,u.target.dispatchEvent(h),nf=null}else return l=Ma(u),l!==null&&hm(l),o.blockedOn=u,!1;l.shift()}return!0}function mm(o,l,u){zc(o)&&u.delete(l)}function J3(){th=!1,Ni!==null&&zc(Ni)&&(Ni=null),Ii!==null&&zc(Ii)&&(Ii=null),ki!==null&&zc(ki)&&(ki=null),$s.forEach(mm),qs.forEach(mm)}function Hc(o,l){o.blockedOn===l&&(o.blockedOn=null,th||(th=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,J3)))}var Gc=null;function ym(o){Gc!==o&&(Gc=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Gc===o&&(Gc=null);for(var l=0;l<o.length;l+=3){var u=o[l],h=o[l+1],m=o[l+2];if(typeof h!="function"){if(eh(h||u)===null)continue;break}var w=Ma(u);w!==null&&(o.splice(l,3),l-=3,ed(w,{pending:!0,data:m,method:u.method,action:h},h,m))}}))}function Ys(o){function l(j){return Hc(j,o)}Ni!==null&&Hc(Ni,o),Ii!==null&&Hc(Ii,o),ki!==null&&Hc(ki,o),$s.forEach(l),qs.forEach(l);for(var u=0;u<Mi.length;u++){var h=Mi[u];h.blockedOn===o&&(h.blockedOn=null)}for(;0<Mi.length&&(u=Mi[0],u.blockedOn===null);)vm(u),u.blockedOn===null&&Mi.shift();if(u=(o.ownerDocument||o).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var m=u[h],w=u[h+1],A=m[Nn]||null;if(typeof w=="function")A||ym(u);else if(A){var D=null;if(w&&w.hasAttribute("formAction")){if(m=w,A=w[Nn]||null)D=A.formAction;else if(eh(m)!==null)continue}else D=A.action;typeof D=="function"?u[h+1]=D:(u.splice(h,3),h-=3),ym(u)}}}function nh(o){this._internalRoot=o}$c.prototype.render=nh.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var u=l.current,h=$n();fm(u,h,o,l,null,null)},$c.prototype.unmount=nh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;fm(o.current,2,null,o,null,null),Cc(),l[Ia]=null}};function $c(o){this._internalRoot=o}$c.prototype.unstable_scheduleHydration=function(o){if(o){var l=P1();o={blockedOn:null,target:o,priority:l};for(var u=0;u<Mi.length&&l!==0&&l<Mi[u].priority;u++);Mi.splice(u,0,o),u===0&&vm(o)}};var xm=e.version;if(xm!=="19.1.1")throw Error(r(527,xm,"19.1.1"));k.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=f(l),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var eE={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{Ge=qc.inject(eE),Ze=qc}catch{}}return Ks.createRoot=function(o,l){if(!i(o))throw Error(r(299));var u=!1,h="",m=Pg,w=jg,A=Bg,D=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks)),l=cm(o,1,!1,null,null,u,h,m,w,A,D,null),o[Ia]=l.current,Ld(o),new nh(l)},Ks.hydrateRoot=function(o,l,u){if(!i(o))throw Error(r(299));var h=!1,m="",w=Pg,A=jg,D=Bg,j=null,Y=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(j=u.unstable_transitionCallbacks),u.formState!==void 0&&(Y=u.formState)),l=cm(o,1,!0,l,u??null,h,m,w,A,D,j,Y),l.context=um(null),u=l.current,h=$n(),h=qu(h),m=mi(h),m.callback=null,yi(u,m,h),u=h,l.current.lanes=u,Wi(l,u),Tr(l),o[Ia]=l.current,Ld(o),new $c(l)},Ks.version="19.1.1",Ks}var Dm;function dE(){if(Dm)return ah.exports;Dm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ah.exports=fE(),ah.exports}var hE=dE();/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Rm="popstate";function pE(n={}){function e(i,a){let{pathname:s="/",search:c="",hash:f=""}=Da(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),Gh("",{pathname:s,search:c,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let s=i.document.querySelector("base"),c="";if(s&&s.getAttribute("href")){let f=i.location.href,d=f.indexOf("#");c=d===-1?f:f.slice(0,d)}return c+"#"+(typeof a=="string"?a:ml(a))}function r(i,a){wr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return vE(e,t,r,n)}function Ct(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gE(){return Math.random().toString(36).substring(2,10)}function Nm(n,e){return{usr:n.state,key:n.key,idx:e}}function Gh(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Da(e):e,state:t,key:e&&e.key||r||gE()}}function ml({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Da(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function vE(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,c="POP",f=null,d=p();d==null&&(d=0,s.replaceState({...s.state,idx:d},""));function p(){return(s.state||{idx:null}).idx}function g(){c="POP";let C=p(),b=C==null?null:C-d;d=C,f&&f({action:c,location:E.location,delta:b})}function y(C,b){c="PUSH";let T=Gh(E.location,C,b);t&&t(T,C),d=p()+1;let O=Nm(T,d),I=E.createHref(T);try{s.pushState(O,"",I)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(I)}a&&f&&f({action:c,location:E.location,delta:1})}function x(C,b){c="REPLACE";let T=Gh(E.location,C,b);t&&t(T,C),d=p();let O=Nm(T,d),I=E.createHref(T);s.replaceState(O,"",I),a&&f&&f({action:c,location:E.location,delta:0})}function _(C){return mE(C)}let E={get action(){return c},get location(){return n(i,s)},listen(C){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(Rm,g),f=C,()=>{i.removeEventListener(Rm,g),f=null}},createHref(C){return e(i,C)},createURL:_,encodeLocation(C){let b=_(C);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:y,replace:x,go(C){return s.go(C)}};return E}function mE(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:ml(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function o2(n,e,t="/"){return yE(n,e,t,!1)}function yE(n,e,t,r){let i=typeof e=="string"?Da(e):e,a=ii(i.pathname||"/",t);if(a==null)return null;let s=s2(n);xE(s);let c=null;for(let f=0;c==null&&f<s.length;++f){let d=RE(a);c=OE(s[f],d,r)}return c}function s2(n,e=[],t=[],r=""){let i=(a,s,c)=>{let f={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};f.relativePath.startsWith("/")&&(Ct(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let d=ni([r,f.relativePath]),p=t.concat(f);a.children&&a.children.length>0&&(Ct(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),s2(a.children,e,p,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:CE(d,a.index),routesMeta:p})};return n.forEach((a,s)=>{if(a.path===""||!a.path?.includes("?"))i(a,s);else for(let c of l2(a.path))i(a,s,c)}),e}function l2(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=l2(r.join("/")),c=[];return c.push(...s.map(f=>f===""?a:[a,f].join("/"))),i&&c.push(...s),c.map(f=>n.startsWith("/")&&f===""?"/":f)}function xE(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:TE(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var wE=/^:[\w-]+$/,_E=3,bE=2,EE=1,SE=10,AE=-2,Im=n=>n==="*";function CE(n,e){let t=n.split("/"),r=t.length;return t.some(Im)&&(r+=AE),e&&(r+=bE),t.filter(i=>!Im(i)).reduce((i,a)=>i+(wE.test(a)?_E:a===""?EE:SE),r)}function TE(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function OE(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",s=[];for(let c=0;c<r.length;++c){let f=r[c],d=c===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=xu({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},p),y=f.route;if(!g&&d&&t&&!r[r.length-1].route.index&&(g=xu({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),s.push({params:i,pathname:ni([a,g.pathname]),pathnameBase:ME(ni([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=ni([a,g.pathnameBase]))}return s}function xu(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=DE(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:p,isOptional:g},y)=>{if(p==="*"){let _=c[y]||"";s=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const x=c[y];return g&&!x?d[p]=void 0:d[p]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:s,pattern:n}}function DE(n,e=!1,t=!0){wr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,c,f)=>(r.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function RE(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ii(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function NE(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Da(n):n;return{pathname:t?t.startsWith("/")?t:IE(t,e):e,search:PE(r),hash:jE(i)}}function IE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function ch(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kE(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function c2(n){let e=kE(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function u2(n,e,t,r=!1){let i;typeof n=="string"?i=Da(n):(i={...n},Ct(!i.pathname||!i.pathname.includes("?"),ch("?","pathname","search",i)),Ct(!i.pathname||!i.pathname.includes("#"),ch("#","pathname","hash",i)),Ct(!i.search||!i.search.includes("#"),ch("#","search","hash",i)));let a=n===""||i.pathname==="",s=a?"/":i.pathname,c;if(s==null)c=t;else{let g=e.length-1;if(!r&&s.startsWith("..")){let y=s.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}c=g>=0?e[g]:"/"}let f=NE(i,c),d=s&&s!=="/"&&s.endsWith("/"),p=(a||s===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(d||p)&&(f.pathname+="/"),f}var ni=n=>n.join("/").replace(/\/\/+/g,"/"),ME=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),PE=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jE=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function BE(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var f2=["POST","PUT","PATCH","DELETE"];new Set(f2);var LE=["GET",...f2];new Set(LE);var qo=N.createContext(null);qo.displayName="DataRouter";var Mu=N.createContext(null);Mu.displayName="DataRouterState";N.createContext(!1);var d2=N.createContext({isTransitioning:!1});d2.displayName="ViewTransition";var FE=N.createContext(new Map);FE.displayName="Fetchers";var UE=N.createContext(null);UE.displayName="Await";var jr=N.createContext(null);jr.displayName="Navigation";var Al=N.createContext(null);Al.displayName="Location";var si=N.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var P0=N.createContext(null);P0.displayName="RouteError";function VE(n,{relative:e}={}){Ct(Cl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=N.useContext(jr),{hash:i,pathname:a,search:s}=Tl(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:ni([t,a])),r.createHref({pathname:c,search:s,hash:i})}function Cl(){return N.useContext(Al)!=null}function li(){return Ct(Cl(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Al).location}var h2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function p2(n){N.useContext(jr).static||N.useLayoutEffect(n)}function Pu(){let{isDataRoute:n}=N.useContext(si);return n?eS():zE()}function zE(){Ct(Cl(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(qo),{basename:e,navigator:t}=N.useContext(jr),{matches:r}=N.useContext(si),{pathname:i}=li(),a=JSON.stringify(c2(r)),s=N.useRef(!1);return p2(()=>{s.current=!0}),N.useCallback((f,d={})=>{if(wr(s.current,h2),!s.current)return;if(typeof f=="number"){t.go(f);return}let p=u2(f,JSON.parse(a),i,d.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ni([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,a,i,n])}N.createContext(null);function Tl(n,{relative:e}={}){let{matches:t}=N.useContext(si),{pathname:r}=li(),i=JSON.stringify(c2(t));return N.useMemo(()=>u2(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function HE(n,e){return g2(n,e)}function g2(n,e,t,r){Ct(Cl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=N.useContext(jr),{matches:a}=N.useContext(si),s=a[a.length-1],c=s?s.params:{},f=s?s.pathname:"/",d=s?s.pathnameBase:"/",p=s&&s.route;{let b=p&&p.path||"";v2(f,!p||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let g=li(),y;if(e){let b=typeof e=="string"?Da(e):e;Ct(d==="/"||b.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${b.pathname}" was given in the \`location\` prop.`),y=b}else y=g;let x=y.pathname||"/",_=x;if(d!=="/"){let b=d.replace(/^\//,"").split("/");_="/"+x.replace(/^\//,"").split("/").slice(b.length).join("/")}let E=o2(n,{pathname:_});wr(p||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),wr(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=YE(E&&E.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:ni([d,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:ni([d,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,t,r);return e&&C?N.createElement(Al.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},C):C}function GE(){let n=JE(),e=BE(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",n),s=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:a},"ErrorBoundary")," or"," ",N.createElement("code",{style:a},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:i},t):null,s)}var $E=N.createElement(GE,null),qE=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?N.createElement(si.Provider,{value:this.props.routeContext},N.createElement(P0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XE({routeContext:n,match:e,children:t}){let r=N.useContext(qo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(si.Provider,{value:n},t)}function YE(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t?.errors;if(a!=null){let f=i.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);Ct(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let s=!1,c=-1;if(t)for(let f=0;f<i.length;f++){let d=i[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:p,errors:g}=t,y=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){s=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((f,d,p)=>{let g,y=!1,x=null,_=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||$E,s&&(c<0&&p===0?(v2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,_=null):c===p&&(y=!0,_=d.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,p+1)),C=()=>{let b;return g?b=x:y?b=_:d.route.Component?b=N.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=f,N.createElement(XE,{match:d,routeContext:{outlet:f,matches:E,isDataRoute:t!=null},children:b})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?N.createElement(qE,{location:t.location,revalidation:t.revalidation,component:x,error:g,children:C(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):C()},null)}function j0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WE(n){let e=N.useContext(qo);return Ct(e,j0(n)),e}function KE(n){let e=N.useContext(Mu);return Ct(e,j0(n)),e}function ZE(n){let e=N.useContext(si);return Ct(e,j0(n)),e}function B0(n){let e=ZE(n),t=e.matches[e.matches.length-1];return Ct(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function QE(){return B0("useRouteId")}function JE(){let n=N.useContext(P0),e=KE("useRouteError"),t=B0("useRouteError");return n!==void 0?n:e.errors?.[t]}function eS(){let{router:n}=WE("useNavigate"),e=B0("useNavigate"),t=N.useRef(!1);return p2(()=>{t.current=!0}),N.useCallback(async(i,a={})=>{wr(t.current,h2),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var km={};function v2(n,e,t){!e&&!km[n]&&(km[n]=!0,wr(!1,t))}N.memo(tS);function tS({routes:n,future:e,state:t}){return g2(n,void 0,t,e)}function Or(n){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nS({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){Ct(!Cl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=n.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof t=="string"&&(t=Da(t));let{pathname:f="/",search:d="",hash:p="",state:g=null,key:y="default"}=t,x=N.useMemo(()=>{let _=ii(f,s);return _==null?null:{location:{pathname:_,search:d,hash:p,state:g,key:y},navigationType:r}},[s,f,d,p,g,y,r]);return wr(x!=null,`<Router basename="${s}"> is not able to match the URL "${f}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:N.createElement(jr.Provider,{value:c},N.createElement(Al.Provider,{children:e,value:x}))}function rS({children:n,location:e}){return HE($h(n),e)}function $h(n,e=[]){let t=[];return N.Children.forEach(n,(r,i)=>{if(!N.isValidElement(r))return;let a=[...e,i];if(r.type===N.Fragment){t.push.apply(t,$h(r.props.children,a));return}Ct(r.type===Or,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=$h(r.props.children,a)),t.push(s)}),t}var cu="get",uu="application/x-www-form-urlencoded";function ju(n){return n!=null&&typeof n.tagName=="string"}function iS(n){return ju(n)&&n.tagName.toLowerCase()==="button"}function aS(n){return ju(n)&&n.tagName.toLowerCase()==="form"}function oS(n){return ju(n)&&n.tagName.toLowerCase()==="input"}function sS(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function lS(n,e){return n.button===0&&(!e||e==="_self")&&!sS(n)}var Xc=null;function cS(){if(Xc===null)try{new FormData(document.createElement("form"),0),Xc=!1}catch{Xc=!0}return Xc}var uS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function uh(n){return n!=null&&!uS.has(n)?(wr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uu}"`),null):n}function fS(n,e){let t,r,i,a,s;if(aS(n)){let c=n.getAttribute("action");r=c?ii(c,e):null,t=n.getAttribute("method")||cu,i=uh(n.getAttribute("enctype"))||uu,a=new FormData(n)}else if(iS(n)||oS(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||c.getAttribute("action");if(r=f?ii(f,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||cu,i=uh(n.getAttribute("formenctype"))||uh(c.getAttribute("enctype"))||uu,a=new FormData(c,n),!cS()){let{name:d,type:p,value:g}=n;if(p==="image"){let y=d?`${d}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else d&&a.append(d,g)}}else{if(ju(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=cu,r=null,i=uu,s=n}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function L0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dS(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&ii(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function hS(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pS(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function gS(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await hS(a,t);return s.links?s.links():[]}return[]}));return xS(r.flat(1).filter(pS).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Mm(n,e,t,r,i,a){let s=(f,d)=>t[d]?f.route.id!==t[d].route.id:!0,c=(f,d)=>t[d].pathname!==f.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==f.params["*"];return a==="assets"?e.filter((f,d)=>s(f,d)||c(f,d)):a==="data"?e.filter((f,d)=>{let p=r.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(s(f,d)||c(f,d))return!0;if(f.route.shouldRevalidate){let g=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function vS(n,e,{includeHydrateFallback:t}={}){return mS(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function mS(n){return[...new Set(n)]}function yS(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function xS(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(yS(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function m2(){let n=N.useContext(qo);return L0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function wS(){let n=N.useContext(Mu);return L0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var F0=N.createContext(void 0);F0.displayName="FrameworkContext";function y2(){let n=N.useContext(F0);return L0(n,"You must render this element inside a <HydratedRouter> element"),n}function _S(n,e){let t=N.useContext(F0),[r,i]=N.useState(!1),[a,s]=N.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:d,onMouseLeave:p,onTouchStart:g}=e,y=N.useRef(null);N.useEffect(()=>{if(n==="render"&&s(!0),n==="viewport"){let E=b=>{b.forEach(T=>{s(T.isIntersecting)})},C=new IntersectionObserver(E,{threshold:.5});return y.current&&C.observe(y.current),()=>{C.disconnect()}}},[n]),N.useEffect(()=>{if(r){let E=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(E)}}},[r]);let x=()=>{i(!0)},_=()=>{i(!1),s(!1)};return t?n!=="intent"?[a,y,{}]:[a,y,{onFocus:Zs(c,x),onBlur:Zs(f,_),onMouseEnter:Zs(d,x),onMouseLeave:Zs(p,_),onTouchStart:Zs(g,x)}]:[!1,y,{}]}function Zs(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function bS({page:n,...e}){let{router:t}=m2(),r=N.useMemo(()=>o2(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?N.createElement(SS,{page:n,matches:r,...e}):null}function ES(n){let{manifest:e,routeModules:t}=y2(),[r,i]=N.useState([]);return N.useEffect(()=>{let a=!1;return gS(n,e,t).then(s=>{a||i(s)}),()=>{a=!0}},[n,e,t]),r}function SS({page:n,matches:e,...t}){let r=li(),{manifest:i,routeModules:a}=y2(),{basename:s}=m2(),{loaderData:c,matches:f}=wS(),d=N.useMemo(()=>Mm(n,e,f,i,r,"data"),[n,e,f,i,r]),p=N.useMemo(()=>Mm(n,e,f,i,r,"assets"),[n,e,f,i,r]),g=N.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let _=new Set,E=!1;if(e.forEach(b=>{let T=i.routes[b.route.id];!T||!T.hasLoader||(!d.some(O=>O.route.id===b.route.id)&&b.route.id in c&&a[b.route.id]?.shouldRevalidate||T.hasClientLoader?E=!0:_.add(b.route.id))}),_.size===0)return[];let C=dS(n,s,"data");return E&&_.size>0&&C.searchParams.set("_routes",e.filter(b=>_.has(b.route.id)).map(b=>b.route.id).join(",")),[C.pathname+C.search]},[s,c,r,i,d,e,n,a]),y=N.useMemo(()=>vS(p,i),[p,i]),x=ES(p);return N.createElement(N.Fragment,null,g.map(_=>N.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),y.map(_=>N.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),x.map(({key:_,link:E})=>N.createElement("link",{key:_,nonce:t.nonce,...E})))}function AS(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var x2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{x2&&(window.__reactRouterVersion="7.8.0")}catch{}function CS({basename:n,children:e,window:t}){let r=N.useRef();r.current==null&&(r.current=pE({window:t,v5Compat:!0}));let i=r.current,[a,s]=N.useState({action:i.action,location:i.location}),c=N.useCallback(f=>{N.startTransition(()=>s(f))},[s]);return N.useLayoutEffect(()=>i.listen(c),[i,c]),N.createElement(nS,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var w2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_2=N.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:c,target:f,to:d,preventScrollReset:p,viewTransition:g,...y},x){let{basename:_}=N.useContext(jr),E=typeof d=="string"&&w2.test(d),C,b=!1;if(typeof d=="string"&&E&&(C=d,x2))try{let V=new URL(window.location.href),Q=d.startsWith("//")?new URL(V.protocol+d):new URL(d),re=ii(Q.pathname,_);Q.origin===V.origin&&re!=null?d=re+Q.search+Q.hash:b=!0}catch{wr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=VE(d,{relative:i}),[O,I,P]=_S(r,y),F=DS(d,{replace:s,state:c,target:f,preventScrollReset:p,relative:i,viewTransition:g});function H(V){e&&e(V),V.defaultPrevented||F(V)}let G=N.createElement("a",{...y,...P,href:C||T,onClick:b||a?e:H,ref:AS(x,I),target:f,"data-discover":!E&&t==="render"?"true":void 0});return O&&!E?N.createElement(N.Fragment,null,G,N.createElement(bS,{page:T})):G});_2.displayName="Link";var Dr=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:c,children:f,...d},p){let g=Tl(s,{relative:d.relative}),y=li(),x=N.useContext(Mu),{navigator:_,basename:E}=N.useContext(jr),C=x!=null&&MS(g)&&c===!0,b=_.encodeLocation?_.encodeLocation(g).pathname:g.pathname,T=y.pathname,O=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(T=T.toLowerCase(),O=O?O.toLowerCase():null,b=b.toLowerCase()),O&&E&&(O=ii(O,E)||O);const I=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let P=T===b||!i&&T.startsWith(b)&&T.charAt(I)==="/",F=O!=null&&(O===b||!i&&O.startsWith(b)&&O.charAt(b.length)==="/"),H={isActive:P,isPending:F,isTransitioning:C},G=P?e:void 0,V;typeof r=="function"?V=r(H):V=[r,P?"active":null,F?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let Q=typeof a=="function"?a(H):a;return N.createElement(_2,{...d,"aria-current":G,className:V,ref:p,style:Q,to:s,viewTransition:c},typeof f=="function"?f(H):f)});Dr.displayName="NavLink";var TS=N.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:s=cu,action:c,onSubmit:f,relative:d,preventScrollReset:p,viewTransition:g,...y},x)=>{let _=IS(),E=kS(c,{relative:d}),C=s.toLowerCase()==="get"?"get":"post",b=typeof c=="string"&&w2.test(c),T=O=>{if(f&&f(O),O.defaultPrevented)return;O.preventDefault();let I=O.nativeEvent.submitter,P=I?.getAttribute("formmethod")||s;_(I||O.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:i,state:a,relative:d,preventScrollReset:p,viewTransition:g})};return N.createElement("form",{ref:x,method:C,action:E,onSubmit:r?f:T,...y,"data-discover":!b&&n==="render"?"true":void 0})});TS.displayName="Form";function OS(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b2(n){let e=N.useContext(qo);return Ct(e,OS(n)),e}function DS(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let c=Pu(),f=li(),d=Tl(n,{relative:a});return N.useCallback(p=>{if(lS(p,e)){p.preventDefault();let g=t!==void 0?t:ml(f)===ml(d);c(n,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[f,c,d,t,r,e,n,i,a,s])}var RS=0,NS=()=>`__${String(++RS)}__`;function IS(){let{router:n}=b2("useSubmit"),{basename:e}=N.useContext(jr),t=QE();return N.useCallback(async(r,i={})=>{let{action:a,method:s,encType:c,formData:f,body:d}=fS(r,e);if(i.navigate===!1){let p=i.fetcherKey||NS();await n.fetch(p,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||s,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||s,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function kS(n,{relative:e}={}){let{basename:t}=N.useContext(jr),r=N.useContext(si);Ct(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Tl(n||".",{relative:e})},s=li();if(n==null){a.search=s.search;let c=new URLSearchParams(a.search),f=c.getAll("index");if(f.some(p=>p==="")){c.delete("index"),f.filter(g=>g).forEach(g=>c.append("index",g));let p=c.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ni([t,a.pathname])),ml(a)}function MS(n,{relative:e}={}){let t=N.useContext(d2);Ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=b2("useViewTransitionState"),i=Tl(n,{relative:e});if(!t.isTransitioning)return!1;let a=ii(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=ii(t.nextLocation.pathname,r)||t.nextLocation.pathname;return xu(i.pathname,s)!=null||xu(i.pathname,a)!=null}const PS="modulepreload",jS=function(n){return"/IARE-Canteen-Web/"+n},Pm={},Ol=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let f=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=s?.nonce||s?.getAttribute("nonce");i=f(t.map(d=>{if(d=jS(d),d in Pm)return;Pm[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":PS,p||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((x,_)=>{y.addEventListener("load",x),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return i.then(s=>{for(const c of s||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},BS=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Xo);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class U0 extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class LS extends U0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jm extends U0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Bm extends U0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qh;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(qh||(qh={}));var FS=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};class US{constructor(e,{headers:t={},customFetch:r,region:i=qh.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=BS(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return FS(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:s}=t;let c={},{region:f}=t;f||(f=this.region);const d=new URL(`${this.url}/${e}`);f&&f!=="any"&&(c["x-region"]=f,d.searchParams.set("forceFunctionRegion",f));let p;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",p=s):typeof s=="string"?(c["Content-Type"]="text/plain",p=s):typeof FormData<"u"&&s instanceof FormData?p=s:(c["Content-Type"]="application/json",p=JSON.stringify(s)));const g=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:p}).catch(E=>{throw new LS(E)}),y=g.headers.get("x-relay-error");if(y&&y==="true")throw new jm(g);if(!g.ok)throw new Bm(g);let x=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),_;return x==="application/json"?_=yield g.json():x==="application/octet-stream"?_=yield g.blob():x==="text/event-stream"?_=g:x==="multipart/form-data"?_=yield g.formData():_=yield g.text(),{data:_,error:null,response:g}}catch(i){return{data:null,error:i,response:i instanceof Bm||i instanceof jm?i.context:void 0}}})}}var tn={},yo={},xo={},wo={},_o={},bo={},VS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vo=VS();const zS=Vo.fetch,E2=Vo.fetch.bind(Vo),S2=Vo.Headers,HS=Vo.Request,GS=Vo.Response,Xo=Object.freeze(Object.defineProperty({__proto__:null,Headers:S2,Request:HS,Response:GS,default:E2,fetch:zS},Symbol.toStringTag,{value:"Module"})),$S=nE(Xo);var Yc={},Lm;function A2(){if(Lm)return Yc;Lm=1,Object.defineProperty(Yc,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Yc.default=n,Yc}var Fm;function C2(){if(Fm)return bo;Fm=1;var n=bo&&bo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(bo,"__esModule",{value:!0});const e=n($S),t=n(A2());class r{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,s){return this.headers=Object.assign({},this.headers),this.headers[a]=s,this}then(a,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let f=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var p,g,y;let x=null,_=null,E=null,C=d.status,b=d.statusText;if(d.ok){if(this.method!=="HEAD"){const P=await d.text();P===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=P:_=JSON.parse(P))}const O=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),I=(g=d.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");O&&I&&I.length>1&&(E=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(x={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,E=null,C=406,b="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const O=await d.text();try{x=JSON.parse(O),Array.isArray(x)&&d.status===404&&(_=[],x=null,C=200,b="OK")}catch{d.status===404&&O===""?(C=204,b="No Content"):x={message:O}}if(x&&this.isMaybeSingle&&(!((y=x?.details)===null||y===void 0)&&y.includes("0 rows"))&&(x=null,C=200,b="OK"),x&&this.shouldThrowOnError)throw new t.default(x)}return{error:x,data:_,count:E,status:C,statusText:b}});return this.shouldThrowOnError||(f=f.catch(d=>{var p,g,y;return{error:{message:`${(p=d?.name)!==null&&p!==void 0?p:"FetchError"}: ${d?.message}`,details:`${(g=d?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=d?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),f.then(a,s)}returns(){return this}overrideTypes(){return this}}return bo.default=r,bo}var Um;function T2(){if(Um)return _o;Um=1;var n=_o&&_o.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_o,"__esModule",{value:!0});const e=n(C2());class t extends e.default{select(i){let a=!1;const s=(i??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:a=!0,nullsFirst:s,foreignTable:c,referencedTable:f=c}={}){const d=f?`${f}.order`:"order",p=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${p?`${p},`:""}${i}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:s=a}={}){const c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,a,{foreignTable:s,referencedTable:c=s}={}){const f=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${i}`),this.url.searchParams.set(d,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:a=!1,settings:s=!1,buffers:c=!1,wal:f=!1,format:d="text"}={}){var p;const g=[i?"analyze":null,a?"verbose":null,s?"settings":null,c?"buffers":null,f?"wal":null].filter(Boolean).join("|"),y=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${y}"; options=${g};`,d==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return _o.default=t,_o}var Vm;function V0(){if(Vm)return wo;Vm=1;var n=wo&&wo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wo,"__esModule",{value:!0});const e=n(T2());class t extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const s=Array.from(new Set(a)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${s})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:s,type:c}={}){let f="";c==="plain"?f="pl":c==="phrase"?f="ph":c==="websearch"&&(f="w");const d=s===void 0?"":`(${s})`;return this.url.searchParams.append(i,`${f}fts${d}.${a}`),this}match(i){return Object.entries(i).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(i,a,s){return this.url.searchParams.append(i,`not.${a}.${s}`),this}or(i,{foreignTable:a,referencedTable:s=a}={}){const c=s?`${s}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,a,s){return this.url.searchParams.append(i,`${a}.${s}`),this}}return wo.default=t,wo}var zm;function O2(){if(zm)return xo;zm=1;var n=xo&&xo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xo,"__esModule",{value:!0});const e=n(V0());class t{constructor(i,{headers:a={},schema:s,fetch:c}){this.url=i,this.headers=a,this.schema=s,this.fetch=c}select(i,{head:a=!1,count:s}={}){const c=a?"HEAD":"GET";let f=!1;const d=(i??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",d),s&&(this.headers.Prefer=`count=${s}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:a,defaultToNull:s=!0}={}){const c="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),a&&f.push(`count=${a}`),s||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(i)){const d=i.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(d.length>0){const p=[...new Set(d)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:a,ignoreDuplicates:s=!1,count:c,defaultToNull:f=!0}={}){const d="POST",p=[`resolution=${s?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&p.push(this.headers.Prefer),c&&p.push(`count=${c}`),f||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(i)){const g=i.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(g.length>0){const y=[...new Set(g)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:a}={}){const s="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),this.headers.Prefer=c.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const a="DELETE",s=[];return i&&s.push(`count=${i}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return xo.default=t,xo}var Qs={},Js={},Hm;function qS(){return Hm||(Hm=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.version=void 0,Js.version="0.0.0-automated"),Js}var Gm;function XS(){if(Gm)return Qs;Gm=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.DEFAULT_HEADERS=void 0;const n=qS();return Qs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Qs}var $m;function YS(){if($m)return yo;$m=1;var n=yo&&yo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(yo,"__esModule",{value:!0});const e=n(O2()),t=n(V0()),r=XS();class i{constructor(s,{headers:c={},schema:f,fetch:d}={}){this.url=s,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),c),this.schemaName=f,this.fetch=d}from(s){const c=new URL(`${this.url}/${s}`);return new e.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new i(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,c={},{head:f=!1,get:d=!1,count:p}={}){let g;const y=new URL(`${this.url}/rpc/${s}`);let x;f||d?(g=f?"HEAD":"GET",Object.entries(c).filter(([E,C])=>C!==void 0).map(([E,C])=>[E,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([E,C])=>{y.searchParams.append(E,C)})):(g="POST",x=c);const _=Object.assign({},this.headers);return p&&(_.Prefer=`count=${p}`),new t.default({method:g,url:y,headers:_,schema:this.schemaName,body:x,fetch:this.fetch,allowEmpty:!1})}}return yo.default=i,yo}var qm;function WS(){if(qm)return tn;qm=1;var n=tn&&tn.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(tn,"__esModule",{value:!0}),tn.PostgrestError=tn.PostgrestBuilder=tn.PostgrestTransformBuilder=tn.PostgrestFilterBuilder=tn.PostgrestQueryBuilder=tn.PostgrestClient=void 0;const e=n(YS());tn.PostgrestClient=e.default;const t=n(O2());tn.PostgrestQueryBuilder=t.default;const r=n(V0());tn.PostgrestFilterBuilder=r.default;const i=n(T2());tn.PostgrestTransformBuilder=i.default;const a=n(C2());tn.PostgrestBuilder=a.default;const s=n(A2());return tn.PostgrestError=s.default,tn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:s.default},tn}var KS=WS();const ZS=a2(KS),{PostgrestClient:QS,PostgrestQueryBuilder:VI,PostgrestFilterBuilder:zI,PostgrestTransformBuilder:HI,PostgrestBuilder:GI,PostgrestError:$I}=ZS;class JS{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const eA="2.15.1",tA=`realtime-js/${eA}`,nA="1.0.0",Xh=1e4,rA=1e3,iA=100;var cl;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(cl||(cl={}));var Ht;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ht||(Ht={}));var vr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(vr||(vr={}));var Yh;(function(n){n.websocket="websocket"})(Yh||(Yh={}));var _a;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(_a||(_a={}));class aA{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const c=r.decode(e.slice(s,s+i));s=s+i;const f=r.decode(e.slice(s,s+a));s=s+a;const d=JSON.parse(r.decode(e.slice(s,e.byteLength)));return{ref:null,topic:c,event:f,payload:d}}}class D2{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var dt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(dt||(dt={}));const Xm=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,s)=>(a[s]=oA(s,n,e,i),a),{})},oA=(n,e,t,r)=>{const i=e.find(c=>c.name===n),a=i?.type,s=t[n];return a&&!r.includes(a)?R2(a,s):Wh(s)},R2=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return uA(e,t)}switch(n){case dt.bool:return sA(e);case dt.float4:case dt.float8:case dt.int2:case dt.int4:case dt.int8:case dt.numeric:case dt.oid:return lA(e);case dt.json:case dt.jsonb:return cA(e);case dt.timestamp:return fA(e);case dt.abstime:case dt.date:case dt.daterange:case dt.int4range:case dt.int8range:case dt.money:case dt.reltime:case dt.text:case dt.time:case dt.timestamptz:case dt.timetz:case dt.tsrange:case dt.tstzrange:return Wh(e);default:return Wh(e)}},Wh=n=>n,sA=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},lA=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},cA=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},uA=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let a;const s=n.slice(1,t);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(c=>R2(e,c))}return n},fA=n=>typeof n=="string"?n.replace(" ","T"):n,N2=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class fh{constructor(e,t,r={},i=Xh){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ym;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Ym||(Ym={}));class ul{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:s,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ul.syncState(this.state,i,a,s),this.pendingDiffs.forEach(f=>{this.state=ul.syncDiff(this.state,f,a,s)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ul.syncDiff(this.state,i,a,s),c())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const a=this.cloneDeep(e),s=this.transformState(t),c={},f={};return this.map(a,(d,p)=>{s[d]||(f[d]=p)}),this.map(s,(d,p)=>{const g=a[d];if(g){const y=p.map(C=>C.presence_ref),x=g.map(C=>C.presence_ref),_=p.filter(C=>x.indexOf(C.presence_ref)<0),E=g.filter(C=>y.indexOf(C.presence_ref)<0);_.length>0&&(c[d]=_),E.length>0&&(f[d]=E)}else c[d]=p}),this.syncDiff(a,{joins:c,leaves:f},r,i)}static syncDiff(e,t,r,i){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(c,f)=>{var d;const p=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(f),p.length>0){const g=e[c].map(x=>x.presence_ref),y=p.filter(x=>g.indexOf(x.presence_ref)<0);e[c].unshift(...y)}r(c,p,f)}),this.map(s,(c,f)=>{let d=e[c];if(!d)return;const p=f.map(g=>g.presence_ref);d=d.filter(g=>p.indexOf(g.presence_ref)<0),e[c]=d,i(c,d,f),d.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wm;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Wm||(Wm={}));var fl;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(fl||(fl={}));var ti;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ti||(ti={}));class z0{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new fh(this,vr.join,this.params,this.timeout),this.rejoinTimer=new D2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ht.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vr.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new ul(this),this.broadcastEndpointURL=N2(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ht.closed){const{config:{broadcast:a,presence:s,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[fl.PRESENCE]&&this.bindings[fl.PRESENCE].length>0,p={},g={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:d}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(ti.CHANNEL_ERROR,y)),this._onClose(()=>e?.(ti.CLOSED)),this.updateJoinPayload(Object.assign({config:g},p)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var x;if(this.socket.setAuth(),y===void 0){e?.(ti.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,E=(x=_?.length)!==null&&x!==void 0?x:0,C=[];for(let b=0;b<E;b++){const T=_[b],{filter:{event:O,schema:I,table:P,filter:F}}=T,H=y&&y[b];if(H&&H.event===O&&H.schema===I&&H.table===P&&H.filter===F)C.push(Object.assign(Object.assign({},T),{id:H.id}));else{this.unsubscribe(),this.state=Ht.errored,e?.(ti.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(ti.SUBSCRIBED);return}}).receive("error",y=>{this.state=Ht.errored,e?.(ti.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(ti.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Ht.joined&&e===fl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:s}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,c,f;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(c=(s=this.params)===null||s===void 0?void 0:s.config)===null||c===void 0?void 0:c.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ht.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new fh(this,vr.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ht.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),s}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new fh(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>iA){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,a;const s=e.toLocaleLowerCase(),{close:c,error:f,leave:d,join:p}=vr;if(r&&[c,f,d,p].indexOf(s)>=0&&r!==this._joinRef())return;let y=this._onMessage(s,t,r);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var _,E,C;return((_=x.filter)===null||_===void 0?void 0:_.event)==="*"||((C=(E=x.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===s}).map(x=>x.callback(y,r)):(a=this.bindings[s])===null||a===void 0||a.filter(x=>{var _,E,C,b,T,O;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in x){const I=x.id,P=(_=x.filter)===null||_===void 0?void 0:_.event;return I&&((E=t.ids)===null||E===void 0?void 0:E.includes(I))&&(P==="*"||P?.toLocaleLowerCase()===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const I=(T=(b=x?.filter)===null||b===void 0?void 0:b.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return I==="*"||I===((O=t?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===s}).map(x=>{if(typeof y=="object"&&"ids"in y){const _=y.data,{schema:E,table:C,commit_timestamp:b,type:T,errors:O}=_;y=Object.assign(Object.assign({},{schema:E,table:C,commit_timestamp:b,eventType:T,new:{},old:{},errors:O}),this._getPayloadRecords(_))}x.callback(y,r)})}_isClosed(){return this.state===Ht.closed}_isJoined(){return this.state===Ht.joined}_isJoining(){return this.state===Ht.joining}_isLeaving(){return this.state===Ht.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&z0.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vr.close,{},e)}_onError(e){this._on(vr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ht.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Xm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Xm(e.columns,e.old_record)),t}}const Km=()=>{},Wc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},dA=[1e3,2e3,5e3,1e4],hA=1e4,pA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gA{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xh,this.transport=null,this.heartbeatIntervalMs=Wc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Km,this.ref=0,this.reconnectTimer=null,this.logger=Km,this.conn=null,this.sendBuffer=[],this.serializer=new aA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...s)=>Ol(async()=>{const{default:c}=await Promise.resolve().then(()=>Xo);return{default:c}},void 0).then(({default:c})=>c(...s)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...s)=>a(...s)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Yh.websocket}`,this.httpEndpoint=N2(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=JS.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:nA}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case cl.connecting:return _a.Connecting;case cl.open:return _a.Open;case cl.closing:return _a.Closing;default:return _a.Closed}}isConnected(){return this.connectionState()===_a.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new z0(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:r,payload:i,ref:a}=e,s=()=>{this.encode(e,c=>{var f;(f=this.conn)===null||f===void 0||f.send(c)})};this.log("push",`${t} ${r} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(rA,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Wc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:s}=t,c=s?`(${s})`:"",f=a.status||"";this.log("receive",`${f} ${r} ${i} ${c}`.trim(),a),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,a,s)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(vr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([pA],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:tA};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(vr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new D2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,a,s,c,f,d;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Xh,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Wc.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=e?.accessToken)!==null&&s!==void 0?s:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(p=>dA[p-1]||hA),this.encode=(f=e?.encode)!==null&&f!==void 0?f:((p,g)=>g(JSON.stringify(p))),this.decode=(d=e?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class H0 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function qt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class vA extends H0{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Kh extends H0{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var mA=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};const I2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Xo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},yA=()=>mA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ol(()=>Promise.resolve().then(()=>Xo),void 0)).Response:Response}),Zh=n=>{if(Array.isArray(n))return n.map(t=>Zh(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Zh(r)}),e},xA=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ra=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};const dh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),wA=(n,e,t)=>Ra(void 0,void 0,void 0,function*(){const r=yield yA();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{const a=n.status||500,s=i?.statusCode||a+"";e(new vA(dh(i),a,s))}).catch(i=>{e(new Kh(dh(i),i))}):e(new Kh(dh(n),n))}),_A=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(xA(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Dl(n,e,t,r,i,a){return Ra(this,void 0,void 0,function*(){return new Promise((s,c)=>{n(t,_A(e,r,i,a)).then(f=>{if(!f.ok)throw f;return r?.noResolveJson?f:f.json()}).then(f=>s(f)).catch(f=>wA(f,c,r))})})}function wu(n,e,t,r){return Ra(this,void 0,void 0,function*(){return Dl(n,"GET",e,t,r)})}function Rr(n,e,t,r,i){return Ra(this,void 0,void 0,function*(){return Dl(n,"POST",e,r,i,t)})}function Qh(n,e,t,r,i){return Ra(this,void 0,void 0,function*(){return Dl(n,"PUT",e,r,i,t)})}function bA(n,e,t,r){return Ra(this,void 0,void 0,function*(){return Dl(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function k2(n,e,t,r,i){return Ra(this,void 0,void 0,function*(){return Dl(n,"DELETE",e,r,i,t)})}var An=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};const EA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class SA{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=I2(i)}uploadOrUpdate(e,t,r,i){return An(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},Zm),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const f=s.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),f&&a.append("metadata",this.encodeMetadata(f)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",s.cacheControl),f&&a.append("metadata",this.encodeMetadata(f))):(a=r,c["cache-control"]=`max-age=${s.cacheControl}`,c["content-type"]=s.contentType,f&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),i?.headers&&(c=Object.assign(Object.assign({},c),i.headers));const d=this._removeEmptyFolders(t),p=this._getFinalPath(d),g=yield(e=="PUT"?Qh:Rr)(this.fetch,`${this.url}/object/${p}`,a,Object.assign({headers:c},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:d,id:g.Id,fullPath:g.Key},error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}upload(e,t,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return An(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${s}`);c.searchParams.set("token",t);try{let f;const d=Object.assign({upsert:Zm.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",d.cacheControl)):(f=r,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType);const g=yield Qh(this.fetch,c.toString(),f,{headers:p});return{data:{path:a,fullPath:g.Key},error:null}}catch(f){if(qt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return An(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const a=yield Rr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+a.url),c=s.searchParams.get("token");if(!c)throw new H0("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:c},error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}update(e,t,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return An(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}copy(e,t,r){return An(this,void 0,void 0,function*(){try{return{data:{path:(yield Rr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return An(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Rr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return An(this,void 0,void 0,function*(){try{const i=yield Rr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}download(e,t){return An(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),s=a?`?${a}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield wu(this.fetch,`${this.url}/${i}/${c}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(qt(c))return{data:null,error:c};throw c}})}info(e){return An(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield wu(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Zh(r),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}exists(e){return An(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield bA(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(qt(r)&&r instanceof Kh){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const c=typeof t?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(t?.transform||{});f!==""&&i.push(f);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(e){return An(this,void 0,void 0,function*(){try{return{data:yield k2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}})}list(e,t,r){return An(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},EA),t),{prefix:e||""});return{data:yield Rr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}listV2(e,t){return An(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Rr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const AA="2.11.0",CA={"X-Client-Info":`storage-js/${AA}`};var Eo=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};class TA{constructor(e,t={},r,i){const a=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},CA),t),this.fetch=I2(r)}listBuckets(){return Eo(this,void 0,void 0,function*(){try{return{data:yield wu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(qt(e))return{data:null,error:e};throw e}})}getBucket(e){return Eo(this,void 0,void 0,function*(){try{return{data:yield wu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Eo(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Eo(this,void 0,void 0,function*(){try{return{data:yield Qh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Eo(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Eo(this,void 0,void 0,function*(){try{return{data:yield k2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}})}}class OA extends TA{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new SA(this.url,this.headers,e,this.fetch)}}const DA="2.55.0";let il="";typeof Deno<"u"?il="deno":typeof document<"u"?il="web":typeof navigator<"u"&&navigator.product==="ReactNative"?il="react-native":il="node";const RA={"X-Client-Info":`supabase-js-${il}/${DA}`},NA={headers:RA},IA={schema:"public"},kA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},MA={};var PA=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};const jA=n=>{let e;return n?e=n:typeof fetch>"u"?e=E2:e=fetch,(...t)=>e(...t)},BA=()=>typeof Headers>"u"?S2:Headers,LA=(n,e,t)=>{const r=jA(t),i=BA();return(a,s)=>PA(void 0,void 0,void 0,function*(){var c;const f=(c=yield e())!==null&&c!==void 0?c:n;let d=new i(s?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${f}`),r(a,Object.assign(Object.assign({},s),{headers:d}))})};var FA=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};function UA(n){return n.endsWith("/")?n:n+"/"}function VA(n,e){var t,r;const{db:i,auth:a,realtime:s,global:c}=n,{db:f,auth:d,realtime:p,global:g}=e,y={db:Object.assign(Object.assign({},f),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},p),s),storage:{},global:Object.assign(Object.assign(Object.assign({},g),c),{headers:Object.assign(Object.assign({},(t=g?.headers)!==null&&t!==void 0?t:{}),(r=c?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>FA(this,void 0,void 0,function*(){return""})};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}const M2="2.71.1",Do=30*1e3,Jh=3,hh=Jh*Do,zA="http://localhost:9999",HA="supabase.auth.token",GA={"X-Client-Info":`gotrue-js/${M2}`},e0="X-Supabase-Api-Version",P2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$A=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qA=600*1e3;class G0 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ke(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class XA extends G0{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function YA(n){return ke(n)&&n.name==="AuthApiError"}class j2 extends G0{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Xi extends G0{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Fi extends Xi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function WA(n){return ke(n)&&n.name==="AuthSessionMissingError"}class Kc extends Xi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zc extends Xi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qc extends Xi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function KA(n){return ke(n)&&n.name==="AuthImplicitGrantRedirectError"}class Qm extends Xi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class t0 extends Xi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ph(n){return ke(n)&&n.name==="AuthRetryableFetchError"}class Jm extends Xi{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class n0 extends Xi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ey=` 	
\r=`.split(""),ZA=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<ey.length;e+=1)n[ey[e].charCodeAt(0)]=-2;for(let e=0;e<_u.length;e+=1)n[_u[e].charCodeAt(0)]=e;return n})();function ty(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(_u[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(_u[r]),e.queuedBits-=6}}function B2(n,e,t){const r=ZA[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ny(n){const e=[],t=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{eC(s,r,t)};for(let s=0;s<n.length;s+=1)B2(n.charCodeAt(s),i,a);return e.join("")}function QA(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function JA(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}QA(r,e)}}function eC(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function tC(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)B2(n.charCodeAt(i),t,r);return new Uint8Array(e)}function nC(n){const e=[];return JA(n,t=>e.push(t)),new Uint8Array(e)}function rC(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>ty(i,t,r)),ty(null,t,r),e.join("")}function iC(n){return Math.round(Date.now()/1e3)+n}function aC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const pr=()=>typeof window<"u"&&typeof document<"u",ha={tested:!1,writable:!1},L2=()=>{if(!pr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ha.tested)return ha.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ha.tested=!0,ha.writable=!0}catch{ha.tested=!0,ha.writable=!1}return ha.writable};function oC(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const F2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Xo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},sC=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ro=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},pa=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ji=async(n,e)=>{await n.removeItem(e)};class Bu{constructor(){this.promise=new Bu.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Bu.promiseConstructor=Promise;function gh(n){const e=n.split(".");if(e.length!==3)throw new n0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!$A.test(e[r]))throw new n0("JWT not in base64url format");return{header:JSON.parse(ny(e[0])),payload:JSON.parse(ny(e[1])),signature:tC(e[2]),raw:{header:e[0],payload:e[1]}}}async function lC(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function cC(n,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await n(a);if(!e(a,null,s)){r(s);return}}catch(s){if(!e(a,s)){i(s);return}}})()})}function uC(n){return("0"+n.toString(16)).substr(-2)}function fC(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,uC).join("")}async function dC(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function hC(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await dC(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function So(n,e,t=!1){const r=fC();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await Ro(n,`${e}-code-verifier`,i);const a=await hC(r);return[a,r===a?"plain":"s256"]}const pC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gC(n){const e=n.headers.get(e0);if(!e||!e.match(pC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vC(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function mC(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ao(n){if(!yC.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function vh(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ry(n){return JSON.parse(JSON.stringify(n))}var xC=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const ya=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),wC=[502,503,504];async function iy(n){var e;if(!sC(n))throw new t0(ya(n),0);if(wC.includes(n.status))throw new t0(ya(n),n.status);let t;try{t=await n.json()}catch(a){throw new j2(ya(a),a)}let r;const i=gC(n);if(i&&i.getTime()>=P2["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Jm(ya(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Fi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new Jm(ya(t),n.status,t.weak_password.reasons);throw new XA(ya(t),n.status||500,r)}const _C=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function He(n,e,t,r){var i;const a=Object.assign({},r?.headers);a[e0]||(a[e0]=P2["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const c=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",f=await bC(n,e,t+c,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function bC(n,e,t,r,i,a){const s=_C(e,r,i,a);let c;try{c=await n(t,Object.assign({},s))}catch(f){throw console.error(f),new t0(ya(f),0)}if(c.ok||await iy(c),r?.noResolveJson)return c;try{return await c.json()}catch(f){await iy(f)}}function ei(n){var e;let t=null;CC(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=iC(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ay(n){const e=ei(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function zi(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function EC(n){return{data:n,error:null}}function SC(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a}=n,s=xC(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a},f=Object.assign({},s);return{data:{properties:c,user:f},error:null}}function AC(n){return n}function CC(n){return n.access_token&&n.refresh_token&&n.expires_in}const mh=["global","local","others"];var TC=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class OC{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=F2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=mh[0]){if(mh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${mh.join(", ")}`);try{return await He(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await He(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:zi})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=TC(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await He(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:SC,redirectTo:t?.redirectTo})}catch(t){if(ke(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await He(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:zi})}catch(t){if(ke(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,a,s,c,f;try{const d={nextPage:null,lastPage:0,total:0},p=await He(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:AC});if(p.error)throw p.error;const g=await p.json(),y=(s=p.headers.get("x-total-count"))!==null&&s!==void 0?s:0,x=(f=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&f!==void 0?f:[];return x.length>0&&(x.forEach(_=>{const E=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(_.split(";")[1].split("=")[1]);d[`${C}Page`]=E}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},g),d),error:null}}catch(d){if(ke(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Ao(e);try{return await He(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:zi})}catch(t){if(ke(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ao(e);try{return await He(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:zi})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Ao(e);try{return await He(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:zi})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ao(e.userId);try{const{data:t,error:r}=await He(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ao(e.userId),Ao(e.id);try{return{data:await He(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ke(t))return{data:null,error:t};throw t}}}function oy(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function DC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Co={debug:!!(globalThis&&L2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class U2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class RC extends U2{}async function NC(n,e,t){Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Co.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Co.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new RC(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Co.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}DC();const IC={url:zA,storageKey:HA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:GA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function sy(n,e,t){return await t()}const To={};class yl{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yl.nextInstanceID,yl.nextInstanceID+=1,this.instanceID>0&&pr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},IC),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new OC({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=F2(i.fetch),this.lock=i.lock||sy,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:pr()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=NC:this.lock=sy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:L2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=oy(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=oy(this.memoryStorage)),pr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=To[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){To[this.storageKey]=Object.assign(Object.assign({},To[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=To[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){To[this.storageKey]=Object.assign(Object.assign({},To[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${M2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=oC(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),pr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),KA(a)){const f=(e=a.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",c),await this._saveSession(s),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ke(t)?{error:t}:{error:new j2("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const a=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:ei}),{data:s,error:c}=a;if(c||!s)return{data:{user:null,session:null},error:c};const f=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(a){if(ke(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,i;try{let a;if("email"in e){const{email:p,password:g,options:y}=e;let x=null,_=null;this.flowType==="pkce"&&([x,_]=await So(this.storage,this.storageKey)),a=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:p,password:g,data:(t=y?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:x,code_challenge_method:_},xform:ei})}else if("phone"in e){const{phone:p,password:g,options:y}=e;a=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(r=y?.data)!==null&&r!==void 0?r:{},channel:(i=y?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:ei})}else throw new Zc("You must provide either an email or phone number and a password");const{data:s,error:c}=a;if(c||!s)return{data:{user:null,session:null},error:c};const f=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(a){if(ke(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:s,options:c}=e;t=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:ay})}else if("phone"in e){const{phone:a,password:s,options:c}=e;t=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:ay})}else throw new Zc("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Kc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(ke(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,a,s,c,f,d,p,g,y,x;let _,E;if("message"in e)_=e.message,E=e.signature;else{const{chain:C,wallet:b,statement:T,options:O}=e;let I;if(pr())if(typeof b=="object")I=b;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))I=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=b}const P=new URL((t=O?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in I&&I.signIn){const F=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),T?{statement:T}:null));let H;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")H=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)H=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)_=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),E=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${P.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(i=(r=O?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=O?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((s=O?.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((c=O?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((f=O?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((d=O?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((g=(p=O?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...O.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const F=await I.signMessage(new TextEncoder().encode(_),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=F}}try{const{data:C,error:b}=await He(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:rC(E)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ei});if(b)throw b;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Kc}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:b})}catch(C){if(ke(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(e){const t=await pa(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:a,error:s}=await He(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ei});if(await ji(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Kc}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(ke(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:a,nonce:s}=e,c=await He(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:ei}),{data:f,error:d}=c;return d?{data:{user:null,session:null},error:d}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Kc}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:d})}catch(t){if(ke(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,a,s;try{if("email"in e){const{email:c,options:f}=e;let d=null,p=null;this.flowType==="pkce"&&([d,p]=await So(this.storage,this.storageKey));const{error:g}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=f?.data)!==null&&t!==void 0?t:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:d,code_challenge_method:p},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:c,options:f}=e,{data:d,error:p}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=f?.data)!==null&&i!==void 0?i:{},create_user:(a=f?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(s=f?.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:p}}throw new Zc("You must provide either an email or phone number.")}catch(c){if(ke(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:c}=await He(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:ei});if(c)throw c;if(!s)throw new Error("An error occurred on token verification.");const f=s.session,d=s.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(i){if(ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let a=null,s=null;return this.flowType==="pkce"&&([a,s]=await So(this.storage,this.storageKey)),await He(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:EC})}catch(a){if(ke(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Fi;const{error:i}=await He(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ke(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:s}=await He(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:s,error:c}=await He(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:s?.message_id},error:c}}throw new Zc("You must provide either an email or phone number and a type")}catch(t){if(ke(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await pa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<hh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await pa(this.userStorage,this.storageKey+"-user");s?.user?e.user=s.user:e.user=vh()}if(this.storage.isServer&&e.user){let s=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,d,p)=>(!s&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,d,p))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:zi}):await this._useSession(async t=>{var r,i,a;const{data:s,error:c}=t;if(c)throw c;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fi}:await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:zi})})}catch(t){if(ke(t))return WA(t)&&(await this._removeSession(),await ji(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new Fi;const s=i.session;let c=null,f=null;this.flowType==="pkce"&&e.email!=null&&([c,f]=await So(this.storage,this.storageKey));const{data:d,error:p}=await He(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:f}),jwt:s.access_token,xform:zi});if(p)throw p;return s.user=d.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fi;const t=Date.now()/1e3;let r=t,i=!0,a=null;const{payload:s}=gh(e.access_token);if(s.exp&&(r=s.exp,i=r<=t),i){const{session:c,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:f}=await this._getUser(e.access_token);if(f)throw f;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(ke(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:s,error:c}=t;if(c)throw c;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Fi;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ke(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!pr())throw new Qc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Qm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qc("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Qm("No code detected.");const{data:T,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:c,expires_at:f,token_type:d}=e;if(!a||!c||!s||!d)throw new Qc("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(c);let y=p+g;f&&(y=parseInt(f));const x=y-p;x*1e3<=Do&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${g}s`);const _=y-g;p-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,y,p):p-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,y,p);const{data:E,error:C}=await this._getUser(a);if(C)throw C;const b={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:g,expires_at:y,refresh_token:s,token_type:d,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(ke(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await pa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{error:a};const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:c}=await this.admin.signOut(s,e);if(c&&!(YA(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await ji(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=aC(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:a},error:s}=t;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await So(this.storage,this.storageKey,!0));try{return await He(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(ke(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async a=>{var s,c,f,d,p;const{data:g,error:y}=a;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await He(this.fetch,"GET",x,{headers:this.headers,jwt:(p=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return pr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(ke(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:s}=t;if(s)throw s;return await He(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await cC(async i=>(i>0&&await lC(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await He(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ei})),(i,a)=>{const s=200*Math.pow(2,i);return a&&ph(a)&&Date.now()+s-r<Do})}catch(r){if(this._debug(t,"error",r),ke(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),pr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await pa(this.storage,this.storageKey);if(i&&this.userStorage){let s=await pa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await Ro(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s?.user)!==null&&e!==void 0?e:vh()}else if(i&&!i.user&&!i.user){const s=await pa(this.storage,this.storageKey+"-user");s&&s?.user?(i.user=s.user,await ji(this.storage,this.storageKey+"-user"),await Ro(this.storage,this.storageKey,i)):i.user=vh()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<hh;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${hh}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),ph(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:c}=await this._getUser(i.access_token);!c&&s?.user?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Fi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Bu;const{data:a,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!a.session)throw new Fi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),ke(a)){const s={session:null,error:a};return ph(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(f){a.push(f)}});if(await Promise.all(s),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Ro(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const a=ry(i);await Ro(this.storage,this.storageKey,a)}else{const i=ry(t);await Ro(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await ji(this.storage,this.storageKey),await ji(this.storage,this.storageKey+"-code-verifier"),await ji(this.storage,this.storageKey+"-user"),this.userStorage&&await ji(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Do);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Do);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Do}ms, refresh threshold is ${Jh} ticks`),i<=Jh&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof U2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,s]=await So(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(c.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await He(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:s}=t;if(s)return{data:null,error:s};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:d}=await He(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=f?.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:s,error:c}=await He(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:c})})}catch(t){if(ke(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await He(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ke(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified"),a=r.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:r,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=gh(i.access_token);let c=null;s.aal&&(c=s.aal);let f=c;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const p=s.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+qA>i)return r;const{data:a,error:s}=await He(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:x,error:_}=await this.getSession();if(_||!x.session)return{data:null,error:_};r=x.session.access_token}const{header:i,payload:a,signature:s,raw:{header:c,payload:f}}=gh(r);t?.allowExpired||vC(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:a,header:i,signature:s},error:null}}const p=mC(i.alg),g=await crypto.subtle.importKey("jwk",d,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,s,nC(`${c}.${f}`)))throw new n0("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}}yl.nextInstanceID=0;const kC=yl;class MC extends kC{constructor(e){super(e)}}var PC=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})};class jC{constructor(e,t,r){var i,a,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const c=UA(e),f=new URL(c);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const d=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:IA,realtime:MA,auth:Object.assign(Object.assign({},kA),{storageKey:d}),global:NA},g=VA(r??{},p);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=g.auth)!==null&&s!==void 0?s:{},this.headers,g.global.fetch),this.fetch=LA(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new QS(new URL("rest/v1",f).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new OA(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new US(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return PC(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:a,flowType:s,lock:c,debug:f},d,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new MC({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:s,lock:c,debug:f,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new gA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const BC=(n,e,t)=>new jC(n,e,t);function LC(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}LC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const FC="https://znqhoohjugyblgwepovp.supabase.co",UC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY",pe=BC(FC,UC,{realtime:{params:{eventsPerSecond:10}}});function VC(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function zC(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var HC=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),GC=(function(n){HC(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),VC(a,i.prototype),zC(a),a}return e})(Error),$C=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Fn=(function(n){$C(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(GC),qC=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jt=(function(n){qC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(Fn),XC=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Se=(function(n){XC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(Fn),V2=(function(){function n(e){if(this.binarizer=e,e===null)throw new Se("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),YC=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ut=(function(n){YC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(Fn),WC=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),pt=(function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),KC=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$0=(function(n){KC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(Fn),ZC=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ly=(function(n){ZC(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})($0),QC=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wt=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Se("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new ly(t);if(r>e)throw new ly(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=QC(e),s=a.next();!s.done;s=a.next()){var c=s.value;i=31*i+c}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return pt.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,c=r(t,e[s]);if(c>0)i=s+1;else if(c<0)a=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),Ue=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),an=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);pt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=r[i]}var c=i*32+Ue.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=~r[i]}var c=i*32+Ue.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Se;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=r;s<=i;s++){var c=s>r?0:e&31,f=s<i?31:t&31,d=(2<<f)-(1<<c);a[s]|=d}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Se;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,c=i;c<=a;c++){var f=c>i?0:e&31,d=c<a?31:t&31,p=(2<<d)-(1<<f)&4294967295;if((s[c]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Se("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Se("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var s=0,c=0;c<8;c++)this.get(e)&&(s|=1<<7-c),e++;t[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==r*32){for(var c=r*32-this.size,f=e[0]>>>c,a=1;a<r;a++){var d=e[a];f|=d<<32-c,e[a-1]=f,f=d>>>c}e[r-1]=f}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Wt.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Wt.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),r0;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(r0||(r0={}));const gt=r0;var JC=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),de=(function(n){JC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(Fn),e4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},it;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(it||(it={}));var Yt=(function(){function n(e,t,r){for(var i,a,s=[],c=3;c<arguments.length;c++)s[c-3]=arguments[c];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var f=this.values,d=0,p=f.length;d!==p;d++){var g=f[d];n.VALUES_TO_ECI.set(g,this)}try{for(var y=e4(s),x=y.next();!x.done;x=y.next()){var _=x.value;n.NAME_TO_ECI.set(_,this)}}catch(E){i={error:E}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new de("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new de("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new de("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(it.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(it.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(it.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(it.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(it.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(it.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(it.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(it.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(it.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(it.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(it.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(it.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(it.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(it.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(it.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(it.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(it.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(it.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(it.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(it.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(it.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(it.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(it.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(it.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(it.Big5,28,"Big5"),n.GB18030=new n(it.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(it.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),t4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fu=(function(n){t4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(Fn),lr=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Yt?e:Yt.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(Yt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new fu("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Yt.UTF8)||e.equals(Yt.ISO8859_1)||e.equals(Yt.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),qe=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return lr.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(gt.CHARACTER_SET)!==void 0)return t.get(gt.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,c=0,f=0,d=0,p=0,g=0,y=0,x=0,_=0,E=0,C=0,b=0,T=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,O=0;O<r&&(i||a||s);O++){var I=e[O]&255;s&&(c>0?(I&128)===0?s=!1:c--:(I&128)!==0&&((I&64)===0?s=!1:(c++,(I&32)===0?f++:(c++,(I&16)===0?d++:(c++,(I&8)===0?p++:s=!1))))),i&&(I>127&&I<160?i=!1:I>159&&(I<192||I===215||I===247)&&b++),a&&(g>0?I<64||I===127||I>252?a=!1:g--:I===128||I===160||I>239?a=!1:I>160&&I<224?(y++,_=0,x++,x>E&&(E=x)):I>127?(g++,x=0,_++,_>C&&(C=_)):(x=0,_=0))}return s&&c>0&&(s=!1),a&&g>0&&(a=!1),s&&(T||f+d+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||E>=3||C>=3)?n.SHIFT_JIS:i&&a?E===2&&y===2||b*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(c,f,d,p,g,y){if(c==="%%")return"%";if(t[++i]!==void 0){c=p?parseInt(p.substr(1)):void 0;var x=g?parseInt(g.substr(1)):void 0,_;switch(y){case"s":_=t[i];break;case"c":_=t[i][0];break;case"f":_=parseFloat(t[i]).toFixed(c);break;case"p":_=parseFloat(t[i]).toPrecision(c);break;case"e":_=parseFloat(t[i]).toExponential(c);break;case"x":_=parseInt(t[i]).toString(x||16);break;case"d":_=parseFloat(parseInt(t[i],x||10).toPrecision(c)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(x);for(var E=parseInt(d),C=d&&d[0]+""=="0"?"0":" ";_.length<E;)_=f!==void 0?_+C:C+_;return _}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},n.getBytes=function(e,t){return lr.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Yt.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Yt.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Yt.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),Le=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=qe.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),Pr=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Se("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var s=e[a],c=0;c<r;c++)s[c]&&i.set(c,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Se("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,c=-1,f=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>s){if(c===-1)c=a-s;else if(a-s!==c)throw new Se("row lengths do not match");s=a,f++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new Se("illegal character encountered: "+e.substring(d));if(a>s){if(c===-1)c=a-s;else if(a-s!==c)throw new Se("row lengths do not match");f++}for(var p=new n(c,f),g=0;g<a;g++)i[g]&&p.set(Math.floor(g%c),Math.floor(g/c));return p},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Se("input matrix dimensions do not match");for(var t=new an(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var c=a*r,f=e.getRow(a,t).getBitArray(),d=0;d<r;d++)i[c+d]^=f[d]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Se("Left and top must be nonnegative");if(i<1||r<1)throw new Se("Height and width must be at least 1");var a=e+r,s=t+i;if(s>this.height||a>this.width)throw new Se("The region must fit inside the matrix");for(var c=this.rowSize,f=this.bits,d=t;d<s;d++)for(var p=d*c,g=e;g<a;g++)f[p+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new an(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)t.setBulk(s*32,i[a+s]);return t},n.prototype.setRow=function(e,t){pt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new an(e),i=new an(e),a=0,s=Math.floor((t+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,s=t,c=-1,f=-1,d=0;d<t;d++)for(var p=0;p<r;p++){var g=i[d*r+p];if(g!==0){if(d<s&&(s=d),d>f&&(f=d),p*32<a){for(var y=0;(g<<31-y&4294967295)===0;)y++;p*32+y<a&&(a=p*32+y)}if(p*32+31>c){for(var y=31;!(g>>>y);)y--;p*32+y>c&&(c=p*32+y)}}}return c<a||f<s?null:Int32Array.from([a,s,c-a+1,f-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,s=t[r],c=0;(s<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=t[r],c=31;!(s>>>c);)c--;return a+=c,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Wt.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Wt.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Le,a=0,s=this.height;a<s;a++){for(var c=0,f=this.width;c<f;c++)i.append(this.get(c,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),n4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ie=(function(n){n4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(Fn),r4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),i4=(function(n){r4(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new an(a):r.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),c=this.buckets,f=0;f<a;f++)c[(s[f]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(c);if(a<3)for(var f=0;f<a;f++)(s[f]&255)<d&&r.set(f);else for(var p=s[0]&255,g=s[1]&255,f=1;f<a-1;f++){var y=s[f+1]&255;(g*4-p-y)/2<d&&r.set(f),p=g,g=y}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new Pr(r,i);this.initArrays(r);for(var s=this.buckets,c=1;c<5;c++)for(var f=Math.floor(i*c/5),d=t.getRow(f,this.luminances),p=Math.floor(r*4/5),g=Math.floor(r/5);g<p;g++){var y=d[g]&255;s[y>>e.LUMINANCE_SHIFT]++}for(var x=e.estimateBlackPoint(s),_=t.getMatrix(),c=0;c<i;c++)for(var E=c*r,g=0;g<r;g++){var y=_[E+g]&255;y<x&&a.set(g,c)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,s=0,c=0;c<r;c++)t[c]>s&&(a=c,s=t[c]),t[c]>i&&(i=t[c]);for(var f=0,d=0,c=0;c<r;c++){var p=c-a,g=t[c]*p*p;g>d&&(f=c,d=g)}if(a>f){var y=a;a=f,f=y}if(f-a<=r/16)throw new ie;for(var x=f-1,_=-1,c=f-1;c>a;c--){var E=c-a,g=E*E*(f-c)*(i-t[c]);g>_&&(x=c,_=g)}return x<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(WC),a4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),z2=(function(n){a4(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var c=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&c++;var f=e.calculateBlackPoints(a,s,c,r,i),d=new Pr(r,i);e.calculateThresholdForBlock(a,s,c,r,i,f,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,s,c,f){for(var d=s-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,g=0;g<i;g++){var y=g<<e.BLOCK_SIZE_POWER;y>d&&(y=d);for(var x=e.cap(g,2,i-3),_=0;_<r;_++){var E=_<<e.BLOCK_SIZE_POWER;E>p&&(E=p);for(var C=e.cap(_,2,r-3),b=0,T=-2;T<=2;T++){var O=c[x+T];b+=O[C-2]+O[C-1]+O[C]+O[C+1]+O[C+2]}var I=b/25;e.thresholdBlock(t,E,y,I,a,f)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,s,c){for(var f=0,d=i*s+r;f<e.BLOCK_SIZE;f++,d+=s)for(var p=0;p<e.BLOCK_SIZE;p++)(t[d+p]&255)<=a&&c.set(r+p,i+f)},e.calculateBlackPoints=function(t,r,i,a,s){for(var c=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,d=new Array(i),p=0;p<i;p++){d[p]=new Int32Array(r);var g=p<<e.BLOCK_SIZE_POWER;g>c&&(g=c);for(var y=0;y<r;y++){var x=y<<e.BLOCK_SIZE_POWER;x>f&&(x=f);for(var _=0,E=255,C=0,b=0,T=g*a+x;b<e.BLOCK_SIZE;b++,T+=a){for(var O=0;O<e.BLOCK_SIZE;O++){var I=t[T+O]&255;_+=I,I<E&&(E=I),I>C&&(C=I)}if(C-E>e.MIN_DYNAMIC_RANGE)for(b++,T+=a;b<e.BLOCK_SIZE;b++,T+=a)for(var O=0;O<e.BLOCK_SIZE;O++)_+=t[T+O]&255}var P=_>>e.BLOCK_SIZE_POWER*2;if(C-E<=e.MIN_DYNAMIC_RANGE&&(P=E/2,p>0&&y>0)){var F=(d[p-1][y]+2*d[p][y-1]+d[p-1][y-1])/4;E<F&&(P=F)}d[p][y]=P}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(i4),Rl=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new fu("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new fu("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new fu("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Le,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,c=void 0;s<64?c="#":s<128?c="+":s<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()},n})(),o4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Lu=(function(n){o4(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Rl),s4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),l4=(function(n){s4(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var c=0,f=0,d=t.length;c<d;c+=4,f++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var y=t[c],x=t[c+1],_=t[c+2];p=306*y+601*x+117*_+512>>10}s[f]=p}else for(var c=0,f=0,E=t.length;c<E;c+=4,f++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var y=t[c],x=t[c+1],_=t[c+2];p=306*y+601*x+117*_+512>>10}s[f]=255-p}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Se("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,c=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*c),d=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*c);return r.width=f,r.height=d,i.translate(f/2,d/2),i.rotate(a),i.drawImage(this.canvas,s/-2,c/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Lu(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Rl),c4=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),Cn=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})},Tn=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(d){return function(p){return f([d,p])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},u4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yo=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Cn(this,void 0,void 0,function(){var e,t,r,i,a,s,c,f,d,p,g,y;return Tn(this,function(x){switch(x.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=x.sent(),t=[];try{for(r=u4(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(c=a.deviceId||a.id,f=a.label||"Video device "+(t.length+1),d=a.groupId,p={deviceId:c,label:f,kind:s,groupId:d},t.push(p))}catch(_){g={error:_}}finally{try{i&&!i.done&&(y=r.return)&&y.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Cn(this,void 0,void 0,function(){var e;return Tn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new c4(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Cn(this,void 0,void 0,function(){var t;return Tn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Cn(this,void 0,void 0,function(){return Tn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Cn(this,void 0,void 0,function(){var r,i;return Tn(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Cn(this,void 0,void 0,function(){var r;return Tn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Cn(this,void 0,void 0,function(){var r,i;return Tn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Cn(this,void 0,void 0,function(){return Tn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Cn(this,void 0,void 0,function(){var i,a;return Tn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Cn(this,void 0,void 0,function(){var i;return Tn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Cn(this,void 0,void 0,function(){var i;return Tn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Cn(this,void 0,void 0,function(){var r;return Tn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Cn(this,void 0,void 0,function(){return Tn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new jt("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new jt("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new jt("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new jt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new jt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new jt("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new jt("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new jt("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new jt("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new jt("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Cn(this,void 0,void 0,function(){return Tn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Cn(this,void 0,void 0,function(){return Tn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,c){if(i._stopAsyncDecode){c(new ie("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var f=i.decode(e);s(f)}catch(y){var d=t&&y instanceof ie,p=y instanceof Ut||y instanceof de,g=p&&r;if(d||g)return setTimeout(a,i._timeBetweenDecodingAttempts,s,c);c(y)}};return new Promise(function(s,c){return a(s,c)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(f){t(null,f);var s=f instanceof Ut||f instanceof de,c=f instanceof ie;(s||c)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new l4(r,t),a=new z2(i);return new V2(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),_n=(function(){function n(e,t,r,i,a,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=pt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=pt.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);pt.arraycopy(t,0,r,0,t.length),pt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),i0;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(i0||(i0={}));const Ee=i0;var a0;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(a0||(a0={}));const hn=a0;var Fu=(function(){function n(e,t,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),al=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Se;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),Hi=(function(){function n(e,t){if(t.length===0)throw new Se;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),pt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];r=al.addOrSubtract(r,s)}return r}r=t[0];for(var c=t.length,f=this.field,i=1;i<c;i++)r=al.addOrSubtract(f.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Se("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;pt.arraycopy(r,0,a,0,s);for(var c=s;c<r.length;c++)a[c]=al.addOrSubtract(t[c-s],r[c]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Se("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),c=this.field,f=0;f<r;f++)for(var d=t[f],p=0;p<a;p++)s[f+p]=al.addOrSubtract(s[f+p],c.multiply(d,i[p]));return new n(c,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(a[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Se;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,c=0;c<i;c++)a[c]=s.multiply(r[c],t);return new n(s,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Se("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Se("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var c=i.getDegree()-e.getDegree(),f=t.multiply(i.getCoefficient(i.getDegree()),s),d=e.multiplyByMonomial(c,f),p=t.buildMonomial(c,f);r=r.addOrSubtract(p),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),f4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),H2=(function(n){f4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(Fn),d4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Bn=(function(n){d4(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),c=1,f=0;f<r;f++)s[f]=c,c*=2,c>=r&&(c^=t,c&=r-1);a.expTable=s;for(var d=new Int32Array(r),f=0;f<r-1;f++)d[s[f]]=f;return a.logTable=d,a.zero=new Hi(a,Int32Array.from([0])),a.one=new Hi(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Se;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Hi(this,i)},e.prototype.inverse=function(t){if(t===0)throw new H2;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ue.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(al),h4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Jc=(function(n){h4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(Fn),p4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Nl=(function(n){p4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(Fn),Uu=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Hi(r,e),a=new Int32Array(t),s=!0,c=0;c<t;c++){var f=i.evaluateAt(r.exp(c+r.getGeneratorBase()));a[a.length-1-c]=f,f!==0&&(s=!1)}if(!s)for(var d=new Hi(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(t,1),d,t),g=p[0],y=p[1],x=this.findErrorLocations(g),_=this.findErrorMagnitudes(y,x),c=0;c<x.length;c++){var E=e.length-1-r.log(x[c]);if(E<0)throw new Jc("Bad error location");e[E]=Bn.addOrSubtract(e[E],_[c])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,c=t,f=a.getZero(),d=a.getOne();c.getDegree()>=(r/2|0);){var p=s,g=f;if(s=c,f=d,s.isZero())throw new Jc("r_{i-1} was zero");c=p;for(var y=a.getZero(),x=s.getCoefficient(s.getDegree()),_=a.inverse(x);c.getDegree()>=s.getDegree()&&!c.isZero();){var E=c.getDegree()-s.getDegree(),C=a.multiply(c.getCoefficient(c.getDegree()),_);y=y.addOrSubtract(a.buildMonomial(E,C)),c=c.addOrSubtract(s.multiplyByMonomial(E,C))}if(d=y.multiply(f).addOrSubtract(g),c.getDegree()>=s.getDegree())throw new Nl("Division algorithm failed to reduce polynomial?")}var b=d.getCoefficient(0);if(b===0)throw new Jc("sigmaTilde(0) was zero");var T=a.inverse(b),O=d.multiplyScalar(T),I=c.multiplyScalar(T);return[O,I]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==t)throw new Jc("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var c=a.inverse(t[s]),f=1,d=0;d<r;d++)if(s!==d){var p=a.multiply(t[d],c),g=(p&1)===0?p|1:p&-2;f=a.multiply(f,g)}i[s]=a.multiply(e.evaluateAt(c),a.inverse(f)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],c))}return i},n})(),cn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(cn||(cn={}));var cy=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),c=new Fu(a,s,null,null);return c.setNumBits(i.length),c},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=cn.UPPER,i=cn.UPPER,a="",s=0;s<t;)if(i===cn.BINARY){if(t-s<5)break;var c=n.readCode(e,s,5);if(s+=5,c===0){if(t-s<11)break;c=n.readCode(e,s,11)+31,s+=11}for(var f=0;f<c;f++){if(t-s<8){s=t;break}var d=n.readCode(e,s,8);a+=qe.castAsNonUtf8Char(d),s+=8}i=r}else{var p=i===cn.DIGIT?4:5;if(t-s<p)break;var d=n.readCode(e,s,p);s+=p;var g=n.getCharacter(i,d);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(e){switch(e){case"L":return cn.LOWER;case"P":return cn.PUNCT;case"M":return cn.MIXED;case"D":return cn.DIGIT;case"B":return cn.BINARY;case"U":default:return cn.UPPER}},n.getCharacter=function(e,t){switch(e){case cn.UPPER:return n.UPPER_TABLE[t];case cn.LOWER:return n.LOWER_TABLE[t];case cn.MIXED:return n.MIXED_TABLE[t];case cn.PUNCT:return n.PUNCT_TABLE[t];case cn.DIGIT:return n.DIGIT_TABLE[t];default:throw new Nl("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Bn.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Bn.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Bn.AZTEC_DATA_10):(r=12,t=Bn.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new de;for(var s=e.length%r,c=new Int32Array(a),f=0;f<a;f++,s+=r)c[f]=n.readCode(e,s,r);try{var d=new Uu(t);d.decode(c,a-i)}catch(C){throw new de(C)}for(var p=(1<<r)-1,g=0,f=0;f<i;f++){var y=c[f];if(y===0||y===p)throw new de;(y===1||y===p-1)&&g++}for(var x=new Array(i*r-g),_=0,f=0;f<i;f++){var y=c[f];if(y===1||y===p-1)x.fill(y>1,_,_+r-1),_+=r-1;else for(var E=r-1;E>=0;--E)x[_++]=(y&1<<E)!==0}return x},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var c=0;c<a.length;c++)a[c]=c;else for(var f=i+1+2*Ue.truncDivision(Ue.truncDivision(i,2)-1,15),d=i/2,p=Ue.truncDivision(f,2),c=0;c<d;c++){var g=c+Ue.truncDivision(c,15);a[d-c-1]=p-g-1,a[d+c]=p+g+1}for(var c=0,y=0;c<r;c++){for(var x=(r-c)*4+(t?9:12),_=c*2,E=i-1-_,C=0;C<x;C++)for(var b=C*2,T=0;T<2;T++)s[y+b+T]=e.get(a[_+T],a[_+C]),s[y+2*x+b+T]=e.get(a[_+C],a[E-T]),s[y+4*x+b+T]=e.get(a[E-T],a[E-C]),s[y+6*x+b+T]=e.get(a[E-C],a[_+T]);y+=x*8}return s},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),We=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,s=t-i;return Math.sqrt(a*a+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n})(),o0=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),we=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*o0.floatToIntBits(this.x)+o0.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,c;if(r>=t&&r>=i?(s=e[0],a=e[1],c=e[2]):i>=r&&i>=t?(s=e[1],a=e[0],c=e[2]):(s=e[2],a=e[0],c=e[1]),this.crossProductZ(a,s,c)<0){var f=a;a=c,c=f}e[0]=a,e[1]=s,e[2]=c},n.distance=function(e,t){return We.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n})(),q0=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),g4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),v4=(function(n){g4(e,n);function e(t,r,i,a,s){var c=n.call(this,t,r)||this;return c.compact=i,c.nbDatablocks=a,c.nbLayers=s,c}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(q0),s0=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,c=!1,f=!1,d=!1,p=!1,g=!1,y=this.width,x=this.height;s;){s=!1;for(var _=!0;(_||!f)&&t<y;)_=this.containsBlackPoint(r,i,t,!1),_?(t++,s=!0,f=!0):f||t++;if(t>=y){a=!0;break}for(var E=!0;(E||!d)&&i<x;)E=this.containsBlackPoint(e,t,i,!0),E?(i++,s=!0,d=!0):d||i++;if(i>=x){a=!0;break}for(var C=!0;(C||!p)&&e>=0;)C=this.containsBlackPoint(r,i,e,!1),C?(e--,s=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var b=!0;(b||!g)&&r>=0;)b=this.containsBlackPoint(e,t,r,!0),b?(r--,s=!0,g=!0):g||r--;if(r<0){a=!0;break}s&&(c=!0)}if(!a&&c){for(var T=t-e,O=null,I=1;O===null&&I<T;I++)O=this.getBlackPointOnSegment(e,i-I,e+I,i);if(O==null)throw new ie;for(var P=null,I=1;P===null&&I<T;I++)P=this.getBlackPointOnSegment(e,r+I,e+I,r);if(P==null)throw new ie;for(var F=null,I=1;F===null&&I<T;I++)F=this.getBlackPointOnSegment(t,r+I,t-I,r);if(F==null)throw new ie;for(var H=null,I=1;H===null&&I<T;I++)H=this.getBlackPointOnSegment(t,i-I,t-I,i);if(H==null)throw new ie;return this.centerEdges(H,O,F,P)}else throw new ie},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=We.round(We.distance(e,t,r,i)),s=(r-e)/a,c=(i-t)/a,f=this.image,d=0;d<a;d++){var p=We.round(e+d*s),g=We.round(t+d*c);if(f.get(p,g))return new we(p,g)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),s=e.getY(),c=t.getX(),f=t.getY(),d=r.getX(),p=r.getY(),g=i.getX(),y=i.getY(),x=n.CORR;return a<this.width/2?[new we(g-x,y+x),new we(c+x,f+x),new we(d-x,p-x),new we(a+x,s-x)]:[new we(g+x,y+x),new we(c+x,f-x),new we(d-x,p+x),new we(a-x,s-x)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,r))return!0}else for(var c=e;c<=t;c++)if(a.get(r,c))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),uy=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var c=Math.floor(t[s]),f=Math.floor(t[s+1]);if(c<-1||c>r||f<-1||f>i)throw new ie;a=!1,c===-1?(t[s]=0,a=!0):c===r&&(t[s]=r-1,a=!0),f===-1?(t[s+1]=0,a=!0):f===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var c=Math.floor(t[s]),f=Math.floor(t[s+1]);if(c<-1||c>r||f<-1||f>i)throw new ie;a=!1,c===-1?(t[s]=0,a=!0):c===r&&(t[s]=r-1,a=!0),f===-1?(t[s+1]=0,a=!0):f===i&&(t[s+1]=i-1,a=!0)}},n})(),G2=(function(){function n(e,t,r,i,a,s,c,f,d){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=c,this.a23=f,this.a33=d}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,s,c,f,d,p,g,y,x,_,E,C){var b=n.quadrilateralToSquare(e,t,r,i,a,s,c,f),T=n.squareToQuadrilateral(d,p,g,y,x,_,E,C);return T.times(b)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,c=this.a22,f=this.a23,d=this.a31,p=this.a32,g=this.a33,y=0;y<t;y+=2){var x=e[y],_=e[y+1],E=a*x+f*_+g;e[y]=(r*x+s*_+d)/E,e[y+1]=(i*x+c*_+p)/E}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,c=this.a22,f=this.a23,d=this.a31,p=this.a32,g=this.a33,y=e.length,x=0;x<y;x++){var _=e[x],E=t[x],C=a*_+f*E+g;e[x]=(r*_+s*E+d)/C,t[x]=(i*_+c*E+p)/C}},n.squareToQuadrilateral=function(e,t,r,i,a,s,c,f){var d=e-r+a-c,p=t-i+s-f;if(d===0&&p===0)return new n(r-e,a-r,e,i-t,s-i,t,0,0,1);var g=r-a,y=c-a,x=i-s,_=f-s,E=g*_-y*x,C=(d*_-y*p)/E,b=(g*p-d*x)/E;return new n(r-e+C*r,c-e+b*c,e,i-t+C*i,f-t+b*f,t,C,b,1)},n.quadrilateralToSquare=function(e,t,r,i,a,s,c,f){return n.squareToQuadrilateral(e,t,r,i,a,s,c,f).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),m4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),y4=(function(n){m4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,s,c,f,d,p,g,y,x,_,E,C,b,T,O,I){var P=G2.quadrilateralToQuadrilateral(a,s,c,f,d,p,g,y,x,_,E,C,b,T,O,I);return this.sampleGridWithTransform(t,r,i,P)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new ie;for(var s=new Pr(r,i),c=new Float32Array(2*r),f=0;f<i;f++){for(var d=c.length,p=f+.5,g=0;g<d;g+=2)c[g]=g/2+.5,c[g+1]=p;a.transformPoints(c),uy.checkAndNudgePoints(t,c);try{for(var g=0;g<d;g+=2)t.get(Math.floor(c[g]),Math.floor(c[g+1]))&&s.set(g/2,f)}catch{throw new ie}}return s},e})(uy),X0=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new y4,n})(),jn=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new we(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),x4=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new v4(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ie;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var c=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,s,c){var f=(a>>t-2<<1)+(a&1);r=(r<<3)+f}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Ue.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ie},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),c=r-1;c>=0;--c)s[c]=e&15,e>>=4;try{var f=new Uu(Bn.AZTEC_PARAM);f.decode(s,a)}catch{throw new ie}for(var d=0,c=0;c<i;c++)d=(d<<4)+s[c];return d},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var c=this.getFirstDifferent(t,s,1,-1),f=this.getFirstDifferent(r,s,1,1),d=this.getFirstDifferent(i,s,-1,1),p=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(p,c)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(c,f,d,p))break}t=c,r=f,i=d,a=p,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;var y=new we(t.getX()+.5,t.getY()-.5),x=new we(r.getX()+.5,r.getY()+.5),_=new we(i.getX()-.5,i.getY()+.5),E=new we(a.getX()-.5,a.getY()-.5);return this.expandSquare([y,x,_,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new s0(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new jn(s+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new jn(s+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new jn(s-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new jn(s-7,c-7),!1,-1,-1).toResultPoint()}var f=We.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=We.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new s0(this.image,15,f,d).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new jn(f+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new jn(f+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new jn(f-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new jn(f-7,d-7),!1,-1,-1).toResultPoint()}return f=We.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=We.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new jn(f,d)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var s=X0.getInstance(),c=this.getDimension(),f=c/2-this.nbCenterLayers,d=c/2+this.nbCenterLayers;return s.sampleGrid(e,c,c,f,f,d,f,d,d,f,d,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),s=a/r,c=e.getX(),f=e.getY(),d=s*(t.getX()-e.getX())/a,p=s*(t.getY()-e.getY())/a,g=0;g<r;g++)this.image.get(We.round(c+g*d),We.round(f+g*p))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new jn(e.getX()-a,e.getY()+a),t=new jn(t.getX()-a,t.getY()-a),r=new jn(r.getX()+a,r.getY()-a),i=new jn(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var c=this.getColor(e,t);return c!==s||(c=this.getColor(t,r),c!==s)?!1:(c=this.getColor(r,i),c===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,s=0,c=e.getX(),f=e.getY(),d=this.image.get(e.getX(),e.getY()),p=Math.ceil(r),g=0;g<p;g++)c+=i,f+=a,this.image.get(We.round(c),We.round(f))!==d&&s++;var y=s/r;return y>.1&&y<.9?0:y<=.1===d?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new jn(a,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,f=(e[0].getY()+e[2].getY())/2,d=new we(c+i*a,f+i*s),p=new we(c-i*a,f-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,f=(e[1].getY()+e[3].getY())/2;var g=new we(c+i*a,f+i*s),y=new we(c-i*a,f-i*s),x=[d,g,p,y];return x},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=We.round(e.getX()),r=We.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return We.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return We.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ue.truncDivision(this.nbLayers-4,8)+1)+15},n})(),bu=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new x4(e.getBlackMatrix()),a=null,s=null;try{var c=i.detectMirror(!1);a=c.getPoints(),this.reportFoundResultPoints(t,a),s=new cy().decode(c)}catch(g){r=g}if(s==null)try{var c=i.detectMirror(!0);a=c.getPoints(),this.reportFoundResultPoints(t,a),s=new cy().decode(c)}catch(g){throw r??g}var f=new _n(s.getText(),s.getRawBytes(),s.getNumBits(),a,Ee.AZTEC,pt.currentTimeMillis()),d=s.getByteSegments();d!=null&&f.putMetadata(hn.BYTE_SEGMENTS,d);var p=s.getECLevel();return p!=null&&f.putMetadata(hn.ERROR_CORRECTION_LEVEL,p),f},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(gt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),w4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){w4(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new bu,t)||this}return e})(Yo);var Kt=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(gt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),c=270;s!==null&&s.get(hn.ORIENTATION)===!0&&(c=c+s.get(hn.ORIENTATION)%360),a.putMetadata(hn.ORIENTATION,c);var f=a.getResultPoints();if(f!==null)for(var d=i.getHeight(),p=0;p<f.length;p++)f[p]=new we(d-f[p].getY()-1,f[p].getX());return a}else throw new ie}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new an(r),s=t&&t.get(gt.TRY_HARDER)===!0,c=Math.max(1,i>>(s?8:5)),f;s?f=i:f=15;for(var d=Math.trunc(i/2),p=0;p<f;p++){var g=Math.trunc((p+1)/2),y=(p&1)===0,x=d+c*(y?g:-g);if(x<0||x>=i)break;try{a=e.getBlackRow(x,a)}catch{continue}for(var _=function(T){if(T===1&&(a.reverse(),t&&t.get(gt.NEED_RESULT_POINT_CALLBACK)===!0)){var O=new Map;t.forEach(function(F,H){return O.set(H,F)}),O.delete(gt.NEED_RESULT_POINT_CALLBACK),t=O}try{var I=E.decodeRow(x,a,t);if(T===1){I.putMetadata(hn.ORIENTATION,180);var P=I.getResultPoints();P!==null&&(P[0]=new we(r-P[0].getX()-1,P[0].getY()),P[1]=new we(r-P[1].getX()-1,P[1].getY()))}return{value:I}}catch{}},E=this,C=0;C<2;C++){var b=_(C);if(typeof b=="object")return b.value}}throw new ie},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(t>=s)throw new ie;for(var c=!e.get(t),f=0,d=t;d<s;){if(e.get(d)!==c)r[f]++;else{if(++f===i)break;r[f]=1,c=!c}d++}if(!(f===i||f===i-1&&d===s))throw new ie},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new ie;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,c=0;c<i;c++)a+=e[c],s+=t[c];if(a<s)return Number.POSITIVE_INFINITY;var f=a/s;r*=f;for(var d=0,p=0;p<i;p++){var g=e[p],y=t[p]*f,x=g>y?g-y:y-g;if(x>r)return Number.POSITIVE_INFINITY;d+=x}return d/a},n})(),_4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fy=(function(n){_4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),c=i,f=!1,d=6,p=i;p<r;p++)if(t.get(p)!==f)s[a]++;else{if(a===d-1){for(var g=e.MAX_AVG_VARIANCE,y=-1,x=e.CODE_START_A;x<=e.CODE_START_C;x++){var _=Kt.patternMatchVariance(s,e.CODE_PATTERNS[x],e.MAX_INDIVIDUAL_VARIANCE);_<g&&(g=_,y=x)}if(y>=0&&t.isRange(Math.max(0,c-(p-c)/2),c,!1))return Int32Array.from([c,p,y]);c+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,f=!f}throw new ie},e.decodeCode=function(t,r,i){Kt.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,c=0;c<e.CODE_PATTERNS.length;c++){var f=e.CODE_PATTERNS[c],d=this.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,s=c)}if(s>=0)return s;throw new ie},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(gt.ASSUME_GS1)===!0,s=e.findStartPattern(r),c=s[2],f=0,d=new Uint8Array(20);d[f++]=c;var p;switch(c){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new de}for(var g=!1,y=!1,x="",_=s[0],E=s[1],C=Int32Array.from([0,0,0,0,0,0]),b=0,T=0,O=c,I=0,P=!0,F=!1,H=!1;!g;){var G=y;switch(y=!1,b=T,T=e.decodeCode(r,C,E),d[f++]=T,T!==e.CODE_STOP&&(P=!0),T!==e.CODE_STOP&&(I++,O+=I*T),_=E,E+=C.reduce(function(k,U){return k+U},0),T){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new de}switch(p){case e.CODE_CODE_A:if(T<64)H===F?x+=String.fromCharCode(32+T):x+=String.fromCharCode(32+T+128),H=!1;else if(T<96)H===F?x+=String.fromCharCode(T-64):x+=String.fromCharCode(T+64),H=!1;else switch(T!==e.CODE_STOP&&(P=!1),T){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!F&&H?(F=!0,H=!1):F&&H?(F=!1,H=!1):H=!0;break;case e.CODE_SHIFT:y=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_B:if(T<96)H===F?x+=String.fromCharCode(32+T):x+=String.fromCharCode(32+T+128),H=!1;else switch(T!==e.CODE_STOP&&(P=!1),T){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!F&&H?(F=!0,H=!1):F&&H?(F=!1,H=!1):H=!0;break;case e.CODE_SHIFT:y=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_C:if(T<100)T<10&&(x+="0"),x+=T;else switch(T!==e.CODE_STOP&&(P=!1),T){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:g=!0;break}break}G&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var V=E-_;if(E=r.getNextUnset(E),!r.isRange(E,Math.min(r.getSize(),E+(E-_)/2),!1))throw new ie;if(O-=I*b,O%103!==b)throw new Ut;var Q=x.length;if(Q===0)throw new ie;Q>0&&P&&(p===e.CODE_CODE_C?x=x.substring(0,Q-2):x=x.substring(0,Q-1));for(var re=(s[1]+s[0])/2,te=_+V/2,ae=d.length,fe=new Uint8Array(ae),L=0;L<ae;L++)fe[L]=d[L];var S=[new we(re,t),new we(te,t)];return new _n(x,fe,0,S,Ee.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(Kt),b4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dy=(function(n){b4(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,s,c,f,d=this.counters;d.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(r,d),g=r.getNextSet(p[1]),y=r.getSize(),x,_;do{e.recordPattern(r,g,d);var E=e.toNarrowWidePattern(d);if(E<0)throw new ie;x=e.patternToChar(E),this.decodeRowResult+=x,_=g;try{for(var C=(a=void 0,yh(d)),b=C.next();!b.done;b=C.next()){var T=b.value;g+=T}}catch(ae){a={error:ae}}finally{try{b&&!b.done&&(s=C.return)&&s.call(C)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var O=0;try{for(var I=yh(d),P=I.next();!P.done;P=I.next()){var T=P.value;O+=T}}catch(ae){c={error:ae}}finally{try{P&&!P.done&&(f=I.return)&&f.call(I)}finally{if(c)throw c.error}}var F=g-_-O;if(g!==y&&F*2<O)throw new ie;if(this.usingCheckDigit){for(var H=this.decodeRowResult.length-1,G=0,V=0;V<H;V++)G+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(V));if(this.decodeRowResult.charAt(H)!==e.ALPHABET_STRING.charAt(G%43))throw new Ut;this.decodeRowResult=this.decodeRowResult.substring(0,H)}if(this.decodeRowResult.length===0)throw new ie;var Q;this.extendedMode?Q=e.decodeExtended(this.decodeRowResult):Q=this.decodeRowResult;var re=(p[1]+p[0])/2,te=_+O/2;return new _n(Q,null,0,[new we(re,t),new we(te,t)],Ee.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),s=0,c=a,f=!1,d=r.length,p=a;p<i;p++)if(t.get(p)!==f)r[s]++;else{if(s===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((p-c)/2)),c,!1))return[c,p];c+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,f=!f}throw new ie},e.toNarrowWidePattern=function(t){var r,i,a=t.length,s=0,c;do{var f=2147483647;try{for(var d=(r=void 0,yh(t)),p=d.next();!p.done;p=d.next()){var g=p.value;g<f&&g>s&&(f=g)}}catch(E){r={error:E}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s=f,c=0;for(var y=0,x=0,_=0;_<a;_++){var g=t[_];g>s&&(x|=1<<a-1-_,c++,y+=g)}if(c===3){for(var _=0;_<a&&c>0;_++){var g=t[_];if(g>s&&(c--,g*2>=y))return-1}return x}}while(c>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ie},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var c=t.charAt(a+1),f="\0";switch(s){case"+":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)+32);else throw new de;break;case"$":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)-64);else throw new de;break;case"%":if(c>="A"&&c<="E")f=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")f=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")f=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")f="\0";else if(c==="V")f="@";else if(c==="W")f="`";else if(c==="X"||c==="Y"||c==="Z")f="";else throw new de;break;case"/":if(c>="A"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")f=":";else throw new de;break}i+=f,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(Kt),E4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hy=(function(n){E4(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,s,c,f,d=this.findAsteriskPattern(r),p=r.getNextSet(d[1]),g=r.getSize(),y=this.counters;y.fill(0),this.decodeRowResult="";var x,_;do{e.recordPattern(r,p,y);var E=this.toPattern(y);if(E<0)throw new ie;x=this.patternToChar(E),this.decodeRowResult+=x,_=p;try{for(var C=(a=void 0,xh(y)),b=C.next();!b.done;b=C.next()){var T=b.value;p+=T}}catch(V){a={error:V}}finally{try{b&&!b.done&&(s=C.return)&&s.call(C)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var O=0;try{for(var I=xh(y),P=I.next();!P.done;P=I.next()){var T=P.value;O+=T}}catch(V){c={error:V}}finally{try{P&&!P.done&&(f=I.return)&&f.call(I)}finally{if(c)throw c.error}}if(p===g||!r.get(p))throw new ie;if(this.decodeRowResult.length<2)throw new ie;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var F=this.decodeExtended(this.decodeRowResult),H=(d[1]+d[0])/2,G=_+O/2;return new _n(F,null,0,[new we(H,t),new we(G,t)],Ee.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,c=!1,f=a.length,d=0,p=i;p<r;p++)if(t.get(p)!==c)a[d]++;else{if(d===f-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,p]);s+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,c=!c}throw new ie},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var s=xh(t),c=s.next();!c.done;c=s.next()){var f=c.value;a+=f}}catch(_){r={error:_}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var d=0,p=t.length,g=0;g<p;g++){var y=Math.round(t[g]*9/a);if(y<1||y>4)return-1;if((g&1)===0)for(var x=0;x<y;x++)d=d<<1|1;else d<<=y}return d},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new ie},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new de;var c=t.charAt(a+1),f="\0";switch(s){case"d":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)+32);else throw new de;break;case"a":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)-64);else throw new de;break;case"b":if(c>="A"&&c<="E")f=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")f=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")f=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")f="\0";else if(c==="V")f="@";else if(c==="W")f="`";else if(c>="X"&&c<="Z")f="";else throw new de;break;case"c":if(c>="A"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")f=":";else throw new de;break}i+=f,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,s=0,c=r-1;c>=0;c--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(c)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new Ut},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(Kt),S4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),A4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},py=(function(n){S4(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,s,c=this.decodeStart(r),f=this.decodeEnd(r),d=new Le;e.decodeMiddle(r,c[1],f[0],d);var p=d.toString(),g=null;i!=null&&(g=i.get(gt.ALLOWED_LENGTHS)),g==null&&(g=e.DEFAULT_ALLOWED_LENGTHS);var y=p.length,x=!1,_=0;try{for(var E=A4(g),C=E.next();!C.done;C=E.next()){var b=C.value;if(y===b){x=!0;break}b>_&&(_=b)}}catch(I){a={error:I}}finally{try{C&&!C.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}if(!x&&y>_&&(x=!0),!x)throw new de;var T=[new we(c[1],t),new we(f[0],t)],O=new _n(p,null,0,T,Ee.ITF,new Date().getTime());return O},e.decodeMiddle=function(t,r,i,a){var s=new Int32Array(10),c=new Int32Array(5),f=new Int32Array(5);for(s.fill(0),c.fill(0),f.fill(0);r<i;){Kt.recordPattern(t,r,s);for(var d=0;d<5;d++){var p=2*d;c[d]=s[p],f[d]=s[p+1]}var g=e.decodeDigit(c);a.append(g.toString()),g=this.decodeDigit(f),a.append(g.toString()),s.forEach(function(y){r+=y})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new ie},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ie;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof ie&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,s=new Int32Array(a),c=t.getSize(),f=!1,d=0,p=r;s.fill(0);for(var g=r;g<c;g++)if(t.get(g)!==f)s[d]++;else{if(d===a-1){if(Kt.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,g];p+=s[0]+s[1],pt.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,f=!f}throw new ie},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var c=e.PATTERNS[s],f=Kt.patternMatchVariance(t,c,e.MAX_INDIVIDUAL_VARIANCE);f<r?(r=f,i=s):f===r&&(i=-1)}if(i>=0)return i%10;throw new ie},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(Kt),C4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zo=(function(n){C4(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var c=i[0];a=i[1];var f=c-(a-c);f>=0&&(r=t.isRange(f,c,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new de;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new de;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,s){var c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var f=0,d=r,p=a.length,g=i,y=r;y<c;y++)if(t.get(y)!==g)s[f]++;else{if(f===p-1){if(Kt.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,y]);d+=s[0]+s[1];for(var x=s.slice(2,s.length),_=0;_<f-1;_++)s[_]=x[_];s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,g=!g}throw new ie},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,c=-1,f=a.length,d=0;d<f;d++){var p=a[d],g=Kt.patternMatchVariance(r,p,e.MAX_INDIVIDUAL_VARIANCE);g<s&&(s=g,c=d)}if(c>=0)return c;throw new ie},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(Kt),T4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O4=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),c=n.parseExtensionString(s),f=[new we((r[0]+r[1])/2,e),new we(a,e)],d=new _n(s,null,0,f,Ee.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=e.getSize(),f=t[1],d=0,p=0;p<5&&f<c;p++){var g=zo.decodeDigit(e,s,f,zo.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var y=(i=void 0,T4(s)),x=y.next();!x.done;x=y.next()){var _=x.value;f+=_}}catch(C){i={error:C}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}g>=10&&(d|=1<<4-p),p!==4&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(r.length!==5)throw new ie;var E=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==E)throw new ie;return f},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ie},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[hn.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},n})(),D4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R4=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),c=n.parseExtensionString(s),f=[new we((r[0]+r[1])/2,e),new we(a,e)],d=new _n(s,null,0,f,Ee.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=e.getSize(),f=t[1],d=0,p=0;p<2&&f<c;p++){var g=zo.decodeDigit(e,s,f,zo.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var y=(i=void 0,D4(s)),x=y.next();!x.done;x=y.next()){var _=x.value;f+=_}}catch(E){i={error:E}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}g>=10&&(d|=1<<1-p),p!==1&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(r.length!==2)throw new ie;if(parseInt(r.toString())%4!==d)throw new ie;return f},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[hn.ISSUE_NUMBER,parseInt(e)]])},n})(),N4=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=zo.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new O4;return a.decodeRow(e,t,i)}catch{var s=new R4;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),I4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Xt=(function(n){I4(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(c){return Int32Array.from(c)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(gt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var c=new we((a[0]+a[1])/2,t);s.foundPossibleResultPoint(c)}var f=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=f.rowOffset,p=f.resultString;if(s!=null){var g=new we(d,t);s.foundPossibleResultPoint(g)}var y=e.decodeEnd(r,d);if(s!=null){var x=new we((y[0]+y[1])/2,t);s.foundPossibleResultPoint(x)}var _=y[1],E=_+(_-y[0]);if(E>=r.getSize()||!r.isRange(_,E,!1))throw new ie;var C=p.toString();if(C.length<8)throw new de;if(!e.checkChecksum(C))throw new Ut;var b=(a[1]+a[0])/2,T=(y[1]+y[0])/2,O=this.getBarcodeFormat(),I=[new we(b,t),new we(T,t)],P=new _n(C,null,0,I,O,new Date().getTime()),F=0;try{var H=N4.decodeRow(t,r,y[1]);P.putMetadata(hn.UPC_EAN_EXTENSION,H.getText()),P.putAllMetadata(H.getResultMetadata()),P.addResultPoints(H.getResultPoints()),F=H.getText().length}catch{}var G=i==null?null:i.get(gt.ALLOWED_EAN_EXTENSIONS);if(G!=null){var V=!1;for(var Q in G)if(F.toString()===Q){V=!0;break}if(!V)throw new ie}return O===Ee.EAN_13||Ee.UPC_A,P},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new de;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new de;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(zo),k4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l0=(function(n){k4(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,c,f,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var p=t.getSize(),g=r[1],y=0,x=0;x<6&&g<p;x++){var _=Xt.decodeDigit(t,d,g,Xt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var E=(a=void 0,gy(d)),C=E.next();!C.done;C=E.next()){var b=C.value;g+=b}}catch(P){a={error:P}}finally{try{C&&!C.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}_>=10&&(y|=1<<5-x)}i=e.determineFirstDigit(i,y);var T=Xt.findGuardPattern(t,g,!0,Xt.MIDDLE_PATTERN,new Int32Array(Xt.MIDDLE_PATTERN.length).fill(0));g=T[1];for(var x=0;x<6&&g<p;x++){var _=Xt.decodeDigit(t,d,g,Xt.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var O=(c=void 0,gy(d)),I=O.next();!I.done;I=O.next()){var b=I.value;g+=b}}catch(H){c={error:H}}finally{try{I&&!I.done&&(f=O.return)&&f.call(O)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ee.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ie},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Xt),M4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},my=(function(n){M4(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,c,f,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var p=t.getSize(),g=r[1],y=0;y<4&&g<p;y++){var x=Xt.decodeDigit(t,d,g,Xt.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var _=(a=void 0,vy(d)),E=_.next();!E.done;E=_.next()){var C=E.value;g+=C}}catch(I){a={error:I}}finally{try{E&&!E.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}}var b=Xt.findGuardPattern(t,g,!0,Xt.MIDDLE_PATTERN,new Int32Array(Xt.MIDDLE_PATTERN.length).fill(0));g=b[1];for(var y=0;y<4&&g<p;y++){var x=Xt.decodeDigit(t,d,g,Xt.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var T=(c=void 0,vy(d)),O=T.next();!O.done;O=T.next()){var C=O.value;g+=C}}catch(F){c={error:F}}finally{try{O&&!O.done&&(f=T.return)&&f.call(T)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ee.EAN_8},e})(Xt),P4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yy=(function(n){P4(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new l0,t}return e.prototype.getBarcodeFormat=function(){return Ee.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new _n(r.substring(1),null,null,t.getResultPoints(),Ee.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ie},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Xt),j4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),B4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xy=(function(n){j4(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,c=this.decodeMiddleCounters.map(function(C){return C});c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var f=t.getSize(),d=r[1],p=0,g=0;g<6&&d<f;g++){var y=e.decodeDigit(t,c,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+y%10);try{for(var x=(a=void 0,B4(c)),_=x.next();!_.done;_=x.next()){var E=_.value;d+=E}}catch(C){a={error:C}}finally{try{_&&!_.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}y>=10&&(p|=1<<5-g)}return e.determineNumSysAndCheckDigit(new Le(i),p),d},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Xt.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw ie.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Ee.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Le;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Xt),L4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wh=(function(n){L4(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(gt.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Ee.EAN_13)>-1&&a.push(new l0),i.indexOf(Ee.UPC_A)>-1&&a.push(new yy),i.indexOf(Ee.EAN_8)>-1&&a.push(new my),i.indexOf(Ee.UPC_E)>-1&&a.push(new xy)),a.length===0&&(a.push(new l0),a.push(new yy),a.push(new my),a.push(new xy)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,s;try{for(var c=wy(this.readers),f=c.next();!f.done;f=c.next()){var d=f.value;try{var p=d.decodeRow(t,r,i),g=p.getBarcodeFormat()===Ee.EAN_13&&p.getText().charAt(0)==="0",y=i==null?null:i.get(gt.POSSIBLE_FORMATS),x=y==null||y.includes(Ee.UPC_A);if(g&&x){var _=p.getRawBytes(),E=new _n(p.getText().substring(1),_,_?_.length:null,p.getResultPoints(),Ee.UPC_A);return E.putAllMetadata(p.getResultMetadata()),E}return p}catch{}}}catch(C){a={error:C}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}throw new ie},e.prototype.reset=function(){var t,r;try{for(var i=wy(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(Kt),F4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),U4=(function(n){F4(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new ie;var s=this.codaBarDecodeRow(a.row);if(!s)throw new ie;return new _n(s,null,0,[new we(a.left,t),new we(a.right,t)],Ee.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],c=r[0],f=1,d=1;d<r.length;d++)r[d]===c?f++:(c=r[d],s.push(f),f=1);return s.push(f),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(f,d){return(f+d)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(f){return f<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var c=r.join("");return this.validCodaBarString(c)?c:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(Kt),V4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),z4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xa=(function(n){V4(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Kt.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ie},e.count=function(t){return We.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]>a&&(a=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]<a&&(a=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],s=a+t[2]+t[3],c=a/s;if(c>=e.MIN_FINDER_PATTERN_RATIO&&c<=e.MAX_FINDER_PATTERN_RATIO){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var p=z4(t),g=p.next();!g.done;g=p.next()){var y=g.value;y>d&&(d=y),y<f&&(f=y)}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return d<10*f}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(Kt),Eu=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),$2=(function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new we(r,a)),this.resultPoints.push(new we(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),H4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},No=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,s=0;try{for(var c=H4(e),f=c.next();!f.done;f=c.next()){var d=f.value;s+=d}}catch(T){i={error:T}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}for(var p=0,g=0,y=e.length,x=0;x<y-1;x++){var _=void 0;for(_=1,g|=1<<x;_<e[x];_++,g&=~(1<<x)){var E=n.combins(s-_-1,y-x-2);if(r&&g===0&&s-_-(y-x-1)>=y-x-1&&(E-=n.combins(s-_-(y-x),y-x-2)),y-x-1>1){for(var C=0,b=s-_-(y-x-2);b>t;b--)C+=n.combins(s-_-b-1,y-x-3);E-=C*(y-1-x)}else s-_>t&&E--;p+=E}s-=_}return p},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,s=1,c=e;c>r;c--)a*=c,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n})(),G4=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new an(r),a=0,s=e[0],c=s.getRightChar().getValue(),f=11;f>=0;--f)(c&1<<f)!==0&&i.set(a),a++;for(var f=1;f<e.length;++f){for(var d=e[f],p=d.getLeftChar().getValue(),g=11;g>=0;--g)(p&1<<g)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var y=d.getRightChar().getValue(),g=11;g>=0;--g)(y&1<<g)!==0&&i.set(a),a++}return i},n})(),ga=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),Y0=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),$4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hr=(function(n){$4(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Y0),q4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),va=(function(n){q4(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Y0),X4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Oo=(function(n){X4(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new de;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Y0),eu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y4=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,s,c,f,d;if(!e)return null;if(e.length<2)throw new ie;var p=e.substring(0,2);try{for(var g=eu(n.TWO_DIGIT_DATA_LENGTH),y=g.next();!y.done;y=g.next()){var x=y.value;if(x[0]===p)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,x[2],e):n.processFixedAI(2,x[1],e)}}catch(F){t={error:F}}finally{try{y&&!y.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}if(e.length<3)throw new ie;var _=e.substring(0,3);try{for(var E=eu(n.THREE_DIGIT_DATA_LENGTH),C=E.next();!C.done;C=E.next()){var x=C.value;if(x[0]===_)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,x[2],e):n.processFixedAI(3,x[1],e)}}catch(F){i={error:F}}finally{try{C&&!C.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}try{for(var b=eu(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),T=b.next();!T.done;T=b.next()){var x=T.value;if(x[0]===_)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],e):n.processFixedAI(4,x[1],e)}}catch(F){s={error:F}}finally{try{T&&!T.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}if(e.length<4)throw new ie;var O=e.substring(0,4);try{for(var I=eu(n.FOUR_DIGIT_DATA_LENGTH),P=I.next();!P.done;P=I.next()){var x=P.value;if(x[0]===O)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],e):n.processFixedAI(4,x[1],e)}}catch(F){f={error:F}}finally{try{P&&!P.done&&(d=I.return)&&d.call(I)}finally{if(f)throw f.error}}throw new ie},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ie;var i=r.substring(0,e);if(r.length<e+t)throw new ie;var a=r.substring(e,e+t),s=r.substring(e+t),c="("+i+")"+a,f=n.parseFieldsInGeneralPurpose(s);return f==null?c:c+f},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var s=r.substring(e,a),c=r.substring(a),f="("+i+")"+s,d=n.parseFieldsInGeneralPurpose(c);return d==null?f:f+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),du=(function(){function n(e){this.buffer=new Le,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=Y4.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Oo(this.information.getSize(),Oo.FNC1,Oo.FNC1):new Oo(this.information.getSize(),t-1,Oo.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Oo(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new va(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new va(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new va(this.current.getPosition(),this.buffer.toString()):t=new va(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ga(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new va(this.current.getPosition(),this.buffer.toString());return new ga(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ga(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new va(this.current.getPosition(),this.buffer.toString());return new ga(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ga(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new va(this.current.getPosition(),this.buffer.toString());return new ga(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ga(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new hr(e+5,hr.FNC1);if(t>=5&&t<15)return new hr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new hr(e+7,""+(r+1));if(r>=90&&r<116)return new hr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new de}return new hr(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new hr(e+5,hr.FNC1);if(t>=5&&t<15)return new hr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new hr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Nl("Decoding invalid alphanumeric value: "+r)}return new hr(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),q2=(function(){function n(e){this.information=e,this.generalDecoder=new du(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),W4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mr=(function(n){W4(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(q2),K4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Z4=(function(n){K4(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Le;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(mr),Q4=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),J4=(function(n){Q4(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Le;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(q2),e8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hu=(function(n){e8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),c=1e5,f=0;f<5;++f)s/c===0&&t.append("0"),c/=10;t.append(s)},e})(mr),t8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),X2=(function(n){t8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+hu.GTIN_SIZE+e.WEIGHT_SIZE)throw new ie;var t=new Le;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+hu.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(hu),n8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),r8=(function(n){n8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(X2),i8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),a8=(function(n){i8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(X2),o8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),s8=(function(n){o8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+mr.GTIN_SIZE)throw new ie;var t=new Le;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+mr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+mr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(mr),l8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),c8=(function(n){l8(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+mr.GTIN_SIZE)throw new ie;var t=new Le;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+mr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+mr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+mr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(mr),u8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Bi=(function(n){u8(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ie;var t=new Le;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var c=i;c/10===0&&t.append("0"),t.append(c),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(hu);function f8(n){try{if(n.get(1))return new Z4(n);if(!n.get(2))return new J4(n);var e=du.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new r8(n);case 5:return new a8(n)}var t=du.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new s8(n);case 13:return new c8(n)}var r=du.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Bi(n,"310","11");case 57:return new Bi(n,"320","11");case 58:return new Bi(n,"310","13");case 59:return new Bi(n,"320","13");case 60:return new Bi(n,"310","15");case 61:return new Bi(n,"320","15");case 62:return new Bi(n,"310","17");case 63:return new Bi(n,"320","17")}}catch(i){throw console.log(i),new Nl("unknown decoder: "+n)}}var _y=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),d8=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),h8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Li=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p8=(function(n){h8(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof ie){if(!this.pairs.length)throw new ie;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new ie},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,s=r;s<this.rows.length;s++){var c=this.rows[s];this.pairs.length=0;try{for(var f=(i=void 0,Li(t)),d=f.next();!d.done;d=f.next()){var p=d.value;this.pairs.push(p.getPairs())}}catch(y){i={error:y}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}if(this.pairs.push(c.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(t);g.push(c);try{return this.checkRows(g,s+1)}catch(y){console.log(y)}}}throw new ie},e.isValidSequence=function(t){var r,i;try{for(var a=Li(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var c=s.value;if(!(t.length>c.length)){for(var f=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!==c[d]){f=!1;break}if(f)return!0}}}catch(p){r={error:p}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var c=this.rows[i];if(c.getRowNumber()>t){s=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new d8(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,s,c,f,d;try{for(var p=Li(r),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.getPairs().length!==t.length){var x=!0;try{for(var _=(s=void 0,Li(y.getPairs())),E=_.next();!E.done;E=_.next()){var C=E.value,b=!1;try{for(var T=(f=void 0,Li(t)),O=T.next();!O.done;O=T.next()){var I=O.value;if(_y.equals(C,I)){b=!0;break}}}catch(P){f={error:P}}finally{try{O&&!O.done&&(d=T.return)&&d.call(T)}finally{if(f)throw f.error}}b||(x=!1)}}catch(P){s={error:P}}finally{try{E&&!E.done&&(c=_.return)&&c.call(_)}finally{if(s)throw s.error}}}}}catch(P){i={error:P}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,s,c,f,d;try{for(var p=Li(r),g=p.next();!g.done;g=p.next()){var y=g.value,x=!0;try{for(var _=(s=void 0,Li(t)),E=_.next();!E.done;E=_.next()){var C=E.value,b=!1;try{for(var T=(f=void 0,Li(y.getPairs())),O=T.next();!O.done;O=T.next()){var I=O.value;if(C.equals(I)){b=!0;break}}}catch(P){f={error:P}}finally{try{O&&!O.done&&(d=T.return)&&d.call(T)}finally{if(f)throw f.error}}if(!b){x=!1;break}}}catch(P){s={error:P}}finally{try{E&&!E.done&&(c=_.return)&&c.call(_)}finally{if(s)throw s.error}}if(x)return!0}}catch(P){i={error:P}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=G4.buildBitArray(t),i=f8(r),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),f=[s[0],s[1],c[0],c[1]];return new _n(a,null,null,f,Ee.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,c=1;c<this.pairs.size();++c){var f=this.pairs.get(c);a+=f.getLeftChar().getChecksumPortion(),s++;var d=f.getRightChar();d!=null&&(a+=d.getChecksumPortion(),s++)}a%=211;var p=211*(s-4)+a;return p===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,c=!0,f=-1;do this.findNextPair(t,r,f),s=this.parseFoundFinderPattern(t,i,a),s===null?f=e.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);var d=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ie;var p;try{p=this.decodeDataCharacter(t,s,a,!1)}catch(g){p=null,console.log(g)}return new _y(d,p,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),c;if(i>=0)c=i;else if(this.isEmptyPair(r))c=0;else{var f=r[r.length-1];c=f.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var p=!1;c<s&&(p=!t.get(c),!!p);)c++;for(var g=0,y=c,x=c;x<s;x++)if(t.get(x)!==p)a[g]++;else{if(g===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=y,this.startEnd[1]=x;return}d&&e.reverseCounters(a),y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,p=!p}throw new ie},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,s,c;if(i){for(var f=this.startEnd[0]-1;f>=0&&!t.get(f);)f--;f++,a=this.startEnd[0]-f,s=f,c=this.startEnd[1]}else s=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];var d=this.getDecodeFinderCounters();pt.arraycopy(d,0,d,1,d.length-1),d[0]=a;var p;try{p=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new $2(p,[s,c],s,c,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var s=this.getDataCharacterCounters(),c=0;c<s.length;c++)s[c]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var f=0,d=s.length-1;f<d;f++,d--){var p=s[f];s[f]=s[d],s[d]=p}}var g=17,y=We.sum(new Int32Array(s))/g,x=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(y-x)/x>.3)throw new ie;for(var _=this.getOddCounts(),E=this.getEvenCounts(),C=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),f=0;f<s.length;f++){var T=1*s[f]/y,O=T+.5;if(O<1){if(T<.3)throw new ie;O=1}else if(O>8){if(T>8.7)throw new ie;O=8}var I=f/2;(f&1)===0?(_[I]=O,C[I]=T-O):(E[I]=O,b[I]=T-O)}this.adjustOddEvenCounts(g);for(var P=4*r.getValue()+(i?0:2)+(a?0:1)-1,F=0,H=0,f=_.length-1;f>=0;f--){if(e.isNotA1left(r,i,a)){var G=e.WEIGHTS[P][2*f];H+=_[f]*G}F+=_[f]}for(var V=0,f=E.length-1;f>=0;f--)if(e.isNotA1left(r,i,a)){var G=e.WEIGHTS[P][2*f+1];V+=E[f]*G}var Q=H+V;if((F&1)!==0||F>13||F<4)throw new ie;var re=(13-F)/2,te=e.SYMBOL_WIDEST[re],ae=9-te,fe=No.getRSSvalue(_,te,!0),L=No.getRSSvalue(E,ae,!1),S=e.EVEN_TOTAL_SUBSET[re],k=e.GSUM[re],U=fe*S+L+k;return new Eu(U,Q)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=We.sum(new Int32Array(this.getOddCounts())),i=We.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var c=!1,f=!1;i>13?f=!0:i<4&&(c=!0);var d=r+i-t,p=(r&1)===1,g=(i&1)===0;if(d===1)if(p){if(g)throw new ie;s=!0}else{if(!g)throw new ie;f=!0}else if(d===-1)if(p){if(g)throw new ie;a=!0}else{if(!g)throw new ie;c=!0}else if(d===0){if(p){if(!g)throw new ie;r<i?(a=!0,f=!0):(s=!0,c=!0)}else if(g)throw new ie}else throw new ie;if(a){if(s)throw new ie;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new ie;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(xa),g8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),v8=(function(n){g8(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(Eu),m8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_h=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},by=(function(n){m8(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,s,c,f,d=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var p=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var g=_h(this.possibleLeftPairs),y=g.next();!y.done;y=g.next()){var x=y.value;if(x.getCount()>1)try{for(var _=(c=void 0,_h(this.possibleRightPairs)),E=_.next();!E.done;E=_.next()){var C=E.value;if(C.getCount()>1&&e.checkChecksum(x,C))return e.constructResult(x,C)}}catch(b){c={error:b}}finally{try{E&&!E.done&&(f=_.return)&&f.call(_)}finally{if(c)throw c.error}}}}catch(b){a={error:b}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}throw new ie},e.addOrTally=function(t,r){var i,a;if(r!=null){var s=!1;try{for(var c=_h(t),f=c.next();!f.done;f=c.next()){var d=f.value;if(d.getValue()===r.getValue()){d.incrementCount(),s=!0;break}}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),s=new Le,c=13-a.length;c>0;c--)s.append("0");s.append(a);for(var f=0,c=0;c<13;c++){var d=s.charAt(c).charCodeAt(0)-48;f+=(c&1)===0?3*d:d}f=10-f%10,f===10&&(f=0),s.append(f.toString());var p=t.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new _n(s.toString(),null,0,[p[0],p[1],g[0],g[1]],Ee.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var s=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,s),f=a==null?null:a.get(gt.NEED_RESULT_POINT_CALLBACK);if(f!=null){var d=(s[0]+s[1])/2;r&&(d=t.getSize()-1-d),f.foundPossibleResultPoint(new we(d,i))}var p=this.decodeDataCharacter(t,c,!0),g=this.decodeDataCharacter(t,c,!1);return new v8(1597*p.getValue()+g.getValue(),p.getChecksumPortion()+4*g.getChecksumPortion(),c)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)Kt.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Kt.recordPattern(t,r.getStartEnd()[1]+1,a);for(var c=0,f=a.length-1;c<f;c++,f--){var d=a[c];a[c]=a[f],a[f]=d}}for(var p=i?16:15,g=We.sum(new Int32Array(a))/p,y=this.getOddCounts(),x=this.getEvenCounts(),_=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors(),c=0;c<a.length;c++){var C=a[c]/g,b=Math.floor(C+.5);b<1?b=1:b>8&&(b=8);var T=Math.floor(c/2);(c&1)===0?(y[T]=b,_[T]=C-b):(x[T]=b,E[T]=C-b)}this.adjustOddEvenCounts(i,p);for(var O=0,I=0,c=y.length-1;c>=0;c--)I*=9,I+=y[c],O+=y[c];for(var P=0,F=0,c=x.length-1;c>=0;c--)P*=9,P+=x[c],F+=x[c];var H=I+3*P;if(i){if((O&1)!==0||O>12||O<4)throw new ie;var G=(12-O)/2,V=e.OUTSIDE_ODD_WIDEST[G],Q=9-V,re=No.getRSSvalue(y,V,!1),te=No.getRSSvalue(x,Q,!0),ae=e.OUTSIDE_EVEN_TOTAL_SUBSET[G],fe=e.OUTSIDE_GSUM[G];return new Eu(re*ae+te+fe,H)}else{if((F&1)!==0||F>10||F<4)throw new ie;var G=(10-F)/2,V=e.INSIDE_ODD_WIDEST[G],Q=9-V,re=No.getRSSvalue(y,V,!0),te=No.getRSSvalue(x,Q,!1),L=e.INSIDE_ODD_TOTAL_SUBSET[G],fe=e.INSIDE_GSUM[G];return new Eu(te*L+re+fe,H)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,c=0;c<a&&(s=!t.get(c),r!==s);)c++;for(var f=0,d=c,p=c;p<a;p++)if(t.get(p)!==s)i[f]++;else{if(f===3){if(xa.isFinderPattern(i))return[d,p];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,s=!s}throw new ie},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var s=t.get(a[0]),c=a[0]-1;c>=0&&s!==t.get(c);)c--;c++;var f=a[0]-c,d=this.getDecodeFinderCounters(),p=new Int32Array(d.length);pt.arraycopy(d,0,p,1,d.length-1),p[0]=f;var g=this.parseFinderValue(p,e.FINDER_PATTERNS),y=c,x=a[1];return i&&(y=t.getSize()-1-y,x=t.getSize()-1-x),new $2(g,[c,a[1]],y,x,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=We.sum(new Int32Array(this.getOddCounts())),a=We.sum(new Int32Array(this.getEvenCounts())),s=!1,c=!1,f=!1,d=!1;t?(i>12?c=!0:i<4&&(s=!0),a>12?d=!0:a<4&&(f=!0)):(i>11?c=!0:i<5&&(s=!0),a>10?d=!0:a<4&&(f=!0));var p=i+a-r,g=(i&1)===(t?1:0),y=(a&1)===1;if(p===1)if(g){if(y)throw new ie;c=!0}else{if(!y)throw new ie;d=!0}else if(p===-1)if(g){if(y)throw new ie;s=!0}else{if(!y)throw new ie;f=!0}else if(p===0){if(g){if(!y)throw new ie;i<a?(s=!0,d=!0):(c=!0,f=!0)}else if(y)throw new ie}else throw new ie;if(s){if(c)throw new ie;xa.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&xa.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(d)throw new ie;xa.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&xa.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(xa),y8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Io=(function(n){y8(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(gt.POSSIBLE_FORMATS):null,a=t&&t.get(gt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(gt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Ee.EAN_13)||i.includes(Ee.UPC_A)||i.includes(Ee.EAN_8)||i.includes(Ee.UPC_E))&&r.readers.push(new wh(t)),i.includes(Ee.CODE_39)&&r.readers.push(new dy(a,s)),i.includes(Ee.CODE_93)&&r.readers.push(new hy),i.includes(Ee.CODE_128)&&r.readers.push(new fy),i.includes(Ee.ITF)&&r.readers.push(new py),i.includes(Ee.CODABAR)&&r.readers.push(new U4),i.includes(Ee.RSS_14)&&r.readers.push(new by),i.includes(Ee.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new p8))),r.readers.length===0&&(r.readers.push(new wh(t)),r.readers.push(new dy),r.readers.push(new hy),r.readers.push(new wh(t)),r.readers.push(new fy),r.readers.push(new py),r.readers.push(new by)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new ie},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(Kt),x8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){x8(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Io(r),t,r)||this}return e})(Yo);var Ey=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tt=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),Je=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),w8=(function(){function n(e,t,r,i,a,s){var c,f;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var d=0,p=s.getECCodewords(),g=s.getECBlocks();try{for(var y=Ey(g),x=y.next();!x.done;x=y.next()){var _=x.value;d+=_.getCount()*(_.getDataCodewords()+p)}}catch(E){c={error:E}}finally{try{x&&!x.done&&(f=y.return)&&f.call(y)}finally{if(c)throw c.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new de;try{for(var a=Ey(n.VERSIONS),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.symbolSizeRows===e&&c.symbolSizeColumns===t)return c}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new de},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new tt(5,new Je(1,3))),new n(2,12,12,10,10,new tt(7,new Je(1,5))),new n(3,14,14,12,12,new tt(10,new Je(1,8))),new n(4,16,16,14,14,new tt(12,new Je(1,12))),new n(5,18,18,16,16,new tt(14,new Je(1,18))),new n(6,20,20,18,18,new tt(18,new Je(1,22))),new n(7,22,22,20,20,new tt(20,new Je(1,30))),new n(8,24,24,22,22,new tt(24,new Je(1,36))),new n(9,26,26,24,24,new tt(28,new Je(1,44))),new n(10,32,32,14,14,new tt(36,new Je(1,62))),new n(11,36,36,16,16,new tt(42,new Je(1,86))),new n(12,40,40,18,18,new tt(48,new Je(1,114))),new n(13,44,44,20,20,new tt(56,new Je(1,144))),new n(14,48,48,22,22,new tt(68,new Je(1,174))),new n(15,52,52,24,24,new tt(42,new Je(2,102))),new n(16,64,64,14,14,new tt(56,new Je(2,140))),new n(17,72,72,16,16,new tt(36,new Je(4,92))),new n(18,80,80,18,18,new tt(48,new Je(4,114))),new n(19,88,88,20,20,new tt(56,new Je(4,144))),new n(20,96,96,22,22,new tt(68,new Je(4,174))),new n(21,104,104,24,24,new tt(56,new Je(6,136))),new n(22,120,120,18,18,new tt(68,new Je(6,175))),new n(23,132,132,20,20,new tt(62,new Je(8,163))),new n(24,144,144,22,22,new tt(62,new Je(8,156),new Je(2,155))),new n(25,8,18,6,16,new tt(7,new Je(1,5))),new n(26,8,32,6,14,new tt(11,new Je(1,10))),new n(27,12,26,10,24,new tt(14,new Je(1,16))),new n(28,12,36,10,16,new tt(18,new Je(1,22))),new n(29,16,36,14,16,new tt(24,new Je(1,32))),new n(30,16,48,14,22,new tt(28,new Je(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),_8=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new de;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Pr(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return w8.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),c=!1,f=!1,d=!1,p=!1;do if(r===a&&i===0&&!c)e[t++]=this.readCorner1(a,s)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!f)e[t++]=this.readCorner2(a,s)&255,r-=2,i+=2,f=!0;else if(r===a+4&&i===2&&(s&7)===0&&!d)e[t++]=this.readCorner3(a,s)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(s&7)===4&&!p)e[t++]=this.readCorner4(a,s)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(t!==this.version.getTotalCodewords())throw new de;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Se("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,c=r/a|0,f=s*i,d=c*a,p=new Pr(d,f),g=0;g<s;++g)for(var y=g*i,x=0;x<c;++x)for(var _=x*a,E=0;E<i;++E)for(var C=g*(i+2)+1+E,b=y+E,T=0;T<a;++T){var O=x*(a+2)+1+T;if(e.get(O,C)){var I=_+T;p.set(I,b)}}return p},n})(),Sy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b8=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,s,c=t.getECBlocks(),f=0,d=c.getECBlocks();try{for(var p=Sy(d),g=p.next();!g.done;g=p.next()){var y=g.value;f+=y.getCount()}}catch(fe){r={error:fe}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var x=new Array(f),_=0;try{for(var E=Sy(d),C=E.next();!C.done;C=E.next())for(var y=C.value,b=0;b<y.getCount();b++){var T=y.getDataCodewords(),O=c.getECCodewords()+T;x[_++]=new n(T,new Uint8Array(O))}}catch(fe){a={error:fe}}finally{try{C&&!C.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}for(var I=x[0].codewords.length,P=I-c.getECCodewords(),F=P-1,H=0,b=0;b<F;b++)for(var G=0;G<_;G++)x[G].codewords[b]=e[H++];for(var V=t.getVersionNumber()===24,Q=V?8:_,G=0;G<Q;G++)x[G].codewords[P-1]=e[H++];for(var re=x[0].codewords.length,b=P;b<re;b++)for(var G=0;G<_;G++){var te=V?(G+8)%_:G,ae=V&&te>7?b-1:b;x[te].codewords[ae]=e[H++]}if(H!==e.length)throw new Se;return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),Y2=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Se(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,c=e<s?e:s,f=s-c,d=255>>8-c<<f;t=(a[i]&d)>>f,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var f=8-e,d=255>>f<<f;t=t<<e|(a[i]&d)>>f,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),Gt;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gt||(Gt={}));var E8=(function(){function n(){}return n.decode=function(e){var t=new Y2(e),r=new Le,i=new Le,a=new Array,s=Gt.ASCII_ENCODE;do if(s===Gt.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case Gt.C40_ENCODE:this.decodeC40Segment(t,r);break;case Gt.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Gt.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Gt.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new de}s=Gt.ASCII_ENCODE}while(s!==Gt.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Fu(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new de;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Gt.ASCII_ENCODE;if(a===129)return Gt.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return Gt.C40_ENCODE;case 231:return Gt.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Gt.ANSIX12_ENCODE;case 239:return Gt.TEXT_ENCODE;case 240:return Gt.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new de;break}}while(e.available()>0);return Gt.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var c=0;c<3;c++){var f=i[c];switch(a){case 0:if(f<3)a=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[f];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new de;break;case 1:r?(t.append(String.fromCharCode(f+128)),r=!1):t.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[f];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(f){case 27:t.append("");break;case 30:r=!0;break;default:throw new de}a=0;break;case 3:r?(t.append(String.fromCharCode(f+224)),r=!1):t.append(String.fromCharCode(f+96)),a=0;break;default:throw new de}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var c=0;c<3;c++){var f=i[c];switch(a){case 0:if(f<3)a=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[f];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new de;break;case 1:r?(t.append(String.fromCharCode(f+128)),r=!1):t.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[f];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(f){case 27:t.append("");break;case 30:r=!0;break;default:throw new de}a=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[f];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d),a=0}else throw new de;break;default:throw new de}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new de;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new de;for(var c=new Uint8Array(s),f=0;f<s;f++){if(e.available()<8)throw new de;c[f]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{t.append(lr.decode(c,qe.ISO88591))}catch(d){throw new Nl("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),S8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A8=(function(){function n(){this.rsDecoder=new Uu(Bn.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new _8(e),a=i.getVersion(),s=i.readCodewords(),c=b8.getDataBlocks(s,a),f=0;try{for(var d=S8(c),p=d.next();!p.done;p=d.next()){var g=p.value;f+=g.getNumDataCodewords()}}catch(O){t={error:O}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}for(var y=new Uint8Array(f),x=c.length,_=0;_<x;_++){var E=c[_],C=E.getCodewords(),b=E.getNumDataCodewords();this.correctErrors(C,b);for(var T=0;T<b;T++)y[T*x+_]=C[T]}return E8.decode(y)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Ut}for(var i=0;i<t;i++)e[i]=r[i]},n})(),C8=(function(){function n(e){this.image=e,this.rectangleDetector=new s0(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new ie;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],s=t[3],c=this.transitionsBetween(r,s)+1,f=this.transitionsBetween(a,s)+1;(c&1)===1&&(c+=1),(f&1)===1&&(f+=1),4*c<7*f&&4*f<7*c&&(c=f=Math.max(c,f));var d=n.sampleGrid(this.image,r,i,a,s,c,f);return new q0(d,[r,i,a,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new we(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new we(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,r),c=this.transitionsBetween(r,i),f=this.transitionsBetween(i,a),d=this.transitionsBetween(a,t),p=s,g=[a,t,r,i];return p>c&&(p=c,g[0]=t,g[1]=r,g[2]=i,g[3]=a),p>f&&(p=f,g[0]=r,g[1]=i,g[2]=a,g[3]=t),p>d&&(g[0]=i,g[1]=a,g[2]=t,g[3]=r),g},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),c=n.shiftPoint(r,i,(s+1)*4),f=n.shiftPoint(i,r,(s+1)*4),d=this.transitionsBetween(c,t),p=this.transitionsBetween(f,a);return d<p?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),c=this.transitionsBetween(r,a),f=n.shiftPoint(t,r,(c+1)*4),d=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(f,a),c=this.transitionsBetween(d,a);var p=new we(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),g=new we(a.getX()+(t.getX()-r.getX())/(c+1),a.getY()+(t.getY()-r.getY())/(c+1));if(!this.isValid(p))return this.isValid(g)?g:null;if(!this.isValid(g))return p;var y=this.transitionsBetween(f,p)+this.transitionsBetween(d,p),x=this.transitionsBetween(f,g)+this.transitionsBetween(d,g);return y>x?p:g},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,c=this.transitionsBetween(i,a)+1,f=n.shiftPoint(t,r,c*4),d=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(f,a)+1,c=this.transitionsBetween(d,a)+1,(s&1)===1&&(s+=1),(c&1)===1&&(c+=1);var p=(t.getX()+r.getX()+i.getX()+a.getX())/4,g=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,p,g),r=n.moveAway(r,p,g),i=n.moveAway(i,p,g),a=n.moveAway(a,p,g);var y,x;return f=n.shiftPoint(t,r,c*4),f=n.shiftPoint(f,a,s*4),y=n.shiftPoint(r,t,c*4),y=n.shiftPoint(y,i,s*4),d=n.shiftPoint(i,a,c*4),d=n.shiftPoint(d,r,s*4),x=n.shiftPoint(a,i,c*4),x=n.shiftPoint(x,t,s*4),[f,y,d,x]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,s,c){var f=X0.getInstance();return f.sampleGrid(e,s,c,.5,.5,s-.5,.5,s-.5,c-.5,.5,c-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),c=Math.abs(s-i)>Math.abs(a-r);if(c){var f=r;r=i,i=f,f=a,a=s,s=f}for(var d=Math.abs(a-r),p=Math.abs(s-i),g=-d/2,y=i<s?1:-1,x=r<a?1:-1,_=0,E=this.image.get(c?i:r,c?r:i),C=r,b=i;C!==a;C+=x){var T=this.image.get(c?b:C,c?C:b);if(T!==E&&(_++,E=T),g+=p,g>0){if(b===s)break;b+=y,g-=d}}return _},n})(),Su=(function(){function n(){this.decoder=new A8}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(gt.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new C8(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var c=r.getRawBytes(),f=new _n(r.getText(),c,8*c.length,i,Ee.DATA_MATRIX,pt.currentTimeMillis()),d=r.getByteSegments();d!=null&&f.putMetadata(hn.BYTE_SEGMENTS,d);var p=r.getECLevel();return p!=null&&f.putMetadata(hn.ERROR_CORRECTION_LEVEL,p),f},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ie;var i=this.moduleSize(t,e),a=t[1],s=r[1],c=t[0],f=r[0],d=(f-c+1)/i,p=(s-a+1)/i;if(d<=0||p<=0)throw new ie;var g=i/2;a+=g,c+=g;for(var y=new Pr(d,p),x=0;x<p;x++)for(var _=a+x*i,E=0;E<d;E++)e.get(c+E*i,_)&&y.set(E,x);return y},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new ie;var s=i-e[0];if(s===0)throw new ie;return s},n.NO_POINTS=[],n})(),T8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){T8(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Su,t)||this}return e})(Yo);var ko;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(ko||(ko={}));var O8=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new jt(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Se;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(ko.L,"L",1),n.M=new n(ko.M,"M",0),n.Q=new n(ko.Q,"Q",3),n.H=new n(ko.H,"H",2),n})(),D8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W2=(function(){function n(e){this.errorCorrectionLevel=O8.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Ue.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var c=D8(n.FORMAT_INFO_DECODE_LOOKUP),f=c.next();!f.done;f=c.next()){var d=f.value,p=d[0];if(p===e||p===t)return new n(d[1]);var g=n.numBitsDiffering(e,p);g<a&&(s=d[1],a=g),e!==t&&(g=n.numBitsDiffering(t,p),g<a&&(s=d[1],a=g))}}catch(y){r={error:y}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),R8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=R8(i),s=a.next();!s.done;s=a.next()){var c=s.value;r+=c.getCount()}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),M=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),N8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Aa=(function(){function n(e,t){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var c=0,f=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var p=N8(d),g=p.next();!g.done;g=p.next()){var y=g.value;c+=y.getCount()*(y.getDataCodewords()+f)}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new de;try{return this.getVersionForNumber((e-17)/4)}catch{throw new de}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Se;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var s=W2.numBitsDiffering(e,a);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Pr(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new W(7,new M(1,19)),new W(10,new M(1,16)),new W(13,new M(1,13)),new W(17,new M(1,9))),new n(2,Int32Array.from([6,18]),new W(10,new M(1,34)),new W(16,new M(1,28)),new W(22,new M(1,22)),new W(28,new M(1,16))),new n(3,Int32Array.from([6,22]),new W(15,new M(1,55)),new W(26,new M(1,44)),new W(18,new M(2,17)),new W(22,new M(2,13))),new n(4,Int32Array.from([6,26]),new W(20,new M(1,80)),new W(18,new M(2,32)),new W(26,new M(2,24)),new W(16,new M(4,9))),new n(5,Int32Array.from([6,30]),new W(26,new M(1,108)),new W(24,new M(2,43)),new W(18,new M(2,15),new M(2,16)),new W(22,new M(2,11),new M(2,12))),new n(6,Int32Array.from([6,34]),new W(18,new M(2,68)),new W(16,new M(4,27)),new W(24,new M(4,19)),new W(28,new M(4,15))),new n(7,Int32Array.from([6,22,38]),new W(20,new M(2,78)),new W(18,new M(4,31)),new W(18,new M(2,14),new M(4,15)),new W(26,new M(4,13),new M(1,14))),new n(8,Int32Array.from([6,24,42]),new W(24,new M(2,97)),new W(22,new M(2,38),new M(2,39)),new W(22,new M(4,18),new M(2,19)),new W(26,new M(4,14),new M(2,15))),new n(9,Int32Array.from([6,26,46]),new W(30,new M(2,116)),new W(22,new M(3,36),new M(2,37)),new W(20,new M(4,16),new M(4,17)),new W(24,new M(4,12),new M(4,13))),new n(10,Int32Array.from([6,28,50]),new W(18,new M(2,68),new M(2,69)),new W(26,new M(4,43),new M(1,44)),new W(24,new M(6,19),new M(2,20)),new W(28,new M(6,15),new M(2,16))),new n(11,Int32Array.from([6,30,54]),new W(20,new M(4,81)),new W(30,new M(1,50),new M(4,51)),new W(28,new M(4,22),new M(4,23)),new W(24,new M(3,12),new M(8,13))),new n(12,Int32Array.from([6,32,58]),new W(24,new M(2,92),new M(2,93)),new W(22,new M(6,36),new M(2,37)),new W(26,new M(4,20),new M(6,21)),new W(28,new M(7,14),new M(4,15))),new n(13,Int32Array.from([6,34,62]),new W(26,new M(4,107)),new W(22,new M(8,37),new M(1,38)),new W(24,new M(8,20),new M(4,21)),new W(22,new M(12,11),new M(4,12))),new n(14,Int32Array.from([6,26,46,66]),new W(30,new M(3,115),new M(1,116)),new W(24,new M(4,40),new M(5,41)),new W(20,new M(11,16),new M(5,17)),new W(24,new M(11,12),new M(5,13))),new n(15,Int32Array.from([6,26,48,70]),new W(22,new M(5,87),new M(1,88)),new W(24,new M(5,41),new M(5,42)),new W(30,new M(5,24),new M(7,25)),new W(24,new M(11,12),new M(7,13))),new n(16,Int32Array.from([6,26,50,74]),new W(24,new M(5,98),new M(1,99)),new W(28,new M(7,45),new M(3,46)),new W(24,new M(15,19),new M(2,20)),new W(30,new M(3,15),new M(13,16))),new n(17,Int32Array.from([6,30,54,78]),new W(28,new M(1,107),new M(5,108)),new W(28,new M(10,46),new M(1,47)),new W(28,new M(1,22),new M(15,23)),new W(28,new M(2,14),new M(17,15))),new n(18,Int32Array.from([6,30,56,82]),new W(30,new M(5,120),new M(1,121)),new W(26,new M(9,43),new M(4,44)),new W(28,new M(17,22),new M(1,23)),new W(28,new M(2,14),new M(19,15))),new n(19,Int32Array.from([6,30,58,86]),new W(28,new M(3,113),new M(4,114)),new W(26,new M(3,44),new M(11,45)),new W(26,new M(17,21),new M(4,22)),new W(26,new M(9,13),new M(16,14))),new n(20,Int32Array.from([6,34,62,90]),new W(28,new M(3,107),new M(5,108)),new W(26,new M(3,41),new M(13,42)),new W(30,new M(15,24),new M(5,25)),new W(28,new M(15,15),new M(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new W(28,new M(4,116),new M(4,117)),new W(26,new M(17,42)),new W(28,new M(17,22),new M(6,23)),new W(30,new M(19,16),new M(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new W(28,new M(2,111),new M(7,112)),new W(28,new M(17,46)),new W(30,new M(7,24),new M(16,25)),new W(24,new M(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new W(30,new M(4,121),new M(5,122)),new W(28,new M(4,47),new M(14,48)),new W(30,new M(11,24),new M(14,25)),new W(30,new M(16,15),new M(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new W(30,new M(6,117),new M(4,118)),new W(28,new M(6,45),new M(14,46)),new W(30,new M(11,24),new M(16,25)),new W(30,new M(30,16),new M(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new W(26,new M(8,106),new M(4,107)),new W(28,new M(8,47),new M(13,48)),new W(30,new M(7,24),new M(22,25)),new W(30,new M(22,15),new M(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new W(28,new M(10,114),new M(2,115)),new W(28,new M(19,46),new M(4,47)),new W(28,new M(28,22),new M(6,23)),new W(30,new M(33,16),new M(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new W(30,new M(8,122),new M(4,123)),new W(28,new M(22,45),new M(3,46)),new W(30,new M(8,23),new M(26,24)),new W(30,new M(12,15),new M(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new W(30,new M(3,117),new M(10,118)),new W(28,new M(3,45),new M(23,46)),new W(30,new M(4,24),new M(31,25)),new W(30,new M(11,15),new M(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new W(30,new M(7,116),new M(7,117)),new W(28,new M(21,45),new M(7,46)),new W(30,new M(1,23),new M(37,24)),new W(30,new M(19,15),new M(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new W(30,new M(5,115),new M(10,116)),new W(28,new M(19,47),new M(10,48)),new W(30,new M(15,24),new M(25,25)),new W(30,new M(23,15),new M(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new W(30,new M(13,115),new M(3,116)),new W(28,new M(2,46),new M(29,47)),new W(30,new M(42,24),new M(1,25)),new W(30,new M(23,15),new M(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new W(30,new M(17,115)),new W(28,new M(10,46),new M(23,47)),new W(30,new M(10,24),new M(35,25)),new W(30,new M(19,15),new M(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new W(30,new M(17,115),new M(1,116)),new W(28,new M(14,46),new M(21,47)),new W(30,new M(29,24),new M(19,25)),new W(30,new M(11,15),new M(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new W(30,new M(13,115),new M(6,116)),new W(28,new M(14,46),new M(23,47)),new W(30,new M(44,24),new M(7,25)),new W(30,new M(59,16),new M(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new W(30,new M(12,121),new M(7,122)),new W(28,new M(12,47),new M(26,48)),new W(30,new M(39,24),new M(14,25)),new W(30,new M(22,15),new M(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new W(30,new M(6,121),new M(14,122)),new W(28,new M(6,47),new M(34,48)),new W(30,new M(46,24),new M(10,25)),new W(30,new M(2,15),new M(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new W(30,new M(17,122),new M(4,123)),new W(28,new M(29,46),new M(14,47)),new W(30,new M(49,24),new M(10,25)),new W(30,new M(24,15),new M(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new W(30,new M(4,122),new M(18,123)),new W(28,new M(13,46),new M(32,47)),new W(30,new M(48,24),new M(14,25)),new W(30,new M(42,15),new M(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new W(30,new M(20,117),new M(4,118)),new W(28,new M(40,47),new M(7,48)),new W(30,new M(43,24),new M(22,25)),new W(30,new M(10,15),new M(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new W(30,new M(19,118),new M(6,119)),new W(28,new M(18,47),new M(31,48)),new W(30,new M(34,24),new M(34,25)),new W(30,new M(20,15),new M(61,16)))],n})(),nn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(nn||(nn={}));var Ay=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[nn.DATA_MASK_000,new n(nn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[nn.DATA_MASK_001,new n(nn.DATA_MASK_001,function(e,t){return(e&1)===0})],[nn.DATA_MASK_010,new n(nn.DATA_MASK_010,function(e,t){return t%3===0})],[nn.DATA_MASK_011,new n(nn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[nn.DATA_MASK_100,new n(nn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[nn.DATA_MASK_101,new n(nn.DATA_MASK_101,function(e,t){return e*t%6===0})],[nn.DATA_MASK_110,new n(nn.DATA_MASK_110,function(e,t){return e*t%6<3})],[nn.DATA_MASK_111,new n(nn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),I8=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new de;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=W2.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new de},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Aa.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var c=Aa.decodeVersionInformation(r);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(c=Aa.decodeVersionInformation(r),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new de},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=Ay.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,c=new Uint8Array(t.getTotalCodewords()),f=0,d=0,p=0,g=i-1;g>0;g-=2){g===6&&g--;for(var y=0;y<i;y++)for(var x=s?i-1-y:y,_=0;_<2;_++)a.get(g-_,x)||(p++,d<<=1,this.bitMatrix.get(g-_,x)&&(d|=1),p===8&&(c[f++]=d,p=0,d=0));s=!s}if(f!==t.getTotalCodewords())throw new de;return c},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Ay.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),Cy=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k8=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,s,c;if(e.length!==t.getTotalCodewords())throw new Se;var f=t.getECBlocksForLevel(r),d=0,p=f.getECBlocks();try{for(var g=Cy(p),y=g.next();!y.done;y=g.next()){var x=y.value;d+=x.getCount()}}catch(ae){i={error:ae}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var _=new Array(d),E=0;try{for(var C=Cy(p),b=C.next();!b.done;b=C.next())for(var x=b.value,T=0;T<x.getCount();T++){var O=x.getDataCodewords(),I=f.getECCodewordsPerBlock()+O;_[E++]=new n(O,new Uint8Array(I))}}catch(ae){s={error:ae}}finally{try{b&&!b.done&&(c=C.return)&&c.call(C)}finally{if(s)throw s.error}}for(var P=_[0].codewords.length,F=_.length-1;F>=0;){var H=_[F].codewords.length;if(H===P)break;F--}F++;for(var G=P-f.getECCodewordsPerBlock(),V=0,T=0;T<G;T++)for(var Q=0;Q<E;Q++)_[Q].codewords[T]=e[V++];for(var Q=F;Q<E;Q++)_[Q].codewords[G]=e[V++];for(var re=_[0].codewords.length,T=G;T<re;T++)for(var Q=0;Q<E;Q++){var te=Q<F?T:T+1;_[Q].codewords[te]=e[V++]}return _},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),ar;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(ar||(ar={}));var yt=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Se;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(ar.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(ar.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(ar.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(ar.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(ar.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(ar.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(ar.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(ar.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(ar.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(ar.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),M8=(function(){function n(){}return n.decode=function(e,t,r,i){var a=new Y2(e),s=new Le,c=new Array,f=-1,d=-1;try{var p=null,g=!1,y=void 0;do{if(a.available()<4)y=yt.TERMINATOR;else{var x=a.readBits(4);y=yt.forBits(x)}switch(y){case yt.TERMINATOR:break;case yt.FNC1_FIRST_POSITION:case yt.FNC1_SECOND_POSITION:g=!0;break;case yt.STRUCTURED_APPEND:if(a.available()<16)throw new de;f=a.readBits(8),d=a.readBits(8);break;case yt.ECI:var _=n.parseECIValue(a);if(p=Yt.getCharacterSetECIByValue(_),p===null)throw new de;break;case yt.HANZI:var E=a.readBits(4),C=a.readBits(y.getCharacterCountBits(t));E===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,C);break;default:var b=a.readBits(y.getCharacterCountBits(t));switch(y){case yt.NUMERIC:n.decodeNumericSegment(a,s,b);break;case yt.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,b,g);break;case yt.BYTE:n.decodeByteSegment(a,s,b,p,c,i);break;case yt.KANJI:n.decodeKanjiSegment(a,s,b);break;default:throw new de}break}}while(y!==yt.TERMINATOR)}catch{throw new de}return new Fu(e,s.toString(),c.length===0?null:c,r===null?null:r.toString(),f,d)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new de;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),c=s/96<<8&4294967295|s%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{t.append(lr.decode(i,qe.GB2312))}catch(f){throw new de(f)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new de;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),c=s/192<<8&4294967295|s%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{t.append(lr.decode(i,qe.SHIFT_JIS))}catch(f){throw new de(f)}},n.decodeByteSegment=function(e,t,r,i,a,s){if(8*r>e.available())throw new de;for(var c=new Uint8Array(r),f=0;f<r;f++)c[f]=e.readBits(8);var d;i===null?d=qe.guessEncoding(c,s):d=i.getName();try{t.append(lr.decode(c,d))}catch(p){throw new de(p)}a.push(c)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new de;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new de;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new de;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var c=a;c<t.length();c++)t.charAt(c)==="%"&&(c<t.length()-1&&t.charAt(c+1)==="%"?t.deleteCharAt(c+1):t.setCharAt(c,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new de;var i=e.readBits(10);if(i>=1e3)throw new de;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new de;var a=e.readBits(7);if(a>=100)throw new de;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new de;var s=e.readBits(4);if(s>=10)throw new de;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new de},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),K2=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),Ty=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P8=(function(){function n(){this.rsDecoder=new Uu(Bn.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Pr.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new I8(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new K2(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,s,c=e.readVersion(),f=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),p=k8.getDataBlocks(d,c,f),g=0;try{for(var y=Ty(p),x=y.next();!x.done;x=y.next()){var _=x.value;g+=_.getNumDataCodewords()}}catch(F){r={error:F}}finally{try{x&&!x.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}var E=new Uint8Array(g),C=0;try{for(var b=Ty(p),T=b.next();!T.done;T=b.next()){var _=T.value,O=_.getCodewords(),I=_.getNumDataCodewords();this.correctErrors(O,I);for(var P=0;P<I;P++)E[C++]=O[P]}}catch(F){a={error:F}}finally{try{T&&!T.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}return M8.decode(E,c,f,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Ut}for(var i=0;i<t;i++)e[i]=r[i]},n})(),j8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),B8=(function(n){j8(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,s=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new e(a,s,c)},e})(we),L8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F8=(function(){function n(e,t,r,i,a,s,c){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,s=new Int32Array(3),c=this.image,f=0;f<t;f++){var d=a+((f&1)===0?Math.floor((f+1)/2):-Math.floor((f+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var p=e;p<i&&!c.get(p,d);)p++;for(var g=0;p<i;){if(c.get(p,d))if(g===1)s[1]++;else if(g===2){if(this.foundPatternCross(s)){var y=this.handlePossibleCenter(s,d,p);if(y!==null)return y}s[0]=s[2],s[1]=1,s[2]=0,g=1}else s[++g]++;else g===1&&g++,s[g]++;p++}if(this.foundPatternCross(s)){var y=this.handlePossibleCenter(s,d,i);if(y!==null)return y}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,s=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;for(var f=e;f>=0&&a.get(t,f)&&c[1]<=r;)c[1]++,f--;if(f<0||c[1]>r)return NaN;for(;f>=0&&!a.get(t,f)&&c[0]<=r;)c[0]++,f--;if(c[0]>r)return NaN;for(f=e+1;f<s&&a.get(t,f)&&c[1]<=r;)c[1]++,f++;if(f===s||c[1]>r)return NaN;for(;f<s&&!a.get(t,f)&&c[2]<=r;)c[2]++,f++;if(c[2]>r)return NaN;var d=c[0]+c[1]+c[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(c)?n.centerFromEnd(c,f):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,s=e[0]+e[1]+e[2],c=n.centerFromEnd(e,r),f=this.crossCheckVertical(t,c,2*e[1],s);if(!isNaN(f)){var d=(e[0]+e[1]+e[2])/3;try{for(var p=L8(this.possibleCenters),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.aboutEquals(d,f,c))return y.combineEstimate(f,c,d)}}catch(_){i={error:_}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new B8(c,f,d);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null},n})(),U8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),V8=(function(n){U8(e,n);function e(t,r,i,a){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,c=(this.count*this.getY()+t)/a,f=(this.count*this.estimatedModuleSize+i)/a;return new e(s,c,f,a)},e})(we),z8=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),el=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H8=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(gt.TRY_HARDER)!==void 0,r=e!=null&&e.get(gt.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),c=Math.floor(3*a/(4*n.MAX_MODULES));(c<n.MIN_SKIP||t)&&(c=n.MIN_SKIP);for(var f=!1,d=new Int32Array(5),p=c-1;p<a&&!f;p+=c){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var g=0,y=0;y<s;y++)if(i.get(y,p))(g&1)===1&&g++,d[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(d)){var x=this.handlePossibleCenter(d,p,y,r);if(x===!0)if(c=2,this.hasSkipped===!0)f=this.haveMultiplyConfirmedCenters();else{var _=this.findRowSkip();_>d[2]&&(p+=_-d[2]-c,y=s-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;continue}g=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;else d[++g]++;else d[g]++;if(n.foundPatternCross(d)){var x=this.handlePossibleCenter(d,p,s,r);x===!0&&(c=d[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}}var E=this.selectBestPatterns();return we.orderBestPatterns(E),new z8(E)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),s=0,c=this.image;e>=s&&t>=s&&c.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!c.get(t-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||t<s||a[1]>r)return!1;for(;e>=s&&t>=s&&c.get(t-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var f=c.getHeight(),d=c.getWidth();for(s=1;e+s<f&&t+s<d&&c.get(t+s,e+s);)a[2]++,s++;if(e+s>=f||t+s>=d)return!1;for(;e+s<f&&t+s<d&&!c.get(t+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=f||t+s>=d||a[3]>=r)return!1;for(;e+s<f&&t+s<d&&c.get(t+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,s=a.getHeight(),c=this.getCrossCheckStateCount(),f=e;f>=0&&a.get(t,f);)c[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(t,f)&&c[1]<=r;)c[1]++,f--;if(f<0||c[1]>r)return NaN;for(;f>=0&&a.get(t,f)&&c[0]<=r;)c[0]++,f--;if(c[0]>r)return NaN;for(f=e+1;f<s&&a.get(t,f);)c[2]++,f++;if(f===s)return NaN;for(;f<s&&!a.get(t,f)&&c[3]<r;)c[3]++,f++;if(f===s||c[3]>=r)return NaN;for(;f<s&&a.get(t,f)&&c[4]<r;)c[4]++,f++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,f):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,s=a.getWidth(),c=this.getCrossCheckStateCount(),f=e;f>=0&&a.get(f,t);)c[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(f,t)&&c[1]<=r;)c[1]++,f--;if(f<0||c[1]>r)return NaN;for(;f>=0&&a.get(f,t)&&c[0]<=r;)c[0]++,f--;if(c[0]>r)return NaN;for(f=e+1;f<s&&a.get(f,t);)c[2]++,f++;if(f===s)return NaN;for(;f<s&&!a.get(f,t)&&c[3]<r;)c[3]++,f++;if(f===s||c[3]>=r)return NaN;for(;f<s&&a.get(f,t)&&c[4]<r;)c[4]++,f++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,f):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(c)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(c),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(s),e[2],a)))){for(var f=a/7,d=!1,p=this.possibleCenters,g=0,y=p.length;g<y;g++){var x=p[g];if(x.aboutEquals(f,c,s)){p[g]=x.combineEstimate(c,s,f),d=!0;break}}if(!d){var _=new V8(s,c,f);p.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=el(this.possibleCenters),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.getCount()>=n.CENTER_QUORUM)if(i==null)i=c;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-c.getX())-Math.abs(i.getY()-c.getY()))/2)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,s=0,c=this.possibleCenters.length;try{for(var f=el(this.possibleCenters),d=f.next();!d.done;d=f.next()){var p=d.value;p.getCount()>=n.CENTER_QUORUM&&(a++,s+=p.getEstimatedModuleSize())}}catch(E){e={error:E}}finally{try{d&&!d.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}if(a<3)return!1;var g=s/c,y=0;try{for(var x=el(this.possibleCenters),_=x.next();!_.done;_=x.next()){var p=_.value;y+=Math.abs(p.getEstimatedModuleSize()-g)}}catch(E){r={error:E}}finally{try{_&&!_.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}return y<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new ie;var s=this.possibleCenters,c;if(a>3){var f=0,d=0;try{for(var p=el(this.possibleCenters),g=p.next();!g.done;g=p.next()){var y=g.value,x=y.getEstimatedModuleSize();f+=x,d+=x*x}}catch(P){e={error:P}}finally{try{g&&!g.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}c=f/a;var _=Math.sqrt(d/a-c*c);s.sort(function(P,F){var H=Math.abs(F.getEstimatedModuleSize()-c),G=Math.abs(P.getEstimatedModuleSize()-c);return H<G?-1:H>G?1:0});for(var E=Math.max(.2*c,_),C=0;C<s.length&&s.length>3;C++){var b=s[C];Math.abs(b.getEstimatedModuleSize()-c)>E&&(s.splice(C,1),C--)}}if(s.length>3){var f=0;try{for(var T=el(s),O=T.next();!O.done;O=T.next()){var I=O.value;f+=I.getEstimatedModuleSize()}}catch(F){r={error:F}}finally{try{O&&!O.done&&(i=T.return)&&i.call(T)}finally{if(r)throw r.error}}c=f/s.length,s.sort(function(F,H){if(H.getCount()===F.getCount()){var G=Math.abs(H.getEstimatedModuleSize()-c),V=Math.abs(F.getEstimatedModuleSize()-c);return G<V?1:G>V?-1:0}else return H.getCount()-F.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),G8=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(gt.NEED_RESULT_POINT_CALLBACK);var t=new H8(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new ie("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,a),c=Aa.getProvisionalVersionForDimension(s),f=c.getDimensionForVersion()-7,d=null;if(c.getAlignmentPatternCenters().length>0)for(var p=r.getX()-t.getX()+i.getX(),g=r.getY()-t.getY()+i.getY(),y=1-3/f,x=Math.floor(t.getX()+y*(p-t.getX())),_=Math.floor(t.getY()+y*(g-t.getY())),E=4;E<=16;E<<=1)try{d=this.findAlignmentInRegion(a,x,_,E);break}catch(O){if(!(O instanceof ie))throw O}var C=n.createTransform(t,r,i,d,s),b=n.sampleGrid(this.image,C,s),T;return d===null?T=[i,t,r]:T=[i,t,r,d],new q0(b,T)},n.createTransform=function(e,t,r,i,a){var s=a-3.5,c,f,d,p;return i!==null?(c=i.getX(),f=i.getY(),d=s-3,p=d):(c=t.getX()-e.getX()+r.getX(),f=t.getY()-e.getY()+r.getY(),d=s,p=s),G2.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,d,p,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),c,f,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=X0.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=We.round(we.distance(e,t)/i),s=We.round(we.distance(e,r)/i),c=Math.floor((a+s)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new ie("Dimensions could be not found.")}return c},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,c=e-(r-e);c<0?(s=e/(e-c),c=0):c>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);var f=Math.floor(t-(i-t)*s);return s=1,f<0?(s=t/(t-f),f=0):f>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(f-t),f=this.image.getHeight()-1),c=Math.floor(e+(c-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,c,f),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var s=e;e=t,t=s,s=r,r=i,i=s}for(var c=Math.abs(r-e),f=Math.abs(i-t),d=-c/2,p=e<r?1:-1,g=t<i?1:-1,y=0,x=r+p,_=e,E=t;_!==x;_+=p){var C=a?E:_,b=a?_:E;if(y===1===this.image.get(C,b)){if(y===2)return We.distance(_,E,e,t);y++}if(d+=f,d>0){if(E===i)break;E+=g,d-=c}}return y===2?We.distance(r+p,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),s=Math.max(0,t-a),c=Math.min(this.image.getWidth()-1,t+a);if(c-s<e*3)throw new ie("Alignment top exceeds estimated module size.");var f=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-f<e*3)throw new ie("Alignment bottom exceeds estimated module size.");var p=new F8(this.image,s,f,c-s,d-f,e,this.resultPointCallback);return p.find()},n})(),Au=(function(){function n(){this.decoder=new P8}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(gt.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var s=new G8(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof K2&&r.getOther().applyMirroredCorrection(i);var c=new _n(r.getText(),r.getRawBytes(),void 0,i,Ee.QR_CODE,void 0),f=r.getByteSegments();f!==null&&c.putMetadata(hn.BYTE_SEGMENTS,f);var d=r.getECLevel();return d!==null&&c.putMetadata(hn.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(c.putMetadata(hn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),c.putMetadata(hn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ie;var i=this.moduleSize(t,e),a=t[1],s=r[1],c=t[0],f=r[0];if(c>=f||a>=s)throw new ie;if(s-a!==f-c&&(f=c+(s-a),f>=e.getWidth()))throw new ie;var d=Math.round((f-c+1)/i),p=Math.round((s-a+1)/i);if(d<=0||p<=0)throw new ie;if(p!==d)throw new ie;var g=Math.floor(i/2);a+=g,c+=g;var y=c+Math.floor((d-1)*i)-f;if(y>0){if(y>g)throw new ie;c-=y}var x=a+Math.floor((p-1)*i)-s;if(x>0){if(x>g)throw new ie;a-=x}for(var _=new Pr(d,p),E=0;E<p;E++)for(var C=a+Math.floor(E*i),b=0;b<d;b++)e.get(c+Math.floor(b*i),C)&&_.set(b,E);return _},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],c=!0,f=0;a<i&&s<r;){if(c!==t.get(a,s)){if(++f===5)break;c=!c}a++,s++}if(a===i||s===r)throw new ie;return(a-e[0])/7},n.NO_POINTS=new Array,n})(),$8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xe=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return We.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=$8(e),c=s.next();!c.done;c=s.next()){var f=c.value;i[a++]=f}}catch(d){t={error:d}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Wt.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),q8=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),X8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y8=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new q8(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,s=0,c=0,f=!1;s<t.getHeight();){var d=n.findVertices(t,s,c);if(d[0]==null&&d[3]==null){if(!f)break;f=!1,c=0;try{for(var p=(r=void 0,X8(a)),g=p.next();!g.done;g=p.next()){var y=g.value;y[1]!=null&&(s=Math.trunc(Math.max(s,y[1].getY()))),y[3]!=null&&(s=Math.max(s,Math.trunc(y[3].getY())))}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(f=!0,a.push(d),!e)break;d[2]!=null?(c=Math.trunc(d[2].getX()),s=Math.trunc(d[2].getY())):(c=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,s){for(var c=new Array(4),f=!1,d=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var p=n.findGuardPattern(e,a,i,r,!1,s,d);if(p!=null){for(;i>0;){var g=n.findGuardPattern(e,a,--i,r,!1,s,d);if(g!=null)p=g;else{i++;break}}c[0]=new we(p[0],i),c[1]=new we(p[1],i),f=!0;break}}var y=i+1;if(f){for(var x=0,g=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);y<t;y++){var p=n.findGuardPattern(e,g[0],y,r,!1,s,d);if(p!=null&&Math.abs(g[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-p[1])<n.MAX_PATTERN_DRIFT)g=p,x=0;else{if(x>n.SKIPPED_ROW_COUNT_MAX)break;x++}}y-=x+1,c[2]=new we(g[0],y),c[3]=new we(g[1],y)}return y-i<n.BARCODE_MIN_HEIGHT&&Wt.fill(c,null),c},n.findGuardPattern=function(e,t,r,i,a,s,c){Wt.fillWithin(c,0,c.length,0);for(var f=t,d=0;e.get(f,r)&&f>0&&d++<n.MAX_PIXEL_DRIFT;)f--;for(var p=f,g=0,y=s.length,x=a;p<i;p++){var _=e.get(p,r);if(_!==x)c[g]++;else{if(g===y-1){if(n.patternMatchVariance(c,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([f,p]);f+=c[0]+c[1],pt.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,x=!x}}return g===y-1&&n.patternMatchVariance(c,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([f,p-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,c=0;c<i;c++)a+=e[c],s+=t[c];if(a<s)return 1/0;var f=a/s;r*=f;for(var d=0,p=0;p<i;p++){var g=e[p],y=t[p]*f,x=g>y?g-y:y-g;if(x>r)return 1/0;d+=x}return d/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),W8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ba=(function(){function n(e,t){if(t.length===0)throw new Se;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),pt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=W8(this.coefficients),s=a.next();!s.done;s=a.next()){var c=s.value;i=this.field.add(i,c)}}catch(g){t={error:g}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var f=this.coefficients[0],d=this.coefficients.length,p=1;p<d;p++)f=this.field.add(this.field.multiply(e,f),this.coefficients[p]);return f},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Se("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;pt.arraycopy(r,0,a,0,s);for(var c=s;c<r.length;c++)a[c]=this.field.add(t[c-s],r[c]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Se("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Se("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),c=0;c<r;c++)for(var f=t[c],d=0;d<a;d++)s[c+d]=this.field.add(s[c+d],this.field.multiply(f,i[d]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Se;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Le,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),K8=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Se;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new H2;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),Z8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Q8=(function(n){Z8(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new ba(i,new Int32Array([0])),i.one=new ba(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Se;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new ba(this,i)},e.PDF417_GF=new e(Xe.NUMBER_OF_CODEWORDS,3),e})(K8),J8=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eT=(function(){function n(){this.field=Q8.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,s=new ba(this.field,e),c=new Int32Array(t),f=!1,d=t;d>0;d--){var p=s.evaluateAt(this.field.exp(d));c[t-d]=p,p!==0&&(f=!0)}if(!f)return 0;var g=this.field.getOne();if(r!=null)try{for(var y=J8(r),x=y.next();!x.done;x=y.next()){var _=x.value,E=this.field.exp(e.length-1-_),C=new ba(this.field,new Int32Array([this.field.subtract(0,E),1]));g=g.multiply(C)}}catch(G){i={error:G}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}for(var b=new ba(this.field,c),T=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),b,t),O=T[0],I=T[1],P=this.findErrorLocations(O),F=this.findErrorMagnitudes(I,O,P),d=0;d<P.length;d++){var H=e.length-1-this.field.log(P[d]);if(H<0)throw Ut.getChecksumInstance();e[H]=this.field.subtract(e[H],F[d])}return P.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,c=this.field.getZero(),f=this.field.getOne();s.getDegree()>=Math.round(r/2);){var d=a,p=c;if(a=s,c=f,a.isZero())throw Ut.getChecksumInstance();s=d;for(var g=this.field.getZero(),y=a.getCoefficient(a.getDegree()),x=this.field.inverse(y);s.getDegree()>=a.getDegree()&&!s.isZero();){var _=s.getDegree()-a.getDegree(),E=this.field.multiply(s.getCoefficient(s.getDegree()),x);g=g.add(this.field.buildMonomial(_,E)),s=s.subtract(a.multiplyByMonomial(_,E))}f=g.multiply(c).subtract(p).negative()}var C=f.getCoefficient(0);if(C===0)throw Ut.getChecksumInstance();var b=this.field.inverse(C),T=f.multiply(b),O=s.multiply(b);return[T,O]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Ut.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var c=new ba(this.field,a),f=r.length,d=new Int32Array(f),s=0;s<f;s++){var p=this.field.inverse(r[s]),g=this.field.subtract(0,e.evaluateAt(p)),y=this.field.inverse(c.evaluateAt(p));d[s]=this.field.multiply(g,y)}return d},n})(),c0=(function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var s=t==null||r==null,c=i==null||a==null;if(s&&c)throw new ie;s?(t=new we(0,i.getY()),r=new we(0,a.getY())):c&&(i=new we(e.getWidth()-1,t.getY()),a=new we(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,c=this.bottomRight;if(e>0){var f=r?this.topLeft:this.topRight,d=Math.trunc(f.getY()-e);d<0&&(d=0);var p=new we(f.getX(),d);r?i=p:s=p}if(t>0){var g=r?this.bottomLeft:this.bottomRight,y=Math.trunc(g.getY()+t);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);var x=new we(g.getX(),y);r?a=x:c=x}return new n(this.image,i,a,s,c)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),tT=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),W0=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,c,f,d,p,g){if(s==="%%")return"%";if(t[++r]!==void 0){s=d?parseInt(d.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,x;switch(g){case"s":x=t[r];break;case"c":x=t[r][0];break;case"f":x=parseFloat(t[r]).toFixed(s);break;case"p":x=parseFloat(t[r]).toPrecision(s);break;case"e":x=parseFloat(t[r]).toExponential(s);break;case"x":x=parseInt(t[r]).toString(y||16);break;case"d":x=parseFloat(parseInt(t[r],y||10).toPrecision(s)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(y);for(var _=parseInt(f),E=f&&f[0]+""=="0"?"0":" ";x.length<_;)x=c!==void 0?x+E:E+x;return x}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),nT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z2=(function(){function n(e){this.boundingBox=new c0(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new W0,i=0;try{for(var a=nT(this.codewords),s=a.next();!s.done;s=a.next()){var c=s.value;if(c==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue())}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),rT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iT=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},ol=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(g,y){var x={getKey:function(){return g},getValue:function(){return y}};x.getValue()>r?(r=x.getValue(),i=[],i.push(x.getKey())):x.getValue()===r&&i.push(x.getKey())};try{for(var s=rT(this.values.entries()),c=s.next();!c.done;c=s.next()){var f=iT(c.value,2),d=f[0],p=f[1];a(d,p)}}catch(g){e={error:g}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Xe.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),aT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oy=(function(n){aT(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=bh(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(s.getY())),d=-1,p=1,g=0,y=c;y<f;y++)if(r[y]!=null){var x=r[y],_=x.getRowNumber()-d;if(_===0)g++;else if(_===1)p=Math.max(p,g),g=1,d=x.getRowNumber();else if(_<0||x.getRowNumber()>=t.getRowCount()||_>y)r[y]=null;else{var E=void 0;p>2?E=(p-2)*_:E=_;for(var C=E>=y,b=1;b<=E&&!C;b++)C=r[y-b]!=null;C?r[y]=null:(d=x.getRowNumber(),g=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=bh(this.getCodewords()),c=s.next();!c.done;c=s.next()){var f=c.value;if(f!=null){var d=f.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.getCodewords(),d=-1,p=s;p<c;p++)if(f[p]!=null){var g=f[p];g.setRowNumberAsRowIndicatorColumn();var y=g.getRowNumber()-d;y===0||(y===1?d=g.getRowNumber():g.getRowNumber()>=t.getRowCount()?f[p]=null:d=g.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new ol,s=new ol,c=new ol,f=new ol;try{for(var d=bh(i),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var y=g.getValue()%30,x=g.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:s.setValue(y*3+1);break;case 1:f.setValue(y/3),c.setValue(y%3);break;case 2:a.setValue(y+1);break}}}}catch(E){t={error:E}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||c.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+c.getValue()[0]<Xe.MIN_ROWS_IN_BARCODE||s.getValue()[0]+c.getValue()[0]>Xe.MAX_ROWS_IN_BARCODE)return null;var _=new tT(a.getValue()[0],s.getValue()[0],c.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,_),_},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,c=a.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(Z2),oT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sT=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Xe.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var c=this.detectionResultColumns[s].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var c=this.detectionResultColumns[s].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[t],c=this.detectionResultColumns[e-1].getCodewords(),f=c;this.detectionResultColumns[e+1]!=null&&(f=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=c[t],d[3]=f[t],t>0&&(d[0]=r[t-1],d[4]=c[t-1],d[5]=f[t-1]),t>1&&(d[8]=r[t-2],d[10]=c[t-2],d[11]=f[t-2]),t<r.length-1&&(d[1]=r[t+1],d[6]=c[t+1],d[7]=f[t+1]),t<r.length-2&&(d[9]=r[t+2],d[12]=c[t+2],d[13]=f[t+2]);try{for(var p=oT(d),g=p.next();!g.done;g=p.next()){var y=g.value;if(n.adjustRowNumber(s,y))return}}catch(x){i={error:x}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new W0,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n})(),lT=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),cT=(function(){function n(){}return n.initialize=function(){for(var e=0;e<Xe.SYMBOL_TABLE.length;e++)for(var t=Xe.SYMBOL_TABLE[e],r=t&1,i=0;i<Xe.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Xe.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Xe.BARS_IN_MODULE-i-1]=Math.fround(a/Xe.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=We.sum(e),r=new Int32Array(Xe.BARS_IN_MODULE),i=0,a=0,s=0;s<Xe.MODULES_IN_CODEWORD;s++){var c=t/(2*Xe.MODULES_IN_CODEWORD)+s*t/Xe.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Xe.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=We.sum(e),r=new Array(Xe.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=o0.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var c=0;c<n.RATIOS_TABLE.length;c++){for(var f=0,d=n.RATIOS_TABLE[c],p=0;p<Xe.BARS_IN_MODULE;p++){var g=Math.fround(d[p]-r[p]);if(f+=Math.fround(g*g),f>=a)break}f<a&&(a=f,s=Xe.SYMBOL_TABLE[c])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Xe.SYMBOL_TABLE.length).map(function(e){return new Array(Xe.BARS_IN_MODULE)}),n})(),uT=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),Dy=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),fT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dT=(function(n){fT(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(Fn),hT=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new dT;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new $0;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),pT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gT=(function(n){pT(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(Fn),vT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mT=(function(n){vT(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Se("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new gT;i=Ue.MAX_VALUE}this.buf=Wt.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new $0;this.ensureCapacity(this.count+i),pt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Wt.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(hT),ct;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ct||(ct={}));function Q2(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var tu;function Vi(n){if(typeof tu>"u"&&(tu=Q2()),tu===null)throw new Error("BigInt is not supported!");return tu(n)}function yT(){var n=[];n[0]=Vi(1);var e=Vi(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var xT=(function(){function n(){}return n.decode=function(e,t){var r=new Le(""),i=Yt.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],c=new uT;a<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Yt.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,c);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new de;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw de.getFormatInstance()}if(r.length()===0)throw de.getFormatInstance();var f=new Fu(null,r.toString(),null,t);return f.setOther(c),f},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw de.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(Ue.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Le;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var c=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var f=new Le;t=n.textCompaction(e,t+1,f),r.setFileName(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new Le;t=n.textCompaction(e,t+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new Le;t=n.textCompaction(e,t+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new Le;t=n.numericCompaction(e,t+1,g),r.setSegmentCount(Ue.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var y=new Le;t=n.numericCompaction(e,t+1,y),r.setTimestamp(Dy.parseLong(y.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var x=new Le;t=n.numericCompaction(e,t+1,x),r.setChecksum(Ue.parseInt(x.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var _=new Le;t=n.numericCompaction(e,t+1,_),r.setFileSize(Dy.parseLong(_.toString()));break;default:throw de.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw de.getFormatInstance()}if(c!==-1){var E=t-c;r.isLastSegment()&&E--,r.setOptionalData(Wt.copyOfRange(e,c,c+E))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,c=!1;t<e[0]&&!c;){var f=e[t++];if(f<n.TEXT_COMPACTION_MODE_LATCH)i[s]=f/30,i[s+1]=f%30,s+=2;else switch(f){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=e[t++],a[s]=f,s++;break}}return n.decodeTextCompaction(i,a,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=ct.ALPHA,s=ct.ALPHA,c=0;c<r;){var f=e[c],d="";switch(a){case ct.ALPHA:if(f<26)d=String.fromCharCode(65+f);else switch(f){case 26:d=" ";break;case n.LL:a=ct.LOWER;break;case n.ML:a=ct.MIXED;break;case n.PS:s=a,a=ct.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=ct.ALPHA;break}break;case ct.LOWER:if(f<26)d=String.fromCharCode(97+f);else switch(f){case 26:d=" ";break;case n.AS:s=a,a=ct.ALPHA_SHIFT;break;case n.ML:a=ct.MIXED;break;case n.PS:s=a,a=ct.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=ct.ALPHA;break}break;case ct.MIXED:if(f<n.PL)d=n.MIXED_CHARS[f];else switch(f){case n.PL:a=ct.PUNCT;break;case 26:d=" ";break;case n.LL:a=ct.LOWER;break;case n.AL:a=ct.ALPHA;break;case n.PS:s=a,a=ct.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=ct.ALPHA;break}break;case ct.PUNCT:if(f<n.PAL)d=n.PUNCT_CHARS[f];else switch(f){case n.PAL:a=ct.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=ct.ALPHA;break}break;case ct.ALPHA_SHIFT:if(a=s,f<26)d=String.fromCharCode(65+f);else switch(f){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=ct.ALPHA;break}break;case ct.PUNCT_SHIFT:if(a=s,f<n.PAL)d=n.PUNCT_CHARS[f];else switch(f){case n.PAL:a=ct.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=ct.ALPHA;break}break}d!==""&&i.append(d),c++}},n.byteCompaction=function(e,t,r,i,a){var s=new mT,c=0,f=0,d=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),g=t[i++];i<t[0]&&!d;)switch(p[c++]=g,f=900*f+g,g=t[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(c%5===0&&c>0){for(var y=0;y<6;++y)s.write(Number(Vi(f)>>Vi(8*(5-y))));f=0,c=0}break}i===t[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(p[c++]=g);for(var x=0;x<c;x++)s.write(p[x]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!d;){var _=t[i++];if(_<n.TEXT_COMPACTION_MODE_LATCH)c++,f=900*f+_;else switch(_){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(c%5===0&&c>0){for(var y=0;y<6;++y)s.write(Number(Vi(f)>>Vi(8*(5-y))));f=0,c=0}}break}return a.append(lr.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var c=e[t++];if(t===e[0]&&(a=!0),c<n.TEXT_COMPACTION_MODE_LATCH)s[i]=c,i++;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||c===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Vi(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Vi(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new de;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=Q2()?yT():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),tl=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wT=(function(){function n(){}return n.decode=function(e,t,r,i,a,s,c){for(var f=new c0(e,t,r,i,a),d=null,p=null,g,y=!0;;y=!1){if(t!=null&&(d=n.getRowIndicatorColumn(e,f,t,!0,s,c)),i!=null&&(p=n.getRowIndicatorColumn(e,f,i,!1,s,c)),g=n.merge(d,p),g==null)throw ie.getNotFoundInstance();var x=g.getBoundingBox();if(y&&x!=null&&(x.getMinY()<f.getMinY()||x.getMaxY()>f.getMaxY()))f=x;else break}g.setBoundingBox(f);var _=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,d),g.setDetectionResultColumn(_,p);for(var E=d!=null,C=1;C<=_;C++){var b=E?C:_-C;if(g.getDetectionResultColumn(b)===void 0){var T=void 0;b===0||b===_?T=new Oy(f,b===0):T=new Z2(f),g.setDetectionResultColumn(b,T);for(var O=-1,I=O,P=f.getMinY();P<=f.getMaxY();P++){if(O=n.getStartColumn(g,b,P,E),O<0||O>f.getMaxX()){if(I===-1)continue;O=I}var F=n.detectCodeword(e,f.getMinX(),f.getMaxX(),E,O,P,s,c);F!=null&&(T.setCodeword(P,F),I=O,s=Math.min(s,F.getWidth()),c=Math.max(c,F.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=c0.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new sT(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var c=tl(i),f=c.next();!f.done;f=c.next()){var d=f.value;if(s+=a-d,d>0)break}}catch(x){t={error:x}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),g=0;s>0&&p[g]==null;g++)s--;for(var y=0,g=i.length-1;g>=0&&(y+=a-i[g],!(i[g]>0));g--);for(var g=p.length-1;y>0&&p[g]==null;g--)y--;return e.getBoundingBox().addMissingRows(s,y,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=tl(e),s=a.next();!s.done;s=a.next()){var c=s.value;i=Math.max(i,c)}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,s){for(var c=new Oy(t,i),f=0;f<2;f++)for(var d=f===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=t.getMaxY()&&g>=t.getMinY();g+=d){var y=n.detectCodeword(e,0,e.getWidth(),i,p,g,a,s);y!=null&&(c.setCodeword(g,y),i?p=y.getStartX():p=y.getEndX())}return c},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Xe.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,c=0;c<e.getBarcodeRowCount();c++)for(var f=0;f<e.getBarcodeColumnCount();f++){var d=t[c][f+1].getValue(),p=c*e.getBarcodeColumnCount()+f;d.length===0?r.push(p):d.length===1?i[p]=d[0]:(s.push(p),a.push(d))}for(var g=new Array(a.length),y=0;y<g.length;y++)g[y]=a[y];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Xe.toIntArray(r),Xe.toIntArray(s),g)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var s=new Int32Array(i.length),c=100;c-- >0;){for(var f=0;f<s.length;f++)t[i[f]]=a[f][s[f]];try{return n.decodeCodewords(t,e,r)}catch(p){var d=p instanceof Ut;if(!d)throw p}if(s.length===0)throw Ut.getChecksumInstance();for(var f=0;f<s.length;f++)if(s[f]<a[f].length-1){s[f]++;break}else if(s[f]=0,f===s.length-1)throw Ut.getChecksumInstance()}throw Ut.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),c=0;c<s.length;c++)for(var f=0;f<s[c].length;f++)s[c][f]=new ol;var d=0;try{for(var p=tl(e.getDetectionResultColumns()),g=p.next();!g.done;g=p.next()){var y=g.value;if(y!=null)try{for(var x=(i=void 0,tl(y.getCodewords())),_=x.next();!_.done;_=x.next()){var E=_.value;if(E!=null){var C=E.getRowNumber();if(C>=0){if(C>=s.length)continue;s[C][d].setValue(E.getValue())}}}}catch(b){i={error:b}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}d++}}catch(b){t={error:b}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,s,c=i?1:-1,f=null;if(n.isValidBarcodeColumn(e,t-c)&&(f=e.getDetectionResultColumn(t-c).getCodeword(r)),f!=null)return i?f.getEndX():f.getStartX();if(f=e.getDetectionResultColumn(t).getCodewordNearby(r),f!=null)return i?f.getStartX():f.getEndX();if(n.isValidBarcodeColumn(e,t-c)&&(f=e.getDetectionResultColumn(t-c).getCodewordNearby(r)),f!=null)return i?f.getEndX():f.getStartX();for(var d=0;n.isValidBarcodeColumn(e,t-c);){t-=c;try{for(var p=(a=void 0,tl(e.getDetectionResultColumn(t).getCodewords())),g=p.next();!g.done;g=p.next()){var y=g.value;if(y!=null)return(i?y.getEndX():y.getStartX())+c*d*(y.getEndX()-y.getStartX())}}catch(x){a={error:x}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,s,c,f){a=n.adjustCodewordStartColumn(e,t,r,i,a,s);var d=n.getModuleBitCount(e,t,r,i,a,s);if(d==null)return null;var p,g=We.sum(d);if(i)p=a+g;else{for(var y=0;y<d.length/2;y++){var x=d[y];d[y]=d[d.length-1-y],d[d.length-1-y]=x}p=a,a=p-g}if(!n.checkCodewordSkew(g,c,f))return null;var _=cT.getDecodedValue(d),E=Xe.getCodeword(_);return E===-1?null:new lT(a,p,n.getCodewordBucketNumber(_),E)},n.getModuleBitCount=function(e,t,r,i,a,s){for(var c=a,f=new Int32Array(8),d=0,p=i?1:-1,g=i;(i?c<r:c>=t)&&d<f.length;)e.get(c,s)===g?(f[d]++,c+=p):(d++,g=!g);return d===f.length||c===(i?r:t)&&d===f.length-1?f:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,s){for(var c=a,f=i?-1:1,d=0;d<2;d++){for(;(i?c>=t:c<r)&&i===e.get(c,s);){if(Math.abs(a-c)>n.CODEWORD_SKEW_SIZE)return a;c+=f}f=-f,i=!i}return c},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw de.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=xT.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Ut.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw de.getFormatInstance();var r=e[0];if(r>e.length)throw de.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw de.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new W0,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new eT,n})(),_T=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cu=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ie.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof de||r instanceof Ut?ie.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,s=new Array,c=Y8.detectMultiple(e,t,r);try{for(var f=_T(c.getPoints()),d=f.next();!d.done;d=f.next()){var p=d.value,g=wT.decode(c.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),y=new _n(g.getText(),g.getRawBytes(),void 0,p,Ee.PDF_417);y.putMetadata(hn.ERROR_CORRECTION_LEVEL,g.getECLevel());var x=g.getOther();x!=null&&y.putMetadata(hn.PDF417_EXTRA_METADATA,x),s.push(y)}}catch(_){i={error:_}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return s.map(function(_){return _})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Ue.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),bT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ry=(function(n){bT(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(Fn),Ny=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J2=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(gt.TRY_HARDER)!==void 0,r=e==null?null:e.get(gt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===Ee.UPC_A||s===Ee.UPC_E||s===Ee.EAN_13||s===Ee.EAN_8||s===Ee.CODABAR||s===Ee.CODE_39||s===Ee.CODE_93||s===Ee.CODE_128||s===Ee.ITF||s===Ee.RSS_14||s===Ee.RSS_EXPANDED});a&&!t&&i.push(new Io(e)),r.includes(Ee.QR_CODE)&&i.push(new Au),r.includes(Ee.DATA_MATRIX)&&i.push(new Su),r.includes(Ee.AZTEC)&&i.push(new bu),r.includes(Ee.PDF_417)&&i.push(new Cu),a&&t&&i.push(new Io(e))}i.length===0&&(t||i.push(new Io(e)),i.push(new Au),i.push(new Su),i.push(new bu),i.push(new Cu),t&&i.push(new Io(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=Ny(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new Ry("No readers where selected, nothing can be read.");try{for(var i=Ny(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(c){if(c instanceof Ry)continue}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ie("No MultiFormat Readers were able to detect the code.")},n})(),ET=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){ET(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new J2;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(Yo);var ST=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){ST(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Cu,t)||this}return e})(Yo);var AT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){AT(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Au,t)||this}return e})(Yo);var u0;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(u0||(u0={}));const nu=u0;var ew=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Hi(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=r.multiply(new Hi(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Se("No error correction bytes");var r=e.length-t;if(r<=0)throw new Se("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);pt.arraycopy(e,0,a,0,r);var s=new Hi(this.field,a);s=s.multiplyByMonomial(t,1);for(var c=s.divide(i)[1],f=c.getCoefficients(),d=t-f.length,p=0;p<d;p++)e[r+p]=0;pt.arraycopy(f,0,e,r+d,f.length)},n})(),sl=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var c=r[s],f=0;f<i-1;f++){var d=c[f];d===c[f+1]&&d===r[s+1][f]&&d===r[s+1][f+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var c=0;c<i;c++){var f=r[s];c+6<i&&f[c]===1&&f[c+1]===0&&f[c+2]===1&&f[c+3]===1&&f[c+4]===1&&f[c+5]===0&&f[c+6]===1&&(n.isWhiteHorizontal(f,c-4,c)||n.isWhiteHorizontal(f,c+7,c+11))&&t++,s+6<a&&r[s][c]===1&&r[s+1][c]===0&&r[s+2][c]===1&&r[s+3][c]===1&&r[s+4][c]===1&&r[s+5][c]===0&&r[s+6][c]===1&&(n.isWhiteVertical(r,c,s-4,s)||n.isWhiteVertical(r,c,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var c=r[s],f=0;f<i;f++)c[f]===1&&t++;var d=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-d)*10/d);return p*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Se("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),c=0;c<i;c++){for(var f=0,d=-1,p=0;p<a;p++){var g=t?s[c][p]:s[p][c];g===d?f++:(f>=5&&(r+=n.N1+(f-5)),f=1,d=g)}f>=5&&(r+=n.N1+(f-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),CT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TT=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=CT(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;Wt.fill(s,e)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=t.bytes[r],c=0,f=this.width;c<f;++c)if(a[c]!==s[c])return!1;return!0},n.prototype.toString=function(){for(var e=new Le,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),f0=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Le;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),OT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mt=(function(n){OT(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(Fn),Iy=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new an;n.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var c=i.get(i.getSize()-1-a),f=n.TYPE_INFO_COORDINATES[a],d=f[0],p=f[1];if(r.setBoolean(d,p,c),a<8){var g=r.getWidth()-a-1,y=8;r.setBoolean(g,y,c)}else{var g=8,y=r.getHeight()-7+(a-8);r.setBoolean(g,y,c)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new an;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var c=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,c),t.setBoolean(t.getHeight()-11+s,a,c)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,s=r.getWidth()-1,c=r.getHeight()-1;s>0;){for(s===6&&(s-=1);c>=0&&c<r.getHeight();){for(var f=0;f<2;++f){var d=s-f;if(n.isEmpty(r.get(d,c))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&sl.getDataMaskBit(t,d,c)&&(p=!p),r.setBoolean(d,c,p)}}c+=a}a=-a,c+=a,s-=2}if(i!==e.getSize())throw new mt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Ue.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Se("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!f0.isValidMaskPattern(t))throw new mt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new an;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new mt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new mt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new mt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new mt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new mt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var c=i[a];if(c>=0)for(var f=0;f!==s;f++){var d=i[f];d>=0&&n.isEmpty(t.get(d,c))&&n.embedPositionAdjustmentPattern(d-2,c-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),DT=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),ky=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return sl.applyMaskPenaltyRule1(e)+sl.applyMaskPenaltyRule2(e)+sl.applyMaskPenaltyRule3(e)+sl.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(nu.CHARACTER_SET)!==void 0;a&&(i=r.get(nu.CHARACTER_SET).toString());var s=this.chooseMode(e,i),c=new an;if(s===yt.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var f=Yt.getCharacterSetECIByName(i);f!==void 0&&this.appendECI(f,c)}this.appendModeInfo(s,c);var d=new an;this.appendBytes(e,s,d,i);var p;if(r!==null&&r.get(nu.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(nu.QR_VERSION).toString(),10);p=Aa.getVersionForNumber(g);var y=this.calculateBitsNeeded(s,c,d,p);if(!this.willFit(y,p,t))throw new mt("Data too big for requested version")}else p=this.recommendVersion(t,s,c,d);var x=new an;x.appendBitArray(c);var _=s===yt.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(_,p,s,x),x.appendBitArray(d);var E=p.getECBlocksForLevel(t),C=p.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(C,x);var b=this.interleaveWithECBytes(x,p.getTotalCodewords(),C,E.getNumBlocks()),T=new f0;T.setECLevel(t),T.setMode(s),T.setVersion(p);var O=p.getDimensionForVersion(),I=new TT(O,O),P=this.chooseMaskPattern(b,t,p,I);return T.setMaskPattern(P),Iy.buildMatrix(b,t,p,P,I),T.setMatrix(I),T},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Aa.getVersionForNumber(1)),s=this.chooseVersion(a,e),c=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(c,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Yt.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return yt.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var c=e.charAt(a);if(n.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return yt.BYTE}return i?yt.ALPHANUMERIC:r?yt.NUMERIC:yt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=lr.encode(e,Yt.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,c=0;c<f0.NUM_MASK_PATTERNS;c++){Iy.buildMatrix(e,t,r,c,i);var f=this.calculateMaskPenalty(i);f<a&&(a=f,s=c)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Aa.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new mt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),s=a.getTotalECCodewords(),c=i-s,f=(e+7)/8;return c>=f},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new mt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new mt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,s){if(i>=r)throw new mt("Block ID too large");var c=e%r,f=r-c,d=Math.floor(e/r),p=d+1,g=Math.floor(t/r),y=g+1,x=d-g,_=p-y;if(x!==_)throw new mt("EC bytes mismatch");if(r!==f+c)throw new mt("RS blocks mismatch");if(e!==(g+x)*f+(y+_)*c)throw new mt("Total bytes mismatch");i<f?(a[0]=g,s[0]=x):(a[0]=y,s[0]=_)},n.interleaveWithECBytes=function(e,t,r,i){var a,s,c,f;if(e.getSizeInBytes()!==r)throw new mt("Number of bits and data bytes does not match");for(var d=0,p=0,g=0,y=new Array,x=0;x<i;++x){var _=new Int32Array(1),E=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,x,_,E);var C=_[0],b=new Uint8Array(C);e.toBytes(8*d,b,0,C);var T=n.generateECBytes(b,E[0]);y.push(new DT(b,T)),p=Math.max(p,C),g=Math.max(g,T.length),d+=_[0]}if(r!==d)throw new mt("Data bytes does not match offset");for(var O=new an,x=0;x<p;++x)try{for(var I=(a=void 0,ky(y)),P=I.next();!P.done;P=I.next()){var F=P.value,b=F.getDataBytes();x<b.length&&O.appendBits(b[x],8)}}catch(Q){a={error:Q}}finally{try{P&&!P.done&&(s=I.return)&&s.call(I)}finally{if(a)throw a.error}}for(var x=0;x<g;++x)try{for(var H=(c=void 0,ky(y)),G=H.next();!G.done;G=H.next()){var F=G.value,T=F.getErrorCorrectionBytes();x<T.length&&O.appendBits(T[x],8)}}catch(Q){c={error:Q}}finally{try{G&&!G.done&&(f=H.return)&&f.call(H)}finally{if(c)throw c.error}}if(t!==O.getSizeInBytes())throw new mt("Interleaving error: "+t+" and "+O.getSizeInBytes()+" differ.");return O},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new ew(Bn.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new mt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case yt.NUMERIC:n.appendNumericBytes(e,r);break;case yt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case yt.BYTE:n.append8BitBytes(e,r,i);break;case yt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new mt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),c=n.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+c,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new mt;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new mt;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=lr.encode(e,r)}catch(f){throw new mt(f)}for(var a=0,s=i.length;a!==s;a++){var c=i[a];t.appendBits(c,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=lr.encode(e,Yt.SJIS)}catch(g){throw new mt(g)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,c=r[a+1]&255,f=s<<8&4294967295|c,d=-1;if(f>=33088&&f<=40956?d=f-33088:f>=57408&&f<=60351&&(d=f-49472),d===-1)throw new mt("Invalid byte sequence");var p=(d>>8)*192+(d&255);t.appendBits(p,13)}},n.appendECI=function(e,t){t.appendBits(yt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Yt.UTF8.getName(),n})();var RT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){RT(e,n);function e(t,r,i,a,s,c,f,d){var p=n.call(this,c,f)||this;if(p.yuvData=t,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=s,a+c>r||s+f>i)throw new Se("Crop rectangle does not fit within image data.");return d&&p.reverseHorizontal(c,f),p}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Se("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return pt.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return pt.arraycopy(this.yuvData,s,a,0,i),a;for(var c=0;c<r;c++){var f=c*t;pt.arraycopy(this.yuvData,s,a,f,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,c=0;c<r;c++){for(var f=c*t,d=0;d<t;d++){var p=a[s+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[f+d]=4278190080|p*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var c=s+t/2,f=s,d=s+t-1;f<c;f++,d--){var p=i[f];i[f]=i[d],i[d]=p}},e.prototype.invert=function(){return new Lu(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Rl);var NT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){NT(e,n);function e(t,r,i,a,s,c,f){var d=n.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=s,d.left=c,d.top=f,t.BYTES_PER_ELEMENT===4){for(var p=r*i,g=new Uint8ClampedArray(p),y=0;y<p;y++){var x=t[y],_=x>>16&255,E=x>>7&510,C=x&255;g[y]=(_+E+C)/4&255}d.luminances=g}else d.luminances=t;if(a===void 0&&(d.dataWidth=r),s===void 0&&(d.dataHeight=i),c===void 0&&(d.left=0),f===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new Se("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Se("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return pt.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return pt.arraycopy(this.luminances,s,a,0,i),a;for(var c=0;c<r;c++){var f=c*t;pt.arraycopy(this.luminances,s,a,f,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new Lu(this)},e})(Rl);var IT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),kT=(function(n){IT(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(Yt),MT=(function(){function n(){}return n.ISO_8859_1=Yt.ISO8859_1,n})(),d0,PT=301,jT=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=PT);return{LOG:n,ALOG:e}};d0=jT([],[]),d0.LOG;d0.ALOG;var My;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(My||(My={}));var Py=129,tw=230,BT=231,LT=235,FT=236,UT=237,VT=238,zT=239,HT=240,Eh=254,GT=254,jy="[)>05",By="[)>06",Ly="",at=0,un=1,On=2,$t=3,rn=4,xn=5,$T=(function(){function n(){}return n.prototype.getEncodingMode=function(){return at},n.prototype.encode=function(e){var t=yr.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=yr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case xn:e.writeCodeword(BT),e.signalEncoderChange(xn);return;case un:e.writeCodeword(tw),e.signalEncoderChange(un);return;case $t:e.writeCodeword(VT),e.signalEncoderChange($t);break;case On:e.writeCodeword(zT),e.signalEncoderChange(On);break;case rn:e.writeCodeword(HT),e.signalEncoderChange(rn);break;default:throw new Error("Illegal mode: "+i)}else yr.isExtendedASCII(r)?(e.writeCodeword(LT),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(yr.isDigit(e)&&yr.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),qT=(function(){function n(){}return n.prototype.getEncodingMode=function(){return xn},n.prototype.encode=function(e){var t=new Le;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=yr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(at);break}}var a=t.length()-1,s=1,c=e.getCodewordCount()+a+s;e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c>0;if(e.hasMoreCharacters()||f)if(a<=249)t.setCharAt(0,qe.getCharAt(a));else if(a<=1555)t.setCharAt(0,qe.getCharAt(Math.floor(a/250)+249)),t.insert(1,qe.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=t.length();d<r;d++)e.writeCodeword(this.randomize255State(t.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),K0=(function(){function n(){}return n.prototype.getEncodingMode=function(){return un},n.prototype.encodeMaximal=function(e){for(var t=new Le,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var c=Math.floor(t.length()/3*2),f=Math.floor(e.getCodewordCount()+c+1);e.updateSymbolInfo(f);var d=e.getSymbolInfo().getDataCapacity()-f,p=Math.floor(t.length()%3);(p===2&&d!==2||p===1&&(r>3||d!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(tw),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Le;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var f=new Le;for(t.length()%3===2&&c!==2&&(i=this.backtrackOneCharacter(e,t,f,i));t.length()%3===1&&(i>3||c!==1);)i=this.backtrackOneCharacter(e,t,f,i);break}var d=t.length();if(d%3===0){var p=yr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(at);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var c=e.getCurrentChar();return i=this.encodeChar(c,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Eh)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Eh),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(Eh)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(at)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new Le;return a.append(r),a.append(i),a.toString()},n})(),XT=(function(){function n(){}return n.prototype.getEncodingMode=function(){return rn},n.prototype.encode=function(e){for(var t=new Le;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=yr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(at);break}}}t.append(qe.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,c=this.encodeToCodewords(t.toString()),f=!e.hasMoreCharacters(),d=f&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+c.length))}d?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(c)}finally{e.signalEncoderChange(at)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(qe.getCharAt(e-64)):yr.illegalCharacter(qe.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,c=(r<<18)+(i<<12)+(a<<6)+s,f=c>>16&255,d=c>>8&255,p=c&255,g=new Le;return g.append(f),t>=2&&g.append(d),t>=3&&g.append(p),g.toString()},n})(),YT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),WT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},et=(function(){function n(e,t,r,i,a,s,c,f){c===void 0&&(c=0),f===void 0&&(f=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=c,this.rsBlockError=f}return n.lookup=function(e,t,r,i,a){var s,c;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var f=WT(ZT),d=f.next();!d.done;d=f.next()){var p=d.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(g){s={error:g}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),KT=(function(n){YT(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(et),ZT=[new et(!1,3,5,8,8,1),new et(!1,5,7,10,10,1),new et(!0,5,7,16,6,1),new et(!1,8,10,12,12,1),new et(!0,10,11,14,6,2),new et(!1,12,12,14,14,1),new et(!0,16,14,24,10,1),new et(!1,18,14,16,16,1),new et(!1,22,18,18,18,1),new et(!0,22,18,16,10,2),new et(!1,30,20,20,20,1),new et(!0,32,24,16,14,2),new et(!1,36,24,22,22,1),new et(!1,44,28,24,24,1),new et(!0,49,28,22,14,2),new et(!1,62,36,14,14,4),new et(!1,86,42,16,16,4),new et(!1,114,48,18,18,4),new et(!1,144,56,20,20,4),new et(!1,174,68,22,22,4),new et(!1,204,84,24,24,4,102,42),new et(!1,280,112,14,14,16,140,56),new et(!1,368,144,16,16,16,92,36),new et(!1,456,192,18,18,16,114,48),new et(!1,576,224,20,20,16,144,56),new et(!1,696,272,22,22,16,174,68),new et(!1,816,336,24,24,16,136,56),new et(!1,1050,408,18,18,36,175,68),new et(!1,1304,496,20,20,36,163,62),new KT],QT=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(c){return c.charCodeAt(0)}),r=new Le,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new Le,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=et.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),JT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),e6=(function(n){JT(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return $t},e.prototype.encode=function(t){for(var r=new Le;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var s=yr.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(at);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):yr.illegalCharacter(qe.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(GT),t.getNewEncoding()<0&&t.signalEncoderChange(at)},e})(K0),t6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),n6=(function(n){t6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return On},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(K0),yr=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=Py+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new K0,c=[new $T,s,new n6,new e6,new XT,new qT],f=new QT(e);f.setSymbolShape(t),f.setSizeConstraints(r,i),e.startsWith(jy)&&e.endsWith(Ly)?(f.writeCodeword(FT),f.setSkipAtEnd(2),f.pos+=jy.length):e.startsWith(By)&&e.endsWith(Ly)&&(f.writeCodeword(UT),f.setSkipAtEnd(2),f.pos+=By.length);var d=at;for(a&&(s.encodeMaximal(f),d=f.getNewEncoding(),f.resetEncoderSignal());f.hasMoreCharacters();)c[d].encode(f),f.getNewEncoding()>=0&&(d=f.getNewEncoding(),f.resetEncoderSignal());var p=f.getCodewordCount();f.updateSymbolInfo();var g=f.getSymbolInfo().getDataCapacity();p<g&&d!==at&&d!==xn&&d!==rn&&f.writeCodeword("");var y=f.getCodewords();for(y.length()<g&&y.append(Py);y.length()<g;)y.append(this.randomize253State(y.length()+1));return f.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===$t&&i===$t){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return at}else if(r===rn&&i===rn){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return at}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===at?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),c=[];;){if(t+a===e.length){Wt.fill(s,0),Wt.fill(c,0);var f=this.findMinimums(i,c,Ue.MAX_VALUE,s),d=this.getMinimumCount(s);if(c[at]===f)return at;if(d===1){if(s[xn]>0)return xn;if(s[rn]>0)return rn;if(s[On]>0)return On;if(s[$t]>0)return $t}return un}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[at]+=.5:this.isExtendedASCII(p)?(i[at]=Math.ceil(i[at]),i[at]+=2):(i[at]=Math.ceil(i[at]),i[at]++),this.isNativeC40(p)?i[un]+=2/3:this.isExtendedASCII(p)?i[un]+=8/3:i[un]+=4/3,this.isNativeText(p)?i[On]+=2/3:this.isExtendedASCII(p)?i[On]+=8/3:i[On]+=4/3,this.isNativeX12(p)?i[$t]+=2/3:this.isExtendedASCII(p)?i[$t]+=13/3:i[$t]+=10/3,this.isNativeEDIFACT(p)?i[rn]+=3/4:this.isExtendedASCII(p)?i[rn]+=17/4:i[rn]+=13/4,this.isSpecialB256(p)?i[xn]+=4:i[xn]++,a>=4){if(Wt.fill(s,0),Wt.fill(c,0),this.findMinimums(i,c,Ue.MAX_VALUE,s),c[at]<this.min(c[xn],c[un],c[On],c[$t],c[rn]))return at;if(c[xn]<c[at]||c[xn]+1<this.min(c[un],c[On],c[$t],c[rn]))return xn;if(c[rn]+1<this.min(c[xn],c[un],c[On],c[$t],c[at]))return rn;if(c[On]+1<this.min(c[xn],c[un],c[rn],c[$t],c[at]))return On;if(c[$t]+1<this.min(c[xn],c[un],c[rn],c[On],c[at]))return $t;if(c[un]+1<this.min(c[at],c[xn],c[rn],c[On])){if(c[un]<c[$t])return un;if(c[un]===c[$t]){for(var g=t+a+1;g<e.length;){var y=e.charCodeAt(g);if(this.isX12TermSep(y))return $t;if(!this.isNativeX12(y))break;g++}return un}}}}},n.min=function(e,t,r,i,a){var s=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);r>s&&(r=s,Wt.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Ue.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),Sh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fy=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return lr.encode(e,this.charset)!=null}catch{return!1}},n})(),r6=(function(){function n(e,t,r){var i,a,s,c,f,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(V){return new Fy(kT.forName(V))}),this.encoders=[];var p=[];p.push(new Fy(MT.ISO_8859_1));for(var g=t!=null&&t.name.startsWith("UTF"),y=0;y<e.length;y++){var x=!1;try{for(var _=(i=void 0,Sh(p)),E=_.next();!E.done;E=_.next()){var C=E.value,b=e.charAt(y),T=b.charCodeAt(0);if(T===r||C.canEncode(b)){x=!0;break}}}catch(V){i={error:V}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}if(!x)try{for(var O=(s=void 0,Sh(this.ENCODERS)),I=O.next();!I.done;I=O.next()){var C=I.value;if(C.canEncode(e.charAt(y))){p.push(C),x=!0;break}}}catch(V){s={error:V}}finally{try{I&&!I.done&&(c=O.return)&&c.call(O)}finally{if(s)throw s.error}}x||(g=!0)}if(p.length===1&&!g)this.encoders=[p[0]];else{this.encoders=[];var P=0;try{for(var F=Sh(p),H=F.next();!H.done;H=F.next()){var C=H.value;this.encoders[P++]=C}}catch(V){f={error:V}}finally{try{H&&!H.done&&(d=F.return)&&d.call(F)}finally{if(f)throw f.error}}}var G=-1;if(t!=null){for(var y=0;y<this.encoders.length;y++)if(this.encoders[y]!=null&&t.name===this.encoders[y].name){G=y;break}}this.priorityEncoderIndex=G}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return lr.encode(qe.getCharAt(e),this.encoders[t].name)},n})(),i6=3,a6=(function(){function n(e,t,r){this.fnc1=r;var i=new r6(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Le,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,s){var c=e.charAt(i).charCodeAt(0),f=0,d=t.length();t.getPriorityEncoderIndex()>=0&&(c===s||t.canEncode(c,t.getPriorityEncoderIndex()))&&(f=t.getPriorityEncoderIndex(),d=f+1);for(var p=f;p<d;p++)(c===s||t.canEncode(c,p))&&this.addEdge(r,i+1,new Uy(c,t,p,a,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new Uy[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var s=1;s<=i;s++){for(var c=0;c<t.length();c++)a[s][c]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][c],r);for(var c=0;c<t.length();c++)a[s-1][c]=null}for(var f=-1,d=Ue.MAX_VALUE,c=0;c<t.length();c++)if(a[i][c]!=null){var p=a[i][c];p.cachedTotalSize<d&&(d=p.cachedTotalSize,f=c)}if(f<0)throw new Error('Failed to encode "'+e+'"');for(var g=[],y=a[i][f];y!=null;){if(y.isFNC1())g.unshift(1e3);else for(var x=t.encode(y.c,y.encoderIndex),s=x.length-1;s>=0;s--)g.unshift(x[s]&255);var _=y.previous===null?0:y.previous.encoderIndex;_!==y.encoderIndex&&g.unshift(256+t.getECIValue(y.encoderIndex)),y=y.previous}for(var E=[],s=0;s<E.length;s++)E[s]=g[s];return E},n})(),Uy=(function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,c=i===null?0:i.encoderIndex;c!==r&&(s+=i6),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),o6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var Vy;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(Vy||(Vy={}));(function(n){o6(e,n);function e(t,r,i,a,s){var c=n.call(this,t,r,i)||this;return c.shape=a,c.macroId=s,c}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(a6);var s6=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),zy=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),l6=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),c6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Z0=(function(n){c6(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Ue.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(l6),u6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),f6=(function(n){u6(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Z0);function d6(n,e,t){return new f6(n,e,t)}function nl(n,e,t){return new Z0(n,e,t)}var h6=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Gi=0,Tu=1,sr=2,nw=3,Nr=4,p6=new Z0(null,0,0),Ah=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],g6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function v6(n){var e,t;try{for(var r=g6(n),i=r.next();!i.done;i=r.next()){var a=i.value;Wt.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Gi][Nr]=0,n[Tu][Nr]=0,n[Tu][Gi]=28,n[nw][Nr]=0,n[sr][Nr]=0,n[sr][Gi]=15,n}var rw=v6(Wt.createInt32Array(6,6)),m6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y6=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Ah[this.mode][e];i=nl(i,a&65535,a>>16),r+=a>>16}var s=e===sr?4:5;return i=nl(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===sr?4:5;return r=nl(r,rw[this.mode][e],i),r=nl(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Nr||this.mode===sr){var a=Ah[r][Gi];t=nl(t,a&65535,a>>16),i+=a>>16,r=Gi}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new n(t,r,this.binaryShiftByteCount+1,i+s);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=d6(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Ah[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new an;try{for(var c=m6(i),f=c.next();!f.done;f=c.next()){var d=f.value;d.appendTo(s,e)}}catch(p){t={error:p}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return qe.format("%s bits=%d bytes=%d",h6[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(p6,Gi,0,0),n})();function x6(n){var e=qe.getCharCode(" "),t=qe.getCharCode("."),r=qe.getCharCode(",");n[Gi][e]=1;for(var i=qe.getCharCode("Z"),a=qe.getCharCode("A"),s=a;s<=i;s++)n[Gi][s]=s-a+2;n[Tu][e]=1;for(var c=qe.getCharCode("z"),f=qe.getCharCode("a"),s=f;s<=c;s++)n[Tu][s]=s-f+2;n[sr][e]=1;for(var d=qe.getCharCode("9"),p=qe.getCharCode("0"),s=p;s<=d;s++)n[sr][s]=s-p+2;n[sr][r]=12,n[sr][t]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],y=0;y<g.length;y++)n[nw][qe.getCharCode(g[y])]=y;for(var x=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],y=0;y<x.length;y++)qe.getCharCode(x[y])>0&&(n[Nr][qe.getCharCode(x[y])]=y);return n}var Ch=x6(Wt.createInt32Array(5,256)),ru=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w6=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=qe.getCharCode(" "),t=qe.getCharCode(`
`),r=zy.singletonList(y6.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case qe.getCharCode("\r"):a=s===t?2:0;break;case qe.getCharCode("."):a=s===e?3:0;break;case qe.getCharCode(","):a=s===e?4:0;break;case qe.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var c=zy.min(r,function(f,d){return f.getBitCount()-d.getBitCount()});return c.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var s=ru(e),c=s.next();!c.done;c=s.next()){var f=c.value;this.updateStateForChar(f,t,a)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Ch[e.getMode()][i]>0,s=null,c=0;c<=Nr;c++){var f=Ch[c][i];if(f>0){if(s==null&&(s=e.endBinaryShift(t)),!a||c===e.getMode()||c===sr){var d=s.latchAndAppend(c,f);r.push(d)}if(!a&&rw[e.getMode()][c]>=0){var p=s.shiftAndAppend(c,f);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||Ch[e.getMode()][i]===0){var g=e.addBinaryShiftChar(t);r.push(g)}},n.updateStateListForPair=function(e,t,r){var i,a,s=[];try{for(var c=ru(e),f=c.next();!f.done;f=c.next()){var d=f.value;this.updateStateForPair(d,t,r,s)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Nr,r)),e.getMode()!==Nr&&i.push(a.shiftAndAppend(Nr,r)),r===3||r===4){var s=a.latchAndAppend(sr,16-r).latchAndAppend(sr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var c=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(c)}},n.simplifyStates=function(e){var t,r,i,a,s=[];try{for(var c=ru(e),f=c.next();!f.done;f=c.next()){var d=f.value,p=!0,g=function(C){if(C.isBetterThanOrEqualTo(d))return p=!1,"break";d.isBetterThanOrEqualTo(C)&&(s=s.filter(function(b){return b!==C}))};try{for(var y=(i=void 0,ru(s)),x=y.next();!x.done;x=y.next()){var _=x.value,E=g(_);if(E==="break")break}}catch(C){i={error:C}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}p&&s.push(d)}}catch(C){t={error:C}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return s},n})(),_6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new w6(e).encode(),a=Ue.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,c,f,d,p,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(c=r<0,f=Math.abs(r),f>(c?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Se(qe.format("Illegal value %s for layers",r));d=n.totalBitsInLayer(f,c),p=n.WORD_SIZE[f];var y=d-d%p;if(g=n.stuffBits(i,p),g.getSize()+a>y)throw new Se("Data to large for user specified layer");if(c&&g.getSize()>p*64)throw new Se("Data to large for user specified layer")}else{p=0,g=null;for(var x=0;;x++){if(x>n.MAX_NB_BITS)throw new Se("Data too large for an Aztec code");if(c=x<=3,f=c?x+1:x,d=n.totalBitsInLayer(f,c),!(s>d)){(g==null||p!==n.WORD_SIZE[f])&&(p=n.WORD_SIZE[f],g=n.stuffBits(i,p));var y=d-d%p;if(!(c&&g.getSize()>p*64)&&g.getSize()+a<=y)break}}}var _=n.generateCheckWords(g,d,p),E=g.getSize()/p,C=n.generateModeMessage(c,f,E),b=(c?11:14)+f*4,T=new Int32Array(b),O;if(c){O=b;for(var x=0;x<T.length;x++)T[x]=x}else{O=b+1+2*Ue.truncDivision(Ue.truncDivision(b,2)-1,15);for(var I=Ue.truncDivision(b,2),P=Ue.truncDivision(O,2),x=0;x<I;x++){var F=x+Ue.truncDivision(x,15);T[I-x-1]=P-F-1,T[I+x]=P+F+1}}for(var H=new Pr(O),x=0,G=0;x<f;x++){for(var V=(f-x)*4+(c?9:12),Q=0;Q<V;Q++)for(var re=Q*2,te=0;te<2;te++)_.get(G+re+te)&&H.set(T[x*2+te],T[x*2+Q]),_.get(G+V*2+re+te)&&H.set(T[x*2+Q],T[b-1-x*2-te]),_.get(G+V*4+re+te)&&H.set(T[b-1-x*2-te],T[b-1-x*2-Q]),_.get(G+V*6+re+te)&&H.set(T[b-1-x*2-Q],T[x*2+te]);G+=V*8}if(n.drawModeMessage(H,c,O,C),c)n.drawBullsEye(H,Ue.truncDivision(O,2),5);else{n.drawBullsEye(H,Ue.truncDivision(O,2),7);for(var x=0,Q=0;x<Ue.truncDivision(b,2)-1;x+=15,Q+=16)for(var te=Ue.truncDivision(O,2)&1;te<O;te+=2)H.set(Ue.truncDivision(O,2)-Q,te),H.set(Ue.truncDivision(O,2)+Q,te),H.set(te,Ue.truncDivision(O,2)-Q),H.set(te,Ue.truncDivision(O,2)+Q)}var ae=new s6;return ae.setCompact(c),ae.setSize(O),ae.setLayers(f),ae.setCodeWords(E),ae.setMatrix(H),ae},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new an;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=Ue.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var c=a-3+s;i.get(s)&&e.set(c,a-5),i.get(s+7)&&e.set(a+5,c),i.get(20-s)&&e.set(c,a+5),i.get(27-s)&&e.set(a-5,c)}else for(var s=0;s<10;s++){var c=a-5+s+Ue.truncDivision(s,5);i.get(s)&&e.set(c,a-7),i.get(s+10)&&e.set(a+7,c),i.get(29-s)&&e.set(c,a+7),i.get(39-s)&&e.set(a-7,c)}},n.generateCheckWords=function(e,t,r){var i,a,s=e.getSize()/r,c=new ew(n.getGF(r)),f=Ue.truncDivision(t,r),d=n.bitsToWords(e,r,f);c.encode(d,f-s);var p=t%r,g=new an;g.appendBits(0,p);try{for(var y=_6(Array.from(d)),x=y.next();!x.done;x=y.next()){var _=x.value;g.appendBits(_,r)}}catch(E){i={error:E}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var c=0,f=0;f<t;f++)c|=e.get(a*t+f)?1<<t-f-1:0;i[a]=c}return i},n.getGF=function(e){switch(e){case 4:return Bn.AZTEC_PARAM;case 6:return Bn.AZTEC_DATA_6;case 8:return Bn.AZTEC_DATA_8;case 10:return Bn.AZTEC_DATA_10;case 12:return Bn.AZTEC_DATA_12;default:throw new Se("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new an,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var c=0,f=0;f<t;f++)(s+f>=i||e.get(s+f))&&(c|=1<<t-1-f);(c&a)===a?(r.appendBits(c&a,t),s--):(c&a)===0?(r.appendBits(c|1,t),s--):r.appendBits(c,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var b6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),E6=(function(n){b6(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),s=0,c=0,f=t.length;s<f;s+=4,c++){var d=void 0,p=t[s+3];if(p===0)d=255;else{var g=t[s],y=t[s+1],x=t[s+2];d=306*g+601*y+117*x+512>>10}a[c]=d}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Se("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Lu(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*s),f=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*s);r.width=c,r.height=f;var d=r.getContext("2d");if(!d)throw new Error("Could not create a Canvas Context element.");return d.translate(c/2,f/2),d.rotate(i),d.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(Rl);function iw(){return typeof navigator<"u"}function S6(){return iw()&&!!navigator.mediaDevices}function A6(){return!!(S6()&&navigator.mediaDevices.enumerateDevices)}var Mo=function(){return Mo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Mo.apply(this,arguments)},Et=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{d(r.next(p))}catch(g){s(g)}}function f(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(c,f)}d((r=r.apply(n,e||[])).next())})},St=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(d){return function(p){return f([d,p])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Th=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C6={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Wo=(function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=Mo(Mo({},C6),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(gt.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return Et(this,void 0,void 0,function(){return St(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=Th(i),s=a.next();!s.done;s=a.next()){var c=s.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new jt("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new jt("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new E6(e),r=new z2(t);return new V2(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new jt("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return Et(this,void 0,void 0,function(){var t;return St(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return Et(this,void 0,void 0,function(){var e,t,r,i,a,s,c,f,d,p,g,y;return St(this,function(x){switch(x.label){case 0:if(!iw())throw new Error("Can't enumerate devices, navigator is not present.");if(!A6())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=x.sent(),t=[];try{for(r=Th(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(c=a.deviceId||a.id,f=a.label||"Video device ".concat(t.length+1),d=a.groupId,p={deviceId:c,label:f,kind:s,groupId:d},t.push(p))}catch(_){g={error:_}}finally{try{i&&!i.done&&(y=r.return)&&y.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.findDeviceById=function(e){return Et(this,void 0,void 0,function(){var t;return St(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return Et(this,void 0,void 0,function(){var r;return St(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,s){var c=setTimeout(function(){n.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",f))},t),f=function(){n.tryPlayVideo(e).then(function(d){clearTimeout(c),e.removeEventListener("canplay",f),a(d)})};e.addEventListener("canplay",f)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),Et(this,void 0,void 0,function(){var i;return St(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",s),r())},i),s=function(){clearTimeout(a),e.removeEventListener("load",s),t()};e.addEventListener("load",s)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new jt("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return Et(this,void 0,void 0,function(){var t;return St(this,function(r){switch(r.label){case 0:if(!e)throw new jt("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return Et(this,void 0,void 0,function(){var t;return St(this,function(r){switch(r.label){case 0:if(!e)throw new jt("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Et(this,void 0,void 0,function(){var i,a;return St(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,s.sent()];case 4:throw a=s.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return Et(this,void 0,void 0,function(){var i,a,s,c,f,d,p,g,y,x=this;return St(this,function(_){switch(_.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=_.sent(),s=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},c=this.scan(a,r,s),f=e.getVideoTracks(),d=Mo(Mo({},c),{stop:function(){c.stop()},streamVideoConstraintsApply:function(E,C){return Et(this,void 0,void 0,function(){var b,T,O,I,P,F,H;return St(this,function(G){switch(G.label){case 0:b=C?f.filter(C):f,G.label=1;case 1:G.trys.push([1,6,7,8]),T=Th(b),O=T.next(),G.label=2;case 2:return O.done?[3,5]:(I=O.value,[4,I.applyConstraints(E)]);case 3:G.sent(),G.label=4;case 4:return O=T.next(),[3,2];case 5:return[3,8];case 6:return P=G.sent(),F={error:P},[3,8];case 7:try{O&&!O.done&&(H=T.return)&&H.call(T)}finally{if(F)throw F.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(E){return f.find(E).getConstraints()},streamVideoSettingsGet:function(E){return f.find(E).getSettings()},streamVideoCapabilitiesGet:function(E){return f.find(E).getCapabilities()}}),p=n.mediaStreamIsTorchCompatible(e),p&&(g=f?.find(function(E){return n.mediaStreamIsTorchCompatibleTrack(E)}),y=function(E){return Et(x,void 0,void 0,function(){return St(this,function(C){switch(C.label){case 0:return[4,n.mediaStreamSetTorch(g,E)];case 1:return C.sent(),[2]}})})},d.switchTorch=y,d.stop=function(){return Et(x,void 0,void 0,function(){return St(this,function(E){switch(E.label){case 0:return c.stop(),[4,y(!1)];case 1:return E.sent(),[2]}})})}),[2,d]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Et(this,void 0,void 0,function(){var i,a;return St(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return Et(this,void 0,void 0,function(){var r,i;return St(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new jt("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return Et(this,void 0,void 0,function(){var r,i,a,s;return St(this,function(c){switch(c.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new jt("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return c.sent(),s=this.scan(r,t,i),[2,s]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Et(this,void 0,void 0,function(){var r;return St(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Et(this,void 0,void 0,function(){var r,i,a;return St(this,function(s){switch(s.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=s.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Et(this,void 0,void 0,function(){var r,i;return St(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return Et(this,void 0,void 0,function(){var t,r;return St(this,function(i){switch(i.label){case 0:if(!e)throw new jt("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return Et(this,void 0,void 0,function(){var t,r;return St(this,function(i){switch(i.label){case 0:if(!e)throw new jt("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(s,c){a.scan(e,function(f,d,p){if(f){s(f),p.stop();return}if(d){if(d instanceof ie&&t||d instanceof Ut&&r||d instanceof de&&i)return;p.stop(),c(d)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),s;try{s=a.getContext("2d",{willReadFrequently:!0})}catch{s=a.getContext("2d")}if(!s)throw new Error("Couldn't create canvas for visual element scan.");var c=function(){s=void 0,a=void 0},f=!1,d,p=function(){f=!0,clearTimeout(d),c(),r&&r()},g={stop:p},y=function(){if(!f)try{n.drawImageOnCanvas(s,e);var x=i.decodeFromCanvas(a);t(x,void 0,g),d=setTimeout(y,i.options.delayBetweenScanSuccess)}catch(b){t(void 0,b,g);var _=b instanceof Ut,E=b instanceof de,C=b instanceof ie;if(_||E||C){d=setTimeout(y,i.options.delayBetweenScanAttempts);return}c(),r&&r(b)}};return y(),g},n.prototype._decodeOnLoadImage=function(e){return Et(this,void 0,void 0,function(){var t;return St(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return Et(this,void 0,void 0,function(){var t;return St(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n})(),T6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){T6(e,n);function e(t,r){return n.call(this,new bu,t,r)||this}return e})(Wo);var O6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){O6(e,n);function e(t,r){return n.call(this,new Io(t),t,r)||this}return e})(Wo);var D6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){D6(e,n);function e(t,r){return n.call(this,new Su,t,r)||this}return e})(Wo);var R6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){R6(e,n);function e(t,r){var i=this,a=new J2;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(gt.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(Wo);var N6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){N6(e,n);function e(t,r){return n.call(this,new Cu,t,r)||this}return e})(Wo);var I6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),k6=(function(n){I6(e,n);function e(t,r){return n.call(this,new Au,t,r)||this}return e})(Wo);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P6=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Hy=n=>{const e=P6(n);return e.charAt(0).toUpperCase()+e.slice(1)},aw=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),j6=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var B6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=N.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...c},f)=>N.createElement("svg",{ref:f,...B6,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:aw("lucide",i),...!a&&!j6(c)&&{"aria-hidden":"true"},...c},[...s.map(([d,p])=>N.createElement(d,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=(n,e)=>{const t=N.forwardRef(({className:r,...i},a)=>N.createElement(L6,{ref:a,iconNode:e,className:aw(`lucide-${M6(Hy(n))}`,`lucide-${n}`,r),...i}));return t.displayName=Hy(n),t};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],pu=Ke("bell",F6);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Oa=Ke("circle-alert",U6);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ou=Ke("circle-check-big",V6);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v.832",key:"1ujtp2"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h2",key:"qvpao1"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],H6=Ke("clipboard-clock",z6);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],$6=Ke("clipboard-list",G6);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],X6=Ke("clock-4",q6);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M12 6v6l1.56.78",key:"14ed3g"}],["path",{d:"M13.227 21.925a10 10 0 1 1 8.767-9.588",key:"jwkls1"}],["path",{d:"m14 18 4-4 4 4",key:"ftkppy"}],["path",{d:"M18 22v-8",key:"su0gjh"}]],W6=Ke("clock-arrow-up",Y6);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Z6=Ke("clock",K6);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],J6=Ke("graduation-cap",Q6);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]],tO=Ke("hand-coins",eO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ow=Ke("image",nO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],iO=Ke("list",rO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Ho=Ke("loader",aO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["path",{d:"M5 12h14",key:"1ays0h"}]],sO=Ke("minus",oO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],cO=Ke("moon",lO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],fO=Ke("package",uO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hO=Ke("plus",dO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gO=Ke("refresh-cw",pO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Gy=Ke("rotate-ccw",vO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yO=Ke("save",mO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],iu=Ke("shopping-cart",xO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],_O=Ke("sun",wO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sw=Ke("trash-2",bO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],SO=Ke("undo-2",EO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],CO=Ke("upload",AO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],OO=Ke("user-check",TO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],lw=Ke("utensils-crossed",DO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],NO=Ke("utensils",RO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],kO=Ke("volume-2",IO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],PO=Ke("volume-x",MO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ri=Ke("x",jO);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],LO=Ke("zap",BO),cw=N.createContext(),uw=()=>{const n=N.useContext(cw);if(!n)throw new Error("useCanteenStatus must be used within a CanteenStatusProvider");return n},FO=({children:n})=>{const[e,t]=N.useState("closed"),[r,i]=N.useState(!0),[a,s]=N.useState(!1),[c,f]=N.useState(null);N.useEffect(()=>{d()},[]);const d=async(C=!1)=>{if(!C&&c&&Date.now()-c<2e3){console.log(" Skipping fetch - recent update detected");return}console.log(" Fetching canteen status from database...");try{const{data:b,error:T}=await pe.from("canteen_status").select("is_open, updated_at").eq("id",1).single();if(T)throw console.error(" Error fetching canteen status:",T),T;const O=b?.is_open?"open":"closed";console.log(" Fetched status from database:",O),console.log(" Raw data:",b),console.log(" is_open value:",b?.is_open,"type:",typeof b?.is_open),t(O)}catch(b){console.error(" Error fetching canteen status:",b),t("closed")}finally{i(!1)}},p=async C=>{console.log(" updateStatus called! New status:",C),s(!0);const b=e;console.log(" Setting optimistic status to:",C),t(C),f(Date.now());try{console.log(` Updating database: is_open = ${C==="open"}`),console.log(" Checking current database state...");const{data:T,error:O}=await pe.from("canteen_status").select("*").eq("id",1).single();if(O)throw console.error(" Error fetching current data:",O),new Error(`Cannot fetch current data: ${O.message}`);console.log(" Current database data:",T),console.log(` Attempting to update is_open to: ${C==="open"}`);const{data:I,error:P}=await pe.from("canteen_status").update({is_open:C==="open",updated_at:new Date().toISOString()}).eq("id",1).select();if(P)throw console.error(" Database update error:",P),console.error(" Full error details:",JSON.stringify(P,null,2)),P;console.log(" Database update response:",I),console.log(" Database update response length:",I?.length),I&&I.length>0?(console.log(" Updated row data:",I[0]),console.log(" Updated is_open value:",I[0].is_open)):console.warn(" Update response is empty - this might indicate the update failed"),console.log(` Database updated successfully! is_open = ${C==="open"}`);const{data:F,error:H}=await pe.from("canteen_status").select("is_open").eq("id",1).single();H?console.warn("Could not verify database update:",H):console.log(` Database verification: is_open = ${F.is_open}`),console.log(" Update completed successfully - UI should reflect the change")}catch(T){throw console.error(" Error updating canteen status:",T),console.log(" Reverting to previous status:",b),t(b),T}finally{s(!1)}},E={status:e,loading:r,updating:a,isOpen:e==="open",isClosed:e==="closed",updateStatus:p,toggleStatus:async()=>{const C=e==="open"?"closed":"open";console.log(" toggleStatus called! Current:",e,"New:",C),await p(C)},fetchCanteenStatus:d,refreshStatus:async()=>{console.log(" Manual refresh requested"),i(!0),await d(!0)}};return v.jsx(cw.Provider,{value:E,children:n})},Q0=N.createContext({});function J0(n){const e=N.useRef(null);return e.current===null&&(e.current=n()),e.current}const e1=typeof window<"u",fw=e1?N.useLayoutEffect:N.useEffect,Vu=N.createContext(null);function t1(n,e){n.indexOf(e)===-1&&n.push(e)}function n1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ai=(n,e,t)=>t>e?e:t<n?n:t;let r1=()=>{};const oi={},dw=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function hw(n){return typeof n=="object"&&n!==null}const pw=n=>/^0[^.\s]+$/u.test(n);function i1(n){let e;return()=>(e===void 0&&(e=n()),e)}const cr=n=>n,UO=(n,e)=>t=>e(n(t)),Il=(...n)=>n.reduce(UO),xl=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class a1{constructor(){this.subscriptions=[]}add(e){return t1(this.subscriptions,e),()=>n1(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ir=n=>n*1e3,kr=n=>n/1e3;function gw(n,e){return e?n*(1e3/e):0}const vw=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,VO=1e-7,zO=12;function HO(n,e,t,r,i){let a,s,c=0;do s=e+(t-e)/2,a=vw(s,r,i)-n,a>0?t=s:e=s;while(Math.abs(a)>VO&&++c<zO);return s}function kl(n,e,t,r){if(n===e&&t===r)return cr;const i=a=>HO(a,0,1,n,t);return a=>a===0||a===1?a:vw(i(a),e,r)}const mw=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,yw=n=>e=>1-n(1-e),xw=kl(.33,1.53,.69,.99),o1=yw(xw),ww=mw(o1),_w=n=>(n*=2)<1?.5*o1(n):.5*(2-Math.pow(2,-10*(n-1))),s1=n=>1-Math.sin(Math.acos(n)),bw=yw(s1),Ew=mw(s1),GO=kl(.42,0,1,1),$O=kl(0,0,.58,1),Sw=kl(.42,0,.58,1),qO=n=>Array.isArray(n)&&typeof n[0]!="number",Aw=n=>Array.isArray(n)&&typeof n[0]=="number",XO={linear:cr,easeIn:GO,easeInOut:Sw,easeOut:$O,circIn:s1,circInOut:Ew,circOut:bw,backIn:o1,backInOut:ww,backOut:xw,anticipate:_w},YO=n=>typeof n=="string",$y=n=>{if(Aw(n)){r1(n.length===4);const[e,t,r,i]=n;return kl(e,t,r,i)}else if(YO(n))return XO[n];return n},au=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function WO(n,e){let t=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(p){s.has(p)&&(d.schedule(p),n()),p(c)}const d={schedule:(p,g=!1,y=!1)=>{const _=y&&i?t:r;return g&&s.add(p),_.has(p)||_.add(p),p},cancel:p=>{r.delete(p),s.delete(p)},process:p=>{if(c=p,i){a=!0;return}i=!0,[t,r]=[r,t],t.forEach(f),t.clear(),i=!1,a&&(a=!1,d.process(p))}};return d}const KO=40;function Cw(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,s=au.reduce((O,I)=>(O[I]=WO(a),O),{}),{setup:c,read:f,resolveKeyframes:d,preUpdate:p,update:g,preRender:y,render:x,postRender:_}=s,E=()=>{const O=oi.useManualTiming?i.timestamp:performance.now();t=!1,oi.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(O-i.timestamp,KO),1)),i.timestamp=O,i.isProcessing=!0,c.process(i),f.process(i),d.process(i),p.process(i),g.process(i),y.process(i),x.process(i),_.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(E))},C=()=>{t=!0,r=!0,i.isProcessing||n(E)};return{schedule:au.reduce((O,I)=>{const P=s[I];return O[I]=(F,H=!1,G=!1)=>(t||C(),P.schedule(F,H,G)),O},{}),cancel:O=>{for(let I=0;I<au.length;I++)s[au[I]].cancel(O)},state:i,steps:s}}const{schedule:_t,cancel:$i,state:fn,steps:Oh}=Cw(typeof requestAnimationFrame<"u"?requestAnimationFrame:cr,!0);let gu;function ZO(){gu=void 0}const Ln={now:()=>(gu===void 0&&Ln.set(fn.isProcessing||oi.useManualTiming?fn.timestamp:performance.now()),gu),set:n=>{gu=n,queueMicrotask(ZO)}},Tw=n=>e=>typeof e=="string"&&e.startsWith(n),l1=Tw("--"),QO=Tw("var(--"),c1=n=>QO(n)?JO.test(n.split("/*")[0].trim()):!1,JO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ko={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},wl={...Ko,transform:n=>ai(0,1,n)},ou={...Ko,default:1},dl=n=>Math.round(n*1e5)/1e5,u1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function eD(n){return n==null}const tD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,f1=(n,e)=>t=>!!(typeof t=="string"&&tD.test(t)&&t.startsWith(n)||e&&!eD(t)&&Object.prototype.hasOwnProperty.call(t,e)),Ow=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,a,s,c]=r.match(u1);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(s),alpha:c!==void 0?parseFloat(c):1}},nD=n=>ai(0,255,n),Dh={...Ko,transform:n=>Math.round(nD(n))},Ea={test:f1("rgb","red"),parse:Ow("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Dh.transform(n)+", "+Dh.transform(e)+", "+Dh.transform(t)+", "+dl(wl.transform(r))+")"};function rD(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const h0={test:f1("#"),parse:rD,transform:Ea.transform},Ml=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ui=Ml("deg"),Mr=Ml("%"),Ne=Ml("px"),iD=Ml("vh"),aD=Ml("vw"),qy={...Mr,parse:n=>Mr.parse(n)/100,transform:n=>Mr.transform(n*100)},Po={test:f1("hsl","hue"),parse:Ow("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Mr.transform(dl(e))+", "+Mr.transform(dl(t))+", "+dl(wl.transform(r))+")"},Ft={test:n=>Ea.test(n)||h0.test(n)||Po.test(n),parse:n=>Ea.test(n)?Ea.parse(n):Po.test(n)?Po.parse(n):h0.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ea.transform(n):Po.transform(n),getAnimatableNone:n=>{const e=Ft.parse(n);return e.alpha=0,Ft.transform(e)}},oD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sD(n){return isNaN(n)&&typeof n=="string"&&(n.match(u1)?.length||0)+(n.match(oD)?.length||0)>0}const Dw="number",Rw="color",lD="var",cD="var(",Xy="${}",uD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _l(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(uD,f=>(Ft.test(f)?(r.color.push(a),i.push(Rw),t.push(Ft.parse(f))):f.startsWith(cD)?(r.var.push(a),i.push(lD),t.push(f)):(r.number.push(a),i.push(Dw),t.push(parseFloat(f))),++a,Xy)).split(Xy);return{values:t,split:c,indexes:r,types:i}}function Nw(n){return _l(n).values}function Iw(n){const{split:e,types:t}=_l(n),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const c=t[s];c===Dw?a+=dl(i[s]):c===Rw?a+=Ft.transform(i[s]):a+=i[s]}return a}}const fD=n=>typeof n=="number"?0:Ft.test(n)?Ft.getAnimatableNone(n):n;function dD(n){const e=Nw(n);return Iw(n)(e.map(fD))}const qi={test:sD,parse:Nw,createTransformer:Iw,getAnimatableNone:dD};function Rh(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function hD({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,a=0,s=0;if(!e)i=a=s=t;else{const c=t<.5?t*(1+e):t+e-t*e,f=2*t-c;i=Rh(f,c,n+1/3),a=Rh(f,c,n),s=Rh(f,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Du(n,e){return t=>t>0?e:n}const At=(n,e,t)=>n+(e-n)*t,Nh=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},pD=[h0,Ea,Po],gD=n=>pD.find(e=>e.test(n));function Yy(n){const e=gD(n);if(!e)return!1;let t=e.parse(n);return e===Po&&(t=hD(t)),t}const Wy=(n,e)=>{const t=Yy(n),r=Yy(e);if(!t||!r)return Du(n,e);const i={...t};return a=>(i.red=Nh(t.red,r.red,a),i.green=Nh(t.green,r.green,a),i.blue=Nh(t.blue,r.blue,a),i.alpha=At(t.alpha,r.alpha,a),Ea.transform(i))},p0=new Set(["none","hidden"]);function vD(n,e){return p0.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function mD(n,e){return t=>At(n,e,t)}function d1(n){return typeof n=="number"?mD:typeof n=="string"?c1(n)?Du:Ft.test(n)?Wy:wD:Array.isArray(n)?kw:typeof n=="object"?Ft.test(n)?Wy:yD:Du}function kw(n,e){const t=[...n],r=t.length,i=n.map((a,s)=>d1(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)t[s]=i[s](a);return t}}function yD(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=d1(n[i])(n[i],e[i]));return i=>{for(const a in r)t[a]=r[a](i);return t}}function xD(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=n.indexes[a][r[a]],c=n.values[s]??0;t[i]=c,r[a]++}return t}const wD=(n,e)=>{const t=qi.createTransformer(e),r=_l(n),i=_l(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?p0.has(n)&&!i.values.length||p0.has(e)&&!r.values.length?vD(n,e):Il(kw(xD(r,i),i.values),t):Du(n,e)};function Mw(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?At(n,e,t):d1(n)(n,e)}const _D=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>_t.update(e,t),stop:()=>$i(e),now:()=>fn.isProcessing?fn.timestamp:Ln.now()}},Pw=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)r+=Math.round(n(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ru=2e4;function h1(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Ru;)e+=t,r=n.next(e);return e>=Ru?1/0:e}function bD(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(h1(r),Ru);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:kr(i)}}const ED=5;function jw(n,e,t){const r=Math.max(e-ED,0);return gw(t-n(r),e-r)}const Nt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ih=.001;function SD({duration:n=Nt.duration,bounce:e=Nt.bounce,velocity:t=Nt.velocity,mass:r=Nt.mass}){let i,a,s=1-e;s=ai(Nt.minDamping,Nt.maxDamping,s),n=ai(Nt.minDuration,Nt.maxDuration,kr(n)),s<1?(i=d=>{const p=d*s,g=p*n,y=p-t,x=g0(d,s),_=Math.exp(-g);return Ih-y/x*_},a=d=>{const g=d*s*n,y=g*t+t,x=Math.pow(s,2)*Math.pow(d,2)*n,_=Math.exp(-g),E=g0(Math.pow(d,2),s);return(-i(d)+Ih>0?-1:1)*((y-x)*_)/E}):(i=d=>{const p=Math.exp(-d*n),g=(d-t)*n+1;return-Ih+p*g},a=d=>{const p=Math.exp(-d*n),g=(t-d)*(n*n);return p*g});const c=5/n,f=CD(i,a,c);if(n=Ir(n),isNaN(f))return{stiffness:Nt.stiffness,damping:Nt.damping,duration:n};{const d=Math.pow(f,2)*r;return{stiffness:d,damping:s*2*Math.sqrt(r*d),duration:n}}}const AD=12;function CD(n,e,t){let r=t;for(let i=1;i<AD;i++)r=r-n(r)/e(r);return r}function g0(n,e){return n*Math.sqrt(1-e*e)}const TD=["duration","bounce"],OD=["stiffness","damping","mass"];function Ky(n,e){return e.some(t=>n[t]!==void 0)}function DD(n){let e={velocity:Nt.velocity,stiffness:Nt.stiffness,damping:Nt.damping,mass:Nt.mass,isResolvedFromDuration:!1,...n};if(!Ky(n,OD)&&Ky(n,TD))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,a=2*ai(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Nt.mass,stiffness:i,damping:a}}else{const t=SD(n);e={...e,...t,mass:Nt.mass},e.isResolvedFromDuration=!0}return e}function Nu(n=Nt.visualDuration,e=Nt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const a=t.keyframes[0],s=t.keyframes[t.keyframes.length-1],c={done:!1,value:a},{stiffness:f,damping:d,mass:p,duration:g,velocity:y,isResolvedFromDuration:x}=DD({...t,velocity:-kr(t.velocity||0)}),_=y||0,E=d/(2*Math.sqrt(f*p)),C=s-a,b=kr(Math.sqrt(f/p)),T=Math.abs(C)<5;r||(r=T?Nt.restSpeed.granular:Nt.restSpeed.default),i||(i=T?Nt.restDelta.granular:Nt.restDelta.default);let O;if(E<1){const P=g0(b,E);O=F=>{const H=Math.exp(-E*b*F);return s-H*((_+E*b*C)/P*Math.sin(P*F)+C*Math.cos(P*F))}}else if(E===1)O=P=>s-Math.exp(-b*P)*(C+(_+b*C)*P);else{const P=b*Math.sqrt(E*E-1);O=F=>{const H=Math.exp(-E*b*F),G=Math.min(P*F,300);return s-H*((_+E*b*C)*Math.sinh(G)+P*C*Math.cosh(G))/P}}const I={calculatedDuration:x&&g||null,next:P=>{const F=O(P);if(x)c.done=P>=g;else{let H=P===0?_:0;E<1&&(H=P===0?Ir(_):jw(O,P,F));const G=Math.abs(H)<=r,V=Math.abs(s-F)<=i;c.done=G&&V}return c.value=c.done?s:F,c},toString:()=>{const P=Math.min(h1(I),Ru),F=Pw(H=>I.next(P*H).value,P,30);return P+"ms "+F},toTransition:()=>{}};return I}Nu.applyToOptions=n=>{const e=bD(n,100,Nu);return n.ease=e.ease,n.duration=Ir(e.duration),n.type="keyframes",n};function v0({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:c,max:f,restDelta:d=.5,restSpeed:p}){const g=n[0],y={done:!1,value:g},x=G=>c!==void 0&&G<c||f!==void 0&&G>f,_=G=>c===void 0?f:f===void 0||Math.abs(c-G)<Math.abs(f-G)?c:f;let E=t*e;const C=g+E,b=s===void 0?C:s(C);b!==C&&(E=b-g);const T=G=>-E*Math.exp(-G/r),O=G=>b+T(G),I=G=>{const V=T(G),Q=O(G);y.done=Math.abs(V)<=d,y.value=y.done?b:Q};let P,F;const H=G=>{x(y.value)&&(P=G,F=Nu({keyframes:[y.value,_(y.value)],velocity:jw(O,G,y.value),damping:i,stiffness:a,restDelta:d,restSpeed:p}))};return H(0),{calculatedDuration:null,next:G=>{let V=!1;return!F&&P===void 0&&(V=!0,I(G),H(G)),P!==void 0&&G>=P?F.next(G-P):(!V&&I(G),y)}}}function RD(n,e,t){const r=[],i=t||oi.mix||Mw,a=n.length-1;for(let s=0;s<a;s++){let c=i(n[s],n[s+1]);if(e){const f=Array.isArray(e)?e[s]||cr:e;c=Il(f,c)}r.push(c)}return r}function ND(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const a=n.length;if(r1(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=RD(e,r,i),f=c.length,d=p=>{if(s&&p<n[0])return e[0];let g=0;if(f>1)for(;g<n.length-2&&!(p<n[g+1]);g++);const y=xl(n[g],n[g+1],p);return c[g](y)};return t?p=>d(ai(n[0],n[a-1],p)):d}function ID(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=xl(0,e,r);n.push(At(t,1,i))}}function kD(n){const e=[0];return ID(e,n.length-1),e}function MD(n,e){return n.map(t=>t*e)}function PD(n,e){return n.map(()=>e||Sw).splice(0,n.length-1)}function hl({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=qO(r)?r.map($y):$y(r),a={done:!1,value:e[0]},s=MD(t&&t.length===e.length?t:kD(e),n),c=ND(s,e,{ease:Array.isArray(i)?i:PD(e,i)});return{calculatedDuration:n,next:f=>(a.value=c(f),a.done=f>=n,a)}}const jD=n=>n!==null;function p1(n,{repeat:e,repeatType:t="loop"},r,i=1){const a=n.filter(jD),c=i<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const BD={decay:v0,inertia:v0,tween:hl,keyframes:hl,spring:Nu};function Bw(n){typeof n.type=="string"&&(n.type=BD[n.type])}class g1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const LD=n=>n/100;class v1 extends g1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Ln.now()&&this.tick(Ln.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Bw(e);const{type:t=hl,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:c}=e;const f=t||hl;f!==hl&&typeof c[0]!="number"&&(this.mixKeyframes=Il(LD,Mw(c[0],c[1])),c=[0,100]);const d=f({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=h1(d));const{calculatedDuration:p}=d;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:p,repeat:g,repeatType:y,repeatDelay:x,type:_,onUpdate:E,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const b=this.currentTime-d*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let O=this.currentTime,I=r;if(g){const G=Math.min(this.currentTime,i)/c;let V=Math.floor(G),Q=G%1;!Q&&G>=1&&(Q=1),Q===1&&V--,V=Math.min(V,g+1),!!(V%2)&&(y==="reverse"?(Q=1-Q,x&&(Q-=x/c)):y==="mirror"&&(I=s)),O=ai(0,1,Q)*c}const P=T?{done:!1,value:p[0]}:I.next(O);a&&(P.value=a(P.value));let{done:F}=P;!T&&f!==null&&(F=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return H&&_!==v0&&(P.value=p1(p,this.options,C,this.speed)),E&&E(P.value),H&&this.finish(),P}then(e,t){return this.finished.then(e,t)}get duration(){return kr(this.calculatedDuration)}get time(){return kr(this.currentTime)}set time(e){e=Ir(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ln.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=kr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=_D,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ln.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function FD(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Sa=n=>n*180/Math.PI,m0=n=>{const e=Sa(Math.atan2(n[1],n[0]));return y0(e)},UD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:m0,rotateZ:m0,skewX:n=>Sa(Math.atan(n[1])),skewY:n=>Sa(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},y0=n=>(n=n%360,n<0&&(n+=360),n),Zy=m0,Qy=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Jy=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),VD={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Qy,scaleY:Jy,scale:n=>(Qy(n)+Jy(n))/2,rotateX:n=>y0(Sa(Math.atan2(n[6],n[5]))),rotateY:n=>y0(Sa(Math.atan2(-n[2],n[0]))),rotateZ:Zy,rotate:Zy,skewX:n=>Sa(Math.atan(n[4])),skewY:n=>Sa(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function x0(n){return n.includes("scale")?1:0}function w0(n,e){if(!n||n==="none")return x0(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=VD,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=UD,i=c}if(!i)return x0(e);const a=r[e],s=i[1].split(",").map(HD);return typeof a=="function"?a(s):s[a]}const zD=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return w0(t,e)};function HD(n){return parseFloat(n.trim())}const Zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qo=new Set(Zo),ex=n=>n===Ko||n===Ne,GD=new Set(["x","y","z"]),$D=Zo.filter(n=>!GD.has(n));function qD(n){const e=[];return $D.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Ca={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>w0(e,"x"),y:(n,{transform:e})=>w0(e,"y")};Ca.translateX=Ca.x;Ca.translateY=Ca.y;const Ta=new Set;let _0=!1,b0=!1,E0=!1;function Lw(){if(b0){const n=Array.from(Ta).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=qD(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}b0=!1,_0=!1,Ta.forEach(n=>n.complete(E0)),Ta.clear()}function Fw(){Ta.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(b0=!0)})}function XD(){E0=!0,Fw(),Lw(),E0=!1}class m1{constructor(e,t,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Ta.add(this),_0||(_0=!0,_t.read(Fw),_t.resolveKeyframes(Lw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const c=r.readValue(t,s);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}FD(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ta.delete(this)}cancel(){this.state==="scheduled"&&(Ta.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const YD=n=>n.startsWith("--");function WD(n,e,t){YD(e)?n.style.setProperty(e,t):n.style[e]=t}const KD=i1(()=>window.ScrollTimeline!==void 0),ZD={};function QD(n,e){const t=i1(n);return()=>ZD[e]??t()}const Uw=QD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ll=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,tx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ll([0,.65,.55,1]),circOut:ll([.55,0,1,.45]),backIn:ll([.31,.01,.66,-.59]),backOut:ll([.33,1.53,.69,.99])};function Vw(n,e){if(n)return typeof n=="function"?Uw()?Pw(n,e):"ease-out":Aw(n)?ll(n):Array.isArray(n)?n.map(t=>Vw(t,e)||tx.easeOut):tx[n]}function JD(n,e,t,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:c="easeOut",times:f}={},d=void 0){const p={[e]:t};f&&(p.offset=f);const g=Vw(c,i);Array.isArray(g)&&(p.easing=g);const y={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return d&&(y.pseudoElement=d),n.animate(p,y)}function zw(n){return typeof n=="function"&&"applyToOptions"in n}function eR({type:n,...e}){return zw(n)&&Uw()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class tR extends g1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,r1(typeof e.type!="string");const d=eR(e);this.animation=JD(t,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=p1(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):WD(t,r,p),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return kr(Number(e))}get time(){return kr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ir(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&KD()?(this.animation.timeline=e,cr):t(this)}}const Hw={anticipate:_w,backInOut:ww,circInOut:Ew};function nR(n){return n in Hw}function rR(n){typeof n.ease=="string"&&nR(n.ease)&&(n.ease=Hw[n.ease])}const nx=10;class iR extends tR{constructor(e){rR(e),Bw(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new v1({...s,autoplay:!1}),f=Ir(this.finishedTime??this.time);t.setWithVelocity(c.sample(f-nx).value,c.sample(f).value,nx),c.stop()}}const rx=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(qi.test(n)||n==="0")&&!n.startsWith("url("));function aR(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function oR(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],s=rx(i,e),c=rx(a,e);return!s||!c?!1:aR(n)||(t==="spring"||zw(t))&&r}function S0(n){n.duration=0,n.type}const sR=new Set(["opacity","clipPath","filter","transform"]),lR=i1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function cR(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:a,type:s}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=e.owner.getProps();return lR()&&t&&sR.has(t)&&(t!=="transform"||!d)&&!f&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const uR=40;class fR extends g1{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:c,name:f,motionValue:d,element:p,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ln.now();const y={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:a,repeatType:s,name:f,motionValue:d,element:p,...g},x=p?.KeyframeResolver||m1;this.keyframeResolver=new x(c,(_,E,C)=>this.onKeyframesResolved(_,E,y,!C),f,d,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:c,delay:f,isHandoff:d,onUpdate:p}=r;this.resolvedAt=Ln.now(),oR(e,a,s,c)||((oi.instantAnimations||!f)&&p?.(p1(e,r,t)),e[0]=e[e.length-1],S0(r),r.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>uR?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},x=!d&&cR(y)?new iR({...y,element:y.motionValue.owner.current}):new v1(y);x.finished.then(()=>this.notifyFinished()).catch(cr),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),XD()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const dR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hR(n){const e=dR.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function Gw(n,e,t=1){const[r,i]=hR(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return dw(s)?parseFloat(s):s}return c1(i)?Gw(i,e,t+1):i}function y1(n,e){return n?.[e]??n?.default??n}const $w=new Set(["width","height","top","left","right","bottom",...Zo]),pR={test:n=>n==="auto",parse:n=>n},qw=n=>e=>e.test(n),Xw=[Ko,Ne,Mr,Ui,aD,iD,pR],ix=n=>Xw.find(qw(n));function gR(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||pw(n):!0}const vR=new Set(["brightness","contrast","saturate","opacity"]);function mR(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(u1)||[];if(!r)return n;const i=t.replace(r,"");let a=vR.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+i+")"}const yR=/\b([a-z-]*)\(.*?\)/gu,A0={...qi,getAnimatableNone:n=>{const e=n.match(yR);return e?e.map(mR).join(" "):n}},ax={...Ko,transform:Math.round},xR={rotate:Ui,rotateX:Ui,rotateY:Ui,rotateZ:Ui,scale:ou,scaleX:ou,scaleY:ou,scaleZ:ou,skew:Ui,skewX:Ui,skewY:Ui,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:wl,originX:qy,originY:qy,originZ:Ne},x1={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,radius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne,...xR,zIndex:ax,fillOpacity:wl,strokeOpacity:wl,numOctaves:ax},wR={...x1,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:A0,WebkitFilter:A0},Yw=n=>wR[n];function Ww(n,e){let t=Yw(n);return t!==A0&&(t=qi),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const _R=new Set(["auto","none","0"]);function bR(n,e,t){let r=0,i;for(;r<n.length&&!i;){const a=n[r];typeof a=="string"&&!_R.has(a)&&_l(a).values.length&&(i=n[r]),r++}if(i&&t)for(const a of e)n[a]=Ww(t,i)}class ER extends m1{constructor(e,t,r,i,a){super(e,t,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),c1(d))){const p=Gw(d,t.current);p!==void 0&&(e[f]=p),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!$w.has(r)||e.length!==2)return;const[i,a]=e,s=ix(i),c=ix(a);if(s!==c)if(ex(s)&&ex(c))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else Ca[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||gR(e[i]))&&r.push(i);r.length&&bR(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ca[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Ca[t](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function SR(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const Kw=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function Zw(n){return hw(n)&&"offsetHeight"in n}const ox=30,AR=n=>!isNaN(parseFloat(n));class CR{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Ln.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ln.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=AR(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new a1);const r=this.events[e].add(t);return e==="change"?()=>{r(),_t.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ln.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ox)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,ox);return gw(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Go(n,e){return new CR(n,e)}const{schedule:w1}=Cw(queueMicrotask,!1),gr={x:!1,y:!1};function Qw(){return gr.x||gr.y}function TR(n){return n==="x"||n==="y"?gr[n]?null:(gr[n]=!0,()=>{gr[n]=!1}):gr.x||gr.y?null:(gr.x=gr.y=!0,()=>{gr.x=gr.y=!1})}function Jw(n,e){const t=SR(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function sx(n){return!(n.pointerType==="touch"||Qw())}function OR(n,e,t={}){const[r,i,a]=Jw(n,t),s=c=>{if(!sx(c))return;const{target:f}=c,d=e(f,c);if(typeof d!="function"||!f)return;const p=g=>{sx(g)&&(d(g),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,i)};return r.forEach(c=>{c.addEventListener("pointerenter",s,i)}),a}const e_=(n,e)=>e?n===e?!0:e_(n,e.parentElement):!1,_1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,DR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function RR(n){return DR.has(n.tagName)||n.tabIndex!==-1}const vu=new WeakSet;function lx(n){return e=>{e.key==="Enter"&&n(e)}}function kh(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const NR=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=lx(()=>{if(vu.has(t))return;kh(t,"down");const i=lx(()=>{kh(t,"up")}),a=()=>kh(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function cx(n){return _1(n)&&!Qw()}function IR(n,e,t={}){const[r,i,a]=Jw(n,t),s=c=>{const f=c.currentTarget;if(!cx(c))return;vu.add(f);const d=e(f,c),p=(x,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),vu.has(f)&&vu.delete(f),cx(x)&&typeof d=="function"&&d(x,{success:_})},g=x=>{p(x,f===window||f===document||t.useGlobalTarget||e_(f,x.target))},y=x=>{p(x,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",y,i)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",s,i),Zw(c)&&(c.addEventListener("focus",d=>NR(d,i)),!RR(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function t_(n){return hw(n)&&"ownerSVGElement"in n}function kR(n){return t_(n)&&n.tagName==="svg"}const wn=n=>!!(n&&n.getVelocity),MR=[...Xw,Ft,qi],PR=n=>MR.find(qw(n)),b1=N.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class jR extends N.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=Zw(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function BR({children:n,isPresent:e,anchorX:t,root:r}){const i=N.useId(),a=N.useRef(null),s=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=N.useContext(b1);return N.useInsertionEffect(()=>{const{width:f,height:d,top:p,left:g,right:y}=s.current;if(e||!a.current||!f||!d)return;const x=t==="left"?`left: ${g}`:`right: ${y}`;a.current.dataset.motionPopId=i;const _=document.createElement("style");c&&(_.nonce=c);const E=r??document.head;return E.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${d}px !important;
            ${x}px !important;
            top: ${p}px !important;
          }
        `),()=>{E.contains(_)&&E.removeChild(_)}},[e]),v.jsx(jR,{isPresent:e,childRef:a,sizeRef:s,children:N.cloneElement(n,{ref:a})})}const LR=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:c,root:f})=>{const d=J0(FR),p=N.useId();let g=!0,y=N.useMemo(()=>(g=!1,{id:p,initial:e,isPresent:t,custom:i,onExitComplete:x=>{d.set(x,!0);for(const _ of d.values())if(!_)return;r&&r()},register:x=>(d.set(x,!1),()=>d.delete(x))}),[t,d,r]);return a&&g&&(y={...y}),N.useMemo(()=>{d.forEach((x,_)=>d.set(_,!1))},[t]),N.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),s==="popLayout"&&(n=v.jsx(BR,{isPresent:t,anchorX:c,root:f,children:n})),v.jsx(Vu.Provider,{value:y,children:n})};function FR(){return new Map}function n_(n=!0){const e=N.useContext(Vu);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,a=N.useId();N.useEffect(()=>{if(n)return i(a)},[n]);const s=N.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,s]:[!0]}const su=n=>n.key||"";function ux(n){const e=[];return N.Children.forEach(n,t=>{N.isValidElement(t)&&e.push(t)}),e}const xr=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:c="left",root:f})=>{const[d,p]=n_(s),g=N.useMemo(()=>ux(n),[n]),y=s&&!d?[]:g.map(su),x=N.useRef(!0),_=N.useRef(g),E=J0(()=>new Map),[C,b]=N.useState(g),[T,O]=N.useState(g);fw(()=>{x.current=!1,_.current=g;for(let F=0;F<T.length;F++){const H=su(T[F]);y.includes(H)?E.delete(H):E.get(H)!==!0&&E.set(H,!1)}},[T,y.length,y.join("-")]);const I=[];if(g!==C){let F=[...g];for(let H=0;H<T.length;H++){const G=T[H],V=su(G);y.includes(V)||(F.splice(H,0,G),I.push(G))}return a==="wait"&&I.length&&(F=I),O(ux(F)),b(g),null}const{forceRender:P}=N.useContext(Q0);return v.jsx(v.Fragment,{children:T.map(F=>{const H=su(F),G=s&&!d?!1:g===T||y.includes(H),V=()=>{if(E.has(H))E.set(H,!0);else return;let Q=!0;E.forEach(re=>{re||(Q=!1)}),Q&&(P?.(),O(_.current),s&&p?.(),r&&r())};return v.jsx(LR,{isPresent:G,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:f,onExitComplete:G?void 0:V,anchorX:c,children:F},H)})})},r_=N.createContext({strict:!1}),fx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$o={};for(const n in fx)$o[n]={isEnabled:e=>fx[n].some(t=>!!e[t])};function UR(n){for(const e in n)$o[e]={...$o[e],...n[e]}}const VR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Iu(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||VR.has(n)}let i_=n=>!Iu(n);function zR(n){typeof n=="function"&&(i_=e=>e.startsWith("on")?!Iu(e):n(e))}try{zR(require("@emotion/is-prop-valid").default)}catch{}function HR(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(i_(i)||t===!0&&Iu(i)||!e&&!Iu(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const zu=N.createContext({});function Hu(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function bl(n){return typeof n=="string"||Array.isArray(n)}const E1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],S1=["initial",...E1];function Gu(n){return Hu(n.animate)||S1.some(e=>bl(n[e]))}function a_(n){return!!(Gu(n)||n.variants)}function GR(n,e){if(Gu(n)){const{initial:t,animate:r}=n;return{initial:t===!1||bl(t)?t:void 0,animate:bl(r)?r:void 0}}return n.inherit!==!1?e:{}}function $R(n){const{initial:e,animate:t}=GR(n,N.useContext(zu));return N.useMemo(()=>({initial:e,animate:t}),[dx(e),dx(t)])}function dx(n){return Array.isArray(n)?n.join(" "):n}const El={};function qR(n){for(const e in n)El[e]=n[e],l1(e)&&(El[e].isCSSVariable=!0)}function o_(n,{layout:e,layoutId:t}){return Qo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!El[n]||n==="opacity")}const XR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},YR=Zo.length;function WR(n,e,t){let r="",i=!0;for(let a=0;a<YR;a++){const s=Zo[a],c=n[s];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(s.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||t){const d=Kw(c,x1[s]);if(!f){i=!1;const p=XR[s]||s;r+=`${p}(${d}) `}t&&(e[s]=d)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function A1(n,e,t){const{style:r,vars:i,transformOrigin:a}=n;let s=!1,c=!1;for(const f in e){const d=e[f];if(Qo.has(f)){s=!0;continue}else if(l1(f)){i[f]=d;continue}else{const p=Kw(d,x1[f]);f.startsWith("origin")?(c=!0,a[f]=p):r[f]=p}}if(e.transform||(s||t?r.transform=WR(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:f="50%",originY:d="50%",originZ:p=0}=a;r.transformOrigin=`${f} ${d} ${p}`}}const C1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function s_(n,e,t){for(const r in e)!wn(e[r])&&!o_(r,t)&&(n[r]=e[r])}function KR({transformTemplate:n},e){return N.useMemo(()=>{const t=C1();return A1(t,e,n),Object.assign({},t.vars,t.style)},[e])}function ZR(n,e){const t=n.style||{},r={};return s_(r,t,n),Object.assign(r,KR(n,e)),r}function QR(n,e){const t={},r=ZR(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const JR={offset:"stroke-dashoffset",array:"stroke-dasharray"},e5={offset:"strokeDashoffset",array:"strokeDasharray"};function t5(n,e,t=1,r=0,i=!0){n.pathLength=1;const a=i?JR:e5;n[a.offset]=Ne.transform(-r);const s=Ne.transform(e),c=Ne.transform(t);n[a.array]=`${s} ${c}`}function l_(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...c},f,d,p){if(A1(n,c,d),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:y}=n;g.transform&&(y.transform=g.transform,delete g.transform),(y.transform||g.transformOrigin)&&(y.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),y.transform&&(y.transformBox=p?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),r!==void 0&&(g.scale=r),i!==void 0&&t5(g,i,a,s,!1)}const c_=()=>({...C1(),attrs:{}}),u_=n=>typeof n=="string"&&n.toLowerCase()==="svg";function n5(n,e,t,r){const i=N.useMemo(()=>{const a=c_();return l_(a,e,u_(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};s_(a,n.style,n),i.style={...a,...i.style}}return i}const r5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function T1(n){return typeof n!="string"||n.includes("-")?!1:!!(r5.indexOf(n)>-1||/[A-Z]/u.test(n))}function i5(n,e,t,{latestValues:r},i,a=!1){const c=(T1(n)?n5:QR)(e,r,i,n),f=HR(e,typeof n=="string",a),d=n!==N.Fragment?{...f,...c,ref:t}:{},{children:p}=e,g=N.useMemo(()=>wn(p)?p.get():p,[p]);return N.createElement(n,{...d,children:g})}function hx(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function O1(n,e,t,r){if(typeof e=="function"){const[i,a]=hx(r);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=hx(r);e=e(t!==void 0?t:n.custom,i,a)}return e}function mu(n){return wn(n)?n.get():n}function a5({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:o5(t,r,i,n),renderState:e()}}function o5(n,e,t,r){const i={},a=r(n,{});for(const y in a)i[y]=mu(a[y]);let{initial:s,animate:c}=n;const f=Gu(n),d=a_(n);e&&d&&!f&&n.inherit!==!1&&(s===void 0&&(s=e.initial),c===void 0&&(c=e.animate));let p=t?t.initial===!1:!1;p=p||s===!1;const g=p?c:s;if(g&&typeof g!="boolean"&&!Hu(g)){const y=Array.isArray(g)?g:[g];for(let x=0;x<y.length;x++){const _=O1(n,y[x]);if(_){const{transitionEnd:E,transition:C,...b}=_;for(const T in b){let O=b[T];if(Array.isArray(O)){const I=p?O.length-1:0;O=O[I]}O!==null&&(i[T]=O)}for(const T in E)i[T]=E[T]}}}return i}const f_=n=>(e,t)=>{const r=N.useContext(zu),i=N.useContext(Vu),a=()=>a5(n,e,r,i);return t?a():J0(a)};function D1(n,e,t){const{style:r}=n,i={};for(const a in r)(wn(r[a])||e.style&&wn(e.style[a])||o_(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const s5=f_({scrapeMotionValuesFromProps:D1,createRenderState:C1});function d_(n,e,t){const r=D1(n,e,t);for(const i in n)if(wn(n[i])||wn(e[i])){const a=Zo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=n[i]}return r}const l5=f_({scrapeMotionValuesFromProps:d_,createRenderState:c_}),c5=Symbol.for("motionComponentSymbol");function jo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function u5(n,e,t){return N.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):jo(t)&&(t.current=r))},[e])}const R1=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),f5="framerAppearId",h_="data-"+R1(f5),p_=N.createContext({});function d5(n,e,t,r,i){const{visualElement:a}=N.useContext(zu),s=N.useContext(r_),c=N.useContext(Vu),f=N.useContext(b1).reducedMotion,d=N.useRef(null);r=r||s.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const p=d.current,g=N.useContext(p_);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&h5(d.current,t,i,g);const y=N.useRef(!1);N.useInsertionEffect(()=>{p&&y.current&&p.update(t,c)});const x=t[h_],_=N.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return fw(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),_.current&&p.animationState&&p.animationState.animateChanges())}),N.useEffect(()=>{p&&(!_.current&&p.animationState&&p.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),_.current=!1),p.enteringChildren=void 0)}),p}function h5(n,e,t,r){const{layoutId:i,layout:a,drag:s,dragConstraints:c,layoutScroll:f,layoutRoot:d,layoutCrossfade:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:g_(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||c&&jo(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:f,layoutRoot:d})}function g_(n){if(n)return n.options.allowProjection!==!1?n.projection:g_(n.parent)}function Mh(n,{forwardMotionProps:e=!1}={},t,r){t&&UR(t);const i=T1(n)?l5:s5;function a(c,f){let d;const p={...N.useContext(b1),...c,layoutId:p5(c)},{isStatic:g}=p,y=$R(c),x=i(c,g);if(!g&&e1){g5();const _=v5(p);d=_.MeasureLayout,y.visualElement=d5(n,x,p,r,_.ProjectionNode)}return v.jsxs(zu.Provider,{value:y,children:[d&&y.visualElement?v.jsx(d,{visualElement:y.visualElement,...p}):null,i5(n,c,u5(x,y.visualElement,f),x,g,e)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const s=N.forwardRef(a);return s[c5]=n,s}function p5({layoutId:n}){const e=N.useContext(Q0).id;return e&&n!==void 0?e+"-"+n:n}function g5(n,e){N.useContext(r_).strict}function v5(n){const{drag:e,layout:t}=$o;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function m5(n,e){if(typeof Proxy>"u")return Mh;const t=new Map,r=(a,s)=>Mh(a,s,n,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(t.has(s)||t.set(s,Mh(s,void 0,n,e)),t.get(s))})}function v_({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function y5({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function x5(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Ph(n){return n===void 0||n===1}function C0({scale:n,scaleX:e,scaleY:t}){return!Ph(n)||!Ph(e)||!Ph(t)}function wa(n){return C0(n)||m_(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function m_(n){return px(n.x)||px(n.y)}function px(n){return n&&n!=="0%"}function ku(n,e,t){const r=n-t,i=e*r;return t+i}function gx(n,e,t,r,i){return i!==void 0&&(n=ku(n,i,r)),ku(n,t,r)+e}function T0(n,e=0,t=1,r,i){n.min=gx(n.min,e,t,r,i),n.max=gx(n.max,e,t,r,i)}function y_(n,{x:e,y:t}){T0(n.x,e.translate,e.scale,e.originPoint),T0(n.y,t.translate,t.scale,t.originPoint)}const vx=.999999999999,mx=1.0000000000001;function w5(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,s;for(let c=0;c<i;c++){a=t[c],s=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Lo(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,y_(n,s)),r&&wa(a.latestValues)&&Lo(n,a.latestValues))}e.x<mx&&e.x>vx&&(e.x=1),e.y<mx&&e.y>vx&&(e.y=1)}function Bo(n,e){n.min=n.min+e,n.max=n.max+e}function yx(n,e,t,r,i=.5){const a=At(n.min,n.max,i);T0(n,e,t,a,r)}function Lo(n,e){yx(n.x,e.x,e.scaleX,e.scale,e.originX),yx(n.y,e.y,e.scaleY,e.scale,e.originY)}function x_(n,e){return v_(x5(n.getBoundingClientRect(),e))}function _5(n,e,t){const r=x_(n,t),{scroll:i}=e;return i&&(Bo(r.x,i.offset.x),Bo(r.y,i.offset.y)),r}const xx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fo=()=>({x:xx(),y:xx()}),wx=()=>({min:0,max:0}),Pt=()=>({x:wx(),y:wx()}),O0={current:null},w_={current:!1};function b5(){if(w_.current=!0,!!e1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>O0.current=n.matches;n.addEventListener("change",e),e()}else O0.current=!1}const E5=new WeakMap;function S5(n,e,t){for(const r in e){const i=e[r],a=t[r];if(wn(i))n.addValue(r,i);else if(wn(a))n.addValue(r,Go(i,{owner:n}));else if(a!==i)if(n.hasValue(r)){const s=n.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=n.getStaticValue(r);n.addValue(r,Go(s!==void 0?s:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const _x=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class A5{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=m1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Ln.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,_t.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=s;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Gu(t),this.isVariantNode=a_(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in g){const x=g[y];f[y]!==void 0&&wn(x)&&x.set(f[y])}}mount(e){this.current=e,E5.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),w_.current||b5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:O0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),$i(this.notifyUpdate),$i(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Qo.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&_t.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in $o){const t=$o[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<_x.length;r++){const i=_x[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=S5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Go(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(dw(r)||pw(r))?r=parseFloat(r):!PR(r)&&qi.test(t)&&(r=Ww(e,t)),this.setBaseTarget(e,wn(r)?r.get():r)),wn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const a=O1(this.props,t,this.presenceContext?.custom);a&&(r=a[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!wn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new a1),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){w1.render(this.render)}}class __ extends A5{constructor(){super(...arguments),this.KeyframeResolver=ER}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function b_(n,{style:e,vars:t},r,i){const a=n.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in t)a.setProperty(s,t[s])}function C5(n){return window.getComputedStyle(n)}class T5 extends __{constructor(){super(...arguments),this.type="html",this.renderInstance=b_}readValueFromInstance(e,t){if(Qo.has(t))return this.projection?.isProjecting?x0(t):zD(e,t);{const r=C5(e),i=(l1(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return x_(e,t)}build(e,t,r){A1(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return D1(e,t,r)}}const E_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function O5(n,e,t,r){b_(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(E_.has(i)?i:R1(i),e.attrs[i])}class D5 extends __{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Qo.has(t)){const r=Yw(t);return r&&r.default||0}return t=E_.has(t)?t:R1(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return d_(e,t,r)}build(e,t,r){l_(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){O5(e,t,r,i)}mount(e){this.isSVGTag=u_(e.tagName),super.mount(e)}}const R5=(n,e)=>T1(n)?new D5(e):new T5(e,{allowProjection:n!==N.Fragment});function Uo(n,e,t){const r=n.getProps();return O1(r,e,t!==void 0?t:r.custom,n)}const D0=n=>Array.isArray(n);function N5(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Go(t))}function I5(n){return D0(n)?n[n.length-1]||0:n}function k5(n,e){const t=Uo(n,e);let{transitionEnd:r={},transition:i={},...a}=t||{};a={...a,...r};for(const s in a){const c=I5(a[s]);N5(n,s,c)}}function M5(n){return!!(wn(n)&&n.add)}function R0(n,e){const t=n.getValue("willChange");if(M5(t))return t.add(e);if(!t&&oi.WillChange){const r=new oi.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function S_(n){return n.props[h_]}const P5=n=>n!==null;function j5(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(P5),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[a]}const B5={type:"spring",stiffness:500,damping:25,restSpeed:10},L5=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),F5={type:"keyframes",duration:.8},U5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},V5=(n,{keyframes:e})=>e.length>2?F5:Qo.has(n)?n.startsWith("scale")?L5(e[1]):B5:U5;function z5({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:c,from:f,elapsed:d,...p}){return!!Object.keys(p).length}const N1=(n,e,t,r={},i,a)=>s=>{const c=y1(r,n)||{},f=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ir(f);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{s(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:a?void 0:i};z5(c)||Object.assign(p,V5(n,p)),p.duration&&(p.duration=Ir(p.duration)),p.repeatDelay&&(p.repeatDelay=Ir(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(S0(p),p.delay===0&&(g=!0)),(oi.instantAnimations||oi.skipAnimations)&&(g=!0,S0(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,g&&!a&&e.get()!==void 0){const y=j5(p.keyframes,c);if(y!==void 0){_t.update(()=>{p.onUpdate(y),p.onComplete()});return}}return c.isSync?new v1(p):new fR(p)};function H5({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function A_(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:s,...c}=e;r&&(a=r);const f=[],d=i&&n.animationState&&n.animationState.getState()[i];for(const p in c){const g=n.getValue(p,n.latestValues[p]??null),y=c[p];if(y===void 0||d&&H5(d,p))continue;const x={delay:t,...y1(a||{},p)},_=g.get();if(_!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===_&&!x.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const b=S_(n);if(b){const T=window.MotionHandoffAnimation(b,p,_t);T!==null&&(x.startTime=T,E=!0)}}R0(n,p),g.start(N1(p,g,y,n.shouldReduceMotion&&$w.has(p)?{type:!1}:x,n,E));const C=g.animation;C&&f.push(C)}return s&&Promise.all(f).then(()=>{_t.update(()=>{s&&k5(n,s)})}),f}function C_(n,e,t,r=0,i=1){const a=Array.from(n).sort((d,p)=>d.sortNodePosition(p)).indexOf(e),s=n.size,c=(s-1)*r;return typeof t=="function"?t(a,s):i===1?a*r:c-a*r}function N0(n,e,t={}){const r=Uo(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const a=r?()=>Promise.all(A_(n,r,t)):()=>Promise.resolve(),s=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:g}=i;return G5(n,e,f,d,p,g,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[f,d]=c==="beforeChildren"?[a,s]:[s,a];return f().then(()=>d())}else return Promise.all([a(),s(t.delay)])}function G5(n,e,t=0,r=0,i=0,a=1,s){const c=[];for(const f of n.variantChildren)f.notify("AnimationStart",e),c.push(N0(f,e,{...s,delay:t+(typeof r=="function"?0:r)+C_(n.variantChildren,f,r,i,a)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(c)}function $5(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>N0(n,a,t));r=Promise.all(i)}else if(typeof e=="string")r=N0(n,e,t);else{const i=typeof e=="function"?Uo(n,e,t.custom):e;r=Promise.all(A_(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function T_(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const q5=S1.length;function O_(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?O_(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<q5;t++){const r=S1[t],i=n.props[r];(bl(i)||i===!1)&&(e[r]=i)}return e}const X5=[...E1].reverse(),Y5=E1.length;function W5(n){return e=>Promise.all(e.map(({animation:t,options:r})=>$5(n,t,r)))}function K5(n){let e=W5(n),t=bx(),r=!0;const i=f=>(d,p)=>{const g=Uo(n,p,f==="exit"?n.presenceContext?.custom:void 0);if(g){const{transition:y,transitionEnd:x,..._}=g;d={...d,..._,...x}}return d};function a(f){e=f(n)}function s(f){const{props:d}=n,p=O_(n.parent)||{},g=[],y=new Set;let x={},_=1/0;for(let C=0;C<Y5;C++){const b=X5[C],T=t[b],O=d[b]!==void 0?d[b]:p[b],I=bl(O),P=b===f?T.isActive:null;P===!1&&(_=C);let F=O===p[b]&&O!==d[b]&&I;if(F&&r&&n.manuallyAnimateOnMount&&(F=!1),T.protectedKeys={...x},!T.isActive&&P===null||!O&&!T.prevProp||Hu(O)||typeof O=="boolean")continue;const H=Z5(T.prevProp,O);let G=H||b===f&&T.isActive&&!F&&I||C>_&&I,V=!1;const Q=Array.isArray(O)?O:[O];let re=Q.reduce(i(b),{});P===!1&&(re={});const{prevResolvedValues:te={}}=T,ae={...te,...re},fe=k=>{G=!0,y.has(k)&&(V=!0,y.delete(k)),T.needsAnimating[k]=!0;const U=n.getValue(k);U&&(U.liveStyle=!1)};for(const k in ae){const U=re[k],K=te[k];if(x.hasOwnProperty(k))continue;let R=!1;D0(U)&&D0(K)?R=!T_(U,K):R=U!==K,R?U!=null?fe(k):y.add(k):U!==void 0&&y.has(k)?fe(k):T.protectedKeys[k]=!0}T.prevProp=O,T.prevResolvedValues=re,T.isActive&&(x={...x,...re}),r&&n.blockInitialAnimation&&(G=!1);const L=F&&H;G&&(!L||V)&&g.push(...Q.map(k=>{const U={type:b};if(typeof k=="string"&&r&&!L&&n.manuallyAnimateOnMount&&n.parent){const{parent:K}=n,R=Uo(K,k);if(K.enteringChildren&&R){const{delayChildren:B}=R.transition||{};U.delay=C_(K.enteringChildren,n,B)}}return{animation:k,options:U}}))}if(y.size){const C={};if(typeof d.initial!="boolean"){const b=Uo(n,Array.isArray(d.initial)?d.initial[0]:d.initial);b&&b.transition&&(C.transition=b.transition)}y.forEach(b=>{const T=n.getBaseTarget(b),O=n.getValue(b);O&&(O.liveStyle=!0),C[b]=T??null}),g.push({animation:C})}let E=!!g.length;return r&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(g):Promise.resolve()}function c(f,d){if(t[f].isActive===d)return Promise.resolve();n.variantChildren?.forEach(g=>g.animationState?.setActive(f,d)),t[f].isActive=d;const p=s(f);for(const g in t)t[g].protectedKeys={};return p}return{animateChanges:s,setActive:c,setAnimateFunction:a,getState:()=>t,reset:()=>{t=bx(),r=!0}}}function Z5(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!T_(e,n):!1}function ma(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bx(){return{animate:ma(!0),whileInView:ma(),whileHover:ma(),whileTap:ma(),whileDrag:ma(),whileFocus:ma(),exit:ma()}}class Yi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Q5 extends Yi{constructor(e){super(e),e.animationState||(e.animationState=K5(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Hu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let J5=0;class eN extends Yi{constructor(){super(...arguments),this.id=J5++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const tN={animation:{Feature:Q5},exit:{Feature:eN}};function Sl(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Pl(n){return{point:{x:n.pageX,y:n.pageY}}}const nN=n=>e=>_1(e)&&n(e,Pl(e));function pl(n,e,t,r){return Sl(n,e,nN(t),r)}const D_=1e-4,rN=1-D_,iN=1+D_,R_=.01,aN=0-R_,oN=0+R_;function Dn(n){return n.max-n.min}function sN(n,e,t){return Math.abs(n-e)<=t}function Ex(n,e,t,r=.5){n.origin=r,n.originPoint=At(e.min,e.max,n.origin),n.scale=Dn(t)/Dn(e),n.translate=At(t.min,t.max,n.origin)-n.originPoint,(n.scale>=rN&&n.scale<=iN||isNaN(n.scale))&&(n.scale=1),(n.translate>=aN&&n.translate<=oN||isNaN(n.translate))&&(n.translate=0)}function gl(n,e,t,r){Ex(n.x,e.x,t.x,r?r.originX:void 0),Ex(n.y,e.y,t.y,r?r.originY:void 0)}function Sx(n,e,t){n.min=t.min+e.min,n.max=n.min+Dn(e)}function lN(n,e,t){Sx(n.x,e.x,t.x),Sx(n.y,e.y,t.y)}function Ax(n,e,t){n.min=e.min-t.min,n.max=n.min+Dn(e)}function vl(n,e,t){Ax(n.x,e.x,t.x),Ax(n.y,e.y,t.y)}function or(n){return[n("x"),n("y")]}const N_=({current:n})=>n?n.ownerDocument.defaultView:null,Cx=(n,e)=>Math.abs(n-e);function cN(n,e){const t=Cx(n.x,e.x),r=Cx(n.y,e.y);return Math.sqrt(t**2+r**2)}class I_{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Bh(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,_=cN(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!_)return;const{point:E}=y,{timestamp:C}=fn;this.history.push({...E,timestamp:C});const{onStart:b,onMove:T}=this.handlers;x||(b&&b(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,y)},this.handlePointerMove=(y,x)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=jh(x,this.transformPagePoint),_t.update(this.updatePoint,!0)},this.handlePointerUp=(y,x)=>{this.end();const{onEnd:_,onSessionEnd:E,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Bh(y.type==="pointercancel"?this.lastMoveEventInfo:jh(x,this.transformPagePoint),this.history);this.startEvent&&_&&_(y,b),E&&E(y,b)},!_1(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const c=Pl(e),f=jh(c,this.transformPagePoint),{point:d}=f,{timestamp:p}=fn;this.history=[{...d,timestamp:p}];const{onSessionStart:g}=t;g&&g(e,Bh(f,this.history)),this.removeListeners=Il(pl(this.contextWindow,"pointermove",this.handlePointerMove),pl(this.contextWindow,"pointerup",this.handlePointerUp),pl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),$i(this.updatePoint)}}function jh(n,e){return e?{point:e(n.point)}:n}function Tx(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Bh({point:n},e){return{point:n,delta:Tx(n,k_(e)),offset:Tx(n,uN(e)),velocity:fN(e,.1)}}function uN(n){return n[0]}function k_(n){return n[n.length-1]}function fN(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=k_(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Ir(e)));)t--;if(!r)return{x:0,y:0};const a=kr(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function dN(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?At(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?At(t,n,r.max):Math.min(n,t)),n}function Ox(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function hN(n,{top:e,left:t,bottom:r,right:i}){return{x:Ox(n.x,t,i),y:Ox(n.y,e,r)}}function Dx(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function pN(n,e){return{x:Dx(n.x,e.x),y:Dx(n.y,e.y)}}function gN(n,e){let t=.5;const r=Dn(n),i=Dn(e);return i>r?t=xl(e.min,e.max-r,n.min):r>i&&(t=xl(n.min,n.max-i,e.min)),ai(0,1,t)}function vN(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const I0=.35;function mN(n=I0){return n===!1?n=0:n===!0&&(n=I0),{x:Rx(n,"left","right"),y:Rx(n,"top","bottom")}}function Rx(n,e,t){return{min:Nx(n,e),max:Nx(n,t)}}function Nx(n,e){return typeof n=="number"?n:n[e]||0}const yN=new WeakMap;class xN{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Pl(g).point)},s=(g,y)=>{const{drag:x,dragPropagation:_,onDragStart:E}=this.getProps();if(x&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=TR(x),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),or(b=>{let T=this.getAxisMotionValue(b).get()||0;if(Mr.test(T)){const{projection:O}=this.visualElement;if(O&&O.layout){const I=O.layout.layoutBox[b];I&&(T=Dn(I)*(parseFloat(T)/100))}}this.originPoint[b]=T}),E&&_t.postRender(()=>E(g,y)),R0(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},c=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y;const{dragPropagation:x,dragDirectionLock:_,onDirectionLock:E,onDrag:C}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:b}=y;if(_&&this.currentDirection===null){this.currentDirection=wN(b),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",y.point,b),this.updateAxis("y",y.point,b),this.visualElement.render(),C&&C(g,y)},f=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y,this.stop(g,y),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>or(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new I_(e,{onSessionStart:a,onStart:s,onMove:c,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:N_(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:c}=this.getProps();c&&_t.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!lu(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=dN(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&jo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=hN(r.layoutBox,e):this.constraints=!1,this.elastic=mN(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&or(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=vN(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!jo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=_5(r,i.root,this.visualElement.getTransformPagePoint());let s=pN(i.layout.layoutBox,a);if(t){const c=t(y5(s));this.hasMutatedConstraints=!!c,c&&(s=v_(c))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},d=or(p=>{if(!lu(p,t,this.currentDirection))return;let g=f&&f[p]||{};s&&(g={min:0,max:0});const y=i?200:1e6,x=i?40:1e7,_={type:"inertia",velocity:r?e[p]:0,bounceStiffness:y,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,_)});return Promise.all(d).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return R0(this.visualElement,e),r.start(N1(e,r,0,t,this.visualElement,!1))}stopAnimation(){or(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){or(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){or(t=>{const{drag:r}=this.getProps();if(!lu(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:s,max:c}=i.layout.layoutBox[t];a.set(e[t]-At(s,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!jo(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};or(s=>{const c=this.getAxisMotionValue(s);if(c&&this.constraints!==!1){const f=c.get();i[s]=gN({min:f,max:f},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),or(s=>{if(!lu(s,e,null))return;const c=this.getAxisMotionValue(s),{min:f,max:d}=this.constraints[s];c.set(At(f,d,i[s]))})}addListeners(){if(!this.visualElement.current)return;yN.set(this.visualElement,this);const e=this.visualElement.current,t=pl(e,"pointerdown",f=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();jo(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),_t.read(r);const s=Sl(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(or(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=f[p].translate,g.set(g.get()+f[p].translate))}),this.visualElement.render())}));return()=>{s(),t(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=I0,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:c}}}function lu(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function wN(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class _N extends Yi{constructor(e){super(e),this.removeGroupControls=cr,this.removeListeners=cr,this.controls=new xN(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||cr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ix=n=>(e,t)=>{n&&_t.postRender(()=>n(e,t))};class bN extends Yi{constructor(){super(...arguments),this.removePointerDownListener=cr}onPointerDown(e){this.session=new I_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:N_(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ix(e),onStart:Ix(t),onMove:r,onEnd:(a,s)=>{delete this.session,i&&_t.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=pl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kx(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const rl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ne.test(n))n=parseFloat(n);else return n;const t=kx(n,e.target.x),r=kx(n,e.target.y);return`${t}% ${r}%`}},EN={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=qi.parse(n);if(i.length>5)return r;const a=qi.createTransformer(n),s=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,f=t.y.scale*e.y;i[0+s]/=c,i[1+s]/=f;const d=At(c,f,.5);return typeof i[2+s]=="number"&&(i[2+s]/=d),typeof i[3+s]=="number"&&(i[3+s]/=d),a(i)}};let Lh=!1;class SN extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;qR(AN),a&&(t.group&&t.group.add(a),r&&r.register&&i&&r.register(a),Lh&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),yu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,Lh=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||_t.postRender(()=>{const c=s.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),w1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;Lh=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function M_(n){const[e,t]=n_(),r=N.useContext(Q0);return v.jsx(SN,{...n,layoutGroup:r,switchLayoutGroup:N.useContext(p_),isPresent:e,safeToRemove:t})}const AN={borderRadius:{...rl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rl,borderTopRightRadius:rl,borderBottomLeftRadius:rl,borderBottomRightRadius:rl,boxShadow:EN};function CN(n,e,t){const r=wn(n)?n:Go(n);return r.start(N1("",r,e,t)),r.animation}const TN=(n,e)=>n.depth-e.depth;class ON{constructor(){this.children=[],this.isDirty=!1}add(e){t1(this.children,e),this.isDirty=!0}remove(e){n1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(TN),this.isDirty=!1,this.children.forEach(e)}}function DN(n,e){const t=Ln.now(),r=({timestamp:i})=>{const a=i-t;a>=e&&($i(r),n(a-e))};return _t.setup(r,!0),()=>$i(r)}const P_=["TopLeft","TopRight","BottomLeft","BottomRight"],RN=P_.length,Mx=n=>typeof n=="string"?parseFloat(n):n,Px=n=>typeof n=="number"||Ne.test(n);function NN(n,e,t,r,i,a){i?(n.opacity=At(0,t.opacity??1,IN(r)),n.opacityExit=At(e.opacity??1,0,kN(r))):a&&(n.opacity=At(e.opacity??1,t.opacity??1,r));for(let s=0;s<RN;s++){const c=`border${P_[s]}Radius`;let f=jx(e,c),d=jx(t,c);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||Px(f)===Px(d)?(n[c]=Math.max(At(Mx(f),Mx(d),r),0),(Mr.test(d)||Mr.test(f))&&(n[c]+="%")):n[c]=d}(e.rotate||t.rotate)&&(n.rotate=At(e.rotate||0,t.rotate||0,r))}function jx(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const IN=j_(0,.5,bw),kN=j_(.5,.95,cr);function j_(n,e,t){return r=>r<n?0:r>e?1:t(xl(n,e,r))}function Bx(n,e){n.min=e.min,n.max=e.max}function ir(n,e){Bx(n.x,e.x),Bx(n.y,e.y)}function Lx(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Fx(n,e,t,r,i){return n-=e,n=ku(n,1/t,r),i!==void 0&&(n=ku(n,1/i,r)),n}function MN(n,e=0,t=1,r=.5,i,a=n,s=n){if(Mr.test(e)&&(e=parseFloat(e),e=At(s.min,s.max,e/100)-s.min),typeof e!="number")return;let c=At(a.min,a.max,r);n===a&&(c-=e),n.min=Fx(n.min,e,t,c,i),n.max=Fx(n.max,e,t,c,i)}function Ux(n,e,[t,r,i],a,s){MN(n,e[t],e[r],e[i],e.scale,a,s)}const PN=["x","scaleX","originX"],jN=["y","scaleY","originY"];function Vx(n,e,t,r){Ux(n.x,e,PN,t?t.x:void 0,r?r.x:void 0),Ux(n.y,e,jN,t?t.y:void 0,r?r.y:void 0)}function zx(n){return n.translate===0&&n.scale===1}function B_(n){return zx(n.x)&&zx(n.y)}function Hx(n,e){return n.min===e.min&&n.max===e.max}function BN(n,e){return Hx(n.x,e.x)&&Hx(n.y,e.y)}function Gx(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function L_(n,e){return Gx(n.x,e.x)&&Gx(n.y,e.y)}function $x(n){return Dn(n.x)/Dn(n.y)}function qx(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class LN{constructor(){this.members=[]}add(e){t1(this.members,e),e.scheduleRender()}remove(e){if(n1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function FN(n,e,t){let r="";const i=n.x.translate/e.x,a=n.y.translate/e.y,s=t?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:p,rotateX:g,rotateY:y,skewX:x,skewY:_}=t;d&&(r=`perspective(${d}px) ${r}`),p&&(r+=`rotate(${p}deg) `),g&&(r+=`rotateX(${g}deg) `),y&&(r+=`rotateY(${y}deg) `),x&&(r+=`skewX(${x}deg) `),_&&(r+=`skewY(${_}deg) `)}const c=n.x.scale*e.x,f=n.y.scale*e.y;return(c!==1||f!==1)&&(r+=`scale(${c}, ${f})`),r||"none"}const Fh=["","X","Y","Z"],UN=1e3;let VN=0;function Uh(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function F_(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=S_(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",_t,!(i||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&F_(r)}function U_({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},c=e?.()){this.id=VN++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(GN),this.nodes.forEach(YN),this.nodes.forEach(WN),this.nodes.forEach($N)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new ON)}addEventListener(s,c){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new a1),this.eventHandlers.get(s).add(c)}notifyListeners(s,...c){const f=this.eventHandlers.get(s);f&&f.notify(...c)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=t_(s)&&!kR(s),this.instance=s;const{layoutId:c,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),n){let p,g=0;const y=()=>this.root.updateBlockedByResize=!1;_t.read(()=>{g=window.innerWidth}),n(s,()=>{const x=window.innerWidth;x!==g&&(g=x,this.root.updateBlockedByResize=!0,p&&p(),p=DN(y,250),yu.hasAnimatedSinceResize&&(yu.hasAnimatedSinceResize=!1,this.nodes.forEach(Wx)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||f)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:y,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||d.getDefaultTransition()||eI,{onLayoutAnimationStart:E,onLayoutAnimationComplete:C}=d.getProps(),b=!this.targetLayout||!L_(this.targetLayout,x),T=!g&&y;if(this.options.layoutRoot||this.resumeFrom||T||g&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...y1(_,"layout"),onPlay:E,onComplete:C};(d.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(p,T)}else g||Wx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$i(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(KN),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&F_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Xx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Yx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(XN),this.nodes.forEach(zN),this.nodes.forEach(HN)):this.nodes.forEach(Yx),this.clearAllSnapshots();const c=Ln.now();fn.delta=ai(0,1e3/60,c-fn.timestamp),fn.timestamp=c,fn.isProcessing=!0,Oh.update.process(fn),Oh.preRender.process(fn),Oh.render.process(fn),fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,w1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(qN),this.sharedNodes.forEach(ZN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dn(this.snapshot.measuredBox.x)&&!Dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(c=!1),c&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!B_(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;s&&this.instance&&(c||wa(this.latestValues)||p)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return s&&(f=this.removeTransform(f)),tI(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Pt();const c=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nI))){const{scroll:d}=this.root;d&&(Bo(c.x,d.offset.x),Bo(c.y,d.offset.y))}return c}removeElementScroll(s){const c=Pt();if(ir(c,s),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:p,options:g}=d;d!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&ir(c,s),Bo(c.x,p.offset.x),Bo(c.y,p.offset.y))}return c}applyTransform(s,c=!1){const f=Pt();ir(f,s);for(let d=0;d<this.path.length;d++){const p=this.path[d];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Lo(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),wa(p.latestValues)&&Lo(f,p.latestValues)}return wa(this.latestValues)&&Lo(f,this.latestValues),f}removeTransform(s){const c=Pt();ir(c,s);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!wa(d.latestValues))continue;C0(d.latestValues)&&d.updateSnapshot();const p=Pt(),g=d.measurePageBox();ir(p,g),Vx(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return wa(this.latestValues)&&Vx(c,this.latestValues),c}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(s||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=fn.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),vl(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),ir(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pt(),this.targetWithTransforms=Pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ir(this.target,this.layout.layoutBox),y_(this.target,this.targetDelta)):ir(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),vl(this.relativeTargetOrigin,this.target,y.target),ir(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||C0(this.parent.latestValues)||m_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),c=!!this.resumingFrom||this!==s;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===fn.timestamp&&(f=!1),f)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;ir(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;w5(this.layoutCorrected,this.treeScale,this.path,c),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Pt());const{target:x}=s;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Lx(this.prevProjectionDelta.x,this.projectionDelta.x),Lx(this.prevProjectionDelta.y,this.projectionDelta.y)),gl(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!qx(this.projectionDelta.x,this.prevProjectionDelta.x)||!qx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fo(),this.projectionDelta=Fo(),this.projectionDeltaWithTransform=Fo()}setAnimationOrigin(s,c=!1){const f=this.snapshot,d=f?f.latestValues:{},p={...this.latestValues},g=Fo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=Pt(),x=f?f.source:void 0,_=this.layout?this.layout.source:void 0,E=x!==_,C=this.getStack(),b=!C||C.members.length<=1,T=!!(E&&!b&&this.options.crossfade===!0&&!this.path.some(JN));this.animationProgress=0;let O;this.mixTargetDelta=I=>{const P=I/1e3;Kx(g.x,s.x,P),Kx(g.y,s.y,P),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vl(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QN(this.relativeTarget,this.relativeTargetOrigin,y,P),O&&BN(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Pt()),ir(O,this.relativeTarget)),E&&(this.animationValues=p,NN(p,d,this.latestValues,P,T,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&($i(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_t.update(()=>{yu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Go(0)),this.currentAnimation=CN(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),s.onUpdate&&s.onUpdate(c)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(UN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:c,target:f,layout:d,latestValues:p}=s;if(!(!c||!f||!d)){if(this!==s&&this.layout&&d&&V_(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||Pt();const g=Dn(this.layout.layoutBox.x);f.x.min=s.target.x.min,f.x.max=f.x.min+g;const y=Dn(this.layout.layoutBox.y);f.y.min=s.target.y.min,f.y.max=f.y.min+y}ir(c,f),Lo(c,p),gl(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(s,c){this.sharedNodes.has(s)||this.sharedNodes.set(s,new LN),this.sharedNodes.get(s).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:c,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),s&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let c=!1;const{latestValues:f}=s;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const d={};f.z&&Uh("z",s,d,this.animationValues);for(let p=0;p<Fh.length;p++)Uh(`rotate${Fh[p]}`,s,d,this.animationValues),Uh(`skew${Fh[p]}`,s,d,this.animationValues);s.render();for(const p in d)s.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);s.scheduleRender()}applyProjectionStyles(s,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=mu(c?.pointerEvents)||"",s.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=mu(c?.pointerEvents)||""),this.hasProjected&&!wa(this.latestValues)&&(s.transform=f?f({},""):"none",this.hasProjected=!1);return}s.visibility="";const p=d.animationValues||d.latestValues;this.applyTransformsToTarget();let g=FN(this.projectionDeltaWithTransform,this.treeScale,p);f&&(g=f(p,g)),s.transform=g;const{x:y,y:x}=this.projectionDelta;s.transformOrigin=`${y.origin*100}% ${x.origin*100}% 0`,d.animationValues?s.opacity=d===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:s.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in El){if(p[_]===void 0)continue;const{correct:E,applyTo:C,isCSSVariable:b}=El[_],T=g==="none"?p[_]:E(p[_],d);if(C){const O=C.length;for(let I=0;I<O;I++)s[C[I]]=T}else b?this.options.visualElement.renderState.vars[_]=T:s[_]=T}this.options.layoutId&&(s.pointerEvents=d===this?mu(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(Xx),this.root.sharedNodes.clear()}}}function zN(n){n.updateLayout()}function HN(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,a=e.source!==n.layout.source;i==="size"?or(p=>{const g=a?e.measuredBox[p]:e.layoutBox[p],y=Dn(g);g.min=t[p].min,g.max=g.min+y}):V_(i,e.layoutBox,t)&&or(p=>{const g=a?e.measuredBox[p]:e.layoutBox[p],y=Dn(t[p]);g.max=g.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+y)});const s=Fo();gl(s,t,e.layoutBox);const c=Fo();a?gl(c,n.applyTransform(r,!0),e.measuredBox):gl(c,t,e.layoutBox);const f=!B_(s);let d=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:y}=p;if(g&&y){const x=Pt();vl(x,e.layoutBox,g.layoutBox);const _=Pt();vl(_,t,y.layoutBox),L_(x,_)||(d=!0),p.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=x,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:s,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function GN(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function $N(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function qN(n){n.clearSnapshot()}function Xx(n){n.clearMeasurements()}function Yx(n){n.isLayoutDirty=!1}function XN(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Wx(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function YN(n){n.resolveTargetDelta()}function WN(n){n.calcProjection()}function KN(n){n.resetSkewAndRotation()}function ZN(n){n.removeLeadSnapshot()}function Kx(n,e,t){n.translate=At(e.translate,0,t),n.scale=At(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Zx(n,e,t,r){n.min=At(e.min,t.min,r),n.max=At(e.max,t.max,r)}function QN(n,e,t,r){Zx(n.x,e.x,t.x,r),Zx(n.y,e.y,t.y,r)}function JN(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const eI={duration:.45,ease:[.4,0,.1,1]},Qx=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Jx=Qx("applewebkit/")&&!Qx("chrome/")?Math.round:cr;function e2(n){n.min=Jx(n.min),n.max=Jx(n.max)}function tI(n){e2(n.x),e2(n.y)}function V_(n,e,t){return n==="position"||n==="preserve-aspect"&&!sN($x(e),$x(t),.2)}function nI(n){return n!==n.root&&n.scroll?.wasRoot}const rI=U_({attachResizeListener:(n,e)=>Sl(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vh={current:void 0},z_=U_({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Vh.current){const n=new rI({});n.mount(window),n.setOptions({layoutScroll:!0}),Vh.current=n}return Vh.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),iI={pan:{Feature:bN},drag:{Feature:_N,ProjectionNode:z_,MeasureLayout:M_}};function t2(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=r[i];a&&_t.postRender(()=>a(e,Pl(e)))}class aI extends Yi{mount(){const{current:e}=this.node;e&&(this.unmount=OR(e,(t,r)=>(t2(this.node,r,"Start"),i=>t2(this.node,i,"End"))))}unmount(){}}class oI extends Yi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Il(Sl(this.node.current,"focus",()=>this.onFocus()),Sl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function n2(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=r[i];a&&_t.postRender(()=>a(e,Pl(e)))}class sI extends Yi{mount(){const{current:e}=this.node;e&&(this.unmount=IR(e,(t,r)=>(n2(this.node,r,"Start"),(i,{success:a})=>n2(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const k0=new WeakMap,zh=new WeakMap,lI=n=>{const e=k0.get(n.target);e&&e(n)},cI=n=>{n.forEach(lI)};function uI({root:n,...e}){const t=n||document;zh.has(t)||zh.set(t,{});const r=zh.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(cI,{root:n,...e})),r[i]}function fI(n,e,t){const r=uI(e);return k0.set(n,t),r.observe(n),()=>{k0.delete(n),r.unobserve(n)}}const dI={some:0,all:1};class hI extends Yi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:a}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:dI[i]},c=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=d?p:g;y&&y(f)};return fI(this.node.current,s,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(pI(e,t))&&this.startObserver()}unmount(){}}function pI({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const gI={inView:{Feature:hI},tap:{Feature:sI},focus:{Feature:oI},hover:{Feature:aI}},vI={layout:{ProjectionNode:z_,MeasureLayout:M_}},mI={...tN,...gI,...iI,...vI},ht=m5(mI,R5),yI=()=>{const{status:n,loading:e,updating:t,toggleStatus:r}=uw(),[i,a]=N.useState({show:!1,message:"",type:"success"}),s=(d,p="success")=>{a({show:!0,message:d,type:p}),setTimeout(()=>{a({show:!1,message:"",type:"success"})},3e3)},c=async()=>{try{const d=n==="open"?"closed":"open";await r(),s(`Canteen ${d==="open"?"opened":"closed"} successfully!`)}catch(d){console.error("Toggle failed:",d),s("Failed to update canteen status. Please try again.","error")}},f=n==="open";return v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(ht.button,{onClick:c,disabled:e||t,className:`relative inline-flex h-6 w-11 items-center rounded-full focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed ${f?"bg-green-500 dark:bg-green-500":"bg-gray-300 dark:bg-gray-700"}`,whileTap:{scale:.95},transition:{duration:.2},children:v.jsx(ht.span,{className:"inline-block h-5 w-5 rounded-full bg-white dark:bg-gray-200 shadow-md",animate:{x:f?20:2},transition:{type:"spring",stiffness:400,damping:30},children:v.jsx("div",{className:"flex h-full w-full items-center justify-center",children:v.jsx(xr,{mode:"wait",children:f?v.jsx(ht.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:v.jsx(NO,{className:"h-3 w-3 text-gray-800 dark:text-gray-200 stroke-2"})},"open"):v.jsx(ht.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:v.jsx(lw,{className:"h-3 w-3 text-gray-800 dark:text-gray-200 stroke-2"})},"closed")})})})}),v.jsx(xr,{mode:"wait",children:v.jsx(ht.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.2},className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:f?"Canteen Open":"Canteen Closed"},f?"open":"closed")}),v.jsx(xr,{children:i.show&&v.jsx(ht.div,{className:"fixed bottom-4 right-4 z-50",initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3},children:v.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${i.type==="success"?"bg-green-500":"bg-red-500"}`,children:i.message})})})]})},xI=()=>{const[n,e]=N.useState([]),[t,r]=N.useState(!0),[i,a]=N.useState(new Set),[s,c]=N.useState({}),[f,d]=N.useState({}),[p,g]=N.useState(null),y=b=>!b||typeof b!="string"?"":b.toLowerCase().replace(/[^a-z0-9]+/g," ").trim().replace(/\s+/g," "),x=async()=>{try{r(!0);const{data:b,error:T}=await pe.from("food_items").select("id, name, price, available_quantity").order("name");if(T)throw console.error("Food items error:",T),T;const O=b||[];console.log(" Fetching pending orders from orders table...");const{data:I,error:P}=await pe.from("orders").select("id, order_id, item_name, status").in("status",["pending","PENDING"]);console.log(" Pending orders fetch result:",{data:I,error:P});let F={},H=[];if(P)console.error(" Failed to fetch pending orders:",P);else if(Array.isArray(I))for(const re of I){re.order_id&&H.push(re.order_id),re.id&&H.push(re.id);const te=y(re.item_name);te&&(F[te]=(F[te]||0)+1)}else console.warn(" Unexpected pending orders result:",I);let G={};if(H.length>0){console.log(" Fetching order_items for non-ready orders to derive per-item counts...");const{data:re,error:te}=await pe.from("order_items").select("order_id, food_item_id").in("order_id",H);if(console.log(" order_items (non-ready) fetch result:",{data:re,error:te}),!te&&Array.isArray(re)){const ae={};for(const fe of re){const L=fe.food_item_id,S=fe.order_id;!L||!S||(ae[L]||(ae[L]=new Set),ae[L].add(S))}for(const[fe,L]of Object.entries(ae))G[fe]=L.size}else te&&console.error(" Failed to fetch order_items for non-ready orders:",te)}else console.log(" No pending order keys to fetch order_items for.");const V=O.map(re=>{const te=G[re.id],ae=F[y(re.name)];return{...re,pendingCount:te??(ae||0)}});console.log(" Pending counts by item_name:",F),console.log(" Pending counts by food_item_id:",G),console.log(" Food items with counts:",V.map(re=>({name:re.name,pendingCount:re.pendingCount}))),e(V);const Q={};V.forEach(re=>{Q[re.id]=""}),c(Q)}catch(b){console.error("Error fetching food items:",b),C("Error loading food items","error")}finally{r(!1)}},_=(b,T)=>{const O=n.find(P=>P.id===b),I=parseInt(T)||0;d(P=>{const F={...P};return delete F[b],F}),T!==""&&(I<0||I>O.pendingCount)&&d(P=>({...P,[b]:`Must be between 0 and ${O.pendingCount}`})),c(P=>({...P,[b]:T}))},E=async b=>{const T=n.find(I=>I.id===b),O=parseInt(s[b])||0;if(O<=0||O>T.pendingCount){d(I=>({...I,[b]:`Must be between 1 and ${T.pendingCount}`}));return}try{a(Q=>new Set([...Q,b]));const{data:I,error:P}=await pe.from("orders").select("id, item_name, status").in("status",["pending","PENDING"]).limit(O*10);if(P)throw P;const F=y(T.name);console.log(" markOrdersReady fetched pending orders:",I);const H=(I||[]).filter(Q=>y(Q.item_name)===F);if(H.length===0){C("No pending orders found for this item","error");return}const G=H.slice(0,O).map(Q=>Q.id),{error:V}=await pe.from("orders").update({status:"ready"}).in("id",G);if(V)throw V;C(`Marked ${O} orders as ready for ${T.name}`,"success"),c(Q=>({...Q,[b]:""})),await x()}catch(I){console.error("Error marking orders ready:",I),C("Error updating orders","error")}finally{a(I=>{const P=new Set(I);return P.delete(b),P})}},C=(b,T="success")=>{g({message:b,type:T}),setTimeout(()=>g(null),3e3)};return N.useEffect(()=>{x()},[]),t?v.jsx("div",{className:"home-dashboard",children:v.jsxs("div",{className:"card",children:[v.jsx("div",{className:"card-title",children:"Manage Orders"}),v.jsxs("div",{className:"flex items-center justify-center py-12",children:[v.jsx(Ho,{className:"w-8 h-8 animate-spin text-primary-500"}),v.jsx("span",{className:"ml-3 text-muted",children:"Loading food items..."})]})]})}):v.jsxs("div",{className:"home-dashboard",children:[v.jsxs("div",{className:"card",children:[v.jsx("div",{className:"card-title",children:"Manage Orders"}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("div",{className:"muted",children:"Mark orders as ready for each food item"}),v.jsxs("button",{onClick:x,disabled:t,className:"btn btn-primary",children:[v.jsx(gO,{className:`w-4 h-4 mr-2 ${t?"animate-spin":""}`}),"Refresh"]})]})]}),v.jsx("div",{className:"food-items-grid",children:n.map(b=>v.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"card compact-card",children:[v.jsxs("div",{className:"card-header",children:[v.jsx("h3",{className:"food-item-name",children:b.name}),v.jsxs("span",{className:"pending-badge",children:[b.pendingCount," pending"]})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:"Orders Ready"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"number",min:"0",max:b.pendingCount,value:s[b.id]||"",onChange:T=>_(b.id,T.target.value),placeholder:"0",className:"flex-1 input",disabled:b.pendingCount===0||i.has(b.id)}),v.jsx("button",{onClick:()=>E(b.id),disabled:b.pendingCount===0||i.has(b.id)||!s[b.id]||f[b.id],className:"btn btn-success",children:i.has(b.id)?v.jsx(Ho,{className:"w-4 h-4 animate-spin"}):v.jsx(Ou,{className:"w-4 h-4"})})]})]}),v.jsx(xr,{children:f[b.id]&&v.jsxs(ht.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center text-sm text-red-500",children:[v.jsx(Oa,{className:"w-4 h-4 mr-1"}),f[b.id]]})})]})]},b.id))}),v.jsx(xr,{children:p&&v.jsx(ht.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg z-50 ${p.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:v.jsxs("div",{className:"flex items-center",children:[p.type==="success"?v.jsx(Ou,{className:"w-5 h-5 mr-2"}):v.jsx(Oa,{className:"w-5 h-5 mr-2"}),p.message]})})})]})},wI=()=>v.jsx("div",{className:"home-dashboard",children:v.jsx("div",{className:"dashboard-content",children:v.jsx(ht.div,{className:"card coming-soon-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:v.jsxs("div",{className:"coming-soon-content",children:[v.jsx(ht.div,{className:"coming-soon-icon",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:""}),v.jsx("h2",{className:"coming-soon-title",children:"Pre-Order Feature"}),v.jsx("p",{className:"coming-soon-description",children:"We're working on an exciting pre-order system that will allow you to reserve your favorite meals in advance. Stay tuned for updates!"}),v.jsx("div",{className:"coming-soon-status",children:v.jsxs("div",{className:"status-indicator",children:[v.jsx(Ho,{className:"w-4 h-4 animate-spin"}),v.jsx("span",{children:"In Development"})]})}),v.jsxs("div",{className:"features-preview",children:[v.jsx("h3",{className:"features-title",children:"What to Expect:"}),v.jsxs("div",{className:"features-list",children:[v.jsxs("div",{className:"feature-item",children:[v.jsx(Z6,{className:"w-5 h-5 text-primary"}),v.jsx("span",{children:"Schedule orders in advance"})]}),v.jsxs("div",{className:"feature-item",children:[v.jsx(fO,{className:"w-5 h-5 text-primary"}),v.jsx("span",{children:"Pickup time slots"})]})]})]})]})})})}),_I=({isOpen:n,onClose:e,onItemRestored:t})=>{const[r,i]=N.useState([]),[a,s]=N.useState(!1),[c,f]=N.useState(new Set),[d,p]=N.useState(null),g=async()=>{try{s(!0);const{data:_,error:E}=await pe.from("inventory_items").select("*").eq("is_active",!1).order("name");if(E){console.error("Error fetching removed items:",E),x("Failed to load removed items","error");return}i(_||[])}catch(_){console.error("Error fetching removed items:",_),x("Failed to load removed items","error")}finally{s(!1)}},y=async(_,E)=>{try{f(b=>new Set([...b,_]));const{error:C}=await pe.from("inventory_items").update({is_active:!0,removed_at:null}).eq("id",_);if(C){console.error("Error restoring item:",C),x(`Failed to restore ${E}`,"error");return}x(`${E} has been restored successfully!`,"success"),await g(),t&&t()}catch(C){console.error("Error restoring item:",C),x(`Failed to restore ${E}`,"error")}finally{f(C=>{const b=new Set(C);return b.delete(_),b})}},x=(_,E="success")=>{p({message:_,type:E}),setTimeout(()=>p(null),3e3)};return N.useEffect(()=>{n&&g()},[n]),N.useEffect(()=>{const _=E=>{E.key==="Escape"&&e()};if(n)return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[n,e]),v.jsx(xr,{children:n&&v.jsxs(v.Fragment,{children:[v.jsx(ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:e}),v.jsxs(ht.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 h-full w-96 bg-white dark:bg-gray-800 shadow-2xl z-50 flex flex-col",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Removed Items"}),v.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[r.length," item",r.length!==1?"s":""," removed"]})]}),v.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:v.jsx(ri,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a?v.jsxs("div",{className:"flex items-center justify-center py-12",children:[v.jsx(Ho,{className:"w-8 h-8 animate-spin text-primary-500"}),v.jsx("span",{className:"ml-3 text-gray-500 dark:text-gray-400",children:"Loading removed items..."})]}):r.length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx("div",{className:"text-gray-400 dark:text-gray-500 mb-4",children:v.jsx(Oa,{size:48,className:"mx-auto"})}),v.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Removed Items"}),v.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"All items are currently active in your inventory."})]}):v.jsx("div",{className:"space-y-4",children:r.map(_=>v.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:_.name}),v.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Price: ",_.price||_.cost||"N/A"]}),_.removed_at&&v.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["Removed: ",new Date(_.removed_at).toLocaleDateString()]})]}),v.jsxs("button",{onClick:()=>y(_.id,_.name),disabled:c.has(_.id),className:"ml-4 px-3 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white text-sm rounded-lg transition-colors flex items-center gap-2",children:[c.has(_.id)?v.jsx(Ho,{size:16,className:"animate-spin"}):v.jsx(Gy,{size:16}),c.has(_.id)?"Restoring...":"Add Back"]})]})},_.id))})}),v.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:v.jsxs("button",{onClick:g,disabled:a,className:"w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors flex items-center justify-center gap-2",children:[v.jsx(Gy,{size:16,className:a?"animate-spin":""}),"Refresh List"]})})]}),v.jsx(xr,{children:d&&v.jsx(ht.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg z-50 ${d.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:v.jsxs("div",{className:"flex items-center",children:[d.type==="success"?v.jsx(Ou,{className:"w-5 h-5 mr-2"}):v.jsx(Oa,{className:"w-5 h-5 mr-2"}),d.message]})})})]})})},r2=({value:n,onChange:e,disabled:t=!1,maxSize:r=10*1024*1024,acceptedTypes:i=["image/jpeg","image/jpg","image/png","image/gif","image/webp"],className:a=""})=>{const[s,c]=N.useState(!1),[f,d]=N.useState(""),p=N.useRef(null),g=b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?c(!0):b.type==="dragleave"&&c(!1)},y=b=>{if(b.preventDefault(),b.stopPropagation(),c(!1),t)return;const T=b.dataTransfer.files;T&&T[0]&&_(T[0])},x=b=>{if(t)return;const T=b.target.files?.[0];T&&_(T)},_=b=>{if(d(""),!i.includes(b.type)){d(`Invalid file type. Allowed types: ${i.join(", ")}`);return}if(b.size>r){d(`File too large. Maximum size is ${(r/1024/1024).toFixed(1)}MB`);return}e(b)},E=()=>{e(null),d(""),p.current&&(p.current.value="")},C=b=>{if(b===0)return"0 Bytes";const T=1024,O=["Bytes","KB","MB","GB"],I=Math.floor(Math.log(b)/Math.log(T));return parseFloat((b/Math.pow(T,I)).toFixed(2))+" "+O[I]};return v.jsxs("div",{className:`image-upload-container ${a}`,children:[v.jsx("input",{ref:p,type:"file",accept:i.join(","),onChange:x,style:{display:"none"},disabled:t}),v.jsx("div",{className:`upload-area ${s?"drag-active":""} ${t?"disabled":""}`,onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:y,onClick:()=>!t&&p.current?.click(),children:n?v.jsxs("div",{className:"file-selected",children:[v.jsx("div",{className:"file-preview",children:v.jsx("img",{src:URL.createObjectURL(n),alt:"Preview",className:"preview-image"})}),v.jsxs("div",{className:"file-info",children:[v.jsx("div",{className:"file-name",children:n.name}),v.jsx("div",{className:"file-size",children:C(n.size)})]}),v.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),E()},className:"remove-file-btn",disabled:t,children:v.jsx(ri,{size:16})})]}):v.jsxs("div",{className:"upload-empty",children:[v.jsx("div",{className:"upload-icon",children:v.jsx(ow,{size:32})}),v.jsxs("div",{className:"upload-text",children:[v.jsx("div",{className:"upload-title",children:s?"Drop image here":"Click or drag to upload"}),v.jsxs("div",{className:"upload-subtitle",children:["Supports: JPG, PNG, GIF, WebP (max ",C(r),")"]})]}),v.jsx(CO,{size:20,className:"upload-arrow"})]})}),f&&v.jsxs(ht.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"upload-error",children:[v.jsx(Oa,{size:16}),v.jsx("span",{children:f})]})]})};let Xn=!1;const bI=(n=800,e=200,t=.3)=>{if(Xn){console.log(" Beep skipped (already playing)");return}try{Xn=!0;const r=window.AudioContext||window.webkitAudioContext;if(!r){console.warn(" Web Audio API not supported");return}const i=new r,a=i.createOscillator(),s=i.createGain();a.connect(s),s.connect(i.destination),a.frequency.setValueAtTime(n,i.currentTime),a.type="sine",s.gain.setValueAtTime(0,i.currentTime),s.gain.linearRampToValueAtTime(t,i.currentTime+.01),s.gain.exponentialRampToValueAtTime(.01,i.currentTime+e/1e3),a.start(i.currentTime),a.stop(i.currentTime+e/1e3),setTimeout(()=>{Xn=!1},e+100),console.log(" Notification beep played")}catch(r){console.warn(" Failed to generate notification beep:",r),Xn=!1}},EI=(n=.3)=>{if(Xn){console.log(" Double beep skipped (already playing)");return}try{Xn=!0;const e=window.AudioContext||window.webkitAudioContext,t=new e,r=t.createOscillator(),i=t.createGain();r.connect(i),i.connect(t.destination),r.frequency.setValueAtTime(800,t.currentTime),r.type="sine",i.gain.setValueAtTime(0,t.currentTime),i.gain.linearRampToValueAtTime(n,t.currentTime+.01),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),r.start(t.currentTime),r.stop(t.currentTime+.1),setTimeout(()=>{const a=t.createOscillator(),s=t.createGain();a.connect(s),s.connect(t.destination),a.frequency.setValueAtTime(1e3,t.currentTime),a.type="sine",s.gain.setValueAtTime(0,t.currentTime),s.gain.linearRampToValueAtTime(n,t.currentTime+.01),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.15),a.start(t.currentTime),a.stop(t.currentTime+.15)},150),setTimeout(()=>{Xn=!1},400),console.log(" Double notification beep played")}catch(e){console.warn(" Failed to generate double beep:",e),Xn=!1}},SI=(n=.3,e=null)=>{if(Xn){console.log(" Notification skipped (already playing)");return}try{if(Xn=!0,!e){const a=window.AudioContext||window.webkitAudioContext;if(!a){console.warn(" Web Audio API not supported"),Xn=!1;return}e=new a}const t=[523,659,784],r=[],i=[];t.forEach((a,s)=>{const c=e.createOscillator(),f=e.createGain();c.connect(f),f.connect(e.destination),c.frequency.setValueAtTime(a,e.currentTime),c.type="sine";const d=e.currentTime+s*.02,p=d+.3;f.gain.setValueAtTime(0,d),f.gain.linearRampToValueAtTime(n*.3,d+.01),f.gain.exponentialRampToValueAtTime(.01,p),c.start(d),c.stop(p),r.push(c),i.push(f)}),setTimeout(()=>{Xn=!1},400),console.log(" Pleasant notification sound played")}catch(t){console.warn(" Failed to generate pleasant notification:",t),Xn=!1}};let Hh=null,i2=!1;const H_=()=>{const n=N.useRef(null),e=N.useRef(!1),t=N.useCallback(async()=>{if(e.current||i2){n.current=Hh,e.current=!0;return}try{const c=window.AudioContext||window.webkitAudioContext;n.current=new c,Hh=n.current,n.current.state==="suspended"&&await n.current.resume(),e.current=!0,i2=!0,console.log(" Sound notification system initialized")}catch(c){console.warn(" Failed to initialize audio:",c)}},[]),r=N.useCallback(async()=>{try{e.current||await t();const c=Hh||n.current;if(!c){console.warn(" Audio context not available");return}c.state==="suspended"&&await c.resume(),console.log(" Calling generatePleasantNotification with audio context:",c),SI(.3,c)}catch(c){console.warn(" Failed to play notification sound:",c)}},[t]),i=N.useCallback(async()=>{try{e.current||await t(),await r()}catch(c){console.warn(" Failed to play notification with interaction:",c)}},[t,r]),a=N.useCallback(()=>{EI(.3)},[]),s=N.useCallback(()=>{bI(800,200,.3)},[]);return N.useEffect(()=>()=>{n.current&&(n.current.close(),n.current=null)},[]),{playNotification:r,playNotificationWithInteraction:i,playDoubleBeep:a,playSimpleBeep:s,initializeAudio:t}},G_=N.createContext(),I1=()=>{const n=N.useContext(G_);if(!n)throw new Error("useNotification must be used within a NotificationProvider");return n},AI=({children:n})=>{const{playNotification:e,initializeAudio:t}=H_(),[r,i]=N.useState(!0),[a,s]=N.useState(0),[c,f]=N.useState(!1),[d,p]=N.useState(0),[g,y]=N.useState(null),x=N.useRef(null),_=N.useRef(null),E=N.useRef(3e3),C=N.useRef(null),b=N.useRef(null),T=N.useRef(new Set);N.useEffect(()=>{const V=()=>{c||(console.log(" Initializing audio on first user interaction..."),t(),f(!0),document.removeEventListener("click",V),document.removeEventListener("keydown",V))};return document.addEventListener("click",V),document.addEventListener("keydown",V),()=>{document.removeEventListener("click",V),document.removeEventListener("keydown",V)}},[t,c]);const O=N.useCallback(V=>{C.current&&clearTimeout(C.current);const Q={id:Date.now(),type:"new_order",title:"New Order Received!",message:`Order #${V.order_token||V.token_no||"N/A"} - ${V.item_name||"Unknown Item"}`,timestamp:new Date().toISOString(),orderData:V};y(Q),C.current=setTimeout(()=>{y(null)},5e3)},[]),I=N.useCallback(async V=>{const Q=Date.now(),re=Q-d,te=[V?.id,V?.order_id,V?.token_no,V?.order_token].filter(Boolean);for(const fe of te)if(T.current.has(fe)){console.log(" Notification suppressed for local order:",fe),T.current.delete(fe);return}const ae=V.id||V.order_id||V.token_no;if(b.current===ae){console.log(" Notification skipped (duplicate order ID):",ae);return}if(re<E.current){console.log(" Notification skipped (cooldown active)");return}console.log(" Showing order notification...",V),p(Q),b.current=ae,O(V),console.log(" Attempting to play notification sound..."),await e()},[e,d,O]),P=N.useCallback(()=>{y(null),C.current&&clearTimeout(C.current)},[]);N.useEffect(()=>{if(!r||!c)return;const V=async()=>{try{const{data:Q,error:re}=await pe.from("orders").select("id, status, order_placer").in("status",["pending","PENDING"]).not("order_placer","in","(admin,staff,counter)").gte("created_at",new Date(Date.now()-6e4).toISOString());if(re){console.warn(" Failed to check for new orders:",re);return}const te=Q?.length||0;if(te>a&&a>0){console.log(" New order detected via polling!");try{const{data:ae}=await pe.from("orders").select("*").in("status",["pending","PENDING"]).not("order_placer","in","(admin,staff,counter)").order("created_at",{ascending:!1}).limit(1).single();ae?await I(ae):await I({item_name:"New Order",order_token:"N/A"})}catch(ae){console.warn(" Failed to get latest order details:",ae),await I({item_name:"New Order",order_token:"N/A"})}}s(te)}catch(Q){console.warn(" Error checking for new orders:",Q)}};return x.current=setInterval(V,5e3),()=>{x.current&&clearInterval(x.current)}},[r,c,a,I]),N.useEffect(()=>{if(!(!r||!c))return _.current&&_.current.unsubscribe(),_.current=pe.channel("orders-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},async V=>{console.log(" NotificationContext: New order inserted via real-time:",V.new),console.log(" Order details:",{status:V.new.status,order_placer:V.new.order_placer,item_name:V.new.item_name,created_at:V.new.created_at});const Q=V.new.status==="pending"||V.new.status==="PENDING",re=V.new.order_placer!=="admin"&&V.new.order_placer!=="staff"&&V.new.order_placer!=="counter";console.log(" Filter check:",{isPending:Q,isNotAdminOrder:re,willNotify:Q&&re}),Q&&re?(console.log(" NotificationContext: Showing notification for app order!"),await I(V.new)):console.log(" NotificationContext: Notification filtered out:",{reason:Q?"Admin/staff order":"Not pending status"})}).subscribe(),()=>{_.current&&(_.current.unsubscribe(),_.current=null)}},[r,c,I]),N.useEffect(()=>{if(!r||!c)return;const V=async Q=>{console.log(" NotificationContext: Received orderInserted event from Orders Panel:",Q.detail);try{const re=Q.detail;console.log(" NotificationContext: Triggering notification from Orders Panel event!"),await I(re)}catch(re){console.warn(" NotificationContext: Error handling orderInserted event:",re)}};return window.addEventListener("orderInserted",V),()=>{window.removeEventListener("orderInserted",V)}},[r,c,I]);const G={isEnabled:r,toggleNotifications:()=>{i(!r)},playTestSound:async()=>{await e()},isInitialized:c,popupNotification:g,closePopupNotification:P,showOrderNotification:I,suppressNotificationForOrder:V=>{if(V)try{T.current.add(V),setTimeout(()=>T.current.delete(V),6e4)}catch{}}};return v.jsx(G_.Provider,{value:G,children:n})},CI={BASE_URL:"/IARE-Canteen-Web/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE:"/IARE-Canteen-Web/",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY",VITE_SUPABASE_URL:"https://znqhoohjugyblgwepovp.supabase.co"},Ie=n=>String(n||"").toUpperCase();let dn=null;function TI(){return v.jsx(OI,{children:v.jsx(FO,{children:v.jsx(AI,{children:v.jsx(DI,{})})})})}class OI extends oE.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Unhandled error in App:",e,t)}render(){return this.state.hasError?v.jsxs("div",{style:{padding:24},children:[v.jsx("h2",{children:"Application error"}),v.jsx("pre",{style:{whiteSpace:"pre-wrap",color:"crimson"},children:String(this.state.error)})]}):this.props.children}}function DI(){const n=li();Pu();const[e,t]=N.useState("checking"),[r,i]=N.useState(()=>localStorage.getItem("theme")||"light");N.useEffect(()=>{document.documentElement.setAttribute("data-theme",r),document.documentElement.classList.toggle("dark",r==="dark"),localStorage.setItem("theme",r)},[r]);const s={"/":"Dashboard","/place-order":"Place Order","/orders":"Orders","/inventory":"Inventory Management","/manage-orders":"Manage Orders","/pre-order":"Pre-Order","/scan":"Scan QR","/ai":"AI Predictions","/settings":"Settings"}[n.pathname]||"Dashboard",[c,f]=N.useState("live"),[d,p]=N.useState(!1),[g,y]=N.useState([]),[x,_]=N.useState([]),[E,C]=N.useState([]),[b,T]=N.useState([]),[O,I]=N.useState({}),P=async(G,V)=>{const Q=[...x];_(re=>re.map(ae=>ae.id===G?{...ae,status:V}:ae).sort((ae,fe)=>{const L=Ie(ae.status),S=Ie(fe.status),k=R=>{switch(R){case"PENDING":return 1;case"READY":return 2;case"CANCELLED":return 3;default:return 4}},U=k(L),K=k(S);return U!==K?U-K:new Date(ae.created_at)-new Date(fe.created_at)})),I(re=>({...re,[G]:!0}));try{const{data:re,error:te}=await pe.rpc("update_order_status_flexible",{p_order_id:G,p_new_status:String(V).toLowerCase()});if(te)throw te;const ae=Q.find(S=>S.id===G)||x.find(S=>S.id===G);if(!ae)return;const fe=ae.status,L=new Date().toLocaleString();if(V==="READY"){_(S=>S.map(U=>U.id===G?{...U,status:"READY"}:U).sort((U,K)=>{const R=Ie(U.status),B=Ie(K.status),Z=xe=>{switch(xe){case"PENDING":return 1;case"READY":return 2;case"CANCELLED":return 3;default:return 4}},ne=Z(R),ce=Z(B);return ne!==ce?ne-ce:new Date(U.created_at)-new Date(K.created_at)})),y(S=>{const k=S.filter(U=>!(U.orderId===G&&U.to==="PREPARING"));return[{orderId:G,itemName:ae.item_name,from:fe,to:"READY",ts:Date.now()},...k]}),T(S=>[{orderId:G,itemName:ae.item_name,from:fe,to:"READY",at:L,ts:Date.now(),prevLoc:"live",nextLoc:"live"},...S.filter(k=>!(k.orderId===G&&k.to==="PREPARING"))]);return}if(V==="DELIVERED"){_(S=>S.filter(k=>k.id!==G)),C(S=>[{...ae,status:"DELIVERED",deliveredAt:Date.now()},...S]),y(S=>{const k=S.filter(U=>!(U.orderId===G&&U.to==="PREPARING"));return[{orderId:G,itemName:ae.item_name,from:fe,to:"DELIVERED",ts:Date.now()},...k]}),T(S=>[{orderId:G,itemName:ae.item_name,from:fe,to:"DELIVERED",at:L,ts:Date.now(),prevLoc:"live",nextLoc:"delivered"},...S.filter(k=>!(k.orderId===G&&k.to==="PREPARING"))]),console.log(" Order delivered, reducing stock for:",ae.item_name);try{const{data:S,error:k}=await pe.from("food_items").select("available_quantity").eq("name",ae.item_name).single();if(k){console.error(" Could not fetch current stock:",k);return}const{error:U}=await pe.from("food_items").update({available_quantity:Math.max(0,S.available_quantity-1),updated_at:new Date().toISOString()}).eq("name",ae.item_name);U?(console.error(" Failed to reduce stock on delivery:",U),console.warn(" Order marked as delivered but stock not reduced. Please update manually.")):(console.log(" Stock reduced on delivery"),dn&&dn())}catch(S){console.error(" Stock reduction error:",S)}return}_(S=>S.map(U=>U.id===G?{...U,status:V}:U).sort((U,K)=>{const R=Ie(U.status),B=Ie(K.status),Z=xe=>{switch(xe){case"PENDING":return 1;case"READY":return 2;case"CANCELLED":return 3;default:return 4}},ne=Z(R),ce=Z(B);return ne!==ce?ne-ce:new Date(U.created_at)-new Date(K.created_at)})),y(S=>[{orderId:G,itemName:ae.item_name,from:fe,to:V,ts:Date.now()},...S]),T(S=>[{orderId:G,itemName:ae.item_name,from:fe,to:V,at:L,ts:Date.now(),prevLoc:"live",nextLoc:"live"},...S])}catch(re){console.error("Failed to update order status:",re);try{_(Q)}catch{}alert("Failed to update order status: "+(re.message||re))}finally{I(re=>{const te={...re};return delete te[G],te})}},F=async G=>{if(confirm("Are you sure you want to cancel this order? This will restore the stock."))try{console.log(" Starting order cancellation for ID:",G);const{data:V,error:Q}=await pe.from("orders").select("item_name, status, id").eq("id",G).single();if(Q){console.error(" Could not fetch order details:",Q),alert(`Failed to fetch order details: ${Q.message}`);return}if(console.log(" Order data retrieved:",V),Ie(V.status)==="DELIVERED"){alert('Cannot cancel delivered orders. Use "Revert" instead.');return}const{error:te}=await pe.from("orders").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",G);if(te){console.error(" Failed to update order status:",te),alert(`Failed to cancel order: ${te.message}`);return}if(console.log(" Order status updated to CANCELLED"),V.item_name){console.log(" Order canceled, restoring stock for:",V.item_name);try{const{data:ae,error:fe}=await pe.from("food_items").select("available_quantity").eq("name",V.item_name).single();if(fe)console.error(" Could not fetch current stock for restore:",fe),console.warn(" Order canceled but stock not restored. Please update manually.");else{const{error:L}=await pe.from("food_items").update({available_quantity:ae.available_quantity+1,updated_at:new Date().toISOString()}).eq("name",V.item_name);L?(console.error(" Failed to restore stock on cancel:",L),console.warn(" Order canceled but stock not restored. Please update manually.")):(console.log(" Stock restored on cancel"),dn&&dn())}}catch(ae){console.error(" Stock restoration error:",ae)}}_(ae=>ae.filter(fe=>fe.id!==G)),alert("Order canceled successfully! Stock has been restored."),console.log(" Order cancellation completed successfully")}catch(V){console.error(" Error canceling order:",V),alert(`Failed to cancel order: ${V.message||"Unknown error"}`)}};N.useEffect(()=>{const G=async()=>{try{const te="https://znqhoohjugyblgwepovp.supabase.co",ae="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY";t("connecting");const fe=1e3;let L=0,S=[];for(;;){const B=L+fe-1,{data:Z,error:ne}=await pe.from("orders").select("*").order("created_at",{ascending:!1}).range(L,B);if(ne)throw ne;const ce=Z||[];if(console.log("Fetched batch:",ce.length,"orders"),S=S.concat(ce),ce.length<fe)break;L+=fe}try{const B=Array.from(new Set((S||[]).map(Z=>Z.item_id||Z.itemId||Z.item).filter(Boolean)));if(B.length>0){let Z=Object.create(null);try{const{data:ne,error:ce}=await pe.from("order_items").select("*").in("id",B);if(ce)throw ce;for(const he of ne||[]){const Me=he.id||he.item_id||he.code||he.slug,Oe=he.price??he.cost??he.rate??he.amount;Me&&typeof Oe=="number"&&(Z[Me]=Oe)}const xe=B.filter(he=>Z[he]==null);if(xe.length>0){const{data:he}=await pe.from("order_items").select("*").in("item_id",xe);for(const Me of he||[]){const Oe=Me.item_id||Me.id||Me.code||Me.slug,Tt=Me.price??Me.cost??Me.rate??Me.amount;Oe&&typeof Tt=="number"&&(Z[Oe]=Tt)}}}catch{const{data:ce,error:xe}=await pe.from("food_items").select("*").in("id",B);if(!xe)for(const he of ce||[]){const Me=he.id||he.item_id||he.code||he.slug,Oe=he.price??he.cost??he.rate??he.amount;Me&&typeof Oe=="number"&&(Z[Me]=Oe)}}S=S.map(ne=>{const ce=ne.item_id||ne.itemId||ne.item,xe=Z[ce];return xe!=null&&(ne.total_amount==null||Number.isNaN(ne.total_amount))?{...ne,total_amount:xe}:ne})}}catch(B){console.warn("Price merge skipped:",B?.message||B)}const k=(S||[]).filter(B=>{const Z=Ie(B.status);return Z!=="DELIVERED"&&Z!=="CANCELLED"}),K=(S||[]).filter(B=>{const Z=Ie(B.status);return Z==="DELIVERED"||Z==="CANCELLED"}).sort((B,Z)=>new Date(Z.created_at)-new Date(B.created_at)),R=k.sort((B,Z)=>{const ne=new Date(B.created_at),xe=new Date(Z.created_at)-ne;if(Math.abs(xe)>1e3)return xe;const he=Ie(B.status),Me=Ie(Z.status),Oe=xt=>{switch(xt){case"PENDING":return 1;case"READY":return 2;case"CANCELLED":return 3;default:return 4}},Tt=Oe(he),pn=Oe(Me);return Tt-pn});console.log("Total orders fetched:",S.length),console.log("Live orders:",R.length),console.log("Past orders:",K.length),console.log("Sample order:",S[0]),_(R),C(K),t("connected")}catch(te){console.error("Supabase orders fetch failed:",te),t("error"),te.message?.includes("JWT")?console.error("Authentication error - check your Supabase anon key"):te.message?.includes('relation "orders" does not exist')&&console.error("Orders table does not exist - run the SQL script in Supabase")}};G();let V=setInterval(G,1e3),Q=!1;const re=pe.channel("public:orders").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},async te=>{console.log(" Orders Panel: New order received via real-time:",te.new),Q||(Q=!0,V&&(clearInterval(V),V=null));let ae=te.new;try{if(ae&&(ae.total==null||Number.isNaN(ae.total))){const fe=ae.item_id||ae.itemId||ae.item;if(fe){let L=null;try{const{data:S,error:k}=await pe.from("order_items").select("*").or(`id.eq.${fe},item_id.eq.${fe}`);if(!k){const U=(S||[])[0];L=U?U.price??U.cost??U.rate??U.amount??null:null}}catch{}if(L==null)try{const{data:S,error:k}=await pe.from("food_items").select("*").or(`id.eq.${fe},item_id.eq.${fe}`);if(!k){const U=(S||[])[0];L=U?U.price??U.cost??U.rate??U.amount??null:null}}catch{}typeof L=="number"&&(ae={...ae,total_amount:L})}}}catch{}_(fe=>[ae,...fe].sort((S,k)=>{const U=Ie(S.status),K=Ie(k.status),R=ne=>{switch(ne){case"PENDING":return 1;case"READY":return 2;case"CANCELLED":return 3;default:return 4}},B=R(U),Z=R(K);return B!==Z?B-Z:new Date(S.created_at)-new Date(k.created_at)}));try{console.log(" Orders Panel: Checking if notification should be triggered for order:",ae);const fe=ae.status==="pending"||ae.status==="PENDING",L=ae.order_placer!=="admin"&&ae.order_placer!=="staff"&&ae.order_placer!=="counter";if(console.log(" Orders Panel: Filter check:",{status:ae.status,order_placer:ae.order_placer,isPending:fe,isNotAdminOrder:L,willNotify:fe&&L}),fe&&L){console.log(" Orders Panel: Triggering notification for new order!");const S=new CustomEvent("orderInserted",{detail:ae});window.dispatchEvent(S)}else console.log(" Orders Panel: Notification filtered out:",{reason:fe?"Admin/staff order":"Not pending status"})}catch(fe){console.warn(" Orders Panel: Error triggering notification:",fe)}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},async te=>{Q||(Q=!0,V&&(clearInterval(V),V=null));let ae=te.new;try{_(fe=>{const L=fe.find(K=>K.id===te.new.id),S=L&&(L.order_token||L.token_no);let k={...te.new};return S&&(k.token_no=S,k.order_token=S),Ie(k.status)==="DELIVERED"||Ie(k.status)==="CANCELLED"?fe.filter(K=>K.id!==k.id):fe.map(K=>K.id===k.id?k:K).sort((K,R)=>{const B=Ie(K.status),Z=Ie(R.status),ne=he=>{switch(he){case"PENDING":return 1;case"READY":return 2;case"CANCELLED":return 3;default:return 4}},ce=ne(B),xe=ne(Z);return ce!==xe?ce-xe:new Date(K.created_at)-new Date(R.created_at)})}),(Ie(te.new.status)==="DELIVERED"||Ie(te.new.status)==="CANCELLED")&&C(fe=>[{...ae,deliveredAt:Date.now()},...fe.filter(L=>L.id!==ae.id)]);return}catch{Ie(ae.status)==="DELIVERED"||Ie(ae.status)==="CANCELLED"?(_(L=>L.filter(S=>S.id!==ae.id)),C(L=>[{...ae,deliveredAt:Date.now()},...L.filter(S=>S.id!==ae.id)])):_(L=>L.map(k=>k.id===ae.id?ae:k).sort((k,U)=>{const K=Ie(k.status),R=Ie(U.status),B=ce=>{switch(ce){case"PENDING":return 1;case"READY":return 2;case"CANCELLED":return 3;default:return 4}},Z=B(K),ne=B(R);return Z!==ne?Z-ne:new Date(k.created_at)-new Date(U.created_at)}))}}).subscribe();return()=>{V&&clearInterval(V);try{re.unsubscribe()}catch{}}},[]);const H=async G=>{if(!G)return;const{orderId:V,from:Q,to:re,prevLoc:te,nextLoc:ae}=G;if(te==="live"&&ae==="delivered"){const fe=E.find(L=>L.id===V);if(!fe)return;C(L=>L.filter(S=>S.id!==V)),_(L=>[{...fe,status:Q},...L]),y(L=>[{orderId:V,itemName:fe.item_name,from:re,to:Q,ts:Date.now()},...L]);try{await pe.rpc("update_order_status_flexible",{p_order_id:V,p_new_status:String(Q).toLowerCase()})}catch{}}else if(te==="live"&&ae==="live"){_(fe=>fe.map(L=>L.id===V?{...L,status:Q}:L));try{const L=x.find(S=>S.id===V)?.item_name||"Order Item";y(S=>[{orderId:V,itemName:L,from:re,to:Q,ts:Date.now()},...S])}catch{}try{await pe.rpc("update_order_status_flexible",{p_order_id:V,p_new_status:String(Q).toLowerCase()})}catch{}}T(fe=>fe.filter(L=>L!==G))};return N.useEffect(()=>{const G=setInterval(()=>{y(V=>V.filter(Q=>Date.now()-Q.ts<25e3)),T(V=>V.filter(Q=>Q.ts?Date.now()-Q.ts<25e3:!0))},1e3);return()=>clearInterval(G)},[]),N.useEffect(()=>{window.__IARE_ORDERS__=x,window.__IARE_DELIVERED__=E},[x,E]),v.jsxs("div",{className:"app",children:[v.jsxs("aside",{className:"sidebar",children:[v.jsx("h2",{className:"brand",children:"IARE Canteen"}),v.jsxs("nav",{className:"nav",children:[v.jsx(Dr,{to:"/",end:!0,children:"Home"}),v.jsx(Dr,{to:"/place-order",children:"Place Order"}),v.jsx(Dr,{to:"/orders",children:"Orders"}),v.jsx(Dr,{to:"/inventory",children:"Inventory Management"}),v.jsx(Dr,{to:"/manage-orders",children:"Manage Orders"}),v.jsx(Dr,{to:"/scan",children:"Scan QR"}),v.jsx(Dr,{to:"/ai",children:"AI Predictions"}),v.jsx(Dr,{to:"/pre-order",children:"Pre-Order"}),v.jsx(Dr,{to:"/settings",children:"Settings"})]})]}),v.jsxs("main",{className:"main",children:[v.jsxs("header",{className:"topbar",children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[v.jsx("h1",{style:{margin:0},children:s}),s==="Dashboard"&&v.jsx(yI,{})]}),v.jsxs("div",{className:"header-actions",children:[n.pathname==="/orders"&&v.jsxs(v.Fragment,{children:[v.jsxs("button",{className:`btn orders-btn recent-btn ${c==="activity"?"active":""}`,onClick:()=>{f("activity"),console.log(" Recent orders view activated")},disabled:c==="activity",title:"View recent order activity",children:[v.jsx(X6,{className:"w-4 h-4"}),"Recent"]}),v.jsxs("button",{className:`btn orders-btn live-btn ${c==="live"?"active":""}`,onClick:()=>{f("live"),console.log(" Live orders view activated")},disabled:c==="live",title:"View live orders in real-time",children:[v.jsx(LO,{className:"w-4 h-4"}),"Live"]}),v.jsxs("button",{className:`btn orders-btn past-btn ${c==="past"?"active":""}`,onClick:()=>{f("past"),console.log(" Past orders view activated")},disabled:c==="past",title:"View completed orders history",children:[v.jsx(H6,{className:"w-4 h-4"}),"Past"]}),c==="live"&&v.jsxs("button",{className:`btn orders-btn picture-btn ${d?"active":""}`,onClick:()=>{p(G=>!G),console.log(` Switched to ${d?"List":"Picture"} mode`)},title:`Switch to ${d?"List":"Picture"} view`,children:[v.jsx(ow,{className:"w-4 h-4"}),d?"List Mode":"Picture Mode"]})]}),v.jsx(ht.button,{className:"theme-toggle-btn bg-white dark:bg-gray-800 text-black dark:text-white transition-colors duration-300",onClick:()=>i(r==="dark"?"light":"dark"),title:"Toggle Dark Mode",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:v.jsx(ht.div,{animate:{rotate:r==="dark"?180:0,scale:r==="dark"?1.1:1},transition:{duration:.3,ease:"easeInOut"},className:"text-black dark:text-white",children:r==="dark"?v.jsx(cO,{size:20}):v.jsx(_O,{size:20})})})]})]}),e==="not-configured"?v.jsx("div",{className:"home-dashboard",children:v.jsxs("div",{className:"card",children:[v.jsx("h2",{style:{marginTop:0,color:"#ef4444"},children:" Supabase Not Configured"}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("p",{children:"The app needs Supabase credentials to work properly."}),v.jsx("p",{children:"Please follow these steps:"})]}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("h3",{children:"1. Get Your Supabase Credentials"}),v.jsxs("p",{children:["Go to ",v.jsx("a",{href:"https://supabase.com/dashboard",target:"_blank",rel:"noopener noreferrer",children:"Supabase Dashboard"}),"  Your Project  Settings  API"]}),v.jsx("p",{children:"Copy your Project URL and anon public key"})]}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("h3",{children:"2. Create .env File"}),v.jsxs("p",{children:["Create a file named ",v.jsx("code",{children:".env"})," in the project root with:"]}),v.jsx("pre",{style:{backgroundColor:"#f3f4f6",padding:"12px",borderRadius:"4px",fontSize:"14px",overflow:"auto"},children:`VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key_here
VITE_DISABLE_AUTH=true`})]}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("h3",{children:"3. Restart Development Server"}),v.jsx("p",{children:"After creating the .env file, restart the server:"}),v.jsx("code",{children:"npm run dev"})]}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("h3",{children:"4. Check Console"}),v.jsx("p",{children:"Open browser console (F12) to see connection status and any errors."})]}),v.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:" Refresh Page"})]})}):e==="checking"?v.jsx("div",{className:"home-dashboard",children:v.jsxs("div",{className:"card",children:[v.jsx("h2",{style:{marginTop:0},children:" Connecting to Supabase..."}),v.jsx("p",{children:"Please wait while we connect to the database."}),v.jsx("div",{style:{textAlign:"center",marginTop:"20px"},children:v.jsx("div",{className:"spinner",style:{margin:"0 auto"}})})]})}):e==="error"?v.jsx("div",{className:"home-dashboard",children:v.jsxs("div",{className:"card",children:[v.jsx("h2",{style:{marginTop:0,color:"#ef4444"},children:" Connection Error"}),v.jsx("p",{children:"Failed to connect to Supabase. Please check:"}),v.jsxs("ul",{style:{marginLeft:"20px"},children:[v.jsx("li",{children:"Your Supabase credentials in .env file"}),v.jsx("li",{children:"Internet connection"}),v.jsx("li",{children:"Supabase project status"})]}),v.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:" Try Again"})]})}):v.jsxs(rS,{children:[v.jsx(Or,{path:"/",element:v.jsx(RI,{recent:g,orders:x,onUpdateStatus:P,updatingIds:O})}),v.jsx(Or,{path:"/place-order",element:v.jsx(II,{})}),v.jsx(Or,{path:"/orders",element:v.jsx(MI,{orders:x,deliveredOrders:E,activity:b,onUpdateStatus:P,onRevert:H,onCancel:F,view:c,pictureMode:d,updatingIds:O})}),v.jsx(Or,{path:"/inventory",element:v.jsx(PI,{})}),v.jsx(Or,{path:"/manage-orders",element:v.jsx(xI,{})}),v.jsx(Or,{path:"/pre-order",element:v.jsx(wI,{})}),v.jsx(Or,{path:"/scan",element:v.jsx(FI,{})}),v.jsx(Or,{path:"/ai",element:v.jsx(jI,{})}),v.jsx(Or,{path:"/settings",element:v.jsx(BI,{})})]}),v.jsx(UI,{})]})]})}function It({title:n,children:e,titleAction:t}){return v.jsxs("section",{className:"card bg-white dark:bg-gray-800 transition-colors duration-300",children:[n?v.jsxs("div",{className:"card-header",children:[v.jsx("h2",{className:"text-black dark:text-white",children:n}),t&&v.jsx("div",{className:"card-title-action",children:t})]}):null,e]})}function RI({orders:n,recent:e=[],onUpdateStatus:t,updatingIds:r={}}){const i=Pu();[...n].sort((S,k)=>(k.createdAt??0)-(S.createdAt??0)).slice(0,5);const a=window.__IARE_DELIVERED__||[],s=n.length+a.length,c=n.filter(S=>Ie(S.status)!=="READY").length,f=a.length,d=a.reduce((S,k)=>S+(k.total_amount||k.amount||0),0),[p,g]=N.useState([]),[y,x]=N.useState(!1),[_,E]=N.useState(!1),[C,b]=N.useState(!1),[T,O]=N.useState([]),[I,P]=N.useState([]),[F,H]=N.useState(!1),[G,V]=N.useState(!1),Q=()=>{const S=["Order Token","Item","Total","Received At","Delivered At"],k=ce=>'"'+String(ce).replace(/"/g,'""')+'"',U=ce=>ce?new Date(ce).toISOString().slice(0,19).replace("T"," "):"",K=a.map(ce=>{const xe=new Date(ce.createdAt).getTime(),he=new Date(ce.deliveredAt).getTime(),Me=ce.token||ce.id?.slice(-4);return[k(Me?"#"+Me:""),k(ce.item_name||"Food Item"),k(ce.total_amount||ce.amount||0),k(U(xe)),k(U(he))].join(",")}),R=[S.join(","),...K].join(`
`),B=new Blob([R],{type:"text/csv;charset=utf-8;"}),Z=URL.createObjectURL(B),ne=document.createElement("a");ne.href=Z,ne.download=`reports_${new Date().toISOString().slice(0,10)}.csv`,ne.click(),URL.revokeObjectURL(Z)},re=()=>{const S=`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body>
      <table border="1">
        <tr><th>Order Token</th><th>Item</th><th>Total</th><th>Received At</th><th>Delivered At</th></tr>
        ${a.map(R=>{const B=R.token||R.id?.slice(-4);return`<tr>
            <td>${B?"#"+B:""}</td>
            <td>${R.item_name||"Food Item"}</td>
            <td>${R.total_amount||R.amount||0}</td>
            <td>${new Date(R.createdAt).toLocaleString()}</td>
            <td>${new Date(R.deliveredAt).toLocaleString()}</td>
          </tr>`}).join("")}
      </table></body></html>`,k=new Blob(["\uFEFF",S],{type:"application/vnd.ms-excel"}),U=URL.createObjectURL(k),K=document.createElement("a");K.href=U,K.download=`reports_${new Date().toISOString().slice(0,10)}.xls`,K.click(),URL.revokeObjectURL(U)};N.useEffect(()=>{(async()=>{try{let U=0,K=[];for(;;){const B=U+1e3-1,{data:Z,error:ne}=await pe.from("food_items").select("*").range(U,B);if(ne)throw ne;const ce=Z||[];if(K=K.concat(ce),ce.length<1e3)break;U+=1e3}const R=K.map(B=>{const Z=B.name??B.item_name??B.title??B.label??"Item",ne=(typeof B.available_quantity=="number"?B.available_quantity>0:void 0)??B.in_stock??B.available??B.is_available??(typeof B.stock=="number"?B.stock>0:void 0)??(typeof B.status=="string"?String(B.status).toLowerCase()==="in":void 0)??!0;return{name:Z,inStock:!!ne}});g(R.filter(B=>!B.inStock))}catch{g([])}})()},[]),N.useEffect(()=>{y&&te()},[y]),N.useEffect(()=>{_&&ae()},[_]);const te=async()=>{try{H(!0);const{data:S,error:k}=await pe.from("menu").select("*").order("name");if(k)throw k;O(S||[])}catch(S){console.error("Error fetching menu items:",S),alert("Failed to load menu items")}finally{H(!1)}},ae=async()=>{try{V(!0);const{data:S,error:k}=await pe.from("orders").select("*").eq("status","delivered").order("created_at",{ascending:!1}).limit(10);if(k)throw k;P(S||[])}catch(S){console.error("Error fetching delivered orders:",S),alert("Failed to load delivered orders")}finally{V(!1)}},fe=async(S,k)=>{try{const U=!k,{error:K}=await pe.from("menu").update({available:U}).eq("id",S);if(K)throw K;O(R=>R.map(B=>B.id===S?{...B,available:U}:B)),alert(`Item ${U?"enabled":"disabled"} successfully!`)}catch(U){console.error("Error updating item availability:",U),alert("Failed to update item availability")}},L=async S=>{if(confirm("Are you sure you want to revert this order?"))try{const{data:k,error:U}=await pe.from("orders").select("item_name").eq("id",S).single();if(U)throw console.error(" Could not fetch order details:",U),U;const{error:K}=await pe.from("orders").update({status:"pending"}).eq("id",S);if(K)throw K;console.log(" Order reverted, restoring stock for:",k.item_name);try{const{data:R,error:B}=await pe.from("food_items").select("available_quantity").eq("name",k.item_name).single();if(B){console.error(" Could not fetch current stock for restore:",B);return}const{error:Z}=await pe.from("food_items").update({available_quantity:R.available_quantity+1,updated_at:new Date().toISOString()}).eq("name",k.item_name);Z?(console.error(" Failed to restore stock on revert:",Z),console.warn(" Order reverted but stock not restored. Please update manually.")):(console.log(" Stock restored on revert"),dn&&dn())}catch(R){console.error(" Stock restoration error:",R)}P(R=>R.filter(B=>B.id!==S)),alert("Order reverted successfully! Stock has been restored.")}catch(k){console.error("Error reverting order:",k),alert("Failed to revert order")}};return v.jsxs("div",{className:"home-dashboard",children:[v.jsxs("div",{className:"summary-cards",children:[v.jsxs("div",{className:"summary-card",children:[v.jsx("div",{className:"summary-icon",children:v.jsx($6,{className:"w-6 h-6"})}),v.jsxs("div",{className:"summary-content",children:[v.jsx("div",{className:"summary-value",children:s}),v.jsx("div",{className:"summary-label",children:"Total Orders"})]})]}),v.jsxs("div",{className:"summary-card",children:[v.jsx("div",{className:"summary-icon",children:v.jsx(W6,{className:"w-6 h-6"})}),v.jsxs("div",{className:"summary-content",children:[v.jsx("div",{className:"summary-value",children:c}),v.jsx("div",{className:"summary-label",children:"Pending"})]})]}),v.jsxs("div",{className:"summary-card",children:[v.jsx("div",{className:"summary-icon",children:v.jsx(Ou,{className:"w-6 h-6"})}),v.jsxs("div",{className:"summary-content",children:[v.jsx("div",{className:"summary-value",children:f}),v.jsx("div",{className:"summary-label",children:"Completed"})]})]}),v.jsxs("div",{className:"summary-card",children:[v.jsx("div",{className:"summary-icon",children:v.jsx(tO,{className:"w-6 h-6"})}),v.jsxs("div",{className:"summary-content",children:[v.jsxs("div",{className:"summary-value",children:["",d]}),v.jsx("div",{className:"summary-label",children:"Revenue"})]})]})]}),v.jsxs("div",{className:"charts-section",children:[v.jsx(It,{title:"Quick Actions",children:v.jsxs("div",{className:"quick-actions-grid",children:[v.jsxs("button",{className:"quick-action-btn pending-orders-btn bg-gray-100 dark:bg-gray-700 text-black dark:text-white transition-colors duration-300",onClick:()=>{i("/orders?status=pending")},children:[v.jsx(iO,{className:"btn-icon text-black dark:text-white",size:24}),v.jsx("div",{className:"btn-text text-black dark:text-white",children:"View Pending Orders"})]}),v.jsxs("button",{className:"quick-action-btn toggle-availability-btn bg-gray-100 dark:bg-gray-700 text-black dark:text-white transition-colors duration-300",onClick:()=>x(!0),children:[v.jsx(lw,{className:"btn-icon text-black dark:text-white",size:24}),v.jsx("div",{className:"btn-text text-black dark:text-white",children:"Toggle Item Availability"})]}),v.jsxs("button",{className:"quick-action-btn revert-delivered-btn bg-gray-100 dark:bg-gray-700 text-black dark:text-white transition-colors duration-300",onClick:()=>E(!0),children:[v.jsx(SO,{className:"btn-icon text-black dark:text-white",size:24}),v.jsx("div",{className:"btn-text text-black dark:text-white",children:"Revert Delivered Order"})]})]})}),v.jsx(It,{title:"Popular Items",children:v.jsx("div",{className:"chart-placeholder",children:v.jsx("div",{className:"popular-items",children:[{name:"Veg Biryani",orders:45,percentage:35},{name:"Masala Dosa",orders:32,percentage:25},{name:"Samosa",orders:28,percentage:22},{name:"Tea",orders:23,percentage:18}].map((S,k)=>v.jsxs("div",{className:"popular-item",children:[v.jsxs("div",{className:"item-info",children:[v.jsx("span",{className:"item-name",children:S.name}),v.jsxs("span",{className:"item-orders",children:[S.orders," orders"]})]}),v.jsx("div",{className:"item-bar",children:v.jsx("div",{className:"item-progress",style:{width:`${S.percentage}%`}})})]},k))})})})]}),v.jsx("div",{className:"reports-section",children:v.jsx(It,{title:"Reports",titleAction:v.jsx("button",{className:"reports-shortcut-btn",onClick:()=>b(!0),children:"View Full Reports"}),children:v.jsx("div",{className:"reports-preview",children:v.jsxs("div",{className:"reports-buttons",children:[v.jsx("button",{className:"reports-btn export-csv-btn",onClick:Q,children:"Export CSV"}),v.jsx("button",{className:"reports-btn export-excel-btn",onClick:re,children:"Export Excel"})]})})})}),y&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h3",{children:"Toggle Item Availability"}),v.jsx("button",{className:"modal-close",onClick:()=>x(!1),children:v.jsx(ri,{size:20})})]}),v.jsx("div",{className:"modal-body",children:F?v.jsx("div",{className:"loading",children:"Loading items..."}):v.jsx("div",{className:"items-list",children:T.map(S=>v.jsxs("div",{className:"item-row",children:[v.jsx("span",{className:"item-name",children:S.name}),v.jsxs("label",{className:"toggle-switch",children:[v.jsx("input",{type:"checkbox",checked:S.available,onChange:()=>fe(S.id,S.available)}),v.jsx("span",{className:"slider"})]})]},S.id))})})]})}),_&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h3",{children:"Revert Delivered Orders"}),v.jsx("button",{className:"modal-close",onClick:()=>E(!1),children:v.jsx(ri,{size:20})})]}),v.jsx("div",{className:"modal-body",children:G?v.jsx("div",{className:"loading",children:"Loading orders..."}):v.jsx("div",{className:"orders-list",children:I.length===0?v.jsx("div",{className:"no-orders",children:"No delivered orders found"}):I.map(S=>v.jsxs("div",{className:"order-row",children:[v.jsxs("div",{className:"order-info",children:[v.jsxs("div",{className:"order-id",children:["Order #",S.id?.slice(-4)]}),v.jsx("div",{className:"order-item",children:S.item_name||"Food Item"}),v.jsx("div",{className:"order-time",children:new Date(S.created_at).toLocaleString()})]}),v.jsx("button",{className:"revert-btn",onClick:()=>L(S.id),children:"Revert"})]},S.id))})})]})}),C&&v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content reports-modal",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h3",{children:"Reports"}),v.jsx("button",{className:"modal-close",onClick:()=>b(!1),children:v.jsx(ri,{size:20})})]}),v.jsx("div",{className:"modal-body",children:v.jsx(NI,{})})]})})]})}function NI(){const[n,e]=N.useState(()=>new Date(Date.now()-864e5).toISOString().slice(0,10)),[t,r]=N.useState(()=>new Date().toISOString().slice(0,10)),[i,a]=N.useState([]);N.useEffect(()=>{(async()=>{try{if(window.__IARE_DELIVERED__&&window.__IARE_DELIVERED__.length>0)a(window.__IARE_DELIVERED__);else{const{data:y,error:x}=await pe.from("orders").select("*").eq("status","DELIVERED").order("created_at",{ascending:!1});if(x)throw x;a(y||[])}}catch(y){console.error("Failed to fetch delivered orders:",y),a([])}})()},[]);const s=g=>{const y=new Date(g);return isNaN(y)?null:y.getTime()},c=i.filter(g=>{const y=s(g.created_at||g.createdAt||g.received_at);s(g.delivered_at||g.deliveredAt||g.updated_at);const x=new Date(n).getTime(),_=new Date(t).getTime()+1440*60*1e3-1;return y&&y>=x&&y<=_}).map(g=>{const y=s(g.created_at||g.createdAt||g.received_at),x=s(g.delivered_at||g.deliveredAt||g.updated_at),_=g.token_no??g.order_token??g.token??g.token_number??g.id??null;return{id:g.id,token:_,item:g.item_name||g.item||"Food Item",total_amount:g.total_amount||g.total||g.price||0,receivedTs:y,deliveredTs:x}}),f=c.reduce((g,y)=>({orders:g.orders+1,revenue:g.revenue+(y.total_amount||0),items:g.items+1,PENDING:g.PENDING+(Ie(y.status)==="PENDING"?1:0),PREPARING:g.PREPARING+(Ie(y.status)==="PREPARING"?1:0),READY:g.READY+(Ie(y.status)==="READY"?1:0)}),{orders:0,revenue:0,items:0,PENDING:0,PREPARING:0,READY:0}),d=()=>{const g=["Order Token","Item","Total","Received At","Delivered At"],y=I=>'"'+String(I).replace(/"/g,'""')+'"',x=I=>I?new Date(I).toISOString().slice(0,19).replace("T"," "):"",_=c.map(I=>[y(I.token?"#"+I.token:""),y(I.item),y(I.total_amount||0),y(x(I.receivedTs)),y(x(I.deliveredTs))].join(",")),E=["",y("Total Revenue"),y(f.revenue)].join(","),C=[g.join(","),..._,"",E].join(`
`),b=new Blob([C],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(b),O=document.createElement("a");O.href=T,O.download=`reports_${n}_to_${t}.csv`,O.click(),URL.revokeObjectURL(T)},p=()=>{const g=`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body>
      <table border="1">
        <tr><th>Order Token</th><th>Item</th><th>Total</th><th>Received At</th><th>Delivered At</th></tr>
        ${c.map(E=>`<tr>
          <td>${E.token?"#"+E.token:""}</td>
          <td>${E.item}</td>
          <td>${E.total_amount||0}</td>
          <td>${new Date(E.receivedTs).toLocaleString()}</td>
          <td>${new Date(E.deliveredTs).toLocaleString()}</td>
        </tr>`).join("")}
        <tr><td colspan="2"><strong>Total Revenue</strong></td><td><strong>${f.revenue}</strong></td><td colspan="2"></td></tr>
      </table></body></html>`,y=new Blob(["\uFEFF",g],{type:"application/vnd.ms-excel"}),x=URL.createObjectURL(y),_=document.createElement("a");_.href=x,_.download=`reports_${n}_to_${t}.xls`,_.click(),URL.revokeObjectURL(x)};return v.jsxs("div",{className:"reports-modal-content",children:[v.jsxs("div",{className:"reports-filters",children:[v.jsxs("div",{className:"field",style:{minWidth:220},children:[v.jsx("label",{className:"label",children:"From"}),v.jsx("input",{type:"date",className:"input",value:n,onChange:g=>e(g.target.value)})]}),v.jsxs("div",{className:"field",style:{minWidth:220},children:[v.jsx("label",{className:"label",children:"To"}),v.jsx("input",{type:"date",className:"input",value:t,onChange:g=>r(g.target.value)})]}),v.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[v.jsx("button",{className:"btn",onClick:d,children:"Export CSV"}),v.jsx("button",{className:"btn",onClick:p,children:"Export Excel"})]})]}),v.jsxs("div",{className:"reports-table",children:[v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Order Token"}),v.jsx("th",{children:"Item"}),v.jsx("th",{children:"Total"}),v.jsx("th",{children:"Received"}),v.jsx("th",{children:"Delivered"})]})}),v.jsx("tbody",{children:c.slice(0,10).map(g=>v.jsxs("tr",{children:[v.jsx("td",{children:g.token?"#"+g.token:""}),v.jsx("td",{children:g.item}),v.jsxs("td",{children:["",g.total_amount||0]}),v.jsx("td",{children:new Date(g.receivedTs).toLocaleString()}),v.jsx("td",{children:new Date(g.deliveredTs).toLocaleString()})]},g.id))})]}),c.length>10&&v.jsxs("div",{className:"table-note",children:["Showing first 10 of ",c.length," orders. Export to see all data."]})]})]})}function II(){const[n,e]=N.useState(null),[t,r]=N.useState(null),[i,a]=N.useState([]),[s,c]=N.useState([]),[f,d]=N.useState(!1),[p,g]=N.useState(""),{status:y,updateStatus:x,refreshStatus:_}=uw(),[E,C]=N.useState([]),[b,T]=N.useState(!1),[O,I]=N.useState("dine_in");H_();const{suppressNotificationForOrder:P}=I1(),[F,H]=N.useState(null),G=(L,S=1)=>{C(k=>k.find(K=>K.id===L.id)?k.map(K=>K.id===L.id?{...K,quantity:K.quantity+S}:K):[...k,{...L,quantity:S}])},V=(L,S)=>{if(S<=0){Q(L);return}C(k=>k.map(U=>U.id===L?{...U,quantity:S}:U))},Q=L=>{C(S=>S.filter(k=>k.id!==L))},re=()=>E.reduce((L,S)=>L+S.price*S.quantity,0),te=()=>E.reduce((L,S)=>L+S.quantity,0);N.useEffect(()=>{const L=async()=>{try{let k=0,U=[];for(;;){const R=k+1e3-1,{data:B,error:Z}=await pe.from("food_items").select("*").range(k,R);if(Z)throw Z;const ne=B||[];if(U=U.concat(ne),ne.length<1e3)break;k+=1e3}const K=U.map(R=>({id:R.id??R.item_id??R.slug??String(Math.random()).slice(2),name:R.name??R.item_name??"Item",price:R.price??R.cost??0,image:R.image_url??R.image??R.photo??"https://via.placeholder.com/300?text=Food",description:R.description??""}));K.length===0?(console.log("No food items found in database, using fallback items"),a([{id:"fallback_1",name:"Veg Biryani",price:180,image:"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg",description:"Delicious vegetarian biryani"},{id:"fallback_2",name:"Masala Dosa",price:80,image:"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg",description:"Crispy dosa with potato filling"},{id:"fallback_3",name:"Samosa",price:40,image:"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg",description:"Spicy potato and pea samosa"}])):a(K)}catch(S){console.error("Failed to load food_items:",S),a([{id:"fallback_1",name:"Veg Biryani",price:180,image:"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg",description:"Delicious vegetarian biryani"},{id:"fallback_2",name:"Masala Dosa",price:80,image:"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg",description:"Crispy dosa with potato filling"},{id:"fallback_3",name:"Samosa",price:40,image:"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg",description:"Spicy potato and pea samosa"}])}};dn=L,L()},[]);const ae=async()=>{d(!0);try{let S=0,k=[];for(;;){const U=S+1e3-1,{data:K,error:R}=await pe.from("orders").select("id, item_name, status, order_placer, created_at, order_token").eq("order_placer","admin").order("created_at",{ascending:!1}).range(S,U);if(R)throw R;const B=K||[];if(k=k.concat(B),B.length<1e3)break;S+=1e3}c(k)}catch(L){console.error("Failed to fetch Counter tokens:",L)}finally{d(!1)}};N.useEffect(()=>{ae()},[]);const fe=async L=>{if(E.length===0){H({type:"error",message:"Your cart is empty!"}),setTimeout(()=>H(null),2e3);return}try{console.log(" Starting checkout process for:",E.length,"items");const S=crypto.randomUUID(),k=Math.floor(1e3+Math.random()*9e3).toString();console.log(" Generated order ID:",S),console.log(" Generated token:",k);const{data:U,error:K}=await pe.from("orders").insert({id:S,order_id:S,item_name:`Cart Order (${E.length} items)`,total_amount:re(),status:"pending",order_type:L==="takeaway",order_token:k,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(P(S),K)throw console.error(" Failed to create main order:",K),new Error(`Failed to create order: ${K.message}`);console.log(" Main order created:",U);for(const B of E){console.log(" Adding item to order:",B.name,"Qty:",B.quantity);const{error:Z}=await pe.from("order_items").insert({order_id:S,food_item_id:B.id,quantity:B.quantity,price_per_unit:B.price,total_price:B.price*B.quantity,created_at:new Date().toISOString()});if(Z)throw console.error(" Failed to create order item:",Z),console.error(" Item details:",{order_id:S,food_item_id:B.id,quantity:B.quantity,price_per_unit:B.price,total_price:B.price*B.quantity}),new Error(`Failed to add item ${B.name} to order: ${Z.message}`)}C([]),T(!1),r(k),H({type:"success",message:` Checkout successful! Token: #${k}  ${L==="dine_in"?"Dine In":"Takeaway"}`}),setTimeout(()=>H(null),3500),dn&&dn(),ae(),console.log(" Checkout completed successfully!")}catch(S){console.error(" Checkout failed:",S),H({type:"error",message:` Checkout failed: ${S.message}`}),setTimeout(()=>H(null),3500)}};return v.jsxs("div",{className:"home-dashboard",children:[v.jsxs(It,{title:"Menu - Place Order (Cash Payment)",children:[v.jsx("div",{className:"search-section",children:v.jsx("div",{className:"form",children:v.jsx("div",{className:"field",children:v.jsx("input",{className:"input search-input",placeholder:"Search menu items...",value:p,onChange:L=>g(L.target.value)})})})}),v.jsxs("div",{className:`status-banner ${y==="closed"?"status-closed":"status-open"}`,children:[v.jsxs("div",{className:"status-content",children:[v.jsx("div",{className:"status-icon",children:y==="closed"?"":""}),v.jsxs("div",{className:"status-text",children:[v.jsxs("h3",{className:"status-title",children:["Canteen ",y==="closed"?"Closed":"Open"]}),v.jsx("p",{className:"status-description",children:y==="closed"?"Orders cannot be placed while the canteen is closed. Please wait for the canteen to open.":"Orders can be placed normally. Canteen is currently open."})]})]}),v.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[v.jsx("button",{className:`status-toggle-btn ${y==="closed"?"toggle-closed":"toggle-open"}`,onClick:async()=>{try{await x(y==="open"?"closed":"open")}catch(L){console.error("Toggle failed:",L),alert("Failed to update canteen status. Please try again.")}},children:y==="open"?" Close Canteen":" Open Canteen"}),v.jsx("button",{onClick:_,style:{padding:"8px 12px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:" Refresh"})]})]}),v.jsx("div",{className:"menu-items-grid",children:i.filter(L=>{const S=p.trim().toLowerCase();return S?String(L.name||"").toLowerCase().includes(S):!0}).map(L=>v.jsxs("div",{className:"menu-item-card",children:[v.jsx("div",{className:"menu-item-image",style:{backgroundImage:`url(${L.image})`},children:v.jsxs("div",{className:"price-badge",children:["",L.price]})}),v.jsxs("div",{className:"menu-item-content",children:[v.jsx("h3",{className:"menu-item-title",children:L.name}),v.jsx("p",{className:"menu-item-description",children:L.description}),v.jsxs("div",{style:{marginTop:"12px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",justifyContent:"center"},children:[v.jsx("button",{onClick:()=>{const S=E.find(k=>k.id===L.id)?.quantity||0;S>0&&V(L.id,S-1)},disabled:y==="closed",style:{width:"28px",height:"28px",borderRadius:"50%",border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-primary)",cursor:y==="closed"?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:y==="closed"?.5:1},children:"-"}),v.jsx("span",{style:{minWidth:"40px",textAlign:"center",fontWeight:"500",color:"var(--text-primary)",fontSize:"16px"},children:E.find(S=>S.id===L.id)?.quantity||0}),v.jsx("button",{onClick:()=>{const S=E.find(k=>k.id===L.id)?.quantity||0;V(L.id,S+1)},disabled:y==="closed",style:{width:"28px",height:"28px",borderRadius:"50%",border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-primary)",cursor:y==="closed"?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:y==="closed"?.5:1},children:"+"})]}),v.jsx("button",{className:`order-btn ${y==="closed"?"btn-disabled":"btn-primary"}`,onClick:()=>{const S=E.find(k=>k.id===L.id)?.quantity||0;S===0?G(L,1):V(L.id,S+1)},disabled:y==="closed",style:{width:"100%"},children:y==="closed"?" Canteen Closed":E.find(S=>S.id===L.id)?.quantity>0?" Add More":" Add to Cart"})]})]})]},L.id))}),t&&v.jsxs("div",{className:"success-message",children:[v.jsx("div",{className:"success-title",children:" Order Placed Successfully!"}),v.jsxs("div",{className:"token-number",children:["Token No: #",t]}),v.jsx("div",{className:"success-description",children:"Please note this token number for order tracking"})]}),v.jsxs("div",{className:"instructions-section",children:[v.jsx("strong",{children:"Instructions:"})," Click on any menu item to place an order for cash payment. Each order will be created with a unique token number and automatically appear in the Orders panel."]})]}),v.jsx(It,{title:"Counter Tokens (Placed by Counter)",children:f?v.jsx("div",{className:"muted",children:"Loading..."}):s.length===0?v.jsx("div",{className:"muted",children:"No Counter orders yet."}):v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Token"}),v.jsx("th",{children:"Item"}),v.jsx("th",{children:"Status"}),v.jsx("th",{children:"Time"})]})}),v.jsx("tbody",{children:s.slice(0,10).map(L=>v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#10b981",fontSize:"16px",backgroundColor:"#f0fdf4",padding:"4px 8px",borderRadius:"4px",border:"1px solid #bbf7d0"},children:L.token_no||L.order_token?"#"+(L.token_no||L.order_token):"N/A"})}),v.jsx("td",{children:L.item_name}),v.jsxs("td",{children:[Ie(L.status)==="PENDING"&&v.jsx("span",{className:"badge pending",children:"PENDING"}),Ie(L.status)==="PREPARING"&&v.jsx("span",{className:"badge preparing",children:"PREPARING"}),Ie(L.status)==="READY"&&v.jsx("span",{className:"badge ready",children:"READY"}),Ie(L.status)==="DELIVERED"&&v.jsx("span",{className:"badge ready",children:"DELIVERED"})]}),v.jsx("td",{children:L.created_at?new Date(L.created_at).toLocaleTimeString():"-"})]},L.id))})]})}),t&&v.jsx(It,{title:"Your Token",children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[v.jsxs("div",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666",fontSize:"1.1em"},children:["#",t]}),v.jsx("div",{className:"muted",children:"Please share this token at the counter."})]})}),v.jsx("div",{className:"floating-cart-icon",style:{position:"fixed",bottom:"20px",right:"40px",zIndex:9999},children:v.jsxs("button",{onClick:()=>T(!b),className:"cart-icon-button",style:{width:"70px",height:"70px",borderRadius:"50%",backgroundColor:"#3b82f6",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease",position:"relative"},onMouseEnter:L=>{L.target.style.transform="scale(1.1)",L.target.style.boxShadow="0 6px 20px rgba(0, 0, 0, 0.25)",L.target.style.backgroundColor="#2563eb"},onMouseLeave:L=>{L.target.style.transform="scale(1)",L.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",L.target.style.backgroundColor="#3b82f6"},children:[v.jsx(iu,{size:28}),te()>0&&v.jsx("div",{className:"cart-badge",style:{position:"absolute",top:"-8px",right:"-8px",backgroundColor:"#ef4444",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid white"},children:te()})]})}),v.jsx(xr,{children:b&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"cart-backdrop",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998},onClick:()=>T(!1)}),v.jsxs(ht.div,{className:"cart-side-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:{position:"fixed",top:0,right:0,width:"400px",height:"100vh",backgroundColor:"#ffffff",borderLeft:"1px solid #e5e7eb",zIndex:9999,display:"flex",flexDirection:"column",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.15)"},children:[v.jsxs("div",{className:"cart-header",style:{padding:"20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9fafb"},children:[v.jsxs("h3",{style:{margin:0,color:"#1f2937",display:"flex",alignItems:"center",gap:"8px",fontSize:"18px",fontWeight:"600"},children:[v.jsx(iu,{size:20}),"Your Cart"]}),v.jsx("button",{onClick:()=>T(!1),className:"cart-close-btn",style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:L=>{L.target.style.backgroundColor="#f3f4f6",L.target.style.borderColor="#9ca3af"},onMouseLeave:L=>{L.target.style.backgroundColor="#ffffff",L.target.style.borderColor="#d1d5db"},children:v.jsx(ri,{size:16})})]}),v.jsx("div",{className:"cart-content",style:{flex:1,padding:"20px",overflowY:"auto",display:"flex",flexDirection:"column",backgroundColor:"#ffffff"},children:E.length===0?v.jsxs("div",{className:"cart-empty-state",style:{textAlign:"center",color:"#6b7280",padding:"40px 20px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[v.jsx(iu,{size:48,style:{opacity:.3,color:"#9ca3af"}}),v.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#374151"},children:"Your cart is empty"}),v.jsx("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Add some items to get started!"})]}):v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{flex:1},children:E.map(L=>v.jsxs("div",{className:"cart-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f9fafb",borderRadius:"12px",marginBottom:"12px",border:"1px solid #e5e7eb"},children:[v.jsxs("div",{style:{flex:1},children:[v.jsx("div",{style:{fontWeight:"500",color:"#1f2937",marginBottom:"4px",fontSize:"16px"},children:L.name}),v.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:["",L.price," each"]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginLeft:"16px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx("button",{onClick:()=>V(L.id,L.quantity-1),className:"quantity-btn",style:{width:"32px",height:"32px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:"16px",fontWeight:"bold"},onMouseEnter:S=>{S.target.style.backgroundColor="#f3f4f6",S.target.style.borderColor="#9ca3af",S.target.style.color="#1f2937"},onMouseLeave:S=>{S.target.style.backgroundColor="#ffffff",S.target.style.borderColor="#d1d5db",S.target.style.color="#374151"},children:v.jsx(sO,{size:16})}),v.jsx("input",{type:"number",min:"0",value:L.quantity,onChange:S=>{const k=parseInt(S.target.value)||0;V(L.id,k)},onBlur:S=>{(parseInt(S.target.value)||0)<=0&&Q(L.id)},style:{width:"50px",height:"32px",textAlign:"center",fontWeight:"500",color:"#1f2937",fontSize:"16px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#ffffff",outline:"none",padding:"0 4px"},onFocus:S=>S.target.select()}),v.jsx("button",{onClick:()=>V(L.id,L.quantity+1),className:"quantity-btn",style:{width:"32px",height:"32px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:"16px",fontWeight:"bold"},onMouseEnter:S=>{S.target.style.backgroundColor="#f3f4f6",S.target.style.borderColor="#9ca3af",S.target.style.color="#1f2937"},onMouseLeave:S=>{S.target.style.backgroundColor="#ffffff",S.target.style.borderColor="#d1d5db",S.target.style.color="#374151"},children:v.jsx(hO,{size:16})})]}),v.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",minWidth:"60px",textAlign:"right",fontSize:"16px"},children:["",L.price*L.quantity]}),v.jsx("button",{onClick:()=>Q(L.id),className:"remove-btn",style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"#ef4444",color:"white",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",marginLeft:"8px"},onMouseEnter:S=>{S.target.style.backgroundColor="#dc2626"},onMouseLeave:S=>{S.target.style.backgroundColor="#ef4444"},children:v.jsx(sw,{size:14})})]})]},L.id))}),v.jsxs("div",{className:"cart-footer",style:{borderTop:"1px solid #e5e7eb",paddingTop:"20px",marginTop:"20px"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[v.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:["Total: ",re()]}),v.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[te()," items"]})]}),v.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"12px",alignItems:"center"},children:[v.jsx("span",{style:{fontSize:"14px",color:"#374151",fontWeight:500},children:"Order Type:"}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[v.jsx("input",{type:"radio",name:"orderType",value:"dine_in",checked:O==="dine_in",onChange:()=>I("dine_in")}),v.jsx("span",{children:" Dine In"})]}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[v.jsx("input",{type:"radio",name:"orderType",value:"takeaway",checked:O==="takeaway",onChange:()=>I("takeaway")}),v.jsx("span",{children:" Takeaway"})]})]}),v.jsxs("button",{onClick:()=>{fe(O)},className:"checkout-btn",style:{width:"100%",padding:"12px 16px",fontSize:"16px",fontWeight:"600",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:L=>{L.target.style.backgroundColor="#2563eb"},onMouseLeave:L=>{L.target.style.backgroundColor="#3b82f6"},children:[v.jsx(iu,{size:18}),"Checkout"]})]})]})})]})]})}),v.jsx(xr,{children:F&&v.jsx(ht.div,{initial:{opacity:0,y:-40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-40,scale:.98},transition:{type:"spring",stiffness:300,damping:24},style:{position:"fixed",top:16,left:0,right:0,margin:"0 auto",zIndex:1e4,background:F.type==="success"?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",padding:"12px 16px",borderRadius:10,boxShadow:"0 14px 30px rgba(0,0,0,0.22)",fontWeight:700,maxWidth:520,width:"calc(100% - 32px)",textAlign:"center",border:"1px solid rgba(255,255,255,0.15)",backdropFilter:"blur(6px)"},children:F.message})})]})}function kI({withTitle:n=!0,orders:e=[],orderItems:t=[],onUpdateStatus:r=()=>{},onCancel:i=()=>{},idHeader:a="Order ID",updatingIds:s={}}){const c=d=>t.filter(p=>p.order_id===d),f=d=>{switch(d){case"dine_in":return" Dine In";case"takeaway":return" Takeaway";default:return" Dine In"}};return v.jsx(It,{title:n?"Orders":void 0,children:v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:a}),v.jsx("th",{children:"Items"}),v.jsx("th",{children:"Total"}),v.jsx("th",{children:"Type"}),v.jsx("th",{children:"Status"}),v.jsx("th",{children:"Placed By"}),v.jsx("th",{children:"Actions"})]})}),v.jsx("tbody",{children:e.map(d=>{const p=c(d.id),g=p.length>0;return v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666"},children:d.token_no||d.order_token?"#"+(d.token_no||d.order_token):"Not available"})}),v.jsx("td",{children:g?v.jsx("div",{style:{fontSize:"14px"},children:p.map((y,x)=>v.jsxs("div",{style:{marginBottom:"4px"},children:[v.jsx("strong",{children:y.food_items?.name||"Unknown Item"}),v.jsxs("span",{style:{color:"#666",marginLeft:"8px"},children:["(Qty: ",y.quantity,") - ",y.price*y.quantity]})]},x))}):v.jsxs("div",{children:[v.jsx("strong",{children:d.item_name||"Unknown Item"}),v.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Legacy Order"})]})}),v.jsx("td",{children:d.total_amount!=null?`${d.total_amount}`:"-"}),v.jsx("td",{children:g?v.jsx("span",{style:{fontSize:"12px"},children:f(d.order_type)}):v.jsx("span",{style:{fontSize:"12px",color:"#666"},children:"Legacy"})}),v.jsxs("td",{children:[Ie(d.status)==="PENDING"&&v.jsx("span",{className:"badge pending",children:"PENDING"}),Ie(d.status)==="PREPARING"&&v.jsx("span",{className:"badge preparing",children:"PREPARING"}),Ie(d.status)==="READY"&&v.jsx("span",{className:"badge ready",children:"READY"})]}),v.jsxs("td",{className:"flex items-center gap-2 py-2 whitespace-nowrap",children:[d.order_placer==="admin"?v.jsx(OO,{className:"w-5 h-5 text-gray-700 dark:text-white"}):v.jsx(J6,{className:"w-5 h-5 text-gray-700 dark:text-white"}),d.order_placer==="admin"?v.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:"Staff"}):v.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:"Student"})]}),v.jsx("td",{className:"actions",children:s[d.id]?v.jsxs("button",{className:"btn",disabled:!0,children:[v.jsx("span",{className:"spinner",style:{marginRight:6}}),"Updating..."]}):v.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[Ie(d.status)==="PENDING"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>r(d.id,"PREPARING"),children:"Mark Preparing"}),v.jsx("button",{className:"btn",onClick:()=>i(d.id),style:{backgroundColor:"#ef4444",color:"white",border:"none"},children:"Cancel Order"})]}),Ie(d.status)==="PREPARING"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>r(d.id,"READY"),children:"Mark Ready"}),v.jsx("button",{className:"btn",onClick:()=>i(d.id),style:{backgroundColor:"#ef4444",color:"white",border:"none"},children:"Cancel Order"})]}),Ie(d.status)==="READY"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",onClick:()=>r(d.id,"DELIVERED"),children:"Mark Delivered"}),v.jsx("button",{className:"btn",onClick:()=>i(d.id),style:{backgroundColor:"#ef4444",color:"white",border:"none"},children:"Cancel Order"})]})]})})]},d.id)})})]})})}function MI({orders:n,deliveredOrders:e=[],activity:t=[],onUpdateStatus:r,onRevert:i,onCancel:a,view:s="live",pictureMode:c=!1,updatingIds:f={}}){const d=s==="live",[p,g]=N.useState([]),[y,x]=N.useState([]);N.useEffect(()=>{(async()=>{try{let O=0,I=[];for(;;){const H=O+1e3-1,{data:G,error:V}=await pe.from("food_items").select("*").range(O,H);if(V)throw V;const Q=G||[];if(I=I.concat(Q),Q.length<1e3)break;O+=1e3}g(I);const{data:P,error:F}=await pe.from("order_items").select(`
            *,
            food_items (
              name,
              image_url
            )
          `);F?console.error("Failed to fetch order_items:",F):x(P||[])}catch(T){console.error("Failed to fetch data for orders:",T),g([]),x([])}})()},[]);const _=b=>{try{const T=n.find(I=>I.id===b)||e.find(I=>I.id===b),O=T&&(T.token_no||T.order_token);return O?"#"+O:"Not available"}catch{return"Not available"}},E=b=>y.filter(T=>T.order_id===b),C=b=>{const T=E(b.id);if(T.length>0){const P=T[0];if(P.food_items&&P.food_items.image_url)return P.food_items.image_url}const O=(b.item_name||"").toLowerCase(),I=p.find(P=>{const F=(P.name||P.item_name||"").toLowerCase();return F===O||F.includes(O)||O.includes(F)});return I&&I.image_url?I.image_url:O.includes("samosa")?"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg":O.includes("biryani")?"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg":O.includes("dosa")?"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg":"https://via.placeholder.com/300?text=Food"};return v.jsxs("div",{className:"home-dashboard",children:[s==="activity"?v.jsx(It,{title:void 0,children:v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Item Name"}),v.jsx("th",{children:"Token No"}),v.jsx("th",{children:"From  To"}),v.jsx("th",{children:"At"}),v.jsx("th",{children:"Actions"})]})}),v.jsx("tbody",{children:t.slice(0,20).map((b,T)=>v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx("strong",{children:b.itemName||"Order Item"})}),v.jsx("td",{children:_(b.orderId)}),v.jsxs("td",{children:[b.from,"  ",b.to]}),v.jsx("td",{children:b.at}),v.jsx("td",{children:v.jsx("button",{className:"btn btn-secondary",onClick:()=>i(b),children:"Revert"})})]},T))})]})}):d?c?v.jsx(It,{title:void 0,children:v.jsx("div",{className:"cards-grid",children:n.map(b=>v.jsxs("div",{className:"order-card",children:[v.jsx("div",{className:"avatar",children:v.jsx("img",{src:C(b),alt:b.item_name||"Order Item",loading:"lazy",style:{objectFit:"cover",width:"100%",height:"100%",transition:"opacity 0.2s ease-in-out",backgroundColor:"#f3f4f6"},onLoad:T=>{T.currentTarget.style.opacity="1"},onError:T=>{const O=T.currentTarget;O.src!=="https://via.placeholder.com/300?text=Food"&&(O.style.opacity="0.5",setTimeout(()=>{O.src="https://via.placeholder.com/300?text=Food",O.style.opacity="1"},100))}})}),v.jsx("div",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666",fontSize:"0.9em",marginBottom:4},children:b.token_no||b.order_token?"#"+(b.token_no||b.order_token):"Not available"}),v.jsx("div",{style:{fontWeight:600,fontSize:"1.1em"},children:b.item_name}),v.jsx("div",{style:{marginBottom:8},children:b.order_placer==="admin"?v.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:" Counter"}):v.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:" Student"})}),v.jsxs("div",{style:{marginBottom:12},children:[Ie(b.status)==="PENDING"&&v.jsx("span",{className:"badge pending",children:"PENDING"}),Ie(b.status)==="PREPARING"&&v.jsx("span",{className:"badge preparing",children:"PREPARING"}),Ie(b.status)==="READY"&&v.jsx("span",{className:"badge ready",children:"READY"}),Ie(b.status)==="DELIVERED"&&v.jsx("span",{className:"badge ready",children:"DELIVERED"})]}),v.jsx("div",{className:"actions",style:{justifyContent:"center",display:"flex",flexDirection:"column",gap:"8px"},children:f&&f[b.id]?v.jsxs("button",{className:"btn",disabled:!0,children:[v.jsx("span",{className:"spinner",style:{marginRight:6}}),"Updating..."]}):v.jsxs(v.Fragment,{children:[Ie(b.status)==="PENDING"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn btn-primary",onClick:()=>r(b.id,"PREPARING"),children:"Mark Preparing"}),v.jsx("button",{className:"btn btn-danger",onClick:()=>a(b.id),children:"Cancel Order"})]}),Ie(b.status)==="PREPARING"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn btn-success",onClick:()=>r(b.id,"READY"),children:"Mark Ready"}),v.jsx("button",{className:"btn btn-primary",onClick:()=>r(b.id,"DELIVERED"),children:"Mark Delivered"}),v.jsx("button",{className:"btn btn-danger",onClick:()=>a(b.id),children:"Cancel Order"})]}),Ie(b.status)==="READY"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn btn-primary",onClick:()=>r(b.id,"DELIVERED"),children:"Mark Delivered"}),v.jsx("button",{className:"btn btn-danger",onClick:()=>a(b.id),children:"Cancel Order"})]})]})})]},b.id))})}):v.jsx(kI,{withTitle:!1,idHeader:"Token No",orders:n,orderItems:y,onUpdateStatus:r,onCancel:a,updatingIds:f}):v.jsx(It,{title:void 0,children:v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Token No"}),v.jsx("th",{children:"Item Name"}),v.jsx("th",{children:"Price"}),v.jsx("th",{children:"Status"})]})}),v.jsx("tbody",{children:e.map(b=>v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666"},children:b.token_no||b.order_token?"#"+(b.token_no||b.order_token):"Not available"})}),v.jsx("td",{children:v.jsx("strong",{children:b.item_name})}),v.jsx("td",{children:b.total_amount!=null?`${b.total_amount}`:"-"}),v.jsx("td",{children:v.jsx("span",{className:"badge ready",children:"DELIVERED"})})]},b.id))})]})}),null]})}function PI(){Pu();const[n,e]=N.useState([]),[t,r]=N.useState({id:"",name:""}),[i,a]=N.useState(""),[s,c]=N.useState("all"),[f,d]=N.useState(!1),[p,g]=N.useState(!1),[y,x]=N.useState({name:"",cost:"",description:"",image:null}),[_,E]=N.useState(!1),[C,b]=N.useState(""),[T,O]=N.useState("id"),[I,P]=N.useState("available_quantity"),[F,H]=N.useState(null),[G,V]=N.useState(null),[Q,re]=N.useState({show:!1,message:"",type:"success"}),[te,ae]=N.useState("all"),[fe,L]=N.useState(!1),[S,k]=N.useState(null),[U,K]=N.useState(!1),[R,B]=N.useState({name:"",cost:"",description:"",image:null}),Z=async()=>{try{let ue=0,ge=[];for(;;){const be=ue+1e3-1,{data:gn,error:Ot}=await pe.from("food_items").select("*").range(ue,be);if(Ot)throw Ot;const Yn=gn||[];if(ge=ge.concat(Yn),Yn.length<1e3)break;ue+=1e3}const ye=ge[0]||{},ve=["id","item_id","slug","code"],je=["available_quantity","in_stock","available","is_available","stock","status"],Ge=ve.find(be=>Object.prototype.hasOwnProperty.call(ye,be))||"id",Ze=je.find(be=>Object.prototype.hasOwnProperty.call(ye,be))||"in_stock";O(Ge),P(Ze);const vt=ge.map(be=>{const gn=be[Ge]??String(Math.random()).slice(2),Ot=be.name??be.item_name??be.title??be.label??"Item",Yn=be.price??be.cost??0,br=be.available_quantity??be.quantity??be.stock??0,De=(typeof br=="number"?br>0:void 0)??be.in_stock??be.available??be.is_available??(typeof be.stock=="number"?be.stock>0:void 0)??(typeof be.status=="string"?String(be.status).toLowerCase()==="in":void 0)??!0;return{id:gn,name:Ot,price:Yn,availableQuantity:br,inStock:!!De,image_url:be.image_url,description:be.description,originalData:be}});e(vt)}catch(q){console.error("Error fetching items:",q)}},ne=()=>{Z()},ce=q=>{if(!q)return null;const ue=n.find(ge=>ge.name.toLowerCase().trim()===q.toLowerCase().trim());return console.log("Searching for:",q,"Found:",ue,"Items:",n.map(ge=>ge.name)),ue},xe=()=>{const q=t.name.trim();if(!q)return;const ue=ce(q);console.log("Button clicked for:",q,"Existing item:",ue),ue?(console.log("Removing item:",ue),ui(ue.id),r({id:"",name:""})):(console.log("Adding new item:",q),x({...y,name:q}),g(!0),d(!1))},he=()=>te==="all"?n:n.filter(q=>{switch(te){case"in-stock":return q.inStock&&q.availableQuantity>20;case"low-stock":return q.inStock&&q.availableQuantity<=20&&q.availableQuantity>5;case"very-low":return q.inStock&&q.availableQuantity<=5&&q.availableQuantity>0;case"out-of-stock":return!q.inStock||q.availableQuantity===0;default:return!0}}),Me=async()=>{try{console.log(" Checking if food_images bucket exists...");const{data:q,error:ue}=await pe.storage.listBuckets();if(ue)return console.error(" Error listing buckets:",ue),!1;if(q.find(ye=>ye.name==="food_images"))return console.log(" food_images bucket already exists"),!0;{console.log(" food_images bucket not found, attempting to create...");const{error:ye}=await pe.rpc("create_food_images_bucket");if(ye){console.log(" RPC method failed, trying direct SQL...");const{error:ve}=await pe.from("storage.buckets").insert([{id:"food_images",name:"food_images",public:!0,file_size_limit:52428800,allowed_mime_types:["image/jpeg","image/png","image/gif","image/webp"]}]);if(ve)return console.error(" Failed to create bucket:",ve),!1}return console.log(" food_images bucket created successfully!"),!0}}catch(q){return console.error(" Error creating bucket:",q),!1}};N.useEffect(()=>{(async()=>{try{if(console.log(" Testing Supabase Storage connection..."),!await Me()){console.warn(" Could not ensure food_images bucket exists");return}const{data:ge,error:ye}=await pe.storage.listBuckets();if(ye){console.error(" Error listing buckets:",ye);return}if(console.log(" Available buckets:",ge.map(je=>je.name)),ge.find(je=>je.name==="food_images")){console.log(" food_images bucket ready for use!");const{data:je,error:Ge}=await pe.storage.from("food_images").list();Ge?console.warn(" Could not list files in bucket:",Ge.message):console.log(" Files in food_images bucket:",je.length)}}catch(ue){console.error(" Storage connection test failed:",ue)}})()},[]),N.useEffect(()=>{Z()},[]);const Oe=async()=>{console.log(" Using direct Supabase upload fallback...");let q=null,ue=!1;if(y.image)try{console.log(" Uploading image to Supabase Storage..."),console.log(" Image file details:",{name:y.image.name,size:y.image.size,type:y.image.type});const Ge=Date.now(),Ze=y.image.name.split(".").pop().toLowerCase(),vt=y.name.replace(/[^a-zA-Z0-9]/g,"_"),be=`items/${Ge}-${vt}.${Ze}`;console.log(" Generated filename:",be);const{data:gn,error:Ot}=await pe.storage.from("images_food").upload(be,y.image,{cacheControl:"3600",upsert:!1,contentType:y.image.type});if(Ot)throw console.error(" Upload error:",Ot),console.error(" Upload error details:",{message:Ot.message,statusCode:Ot.statusCode,error:Ot.error}),new Error(`Upload failed: ${Ot.message}`);console.log(" Upload successful:",gn);const{data:Yn}=pe.storage.from("images_food").getPublicUrl(be);q=Yn.publicUrl,ue=!0,console.log(" Public URL generated:",q)}catch(Ge){console.error(" Image upload failed:",Ge),console.error(" Upload error details:",Ge)}else console.log(" No image provided for upload");const ge={name:y.name.trim(),price:parseFloat(y.cost),available_quantity:100,is_active:!0};y.description.trim()&&(ge.description=y.description.trim()),q&&(ge.image_url=q),console.log(" Inserting item data:",ge);const{data:ye,error:ve}=await pe.from("food_items").insert([ge]).select();if(ve)throw console.error(" Database insert error:",ve),console.error(" Database error details:",{message:ve.message,details:ve.details,hint:ve.hint,code:ve.code}),new Error(`Database error: ${ve.message}`);console.log(" Item inserted successfully:",ye);const je=ue?`Item "${y.name}" added successfully with image!`:`Item "${y.name}" added successfully!`;re({show:!0,message:je,type:"success"}),x({name:"",cost:"",description:"",image:null}),g(!1),r({id:"",name:""}),b(""),Z(),dn&&dn()},Tt=async q=>{q.preventDefault(),E(!0),b("");try{if(!y.name.trim())throw new Error("Item name is required");if(!y.cost||parseFloat(y.cost)<=0)throw new Error("Valid cost is required");console.log(" Creating FormData for API request...");const ue=new FormData;ue.append("name",y.name.trim()),ue.append("price",y.cost),ue.append("description",y.description.trim()),y.image&&(ue.append("image",y.image),console.log(" Added image file to FormData:",y.image.name)),console.log(" Sending request to /api/items...");let ge,ye;try{ge=await fetch("/api/items",{method:"POST",body:ue}),console.log(" Response status:",ge.status),console.log(" Response headers:",Object.fromEntries(ge.headers.entries()));const ve=ge.headers.get("content-type");if(!ve||!ve.includes("application/json")){const je=await ge.text();throw console.error(" Non-JSON response:",je),new Error(`Server returned non-JSON response (${ge.status}): ${je.substring(0,200)}`)}try{ye=await ge.json()}catch(je){console.error(" JSON parsing error:",je);const Ge=await ge.text();throw console.error(" Raw response:",Ge),new Error(`Invalid JSON response: ${je.message}`)}if(console.log(" Parsed response:",ye),!ge.ok)throw new Error(ye.error||`HTTP ${ge.status}: ${ge.statusText}`);if(!ye.success)throw new Error(ye.error||"API request failed");console.log(" API response:",ye)}catch(ve){console.warn(" API server not available, using direct Supabase upload:",ve.message),await Oe();return}re({show:!0,message:ye.message,type:"success"}),x({name:"",cost:"",description:"",image:null}),g(!1),r({id:"",name:""}),b(""),Z(),dn&&dn()}catch(ue){console.error(" Failed to add item:",ue);const ge=ue.message||"Failed to add item";b(ge),alert(` Error: ${ge}`)}finally{E(!1)}},pn=()=>{g(!1),x({name:"",cost:"",description:"",image:null}),b(""),E(!1)},xt=q=>{k(q),B({name:q.name||"",cost:q.price||"",description:q.description||"",image:null}),K(!0)},Rn=()=>{K(!1),k(null),B({name:"",cost:"",description:"",image:null}),b(""),E(!1)},_r=async q=>{q.preventDefault(),E(!0),b("");try{if(!R.name.trim())throw new Error("Item name is required");if(!R.cost||parseFloat(R.cost)<=0)throw new Error("Valid cost is required");console.log(" Updating item:",S.name);const ue=new FormData;ue.append("name",R.name.trim()),ue.append("price",R.cost),ue.append("description",R.description.trim()),ue.append("id",S.id),R.image&&(ue.append("image",R.image),console.log(" Added new image file to FormData:",R.image.name)),console.log(" Sending update request to /api/items...");let ge,ye;try{ge=await fetch("/api/items",{method:"PUT",body:ue}),console.log(" Response status:",ge.status);const ve=ge.headers.get("content-type");if(!ve||!ve.includes("application/json")){const Ge=await ge.text();throw console.error(" Non-JSON response:",Ge),new Error(`Server returned non-JSON response (${ge.status}): ${Ge.substring(0,200)}`)}try{ye=await ge.json()}catch(Ge){console.error(" JSON parsing error:",Ge);const Ze=await ge.text();throw console.error(" Raw response:",Ze),new Error(`Invalid JSON response: ${Ge.message}`)}if(console.log(" Parsed response:",ye),!ye.success)throw new Error(ye.error||"Update failed");console.log(" Item updated successfully via API:",ye.data);const je=R.image?`Item "${R.name}" updated successfully with new image!`:`Item "${R.name}" updated successfully!`;re({show:!0,message:je,type:"success"})}catch(ve){console.warn(" API update failed, trying direct Supabase update:",ve),await Br()}Rn(),Z(),dn&&dn()}catch(ue){console.error(" Edit item failed:",ue),b(ue.message),re({show:!0,message:`Update failed: ${ue.message}`,type:"error"})}finally{E(!1)}},Br=async()=>{console.log(" Using direct Supabase update fallback...");let q=S.image_url,ue=!1;if(R.image)try{console.log(" Uploading new image to Supabase Storage..."),console.log(" Image file details:",{name:R.image.name,size:R.image.size,type:R.image.type});const Ge=Date.now(),Ze=R.image.name.split(".").pop().toLowerCase(),vt=R.name.replace(/[^a-zA-Z0-9]/g,"_"),be=`items/${Ge}-${vt}.${Ze}`;console.log(" Generated filename:",be);const{data:gn,error:Ot}=await pe.storage.from("images_food").upload(be,R.image,{cacheControl:"3600",upsert:!1,contentType:R.image.type});if(Ot)throw console.error(" Upload error:",Ot),console.error(" Upload error details:",{message:Ot.message,statusCode:Ot.statusCode,error:Ot.error}),new Error(`Image upload failed: ${Ot.message}`);console.log(" Image uploaded successfully:",gn);const{data:Yn}=pe.storage.from("images_food").getPublicUrl(be);q=Yn.publicUrl,ue=!0,console.log(" Public URL generated:",q)}catch(Ge){throw console.error(" Image upload failed:",Ge),new Error(`Image upload failed: ${Ge.message}`)}const ge={name:R.name.trim(),price:parseFloat(R.cost),description:R.description?.trim()||null,image_url:q,updated_at:new Date().toISOString()};console.log(" Updating item data in food_items:",ge);const{data:ye,error:ve}=await pe.from("food_items").update(ge).eq("id",S.id).select();if(ve)throw console.error(" Database update error:",ve),console.error(" Database error details:",{message:ve.message,details:ve.details,hint:ve.hint,code:ve.code}),new Error(`Database error: ${ve.message}`);console.log(" Item updated successfully:",ye);const je=ue?`Item "${R.name}" updated successfully with new image!`:`Item "${R.name}" updated successfully!`;re({show:!0,message:je,type:"success"})};N.useEffect(()=>{const q=ue=>{ue.key==="Escape"&&p&&pn(),ue.key==="Escape"&&U&&Rn()};if(p||U)return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[p,U]);const ci=async(q,ue)=>{const ge=n;e(ye=>ye.map(ve=>ve.id===q?{...ve,inStock:ue}:ve));try{const ye=n.find(Ge=>Ge.id===q);if(ye&&ye._local)return;let ve={};I==="stock"?ve[I]=ue?1:0:I==="status"?ve[I]=ue?"in":"out":I==="available_quantity"?ve[I]=ue?1:0:ve[I]=!!ue;const{error:je}=await pe.from("food_items").update(ve).eq(T,q);if(je)throw je}catch(ye){console.error("Failed to update stock in Supabase:",ye),e(ge),alert("Failed to update in backend. Please try again.")}},Na=async(q,ue)=>{if(ue<0||isNaN(ue)){re({show:!0,message:"Quantity must be a positive number or zero",type:"error"}),setTimeout(()=>re({show:!1,message:"",type:"success"}),3e3);return}const ge=n;e(ye=>ye.map(ve=>ve.id===q?{...ve,availableQuantity:ue,inStock:ue>0}:ve));try{const ye=n.find(je=>je.id===q);if(ye&&ye._local){re({show:!0,message:"Quantity updated successfully",type:"success"}),setTimeout(()=>re({show:!1,message:"",type:"success"}),3e3);return}const{error:ve}=await pe.from("food_items").update({available_quantity:ue}).eq(T,q);if(ve)throw ve;re({show:!0,message:"Quantity updated successfully",type:"success"}),setTimeout(()=>re({show:!1,message:"",type:"success"}),3e3)}catch(ye){console.error("Failed to update quantity in Supabase:",ye),e(ge),re({show:!0,message:"Error updating quantity",type:"error"}),setTimeout(()=>re({show:!1,message:"",type:"success"}),3e3)}},bn=async(q,ue)=>{if(ue<0||isNaN(ue)){re({show:!0,message:"Price must be a positive number or zero",type:"error"}),setTimeout(()=>re({show:!1,message:"",type:"success"}),3e3);return}const ge=n;e(ye=>ye.map(ve=>ve.id===q?{...ve,price:ue}:ve));try{const ye=n.find(je=>je.id===q);if(ye&&ye._local){re({show:!0,message:"Price updated successfully",type:"success"}),setTimeout(()=>re({show:!1,message:"",type:"success"}),3e3);return}const{error:ve}=await pe.from("food_items").update({price:ue}).eq(T,q);if(ve)throw ve;re({show:!0,message:"Price updated successfully",type:"success"}),setTimeout(()=>re({show:!1,message:"",type:"success"}),3e3)}catch(ye){console.error("Failed to update price in Supabase:",ye),e(ge),re({show:!0,message:"Error updating price",type:"error"}),setTimeout(()=>re({show:!1,message:"",type:"success"}),3e3)}},ui=async q=>{const ue=n;e(ge=>ge.filter(ye=>ye.id!==q));try{const ge=n.find(ve=>ve.id===q);if(ge&&ge._local)return;const{error:ye}=await pe.from("food_items").delete().eq(T,q);if(ye)throw ye;console.log(`Item with ID ${q} deleted successfully from database`),dn&&dn()}catch(ge){console.error("Failed to delete item from Supabase:",ge),e(ue),alert("Failed to delete item from database. Please try again.")}},Lr=he().filter(q=>{const ue=i.trim().toLowerCase(),ge=ue?String(q.name||"").toLowerCase().includes(ue):!0,ye=s==="all"||(s==="in"?q.inStock:!q.inStock);return ge&&ye}).sort((q,ue)=>(q.availableQuantity||0)-(ue.availableQuantity||0));return v.jsxs("div",{style:{display:"grid",gap:16},children:[v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"12px",marginBottom:"16px"},children:[v.jsxs("div",{style:{backgroundColor:te==="all"?"#e2e8f0":"#f8fafc",border:te==="all"?"2px solid #64748b":"1px solid #e2e8f0",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:te==="all"?"scale(1.02)":"scale(1)",boxShadow:te==="all"?"0 4px 12px rgba(100, 116, 139, 0.3)":"none"},onClick:()=>ae("all"),children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1e293b"},children:n.length}),v.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Total"})]}),v.jsxs("div",{style:{backgroundColor:te==="in-stock"?"#bbf7d0":"#f0fdf4",border:te==="in-stock"?"2px solid #16a34a":"1px solid #bbf7d0",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:te==="in-stock"?"scale(1.02)":"scale(1)",boxShadow:te==="in-stock"?"0 4px 12px rgba(22, 163, 74, 0.3)":"none"},onClick:()=>ae(te==="in-stock"?"all":"in-stock"),children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#166534"},children:n.filter(q=>q.inStock&&q.availableQuantity>20).length}),v.jsx("div",{style:{fontSize:"12px",color:"#16a34a"},children:"In Stock"})]}),v.jsxs("div",{style:{backgroundColor:te==="low-stock"?"#fef3c7":"#fefce8",border:te==="low-stock"?"2px solid #ca8a04":"1px solid #fde047",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:te==="low-stock"?"scale(1.02)":"scale(1)",boxShadow:te==="low-stock"?"0 4px 12px rgba(202, 138, 4, 0.3)":"none"},onClick:()=>ae(te==="low-stock"?"all":"low-stock"),children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#a16207"},children:n.filter(q=>q.inStock&&q.availableQuantity<=20&&q.availableQuantity>5).length}),v.jsx("div",{style:{fontSize:"12px",color:"#ca8a04"},children:"Low Stock"})]}),v.jsxs("div",{style:{backgroundColor:te==="very-low"?"#fecaca":"#fef2f2",border:te==="very-low"?"2px solid #dc2626":"1px solid #fca5a5",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:te==="very-low"?"scale(1.02)":"scale(1)",boxShadow:te==="very-low"?"0 4px 12px rgba(220, 38, 38, 0.3)":"none"},onClick:()=>ae(te==="very-low"?"all":"very-low"),children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#991b1b"},children:n.filter(q=>q.inStock&&q.availableQuantity<=5&&q.availableQuantity>0).length}),v.jsx("div",{style:{fontSize:"12px",color:"#dc2626"},children:"Very Low"})]}),v.jsxs("div",{style:{backgroundColor:te==="out-of-stock"?"#e2e8f0":"#f1f5f9",border:te==="out-of-stock"?"2px solid #64748b":"1px solid #cbd5e1",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:te==="out-of-stock"?"scale(1.02)":"scale(1)",boxShadow:te==="out-of-stock"?"0 4px 12px rgba(100, 116, 139, 0.3)":"none"},onClick:()=>ae(te==="out-of-stock"?"all":"out-of-stock"),children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#475569"},children:n.filter(q=>!q.inStock||q.availableQuantity===0).length}),v.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Out of Stock"})]})]}),v.jsx(It,{title:"Inventory Controls",titleAction:v.jsxs("button",{onClick:()=>L(!0),className:"btn btn-secondary",style:{padding:"8px 16px",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx(sw,{size:16}),"Removed Items"]}),children:v.jsxs("div",{className:"inventory-controls-vertical",children:[v.jsx("div",{className:"search-section",children:v.jsx("div",{className:"field",children:v.jsx("input",{className:"search-input",placeholder:"Search food items...",value:i,onChange:q=>a(q.target.value)})})}),v.jsxs("div",{className:"add-section",children:[v.jsxs("div",{className:"add-item-container",children:[v.jsx("input",{className:"add-input",placeholder:"Add Item",value:t.name,onChange:q=>r({...t,name:q.target.value})}),v.jsx(ht.button,{className:`dynamic-btn ${ce(t.name.trim())?"remove-btn":"add-btn"}`,onClick:xe,disabled:!t.name.trim(),whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300,damping:20},children:ce(t.name.trim())?v.jsx("span",{children:""}):v.jsx("span",{children:"+"})})]}),t.name.trim()&&v.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:ce(t.name.trim())?`Found existing item: ${ce(t.name.trim())?.name}`:"New item - will be added"})]})]})}),v.jsxs(It,{title:"Inventory Items",children:[te!=="all"&&v.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"6px",fontSize:"14px",color:"#0369a1"},children:[v.jsx("strong",{children:" Filter Active:"})," Showing ",te==="in-stock"?"In Stock":te==="low-stock"?"Low Stock":te==="very-low"?"Very Low":"Out of Stock"," items only",v.jsx("button",{onClick:()=>ae("all"),style:{marginLeft:"8px",padding:"2px 8px",fontSize:"12px",backgroundColor:"#0ea5e9",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear Filter"})]}),v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Image"}),v.jsx("th",{children:"Item Name"}),v.jsx("th",{children:"Price"}),v.jsx("th",{children:"Quantity"}),v.jsx("th",{children:"Stock Status"}),v.jsx("th",{children:"Actions"})]})}),v.jsx("tbody",{children:Lr.map(q=>v.jsxs("tr",{children:[v.jsx("td",{children:v.jsxs("div",{style:{width:"50px",height:"50px",borderRadius:"8px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb"},children:[q.image_url?v.jsx("img",{src:q.image_url,alt:q.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:ue=>{ue.target.style.display="none",ue.target.nextSibling.style.display="flex"}}):null,v.jsx("div",{style:{display:q.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",fontSize:"12px",color:"#6b7280"},children:""})]})}),v.jsx("td",{children:v.jsx("strong",{children:q.name})}),v.jsx("td",{children:F===q.id?v.jsx("input",{type:"number",className:"price-input",value:q.price,onChange:ue=>e(n.map(ge=>ge.id===q.id?{...ge,price:Number(ue.target.value)}:ge)),onBlur:()=>{bn(q.id,q.price),H(null)},onKeyDown:ue=>{ue.key==="Enter"?(bn(q.id,q.price),H(null)):ue.key==="Escape"&&H(null)},min:"0",step:"0.01",autoFocus:!0,style:{MozAppearance:"textfield"}}):v.jsxs("span",{className:"price-cell",onClick:()=>H(q.id),children:["",q.price]})}),v.jsx("td",{children:G===q.id?v.jsx("input",{type:"number",className:"quantity-input",value:q.availableQuantity,onChange:ue=>e(n.map(ge=>ge.id===q.id?{...ge,availableQuantity:Number(ue.target.value)}:ge)),onBlur:()=>{Na(q.id,q.availableQuantity),V(null)},onKeyDown:ue=>{ue.key==="Enter"?(Na(q.id,q.availableQuantity),V(null)):ue.key==="Escape"&&V(null)},min:"0",autoFocus:!0}):v.jsx("span",{className:"quantity-cell",onClick:()=>V(q.id),style:{cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s ease",display:"inline-block",minWidth:"40px",textAlign:"center",fontSize:"14px",fontWeight:"600",color:q.availableQuantity>20?"#10b981":q.availableQuantity>5?"#f59e0b":q.availableQuantity>0?"#ef4444":"#6b7280"},children:q.availableQuantity})}),v.jsx("td",{children:v.jsx("span",{className:"stock-status-badge",style:{backgroundColor:q.availableQuantity>20?"#dcfce7":q.availableQuantity>5?"#fef3c7":q.availableQuantity>0?"#fee2e2":"#f3f4f6",color:q.availableQuantity>20?"#166534":q.availableQuantity>5?"#92400e":q.availableQuantity>0?"#991b1b":"#6b7280"},children:q.availableQuantity>20?" In Stock":q.availableQuantity>5?" Low Stock":q.availableQuantity>0?" Very Low":" Out of Stock"})}),v.jsx("td",{className:"actions",children:v.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[v.jsx("button",{className:"btn btn-secondary",onClick:()=>xt(q),style:{padding:"4px 8px",fontSize:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Edit"}),q.inStock?v.jsx("button",{className:"btn",onClick:()=>ci(q.id,!1),children:"Mark Out"}):v.jsx("button",{className:"btn",onClick:()=>ci(q.id,!0),children:"Mark In"})]})})]},q.id))})]})]}),p&&v.jsx("div",{className:"add-item-panel-overlay",onClick:pn,children:v.jsxs(ht.div,{className:"add-item-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},onClick:q=>q.stopPropagation(),children:[v.jsxs("div",{className:"add-item-panel-header",children:[v.jsx("h3",{children:"Add New Item"}),v.jsx("button",{className:"add-item-panel-close",onClick:pn,children:v.jsx(ri,{size:20})})]}),v.jsxs("form",{onSubmit:Tt,className:"add-item-form",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"item-name",children:"Item Name *"}),v.jsx("input",{id:"item-name",type:"text",className:"form-input",value:y.name,onChange:q=>x({...y,name:q.target.value}),placeholder:"Enter item name",required:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"item-cost",children:"Cost () *"}),v.jsx("input",{id:"item-cost",type:"number",className:"form-input",value:y.cost,onChange:q=>x({...y,cost:q.target.value}),placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"item-description",children:"Description"}),v.jsx("textarea",{id:"item-description",className:"form-textarea",value:y.description,onChange:q=>x({...y,description:q.target.value}),placeholder:"Enter item description (optional)",rows:"3"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Image Upload (Optional)"}),v.jsx(r2,{value:y.image,onChange:q=>x({...y,image:q}),disabled:_}),v.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"10px"},children:[v.jsx("button",{type:"button",className:"btn-secondary",onClick:async()=>{console.log("=== TESTING SUPABASE STORAGE CONNECTION ===");try{console.log(" Step 1: Testing bucket access...");const{data:q,error:ue}=await pe.storage.listBuckets();if(ue){console.error(" Bucket list failed:",ue),alert(` Bucket access failed: ${ue.message}`);return}console.log(" Available buckets:",q.map(vt=>vt.name));const ge=q.find(vt=>vt.name==="food_images");if(!ge){console.log(" food_images bucket not found, attempting to create...");try{const{data:vt,error:be}=await pe.storage.createBucket("food_images",{public:!0,fileSizeLimit:52428800,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp"]});if(be){console.error(" Failed to create bucket:",be),alert(` Cannot create bucket automatically: ${be.message}

Please create it manually in Supabase Dashboard:
1. Go to Storage
2. Click "New bucket"
3. Name: food_images
4. Check "Public bucket"
5. Click "Create bucket"`);return}console.log(" Bucket created successfully:",vt),alert(` food_images bucket created successfully!

Now setting up permissions...`);try{alert(` Bucket created! Now you need to set up permissions:

1. Go to Supabase Dashboard  SQL Editor
2. Run these commands:

`+[`CREATE POLICY "Public Access" ON storage.objects FOR SELECT USING (bucket_id = 'food_images')`,`CREATE POLICY "Public Upload" ON storage.objects FOR INSERT WITH CHECK (bucket_id = 'food_images')`,`CREATE POLICY "Public Update" ON storage.objects FOR UPDATE USING (bucket_id = 'food_images')`,`CREATE POLICY "Public Delete" ON storage.objects FOR DELETE USING (bucket_id = 'food_images')`].join(`

`)+`

3. Then test storage access again!`);return}catch(gn){console.error(" Policy setup failed:",gn),alert(" Bucket created but policy setup failed. Please set up permissions manually in Supabase Dashboard.");return}}catch(vt){console.error(" Bucket creation failed:",vt),alert(` Failed to create bucket: ${vt.message}

Please create it manually in Supabase Dashboard.`);return}}console.log(" food_images bucket found:",ge),console.log(" Step 2: Testing file listing...");const{data:ye,error:ve}=await pe.storage.from("food_images").list();if(ve){console.error(" File listing failed:",ve),alert(` Cannot access files in bucket: ${ve.message}

This is likely a permissions issue. Check bucket policies.`);return}console.log(" Files in bucket:",ye.length),console.log(" Step 3: Testing upload permissions...");const je=new File(["test"],"test.txt",{type:"text/plain"}),{data:Ge,error:Ze}=await pe.storage.from("food_images").upload(`test_${Date.now()}.txt`,je);if(Ze){console.error(" Upload test failed:",Ze),alert(` Upload test failed: ${Ze.message}

Bucket exists but upload permissions are missing.`);return}console.log(" Upload test successful:",Ge),await pe.storage.from("food_images").remove([Ge.path]),alert(` Storage test successful!

- Buckets: ${q.length} found
- food_images bucket:  Accessible
- File listing:  Working
- Upload:  Working

Your storage is ready!`)}catch(q){console.error(" Storage test error:",q),alert(` Storage test error: ${q.message}`)}},style:{fontSize:"12px",padding:"6px 12px"},children:"Test Storage Access"}),y.image&&v.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{x({...y,image:null}),document.getElementById("item-image").value=""},style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#ef4444",color:"white"},children:"Remove Image"}),v.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{const q=`
-- Copy and paste these SQL commands in your Supabase SQL Editor:

-- 1. Create storage policies for food_images bucket
CREATE POLICY "Public Access" ON storage.objects
FOR SELECT USING (bucket_id = 'food_images');

CREATE POLICY "Public Upload" ON storage.objects
FOR INSERT WITH CHECK (bucket_id = 'food_images');

CREATE POLICY "Public Update" ON storage.objects
FOR UPDATE USING (bucket_id = 'food_images');

CREATE POLICY "Public Delete" ON storage.objects
FOR DELETE USING (bucket_id = 'food_images');

-- 2. If the above fails, try this alternative:
INSERT INTO storage.policies (id, bucket_id, name, definition, check_expression)
VALUES 
  ('food_images_select', 'food_images', 'Public Access', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_insert', 'food_images', 'Public Upload', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_update', 'food_images', 'Public Update', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_delete', 'food_images', 'Public Delete', 'bucket_id = ''food_images''', 'bucket_id = ''food_images''')
ON CONFLICT (id) DO NOTHING;
                      `;navigator.clipboard.writeText(q).then(()=>{alert(` SQL commands copied to clipboard!

1. Go to Supabase Dashboard  SQL Editor
2. Paste and run the commands
3. Test storage access again`)}).catch(()=>{alert(` SQL Commands:

`+q+`

Copy these and run in Supabase SQL Editor`)})},style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#3b82f6",color:"white"},children:"Fix Permissions"})]})]}),C&&v.jsxs("div",{className:"form-error",style:{backgroundColor:"#fef2f2",border:"2px solid #fecaca",borderRadius:"8px",padding:"12px",marginTop:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx(Oa,{size:20,style:{color:"#dc2626"}}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"600",color:"#dc2626",marginBottom:"4px"},children:" Upload Failed"}),v.jsx("div",{style:{color:"#991b1b",fontSize:"14px"},children:C}),v.jsx("div",{style:{color:"#6b7280",fontSize:"12px",marginTop:"4px"},children:"Check the browser console (F12) for more details"}),v.jsx("button",{type:"button",onClick:()=>b(""),style:{marginTop:"8px",padding:"4px 8px",fontSize:"12px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear Error & Try Again"})]})]}),v.jsxs("div",{className:"form-actions",children:[v.jsx("button",{type:"button",className:"btn btn-secondary",onClick:pn,disabled:_,children:"Cancel"}),v.jsx("button",{type:"submit",className:"btn btn-primary",disabled:_,children:_?v.jsxs(v.Fragment,{children:[v.jsx(Ho,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):v.jsxs(v.Fragment,{children:[v.jsx(yO,{size:16}),"Add Item"]})})]})]})]})}),U&&v.jsx("div",{className:"add-item-panel-overlay",onClick:Rn,children:v.jsxs(ht.div,{className:"add-item-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},onClick:q=>q.stopPropagation(),children:[v.jsxs("div",{className:"add-item-panel-header",children:[v.jsx("h3",{children:"Edit Item"}),v.jsx("button",{className:"add-item-panel-close",onClick:Rn,children:v.jsx(ri,{size:20})})]}),v.jsxs("form",{onSubmit:_r,className:"add-item-form",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"edit-item-name",children:"Item Name *"}),v.jsx("input",{id:"edit-item-name",type:"text",className:"form-input",value:R.name,onChange:q=>B({...R,name:q.target.value}),placeholder:"Enter item name",required:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"edit-item-cost",children:"Cost () *"}),v.jsx("input",{id:"edit-item-cost",type:"number",className:"form-input",value:R.cost,onChange:q=>B({...R,cost:q.target.value}),placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"edit-item-description",children:"Description"}),v.jsx("textarea",{id:"edit-item-description",className:"form-textarea",value:R.description,onChange:q=>B({...R,description:q.target.value}),placeholder:"Enter item description (optional)",rows:"3"})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"Current Image"}),S?.image_url&&v.jsxs("div",{style:{marginBottom:"10px"},children:[v.jsx("img",{src:S.image_url,alt:S.name,style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb"}}),v.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Current image"})]})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{children:"New Image Upload (Optional)"}),v.jsx(r2,{value:R.image,onChange:q=>B({...R,image:q}),disabled:_}),v.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Upload a new image to replace the current one, or leave empty to keep current image"})]}),C&&v.jsxs("div",{className:"form-error",style:{backgroundColor:"#fef2f2",border:"2px solid #fecaca",borderRadius:"8px",padding:"12px",marginTop:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx(Oa,{size:20,style:{color:"#dc2626"}}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"600",color:"#dc2626",marginBottom:"4px"},children:" Update Failed"}),v.jsx("div",{style:{color:"#991b1b",fontSize:"14px"},children:C}),v.jsx("div",{style:{color:"#6b7280",fontSize:"12px",marginTop:"4px"},children:"Check the browser console (F12) for more details"})]})]}),v.jsxs("div",{className:"form-actions",style:{display:"flex",gap:"12px",marginTop:"20px"},children:[v.jsx("button",{type:"button",className:"btn-secondary",onClick:Rn,disabled:_,style:{flex:1},children:"Cancel"}),v.jsx("button",{type:"submit",className:"btn-primary",disabled:_,style:{flex:1},children:_?"Updating...":"Update Item"})]})]})]})}),v.jsx(xr,{children:Q.show&&v.jsx(ht.div,{className:"fixed bottom-4 right-4 z-50",initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3},children:v.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${Q.type==="success"?"bg-green-500":"bg-red-500"}`,children:Q.message})})}),v.jsx(_I,{isOpen:fe,onClose:()=>L(!1),onItemRestored:ne})]})}function jI(){const[n,e]=N.useState([]),[t,r]=N.useState([]),[i,a]=N.useState(null),[s,c]=N.useState(null),[f,d]=N.useState(!1),[p,g]=N.useState(!0),[y,x]=N.useState(new Date),[_,E]=N.useState("english"),[C,b]=N.useState("tomorrow"),[T,O]=N.useState(new Date),I=async()=>{d(!0);try{console.log(" AI Predictions: Fetching orders data...");const S=new Date;S.setDate(S.getDate()-30);const{data:k,error:U}=await pe.from("orders").select("*").gte("created_at",S.toISOString()).order("created_at",{ascending:!1});if(U)throw U;const{data:K,error:R}=await pe.from("food_items").select("*");if(R)throw R;e(k||[]),r(K||[]),c(new Date),console.log(" AI Predictions: Fetched",k?.length||0,"orders and",K?.length||0,"food items"),te(k||[],K||[])}catch(S){console.error(" AI Predictions: Failed to fetch data:",S),alert("Failed to fetch data for predictions: "+S.message)}finally{d(!1)}},P=["","","","","","","","","","","",""],F=["","","","","","",""],H={seasonal:{summer:{"Curd Rice":1.4,Rasam:1.3,Pulihora:1.2,Biryani:.8},monsoon:{Haleem:1.6,Sambar:1.2,Rasam:1.3,Dosa:1.1},winter:{Biryani:1.3,Kebabs:1.2,Pongal:1.4,Haleem:1.2}}},G=S=>{const k=S.getMonth()+1;return k>=3&&k<=5?"summer":k>=6&&k<=9?"monsoon":"winter"},V=S=>{const k=S.getFullYear()-78,U=P[S.getMonth()],K=F[S.getDay()];return{year:k,month:U,day:K,date:S.getDate()}},Q={"2025-03-30":{name:"Ugadi",reduction:.7,duration:1},"2026-03-20":{name:"Ugadi",reduction:.7,duration:1},"2025-04-06":{name:"Sri Rama Navami",reduction:.8,duration:1},"2025-05-22":{name:"Hanuman Jayanti",reduction:.8,duration:1},"2025-05-15":{name:"Saraswati Pushkaralu",reduction:.6,duration:12},"2025-08-08":{name:"Varalakshmi Vratam",reduction:.7,duration:1},"2025-08-16":{name:"Krishna Janmashtami",reduction:.8,duration:1},"2025-08-27":{name:"Ganesh Chaturthi",reduction:.6,duration:9},"2025-09-21":{name:"Indira Ekadashi",reduction:.8,duration:1},"2025-09-22":{name:"Navaratri / Dasara",reduction:.6,duration:11},"2025-10-20":{name:"Deepavali",reduction:.7,duration:1}},re=S=>{const k=S.toISOString().split("T")[0];if(Q[k])return Q[k];for(const[U,K]of Object.entries(Q)){const R=new Date(U),B=new Date(R);if(B.setDate(B.getDate()+K.duration),S>=R&&S<=B)return K}return null},te=(S,k)=>{console.log(" AI Predictions: Generating predictions...");const U=new Date,K=new Date(U.getFullYear(),U.getMonth(),U.getDate()),R=new Date(K);R.setDate(R.getDate()-1);const B=new Date(K);B.setDate(B.getDate()-7);const Z=new Date(K);Z.setDate(Z.getDate()-30);const ne=S.filter(De=>new Date(De.created_at)>=K),ce=S.filter(De=>{const Ae=new Date(De.created_at);return Ae>=R&&Ae<K}),xe=S.filter(De=>new Date(De.created_at)>=B),he=S.filter(De=>new Date(De.created_at)>=Z),Me=ne.length,Oe=ce.length,Tt=xe.length/7,pn=he.length/30,xt={};S.forEach(De=>{const Ae=De.item_name;xt[Ae]||(xt[Ae]={totalOrders:0,totalRevenue:0,avgPrice:0,lastOrdered:null}),xt[Ae].totalOrders++,xt[Ae].totalRevenue+=De.total_amount||De.price||0,xt[Ae].avgPrice=xt[Ae].totalRevenue/xt[Ae].totalOrders;const En=new Date(De.created_at);(!xt[Ae].lastOrdered||En>xt[Ae].lastOrdered)&&(xt[Ae].lastOrdered=En)});const Rn=Object.entries(xt).sort(([,De],[,Ae])=>Ae.totalOrders-De.totalOrders).slice(0,10),_r={};S.forEach(De=>{const Ae=new Date(De.created_at).getHours();_r[Ae]||(_r[Ae]=0),_r[Ae]++});const Br=Object.entries(_r).sort(([,De],[,Ae])=>Ae-De).slice(0,3).map(([De])=>`${De}:00`),ci=G(K),Na=V(K),bn=re(K),ui=new Date(K);ui.setDate(ui.getDate()+1);const Lr=re(ui);G(ui);const q=new Date(K);q.setDate(q.getDate()+2),re(q),G(q);const ue=[];for(let De=1;De<=7;De++){const Ae=new Date(K);Ae.setDate(K.getDate()+De);const En=re(Ae),fi=G(Ae),jl=Ae.getDay()===0||Ae.getDay()===6;let di=Tt;jl&&(Ae.getDay()===0?di=0:di*=.75),En&&(di*=1-En.reduction+.3);const Jo=H.seasonal[fi]||{},es=Object.values(Jo).reduce((Wi,$u)=>Wi+$u,0)/Math.max(Object.keys(Jo).length,1);di*=es||1,ue.push({date:Ae,day:F[Ae.getDay()],predicted:Math.round(di),festival:En,season:fi,isWeekend:jl,isHoliday:Ae.getDay()===0})}const ge=ue[0].predicted,ye=ue[1].predicted,ve=Math.round(ue.reduce((De,Ae)=>De+Ae.predicted,0)/7),je=[];k.forEach(De=>{const Ae=De.available_quantity||De.stock||0,En=xt[De.name]?.totalOrders||0;Ae<=5&&En>0?je.push({type:"low_stock",priority:"high",message:`${De.name} is running low (${Ae} left) but is popular (${En} orders)`,action:"Restock immediately"}):Ae<=10&&En>5&&je.push({type:"low_stock",priority:"medium",message:`${De.name} has ${Ae} units left and moderate demand`,action:"Consider restocking soon"})}),Rn.length>0&&je.push({type:"popular_item",priority:"medium",message:`${Rn[0][0]} is your most popular item (${Rn[0][1].totalOrders} orders)`,action:"Ensure adequate stock"}),Br.length>0&&je.push({type:"peak_hours",priority:"low",message:`Peak ordering hours: ${Br.join(", ")}`,action:"Prepare extra staff during these hours"}),Lr&&je.push({type:"festival_nonveg_reduction",priority:"high",message:`Tomorrow is ${Lr.name} - Non-veg consumption will be ${Math.round(Lr.reduction*100)}% lower`,action:`Reduce non-veg items by ${Math.round(Lr.reduction*100)}%. Focus on vegetarian options like Dosa, Idli, Sambar, Curd Rice`});const Ge=H.seasonal[ci]||{},Ze=Object.entries(Ge).sort(([,De],[,Ae])=>Ae-De)[0];Ze&&Ze[1]>1.2&&je.push({type:"seasonal_boost",priority:"medium",message:`Current season (${ci}) favors ${Ze[0]} - demand is ${Math.round(Ze[1]*100)}% higher`,action:`Increase ${Ze[0]} preparation for seasonal demand`});const vt=ue.find(De=>De.isHoliday),be=ue.find(De=>De.isWeekend&&!De.isHoliday);vt&&je.push({type:"holiday_planning",priority:"medium",message:"Sunday is college holiday - no orders expected (0 orders)",action:"College closed on Sunday. Focus on maintenance and preparation for Monday"}),be&&je.push({type:"saturday_pattern",priority:"medium",message:"Saturday shows 25% lower demand due to Telangana college non-veg consumption patterns",action:"Reduce non-veg items by 20-30%. Focus on vegetarian options and lighter meals"});const gn=S.reduce((De,Ae)=>De+(Ae.total_amount||Ae.price||0),0)/S.length,Ot=ge*gn,Yn=ye*gn,br=ve*7*gn;a({summary:{todayOrders:Me,yesterdayOrders:Oe,weekAverage:Math.round(Tt),monthAverage:Math.round(pn),predictedTomorrow:ge,predictedDayAfter:ye,weeklyAverage:ve,predictedRevenue:Math.round(Ot),predictedRevenueDayAfter:Math.round(Yn),predictedWeeklyRevenue:Math.round(br),totalItems:k.length,totalOrders:S.length},popularItems:Rn.slice(0,5),peakHours:Br,recommendations:je,itemStats:xt,weeklyPredictions:ue,teluguDate:Na,currentSeason:ci,festival:bn,lastUpdated:new Date}),console.log(" AI Predictions: Generated predictions successfully")};N.useEffect(()=>{if(p){I();const S=setInterval(()=>{console.log(" AI Predictions: Auto-refreshing data..."),I()},3600*1e3);return()=>clearInterval(S)}},[p]);const ae=S=>{const k=new Date(T);S==="prev"?k.setMonth(k.getMonth()-1):k.setMonth(k.getMonth()+1),O(k)},fe=(S,k,U)=>{new Date(U.getFullYear(),U.getMonth(),1);const R=new Date(U.getFullYear(),U.getMonth()+1,0).getDate(),B=[];for(let Z=1;Z<=R;Z++){const ne=new Date(U.getFullYear(),U.getMonth(),Z),ce=re(ne),xe=ne.getDay()===0||ne.getDay()===6,he=ne.getDay()===0;let Oe=S.length>0?S.length/30:10;xe&&(he?Oe=0:Oe*=.75),ce&&(Oe*=1-ce.reduction+.3),B.push({date:ne,day:F[ne.getDay()],predicted:Math.round(Oe),festival:ce,season:G(ne),isWeekend:xe,isHoliday:he})}return B},L=async()=>{console.log(" Manual refresh triggered - fetching fresh data from backend"),d(!0);try{const{data:S,error:k}=await pe.from("orders").select("*").gte("created_at",new Date(Date.now()-2592e6).toISOString()).order("created_at",{ascending:!1});if(k){console.error(" Error fetching fresh orders:",k),alert("Failed to fetch fresh orders data");return}const{data:U,error:K}=await pe.from("food_items").select("*").order("name",{ascending:!0});if(K){console.error(" Error fetching fresh food items:",K),alert("Failed to fetch fresh food items data");return}console.log(" Fresh data fetched successfully:",{orders:S?.length||0,items:U?.length||0}),e(S||[]),r(U||[]),te(S||[],U||[]),c(new Date),console.log(" AI Predictions panel refreshed with fresh backend data")}catch(S){console.error(" Error during manual refresh:",S),alert("Failed to refresh data from backend")}finally{d(!1)}};return v.jsxs("div",{style:{display:"grid",gap:16},children:[v.jsx(It,{children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"},children:[v.jsxs("div",{children:[v.jsx("h2",{style:{margin:0},children:" AI Predictions & Analytics - Hyderabad"}),v.jsx("p",{style:{margin:"8px 0 0 0",color:"#666",fontSize:"14px"},children:s?`Last updated: ${s.toLocaleString()}`:"No data loaded yet"}),i&&v.jsxs("div",{style:{margin:"8px 0 0 0",fontSize:"14px",color:"#059669"},children:[" ",i.teluguDate.day,", ",i.teluguDate.month," ",i.teluguDate.year,i.festival&&`   ${i.festival}`,i.currentSeason&&`   ${i.currentSeason} season`]})]}),v.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[v.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[v.jsx("label",{style:{fontSize:"14px"},children:"Language:"}),v.jsxs("select",{value:_,onChange:S=>E(S.target.value),style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #ccc"},children:[v.jsx("option",{value:"english",children:"English"}),v.jsx("option",{value:"telugu",children:""})]})]}),v.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[v.jsx("label",{style:{fontSize:"14px"},children:"Period:"}),v.jsxs("select",{value:C,onChange:S=>b(S.target.value),style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #ccc"},children:[v.jsx("option",{value:"tomorrow",children:"Tomorrow"}),v.jsx("option",{value:"day_after",children:"Day After"}),v.jsx("option",{value:"week",children:"Weekly"})]})]}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[v.jsx("input",{type:"checkbox",checked:p,onChange:S=>g(S.target.checked)}),"Auto-refresh (1hr)"]}),v.jsx("button",{className:"btn",onClick:L,disabled:f,style:{minWidth:"100px"},children:f?"Loading...":"Refresh Now"})]})]})}),f&&v.jsx(It,{children:v.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[v.jsx("div",{style:{fontSize:"18px",marginBottom:"8px"},children:""}),v.jsx("div",{children:"Loading AI predictions..."})]})}),i&&v.jsxs(v.Fragment,{children:[v.jsx(It,{title:" Hyderabad Food Analytics & Predictions",children:v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[v.jsxs("div",{style:{backgroundColor:"#f0f9ff",padding:"16px",borderRadius:"8px",border:"1px solid #0ea5e9"},children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0369a1"},children:i.summary.todayOrders}),v.jsx("div",{style:{fontSize:"14px",color:"#0369a1"},children:_==="telugu"?" ":"Orders Today"})]}),v.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"16px",borderRadius:"8px",border:"1px solid #22c55e"},children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#15803d"},children:C==="tomorrow"?i.summary.predictedTomorrow:C==="day_after"?i.summary.predictedDayAfter:i.summary.weeklyAverage}),v.jsx("div",{style:{fontSize:"14px",color:"#15803d"},children:_==="telugu"?C==="tomorrow"?" ":C==="day_after"?"  ":" ":C==="tomorrow"?"Predicted Tomorrow":C==="day_after"?"Day After Tomorrow":"Weekly Average"})]}),v.jsxs("div",{style:{backgroundColor:"#fef3c7",padding:"16px",borderRadius:"8px",border:"1px solid #f59e0b"},children:[v.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#d97706"},children:["",C==="tomorrow"?i.summary.predictedRevenue:C==="day_after"?i.summary.predictedRevenueDayAfter:i.summary.predictedWeeklyRevenue]}),v.jsx("div",{style:{fontSize:"14px",color:"#d97706"},children:_==="telugu"?C==="tomorrow"?" ":C==="day_after"?"  ":" ":C==="tomorrow"?"Predicted Revenue":C==="day_after"?"Day After Revenue":"Weekly Revenue"})]}),v.jsxs("div",{style:{backgroundColor:"#f3e8ff",padding:"16px",borderRadius:"8px",border:"1px solid #a855f7"},children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#7c3aed"},children:i.summary.weekAverage}),v.jsx("div",{style:{fontSize:"14px",color:"#7c3aed"},children:_==="telugu"?" ":"Weekly Average"})]})]})}),v.jsx(It,{title:" Most Popular Items",children:v.jsxs("table",{className:"table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Item"}),v.jsx("th",{children:"Total Orders"}),v.jsx("th",{children:"Avg Price"}),v.jsx("th",{children:"Total Revenue"}),v.jsx("th",{children:"Last Ordered"})]})}),v.jsx("tbody",{children:i.popularItems.map(([S,k],U)=>v.jsxs("tr",{children:[v.jsx("td",{children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsxs("span",{style:{backgroundColor:U===0?"#fbbf24":U===1?"#9ca3af":"#cd7c2f",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:["#",U+1]}),S]})}),v.jsx("td",{children:k.totalOrders}),v.jsxs("td",{children:["",Math.round(k.avgPrice)]}),v.jsxs("td",{children:["",Math.round(k.totalRevenue)]}),v.jsx("td",{children:k.lastOrdered?new Date(k.lastOrdered).toLocaleDateString():"N/A"})]},S))})]})}),v.jsx(It,{title:" Calendar View",children:v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[v.jsxs("div",{style:{backgroundColor:"#1f2937",borderRadius:"12px",padding:"16px",color:"white",fontFamily:"system-ui, -apple-system, sans-serif"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid #374151"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:"white"},children:y.toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"long"})}),_==="telugu"&&v.jsx("div",{style:{fontSize:"14px",color:"#9ca3af",marginTop:"2px"},children:F[y.getDay()]})]}),v.jsx("div",{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:"4px",backgroundColor:"#374151"},children:v.jsx("span",{style:{color:"#9ca3af",fontSize:"12px"},children:""})})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[v.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"white"},children:T.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),v.jsxs("div",{style:{display:"flex",gap:"8px"},children:[v.jsx("button",{onClick:()=>ae("prev"),style:{width:"24px",height:"24px",border:"none",backgroundColor:"#374151",color:"#9ca3af",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),v.jsx("button",{onClick:()=>ae("next"),style:{width:"24px",height:"24px",border:"none",backgroundColor:"#374151",color:"#9ca3af",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]})]}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",marginBottom:"8px"},children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(S=>v.jsx("div",{style:{padding:"8px 4px",textAlign:"center",fontSize:"12px",color:"#9ca3af",fontWeight:"500"},children:_==="telugu"?S==="Su"?"":S==="Mo"?"":S==="Tu"?"":S==="We"?"":S==="Th"?"":S==="Fr"?"":"":S},S))}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px"},children:(()=>{const S=T.getMonth(),k=T.getFullYear(),U=new Date(k,S,1),K=new Date(U);K.setDate(K.getDate()-U.getDay());const R=[];for(let Z=0;Z<42;Z++){const ne=new Date(K);ne.setDate(K.getDate()+Z),R.push(ne)}const B=i?fe(n,t,T):[];return R.map((Z,ne)=>{const ce=Z.getMonth()===S,xe=Z.toDateString()===new Date().toDateString(),he=Z.toDateString()===y.toDateString(),Me=B.find(xt=>xt.date.toDateString()===Z.toDateString()),Oe=Z.getDay()===0,Tt=Z.getDay()===0||Z.getDay()===6,pn=re(Z);return v.jsxs("div",{onClick:()=>x(Z),style:{padding:"8px 4px",textAlign:"center",cursor:"pointer",borderRadius:"6px",backgroundColor:he?"#3b82f6":xe?"#f59e0b":Oe?"#ef4444":Tt?"#8b5cf6":pn?"#f97316":"transparent",color:he||ce?"white":"#6b7280",fontSize:"14px",fontWeight:xe?"bold":"normal",transition:"all 0.2s ease",position:"relative"},children:[v.jsx("div",{style:{marginBottom:"2px"},children:Z.getDate()}),Me&&v.jsx("div",{style:{fontSize:"10px",fontWeight:"bold",color:he?"white":Oe?"#fca5a5":Tt?"#c4b5fd":pn?"#fed7aa":"#10b981"},children:Me.predicted}),pn&&v.jsx("div",{style:{position:"absolute",top:"2px",right:"2px",width:"6px",height:"6px",backgroundColor:"#f59e0b",borderRadius:"50%"}}),Tt&&!Oe&&v.jsx("div",{style:{position:"absolute",top:"2px",left:"2px",width:"6px",height:"6px",backgroundColor:"#8b5cf6",borderRadius:"50%"}})]},ne)})})()}),v.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",fontSize:"10px",marginTop:"12px",padding:"8px",backgroundColor:"#374151",borderRadius:"6px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#f59e0b",borderRadius:"50%"}}),v.jsx("span",{style:{color:"#9ca3af"},children:"Festival"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#8b5cf6",borderRadius:"50%"}}),v.jsx("span",{style:{color:"#9ca3af"},children:"Saturday (Less Non-veg)"})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[v.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%"}}),v.jsx("span",{style:{color:"#9ca3af"},children:"Sunday (Holiday)"})]})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px",paddingTop:"12px",borderTop:"1px solid #374151"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx("button",{style:{width:"20px",height:"20px",border:"none",backgroundColor:"#374151",color:"#9ca3af",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),v.jsx("span",{style:{fontSize:"14px",color:"white"},children:(()=>{const S=i.weeklyPredictions.find(k=>k.date.toDateString()===y.toDateString());return S?`${S.predicted} orders`:"0 orders"})()}),v.jsx("button",{style:{width:"20px",height:"20px",border:"none",backgroundColor:"#374151",color:"#9ca3af",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]}),v.jsxs("button",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:"#374151",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:[v.jsx("span",{children:""}),_==="telugu"?"":"Focus"]})]})]}),v.jsx("div",{children:(()=>{const k=(i?fe(n,t,T):[]).find(U=>U.date.toDateString()===y.toDateString());return k?v.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[v.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"18px"},children:_==="telugu"?"  ":"Selected Day Details"}),v.jsxs("div",{style:{marginBottom:"16px"},children:[v.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937"},children:k.date.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),_==="telugu"&&v.jsx("div",{style:{fontSize:"16px",color:"#6b7280",marginTop:"4px"},children:k.day})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",marginBottom:"16px"},children:[v.jsxs("div",{style:{padding:"12px",backgroundColor:k.isHoliday?"#fef2f2":"#ffffff",borderRadius:"8px",border:`1px solid ${k.isHoliday?"#fca5a5":"#e5e7eb"}`},children:[v.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:_==="telugu"?" ":"Predicted Orders"}),v.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:k.isHoliday?"#dc2626":"#16a34a"},children:k.predicted})]}),v.jsxs("div",{style:{padding:"12px",backgroundColor:"#ffffff",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[v.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:_==="telugu"?" ":"Day Type"}),v.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:k.isHoliday?" Holiday":k.isWeekend?" Saturday (Less Non-veg)":" Weekday"})]})]}),k.festival&&v.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fde047",marginBottom:"16px"},children:[v.jsxs("div",{style:{fontSize:"12px",color:"#d97706",marginBottom:"4px"},children:[" ",_==="telugu"?"":"Festival"]}),v.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#d97706",marginBottom:"4px"},children:k.festival.name}),v.jsxs("div",{style:{fontSize:"14px",color:"#d97706"},children:["Non-veg reduction: ",Math.round(k.festival.reduction*100),"%"]})]}),v.jsxs("div",{style:{padding:"12px",backgroundColor:"#f0fdf4",borderRadius:"8px",border:"1px solid #bbf7d0"},children:[v.jsxs("div",{style:{fontSize:"12px",color:"#16a34a",marginBottom:"4px"},children:[" ",_==="telugu"?"":"Recommendations"]}),v.jsx("div",{style:{fontSize:"14px",color:"#16a34a"},children:k.isHoliday?_==="telugu"?" .   ":"College closed. Focus on maintenance":_==="telugu"?"  -    ":"Normal day - regular staff and stock"})]})]}):null})()})]})}),v.jsx(It,{title:" Weekly Predictions List",children:v.jsx("div",{style:{display:"grid",gap:"12px"},children:i.weeklyPredictions.map((S,k)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",backgroundColor:S.isHoliday?"#fef2f2":S.isWeekend?"#f0f9ff":"#f9fafb",border:`1px solid ${S.isHoliday?"#fca5a5":S.isWeekend?"#0ea5e9":"#e5e7eb"}`,borderRadius:"8px"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[v.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:S.isHoliday?"#dc2626":S.isWeekend?"#0ea5e9":"#6b7280",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold"},children:S.date.getDate()}),v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:"600",fontSize:"16px"},children:_==="telugu"?S.day:S.date.toLocaleDateString("en-US",{weekday:"long"})}),v.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[S.date.toLocaleDateString("en-US",{month:"short",day:"numeric"}),S.festival&&`   ${S.festival.name} (Non-veg -${Math.round(S.festival.reduction*100)}%)`,S.isHoliday&&"   College Holiday",S.isWeekend&&!S.isHoliday&&"   Weekend"]})]})]}),v.jsxs("div",{style:{textAlign:"right"},children:[v.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:S.isHoliday?"#dc2626":S.isWeekend?"#0ea5e9":"#374151"},children:S.predicted}),v.jsx("div",{style:{fontSize:"12px",color:"#666"},children:_==="telugu"?"":"Predicted"})]})]},k))})}),v.jsx(It,{title:" Peak Ordering Hours",children:v.jsx("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:i.peakHours.map((S,k)=>v.jsxs("div",{style:{backgroundColor:k===0?"#fef2f2":k===1?"#fef3c7":"#f0fdf4",border:`1px solid ${k===0?"#fca5a5":k===1?"#fde047":"#bbf7d0"}`,padding:"12px 16px",borderRadius:"8px",textAlign:"center",minWidth:"80px"},children:[v.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:k===0?"#dc2626":k===1?"#d97706":"#16a34a"},children:S}),v.jsx("div",{style:{fontSize:"12px",color:"#666"},children:k===0?"Peak":k===1?"High":"Medium"})]},S))})}),v.jsx(It,{title:" AI Recommendations",children:i.recommendations.length===0?v.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#666",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[v.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),v.jsx("div",{children:"All systems running smoothly! No urgent recommendations."})]}):v.jsx("div",{style:{display:"grid",gap:"16px"},children:["high","medium","low"].map(S=>{const k=i.recommendations.filter(U=>U.priority===S).sort((U,K)=>{const R={low_stock:0,popular_item:1,peak_hours:2};return R[U.type]-R[K.type]});return k.length===0?null:v.jsxs("div",{children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",padding:"8px 12px",backgroundColor:S==="high"?"#fef2f2":S==="medium"?"#fefce8":"#f0fdf4",borderRadius:"6px",border:`1px solid ${S==="high"?"#fca5a5":S==="medium"?"#fde047":"#bbf7d0"}`},children:[v.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:S==="high"?"#dc2626":S==="medium"?"#d97706":"#16a34a",color:"white"},children:S.toUpperCase()}),v.jsx("span",{style:{fontWeight:"600",color:S==="high"?"#dc2626":S==="medium"?"#d97706":"#16a34a"},children:S==="high"?" High Priority Alerts":S==="medium"?" Medium Priority Alerts":" Low Priority Alerts"}),v.jsxs("span",{style:{fontSize:"12px",color:"#666",marginLeft:"auto"},children:[k.length," alert",k.length!==1?"s":""]})]}),v.jsx("div",{style:{display:"grid",gap:"12px"},children:k.map((U,K)=>v.jsxs("div",{style:{padding:"16px",borderRadius:"8px",border:`1px solid ${U.priority==="high"?"#fca5a5":U.priority==="medium"?"#fde047":"#bbf7d0"}`,backgroundColor:U.priority==="high"?"#fef2f2":U.priority==="medium"?"#fefce8":"#f0fdf4"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[v.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:U.priority==="high"?"#dc2626":U.priority==="medium"?"#d97706":"#16a34a",color:"white"},children:U.priority.toUpperCase()}),v.jsx("span",{style:{fontWeight:"600"},children:U.type==="low_stock"?" Stock Alert":U.type==="popular_item"?" Popular Item":U.type==="peak_hours"?" Peak Hours":" Suggestion"})]}),v.jsx("div",{style:{marginBottom:"8px"},children:U.message}),v.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:U.priority==="high"?"#dc2626":U.priority==="medium"?"#d97706":"#16a34a"},children:[" ",U.action]})]},K))})]},S)})})})]}),!i&&!f&&v.jsx(It,{children:v.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[v.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),v.jsx("h3",{style:{margin:"0 0 8px 0"},children:"AI Predictions Ready"}),v.jsx("p",{style:{margin:"0 0 16px 0",color:"#666"},children:'Click "Refresh Now" to load the latest data and generate predictions'}),v.jsx("button",{className:"btn",onClick:L,children:"Load Predictions"})]})})]})}function BI(){const{isEnabled:n,toggleNotifications:e,playTestSound:t,isInitialized:r,showOrderNotification:i}=I1();return v.jsxs("div",{className:"home-dashboard",children:[v.jsxs("div",{className:"card",children:[v.jsx("h2",{style:{marginTop:0},children:"Account"}),v.jsx("div",{className:"actions",style:{justifyContent:"flex-start"},children:v.jsx("button",{className:"btn btn-danger",onClick:()=>{try{localStorage.clear()}catch{}const a=import.meta&&CI&&"/IARE-Canteen-Web/"||"/";window.location.href=a},children:"Log out"})})]}),v.jsxs("div",{className:"card",children:[v.jsx("h2",{children:"Sound Notifications"}),v.jsx("div",{className:"form",children:v.jsxs("div",{className:"field",children:[v.jsx("label",{className:"label",children:"Order Notifications"}),v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsx("button",{className:`btn ${n?"btn-primary":"btn-secondary"}`,onClick:e,disabled:!r,children:n?v.jsxs(v.Fragment,{children:[v.jsx(kO,{className:"w-4 h-4"}),"Enabled"]}):v.jsxs(v.Fragment,{children:[v.jsx(PO,{className:"w-4 h-4"}),"Disabled"]})}),v.jsxs("button",{className:"btn btn-secondary",onClick:()=>{console.log(" Test sound button clicked"),console.log(" isInitialized:",r),console.log(" isEnabled:",n),t()},disabled:!r||!n,children:[v.jsx(pu,{className:"w-4 h-4"}),"Test Sound"]}),v.jsxs("button",{className:"btn btn-secondary",onClick:()=>i({item_name:"Test Order - Chicken Biryani",order_token:"1234",total_amount:150,order_type:"dine_in",order_placer:"customer"}),disabled:!r||!n,children:[v.jsx(pu,{className:"w-4 h-4"}),"Test Popup"]}),v.jsxs("button",{className:"btn btn-secondary",onClick:async()=>{console.log(" Checking recent orders from app...");try{const{data:a,error:s}=await pe.from("orders").select("*").order("created_at",{ascending:!1}).limit(5);if(s){console.error(" Error fetching recent orders:",s);return}console.log(" Recent orders:",a);const c=a.filter(f=>{const d=f.status==="pending"||f.status==="PENDING",p=f.order_placer!=="admin"&&f.order_placer!=="staff"&&f.order_placer!=="counter";return d&&p});if(console.log(" Orders that should trigger notifications:",c),c.length>0){const f=c[0];console.log(" Triggering notification for latest order:",f),await i(f)}else console.log(" No recent orders found that should trigger notifications")}catch(a){console.error(" Error in check recent orders:",a)}},disabled:!r||!n,children:[v.jsx(pu,{className:"w-4 h-4"}),"Check Recent"]})]}),v.jsxs("div",{className:"muted",style:{marginTop:"8px"},children:[v.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px"},children:[v.jsx("strong",{children:"Status:"})," ",r?" Audio Initialized":" Waiting for user interaction",v.jsx("br",{}),v.jsx("strong",{children:"Notifications:"})," ",n?" Enabled":" Disabled",v.jsx("br",{}),v.jsx("strong",{children:"Real-time:"}),"  Connected (Dual subscription system)",v.jsx("br",{}),v.jsx("strong",{children:"Sources:"})," NotificationContext + Orders Panel subscriptions",v.jsx("br",{}),v.jsx("strong",{children:"Filter:"})," Shows notifications for PENDING orders from customers (not admin/staff)",v.jsx("br",{}),v.jsx("strong",{children:"Deduplication:"}),"  Prevents duplicate notifications"]}),r?n?"You will hear a notification sound and see popup alerts when new orders are placed.":"Notifications are disabled. Enable to hear sounds and see popup alerts for new orders.":"Click anywhere on the page to initialize audio permissions."]})]})})]}),v.jsx(LI,{})]})}function LI(){const[n,e]=N.useState(!1),[t,r]=N.useState(null),[i,a]=N.useState(null),[s,c]=N.useState(null),f=async()=>{e(!0),r(null),a(null);try{let y=0,x=[];for(;;){const _=y+1e3-1,{data:E,error:C}=await pe.from("orders").select("*").order("created_at",{ascending:!1}).range(y,_);if(C)throw C;const b=E||[];if(x=x.concat(b),b.length<1e3)break;y+=1e3}r(x),window.__IARE_ORDERS__=x}catch(g){a(g)}finally{e(!1)}},d=()=>{const g="https://znqhoohjugyblgwepovp.supabase.co",y="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY";c({hasUrl:!0,hasKey:!0,urlLength:g?.length||0,keyLength:y?.length||0,urlPreview:`${g.substring(0,20)}...`,keyPreview:`${y.substring(0,20)}...`,isConfigured:!0,urlValue:g,keyValue:y})},p=async()=>{e(!0);try{const g=[{name:"Veg Biryani",price:180},{name:"Masala Dosa",price:80},{name:"Samosa",price:40},{name:"Chicken Biryani",price:200},{name:"Paneer Tikka",price:120},{name:"Dal Khichdi",price:60},{name:"Veg Fried Rice",price:90},{name:"Chicken Curry",price:150}],y=g[Math.floor(Math.random()*g.length)],{data:x,error:_}=await pe.rpc("create_order",{p_item_name:y.name,p_total:y.price,p_status:"PENDING"});_?a(_):(r({message:`Order created with ID: ${x} for ${y.name}`,orderId:x}),setTimeout(()=>{f()},1e3))}catch(g){a(g)}finally{e(!1)}};return v.jsxs("div",{className:"card",children:[v.jsx("h2",{style:{marginTop:0},children:"Debug"}),v.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[v.jsx("button",{className:"btn",onClick:f,disabled:n,children:n?"Fetching...":"Fetch orders from Supabase"}),v.jsx("button",{className:"btn",onClick:p,disabled:n,children:n?"Creating...":"Create Test Order"}),v.jsx("button",{className:"btn",onClick:d,children:"Check Env Vars"}),v.jsx("button",{className:"btn",onClick:()=>{r(null),a(null),c(null)},children:"Clear"})]}),v.jsxs("div",{style:{marginTop:12},children:[s&&v.jsxs("div",{style:{marginBottom:12,padding:8,backgroundColor:"#f3f4f6",borderRadius:4},children:[v.jsx("strong",{children:"Environment Variables:"}),v.jsx("br",{}),"URL: ",s.hasUrl?" Set":" Missing"," (",s.urlPreview,")",v.jsx("br",{}),"Key: ",s.hasKey?" Set":" Missing"," (",s.keyPreview,")",v.jsx("br",{}),"Status: ",s.isConfigured?" Configured":" Not Configured",!s.isConfigured&&v.jsxs("div",{style:{marginTop:8,padding:8,backgroundColor:"#fef3c7",borderRadius:4,fontSize:"12px"},children:[v.jsx("strong",{children:"Setup Required:"}),v.jsx("br",{}),"1. Create a ",v.jsx("code",{children:".env"})," file in the project root",v.jsx("br",{}),"2. Add your Supabase URL and anon key",v.jsx("br",{}),"3. Restart the development server"]})]}),i&&v.jsx("pre",{style:{color:"crimson",whiteSpace:"pre-wrap"},children:String(i.message||i)}),t&&v.jsx("div",{style:{maxHeight:240,overflow:"auto"},children:v.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:JSON.stringify(t,null,2)})}),!t&&!i&&!s&&v.jsx("div",{className:"muted",children:"No result yet. Click fetch to test."})]})]})}function FI(){const n=N.useRef(null),e=N.useRef(null),t=N.useRef(null),[r,i]=N.useState(!1),[a,s]=N.useState(""),[c,f]=N.useState(null),[d,p]=N.useState(null),[g,y]=N.useState(!1),[x,_]=N.useState(!1),[E,C]=N.useState(""),[b,T]=N.useState(0),[O,I]=N.useState(""),[P,F]=N.useState(!1),[H,G]=N.useState(!1);N.useEffect(()=>{(async()=>{try{if(!P){console.log(" Requesting camera permission...");const S=navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),k=new Promise((K,R)=>{setTimeout(()=>R(new Error("Permission request timeout - user may have dismissed popup")),1e4)});(await Promise.race([S,k])).getTracks().forEach(K=>K.stop()),console.log(" Camera permission granted"),F(!0),G(!0)}}catch(S){console.log(" Camera permission denied, dismissed, or error:",S.message),F(!0),G(!1),S.message.includes("timeout")||f(new Error("Camera permission is required to scan QR codes. Please allow camera access and refresh the page."))}})()},[]),N.useEffect(()=>()=>{Q()},[]);const V=li();N.useEffect(()=>{V.pathname!=="/scan"&&(Q(),F(!1))},[V.pathname]),N.useEffect(()=>{const L=()=>{document.hidden&&r&&(console.log(" Page hidden, stopping camera..."),Q())};return document.addEventListener("visibilitychange",L),()=>{document.removeEventListener("visibilitychange",L)}},[r]);const Q=async()=>{try{console.log(" Stopping camera and QR scanner..."),i(!1);try{t.current&&typeof t.current.stop=="function"&&(t.current.stop(),console.log(" Scanner controls stopped"))}catch(S){console.warn(" Error stopping scanner controls:",S)}t.current=null;try{e.current&&typeof e.current.reset=="function"&&(await e.current.reset(),console.log(" QR code reader reset"))}catch(S){console.warn(" Error resetting QR code reader:",S)}e.current=null;const L=n.current;L&&L.srcObject&&(L.srcObject.getTracks().forEach(k=>{k.stop(),console.log(" Camera track stopped:",k.kind)}),L.srcObject=null,console.log(" Camera stream cleared")),console.log(" Camera cleanup completed")}catch(L){console.error(" Error during camera cleanup:",L)}},re=async()=>{f(null),p(null),s(""),I("");try{if(r)return;await Q();try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})).getTracks().forEach(k=>k.stop()),G(!0)}catch{G(!1),f(new Error("Camera permission is required. Please allow camera access and try again."));return}const L=new k6;e.current=L,i(!0),await L.decodeFromVideoDevice(null,n.current,async(S,k,U)=>{try{U&&!t.current&&(t.current=U)}catch{}if(S){const K=String(S.getText()||"");if(console.log("Scanned text:",K),!K||x)return;const R=Date.now();if(E===K&&R-b<1500)return;_(!0),C(K),T(R);try{const B=await ae(K);I(B?"Successfully scanned":"")}finally{_(!1)}}k&&k.name})}catch(L){console.error("Camera start error:",L),f(L),i(!1)}},te=L=>{if(!L)return{};const S=String(L).trim();console.log("Parsing scanned text:",S);const k=/[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i;if(S.startsWith("IARE_"))return console.log("Found encrypted code:",S),{encryptedCode:S};const U=S.match(k);if(U)return console.log("Found UUID order ID:",U[0]),{orderId:U[0]};const K=S.replace(/\D+/g,"");if(K.length>=3&&K.length<=10)return console.log("Found token number:",K),{token:K};try{const B=new URL(S).searchParams,Z=B.get("token")||B.get("id")||B.get("order_id")||B.get("code");if(Z){if(Z.startsWith("IARE_"))return console.log("Found encrypted code in URL params:",Z),{encryptedCode:Z};if(k.test(Z))return console.log("Found UUID in URL params:",Z),{orderId:Z};const ne=Z.replace(/\D+/g,"");if(ne.length>=3&&ne.length<=10)return console.log("Found token in URL params:",ne),{token:ne}}}catch{}return console.log("No valid token, ID, or encrypted code found in:",S),{}},ae=async L=>{f(null),p(null);const{token:S,orderId:k,encryptedCode:U}=te(L);console.log("Parsed token:",S,"orderId:",k,"encryptedCode:",U);try{let K=null;if(U){console.log("Searching by encrypted code:",U);const{data:R,error:B}=await pe.from("orders").select("id,item_name,encrypted_code,order_token,created_at,status,total_amount,order_placer").eq("encrypted_code",U).limit(1).maybeSingle();if(B)throw console.error("Error searching by encrypted code:",B),B;R?(console.log("Found order by encrypted code:",R),K=R):console.log("No order found with encrypted code:",U)}if(!K&&S){console.log("Searching by token:",S);const{data:R,error:B}=await pe.from("orders").select("id,item_name,encrypted_code,order_token,created_at,status,total_amount,order_placer").eq("order_token",S).limit(1).maybeSingle();if(B)throw console.error("Error searching by token:",B),B;R?(console.log("Found order by token:",R),K=R):console.log("No order found with token:",S)}if(!K&&k){console.log("Searching by order ID:",k);const{data:R,error:B}=await pe.from("orders").select("id,item_name,encrypted_code,order_token,created_at,status,total_amount,order_placer").eq("id",k).limit(1).maybeSingle();if(B)throw console.error("Error searching by order ID:",B),B;R?(console.log("Found order by ID:",R),K=R):console.log("No order found with ID:",k)}if(K)return console.log("Setting order:",K),p(K),K;{const R=`No order found for scanned code. Encrypted Code: ${U}, Token: ${S}, Order ID: ${k}`;return console.log(R),f(new Error(R)),null}}catch(K){return console.error("Scan lookup failed:",K),f(K),null}},fe=async L=>{if(d){y(!0);try{const{error:S}=await pe.rpc("update_order_status_flexible",{p_order_id:d.id,p_new_status:String(L).toLowerCase()});if(S)throw S;p(k=>({...k,status:L})),alert(`Updated to ${L}`)}catch(S){alert("Failed to update: "+(S.message||S))}finally{y(!1)}}};return N.useEffect(()=>(re(),()=>{Q()}),[]),v.jsx("div",{style:{display:"grid",gap:16},children:v.jsxs(It,{title:"QR Scanner",children:[!P&&v.jsx("div",{style:{padding:"12px",backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",marginBottom:"16px",color:"#92400e"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx("span",{children:""}),v.jsx("span",{children:"Requesting camera permission..."})]})}),P&&!H&&v.jsx("div",{style:{padding:"12px",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"8px",marginBottom:"16px",color:"#991b1b"},children:v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v.jsx("span",{children:""}),v.jsx("span",{children:'Camera permission not granted. Click "Start Camera" to request permission again.'})]})}),v.jsx("div",{className:"actions",style:{marginBottom:8,justifyContent:"flex-start"},children:v.jsxs("button",{className:"btn",onClick:r?Q:re,children:[r?"Stop":"Start"," Camera"]})}),v.jsxs("div",{style:{marginBottom:16,padding:12,backgroundColor:"#f8fafc",borderRadius:8,border:"1px solid #e2e8f0"},children:[v.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"14px"},children:"Manual Test Input"}),v.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[v.jsx("input",{type:"text",placeholder:"Enter barcode/QR code manually for testing...",style:{flex:1,padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"14px"},onKeyPress:L=>{if(L.key==="Enter"){const S=L.target.value.trim();S&&(console.log("Manual input:",S),ae(S),L.target.value="")}}}),v.jsx("button",{className:"btn",onClick:L=>{const S=L.target.previousElementSibling,k=S.value.trim();k&&(console.log("Manual input:",k),ae(k),S.value="")},style:{fontSize:"12px",padding:"8px 12px"},children:"Test"})]}),v.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:4},children:"Enter an encrypted code (starts with IARE_), token number (e.g., 1234), or order ID, then press Enter or click Test"})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[v.jsxs("div",{children:[v.jsx("video",{ref:n,style:{width:"100%",maxHeight:320,background:"#000",borderRadius:8},muted:!0,playsInline:!0}),O&&v.jsx("div",{className:"muted",style:{marginTop:8,color:"#10b981"},children:O}),c&&v.jsx("div",{className:"muted",style:{color:"crimson",marginTop:8},children:String(c.message||c)})]}),v.jsx("div",{children:d?v.jsxs("div",{children:[v.jsxs("div",{style:{marginBottom:8},children:[v.jsxs("div",{children:["Item Name: ",v.jsx("strong",{children:d.item_name||"Order Item"})]}),v.jsxs("div",{children:["Encrypted Code: ",v.jsx("code",{style:{fontSize:"12px",backgroundColor:"#f3f4f6",padding:"2px 4px",borderRadius:"3px"},children:d.encrypted_code||"Not available"})]}),v.jsxs("div",{children:["Status: ",Ie(d.status)]}),v.jsxs("div",{children:["Price: ",d.total_amount!=null?`${d.total_amount}`:"-"]}),v.jsxs("div",{children:["Token: ",d.order_token?`#${d.order_token}`:"Not available"]}),v.jsxs("div",{children:["Placed By: ",d.order_placer==="admin"?"Counter":"Student"]})]}),v.jsxs("div",{className:"actions",children:[Ie(d.status)==="PENDING"&&v.jsx("button",{className:"btn",disabled:g,onClick:()=>fe("PREPARING"),children:g?"Updating...":"Mark Preparing"}),Ie(d.status)==="PREPARING"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"btn",disabled:g,onClick:()=>fe("READY"),children:g?"Updating...":"Mark Ready"}),v.jsx("button",{className:"btn",disabled:g,onClick:()=>fe("DELIVERED"),children:g?"Updating...":"Mark Delivered"})]}),Ie(d.status)==="READY"&&v.jsx("button",{className:"btn",disabled:g,onClick:()=>fe("DELIVERED"),children:g?"Updating...":"Mark Delivered"})]})]}):v.jsx("div",{className:"muted",children:"Scan a QR that contains an order token or ID."})})]}),v.jsx("div",{className:"muted",style:{marginTop:8},children:"Tip: Your QR can contain encrypted codes (IARE_...), order tokens (e.g., #1234), or order UUIDs."})]})})}function UI(){const{popupNotification:n,closePopupNotification:e}=I1();return n?v.jsx(xr,{children:v.jsx(ht.div,{className:"fixed top-4 right-4 z-50 max-w-sm w-full",initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{type:"spring",stiffness:300,damping:25,duration:.3},children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-green-200 dark:border-green-700 rounded-lg shadow-lg overflow-hidden",style:{borderLeft:"4px solid #10b981",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(16, 185, 129, 0.1)"},children:[v.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 dark:bg-green-900/20",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:v.jsx(pu,{className:"w-4 h-4 text-white"})}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 text-sm",children:n.title}),v.jsx("p",{className:"text-xs text-green-600 dark:text-green-300",children:new Date(n.timestamp).toLocaleTimeString()})]})]}),v.jsx("button",{onClick:e,className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200 transition-colors",children:v.jsx(ri,{className:"w-4 h-4"})})]}),v.jsxs("div",{className:"p-4",children:[v.jsx("p",{className:"text-gray-800 dark:text-gray-200 text-sm leading-relaxed",children:n.message}),n.orderData&&v.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:v.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[n.orderData.total_amount&&v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{children:"Amount:"}),v.jsxs("span",{className:"font-medium",children:["",n.orderData.total_amount]})]}),n.orderData.order_type&&v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{children:"Type:"}),v.jsx("span",{className:"font-medium capitalize",children:n.orderData.order_type})]}),n.orderData.order_placer&&v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{children:"Placed by:"}),v.jsx("span",{className:"font-medium capitalize",children:n.orderData.order_placer})]})]})})]}),v.jsx("div",{className:"h-1 bg-green-200 dark:bg-green-800",children:v.jsx(ht.div,{className:"h-full bg-green-500",initial:{width:"100%"},animate:{width:"0%"},transition:{duration:5,ease:"linear"}})})]})})}):null}hE.createRoot(document.getElementById("root")).render(v.jsx(N.StrictMode,{children:v.jsx(CS,{children:v.jsx(TI,{})})}));
