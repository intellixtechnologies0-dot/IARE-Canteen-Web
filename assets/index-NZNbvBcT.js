(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function ib(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ab(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Rh={exports:{}},ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function L3(){if(fy)return ol;fy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:s,ref:i!==void 0?i:null,props:a}}return ol.Fragment=e,ol.jsx=t,ol.jsxs=t,ol}var hy;function F3(){return hy||(hy=1,Rh.exports=L3()),Rh.exports}var g=F3(),Nh={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function U3(){if(py)return qe;py=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=v&&j[v]||j["@@iterator"],typeof j=="function"?j:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function E(j,G,ie){this.props=j,this.context=G,this.refs=S,this.updater=ie||w}E.prototype.isReactComponent={},E.prototype.setState=function(j,G){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,G,"setState")},E.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function A(){}A.prototype=E.prototype;function T(j,G,ie){this.props=j,this.context=G,this.refs=S,this.updater=ie||w}var R=T.prototype=new A;R.constructor=T,_(R,E.prototype),R.isPureReactComponent=!0;var I=Array.isArray;function M(){}var U={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function q(j,G,ie){var ge=ie.ref;return{$$typeof:n,type:j,key:G,ref:ge!==void 0?ge:null,props:ie}}function ae(j,G){return q(j.type,G,j.props)}function ce(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function F(j){var G={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ie){return G[ie]})}var ee=/\/+/g;function he(j,G){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):G.toString(36)}function _e(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(M,M):(j.status="pending",j.then(function(G){j.status==="pending"&&(j.status="fulfilled",j.value=G)},function(G){j.status==="pending"&&(j.status="rejected",j.reason=G)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function V(j,G,ie,ge,ze){var se=typeof j;(se==="undefined"||se==="boolean")&&(j=null);var we=!1;if(j===null)we=!0;else switch(se){case"bigint":case"string":case"number":we=!0;break;case"object":switch(j.$$typeof){case n:case e:we=!0;break;case p:return we=j._init,V(we(j._payload),G,ie,ge,ze)}}if(we)return ze=ze(j),we=ge===""?"."+he(j,0):ge,I(ze)?(ie="",we!=null&&(ie=we.replace(ee,"$&/")+"/"),V(ze,G,ie,"",function(dt){return dt})):ze!=null&&(ce(ze)&&(ze=ae(ze,ie+(ze.key==null||j&&j.key===ze.key?"":(""+ze.key).replace(ee,"$&/")+"/")+we)),G.push(ze)),1;we=0;var Ce=ge===""?".":ge+":";if(I(j))for(var Me=0;Me<j.length;Me++)ge=j[Me],se=Ce+he(ge,Me),we+=V(ge,G,ie,se,ze);else if(Me=x(j),typeof Me=="function")for(j=Me.call(j),Me=0;!(ge=j.next()).done;)ge=ge.value,se=Ce+he(ge,Me++),we+=V(ge,G,ie,se,ze);else if(se==="object"){if(typeof j.then=="function")return V(_e(j),G,ie,ge,ze);throw G=String(j),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return we}function B(j,G,ie){if(j==null)return j;var ge=[],ze=0;return V(j,ge,"","",function(se){return G.call(ie,se,ze++)}),ge}function W(j){if(j._status===-1){var G=j._result;G=G(),G.then(function(ie){(j._status===0||j._status===-1)&&(j._status=1,j._result=ie)},function(ie){(j._status===0||j._status===-1)&&(j._status=2,j._result=ie)}),j._status===-1&&(j._status=0,j._result=G)}if(j._status===1)return j._result.default;throw j._result}var de=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},pe={map:B,forEach:function(j,G,ie){B(j,function(){G.apply(this,arguments)},ie)},count:function(j){var G=0;return B(j,function(){G++}),G},toArray:function(j){return B(j,function(G){return G})||[]},only:function(j){if(!ce(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return qe.Activity=m,qe.Children=pe,qe.Component=E,qe.Fragment=t,qe.Profiler=i,qe.PureComponent=T,qe.StrictMode=r,qe.Suspense=d,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,qe.__COMPILER_RUNTIME={__proto__:null,c:function(j){return U.H.useMemoCache(j)}},qe.cache=function(j){return function(){return j.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(j,G,ie){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ge=_({},j.props),ze=j.key;if(G!=null)for(se in G.key!==void 0&&(ze=""+G.key),G)!H.call(G,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&G.ref===void 0||(ge[se]=G[se]);var se=arguments.length-2;if(se===1)ge.children=ie;else if(1<se){for(var we=Array(se),Ce=0;Ce<se;Ce++)we[Ce]=arguments[Ce+2];ge.children=we}return q(j.type,ze,ge)},qe.createContext=function(j){return j={$$typeof:s,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:a,_context:j},j},qe.createElement=function(j,G,ie){var ge,ze={},se=null;if(G!=null)for(ge in G.key!==void 0&&(se=""+G.key),G)H.call(G,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(ze[ge]=G[ge]);var we=arguments.length-2;if(we===1)ze.children=ie;else if(1<we){for(var Ce=Array(we),Me=0;Me<we;Me++)Ce[Me]=arguments[Me+2];ze.children=Ce}if(j&&j.defaultProps)for(ge in we=j.defaultProps,we)ze[ge]===void 0&&(ze[ge]=we[ge]);return q(j,se,ze)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(j){return{$$typeof:c,render:j}},qe.isValidElement=ce,qe.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:W}},qe.memo=function(j,G){return{$$typeof:f,type:j,compare:G===void 0?null:G}},qe.startTransition=function(j){var G=U.T,ie={};U.T=ie;try{var ge=j(),ze=U.S;ze!==null&&ze(ie,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(M,de)}catch(se){de(se)}finally{G!==null&&ie.types!==null&&(G.types=ie.types),U.T=G}},qe.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},qe.use=function(j){return U.H.use(j)},qe.useActionState=function(j,G,ie){return U.H.useActionState(j,G,ie)},qe.useCallback=function(j,G){return U.H.useCallback(j,G)},qe.useContext=function(j){return U.H.useContext(j)},qe.useDebugValue=function(){},qe.useDeferredValue=function(j,G){return U.H.useDeferredValue(j,G)},qe.useEffect=function(j,G){return U.H.useEffect(j,G)},qe.useEffectEvent=function(j){return U.H.useEffectEvent(j)},qe.useId=function(){return U.H.useId()},qe.useImperativeHandle=function(j,G,ie){return U.H.useImperativeHandle(j,G,ie)},qe.useInsertionEffect=function(j,G){return U.H.useInsertionEffect(j,G)},qe.useLayoutEffect=function(j,G){return U.H.useLayoutEffect(j,G)},qe.useMemo=function(j,G){return U.H.useMemo(j,G)},qe.useOptimistic=function(j,G){return U.H.useOptimistic(j,G)},qe.useReducer=function(j,G,ie){return U.H.useReducer(j,G,ie)},qe.useRef=function(j){return U.H.useRef(j)},qe.useState=function(j){return U.H.useState(j)},qe.useSyncExternalStore=function(j,G,ie){return U.H.useSyncExternalStore(j,G,ie)},qe.useTransition=function(){return U.H.useTransition()},qe.version="19.2.0",qe}var gy;function f1(){return gy||(gy=1,Nh.exports=U3()),Nh.exports}var O=f1();const ob=ib(O);var Ih={exports:{}},sl={},Dh={exports:{}},kh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function z3(){return my||(my=1,(function(n){function e(V,B){var W=V.length;V.push(B);e:for(;0<W;){var de=W-1>>>1,pe=V[de];if(0<i(pe,B))V[de]=B,V[W]=pe,W=de;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var B=V[0],W=V.pop();if(W!==B){V[0]=W;e:for(var de=0,pe=V.length,j=pe>>>1;de<j;){var G=2*(de+1)-1,ie=V[G],ge=G+1,ze=V[ge];if(0>i(ie,W))ge<pe&&0>i(ze,ie)?(V[de]=ze,V[ge]=W,de=ge):(V[de]=ie,V[G]=W,de=G);else if(ge<pe&&0>i(ze,W))V[de]=ze,V[ge]=W,de=ge;else break e}}return B}function i(V,B){var W=V.sortIndex-B.sortIndex;return W!==0?W:V.id-B.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();n.unstable_now=function(){return s.now()-c}}var d=[],f=[],p=1,m=null,v=3,x=!1,w=!1,_=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function R(V){for(var B=t(f);B!==null;){if(B.callback===null)r(f);else if(B.startTime<=V)r(f),B.sortIndex=B.expirationTime,e(d,B);else break;B=t(f)}}function I(V){if(_=!1,R(V),!w)if(t(d)!==null)w=!0,M||(M=!0,F());else{var B=t(f);B!==null&&_e(I,B.startTime-V)}}var M=!1,U=-1,H=5,q=-1;function ae(){return S?!0:!(n.unstable_now()-q<H)}function ce(){if(S=!1,M){var V=n.unstable_now();q=V;var B=!0;try{e:{w=!1,_&&(_=!1,A(U),U=-1),x=!0;var W=v;try{t:{for(R(V),m=t(d);m!==null&&!(m.expirationTime>V&&ae());){var de=m.callback;if(typeof de=="function"){m.callback=null,v=m.priorityLevel;var pe=de(m.expirationTime<=V);if(V=n.unstable_now(),typeof pe=="function"){m.callback=pe,R(V),B=!0;break t}m===t(d)&&r(d),R(V)}else r(d);m=t(d)}if(m!==null)B=!0;else{var j=t(f);j!==null&&_e(I,j.startTime-V),B=!1}}break e}finally{m=null,v=W,x=!1}B=void 0}}finally{B?F():M=!1}}}var F;if(typeof T=="function")F=function(){T(ce)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,he=ee.port2;ee.port1.onmessage=ce,F=function(){he.postMessage(null)}}else F=function(){E(ce,0)};function _e(V,B){U=E(function(){V(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(V){switch(v){case 1:case 2:case 3:var B=3;break;default:B=v}var W=v;v=B;try{return V()}finally{v=W}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(V,B){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var W=v;v=V;try{return B()}finally{v=W}},n.unstable_scheduleCallback=function(V,B,W){var de=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?de+W:de):W=de,V){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=W+pe,V={id:p++,callback:B,priorityLevel:V,startTime:W,expirationTime:pe,sortIndex:-1},W>de?(V.sortIndex=W,e(f,V),t(d)===null&&V===t(f)&&(_?(A(U),U=-1):_=!0,_e(I,W-de))):(V.sortIndex=pe,e(d,V),w||x||(w=!0,M||(M=!0,F()))),V},n.unstable_shouldYield=ae,n.unstable_wrapCallback=function(V){var B=v;return function(){var W=v;v=B;try{return V.apply(this,arguments)}finally{v=W}}}})(kh)),kh}var vy;function V3(){return vy||(vy=1,Dh.exports=z3()),Dh.exports}var jh={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function H3(){if(yy)return jn;yy=1;var n=f1();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:f,implementation:p}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,jn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,p)},jn.flushSync=function(d){var f=s.T,p=r.p;try{if(s.T=null,r.p=2,d)return d()}finally{s.T=f,r.p=p,r.d.f()}},jn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},jn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},jn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,m=c(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:x}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:v,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},jn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},jn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=c(p,f.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},jn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},jn.requestFormReset=function(d){r.d.r(d)},jn.unstable_batchedUpdates=function(d,f){return d(f)},jn.useFormState=function(d,f,p){return s.H.useFormState(d,f,p)},jn.useFormStatus=function(){return s.H.useHostTransitionStatus()},jn.version="19.2.0",jn}var xy;function sb(){if(xy)return jh.exports;xy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jh.exports=H3(),jh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function $3(){if(by)return sl;by=1;var n=V3(),e=f1(),t=sb();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var l=o,u=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(u=l.return),o=l.return;while(o)}return l.tag===3?u:null}function s(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function d(o){if(a(o)!==o)throw Error(r(188))}function f(o){var l=o.alternate;if(!l){if(l=a(o),l===null)throw Error(r(188));return l!==o?null:o}for(var u=o,h=l;;){var y=u.return;if(y===null)break;var b=y.alternate;if(b===null){if(h=y.return,h!==null){u=h;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===u)return d(y),o;if(b===h)return d(y),l;b=b.sibling}throw Error(r(188))}if(u.return!==h.return)u=y,h=b;else{for(var C=!1,N=y.child;N;){if(N===u){C=!0,u=y,h=b;break}if(N===h){C=!0,h=y,u=b;break}N=N.sibling}if(!C){for(N=b.child;N;){if(N===u){C=!0,u=b,h=y;break}if(N===h){C=!0,h=b,u=y;break}N=N.sibling}if(!C)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?o:l}function p(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=p(o),l!==null)return l;o=o.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function F(o){return o===null||typeof o!="object"?null:(o=ce&&o[ce]||o["@@iterator"],typeof o=="function"?o:null)}var ee=Symbol.for("react.client.reference");function he(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ee?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _:return"Fragment";case E:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case M:return"SuspenseList";case q:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case w:return"Portal";case T:return o.displayName||"Context";case A:return(o._context.displayName||"Context")+".Consumer";case R:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case U:return l=o.displayName||null,l!==null?l:he(o.type)||"Memo";case H:l=o._payload,o=o._init;try{return he(o(l))}catch{}}return null}var _e=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},de=[],pe=-1;function j(o){return{current:o}}function G(o){0>pe||(o.current=de[pe],de[pe]=null,pe--)}function ie(o,l){pe++,de[pe]=o.current,o.current=l}var ge=j(null),ze=j(null),se=j(null),we=j(null);function Ce(o,l){switch(ie(se,l),ie(ze,o),ie(ge,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?Mv(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=Mv(l),o=Pv(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}G(ge),ie(ge,o)}function Me(){G(ge),G(ze),G(se)}function dt(o){o.memoizedState!==null&&ie(we,o);var l=ge.current,u=Pv(l,o.type);l!==u&&(ie(ze,o),ie(ge,u))}function Ne(o){ze.current===o&&(G(ge),G(ze)),we.current===o&&(G(we),nl._currentValue=W)}var Te,D;function P(o){if(Te===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);Te=l&&l[1]||"",D=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+o+D}var Y=!1;function fe(o,l){if(!o||Y)return"";Y=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(l){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(te){var J=te}Reflect.construct(o,[],ue)}else{try{ue.call()}catch(te){J=te}o.call(ue.prototype)}}else{try{throw Error()}catch(te){J=te}(ue=o())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(te){if(te&&J&&typeof te.stack=="string")return[te.stack,J.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),C=b[0],N=b[1];if(C&&N){var L=C.split(`
`),Q=N.split(`
`);for(y=h=0;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;for(;y<Q.length&&!Q[y].includes("DetermineComponentFrameRoot");)y++;if(h===L.length||y===Q.length)for(h=L.length-1,y=Q.length-1;1<=h&&0<=y&&L[h]!==Q[y];)y--;for(;1<=h&&0<=y;h--,y--)if(L[h]!==Q[y]){if(h!==1||y!==1)do if(h--,y--,0>y||L[h]!==Q[y]){var re=`
`+L[h].replace(" at new "," at ");return o.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",o.displayName)),re}while(1<=h&&0<=y);break}}}finally{Y=!1,Error.prepareStackTrace=u}return(u=o?o.displayName||o.name:"")?P(u):""}function Ae(o,l){switch(o.tag){case 26:case 27:case 5:return P(o.type);case 16:return P("Lazy");case 13:return o.child!==l&&l!==null?P("Suspense Fallback"):P("Suspense");case 19:return P("SuspenseList");case 0:case 15:return fe(o.type,!1);case 11:return fe(o.type.render,!1);case 1:return fe(o.type,!0);case 31:return P("Activity");default:return""}}function Be(o){try{var l="",u=null;do l+=Ae(o,u),u=o,o=o.return;while(o);return l}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ie=Object.prototype.hasOwnProperty,Ee=n.unstable_scheduleCallback,He=n.unstable_cancelCallback,et=n.unstable_shouldYield,ft=n.unstable_requestPaint,it=n.unstable_now,Ke=n.unstable_getCurrentPriorityLevel,z=n.unstable_ImmediatePriority,le=n.unstable_UserBlockingPriority,ve=n.unstable_NormalPriority,Oe=n.unstable_LowPriority,Se=n.unstable_IdlePriority,me=n.log,ye=n.unstable_setDisableYieldValue,Ze=null,tt=null;function Le(o){if(typeof me=="function"&&ye(o),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(Ze,o)}catch{}}var wt=Math.clz32?Math.clz32:da,Vt=Math.log,pr=Math.LN2;function da(o){return o>>>=0,o===0?32:31-(Vt(o)/pr|0)|0}var Ti=256,Wl=262144,Xl=4194304;function fa(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Yl(o,l,u){var h=o.pendingLanes;if(h===0)return 0;var y=0,b=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var N=h&134217727;return N!==0?(h=N&~b,h!==0?y=fa(h):(C&=N,C!==0?y=fa(C):u||(u=N&~o,u!==0&&(y=fa(u))))):(N=h&~b,N!==0?y=fa(N):C!==0?y=fa(C):u||(u=h&~o,u!==0&&(y=fa(u)))),y===0?0:l!==0&&l!==y&&(l&b)===0&&(b=y&-y,u=l&-l,b>=u||b===32&&(u&4194048)!==0)?l:y}function gs(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function CS(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mp(){var o=Xl;return Xl<<=1,(Xl&62914560)===0&&(Xl=4194304),o}function md(o){for(var l=[],u=0;31>u;u++)l.push(o);return l}function ms(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function AS(o,l,u,h,y,b){var C=o.pendingLanes;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=u,o.entangledLanes&=u,o.errorRecoveryDisabledLanes&=u,o.shellSuspendCounter=0;var N=o.entanglements,L=o.expirationTimes,Q=o.hiddenUpdates;for(u=C&~u;0<u;){var re=31-wt(u),ue=1<<re;N[re]=0,L[re]=-1;var J=Q[re];if(J!==null)for(Q[re]=null,re=0;re<J.length;re++){var te=J[re];te!==null&&(te.lane&=-536870913)}u&=~ue}h!==0&&vp(o,h,0),b!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=b&~(C&~l))}function vp(o,l,u){o.pendingLanes|=l,o.suspendedLanes&=~l;var h=31-wt(l);o.entangledLanes|=l,o.entanglements[h]=o.entanglements[h]|1073741824|u&261930}function yp(o,l){var u=o.entangledLanes|=l;for(o=o.entanglements;u;){var h=31-wt(u),y=1<<h;y&l|o[h]&l&&(o[h]|=l),u&=~y}}function xp(o,l){var u=l&-l;return u=(u&42)!==0?1:vd(u),(u&(o.suspendedLanes|l))!==0?0:u}function vd(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function yd(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function bp(){var o=B.p;return o!==0?o:(o=window.event,o===void 0?32:ay(o.type))}function wp(o,l){var u=B.p;try{return B.p=o,l()}finally{B.p=u}}var Oi=Math.random().toString(36).slice(2),En="__reactFiber$"+Oi,$n="__reactProps$"+Oi,Ka="__reactContainer$"+Oi,xd="__reactEvents$"+Oi,TS="__reactListeners$"+Oi,OS="__reactHandles$"+Oi,_p="__reactResources$"+Oi,vs="__reactMarker$"+Oi;function bd(o){delete o[En],delete o[$n],delete o[xd],delete o[TS],delete o[OS]}function Za(o){var l=o[En];if(l)return l;for(var u=o.parentNode;u;){if(l=u[Ka]||u[En]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(o=Hv(o);o!==null;){if(u=o[En])return u;o=Hv(o)}return l}o=u,u=o.parentNode}return null}function Qa(o){if(o=o[En]||o[Ka]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function ys(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function Ja(o){var l=o[_p];return l||(l=o[_p]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function xn(o){o[vs]=!0}var Sp=new Set,Ep={};function ha(o,l){eo(o,l),eo(o+"Capture",l)}function eo(o,l){for(Ep[o]=l,o=0;o<l.length;o++)Sp.add(l[o])}var RS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cp={},Ap={};function NS(o){return Ie.call(Ap,o)?!0:Ie.call(Cp,o)?!1:RS.test(o)?Ap[o]=!0:(Cp[o]=!0,!1)}function Kl(o,l,u){if(NS(l))if(u===null)o.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var h=l.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+u)}}function Zl(o,l,u){if(u===null)o.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+u)}}function ti(o,l,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttributeNS(l,u,""+h)}}function gr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Tp(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function IS(o,l,u){var h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,b=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(C){u=""+C,b.call(this,C)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function wd(o){if(!o._valueTracker){var l=Tp(o)?"checked":"value";o._valueTracker=IS(o,l,""+o[l])}}function Op(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var u=l.getValue(),h="";return o&&(h=Tp(o)?o.checked?"true":"false":o.value),o=h,o!==u?(l.setValue(o),!0):!1}function Ql(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var DS=/[\n"\\]/g;function mr(o){return o.replace(DS,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function _d(o,l,u,h,y,b,C,N){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),l!=null?C==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+gr(l)):o.value!==""+gr(l)&&(o.value=""+gr(l)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),l!=null?Sd(o,C,gr(l)):u!=null?Sd(o,C,gr(u)):h!=null&&o.removeAttribute("value"),y==null&&b!=null&&(o.defaultChecked=!!b),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?o.name=""+gr(N):o.removeAttribute("name")}function Rp(o,l,u,h,y,b,C,N){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(o.type=b),l!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||l!=null)){wd(o);return}u=u!=null?""+gr(u):"",l=l!=null?""+gr(l):u,N||l===o.value||(o.value=l),o.defaultValue=l}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,o.checked=N?o.checked:!!h,o.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C),wd(o)}function Sd(o,l,u){l==="number"&&Ql(o.ownerDocument)===o||o.defaultValue===""+u||(o.defaultValue=""+u)}function to(o,l,u,h){if(o=o.options,l){l={};for(var y=0;y<u.length;y++)l["$"+u[y]]=!0;for(u=0;u<o.length;u++)y=l.hasOwnProperty("$"+o[u].value),o[u].selected!==y&&(o[u].selected=y),y&&h&&(o[u].defaultSelected=!0)}else{for(u=""+gr(u),l=null,y=0;y<o.length;y++){if(o[y].value===u){o[y].selected=!0,h&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function Np(o,l,u){if(l!=null&&(l=""+gr(l),l!==o.value&&(o.value=l),u==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=u!=null?""+gr(u):""}function Ip(o,l,u,h){if(l==null){if(h!=null){if(u!=null)throw Error(r(92));if(_e(h)){if(1<h.length)throw Error(r(93));h=h[0]}u=h}u==null&&(u=""),l=u}u=gr(l),o.defaultValue=u,h=o.textContent,h===u&&h!==""&&h!==null&&(o.value=h),wd(o)}function no(o,l){if(l){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=l;return}}o.textContent=l}var kS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dp(o,l,u){var h=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":h?o.setProperty(l,u):typeof u!="number"||u===0||kS.has(l)?l==="float"?o.cssFloat=u:o[l]=(""+u).trim():o[l]=u+"px"}function kp(o,l,u){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||l!=null&&l.hasOwnProperty(h)||(h.indexOf("--")===0?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="");for(var y in l)h=l[y],l.hasOwnProperty(y)&&u[y]!==h&&Dp(o,y,h)}else for(var b in l)l.hasOwnProperty(b)&&Dp(o,b,l[b])}function Ed(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),MS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jl(o){return MS.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ni(){}var Cd=null;function Ad(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ro=null,io=null;function jp(o){var l=Qa(o);if(l&&(o=l.stateNode)){var u=o[$n]||null;e:switch(o=l.stateNode,l.type){case"input":if(_d(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+mr(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var h=u[l];if(h!==o&&h.form===o.form){var y=h[$n]||null;if(!y)throw Error(r(90));_d(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<u.length;l++)h=u[l],h.form===o.form&&Op(h)}break e;case"textarea":Np(o,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&to(o,!!u.multiple,l,!1)}}}var Td=!1;function Mp(o,l,u){if(Td)return o(l,u);Td=!0;try{var h=o(l);return h}finally{if(Td=!1,(ro!==null||io!==null)&&(Uc(),ro&&(l=ro,o=io,io=ro=null,jp(l),o)))for(l=0;l<o.length;l++)jp(o[l])}}function xs(o,l){var u=o.stateNode;if(u===null)return null;var h=u[$n]||null;if(h===null)return null;u=h[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(o=o.type,h=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!h;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(r(231,l,typeof u));return u}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=!1;if(ri)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){Od=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{Od=!1}var Ri=null,Rd=null,ec=null;function Pp(){if(ec)return ec;var o,l=Rd,u=l.length,h,y="value"in Ri?Ri.value:Ri.textContent,b=y.length;for(o=0;o<u&&l[o]===y[o];o++);var C=u-o;for(h=1;h<=C&&l[u-h]===y[b-h];h++);return ec=y.slice(o,1<h?1-h:void 0)}function tc(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function nc(){return!0}function Bp(){return!1}function Gn(o){function l(u,h,y,b,C){this._reactName=u,this._targetInst=y,this.type=h,this.nativeEvent=b,this.target=C,this.currentTarget=null;for(var N in o)o.hasOwnProperty(N)&&(u=o[N],this[N]=u?u(b):b[N]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?nc:Bp,this.isPropagationStopped=Bp,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=nc)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=nc)},persist:function(){},isPersistent:nc}),l}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rc=Gn(pa),ws=m({},pa,{view:0,detail:0}),PS=Gn(ws),Nd,Id,_s,ic=m({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==_s&&(_s&&o.type==="mousemove"?(Nd=o.screenX-_s.screenX,Id=o.screenY-_s.screenY):Id=Nd=0,_s=o),Nd)},movementY:function(o){return"movementY"in o?o.movementY:Id}}),Lp=Gn(ic),BS=m({},ic,{dataTransfer:0}),LS=Gn(BS),FS=m({},ws,{relatedTarget:0}),Dd=Gn(FS),US=m({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),zS=Gn(US),VS=m({},pa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),HS=Gn(VS),$S=m({},pa,{data:0}),Fp=Gn($S),GS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XS(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=WS[o])?!!l[o]:!1}function kd(){return XS}var YS=m({},ws,{key:function(o){if(o.key){var l=GS[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=tc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?qS[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kd,charCode:function(o){return o.type==="keypress"?tc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?tc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),KS=Gn(YS),ZS=m({},ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Up=Gn(ZS),QS=m({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kd}),JS=Gn(QS),eE=m({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),tE=Gn(eE),nE=m({},ic,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),rE=Gn(nE),iE=m({},pa,{newState:0,oldState:0}),aE=Gn(iE),oE=[9,13,27,32],jd=ri&&"CompositionEvent"in window,Ss=null;ri&&"documentMode"in document&&(Ss=document.documentMode);var sE=ri&&"TextEvent"in window&&!Ss,zp=ri&&(!jd||Ss&&8<Ss&&11>=Ss),Vp=" ",Hp=!1;function $p(o,l){switch(o){case"keyup":return oE.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gp(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ao=!1;function lE(o,l){switch(o){case"compositionend":return Gp(l);case"keypress":return l.which!==32?null:(Hp=!0,Vp);case"textInput":return o=l.data,o===Vp&&Hp?null:o;default:return null}}function cE(o,l){if(ao)return o==="compositionend"||!jd&&$p(o,l)?(o=Pp(),ec=Rd=Ri=null,ao=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return zp&&l.locale!=="ko"?null:l.data;default:return null}}var uE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!uE[o.type]:l==="textarea"}function Wp(o,l,u,h){ro?io?io.push(h):io=[h]:ro=h,l=Wc(l,"onChange"),0<l.length&&(u=new rc("onChange","change",null,u,h),o.push({event:u,listeners:l}))}var Es=null,Cs=null;function dE(o){Rv(o,0)}function ac(o){var l=ys(o);if(Op(l))return o}function Xp(o,l){if(o==="change")return l}var Yp=!1;if(ri){var Md;if(ri){var Pd="oninput"in document;if(!Pd){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),Pd=typeof Kp.oninput=="function"}Md=Pd}else Md=!1;Yp=Md&&(!document.documentMode||9<document.documentMode)}function Zp(){Es&&(Es.detachEvent("onpropertychange",Qp),Cs=Es=null)}function Qp(o){if(o.propertyName==="value"&&ac(Cs)){var l=[];Wp(l,Cs,o,Ad(o)),Mp(dE,l)}}function fE(o,l,u){o==="focusin"?(Zp(),Es=l,Cs=u,Es.attachEvent("onpropertychange",Qp)):o==="focusout"&&Zp()}function hE(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ac(Cs)}function pE(o,l){if(o==="click")return ac(l)}function gE(o,l){if(o==="input"||o==="change")return ac(l)}function mE(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var tr=typeof Object.is=="function"?Object.is:mE;function As(o,l){if(tr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var u=Object.keys(o),h=Object.keys(l);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var y=u[h];if(!Ie.call(l,y)||!tr(o[y],l[y]))return!1}return!0}function Jp(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function eg(o,l){var u=Jp(o);o=0;for(var h;u;){if(u.nodeType===3){if(h=o+u.textContent.length,o<=l&&h>=l)return{node:u,offset:l-o};o=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Jp(u)}}function tg(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?tg(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function ng(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Ql(o.document);l instanceof o.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)o=l.contentWindow;else break;l=Ql(o.document)}return l}function Bd(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var vE=ri&&"documentMode"in document&&11>=document.documentMode,oo=null,Ld=null,Ts=null,Fd=!1;function rg(o,l,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Fd||oo==null||oo!==Ql(h)||(h=oo,"selectionStart"in h&&Bd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ts&&As(Ts,h)||(Ts=h,h=Wc(Ld,"onSelect"),0<h.length&&(l=new rc("onSelect","select",null,l,u),o.push({event:l,listeners:h}),l.target=oo)))}function ga(o,l){var u={};return u[o.toLowerCase()]=l.toLowerCase(),u["Webkit"+o]="webkit"+l,u["Moz"+o]="moz"+l,u}var so={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionrun:ga("Transition","TransitionRun"),transitionstart:ga("Transition","TransitionStart"),transitioncancel:ga("Transition","TransitionCancel"),transitionend:ga("Transition","TransitionEnd")},Ud={},ig={};ri&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function ma(o){if(Ud[o])return Ud[o];if(!so[o])return o;var l=so[o],u;for(u in l)if(l.hasOwnProperty(u)&&u in ig)return Ud[o]=l[u];return o}var ag=ma("animationend"),og=ma("animationiteration"),sg=ma("animationstart"),yE=ma("transitionrun"),xE=ma("transitionstart"),bE=ma("transitioncancel"),lg=ma("transitionend"),cg=new Map,zd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zd.push("scrollEnd");function Dr(o,l){cg.set(o,l),ha(l,[o])}var oc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},vr=[],lo=0,Vd=0;function sc(){for(var o=lo,l=Vd=lo=0;l<o;){var u=vr[l];vr[l++]=null;var h=vr[l];vr[l++]=null;var y=vr[l];vr[l++]=null;var b=vr[l];if(vr[l++]=null,h!==null&&y!==null){var C=h.pending;C===null?y.next=y:(y.next=C.next,C.next=y),h.pending=y}b!==0&&ug(u,y,b)}}function lc(o,l,u,h){vr[lo++]=o,vr[lo++]=l,vr[lo++]=u,vr[lo++]=h,Vd|=h,o.lanes|=h,o=o.alternate,o!==null&&(o.lanes|=h)}function Hd(o,l,u,h){return lc(o,l,u,h),cc(o)}function va(o,l){return lc(o,null,null,l),cc(o)}function ug(o,l,u){o.lanes|=u;var h=o.alternate;h!==null&&(h.lanes|=u);for(var y=!1,b=o.return;b!==null;)b.childLanes|=u,h=b.alternate,h!==null&&(h.childLanes|=u),b.tag===22&&(o=b.stateNode,o===null||o._visibility&1||(y=!0)),o=b,b=b.return;return o.tag===3?(b=o.stateNode,y&&l!==null&&(y=31-wt(u),o=b.hiddenUpdates,h=o[y],h===null?o[y]=[l]:h.push(l),l.lane=u|536870912),b):null}function cc(o){if(50<Ys)throw Ys=0,Jf=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var co={};function wE(o,l,u,h){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(o,l,u,h){return new wE(o,l,u,h)}function $d(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ii(o,l){var u=o.alternate;return u===null?(u=nr(o.tag,l,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=l,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&65011712,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,l=o.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u.refCleanup=o.refCleanup,u}function dg(o,l){o.flags&=65011714;var u=o.alternate;return u===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,l=u.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function uc(o,l,u,h,y,b){var C=0;if(h=o,typeof o=="function")$d(o)&&(C=1);else if(typeof o=="string")C=A3(o,u,ge.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case q:return o=nr(31,u,l,y),o.elementType=q,o.lanes=b,o;case _:return ya(u.children,y,b,l);case S:C=8,y|=24;break;case E:return o=nr(12,u,l,y|2),o.elementType=E,o.lanes=b,o;case I:return o=nr(13,u,l,y),o.elementType=I,o.lanes=b,o;case M:return o=nr(19,u,l,y),o.elementType=M,o.lanes=b,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case T:C=10;break e;case A:C=9;break e;case R:C=11;break e;case U:C=14;break e;case H:C=16,h=null;break e}C=29,u=Error(r(130,o===null?"null":typeof o,"")),h=null}return l=nr(C,u,l,y),l.elementType=o,l.type=h,l.lanes=b,l}function ya(o,l,u,h){return o=nr(7,o,h,l),o.lanes=u,o}function Gd(o,l,u){return o=nr(6,o,null,l),o.lanes=u,o}function fg(o){var l=nr(18,null,null,0);return l.stateNode=o,l}function qd(o,l,u){return l=nr(4,o.children!==null?o.children:[],o.key,l),l.lanes=u,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var hg=new WeakMap;function yr(o,l){if(typeof o=="object"&&o!==null){var u=hg.get(o);return u!==void 0?u:(l={value:o,source:l,stack:Be(l)},hg.set(o,l),l)}return{value:o,source:l,stack:Be(l)}}var uo=[],fo=0,dc=null,Os=0,xr=[],br=0,Ni=null,$r=1,Gr="";function ai(o,l){uo[fo++]=Os,uo[fo++]=dc,dc=o,Os=l}function pg(o,l,u){xr[br++]=$r,xr[br++]=Gr,xr[br++]=Ni,Ni=o;var h=$r;o=Gr;var y=32-wt(h)-1;h&=~(1<<y),u+=1;var b=32-wt(l)+y;if(30<b){var C=y-y%5;b=(h&(1<<C)-1).toString(32),h>>=C,y-=C,$r=1<<32-wt(l)+y|u<<y|h,Gr=b+o}else $r=1<<b|u<<y|h,Gr=o}function Wd(o){o.return!==null&&(ai(o,1),pg(o,1,0))}function Xd(o){for(;o===dc;)dc=uo[--fo],uo[fo]=null,Os=uo[--fo],uo[fo]=null;for(;o===Ni;)Ni=xr[--br],xr[br]=null,Gr=xr[--br],xr[br]=null,$r=xr[--br],xr[br]=null}function gg(o,l){xr[br++]=$r,xr[br++]=Gr,xr[br++]=Ni,$r=l.id,Gr=l.overflow,Ni=o}var Cn=null,Pt=null,ct=!1,Ii=null,wr=!1,Yd=Error(r(519));function Di(o){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rs(yr(l,o)),Yd}function mg(o){var l=o.stateNode,u=o.type,h=o.memoizedProps;switch(l[En]=o,l[$n]=h,u){case"dialog":ot("cancel",l),ot("close",l);break;case"iframe":case"object":case"embed":ot("load",l);break;case"video":case"audio":for(u=0;u<Zs.length;u++)ot(Zs[u],l);break;case"source":ot("error",l);break;case"img":case"image":case"link":ot("error",l),ot("load",l);break;case"details":ot("toggle",l);break;case"input":ot("invalid",l),Rp(l,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":ot("invalid",l);break;case"textarea":ot("invalid",l),Ip(l,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||h.suppressHydrationWarning===!0||kv(l.textContent,u)?(h.popover!=null&&(ot("beforetoggle",l),ot("toggle",l)),h.onScroll!=null&&ot("scroll",l),h.onScrollEnd!=null&&ot("scrollend",l),h.onClick!=null&&(l.onclick=ni),l=!0):l=!1,l||Di(o,!0)}function vg(o){for(Cn=o.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:wr=!1;return;case 27:case 3:wr=!0;return;default:Cn=Cn.return}}function ho(o){if(o!==Cn)return!1;if(!ct)return vg(o),ct=!0,!1;var l=o.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=o.type,u=!(u!=="form"&&u!=="button")||ph(o.type,o.memoizedProps)),u=!u),u&&Pt&&Di(o),vg(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Pt=Vv(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Pt=Vv(o)}else l===27?(l=Pt,qi(o.type)?(o=xh,xh=null,Pt=o):Pt=l):Pt=Cn?Sr(o.stateNode.nextSibling):null;return!0}function xa(){Pt=Cn=null,ct=!1}function Kd(){var o=Ii;return o!==null&&(Yn===null?Yn=o:Yn.push.apply(Yn,o),Ii=null),o}function Rs(o){Ii===null?Ii=[o]:Ii.push(o)}var Zd=j(null),ba=null,oi=null;function ki(o,l,u){ie(Zd,l._currentValue),l._currentValue=u}function si(o){o._currentValue=Zd.current,G(Zd)}function Qd(o,l,u){for(;o!==null;){var h=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,h!==null&&(h.childLanes|=l)):h!==null&&(h.childLanes&l)!==l&&(h.childLanes|=l),o===u)break;o=o.return}}function Jd(o,l,u,h){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var b=y.dependencies;if(b!==null){var C=y.child;b=b.firstContext;e:for(;b!==null;){var N=b;b=y;for(var L=0;L<l.length;L++)if(N.context===l[L]){b.lanes|=u,N=b.alternate,N!==null&&(N.lanes|=u),Qd(b.return,u,o),h||(C=null);break e}b=N.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(r(341));C.lanes|=u,b=C.alternate,b!==null&&(b.lanes|=u),Qd(C,u,o),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===o){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function po(o,l,u,h){o=null;for(var y=l,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var N=y.type;tr(y.pendingProps.value,C.value)||(o!==null?o.push(N):o=[N])}}else if(y===we.current){if(C=y.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(nl):o=[nl])}y=y.return}o!==null&&Jd(l,o,u,h),l.flags|=262144}function fc(o){for(o=o.firstContext;o!==null;){if(!tr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function wa(o){ba=o,oi=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function An(o){return yg(ba,o)}function hc(o,l){return ba===null&&wa(o),yg(o,l)}function yg(o,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},oi===null){if(o===null)throw Error(r(308));oi=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else oi=oi.next=l;return u}var _E=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(u,h){o.push(h)}};this.abort=function(){l.aborted=!0,o.forEach(function(u){return u()})}},SE=n.unstable_scheduleCallback,EE=n.unstable_NormalPriority,nn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ef(){return{controller:new _E,data:new Map,refCount:0}}function Ns(o){o.refCount--,o.refCount===0&&SE(EE,function(){o.controller.abort()})}var Is=null,tf=0,go=0,mo=null;function CE(o,l){if(Is===null){var u=Is=[];tf=0,go=ah(),mo={status:"pending",value:void 0,then:function(h){u.push(h)}}}return tf++,l.then(xg,xg),l}function xg(){if(--tf===0&&Is!==null){mo!==null&&(mo.status="fulfilled");var o=Is;Is=null,go=0,mo=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function AE(o,l){var u=[],h={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return o.then(function(){h.status="fulfilled",h.value=l;for(var y=0;y<u.length;y++)(0,u[y])(l)},function(y){for(h.status="rejected",h.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),h}var bg=V.S;V.S=function(o,l){rv=it(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&CE(o,l),bg!==null&&bg(o,l)};var _a=j(null);function nf(){var o=_a.current;return o!==null?o:It.pooledCache}function pc(o,l){l===null?ie(_a,_a.current):ie(_a,l.pool)}function wg(){var o=nf();return o===null?null:{parent:nn._currentValue,pool:o}}var vo=Error(r(460)),rf=Error(r(474)),gc=Error(r(542)),mc={then:function(){}};function _g(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Sg(o,l,u){switch(u=o[u],u===void 0?o.push(l):u!==l&&(l.then(ni,ni),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Cg(o),o;default:if(typeof l.status=="string")l.then(ni,ni);else{if(o=It,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(h){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=h}},function(h){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=h}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Cg(o),o}throw Ea=l,vo}}function Sa(o){try{var l=o._init;return l(o._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Ea=u,vo):u}}var Ea=null;function Eg(){if(Ea===null)throw Error(r(459));var o=Ea;return Ea=null,o}function Cg(o){if(o===vo||o===gc)throw Error(r(483))}var yo=null,Ds=0;function vc(o){var l=Ds;return Ds+=1,yo===null&&(yo=[]),Sg(yo,o,l)}function ks(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function yc(o,l){throw l.$$typeof===v?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function Ag(o){function l(X,$){if(o){var Z=X.deletions;Z===null?(X.deletions=[$],X.flags|=16):Z.push($)}}function u(X,$){if(!o)return null;for(;$!==null;)l(X,$),$=$.sibling;return null}function h(X){for(var $=new Map;X!==null;)X.key!==null?$.set(X.key,X):$.set(X.index,X),X=X.sibling;return $}function y(X,$){return X=ii(X,$),X.index=0,X.sibling=null,X}function b(X,$,Z){return X.index=Z,o?(Z=X.alternate,Z!==null?(Z=Z.index,Z<$?(X.flags|=67108866,$):Z):(X.flags|=67108866,$)):(X.flags|=1048576,$)}function C(X){return o&&X.alternate===null&&(X.flags|=67108866),X}function N(X,$,Z,oe){return $===null||$.tag!==6?($=Gd(Z,X.mode,oe),$.return=X,$):($=y($,Z),$.return=X,$)}function L(X,$,Z,oe){var Pe=Z.type;return Pe===_?re(X,$,Z.props.children,oe,Z.key):$!==null&&($.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===H&&Sa(Pe)===$.type)?($=y($,Z.props),ks($,Z),$.return=X,$):($=uc(Z.type,Z.key,Z.props,null,X.mode,oe),ks($,Z),$.return=X,$)}function Q(X,$,Z,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=qd(Z,X.mode,oe),$.return=X,$):($=y($,Z.children||[]),$.return=X,$)}function re(X,$,Z,oe,Pe){return $===null||$.tag!==7?($=ya(Z,X.mode,oe,Pe),$.return=X,$):($=y($,Z),$.return=X,$)}function ue(X,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Gd(""+$,X.mode,Z),$.return=X,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case x:return Z=uc($.type,$.key,$.props,null,X.mode,Z),ks(Z,$),Z.return=X,Z;case w:return $=qd($,X.mode,Z),$.return=X,$;case H:return $=Sa($),ue(X,$,Z)}if(_e($)||F($))return $=ya($,X.mode,Z,null),$.return=X,$;if(typeof $.then=="function")return ue(X,vc($),Z);if($.$$typeof===T)return ue(X,hc(X,$),Z);yc(X,$)}return null}function J(X,$,Z,oe){var Pe=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Pe!==null?null:N(X,$,""+Z,oe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:return Z.key===Pe?L(X,$,Z,oe):null;case w:return Z.key===Pe?Q(X,$,Z,oe):null;case H:return Z=Sa(Z),J(X,$,Z,oe)}if(_e(Z)||F(Z))return Pe!==null?null:re(X,$,Z,oe,null);if(typeof Z.then=="function")return J(X,$,vc(Z),oe);if(Z.$$typeof===T)return J(X,$,hc(X,Z),oe);yc(X,Z)}return null}function te(X,$,Z,oe,Pe){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return X=X.get(Z)||null,N($,X,""+oe,Pe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:return X=X.get(oe.key===null?Z:oe.key)||null,L($,X,oe,Pe);case w:return X=X.get(oe.key===null?Z:oe.key)||null,Q($,X,oe,Pe);case H:return oe=Sa(oe),te(X,$,Z,oe,Pe)}if(_e(oe)||F(oe))return X=X.get(Z)||null,re($,X,oe,Pe,null);if(typeof oe.then=="function")return te(X,$,Z,vc(oe),Pe);if(oe.$$typeof===T)return te(X,$,Z,hc($,oe),Pe);yc($,oe)}return null}function Re(X,$,Z,oe){for(var Pe=null,gt=null,ke=$,Qe=$=0,lt=null;ke!==null&&Qe<Z.length;Qe++){ke.index>Qe?(lt=ke,ke=null):lt=ke.sibling;var mt=J(X,ke,Z[Qe],oe);if(mt===null){ke===null&&(ke=lt);break}o&&ke&&mt.alternate===null&&l(X,ke),$=b(mt,$,Qe),gt===null?Pe=mt:gt.sibling=mt,gt=mt,ke=lt}if(Qe===Z.length)return u(X,ke),ct&&ai(X,Qe),Pe;if(ke===null){for(;Qe<Z.length;Qe++)ke=ue(X,Z[Qe],oe),ke!==null&&($=b(ke,$,Qe),gt===null?Pe=ke:gt.sibling=ke,gt=ke);return ct&&ai(X,Qe),Pe}for(ke=h(ke);Qe<Z.length;Qe++)lt=te(ke,X,Qe,Z[Qe],oe),lt!==null&&(o&&lt.alternate!==null&&ke.delete(lt.key===null?Qe:lt.key),$=b(lt,$,Qe),gt===null?Pe=lt:gt.sibling=lt,gt=lt);return o&&ke.forEach(function(Zi){return l(X,Zi)}),ct&&ai(X,Qe),Pe}function $e(X,$,Z,oe){if(Z==null)throw Error(r(151));for(var Pe=null,gt=null,ke=$,Qe=$=0,lt=null,mt=Z.next();ke!==null&&!mt.done;Qe++,mt=Z.next()){ke.index>Qe?(lt=ke,ke=null):lt=ke.sibling;var Zi=J(X,ke,mt.value,oe);if(Zi===null){ke===null&&(ke=lt);break}o&&ke&&Zi.alternate===null&&l(X,ke),$=b(Zi,$,Qe),gt===null?Pe=Zi:gt.sibling=Zi,gt=Zi,ke=lt}if(mt.done)return u(X,ke),ct&&ai(X,Qe),Pe;if(ke===null){for(;!mt.done;Qe++,mt=Z.next())mt=ue(X,mt.value,oe),mt!==null&&($=b(mt,$,Qe),gt===null?Pe=mt:gt.sibling=mt,gt=mt);return ct&&ai(X,Qe),Pe}for(ke=h(ke);!mt.done;Qe++,mt=Z.next())mt=te(ke,X,Qe,mt.value,oe),mt!==null&&(o&&mt.alternate!==null&&ke.delete(mt.key===null?Qe:mt.key),$=b(mt,$,Qe),gt===null?Pe=mt:gt.sibling=mt,gt=mt);return o&&ke.forEach(function(B3){return l(X,B3)}),ct&&ai(X,Qe),Pe}function Rt(X,$,Z,oe){if(typeof Z=="object"&&Z!==null&&Z.type===_&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:e:{for(var Pe=Z.key;$!==null;){if($.key===Pe){if(Pe=Z.type,Pe===_){if($.tag===7){u(X,$.sibling),oe=y($,Z.props.children),oe.return=X,X=oe;break e}}else if($.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===H&&Sa(Pe)===$.type){u(X,$.sibling),oe=y($,Z.props),ks(oe,Z),oe.return=X,X=oe;break e}u(X,$);break}else l(X,$);$=$.sibling}Z.type===_?(oe=ya(Z.props.children,X.mode,oe,Z.key),oe.return=X,X=oe):(oe=uc(Z.type,Z.key,Z.props,null,X.mode,oe),ks(oe,Z),oe.return=X,X=oe)}return C(X);case w:e:{for(Pe=Z.key;$!==null;){if($.key===Pe)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){u(X,$.sibling),oe=y($,Z.children||[]),oe.return=X,X=oe;break e}else{u(X,$);break}else l(X,$);$=$.sibling}oe=qd(Z,X.mode,oe),oe.return=X,X=oe}return C(X);case H:return Z=Sa(Z),Rt(X,$,Z,oe)}if(_e(Z))return Re(X,$,Z,oe);if(F(Z)){if(Pe=F(Z),typeof Pe!="function")throw Error(r(150));return Z=Pe.call(Z),$e(X,$,Z,oe)}if(typeof Z.then=="function")return Rt(X,$,vc(Z),oe);if(Z.$$typeof===T)return Rt(X,$,hc(X,Z),oe);yc(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(u(X,$.sibling),oe=y($,Z),oe.return=X,X=oe):(u(X,$),oe=Gd(Z,X.mode,oe),oe.return=X,X=oe),C(X)):u(X,$)}return function(X,$,Z,oe){try{Ds=0;var Pe=Rt(X,$,Z,oe);return yo=null,Pe}catch(ke){if(ke===vo||ke===gc)throw ke;var gt=nr(29,ke,null,X.mode);return gt.lanes=oe,gt.return=X,gt}finally{}}}var Ca=Ag(!0),Tg=Ag(!1),ji=!1;function af(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function of(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Mi(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Pi(o,l,u){var h=o.updateQueue;if(h===null)return null;if(h=h.shared,(yt&2)!==0){var y=h.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),h.pending=l,l=cc(o),ug(o,null,u),l}return lc(o,h,l,u),cc(o)}function js(o,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var h=l.lanes;h&=o.pendingLanes,u|=h,l.lanes=u,yp(o,u)}}function sf(o,l){var u=o.updateQueue,h=o.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var y=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?y=b=C:b=b.next=C,u=u.next}while(u!==null);b===null?y=b=l:b=b.next=l}else y=b=l;u={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=l:o.next=l,u.lastBaseUpdate=l}var lf=!1;function Ms(){if(lf){var o=mo;if(o!==null)throw o}}function Ps(o,l,u,h){lf=!1;var y=o.updateQueue;ji=!1;var b=y.firstBaseUpdate,C=y.lastBaseUpdate,N=y.shared.pending;if(N!==null){y.shared.pending=null;var L=N,Q=L.next;L.next=null,C===null?b=Q:C.next=Q,C=L;var re=o.alternate;re!==null&&(re=re.updateQueue,N=re.lastBaseUpdate,N!==C&&(N===null?re.firstBaseUpdate=Q:N.next=Q,re.lastBaseUpdate=L))}if(b!==null){var ue=y.baseState;C=0,re=Q=L=null,N=b;do{var J=N.lane&-536870913,te=J!==N.lane;if(te?(st&J)===J:(h&J)===J){J!==0&&J===go&&(lf=!0),re!==null&&(re=re.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Re=o,$e=N;J=l;var Rt=u;switch($e.tag){case 1:if(Re=$e.payload,typeof Re=="function"){ue=Re.call(Rt,ue,J);break e}ue=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=$e.payload,J=typeof Re=="function"?Re.call(Rt,ue,J):Re,J==null)break e;ue=m({},ue,J);break e;case 2:ji=!0}}J=N.callback,J!==null&&(o.flags|=64,te&&(o.flags|=8192),te=y.callbacks,te===null?y.callbacks=[J]:te.push(J))}else te={lane:J,tag:N.tag,payload:N.payload,callback:N.callback,next:null},re===null?(Q=re=te,L=ue):re=re.next=te,C|=J;if(N=N.next,N===null){if(N=y.shared.pending,N===null)break;te=N,N=te.next,te.next=null,y.lastBaseUpdate=te,y.shared.pending=null}}while(!0);re===null&&(L=ue),y.baseState=L,y.firstBaseUpdate=Q,y.lastBaseUpdate=re,b===null&&(y.shared.lanes=0),zi|=C,o.lanes=C,o.memoizedState=ue}}function Og(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function Rg(o,l){var u=o.callbacks;if(u!==null)for(o.callbacks=null,o=0;o<u.length;o++)Og(u[o],l)}var xo=j(null),xc=j(0);function Ng(o,l){o=mi,ie(xc,o),ie(xo,l),mi=o|l.baseLanes}function cf(){ie(xc,mi),ie(xo,xo.current)}function uf(){mi=xc.current,G(xo),G(xc)}var rr=j(null),_r=null;function Bi(o){var l=o.alternate;ie(Zt,Zt.current&1),ie(rr,o),_r===null&&(l===null||xo.current!==null||l.memoizedState!==null)&&(_r=o)}function df(o){ie(Zt,Zt.current),ie(rr,o),_r===null&&(_r=o)}function Ig(o){o.tag===22?(ie(Zt,Zt.current),ie(rr,o),_r===null&&(_r=o)):Li()}function Li(){ie(Zt,Zt.current),ie(rr,rr.current)}function ir(o){G(rr),_r===o&&(_r=null),G(Zt)}var Zt=j(0);function bc(o){for(var l=o;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||vh(u)||yh(u)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var li=0,Xe=null,Tt=null,rn=null,wc=!1,bo=!1,Aa=!1,_c=0,Bs=0,wo=null,TE=0;function Xt(){throw Error(r(321))}function ff(o,l){if(l===null)return!1;for(var u=0;u<l.length&&u<o.length;u++)if(!tr(o[u],l[u]))return!1;return!0}function hf(o,l,u,h,y,b){return li=b,Xe=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,V.H=o===null||o.memoizedState===null?pm:Of,Aa=!1,b=u(h,y),Aa=!1,bo&&(b=kg(l,u,h,y)),Dg(o),b}function Dg(o){V.H=Us;var l=Tt!==null&&Tt.next!==null;if(li=0,rn=Tt=Xe=null,wc=!1,Bs=0,wo=null,l)throw Error(r(300));o===null||an||(o=o.dependencies,o!==null&&fc(o)&&(an=!0))}function kg(o,l,u,h){Xe=o;var y=0;do{if(bo&&(wo=null),Bs=0,bo=!1,25<=y)throw Error(r(301));if(y+=1,rn=Tt=null,o.updateQueue!=null){var b=o.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}V.H=gm,b=l(u,h)}while(bo);return b}function OE(){var o=V.H,l=o.useState()[0];return l=typeof l.then=="function"?Ls(l):l,o=o.useState()[0],(Tt!==null?Tt.memoizedState:null)!==o&&(Xe.flags|=1024),l}function pf(){var o=_c!==0;return _c=0,o}function gf(o,l,u){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~u}function mf(o){if(wc){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}wc=!1}li=0,rn=Tt=Xe=null,bo=!1,Bs=_c=0,wo=null}function Fn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Xe.memoizedState=rn=o:rn=rn.next=o,rn}function Qt(){if(Tt===null){var o=Xe.alternate;o=o!==null?o.memoizedState:null}else o=Tt.next;var l=rn===null?Xe.memoizedState:rn.next;if(l!==null)rn=l,Tt=o;else{if(o===null)throw Xe.alternate===null?Error(r(467)):Error(r(310));Tt=o,o={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},rn===null?Xe.memoizedState=rn=o:rn=rn.next=o}return rn}function Sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ls(o){var l=Bs;return Bs+=1,wo===null&&(wo=[]),o=Sg(wo,o,l),l=Xe,(rn===null?l.memoizedState:rn.next)===null&&(l=l.alternate,V.H=l===null||l.memoizedState===null?pm:Of),o}function Ec(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ls(o);if(o.$$typeof===T)return An(o)}throw Error(r(438,String(o)))}function vf(o){var l=null,u=Xe.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var h=Xe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(l={data:h.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Sc(),Xe.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(o),h=0;h<o;h++)u[h]=ae;return l.index++,u}function ci(o,l){return typeof l=="function"?l(o):l}function Cc(o){var l=Qt();return yf(l,Tt,o)}function yf(o,l,u){var h=o.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var y=o.baseQueue,b=h.pending;if(b!==null){if(y!==null){var C=y.next;y.next=b.next,b.next=C}l.baseQueue=y=b,h.pending=null}if(b=o.baseState,y===null)o.memoizedState=b;else{l=y.next;var N=C=null,L=null,Q=l,re=!1;do{var ue=Q.lane&-536870913;if(ue!==Q.lane?(st&ue)===ue:(li&ue)===ue){var J=Q.revertLane;if(J===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ue===go&&(re=!0);else if((li&J)===J){Q=Q.next,J===go&&(re=!0);continue}else ue={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(N=L=ue,C=b):L=L.next=ue,Xe.lanes|=J,zi|=J;ue=Q.action,Aa&&u(b,ue),b=Q.hasEagerState?Q.eagerState:u(b,ue)}else J={lane:ue,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(N=L=J,C=b):L=L.next=J,Xe.lanes|=ue,zi|=ue;Q=Q.next}while(Q!==null&&Q!==l);if(L===null?C=b:L.next=N,!tr(b,o.memoizedState)&&(an=!0,re&&(u=mo,u!==null)))throw u;o.memoizedState=b,o.baseState=C,o.baseQueue=L,h.lastRenderedState=b}return y===null&&(h.lanes=0),[o.memoizedState,h.dispatch]}function xf(o){var l=Qt(),u=l.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var h=u.dispatch,y=u.pending,b=l.memoizedState;if(y!==null){u.pending=null;var C=y=y.next;do b=o(b,C.action),C=C.next;while(C!==y);tr(b,l.memoizedState)||(an=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),u.lastRenderedState=b}return[b,h]}function jg(o,l,u){var h=Xe,y=Qt(),b=ct;if(b){if(u===void 0)throw Error(r(407));u=u()}else u=l();var C=!tr((Tt||y).memoizedState,u);if(C&&(y.memoizedState=u,an=!0),y=y.queue,_f(Bg.bind(null,h,y,o),[o]),y.getSnapshot!==l||C||rn!==null&&rn.memoizedState.tag&1){if(h.flags|=2048,_o(9,{destroy:void 0},Pg.bind(null,h,y,u,l),null),It===null)throw Error(r(349));b||(li&127)!==0||Mg(h,l,u)}return u}function Mg(o,l,u){o.flags|=16384,o={getSnapshot:l,value:u},l=Xe.updateQueue,l===null?(l=Sc(),Xe.updateQueue=l,l.stores=[o]):(u=l.stores,u===null?l.stores=[o]:u.push(o))}function Pg(o,l,u,h){l.value=u,l.getSnapshot=h,Lg(l)&&Fg(o)}function Bg(o,l,u){return u(function(){Lg(l)&&Fg(o)})}function Lg(o){var l=o.getSnapshot;o=o.value;try{var u=l();return!tr(o,u)}catch{return!0}}function Fg(o){var l=va(o,2);l!==null&&Kn(l,o,2)}function bf(o){var l=Fn();if(typeof o=="function"){var u=o;if(o=u(),Aa){Le(!0);try{u()}finally{Le(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:o},l}function Ug(o,l,u,h){return o.baseState=u,yf(o,Tt,typeof h=="function"?h:ci)}function RE(o,l,u,h,y){if(Oc(o))throw Error(r(485));if(o=l.action,o!==null){var b={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){b.listeners.push(C)}};V.T!==null?u(!0):b.isTransition=!1,h(b),u=l.pending,u===null?(b.next=l.pending=b,zg(l,b)):(b.next=u.next,l.pending=u.next=b)}}function zg(o,l){var u=l.action,h=l.payload,y=o.state;if(l.isTransition){var b=V.T,C={};V.T=C;try{var N=u(y,h),L=V.S;L!==null&&L(C,N),Vg(o,l,N)}catch(Q){wf(o,l,Q)}finally{b!==null&&C.types!==null&&(b.types=C.types),V.T=b}}else try{b=u(y,h),Vg(o,l,b)}catch(Q){wf(o,l,Q)}}function Vg(o,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){Hg(o,l,h)},function(h){return wf(o,l,h)}):Hg(o,l,u)}function Hg(o,l,u){l.status="fulfilled",l.value=u,$g(l),o.state=u,l=o.pending,l!==null&&(u=l.next,u===l?o.pending=null:(u=u.next,l.next=u,zg(o,u)))}function wf(o,l,u){var h=o.pending;if(o.pending=null,h!==null){h=h.next;do l.status="rejected",l.reason=u,$g(l),l=l.next;while(l!==h)}o.action=null}function $g(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function Gg(o,l){return l}function qg(o,l){if(ct){var u=It.formState;if(u!==null){e:{var h=Xe;if(ct){if(Pt){t:{for(var y=Pt,b=wr;y.nodeType!==8;){if(!b){y=null;break t}if(y=Sr(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){Pt=Sr(y.nextSibling),h=y.data==="F!";break e}}Di(h)}h=!1}h&&(l=u[0])}}return u=Fn(),u.memoizedState=u.baseState=l,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gg,lastRenderedState:l},u.queue=h,u=dm.bind(null,Xe,h),h.dispatch=u,h=bf(!1),b=Tf.bind(null,Xe,!1,h.queue),h=Fn(),y={state:l,dispatch:null,action:o,pending:null},h.queue=y,u=RE.bind(null,Xe,y,b,u),y.dispatch=u,h.memoizedState=o,[l,u,!1]}function Wg(o){var l=Qt();return Xg(l,Tt,o)}function Xg(o,l,u){if(l=yf(o,l,Gg)[0],o=Cc(ci)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var h=Ls(l)}catch(C){throw C===vo?gc:C}else h=l;l=Qt();var y=l.queue,b=y.dispatch;return u!==l.memoizedState&&(Xe.flags|=2048,_o(9,{destroy:void 0},NE.bind(null,y,u),null)),[h,b,o]}function NE(o,l){o.action=l}function Yg(o){var l=Qt(),u=Tt;if(u!==null)return Xg(l,u,o);Qt(),l=l.memoizedState,u=Qt();var h=u.queue.dispatch;return u.memoizedState=o,[l,h,!1]}function _o(o,l,u,h){return o={tag:o,create:u,deps:h,inst:l,next:null},l=Xe.updateQueue,l===null&&(l=Sc(),Xe.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=o.next=o:(h=u.next,u.next=o,o.next=h,l.lastEffect=o),o}function Kg(){return Qt().memoizedState}function Ac(o,l,u,h){var y=Fn();Xe.flags|=o,y.memoizedState=_o(1|l,{destroy:void 0},u,h===void 0?null:h)}function Tc(o,l,u,h){var y=Qt();h=h===void 0?null:h;var b=y.memoizedState.inst;Tt!==null&&h!==null&&ff(h,Tt.memoizedState.deps)?y.memoizedState=_o(l,b,u,h):(Xe.flags|=o,y.memoizedState=_o(1|l,b,u,h))}function Zg(o,l){Ac(8390656,8,o,l)}function _f(o,l){Tc(2048,8,o,l)}function IE(o){Xe.flags|=4;var l=Xe.updateQueue;if(l===null)l=Sc(),Xe.updateQueue=l,l.events=[o];else{var u=l.events;u===null?l.events=[o]:u.push(o)}}function Qg(o){var l=Qt().memoizedState;return IE({ref:l,nextImpl:o}),function(){if((yt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function Jg(o,l){return Tc(4,2,o,l)}function em(o,l){return Tc(4,4,o,l)}function tm(o,l){if(typeof l=="function"){o=o();var u=l(o);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function nm(o,l,u){u=u!=null?u.concat([o]):null,Tc(4,4,tm.bind(null,l,o),u)}function Sf(){}function rm(o,l){var u=Qt();l=l===void 0?null:l;var h=u.memoizedState;return l!==null&&ff(l,h[1])?h[0]:(u.memoizedState=[o,l],o)}function im(o,l){var u=Qt();l=l===void 0?null:l;var h=u.memoizedState;if(l!==null&&ff(l,h[1]))return h[0];if(h=o(),Aa){Le(!0);try{o()}finally{Le(!1)}}return u.memoizedState=[h,l],h}function Ef(o,l,u){return u===void 0||(li&1073741824)!==0&&(st&261930)===0?o.memoizedState=l:(o.memoizedState=u,o=av(),Xe.lanes|=o,zi|=o,u)}function am(o,l,u,h){return tr(u,l)?u:xo.current!==null?(o=Ef(o,u,h),tr(o,l)||(an=!0),o):(li&42)===0||(li&1073741824)!==0&&(st&261930)===0?(an=!0,o.memoizedState=u):(o=av(),Xe.lanes|=o,zi|=o,l)}function om(o,l,u,h,y){var b=B.p;B.p=b!==0&&8>b?b:8;var C=V.T,N={};V.T=N,Tf(o,!1,l,u);try{var L=y(),Q=V.S;if(Q!==null&&Q(N,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var re=AE(L,h);Fs(o,l,re,sr(o))}else Fs(o,l,h,sr(o))}catch(ue){Fs(o,l,{then:function(){},status:"rejected",reason:ue},sr())}finally{B.p=b,C!==null&&N.types!==null&&(C.types=N.types),V.T=C}}function DE(){}function Cf(o,l,u,h){if(o.tag!==5)throw Error(r(476));var y=sm(o).queue;om(o,y,l,W,u===null?DE:function(){return lm(o),u(h)})}function sm(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:W},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:u},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function lm(o){var l=sm(o);l.next===null&&(l=o.alternate.memoizedState),Fs(o,l.next.queue,{},sr())}function Af(){return An(nl)}function cm(){return Qt().memoizedState}function um(){return Qt().memoizedState}function kE(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var u=sr();o=Mi(u);var h=Pi(l,o,u);h!==null&&(Kn(h,l,u),js(h,l,u)),l={cache:ef()},o.payload=l;return}l=l.return}}function jE(o,l,u){var h=sr();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Oc(o)?fm(l,u):(u=Hd(o,l,u,h),u!==null&&(Kn(u,o,h),hm(u,l,h)))}function dm(o,l,u){var h=sr();Fs(o,l,u,h)}function Fs(o,l,u,h){var y={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Oc(o))fm(l,y);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var C=l.lastRenderedState,N=b(C,u);if(y.hasEagerState=!0,y.eagerState=N,tr(N,C))return lc(o,l,y,0),It===null&&sc(),!1}catch{}finally{}if(u=Hd(o,l,y,h),u!==null)return Kn(u,o,h),hm(u,l,h),!0}return!1}function Tf(o,l,u,h){if(h={lane:2,revertLane:ah(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Oc(o)){if(l)throw Error(r(479))}else l=Hd(o,u,h,2),l!==null&&Kn(l,o,2)}function Oc(o){var l=o.alternate;return o===Xe||l!==null&&l===Xe}function fm(o,l){bo=wc=!0;var u=o.pending;u===null?l.next=l:(l.next=u.next,u.next=l),o.pending=l}function hm(o,l,u){if((u&4194048)!==0){var h=l.lanes;h&=o.pendingLanes,u|=h,l.lanes=u,yp(o,u)}}var Us={readContext:An,use:Ec,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useLayoutEffect:Xt,useInsertionEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useSyncExternalStore:Xt,useId:Xt,useHostTransitionStatus:Xt,useFormState:Xt,useActionState:Xt,useOptimistic:Xt,useMemoCache:Xt,useCacheRefresh:Xt};Us.useEffectEvent=Xt;var pm={readContext:An,use:Ec,useCallback:function(o,l){return Fn().memoizedState=[o,l===void 0?null:l],o},useContext:An,useEffect:Zg,useImperativeHandle:function(o,l,u){u=u!=null?u.concat([o]):null,Ac(4194308,4,tm.bind(null,l,o),u)},useLayoutEffect:function(o,l){return Ac(4194308,4,o,l)},useInsertionEffect:function(o,l){Ac(4,2,o,l)},useMemo:function(o,l){var u=Fn();l=l===void 0?null:l;var h=o();if(Aa){Le(!0);try{o()}finally{Le(!1)}}return u.memoizedState=[h,l],h},useReducer:function(o,l,u){var h=Fn();if(u!==void 0){var y=u(l);if(Aa){Le(!0);try{u(l)}finally{Le(!1)}}}else y=l;return h.memoizedState=h.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},h.queue=o,o=o.dispatch=jE.bind(null,Xe,o),[h.memoizedState,o]},useRef:function(o){var l=Fn();return o={current:o},l.memoizedState=o},useState:function(o){o=bf(o);var l=o.queue,u=dm.bind(null,Xe,l);return l.dispatch=u,[o.memoizedState,u]},useDebugValue:Sf,useDeferredValue:function(o,l){var u=Fn();return Ef(u,o,l)},useTransition:function(){var o=bf(!1);return o=om.bind(null,Xe,o.queue,!0,!1),Fn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,u){var h=Xe,y=Fn();if(ct){if(u===void 0)throw Error(r(407));u=u()}else{if(u=l(),It===null)throw Error(r(349));(st&127)!==0||Mg(h,l,u)}y.memoizedState=u;var b={value:u,getSnapshot:l};return y.queue=b,Zg(Bg.bind(null,h,b,o),[o]),h.flags|=2048,_o(9,{destroy:void 0},Pg.bind(null,h,b,u,l),null),u},useId:function(){var o=Fn(),l=It.identifierPrefix;if(ct){var u=Gr,h=$r;u=(h&~(1<<32-wt(h)-1)).toString(32)+u,l="_"+l+"R_"+u,u=_c++,0<u&&(l+="H"+u.toString(32)),l+="_"}else u=TE++,l="_"+l+"r_"+u.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:Af,useFormState:qg,useActionState:qg,useOptimistic:function(o){var l=Fn();l.memoizedState=l.baseState=o;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=Tf.bind(null,Xe,!0,u),u.dispatch=l,[o,l]},useMemoCache:vf,useCacheRefresh:function(){return Fn().memoizedState=kE.bind(null,Xe)},useEffectEvent:function(o){var l=Fn(),u={impl:o};return l.memoizedState=u,function(){if((yt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Of={readContext:An,use:Ec,useCallback:rm,useContext:An,useEffect:_f,useImperativeHandle:nm,useInsertionEffect:Jg,useLayoutEffect:em,useMemo:im,useReducer:Cc,useRef:Kg,useState:function(){return Cc(ci)},useDebugValue:Sf,useDeferredValue:function(o,l){var u=Qt();return am(u,Tt.memoizedState,o,l)},useTransition:function(){var o=Cc(ci)[0],l=Qt().memoizedState;return[typeof o=="boolean"?o:Ls(o),l]},useSyncExternalStore:jg,useId:cm,useHostTransitionStatus:Af,useFormState:Wg,useActionState:Wg,useOptimistic:function(o,l){var u=Qt();return Ug(u,Tt,o,l)},useMemoCache:vf,useCacheRefresh:um};Of.useEffectEvent=Qg;var gm={readContext:An,use:Ec,useCallback:rm,useContext:An,useEffect:_f,useImperativeHandle:nm,useInsertionEffect:Jg,useLayoutEffect:em,useMemo:im,useReducer:xf,useRef:Kg,useState:function(){return xf(ci)},useDebugValue:Sf,useDeferredValue:function(o,l){var u=Qt();return Tt===null?Ef(u,o,l):am(u,Tt.memoizedState,o,l)},useTransition:function(){var o=xf(ci)[0],l=Qt().memoizedState;return[typeof o=="boolean"?o:Ls(o),l]},useSyncExternalStore:jg,useId:cm,useHostTransitionStatus:Af,useFormState:Yg,useActionState:Yg,useOptimistic:function(o,l){var u=Qt();return Tt!==null?Ug(u,Tt,o,l):(u.baseState=o,[o,u.queue.dispatch])},useMemoCache:vf,useCacheRefresh:um};gm.useEffectEvent=Qg;function Rf(o,l,u,h){l=o.memoizedState,u=u(h,l),u=u==null?l:m({},l,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var Nf={enqueueSetState:function(o,l,u){o=o._reactInternals;var h=sr(),y=Mi(h);y.payload=l,u!=null&&(y.callback=u),l=Pi(o,y,h),l!==null&&(Kn(l,o,h),js(l,o,h))},enqueueReplaceState:function(o,l,u){o=o._reactInternals;var h=sr(),y=Mi(h);y.tag=1,y.payload=l,u!=null&&(y.callback=u),l=Pi(o,y,h),l!==null&&(Kn(l,o,h),js(l,o,h))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var u=sr(),h=Mi(u);h.tag=2,l!=null&&(h.callback=l),l=Pi(o,h,u),l!==null&&(Kn(l,o,u),js(l,o,u))}};function mm(o,l,u,h,y,b,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(h,b,C):l.prototype&&l.prototype.isPureReactComponent?!As(u,h)||!As(y,b):!0}function vm(o,l,u,h){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,h),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,h),l.state!==o&&Nf.enqueueReplaceState(l,l.state,null)}function Ta(o,l){var u=l;if("ref"in l){u={};for(var h in l)h!=="ref"&&(u[h]=l[h])}if(o=o.defaultProps){u===l&&(u=m({},u));for(var y in o)u[y]===void 0&&(u[y]=o[y])}return u}function ym(o){oc(o)}function xm(o){console.error(o)}function bm(o){oc(o)}function Rc(o,l){try{var u=o.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(h){setTimeout(function(){throw h})}}function wm(o,l,u){try{var h=o.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function If(o,l,u){return u=Mi(u),u.tag=3,u.payload={element:null},u.callback=function(){Rc(o,l)},u}function _m(o){return o=Mi(o),o.tag=3,o}function Sm(o,l,u,h){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var b=h.value;o.payload=function(){return y(b)},o.callback=function(){wm(l,u,h)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){wm(l,u,h),typeof y!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var N=h.stack;this.componentDidCatch(h.value,{componentStack:N!==null?N:""})})}function ME(o,l,u,h,y){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(l=u.alternate,l!==null&&po(l,u,y,!0),u=rr.current,u!==null){switch(u.tag){case 31:case 13:return _r===null?zc():u.alternate===null&&Yt===0&&(Yt=3),u.flags&=-257,u.flags|=65536,u.lanes=y,h===mc?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([h]):l.add(h),nh(o,h,y)),!1;case 22:return u.flags|=65536,h===mc?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([h]):u.add(h)),nh(o,h,y)),!1}throw Error(r(435,u.tag))}return nh(o,h,y),zc(),!1}if(ct)return l=rr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,h!==Yd&&(o=Error(r(422),{cause:h}),Rs(yr(o,u)))):(h!==Yd&&(l=Error(r(423),{cause:h}),Rs(yr(l,u))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,h=yr(h,u),y=If(o.stateNode,h,y),sf(o,y),Yt!==4&&(Yt=2)),!1;var b=Error(r(520),{cause:h});if(b=yr(b,u),Xs===null?Xs=[b]:Xs.push(b),Yt!==4&&(Yt=2),l===null)return!0;h=yr(h,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,o=y&-y,u.lanes|=o,o=If(u.stateNode,h,o),sf(u,o),!1;case 1:if(l=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Vi===null||!Vi.has(b))))return u.flags|=65536,y&=-y,u.lanes|=y,y=_m(y),Sm(y,o,u,h),sf(u,y),!1}u=u.return}while(u!==null);return!1}var Df=Error(r(461)),an=!1;function Tn(o,l,u,h){l.child=o===null?Tg(l,null,u,h):Ca(l,o.child,u,h)}function Em(o,l,u,h,y){u=u.render;var b=l.ref;if("ref"in h){var C={};for(var N in h)N!=="ref"&&(C[N]=h[N])}else C=h;return wa(l),h=hf(o,l,u,C,b,y),N=pf(),o!==null&&!an?(gf(o,l,y),ui(o,l,y)):(ct&&N&&Wd(l),l.flags|=1,Tn(o,l,h,y),l.child)}function Cm(o,l,u,h,y){if(o===null){var b=u.type;return typeof b=="function"&&!$d(b)&&b.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=b,Am(o,l,b,h,y)):(o=uc(u.type,null,h,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(b=o.child,!Uf(o,y)){var C=b.memoizedProps;if(u=u.compare,u=u!==null?u:As,u(C,h)&&o.ref===l.ref)return ui(o,l,y)}return l.flags|=1,o=ii(b,h),o.ref=l.ref,o.return=l,l.child=o}function Am(o,l,u,h,y){if(o!==null){var b=o.memoizedProps;if(As(b,h)&&o.ref===l.ref)if(an=!1,l.pendingProps=h=b,Uf(o,y))(o.flags&131072)!==0&&(an=!0);else return l.lanes=o.lanes,ui(o,l,y)}return kf(o,l,u,h,y)}function Tm(o,l,u,h){var y=h.children,b=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((l.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,o!==null){for(h=l.child=o.child,y=0;h!==null;)y=y|h.lanes|h.childLanes,h=h.sibling;h=y&~b}else h=0,l.child=null;return Om(o,l,b,u,h)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&pc(l,b!==null?b.cachePool:null),b!==null?Ng(l,b):cf(),Ig(l);else return h=l.lanes=536870912,Om(o,l,b!==null?b.baseLanes|u:u,u,h)}else b!==null?(pc(l,b.cachePool),Ng(l,b),Li(),l.memoizedState=null):(o!==null&&pc(l,null),cf(),Li());return Tn(o,l,y,u),l.child}function zs(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function Om(o,l,u,h,y){var b=nf();return b=b===null?null:{parent:nn._currentValue,pool:b},l.memoizedState={baseLanes:u,cachePool:b},o!==null&&pc(l,null),cf(),Ig(l),o!==null&&po(o,l,h,!0),l.childLanes=y,null}function Nc(o,l){return l=Dc({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function Rm(o,l,u){return Ca(l,o.child,null,u),o=Nc(l,l.pendingProps),o.flags|=2,ir(l),l.memoizedState=null,o}function PE(o,l,u){var h=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(ct){if(h.mode==="hidden")return o=Nc(l,h),l.lanes=536870912,zs(null,o);if(df(l),(o=Pt)?(o=zv(o,wr),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:Ni!==null?{id:$r,overflow:Gr}:null,retryLane:536870912,hydrationErrors:null},u=fg(o),u.return=l,l.child=u,Cn=l,Pt=null)):o=null,o===null)throw Di(l);return l.lanes=536870912,null}return Nc(l,h)}var b=o.memoizedState;if(b!==null){var C=b.dehydrated;if(df(l),y)if(l.flags&256)l.flags&=-257,l=Rm(o,l,u);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(r(558));else if(an||po(o,l,u,!1),y=(u&o.childLanes)!==0,an||y){if(h=It,h!==null&&(C=xp(h,u),C!==0&&C!==b.retryLane))throw b.retryLane=C,va(o,C),Kn(h,o,C),Df;zc(),l=Rm(o,l,u)}else o=b.treeContext,Pt=Sr(C.nextSibling),Cn=l,ct=!0,Ii=null,wr=!1,o!==null&&gg(l,o),l=Nc(l,h),l.flags|=4096;return l}return o=ii(o.child,{mode:h.mode,children:h.children}),o.ref=l.ref,l.child=o,o.return=l,o}function Ic(o,l){var u=l.ref;if(u===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(o===null||o.ref!==u)&&(l.flags|=4194816)}}function kf(o,l,u,h,y){return wa(l),u=hf(o,l,u,h,void 0,y),h=pf(),o!==null&&!an?(gf(o,l,y),ui(o,l,y)):(ct&&h&&Wd(l),l.flags|=1,Tn(o,l,u,y),l.child)}function Nm(o,l,u,h,y,b){return wa(l),l.updateQueue=null,u=kg(l,h,u,y),Dg(o),h=pf(),o!==null&&!an?(gf(o,l,b),ui(o,l,b)):(ct&&h&&Wd(l),l.flags|=1,Tn(o,l,u,b),l.child)}function Im(o,l,u,h,y){if(wa(l),l.stateNode===null){var b=co,C=u.contextType;typeof C=="object"&&C!==null&&(b=An(C)),b=new u(h,b),l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Nf,l.stateNode=b,b._reactInternals=l,b=l.stateNode,b.props=h,b.state=l.memoizedState,b.refs={},af(l),C=u.contextType,b.context=typeof C=="object"&&C!==null?An(C):co,b.state=l.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(Rf(l,u,C,h),b.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(C=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),C!==b.state&&Nf.enqueueReplaceState(b,b.state,null),Ps(l,h,b,y),Ms(),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308),h=!0}else if(o===null){b=l.stateNode;var N=l.memoizedProps,L=Ta(u,N);b.props=L;var Q=b.context,re=u.contextType;C=co,typeof re=="object"&&re!==null&&(C=An(re));var ue=u.getDerivedStateFromProps;re=typeof ue=="function"||typeof b.getSnapshotBeforeUpdate=="function",N=l.pendingProps!==N,re||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(N||Q!==C)&&vm(l,b,h,C),ji=!1;var J=l.memoizedState;b.state=J,Ps(l,h,b,y),Ms(),Q=l.memoizedState,N||J!==Q||ji?(typeof ue=="function"&&(Rf(l,u,ue,h),Q=l.memoizedState),(L=ji||mm(l,u,L,h,J,Q,C))?(re||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(l.flags|=4194308)):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=h,l.memoizedState=Q),b.props=h,b.state=Q,b.context=C,h=L):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),h=!1)}else{b=l.stateNode,of(o,l),C=l.memoizedProps,re=Ta(u,C),b.props=re,ue=l.pendingProps,J=b.context,Q=u.contextType,L=co,typeof Q=="object"&&Q!==null&&(L=An(Q)),N=u.getDerivedStateFromProps,(Q=typeof N=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C!==ue||J!==L)&&vm(l,b,h,L),ji=!1,J=l.memoizedState,b.state=J,Ps(l,h,b,y),Ms();var te=l.memoizedState;C!==ue||J!==te||ji||o!==null&&o.dependencies!==null&&fc(o.dependencies)?(typeof N=="function"&&(Rf(l,u,N,h),te=l.memoizedState),(re=ji||mm(l,u,re,h,J,te,L)||o!==null&&o.dependencies!==null&&fc(o.dependencies))?(Q||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,te,L),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,te,L)),typeof b.componentDidUpdate=="function"&&(l.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof b.componentDidUpdate!="function"||C===o.memoizedProps&&J===o.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&J===o.memoizedState||(l.flags|=1024),l.memoizedProps=h,l.memoizedState=te),b.props=h,b.state=te,b.context=L,h=re):(typeof b.componentDidUpdate!="function"||C===o.memoizedProps&&J===o.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&J===o.memoizedState||(l.flags|=1024),h=!1)}return b=h,Ic(o,l),h=(l.flags&128)!==0,b||h?(b=l.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:b.render(),l.flags|=1,o!==null&&h?(l.child=Ca(l,o.child,null,y),l.child=Ca(l,null,u,y)):Tn(o,l,u,y),l.memoizedState=b.state,o=l.child):o=ui(o,l,y),o}function Dm(o,l,u,h){return xa(),l.flags|=256,Tn(o,l,u,h),l.child}var jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mf(o){return{baseLanes:o,cachePool:wg()}}function Pf(o,l,u){return o=o!==null?o.childLanes&~u:0,l&&(o|=or),o}function km(o,l,u){var h=l.pendingProps,y=!1,b=(l.flags&128)!==0,C;if((C=b)||(C=o!==null&&o.memoizedState===null?!1:(Zt.current&2)!==0),C&&(y=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,o===null){if(ct){if(y?Bi(l):Li(),(o=Pt)?(o=zv(o,wr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:Ni!==null?{id:$r,overflow:Gr}:null,retryLane:536870912,hydrationErrors:null},u=fg(o),u.return=l,l.child=u,Cn=l,Pt=null)):o=null,o===null)throw Di(l);return yh(o)?l.lanes=32:l.lanes=536870912,null}var N=h.children;return h=h.fallback,y?(Li(),y=l.mode,N=Dc({mode:"hidden",children:N},y),h=ya(h,y,u,null),N.return=l,h.return=l,N.sibling=h,l.child=N,h=l.child,h.memoizedState=Mf(u),h.childLanes=Pf(o,C,u),l.memoizedState=jf,zs(null,h)):(Bi(l),Bf(l,N))}var L=o.memoizedState;if(L!==null&&(N=L.dehydrated,N!==null)){if(b)l.flags&256?(Bi(l),l.flags&=-257,l=Lf(o,l,u)):l.memoizedState!==null?(Li(),l.child=o.child,l.flags|=128,l=null):(Li(),N=h.fallback,y=l.mode,h=Dc({mode:"visible",children:h.children},y),N=ya(N,y,u,null),N.flags|=2,h.return=l,N.return=l,h.sibling=N,l.child=h,Ca(l,o.child,null,u),h=l.child,h.memoizedState=Mf(u),h.childLanes=Pf(o,C,u),l.memoizedState=jf,l=zs(null,h));else if(Bi(l),yh(N)){if(C=N.nextSibling&&N.nextSibling.dataset,C)var Q=C.dgst;C=Q,h=Error(r(419)),h.stack="",h.digest=C,Rs({value:h,source:null,stack:null}),l=Lf(o,l,u)}else if(an||po(o,l,u,!1),C=(u&o.childLanes)!==0,an||C){if(C=It,C!==null&&(h=xp(C,u),h!==0&&h!==L.retryLane))throw L.retryLane=h,va(o,h),Kn(C,o,h),Df;vh(N)||zc(),l=Lf(o,l,u)}else vh(N)?(l.flags|=192,l.child=o.child,l=null):(o=L.treeContext,Pt=Sr(N.nextSibling),Cn=l,ct=!0,Ii=null,wr=!1,o!==null&&gg(l,o),l=Bf(l,h.children),l.flags|=4096);return l}return y?(Li(),N=h.fallback,y=l.mode,L=o.child,Q=L.sibling,h=ii(L,{mode:"hidden",children:h.children}),h.subtreeFlags=L.subtreeFlags&65011712,Q!==null?N=ii(Q,N):(N=ya(N,y,u,null),N.flags|=2),N.return=l,h.return=l,h.sibling=N,l.child=h,zs(null,h),h=l.child,N=o.child.memoizedState,N===null?N=Mf(u):(y=N.cachePool,y!==null?(L=nn._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=wg(),N={baseLanes:N.baseLanes|u,cachePool:y}),h.memoizedState=N,h.childLanes=Pf(o,C,u),l.memoizedState=jf,zs(o.child,h)):(Bi(l),u=o.child,o=u.sibling,u=ii(u,{mode:"visible",children:h.children}),u.return=l,u.sibling=null,o!==null&&(C=l.deletions,C===null?(l.deletions=[o],l.flags|=16):C.push(o)),l.child=u,l.memoizedState=null,u)}function Bf(o,l){return l=Dc({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function Dc(o,l){return o=nr(22,o,null,l),o.lanes=0,o}function Lf(o,l,u){return Ca(l,o.child,null,u),o=Bf(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function jm(o,l,u){o.lanes|=l;var h=o.alternate;h!==null&&(h.lanes|=l),Qd(o.return,l,u)}function Ff(o,l,u,h,y,b){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:y,treeForkCount:b}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=h,C.tail=u,C.tailMode=y,C.treeForkCount=b)}function Mm(o,l,u){var h=l.pendingProps,y=h.revealOrder,b=h.tail;h=h.children;var C=Zt.current,N=(C&2)!==0;if(N?(C=C&1|2,l.flags|=128):C&=1,ie(Zt,C),Tn(o,l,h,u),h=ct?Os:0,!N&&o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&jm(o,u,l);else if(o.tag===19)jm(o,u,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(y){case"forwards":for(u=l.child,y=null;u!==null;)o=u.alternate,o!==null&&bc(o)===null&&(y=u),u=u.sibling;u=y,u===null?(y=l.child,l.child=null):(y=u.sibling,u.sibling=null),Ff(l,!1,y,u,b,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&bc(o)===null){l.child=y;break}o=y.sibling,y.sibling=u,u=y,y=o}Ff(l,!0,u,null,b,h);break;case"together":Ff(l,!1,null,null,void 0,h);break;default:l.memoizedState=null}return l.child}function ui(o,l,u){if(o!==null&&(l.dependencies=o.dependencies),zi|=l.lanes,(u&l.childLanes)===0)if(o!==null){if(po(o,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,u=ii(o,o.pendingProps),l.child=u,u.return=l;o.sibling!==null;)o=o.sibling,u=u.sibling=ii(o,o.pendingProps),u.return=l;u.sibling=null}return l.child}function Uf(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&fc(o)))}function BE(o,l,u){switch(l.tag){case 3:Ce(l,l.stateNode.containerInfo),ki(l,nn,o.memoizedState.cache),xa();break;case 27:case 5:dt(l);break;case 4:Ce(l,l.stateNode.containerInfo);break;case 10:ki(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,df(l),null;break;case 13:var h=l.memoizedState;if(h!==null)return h.dehydrated!==null?(Bi(l),l.flags|=128,null):(u&l.child.childLanes)!==0?km(o,l,u):(Bi(l),o=ui(o,l,u),o!==null?o.sibling:null);Bi(l);break;case 19:var y=(o.flags&128)!==0;if(h=(u&l.childLanes)!==0,h||(po(o,l,u,!1),h=(u&l.childLanes)!==0),y){if(h)return Mm(o,l,u);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ie(Zt,Zt.current),h)break;return null;case 22:return l.lanes=0,Tm(o,l,u,l.pendingProps);case 24:ki(l,nn,o.memoizedState.cache)}return ui(o,l,u)}function Pm(o,l,u){if(o!==null)if(o.memoizedProps!==l.pendingProps)an=!0;else{if(!Uf(o,u)&&(l.flags&128)===0)return an=!1,BE(o,l,u);an=(o.flags&131072)!==0}else an=!1,ct&&(l.flags&1048576)!==0&&pg(l,Os,l.index);switch(l.lanes=0,l.tag){case 16:e:{var h=l.pendingProps;if(o=Sa(l.elementType),l.type=o,typeof o=="function")$d(o)?(h=Ta(o,h),l.tag=1,l=Im(null,l,o,h,u)):(l.tag=0,l=kf(null,l,o,h,u));else{if(o!=null){var y=o.$$typeof;if(y===R){l.tag=11,l=Em(null,l,o,h,u);break e}else if(y===U){l.tag=14,l=Cm(null,l,o,h,u);break e}}throw l=he(o)||o,Error(r(306,l,""))}}return l;case 0:return kf(o,l,l.type,l.pendingProps,u);case 1:return h=l.type,y=Ta(h,l.pendingProps),Im(o,l,h,y,u);case 3:e:{if(Ce(l,l.stateNode.containerInfo),o===null)throw Error(r(387));h=l.pendingProps;var b=l.memoizedState;y=b.element,of(o,l),Ps(l,h,null,u);var C=l.memoizedState;if(h=C.cache,ki(l,nn,h),h!==b.cache&&Jd(l,[nn],u,!0),Ms(),h=C.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){l=Dm(o,l,h,u);break e}else if(h!==y){y=yr(Error(r(424)),l),Rs(y),l=Dm(o,l,h,u);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Pt=Sr(o.firstChild),Cn=l,ct=!0,Ii=null,wr=!0,u=Tg(l,null,h,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(xa(),h===y){l=ui(o,l,u);break e}Tn(o,l,h,u)}l=l.child}return l;case 26:return Ic(o,l),o===null?(u=Wv(l.type,null,l.pendingProps,null))?l.memoizedState=u:ct||(u=l.type,o=l.pendingProps,h=Xc(se.current).createElement(u),h[En]=l,h[$n]=o,On(h,u,o),xn(h),l.stateNode=h):l.memoizedState=Wv(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return dt(l),o===null&&ct&&(h=l.stateNode=$v(l.type,l.pendingProps,se.current),Cn=l,wr=!0,y=Pt,qi(l.type)?(xh=y,Pt=Sr(h.firstChild)):Pt=y),Tn(o,l,l.pendingProps.children,u),Ic(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&ct&&((y=h=Pt)&&(h=h3(h,l.type,l.pendingProps,wr),h!==null?(l.stateNode=h,Cn=l,Pt=Sr(h.firstChild),wr=!1,y=!0):y=!1),y||Di(l)),dt(l),y=l.type,b=l.pendingProps,C=o!==null?o.memoizedProps:null,h=b.children,ph(y,b)?h=null:C!==null&&ph(y,C)&&(l.flags|=32),l.memoizedState!==null&&(y=hf(o,l,OE,null,null,u),nl._currentValue=y),Ic(o,l),Tn(o,l,h,u),l.child;case 6:return o===null&&ct&&((o=u=Pt)&&(u=p3(u,l.pendingProps,wr),u!==null?(l.stateNode=u,Cn=l,Pt=null,o=!0):o=!1),o||Di(l)),null;case 13:return km(o,l,u);case 4:return Ce(l,l.stateNode.containerInfo),h=l.pendingProps,o===null?l.child=Ca(l,null,h,u):Tn(o,l,h,u),l.child;case 11:return Em(o,l,l.type,l.pendingProps,u);case 7:return Tn(o,l,l.pendingProps,u),l.child;case 8:return Tn(o,l,l.pendingProps.children,u),l.child;case 12:return Tn(o,l,l.pendingProps.children,u),l.child;case 10:return h=l.pendingProps,ki(l,l.type,h.value),Tn(o,l,h.children,u),l.child;case 9:return y=l.type._context,h=l.pendingProps.children,wa(l),y=An(y),h=h(y),l.flags|=1,Tn(o,l,h,u),l.child;case 14:return Cm(o,l,l.type,l.pendingProps,u);case 15:return Am(o,l,l.type,l.pendingProps,u);case 19:return Mm(o,l,u);case 31:return PE(o,l,u);case 22:return Tm(o,l,u,l.pendingProps);case 24:return wa(l),h=An(nn),o===null?(y=nf(),y===null&&(y=It,b=ef(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=u),y=b),l.memoizedState={parent:h,cache:y},af(l),ki(l,nn,y)):((o.lanes&u)!==0&&(of(o,l),Ps(l,null,null,u),Ms()),y=o.memoizedState,b=l.memoizedState,y.parent!==h?(y={parent:h,cache:h},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),ki(l,nn,h)):(h=b.cache,ki(l,nn,h),h!==y.cache&&Jd(l,[nn],u,!0))),Tn(o,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function di(o){o.flags|=4}function zf(o,l,u,h,y){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(y&335544128)===y)if(o.stateNode.complete)o.flags|=8192;else if(cv())o.flags|=8192;else throw Ea=mc,rf}else o.flags&=-16777217}function Bm(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Qv(l))if(cv())o.flags|=8192;else throw Ea=mc,rf}function kc(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?mp():536870912,o.lanes|=l,Ao|=l)}function Vs(o,l){if(!ct)switch(o.tailMode){case"hidden":l=o.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:h.sibling=null}}function Bt(o){var l=o.alternate!==null&&o.alternate.child===o.child,u=0,h=0;if(l)for(var y=o.child;y!==null;)u|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)u|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=h,o.childLanes=u,l}function LE(o,l,u){var h=l.pendingProps;switch(Xd(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(l),null;case 1:return Bt(l),null;case 3:return u=l.stateNode,h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),si(nn),Me(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(o===null||o.child===null)&&(ho(l)?di(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Kd())),Bt(l),null;case 26:var y=l.type,b=l.memoizedState;return o===null?(di(l),b!==null?(Bt(l),Bm(l,b)):(Bt(l),zf(l,y,null,h,u))):b?b!==o.memoizedState?(di(l),Bt(l),Bm(l,b)):(Bt(l),l.flags&=-16777217):(o=o.memoizedProps,o!==h&&di(l),Bt(l),zf(l,y,o,h,u)),null;case 27:if(Ne(l),u=se.current,y=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==h&&di(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return Bt(l),null}o=ge.current,ho(l)?mg(l):(o=$v(y,h,u),l.stateNode=o,di(l))}return Bt(l),null;case 5:if(Ne(l),y=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==h&&di(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return Bt(l),null}if(b=ge.current,ho(l))mg(l);else{var C=Xc(se.current);switch(b){case 1:b=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=C.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof h.is=="string"?C.createElement("select",{is:h.is}):C.createElement("select"),h.multiple?b.multiple=!0:h.size&&(b.size=h.size);break;default:b=typeof h.is=="string"?C.createElement(y,{is:h.is}):C.createElement(y)}}b[En]=l,b[$n]=h;e:for(C=l.child;C!==null;){if(C.tag===5||C.tag===6)b.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===l)break e;for(;C.sibling===null;){if(C.return===null||C.return===l)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}l.stateNode=b;e:switch(On(b,y,h),y){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&di(l)}}return Bt(l),zf(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,u),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==h&&di(l);else{if(typeof h!="string"&&l.stateNode===null)throw Error(r(166));if(o=se.current,ho(l)){if(o=l.stateNode,u=l.memoizedProps,h=null,y=Cn,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}o[En]=l,o=!!(o.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||kv(o.nodeValue,u)),o||Di(l,!0)}else o=Xc(o).createTextNode(h),o[En]=l,l.stateNode=o}return Bt(l),null;case 31:if(u=l.memoizedState,o===null||o.memoizedState!==null){if(h=ho(l),u!==null){if(o===null){if(!h)throw Error(r(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[En]=l}else xa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Bt(l),o=!1}else u=Kd(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=u),o=!0;if(!o)return l.flags&256?(ir(l),l):(ir(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Bt(l),null;case 13:if(h=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=ho(l),h!==null&&h.dehydrated!==null){if(o===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[En]=l}else xa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Bt(l),y=!1}else y=Kd(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(ir(l),l):(ir(l),null)}return ir(l),(l.flags&128)!==0?(l.lanes=u,l):(u=h!==null,o=o!==null&&o.memoizedState!==null,u&&(h=l.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==y&&(h.flags|=2048)),u!==o&&u&&(l.child.flags|=8192),kc(l,l.updateQueue),Bt(l),null);case 4:return Me(),o===null&&ch(l.stateNode.containerInfo),Bt(l),null;case 10:return si(l.type),Bt(l),null;case 19:if(G(Zt),h=l.memoizedState,h===null)return Bt(l),null;if(y=(l.flags&128)!==0,b=h.rendering,b===null)if(y)Vs(h,!1);else{if(Yt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(b=bc(o),b!==null){for(l.flags|=128,Vs(h,!1),o=b.updateQueue,l.updateQueue=o,kc(l,o),l.subtreeFlags=0,o=u,u=l.child;u!==null;)dg(u,o),u=u.sibling;return ie(Zt,Zt.current&1|2),ct&&ai(l,h.treeForkCount),l.child}o=o.sibling}h.tail!==null&&it()>Lc&&(l.flags|=128,y=!0,Vs(h,!1),l.lanes=4194304)}else{if(!y)if(o=bc(b),o!==null){if(l.flags|=128,y=!0,o=o.updateQueue,l.updateQueue=o,kc(l,o),Vs(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!ct)return Bt(l),null}else 2*it()-h.renderingStartTime>Lc&&u!==536870912&&(l.flags|=128,y=!0,Vs(h,!1),l.lanes=4194304);h.isBackwards?(b.sibling=l.child,l.child=b):(o=h.last,o!==null?o.sibling=b:l.child=b,h.last=b)}return h.tail!==null?(o=h.tail,h.rendering=o,h.tail=o.sibling,h.renderingStartTime=it(),o.sibling=null,u=Zt.current,ie(Zt,y?u&1|2:u&1),ct&&ai(l,h.treeForkCount),o):(Bt(l),null);case 22:case 23:return ir(l),uf(),h=l.memoizedState!==null,o!==null?o.memoizedState!==null!==h&&(l.flags|=8192):h&&(l.flags|=8192),h?(u&536870912)!==0&&(l.flags&128)===0&&(Bt(l),l.subtreeFlags&6&&(l.flags|=8192)):Bt(l),u=l.updateQueue,u!==null&&kc(l,u.retryQueue),u=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==u&&(l.flags|=2048),o!==null&&G(_a),null;case 24:return u=null,o!==null&&(u=o.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),si(nn),Bt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function FE(o,l){switch(Xd(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return si(nn),Me(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return Ne(l),null;case 31:if(l.memoizedState!==null){if(ir(l),l.alternate===null)throw Error(r(340));xa()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(ir(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));xa()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return G(Zt),null;case 4:return Me(),null;case 10:return si(l.type),null;case 22:case 23:return ir(l),uf(),o!==null&&G(_a),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return si(nn),null;case 25:return null;default:return null}}function Lm(o,l){switch(Xd(l),l.tag){case 3:si(nn),Me();break;case 26:case 27:case 5:Ne(l);break;case 4:Me();break;case 31:l.memoizedState!==null&&ir(l);break;case 13:ir(l);break;case 19:G(Zt);break;case 10:si(l.type);break;case 22:case 23:ir(l),uf(),o!==null&&G(_a);break;case 24:si(nn)}}function Hs(o,l){try{var u=l.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var y=h.next;u=y;do{if((u.tag&o)===o){h=void 0;var b=u.create,C=u.inst;h=b(),C.destroy=h}u=u.next}while(u!==y)}}catch(N){Et(l,l.return,N)}}function Fi(o,l,u){try{var h=l.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var b=y.next;h=b;do{if((h.tag&o)===o){var C=h.inst,N=C.destroy;if(N!==void 0){C.destroy=void 0,y=l;var L=u,Q=N;try{Q()}catch(re){Et(y,L,re)}}}h=h.next}while(h!==b)}}catch(re){Et(l,l.return,re)}}function Fm(o){var l=o.updateQueue;if(l!==null){var u=o.stateNode;try{Rg(l,u)}catch(h){Et(o,o.return,h)}}}function Um(o,l,u){u.props=Ta(o.type,o.memoizedProps),u.state=o.memoizedState;try{u.componentWillUnmount()}catch(h){Et(o,l,h)}}function $s(o,l){try{var u=o.ref;if(u!==null){switch(o.tag){case 26:case 27:case 5:var h=o.stateNode;break;case 30:h=o.stateNode;break;default:h=o.stateNode}typeof u=="function"?o.refCleanup=u(h):u.current=h}}catch(y){Et(o,l,y)}}function qr(o,l){var u=o.ref,h=o.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(y){Et(o,l,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){Et(o,l,y)}else u.current=null}function zm(o){var l=o.type,u=o.memoizedProps,h=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(y){Et(o,o.return,y)}}function Vf(o,l,u){try{var h=o.stateNode;s3(h,o.type,u,l),h[$n]=l}catch(y){Et(o,o.return,y)}}function Vm(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&qi(o.type)||o.tag===4}function Hf(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Vm(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&qi(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function $f(o,l,u){var h=o.tag;if(h===5||h===6)o=o.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(o,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(o),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=ni));else if(h!==4&&(h===27&&qi(o.type)&&(u=o.stateNode,l=null),o=o.child,o!==null))for($f(o,l,u),o=o.sibling;o!==null;)$f(o,l,u),o=o.sibling}function jc(o,l,u){var h=o.tag;if(h===5||h===6)o=o.stateNode,l?u.insertBefore(o,l):u.appendChild(o);else if(h!==4&&(h===27&&qi(o.type)&&(u=o.stateNode),o=o.child,o!==null))for(jc(o,l,u),o=o.sibling;o!==null;)jc(o,l,u),o=o.sibling}function Hm(o){var l=o.stateNode,u=o.memoizedProps;try{for(var h=o.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);On(l,h,u),l[En]=o,l[$n]=u}catch(b){Et(o,o.return,b)}}var fi=!1,on=!1,Gf=!1,$m=typeof WeakSet=="function"?WeakSet:Set,bn=null;function UE(o,l){if(o=o.containerInfo,fh=tu,o=ng(o),Bd(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var y=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var C=0,N=-1,L=-1,Q=0,re=0,ue=o,J=null;t:for(;;){for(var te;ue!==u||y!==0&&ue.nodeType!==3||(N=C+y),ue!==b||h!==0&&ue.nodeType!==3||(L=C+h),ue.nodeType===3&&(C+=ue.nodeValue.length),(te=ue.firstChild)!==null;)J=ue,ue=te;for(;;){if(ue===o)break t;if(J===u&&++Q===y&&(N=C),J===b&&++re===h&&(L=C),(te=ue.nextSibling)!==null)break;ue=J,J=ue.parentNode}ue=te}u=N===-1||L===-1?null:{start:N,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(hh={focusedElem:o,selectionRange:u},tu=!1,bn=l;bn!==null;)if(l=bn,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,bn=o;else for(;bn!==null;){switch(l=bn,b=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(u=0;u<o.length;u++)y=o[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&b!==null){o=void 0,u=l,y=b.memoizedProps,b=b.memoizedState,h=u.stateNode;try{var Re=Ta(u.type,y);o=h.getSnapshotBeforeUpdate(Re,b),h.__reactInternalSnapshotBeforeUpdate=o}catch($e){Et(u,u.return,$e)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,u=o.nodeType,u===9)mh(o);else if(u===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":mh(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,bn=o;break}bn=l.return}}function Gm(o,l,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:pi(o,u),h&4&&Hs(5,u);break;case 1:if(pi(o,u),h&4)if(o=u.stateNode,l===null)try{o.componentDidMount()}catch(C){Et(u,u.return,C)}else{var y=Ta(u.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(y,l,o.__reactInternalSnapshotBeforeUpdate)}catch(C){Et(u,u.return,C)}}h&64&&Fm(u),h&512&&$s(u,u.return);break;case 3:if(pi(o,u),h&64&&(o=u.updateQueue,o!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{Rg(o,l)}catch(C){Et(u,u.return,C)}}break;case 27:l===null&&h&4&&Hm(u);case 26:case 5:pi(o,u),l===null&&h&4&&zm(u),h&512&&$s(u,u.return);break;case 12:pi(o,u);break;case 31:pi(o,u),h&4&&Xm(o,u);break;case 13:pi(o,u),h&4&&Ym(o,u),h&64&&(o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(u=YE.bind(null,u),g3(o,u))));break;case 22:if(h=u.memoizedState!==null||fi,!h){l=l!==null&&l.memoizedState!==null||on,y=fi;var b=on;fi=h,(on=l)&&!b?gi(o,u,(u.subtreeFlags&8772)!==0):pi(o,u),fi=y,on=b}break;case 30:break;default:pi(o,u)}}function qm(o){var l=o.alternate;l!==null&&(o.alternate=null,qm(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&bd(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ut=null,qn=!1;function hi(o,l,u){for(u=u.child;u!==null;)Wm(o,l,u),u=u.sibling}function Wm(o,l,u){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(Ze,u)}catch{}switch(u.tag){case 26:on||qr(u,l),hi(o,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:on||qr(u,l);var h=Ut,y=qn;qi(u.type)&&(Ut=u.stateNode,qn=!1),hi(o,l,u),Js(u.stateNode),Ut=h,qn=y;break;case 5:on||qr(u,l);case 6:if(h=Ut,y=qn,Ut=null,hi(o,l,u),Ut=h,qn=y,Ut!==null)if(qn)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(u.stateNode)}catch(b){Et(u,l,b)}else try{Ut.removeChild(u.stateNode)}catch(b){Et(u,l,b)}break;case 18:Ut!==null&&(qn?(o=Ut,Fv(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,u.stateNode),jo(o)):Fv(Ut,u.stateNode));break;case 4:h=Ut,y=qn,Ut=u.stateNode.containerInfo,qn=!0,hi(o,l,u),Ut=h,qn=y;break;case 0:case 11:case 14:case 15:Fi(2,u,l),on||Fi(4,u,l),hi(o,l,u);break;case 1:on||(qr(u,l),h=u.stateNode,typeof h.componentWillUnmount=="function"&&Um(u,l,h)),hi(o,l,u);break;case 21:hi(o,l,u);break;case 22:on=(h=on)||u.memoizedState!==null,hi(o,l,u),on=h;break;default:hi(o,l,u)}}function Xm(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{jo(o)}catch(u){Et(l,l.return,u)}}}function Ym(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{jo(o)}catch(u){Et(l,l.return,u)}}function zE(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new $m),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new $m),l;default:throw Error(r(435,o.tag))}}function Mc(o,l){var u=zE(o);l.forEach(function(h){if(!u.has(h)){u.add(h);var y=KE.bind(null,o,h);h.then(y,y)}})}function Wn(o,l){var u=l.deletions;if(u!==null)for(var h=0;h<u.length;h++){var y=u[h],b=o,C=l,N=C;e:for(;N!==null;){switch(N.tag){case 27:if(qi(N.type)){Ut=N.stateNode,qn=!1;break e}break;case 5:Ut=N.stateNode,qn=!1;break e;case 3:case 4:Ut=N.stateNode.containerInfo,qn=!0;break e}N=N.return}if(Ut===null)throw Error(r(160));Wm(b,C,y),Ut=null,qn=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Km(l,o),l=l.sibling}var kr=null;function Km(o,l){var u=o.alternate,h=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Wn(l,o),Xn(o),h&4&&(Fi(3,o,o.return),Hs(3,o),Fi(5,o,o.return));break;case 1:Wn(l,o),Xn(o),h&512&&(on||u===null||qr(u,u.return)),h&64&&fi&&(o=o.updateQueue,o!==null&&(h=o.callbacks,h!==null&&(u=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var y=kr;if(Wn(l,o),Xn(o),h&512&&(on||u===null||qr(u,u.return)),h&4){var b=u!==null?u.memoizedState:null;if(h=o.memoizedState,u===null)if(h===null)if(o.stateNode===null){e:{h=o.type,u=o.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":b=y.getElementsByTagName("title")[0],(!b||b[vs]||b[En]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(h),y.head.insertBefore(b,y.querySelector("head > title"))),On(b,h,u),b[En]=o,xn(b),h=b;break e;case"link":var C=Kv("link","href",y).get(h+(u.href||""));if(C){for(var N=0;N<C.length;N++)if(b=C[N],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(N,1);break t}}b=y.createElement(h),On(b,h,u),y.head.appendChild(b);break;case"meta":if(C=Kv("meta","content",y).get(h+(u.content||""))){for(N=0;N<C.length;N++)if(b=C[N],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(N,1);break t}}b=y.createElement(h),On(b,h,u),y.head.appendChild(b);break;default:throw Error(r(468,h))}b[En]=o,xn(b),h=b}o.stateNode=h}else Zv(y,o.type,o.stateNode);else o.stateNode=Yv(y,h,o.memoizedProps);else b!==h?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,h===null?Zv(y,o.type,o.stateNode):Yv(y,h,o.memoizedProps)):h===null&&o.stateNode!==null&&Vf(o,o.memoizedProps,u.memoizedProps)}break;case 27:Wn(l,o),Xn(o),h&512&&(on||u===null||qr(u,u.return)),u!==null&&h&4&&Vf(o,o.memoizedProps,u.memoizedProps);break;case 5:if(Wn(l,o),Xn(o),h&512&&(on||u===null||qr(u,u.return)),o.flags&32){y=o.stateNode;try{no(y,"")}catch(Re){Et(o,o.return,Re)}}h&4&&o.stateNode!=null&&(y=o.memoizedProps,Vf(o,y,u!==null?u.memoizedProps:y)),h&1024&&(Gf=!0);break;case 6:if(Wn(l,o),Xn(o),h&4){if(o.stateNode===null)throw Error(r(162));h=o.memoizedProps,u=o.stateNode;try{u.nodeValue=h}catch(Re){Et(o,o.return,Re)}}break;case 3:if(Zc=null,y=kr,kr=Yc(l.containerInfo),Wn(l,o),kr=y,Xn(o),h&4&&u!==null&&u.memoizedState.isDehydrated)try{jo(l.containerInfo)}catch(Re){Et(o,o.return,Re)}Gf&&(Gf=!1,Zm(o));break;case 4:h=kr,kr=Yc(o.stateNode.containerInfo),Wn(l,o),Xn(o),kr=h;break;case 12:Wn(l,o),Xn(o);break;case 31:Wn(l,o),Xn(o),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,Mc(o,h)));break;case 13:Wn(l,o),Xn(o),o.child.flags&8192&&o.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Bc=it()),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,Mc(o,h)));break;case 22:y=o.memoizedState!==null;var L=u!==null&&u.memoizedState!==null,Q=fi,re=on;if(fi=Q||y,on=re||L,Wn(l,o),on=re,fi=Q,Xn(o),h&8192)e:for(l=o.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(u===null||L||fi||on||Oa(o)),u=null,l=o;;){if(l.tag===5||l.tag===26){if(u===null){L=u=l;try{if(b=L.stateNode,y)C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{N=L.stateNode;var ue=L.memoizedProps.style,J=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;N.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Re){Et(L,L.return,Re)}}}else if(l.tag===6){if(u===null){L=l;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(Re){Et(L,L.return,Re)}}}else if(l.tag===18){if(u===null){L=l;try{var te=L.stateNode;y?Uv(te,!0):Uv(L.stateNode,!1)}catch(Re){Et(L,L.return,Re)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}h&4&&(h=o.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Mc(o,u))));break;case 19:Wn(l,o),Xn(o),h&4&&(h=o.updateQueue,h!==null&&(o.updateQueue=null,Mc(o,h)));break;case 30:break;case 21:break;default:Wn(l,o),Xn(o)}}function Xn(o){var l=o.flags;if(l&2){try{for(var u,h=o.return;h!==null;){if(Vm(h)){u=h;break}h=h.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var y=u.stateNode,b=Hf(o);jc(o,b,y);break;case 5:var C=u.stateNode;u.flags&32&&(no(C,""),u.flags&=-33);var N=Hf(o);jc(o,N,C);break;case 3:case 4:var L=u.stateNode.containerInfo,Q=Hf(o);$f(o,Q,L);break;default:throw Error(r(161))}}catch(re){Et(o,o.return,re)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function Zm(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;Zm(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function pi(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Gm(o,l.alternate,l),l=l.sibling}function Oa(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:Fi(4,l,l.return),Oa(l);break;case 1:qr(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&Um(l,l.return,u),Oa(l);break;case 27:Js(l.stateNode);case 26:case 5:qr(l,l.return),Oa(l);break;case 22:l.memoizedState===null&&Oa(l);break;case 30:Oa(l);break;default:Oa(l)}o=o.sibling}}function gi(o,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var h=l.alternate,y=o,b=l,C=b.flags;switch(b.tag){case 0:case 11:case 15:gi(y,b,u),Hs(4,b);break;case 1:if(gi(y,b,u),h=b,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Q){Et(h,h.return,Q)}if(h=b,y=h.updateQueue,y!==null){var N=h.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)Og(L[y],N)}catch(Q){Et(h,h.return,Q)}}u&&C&64&&Fm(b),$s(b,b.return);break;case 27:Hm(b);case 26:case 5:gi(y,b,u),u&&h===null&&C&4&&zm(b),$s(b,b.return);break;case 12:gi(y,b,u);break;case 31:gi(y,b,u),u&&C&4&&Xm(y,b);break;case 13:gi(y,b,u),u&&C&4&&Ym(y,b);break;case 22:b.memoizedState===null&&gi(y,b,u),$s(b,b.return);break;case 30:break;default:gi(y,b,u)}l=l.sibling}}function qf(o,l){var u=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==u&&(o!=null&&o.refCount++,u!=null&&Ns(u))}function Wf(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Ns(o))}function jr(o,l,u,h){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Qm(o,l,u,h),l=l.sibling}function Qm(o,l,u,h){var y=l.flags;switch(l.tag){case 0:case 11:case 15:jr(o,l,u,h),y&2048&&Hs(9,l);break;case 1:jr(o,l,u,h);break;case 3:jr(o,l,u,h),y&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Ns(o)));break;case 12:if(y&2048){jr(o,l,u,h),o=l.stateNode;try{var b=l.memoizedProps,C=b.id,N=b.onPostCommit;typeof N=="function"&&N(C,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(L){Et(l,l.return,L)}}else jr(o,l,u,h);break;case 31:jr(o,l,u,h);break;case 13:jr(o,l,u,h);break;case 23:break;case 22:b=l.stateNode,C=l.alternate,l.memoizedState!==null?b._visibility&2?jr(o,l,u,h):Gs(o,l):b._visibility&2?jr(o,l,u,h):(b._visibility|=2,So(o,l,u,h,(l.subtreeFlags&10256)!==0||!1)),y&2048&&qf(C,l);break;case 24:jr(o,l,u,h),y&2048&&Wf(l.alternate,l);break;default:jr(o,l,u,h)}}function So(o,l,u,h,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var b=o,C=l,N=u,L=h,Q=C.flags;switch(C.tag){case 0:case 11:case 15:So(b,C,N,L,y),Hs(8,C);break;case 23:break;case 22:var re=C.stateNode;C.memoizedState!==null?re._visibility&2?So(b,C,N,L,y):Gs(b,C):(re._visibility|=2,So(b,C,N,L,y)),y&&Q&2048&&qf(C.alternate,C);break;case 24:So(b,C,N,L,y),y&&Q&2048&&Wf(C.alternate,C);break;default:So(b,C,N,L,y)}l=l.sibling}}function Gs(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=o,h=l,y=h.flags;switch(h.tag){case 22:Gs(u,h),y&2048&&qf(h.alternate,h);break;case 24:Gs(u,h),y&2048&&Wf(h.alternate,h);break;default:Gs(u,h)}l=l.sibling}}var qs=8192;function Eo(o,l,u){if(o.subtreeFlags&qs)for(o=o.child;o!==null;)Jm(o,l,u),o=o.sibling}function Jm(o,l,u){switch(o.tag){case 26:Eo(o,l,u),o.flags&qs&&o.memoizedState!==null&&T3(u,kr,o.memoizedState,o.memoizedProps);break;case 5:Eo(o,l,u);break;case 3:case 4:var h=kr;kr=Yc(o.stateNode.containerInfo),Eo(o,l,u),kr=h;break;case 22:o.memoizedState===null&&(h=o.alternate,h!==null&&h.memoizedState!==null?(h=qs,qs=16777216,Eo(o,l,u),qs=h):Eo(o,l,u));break;default:Eo(o,l,u)}}function ev(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Ws(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var h=l[u];bn=h,nv(h,o)}ev(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)tv(o),o=o.sibling}function tv(o){switch(o.tag){case 0:case 11:case 15:Ws(o),o.flags&2048&&Fi(9,o,o.return);break;case 3:Ws(o);break;case 12:Ws(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Pc(o)):Ws(o);break;default:Ws(o)}}function Pc(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var h=l[u];bn=h,nv(h,o)}ev(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:Fi(8,l,l.return),Pc(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Pc(l));break;default:Pc(l)}o=o.sibling}}function nv(o,l){for(;bn!==null;){var u=bn;switch(u.tag){case 0:case 11:case 15:Fi(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Ns(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,bn=h;else e:for(u=o;bn!==null;){h=bn;var y=h.sibling,b=h.return;if(qm(h),h===u){bn=null;break e}if(y!==null){y.return=b,bn=y;break e}bn=b}}}var VE={getCacheForType:function(o){var l=An(nn),u=l.data.get(o);return u===void 0&&(u=o(),l.data.set(o,u)),u},cacheSignal:function(){return An(nn).controller.signal}},HE=typeof WeakMap=="function"?WeakMap:Map,yt=0,It=null,at=null,st=0,St=0,ar=null,Ui=!1,Co=!1,Xf=!1,mi=0,Yt=0,zi=0,Ra=0,Yf=0,or=0,Ao=0,Xs=null,Yn=null,Kf=!1,Bc=0,rv=0,Lc=1/0,Fc=null,Vi=null,dn=0,Hi=null,To=null,vi=0,Zf=0,Qf=null,iv=null,Ys=0,Jf=null;function sr(){return(yt&2)!==0&&st!==0?st&-st:V.T!==null?ah():bp()}function av(){if(or===0)if((st&536870912)===0||ct){var o=Wl;Wl<<=1,(Wl&3932160)===0&&(Wl=262144),or=o}else or=536870912;return o=rr.current,o!==null&&(o.flags|=32),or}function Kn(o,l,u){(o===It&&(St===2||St===9)||o.cancelPendingCommit!==null)&&(Oo(o,0),$i(o,st,or,!1)),ms(o,u),((yt&2)===0||o!==It)&&(o===It&&((yt&2)===0&&(Ra|=u),Yt===4&&$i(o,st,or,!1)),Wr(o))}function ov(o,l,u){if((yt&6)!==0)throw Error(r(327));var h=!u&&(l&127)===0&&(l&o.expiredLanes)===0||gs(o,l),y=h?qE(o,l):th(o,l,!0),b=h;do{if(y===0){Co&&!h&&$i(o,l,0,!1);break}else{if(u=o.current.alternate,b&&!$E(u)){y=th(o,l,!1),b=!1;continue}if(y===2){if(b=l,o.errorRecoveryDisabledLanes&b)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;e:{var N=o;y=Xs;var L=N.current.memoizedState.isDehydrated;if(L&&(Oo(N,C).flags|=256),C=th(N,C,!1),C!==2){if(Xf&&!L){N.errorRecoveryDisabledLanes|=b,Ra|=b,y=4;break e}b=Yn,Yn=y,b!==null&&(Yn===null?Yn=b:Yn.push.apply(Yn,b))}y=C}if(b=!1,y!==2)continue}}if(y===1){Oo(o,0),$i(o,l,0,!0);break}e:{switch(h=o,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:$i(h,l,or,!Ui);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=Bc+300-it(),10<y)){if($i(h,l,or,!Ui),Yl(h,0,!0)!==0)break e;vi=l,h.timeoutHandle=Bv(sv.bind(null,h,u,Yn,Fc,Kf,l,or,Ra,Ao,Ui,b,"Throttled",-0,0),y);break e}sv(h,u,Yn,Fc,Kf,l,or,Ra,Ao,Ui,b,null,-0,0)}}break}while(!0);Wr(o)}function sv(o,l,u,h,y,b,C,N,L,Q,re,ue,J,te){if(o.timeoutHandle=-1,ue=l.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ni},Jm(l,b,ue);var Re=(b&62914560)===b?Bc-it():(b&4194048)===b?rv-it():0;if(Re=O3(ue,Re),Re!==null){vi=b,o.cancelPendingCommit=Re(gv.bind(null,o,l,b,u,h,y,C,N,L,re,ue,null,J,te)),$i(o,b,C,!Q);return}}gv(o,l,b,u,h,y,C,N,L)}function $E(o){for(var l=o;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var y=u[h],b=y.getSnapshot;y=y.value;try{if(!tr(b(),y))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function $i(o,l,u,h){l&=~Yf,l&=~Ra,o.suspendedLanes|=l,o.pingedLanes&=~l,h&&(o.warmLanes|=l),h=o.expirationTimes;for(var y=l;0<y;){var b=31-wt(y),C=1<<b;h[b]=-1,y&=~C}u!==0&&vp(o,u,l)}function Uc(){return(yt&6)===0?(Ks(0),!1):!0}function eh(){if(at!==null){if(St===0)var o=at.return;else o=at,oi=ba=null,mf(o),yo=null,Ds=0,o=at;for(;o!==null;)Lm(o.alternate,o),o=o.return;at=null}}function Oo(o,l){var u=o.timeoutHandle;u!==-1&&(o.timeoutHandle=-1,u3(u)),u=o.cancelPendingCommit,u!==null&&(o.cancelPendingCommit=null,u()),vi=0,eh(),It=o,at=u=ii(o.current,null),st=l,St=0,ar=null,Ui=!1,Co=gs(o,l),Xf=!1,Ao=or=Yf=Ra=zi=Yt=0,Yn=Xs=null,Kf=!1,(l&8)!==0&&(l|=l&32);var h=o.entangledLanes;if(h!==0)for(o=o.entanglements,h&=l;0<h;){var y=31-wt(h),b=1<<y;l|=o[y],h&=~b}return mi=l,sc(),u}function lv(o,l){Xe=null,V.H=Us,l===vo||l===gc?(l=Eg(),St=3):l===rf?(l=Eg(),St=4):St=l===Df?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ar=l,at===null&&(Yt=1,Rc(o,yr(l,o.current)))}function cv(){var o=rr.current;return o===null?!0:(st&4194048)===st?_r===null:(st&62914560)===st||(st&536870912)!==0?o===_r:!1}function uv(){var o=V.H;return V.H=Us,o===null?Us:o}function dv(){var o=V.A;return V.A=VE,o}function zc(){Yt=4,Ui||(st&4194048)!==st&&rr.current!==null||(Co=!0),(zi&134217727)===0&&(Ra&134217727)===0||It===null||$i(It,st,or,!1)}function th(o,l,u){var h=yt;yt|=2;var y=uv(),b=dv();(It!==o||st!==l)&&(Fc=null,Oo(o,l)),l=!1;var C=Yt;e:do try{if(St!==0&&at!==null){var N=at,L=ar;switch(St){case 8:eh(),C=6;break e;case 3:case 2:case 9:case 6:rr.current===null&&(l=!0);var Q=St;if(St=0,ar=null,Ro(o,N,L,Q),u&&Co){C=0;break e}break;default:Q=St,St=0,ar=null,Ro(o,N,L,Q)}}GE(),C=Yt;break}catch(re){lv(o,re)}while(!0);return l&&o.shellSuspendCounter++,oi=ba=null,yt=h,V.H=y,V.A=b,at===null&&(It=null,st=0,sc()),C}function GE(){for(;at!==null;)fv(at)}function qE(o,l){var u=yt;yt|=2;var h=uv(),y=dv();It!==o||st!==l?(Fc=null,Lc=it()+500,Oo(o,l)):Co=gs(o,l);e:do try{if(St!==0&&at!==null){l=at;var b=ar;t:switch(St){case 1:St=0,ar=null,Ro(o,l,b,1);break;case 2:case 9:if(_g(b)){St=0,ar=null,hv(l);break}l=function(){St!==2&&St!==9||It!==o||(St=7),Wr(o)},b.then(l,l);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:_g(b)?(St=0,ar=null,hv(l)):(St=0,ar=null,Ro(o,l,b,7));break;case 5:var C=null;switch(at.tag){case 26:C=at.memoizedState;case 5:case 27:var N=at;if(C?Qv(C):N.stateNode.complete){St=0,ar=null;var L=N.sibling;if(L!==null)at=L;else{var Q=N.return;Q!==null?(at=Q,Vc(Q)):at=null}break t}}St=0,ar=null,Ro(o,l,b,5);break;case 6:St=0,ar=null,Ro(o,l,b,6);break;case 8:eh(),Yt=6;break e;default:throw Error(r(462))}}WE();break}catch(re){lv(o,re)}while(!0);return oi=ba=null,V.H=h,V.A=y,yt=u,at!==null?0:(It=null,st=0,sc(),Yt)}function WE(){for(;at!==null&&!et();)fv(at)}function fv(o){var l=Pm(o.alternate,o,mi);o.memoizedProps=o.pendingProps,l===null?Vc(o):at=l}function hv(o){var l=o,u=l.alternate;switch(l.tag){case 15:case 0:l=Nm(u,l,l.pendingProps,l.type,void 0,st);break;case 11:l=Nm(u,l,l.pendingProps,l.type.render,l.ref,st);break;case 5:mf(l);default:Lm(u,l),l=at=dg(l,mi),l=Pm(u,l,mi)}o.memoizedProps=o.pendingProps,l===null?Vc(o):at=l}function Ro(o,l,u,h){oi=ba=null,mf(l),yo=null,Ds=0;var y=l.return;try{if(ME(o,y,l,u,st)){Yt=1,Rc(o,yr(u,o.current)),at=null;return}}catch(b){if(y!==null)throw at=y,b;Yt=1,Rc(o,yr(u,o.current)),at=null;return}l.flags&32768?(ct||h===1?o=!0:Co||(st&536870912)!==0?o=!1:(Ui=o=!0,(h===2||h===9||h===3||h===6)&&(h=rr.current,h!==null&&h.tag===13&&(h.flags|=16384))),pv(l,o)):Vc(l)}function Vc(o){var l=o;do{if((l.flags&32768)!==0){pv(l,Ui);return}o=l.return;var u=LE(l.alternate,l,mi);if(u!==null){at=u;return}if(l=l.sibling,l!==null){at=l;return}at=l=o}while(l!==null);Yt===0&&(Yt=5)}function pv(o,l){do{var u=FE(o.alternate,o);if(u!==null){u.flags&=32767,at=u;return}if(u=o.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(o=o.sibling,o!==null)){at=o;return}at=o=u}while(o!==null);Yt=6,at=null}function gv(o,l,u,h,y,b,C,N,L){o.cancelPendingCommit=null;do Hc();while(dn!==0);if((yt&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(b=l.lanes|l.childLanes,b|=Vd,AS(o,u,b,C,N,L),o===It&&(at=It=null,st=0),To=l,Hi=o,vi=u,Zf=b,Qf=y,iv=h,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,ZE(ve,function(){return bv(),null})):(o.callbackNode=null,o.callbackPriority=0),h=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||h){h=V.T,V.T=null,y=B.p,B.p=2,C=yt,yt|=4;try{UE(o,l,u)}finally{yt=C,B.p=y,V.T=h}}dn=1,mv(),vv(),yv()}}function mv(){if(dn===1){dn=0;var o=Hi,l=To,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=V.T,V.T=null;var h=B.p;B.p=2;var y=yt;yt|=4;try{Km(l,o);var b=hh,C=ng(o.containerInfo),N=b.focusedElem,L=b.selectionRange;if(C!==N&&N&&N.ownerDocument&&tg(N.ownerDocument.documentElement,N)){if(L!==null&&Bd(N)){var Q=L.start,re=L.end;if(re===void 0&&(re=Q),"selectionStart"in N)N.selectionStart=Q,N.selectionEnd=Math.min(re,N.value.length);else{var ue=N.ownerDocument||document,J=ue&&ue.defaultView||window;if(J.getSelection){var te=J.getSelection(),Re=N.textContent.length,$e=Math.min(L.start,Re),Rt=L.end===void 0?$e:Math.min(L.end,Re);!te.extend&&$e>Rt&&(C=Rt,Rt=$e,$e=C);var X=eg(N,$e),$=eg(N,Rt);if(X&&$&&(te.rangeCount!==1||te.anchorNode!==X.node||te.anchorOffset!==X.offset||te.focusNode!==$.node||te.focusOffset!==$.offset)){var Z=ue.createRange();Z.setStart(X.node,X.offset),te.removeAllRanges(),$e>Rt?(te.addRange(Z),te.extend($.node,$.offset)):(Z.setEnd($.node,$.offset),te.addRange(Z))}}}}for(ue=[],te=N;te=te.parentNode;)te.nodeType===1&&ue.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ue.length;N++){var oe=ue[N];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}tu=!!fh,hh=fh=null}finally{yt=y,B.p=h,V.T=u}}o.current=l,dn=2}}function vv(){if(dn===2){dn=0;var o=Hi,l=To,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=V.T,V.T=null;var h=B.p;B.p=2;var y=yt;yt|=4;try{Gm(o,l.alternate,l)}finally{yt=y,B.p=h,V.T=u}}dn=3}}function yv(){if(dn===4||dn===3){dn=0,ft();var o=Hi,l=To,u=vi,h=iv;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?dn=5:(dn=0,To=Hi=null,xv(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(Vi=null),yd(u),l=l.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(Ze,l,void 0,(l.current.flags&128)===128)}catch{}if(h!==null){l=V.T,y=B.p,B.p=2,V.T=null;try{for(var b=o.onRecoverableError,C=0;C<h.length;C++){var N=h[C];b(N.value,{componentStack:N.stack})}}finally{V.T=l,B.p=y}}(vi&3)!==0&&Hc(),Wr(o),y=o.pendingLanes,(u&261930)!==0&&(y&42)!==0?o===Jf?Ys++:(Ys=0,Jf=o):Ys=0,Ks(0)}}function xv(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Ns(l)))}function Hc(){return mv(),vv(),yv(),bv()}function bv(){if(dn!==5)return!1;var o=Hi,l=Zf;Zf=0;var u=yd(vi),h=V.T,y=B.p;try{B.p=32>u?32:u,V.T=null,u=Qf,Qf=null;var b=Hi,C=vi;if(dn=0,To=Hi=null,vi=0,(yt&6)!==0)throw Error(r(331));var N=yt;if(yt|=4,tv(b.current),Qm(b,b.current,C,u),yt=N,Ks(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(Ze,b)}catch{}return!0}finally{B.p=y,V.T=h,xv(o,l)}}function wv(o,l,u){l=yr(u,l),l=If(o.stateNode,l,2),o=Pi(o,l,2),o!==null&&(ms(o,2),Wr(o))}function Et(o,l,u){if(o.tag===3)wv(o,o,u);else for(;l!==null;){if(l.tag===3){wv(l,o,u);break}else if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Vi===null||!Vi.has(h))){o=yr(u,o),u=_m(2),h=Pi(l,u,2),h!==null&&(Sm(u,h,l,o),ms(h,2),Wr(h));break}}l=l.return}}function nh(o,l,u){var h=o.pingCache;if(h===null){h=o.pingCache=new HE;var y=new Set;h.set(l,y)}else y=h.get(l),y===void 0&&(y=new Set,h.set(l,y));y.has(u)||(Xf=!0,y.add(u),o=XE.bind(null,o,l,u),l.then(o,o))}function XE(o,l,u){var h=o.pingCache;h!==null&&h.delete(l),o.pingedLanes|=o.suspendedLanes&u,o.warmLanes&=~u,It===o&&(st&u)===u&&(Yt===4||Yt===3&&(st&62914560)===st&&300>it()-Bc?(yt&2)===0&&Oo(o,0):Yf|=u,Ao===st&&(Ao=0)),Wr(o)}function _v(o,l){l===0&&(l=mp()),o=va(o,l),o!==null&&(ms(o,l),Wr(o))}function YE(o){var l=o.memoizedState,u=0;l!==null&&(u=l.retryLane),_v(o,u)}function KE(o,l){var u=0;switch(o.tag){case 31:case 13:var h=o.stateNode,y=o.memoizedState;y!==null&&(u=y.retryLane);break;case 19:h=o.stateNode;break;case 22:h=o.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(l),_v(o,u)}function ZE(o,l){return Ee(o,l)}var $c=null,No=null,rh=!1,Gc=!1,ih=!1,Gi=0;function Wr(o){o!==No&&o.next===null&&(No===null?$c=No=o:No=No.next=o),Gc=!0,rh||(rh=!0,JE())}function Ks(o,l){if(!ih&&Gc){ih=!0;do for(var u=!1,h=$c;h!==null;){if(o!==0){var y=h.pendingLanes;if(y===0)var b=0;else{var C=h.suspendedLanes,N=h.pingedLanes;b=(1<<31-wt(42|o)+1)-1,b&=y&~(C&~N),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,Av(h,b))}else b=st,b=Yl(h,h===It?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||gs(h,b)||(u=!0,Av(h,b));h=h.next}while(u);ih=!1}}function QE(){Sv()}function Sv(){Gc=rh=!1;var o=0;Gi!==0&&c3()&&(o=Gi);for(var l=it(),u=null,h=$c;h!==null;){var y=h.next,b=Ev(h,l);b===0?(h.next=null,u===null?$c=y:u.next=y,y===null&&(No=u)):(u=h,(o!==0||(b&3)!==0)&&(Gc=!0)),h=y}dn!==0&&dn!==5||Ks(o),Gi!==0&&(Gi=0)}function Ev(o,l){for(var u=o.suspendedLanes,h=o.pingedLanes,y=o.expirationTimes,b=o.pendingLanes&-62914561;0<b;){var C=31-wt(b),N=1<<C,L=y[C];L===-1?((N&u)===0||(N&h)!==0)&&(y[C]=CS(N,l)):L<=l&&(o.expiredLanes|=N),b&=~N}if(l=It,u=st,u=Yl(o,o===l?u:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h=o.callbackNode,u===0||o===l&&(St===2||St===9)||o.cancelPendingCommit!==null)return h!==null&&h!==null&&He(h),o.callbackNode=null,o.callbackPriority=0;if((u&3)===0||gs(o,u)){if(l=u&-u,l===o.callbackPriority)return l;switch(h!==null&&He(h),yd(u)){case 2:case 8:u=le;break;case 32:u=ve;break;case 268435456:u=Se;break;default:u=ve}return h=Cv.bind(null,o),u=Ee(u,h),o.callbackPriority=l,o.callbackNode=u,l}return h!==null&&h!==null&&He(h),o.callbackPriority=2,o.callbackNode=null,2}function Cv(o,l){if(dn!==0&&dn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var u=o.callbackNode;if(Hc()&&o.callbackNode!==u)return null;var h=st;return h=Yl(o,o===It?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),h===0?null:(ov(o,h,l),Ev(o,it()),o.callbackNode!=null&&o.callbackNode===u?Cv.bind(null,o):null)}function Av(o,l){if(Hc())return null;ov(o,l,!0)}function JE(){d3(function(){(yt&6)!==0?Ee(z,QE):Sv()})}function ah(){if(Gi===0){var o=go;o===0&&(o=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),Gi=o}return Gi}function Tv(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Jl(""+o)}function Ov(o,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,o.id&&u.setAttribute("form",o.id),l.parentNode.insertBefore(u,l),o=new FormData(o),u.parentNode.removeChild(u),o}function e3(o,l,u,h,y){if(l==="submit"&&u&&u.stateNode===y){var b=Tv((y[$n]||null).action),C=h.submitter;C&&(l=(l=C[$n]||null)?Tv(l.formAction):C.getAttribute("formAction"),l!==null&&(b=l,C=null));var N=new rc("action","action",null,h,y);o.push({event:N,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Gi!==0){var L=C?Ov(y,C):new FormData(y);Cf(u,{pending:!0,data:L,method:y.method,action:b},null,L)}}else typeof b=="function"&&(N.preventDefault(),L=C?Ov(y,C):new FormData(y),Cf(u,{pending:!0,data:L,method:y.method,action:b},b,L))},currentTarget:y}]})}}for(var oh=0;oh<zd.length;oh++){var sh=zd[oh],t3=sh.toLowerCase(),n3=sh[0].toUpperCase()+sh.slice(1);Dr(t3,"on"+n3)}Dr(ag,"onAnimationEnd"),Dr(og,"onAnimationIteration"),Dr(sg,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(yE,"onTransitionRun"),Dr(xE,"onTransitionStart"),Dr(bE,"onTransitionCancel"),Dr(lg,"onTransitionEnd"),eo("onMouseEnter",["mouseout","mouseover"]),eo("onMouseLeave",["mouseout","mouseover"]),eo("onPointerEnter",["pointerout","pointerover"]),eo("onPointerLeave",["pointerout","pointerover"]),ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ha("onBeforeInput",["compositionend","keypress","textInput","paste"]),ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zs));function Rv(o,l){l=(l&4)!==0;for(var u=0;u<o.length;u++){var h=o[u],y=h.event;h=h.listeners;e:{var b=void 0;if(l)for(var C=h.length-1;0<=C;C--){var N=h[C],L=N.instance,Q=N.currentTarget;if(N=N.listener,L!==b&&y.isPropagationStopped())break e;b=N,y.currentTarget=Q;try{b(y)}catch(re){oc(re)}y.currentTarget=null,b=L}else for(C=0;C<h.length;C++){if(N=h[C],L=N.instance,Q=N.currentTarget,N=N.listener,L!==b&&y.isPropagationStopped())break e;b=N,y.currentTarget=Q;try{b(y)}catch(re){oc(re)}y.currentTarget=null,b=L}}}}function ot(o,l){var u=l[xd];u===void 0&&(u=l[xd]=new Set);var h=o+"__bubble";u.has(h)||(Nv(l,o,2,!1),u.add(h))}function lh(o,l,u){var h=0;l&&(h|=4),Nv(u,o,h,l)}var qc="_reactListening"+Math.random().toString(36).slice(2);function ch(o){if(!o[qc]){o[qc]=!0,Sp.forEach(function(u){u!=="selectionchange"&&(r3.has(u)||lh(u,!1,o),lh(u,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[qc]||(l[qc]=!0,lh("selectionchange",!1,l))}}function Nv(o,l,u,h){switch(ay(l)){case 2:var y=I3;break;case 8:y=D3;break;default:y=Eh}u=y.bind(null,l,u,o),y=void 0,!Od||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),h?y!==void 0?o.addEventListener(l,u,{capture:!0,passive:y}):o.addEventListener(l,u,!0):y!==void 0?o.addEventListener(l,u,{passive:y}):o.addEventListener(l,u,!1)}function uh(o,l,u,h,y){var b=h;if((l&1)===0&&(l&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var N=h.stateNode.containerInfo;if(N===y)break;if(C===4)for(C=h.return;C!==null;){var L=C.tag;if((L===3||L===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;N!==null;){if(C=Za(N),C===null)return;if(L=C.tag,L===5||L===6||L===26||L===27){h=b=C;continue e}N=N.parentNode}}h=h.return}Mp(function(){var Q=b,re=Ad(u),ue=[];e:{var J=cg.get(o);if(J!==void 0){var te=rc,Re=o;switch(o){case"keypress":if(tc(u)===0)break e;case"keydown":case"keyup":te=KS;break;case"focusin":Re="focus",te=Dd;break;case"focusout":Re="blur",te=Dd;break;case"beforeblur":case"afterblur":te=Dd;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=LS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=JS;break;case ag:case og:case sg:te=zS;break;case lg:te=tE;break;case"scroll":case"scrollend":te=PS;break;case"wheel":te=rE;break;case"copy":case"cut":case"paste":te=HS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Up;break;case"toggle":case"beforetoggle":te=aE}var $e=(l&4)!==0,Rt=!$e&&(o==="scroll"||o==="scrollend"),X=$e?J!==null?J+"Capture":null:J;$e=[];for(var $=Q,Z;$!==null;){var oe=$;if(Z=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Z===null||X===null||(oe=xs($,X),oe!=null&&$e.push(Qs($,oe,Z))),Rt)break;$=$.return}0<$e.length&&(J=new te(J,Re,null,u,re),ue.push({event:J,listeners:$e}))}}if((l&7)===0){e:{if(J=o==="mouseover"||o==="pointerover",te=o==="mouseout"||o==="pointerout",J&&u!==Cd&&(Re=u.relatedTarget||u.fromElement)&&(Za(Re)||Re[Ka]))break e;if((te||J)&&(J=re.window===re?re:(J=re.ownerDocument)?J.defaultView||J.parentWindow:window,te?(Re=u.relatedTarget||u.toElement,te=Q,Re=Re?Za(Re):null,Re!==null&&(Rt=a(Re),$e=Re.tag,Re!==Rt||$e!==5&&$e!==27&&$e!==6)&&(Re=null)):(te=null,Re=Q),te!==Re)){if($e=Lp,oe="onMouseLeave",X="onMouseEnter",$="mouse",(o==="pointerout"||o==="pointerover")&&($e=Up,oe="onPointerLeave",X="onPointerEnter",$="pointer"),Rt=te==null?J:ys(te),Z=Re==null?J:ys(Re),J=new $e(oe,$+"leave",te,u,re),J.target=Rt,J.relatedTarget=Z,oe=null,Za(re)===Q&&($e=new $e(X,$+"enter",Re,u,re),$e.target=Z,$e.relatedTarget=Rt,oe=$e),Rt=oe,te&&Re)t:{for($e=i3,X=te,$=Re,Z=0,oe=X;oe;oe=$e(oe))Z++;oe=0;for(var Pe=$;Pe;Pe=$e(Pe))oe++;for(;0<Z-oe;)X=$e(X),Z--;for(;0<oe-Z;)$=$e($),oe--;for(;Z--;){if(X===$||$!==null&&X===$.alternate){$e=X;break t}X=$e(X),$=$e($)}$e=null}else $e=null;te!==null&&Iv(ue,J,te,$e,!1),Re!==null&&Rt!==null&&Iv(ue,Rt,Re,$e,!0)}}e:{if(J=Q?ys(Q):window,te=J.nodeName&&J.nodeName.toLowerCase(),te==="select"||te==="input"&&J.type==="file")var gt=Xp;else if(qp(J))if(Yp)gt=gE;else{gt=hE;var ke=fE}else te=J.nodeName,!te||te.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Q&&Ed(Q.elementType)&&(gt=Xp):gt=pE;if(gt&&(gt=gt(o,Q))){Wp(ue,gt,u,re);break e}ke&&ke(o,J,Q),o==="focusout"&&Q&&J.type==="number"&&Q.memoizedProps.value!=null&&Sd(J,"number",J.value)}switch(ke=Q?ys(Q):window,o){case"focusin":(qp(ke)||ke.contentEditable==="true")&&(oo=ke,Ld=Q,Ts=null);break;case"focusout":Ts=Ld=oo=null;break;case"mousedown":Fd=!0;break;case"contextmenu":case"mouseup":case"dragend":Fd=!1,rg(ue,u,re);break;case"selectionchange":if(vE)break;case"keydown":case"keyup":rg(ue,u,re)}var Qe;if(jd)e:{switch(o){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else ao?$p(o,u)&&(lt="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(lt="onCompositionStart");lt&&(zp&&u.locale!=="ko"&&(ao||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&ao&&(Qe=Pp()):(Ri=re,Rd="value"in Ri?Ri.value:Ri.textContent,ao=!0)),ke=Wc(Q,lt),0<ke.length&&(lt=new Fp(lt,o,null,u,re),ue.push({event:lt,listeners:ke}),Qe?lt.data=Qe:(Qe=Gp(u),Qe!==null&&(lt.data=Qe)))),(Qe=sE?lE(o,u):cE(o,u))&&(lt=Wc(Q,"onBeforeInput"),0<lt.length&&(ke=new Fp("onBeforeInput","beforeinput",null,u,re),ue.push({event:ke,listeners:lt}),ke.data=Qe)),e3(ue,o,Q,u,re)}Rv(ue,l)})}function Qs(o,l,u){return{instance:o,listener:l,currentTarget:u}}function Wc(o,l){for(var u=l+"Capture",h=[];o!==null;){var y=o,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=xs(o,u),y!=null&&h.unshift(Qs(o,y,b)),y=xs(o,l),y!=null&&h.push(Qs(o,y,b))),o.tag===3)return h;o=o.return}return[]}function i3(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Iv(o,l,u,h,y){for(var b=l._reactName,C=[];u!==null&&u!==h;){var N=u,L=N.alternate,Q=N.stateNode;if(N=N.tag,L!==null&&L===h)break;N!==5&&N!==26&&N!==27||Q===null||(L=Q,y?(Q=xs(u,b),Q!=null&&C.unshift(Qs(u,Q,L))):y||(Q=xs(u,b),Q!=null&&C.push(Qs(u,Q,L)))),u=u.return}C.length!==0&&o.push({event:l,listeners:C})}var a3=/\r\n?/g,o3=/\u0000|\uFFFD/g;function Dv(o){return(typeof o=="string"?o:""+o).replace(a3,`
`).replace(o3,"")}function kv(o,l){return l=Dv(l),Dv(o)===l}function Ot(o,l,u,h,y,b){switch(u){case"children":typeof h=="string"?l==="body"||l==="textarea"&&h===""||no(o,h):(typeof h=="number"||typeof h=="bigint")&&l!=="body"&&no(o,""+h);break;case"className":Zl(o,"class",h);break;case"tabIndex":Zl(o,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Zl(o,u,h);break;case"style":kp(o,h,b);break;case"data":if(l!=="object"){Zl(o,"data",h);break}case"src":case"href":if(h===""&&(l!=="a"||u!=="href")){o.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(u);break}h=Jl(""+h),o.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){o.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(l!=="input"&&Ot(o,l,"name",y.name,y,null),Ot(o,l,"formEncType",y.formEncType,y,null),Ot(o,l,"formMethod",y.formMethod,y,null),Ot(o,l,"formTarget",y.formTarget,y,null)):(Ot(o,l,"encType",y.encType,y,null),Ot(o,l,"method",y.method,y,null),Ot(o,l,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){o.removeAttribute(u);break}h=Jl(""+h),o.setAttribute(u,h);break;case"onClick":h!=null&&(o.onclick=ni);break;case"onScroll":h!=null&&ot("scroll",o);break;case"onScrollEnd":h!=null&&ot("scrollend",o);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=u}}break;case"multiple":o.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":o.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){o.removeAttribute("xlink:href");break}u=Jl(""+h),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,""+h):o.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,""):o.removeAttribute(u);break;case"capture":case"download":h===!0?o.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?o.setAttribute(u,h):o.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?o.setAttribute(u,h):o.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?o.removeAttribute(u):o.setAttribute(u,h);break;case"popover":ot("beforetoggle",o),ot("toggle",o),Kl(o,"popover",h);break;case"xlinkActuate":ti(o,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ti(o,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ti(o,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ti(o,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ti(o,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ti(o,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ti(o,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ti(o,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ti(o,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Kl(o,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=jS.get(u)||u,Kl(o,u,h))}}function dh(o,l,u,h,y,b){switch(u){case"style":kp(o,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=u}}break;case"children":typeof h=="string"?no(o,h):(typeof h=="number"||typeof h=="bigint")&&no(o,""+h);break;case"onScroll":h!=null&&ot("scroll",o);break;case"onScrollEnd":h!=null&&ot("scrollend",o);break;case"onClick":h!=null&&(o.onclick=ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ep.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),l=u.slice(2,y?u.length-7:void 0),b=o[$n]||null,b=b!=null?b[u]:null,typeof b=="function"&&o.removeEventListener(l,b,y),typeof h=="function")){typeof b!="function"&&b!==null&&(u in o?o[u]=null:o.hasAttribute(u)&&o.removeAttribute(u)),o.addEventListener(l,h,y);break e}u in o?o[u]=h:h===!0?o.setAttribute(u,""):Kl(o,u,h)}}}function On(o,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",o),ot("load",o);var h=!1,y=!1,b;for(b in u)if(u.hasOwnProperty(b)){var C=u[b];if(C!=null)switch(b){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Ot(o,l,b,C,u,null)}}y&&Ot(o,l,"srcSet",u.srcSet,u,null),h&&Ot(o,l,"src",u.src,u,null);return;case"input":ot("invalid",o);var N=b=C=y=null,L=null,Q=null;for(h in u)if(u.hasOwnProperty(h)){var re=u[h];if(re!=null)switch(h){case"name":y=re;break;case"type":C=re;break;case"checked":L=re;break;case"defaultChecked":Q=re;break;case"value":b=re;break;case"defaultValue":N=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:Ot(o,l,h,re,u,null)}}Rp(o,b,N,L,Q,C,y,!1);return;case"select":ot("invalid",o),h=C=b=null;for(y in u)if(u.hasOwnProperty(y)&&(N=u[y],N!=null))switch(y){case"value":b=N;break;case"defaultValue":C=N;break;case"multiple":h=N;default:Ot(o,l,y,N,u,null)}l=b,u=C,o.multiple=!!h,l!=null?to(o,!!h,l,!1):u!=null&&to(o,!!h,u,!0);return;case"textarea":ot("invalid",o),b=y=h=null;for(C in u)if(u.hasOwnProperty(C)&&(N=u[C],N!=null))switch(C){case"value":h=N;break;case"defaultValue":y=N;break;case"children":b=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:Ot(o,l,C,N,u,null)}Ip(o,h,y,b);return;case"option":for(L in u)if(u.hasOwnProperty(L)&&(h=u[L],h!=null))switch(L){case"selected":o.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ot(o,l,L,h,u,null)}return;case"dialog":ot("beforetoggle",o),ot("toggle",o),ot("cancel",o),ot("close",o);break;case"iframe":case"object":ot("load",o);break;case"video":case"audio":for(h=0;h<Zs.length;h++)ot(Zs[h],o);break;case"image":ot("error",o),ot("load",o);break;case"details":ot("toggle",o);break;case"embed":case"source":case"link":ot("error",o),ot("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in u)if(u.hasOwnProperty(Q)&&(h=u[Q],h!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Ot(o,l,Q,h,u,null)}return;default:if(Ed(l)){for(re in u)u.hasOwnProperty(re)&&(h=u[re],h!==void 0&&dh(o,l,re,h,u,void 0));return}}for(N in u)u.hasOwnProperty(N)&&(h=u[N],h!=null&&Ot(o,l,N,h,u,null))}function s3(o,l,u,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,C=null,N=null,L=null,Q=null,re=null;for(te in u){var ue=u[te];if(u.hasOwnProperty(te)&&ue!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":L=ue;default:h.hasOwnProperty(te)||Ot(o,l,te,null,h,ue)}}for(var J in h){var te=h[J];if(ue=u[J],h.hasOwnProperty(J)&&(te!=null||ue!=null))switch(J){case"type":b=te;break;case"name":y=te;break;case"checked":Q=te;break;case"defaultChecked":re=te;break;case"value":C=te;break;case"defaultValue":N=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,l));break;default:te!==ue&&Ot(o,l,J,te,h,ue)}}_d(o,C,N,L,Q,re,b,y);return;case"select":te=C=N=J=null;for(b in u)if(L=u[b],u.hasOwnProperty(b)&&L!=null)switch(b){case"value":break;case"multiple":te=L;default:h.hasOwnProperty(b)||Ot(o,l,b,null,h,L)}for(y in h)if(b=h[y],L=u[y],h.hasOwnProperty(y)&&(b!=null||L!=null))switch(y){case"value":J=b;break;case"defaultValue":N=b;break;case"multiple":C=b;default:b!==L&&Ot(o,l,y,b,h,L)}l=N,u=C,h=te,J!=null?to(o,!!u,J,!1):!!h!=!!u&&(l!=null?to(o,!!u,l,!0):to(o,!!u,u?[]:"",!1));return;case"textarea":te=J=null;for(N in u)if(y=u[N],u.hasOwnProperty(N)&&y!=null&&!h.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Ot(o,l,N,null,h,y)}for(C in h)if(y=h[C],b=u[C],h.hasOwnProperty(C)&&(y!=null||b!=null))switch(C){case"value":J=y;break;case"defaultValue":te=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&Ot(o,l,C,y,h,b)}Np(o,J,te);return;case"option":for(var Re in u)if(J=u[Re],u.hasOwnProperty(Re)&&J!=null&&!h.hasOwnProperty(Re))switch(Re){case"selected":o.selected=!1;break;default:Ot(o,l,Re,null,h,J)}for(L in h)if(J=h[L],te=u[L],h.hasOwnProperty(L)&&J!==te&&(J!=null||te!=null))switch(L){case"selected":o.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:Ot(o,l,L,J,h,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in u)J=u[$e],u.hasOwnProperty($e)&&J!=null&&!h.hasOwnProperty($e)&&Ot(o,l,$e,null,h,J);for(Q in h)if(J=h[Q],te=u[Q],h.hasOwnProperty(Q)&&J!==te&&(J!=null||te!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,l));break;default:Ot(o,l,Q,J,h,te)}return;default:if(Ed(l)){for(var Rt in u)J=u[Rt],u.hasOwnProperty(Rt)&&J!==void 0&&!h.hasOwnProperty(Rt)&&dh(o,l,Rt,void 0,h,J);for(re in h)J=h[re],te=u[re],!h.hasOwnProperty(re)||J===te||J===void 0&&te===void 0||dh(o,l,re,J,h,te);return}}for(var X in u)J=u[X],u.hasOwnProperty(X)&&J!=null&&!h.hasOwnProperty(X)&&Ot(o,l,X,null,h,J);for(ue in h)J=h[ue],te=u[ue],!h.hasOwnProperty(ue)||J===te||J==null&&te==null||Ot(o,l,ue,J,h,te)}function jv(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function l3(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var y=u[h],b=y.transferSize,C=y.initiatorType,N=y.duration;if(b&&N&&jv(C)){for(C=0,N=y.responseEnd,h+=1;h<u.length;h++){var L=u[h],Q=L.startTime;if(Q>N)break;var re=L.transferSize,ue=L.initiatorType;re&&jv(ue)&&(L=L.responseEnd,C+=re*(L<N?1:(N-Q)/(L-Q)))}if(--h,l+=8*(b+C)/(y.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var fh=null,hh=null;function Xc(o){return o.nodeType===9?o:o.ownerDocument}function Mv(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pv(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function ph(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var gh=null;function c3(){var o=window.event;return o&&o.type==="popstate"?o===gh?!1:(gh=o,!0):(gh=null,!1)}var Bv=typeof setTimeout=="function"?setTimeout:void 0,u3=typeof clearTimeout=="function"?clearTimeout:void 0,Lv=typeof Promise=="function"?Promise:void 0,d3=typeof queueMicrotask=="function"?queueMicrotask:typeof Lv<"u"?function(o){return Lv.resolve(null).then(o).catch(f3)}:Bv;function f3(o){setTimeout(function(){throw o})}function qi(o){return o==="head"}function Fv(o,l){var u=l,h=0;do{var y=u.nextSibling;if(o.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(h===0){o.removeChild(y),jo(l);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Js(o.ownerDocument.documentElement);else if(u==="head"){u=o.ownerDocument.head,Js(u);for(var b=u.firstChild;b;){var C=b.nextSibling,N=b.nodeName;b[vs]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=C}}else u==="body"&&Js(o.ownerDocument.body);u=y}while(u);jo(l)}function Uv(o,l){var u=o;o=0;do{var h=u.nextSibling;if(u.nodeType===1?l?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(l?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(o===0)break;o--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||o++;u=h}while(u)}function mh(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":mh(u),bd(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}o.removeChild(u)}}function h3(o,l,u,h){for(;o.nodeType===1;){var y=u;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!h&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(h){if(!o[vs])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(b=o.getAttribute("rel"),b==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(b!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(b=o.getAttribute("src"),(b!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===b)return o}else return o;if(o=Sr(o.nextSibling),o===null)break}return null}function p3(o,l,u){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Sr(o.nextSibling),o===null))return null;return o}function zv(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Sr(o.nextSibling),o===null))return null;return o}function vh(o){return o.data==="$?"||o.data==="$~"}function yh(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function g3(o,l){var u=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||u.readyState!=="loading")l();else{var h=function(){l(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),o._reactRetry=h}}function Sr(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var xh=null;function Vv(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var u=o.data;if(u==="/$"||u==="/&"){if(l===0)return Sr(o.nextSibling);l--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||l++}o=o.nextSibling}return null}function Hv(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(l===0)return o;l--}else u!=="/$"&&u!=="/&"||l++}o=o.previousSibling}return null}function $v(o,l,u){switch(l=Xc(u),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Js(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);bd(o)}var Er=new Map,Gv=new Set;function Yc(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var yi=B.d;B.d={f:m3,r:v3,D:y3,C:x3,L:b3,m:w3,X:S3,S:_3,M:E3};function m3(){var o=yi.f(),l=Uc();return o||l}function v3(o){var l=Qa(o);l!==null&&l.tag===5&&l.type==="form"?lm(l):yi.r(o)}var Io=typeof document>"u"?null:document;function qv(o,l,u){var h=Io;if(h&&typeof l=="string"&&l){var y=mr(l);y='link[rel="'+o+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),Gv.has(y)||(Gv.add(y),o={rel:o,crossOrigin:u,href:l},h.querySelector(y)===null&&(l=h.createElement("link"),On(l,"link",o),xn(l),h.head.appendChild(l)))}}function y3(o){yi.D(o),qv("dns-prefetch",o,null)}function x3(o,l){yi.C(o,l),qv("preconnect",o,l)}function b3(o,l,u){yi.L(o,l,u);var h=Io;if(h&&o&&l){var y='link[rel="preload"][as="'+mr(l)+'"]';l==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+mr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+mr(u.imageSizes)+'"]')):y+='[href="'+mr(o)+'"]';var b=y;switch(l){case"style":b=Do(o);break;case"script":b=ko(o)}Er.has(b)||(o=m({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:o,as:l},u),Er.set(b,o),h.querySelector(y)!==null||l==="style"&&h.querySelector(el(b))||l==="script"&&h.querySelector(tl(b))||(l=h.createElement("link"),On(l,"link",o),xn(l),h.head.appendChild(l)))}}function w3(o,l){yi.m(o,l);var u=Io;if(u&&o){var h=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+mr(h)+'"][href="'+mr(o)+'"]',b=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ko(o)}if(!Er.has(b)&&(o=m({rel:"modulepreload",href:o},l),Er.set(b,o),u.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(tl(b)))return}h=u.createElement("link"),On(h,"link",o),xn(h),u.head.appendChild(h)}}}function _3(o,l,u){yi.S(o,l,u);var h=Io;if(h&&o){var y=Ja(h).hoistableStyles,b=Do(o);l=l||"default";var C=y.get(b);if(!C){var N={loading:0,preload:null};if(C=h.querySelector(el(b)))N.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":l},u),(u=Er.get(b))&&bh(o,u);var L=C=h.createElement("link");xn(L),On(L,"link",o),L._p=new Promise(function(Q,re){L.onload=Q,L.onerror=re}),L.addEventListener("load",function(){N.loading|=1}),L.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Kc(C,l,h)}C={type:"stylesheet",instance:C,count:1,state:N},y.set(b,C)}}}function S3(o,l){yi.X(o,l);var u=Io;if(u&&o){var h=Ja(u).hoistableScripts,y=ko(o),b=h.get(y);b||(b=u.querySelector(tl(y)),b||(o=m({src:o,async:!0},l),(l=Er.get(y))&&wh(o,l),b=u.createElement("script"),xn(b),On(b,"link",o),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(y,b))}}function E3(o,l){yi.M(o,l);var u=Io;if(u&&o){var h=Ja(u).hoistableScripts,y=ko(o),b=h.get(y);b||(b=u.querySelector(tl(y)),b||(o=m({src:o,async:!0,type:"module"},l),(l=Er.get(y))&&wh(o,l),b=u.createElement("script"),xn(b),On(b,"link",o),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(y,b))}}function Wv(o,l,u,h){var y=(y=se.current)?Yc(y):null;if(!y)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=Do(u.href),u=Ja(y).hoistableStyles,h=u.get(l),h||(h={type:"style",instance:null,count:0,state:null},u.set(l,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){o=Do(u.href);var b=Ja(y).hoistableStyles,C=b.get(o);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(o,C),(b=y.querySelector(el(o)))&&!b._p&&(C.instance=b,C.state.loading=5),Er.has(o)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Er.set(o,u),b||C3(y,o,u,C.state))),l&&h===null)throw Error(r(528,""));return C}if(l&&h!==null)throw Error(r(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ko(u),u=Ja(y).hoistableScripts,h=u.get(l),h||(h={type:"script",instance:null,count:0,state:null},u.set(l,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Do(o){return'href="'+mr(o)+'"'}function el(o){return'link[rel="stylesheet"]['+o+"]"}function Xv(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function C3(o,l,u,h){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?h.loading=1:(l=o.createElement("link"),h.preload=l,l.addEventListener("load",function(){return h.loading|=1}),l.addEventListener("error",function(){return h.loading|=2}),On(l,"link",u),xn(l),o.head.appendChild(l))}function ko(o){return'[src="'+mr(o)+'"]'}function tl(o){return"script[async]"+o}function Yv(o,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var h=o.querySelector('style[data-href~="'+mr(u.href)+'"]');if(h)return l.instance=h,xn(h),h;var y=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(o.ownerDocument||o).createElement("style"),xn(h),On(h,"style",y),Kc(h,u.precedence,o),l.instance=h;case"stylesheet":y=Do(u.href);var b=o.querySelector(el(y));if(b)return l.state.loading|=4,l.instance=b,xn(b),b;h=Xv(u),(y=Er.get(y))&&bh(h,y),b=(o.ownerDocument||o).createElement("link"),xn(b);var C=b;return C._p=new Promise(function(N,L){C.onload=N,C.onerror=L}),On(b,"link",h),l.state.loading|=4,Kc(b,u.precedence,o),l.instance=b;case"script":return b=ko(u.src),(y=o.querySelector(tl(b)))?(l.instance=y,xn(y),y):(h=u,(y=Er.get(b))&&(h=m({},u),wh(h,y)),o=o.ownerDocument||o,y=o.createElement("script"),xn(y),On(y,"link",h),o.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(h=l.instance,l.state.loading|=4,Kc(h,u.precedence,o));return l.instance}function Kc(o,l,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,b=y,C=0;C<h.length;C++){var N=h[C];if(N.dataset.precedence===l)b=N;else if(b!==y)break}b?b.parentNode.insertBefore(o,b.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(o,l.firstChild))}function bh(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function wh(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Zc=null;function Kv(o,l,u){if(Zc===null){var h=new Map,y=Zc=new Map;y.set(u,h)}else y=Zc,h=y.get(u),h||(h=new Map,y.set(u,h));if(h.has(o))return h;for(h.set(o,null),u=u.getElementsByTagName(o),y=0;y<u.length;y++){var b=u[y];if(!(b[vs]||b[En]||o==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var C=b.getAttribute(l)||"";C=o+C;var N=h.get(C);N?N.push(b):h.set(C,[b])}}return h}function Zv(o,l,u){o=o.ownerDocument||o,o.head.insertBefore(u,l==="title"?o.querySelector("head > title"):null)}function A3(o,l,u){if(u===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Qv(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function T3(o,l,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=Do(h.href),b=l.querySelector(el(y));if(b){l=b._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=Qc.bind(o),l.then(o,o)),u.state.loading|=4,u.instance=b,xn(b);return}b=l.ownerDocument||l,h=Xv(h),(y=Er.get(y))&&bh(h,y),b=b.createElement("link"),xn(b);var C=b;C._p=new Promise(function(N,L){C.onload=N,C.onerror=L}),On(b,"link",h),u.instance=b}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(o.count++,u=Qc.bind(o),l.addEventListener("load",u),l.addEventListener("error",u))}}var _h=0;function O3(o,l){return o.stylesheets&&o.count===0&&eu(o,o.stylesheets),0<o.count||0<o.imgCount?function(u){var h=setTimeout(function(){if(o.stylesheets&&eu(o,o.stylesheets),o.unsuspend){var b=o.unsuspend;o.unsuspend=null,b()}},6e4+l);0<o.imgBytes&&_h===0&&(_h=62500*l3());var y=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&eu(o,o.stylesheets),o.unsuspend)){var b=o.unsuspend;o.unsuspend=null,b()}},(o.imgBytes>_h?50:800)+l);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(h),clearTimeout(y)}}:null}function Qc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)eu(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Jc=null;function eu(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Jc=new Map,l.forEach(R3,o),Jc=null,Qc.call(o))}function R3(o,l){if(!(l.state.loading&4)){var u=Jc.get(o);if(u)var h=u.get(null);else{u=new Map,Jc.set(o,u);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var C=y[b];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),h=C)}h&&u.set(null,h)}y=l.instance,C=y.getAttribute("data-precedence"),b=u.get(C)||h,b===h&&u.set(null,y),u.set(C,y),this.count++,h=Qc.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),b?b.parentNode.insertBefore(y,b.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),l.state.loading|=4}}var nl={$$typeof:T,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function N3(o,l,u,h,y,b,C,N,L){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=md(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=md(0),this.hiddenUpdates=md(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function Jv(o,l,u,h,y,b,C,N,L,Q,re,ue){return o=new N3(o,l,u,C,L,Q,re,ue,N),l=1,b===!0&&(l|=24),b=nr(3,null,null,l),o.current=b,b.stateNode=o,l=ef(),l.refCount++,o.pooledCache=l,l.refCount++,b.memoizedState={element:h,isDehydrated:u,cache:l},af(b),o}function ey(o){return o?(o=co,o):co}function ty(o,l,u,h,y,b){y=ey(y),h.context===null?h.context=y:h.pendingContext=y,h=Mi(l),h.payload={element:u},b=b===void 0?null:b,b!==null&&(h.callback=b),u=Pi(o,h,l),u!==null&&(Kn(u,o,l),js(u,o,l))}function ny(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<l?u:l}}function Sh(o,l){ny(o,l),(o=o.alternate)&&ny(o,l)}function ry(o){if(o.tag===13||o.tag===31){var l=va(o,67108864);l!==null&&Kn(l,o,67108864),Sh(o,67108864)}}function iy(o){if(o.tag===13||o.tag===31){var l=sr();l=vd(l);var u=va(o,l);u!==null&&Kn(u,o,l),Sh(o,l)}}var tu=!0;function I3(o,l,u,h){var y=V.T;V.T=null;var b=B.p;try{B.p=2,Eh(o,l,u,h)}finally{B.p=b,V.T=y}}function D3(o,l,u,h){var y=V.T;V.T=null;var b=B.p;try{B.p=8,Eh(o,l,u,h)}finally{B.p=b,V.T=y}}function Eh(o,l,u,h){if(tu){var y=Ch(h);if(y===null)uh(o,l,h,nu,u),oy(o,h);else if(j3(y,o,l,u,h))h.stopPropagation();else if(oy(o,h),l&4&&-1<k3.indexOf(o)){for(;y!==null;){var b=Qa(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var C=fa(b.pendingLanes);if(C!==0){var N=b;for(N.pendingLanes|=2,N.entangledLanes|=2;C;){var L=1<<31-wt(C);N.entanglements[1]|=L,C&=~L}Wr(b),(yt&6)===0&&(Lc=it()+500,Ks(0))}}break;case 31:case 13:N=va(b,2),N!==null&&Kn(N,b,2),Uc(),Sh(b,2)}if(b=Ch(h),b===null&&uh(o,l,h,nu,u),b===y)break;y=b}y!==null&&h.stopPropagation()}else uh(o,l,h,null,u)}}function Ch(o){return o=Ad(o),Ah(o)}var nu=null;function Ah(o){if(nu=null,o=Za(o),o!==null){var l=a(o);if(l===null)o=null;else{var u=l.tag;if(u===13){if(o=s(l),o!==null)return o;o=null}else if(u===31){if(o=c(l),o!==null)return o;o=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return nu=o,null}function ay(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case z:return 2;case le:return 8;case ve:case Oe:return 32;case Se:return 268435456;default:return 32}default:return 32}}var Th=!1,Wi=null,Xi=null,Yi=null,rl=new Map,il=new Map,Ki=[],k3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oy(o,l){switch(o){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":rl.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(l.pointerId)}}function al(o,l,u,h,y,b){return o===null||o.nativeEvent!==b?(o={blockedOn:l,domEventName:u,eventSystemFlags:h,nativeEvent:b,targetContainers:[y]},l!==null&&(l=Qa(l),l!==null&&ry(l)),o):(o.eventSystemFlags|=h,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function j3(o,l,u,h,y){switch(l){case"focusin":return Wi=al(Wi,o,l,u,h,y),!0;case"dragenter":return Xi=al(Xi,o,l,u,h,y),!0;case"mouseover":return Yi=al(Yi,o,l,u,h,y),!0;case"pointerover":var b=y.pointerId;return rl.set(b,al(rl.get(b)||null,o,l,u,h,y)),!0;case"gotpointercapture":return b=y.pointerId,il.set(b,al(il.get(b)||null,o,l,u,h,y)),!0}return!1}function sy(o){var l=Za(o.target);if(l!==null){var u=a(l);if(u!==null){if(l=u.tag,l===13){if(l=s(u),l!==null){o.blockedOn=l,wp(o.priority,function(){iy(u)});return}}else if(l===31){if(l=c(u),l!==null){o.blockedOn=l,wp(o.priority,function(){iy(u)});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ru(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var u=Ch(o.nativeEvent);if(u===null){u=o.nativeEvent;var h=new u.constructor(u.type,u);Cd=h,u.target.dispatchEvent(h),Cd=null}else return l=Qa(u),l!==null&&ry(l),o.blockedOn=u,!1;l.shift()}return!0}function ly(o,l,u){ru(o)&&u.delete(l)}function M3(){Th=!1,Wi!==null&&ru(Wi)&&(Wi=null),Xi!==null&&ru(Xi)&&(Xi=null),Yi!==null&&ru(Yi)&&(Yi=null),rl.forEach(ly),il.forEach(ly)}function iu(o,l){o.blockedOn===l&&(o.blockedOn=null,Th||(Th=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,M3)))}var au=null;function cy(o){au!==o&&(au=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){au===o&&(au=null);for(var l=0;l<o.length;l+=3){var u=o[l],h=o[l+1],y=o[l+2];if(typeof h!="function"){if(Ah(h||u)===null)continue;break}var b=Qa(u);b!==null&&(o.splice(l,3),l-=3,Cf(b,{pending:!0,data:y,method:u.method,action:h},h,y))}}))}function jo(o){function l(L){return iu(L,o)}Wi!==null&&iu(Wi,o),Xi!==null&&iu(Xi,o),Yi!==null&&iu(Yi,o),rl.forEach(l),il.forEach(l);for(var u=0;u<Ki.length;u++){var h=Ki[u];h.blockedOn===o&&(h.blockedOn=null)}for(;0<Ki.length&&(u=Ki[0],u.blockedOn===null);)sy(u),u.blockedOn===null&&Ki.shift();if(u=(o.ownerDocument||o).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var y=u[h],b=u[h+1],C=y[$n]||null;if(typeof b=="function")C||cy(u);else if(C){var N=null;if(b&&b.hasAttribute("formAction")){if(y=b,C=b[$n]||null)N=C.formAction;else if(Ah(y)!==null)continue}else N=C.action;typeof N=="function"?u[h+1]=N:(u.splice(h,3),h-=3),cy(u)}}}function uy(){function o(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,y=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function Oh(o){this._internalRoot=o}ou.prototype.render=Oh.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var u=l.current,h=sr();ty(u,h,o,l,null,null)},ou.prototype.unmount=Oh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;ty(o.current,2,null,o,null,null),Uc(),l[Ka]=null}};function ou(o){this._internalRoot=o}ou.prototype.unstable_scheduleHydration=function(o){if(o){var l=bp();o={blockedOn:null,target:o,priority:l};for(var u=0;u<Ki.length&&l!==0&&l<Ki[u].priority;u++);Ki.splice(u,0,o),u===0&&sy(o)}};var dy=e.version;if(dy!=="19.2.0")throw Error(r(527,dy,"19.2.0"));B.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=f(l),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var P3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{Ze=su.inject(P3),tt=su}catch{}}return sl.createRoot=function(o,l){if(!i(o))throw Error(r(299));var u=!1,h="",y=ym,b=xm,C=bm;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),l=Jv(o,1,!1,null,null,u,h,null,y,b,C,uy),o[Ka]=l.current,ch(o),new Oh(l)},sl.hydrateRoot=function(o,l,u){if(!i(o))throw Error(r(299));var h=!1,y="",b=ym,C=xm,N=bm,L=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(N=u.onRecoverableError),u.formState!==void 0&&(L=u.formState)),l=Jv(o,1,!0,l,u??null,h,y,L,b,C,N,uy),l.context=ey(null),u=l.current,h=sr(),h=vd(h),y=Mi(h),y.callback=null,Pi(u,y,h),u=h,l.current.lanes=u,ms(l,u),Wr(l),o[Ka]=l.current,ch(o),new ou(l)},sl.version="19.2.0",sl}var wy;function G3(){if(wy)return Ih.exports;wy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ih.exports=$3(),Ih.exports}var q3=G3();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _y="popstate";function W3(n={}){function e(i,a){let{pathname:s="/",search:c="",hash:d=""}=Xa(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),x0("",{pathname:s,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let s=i.document.querySelector("base"),c="";if(s&&s.getAttribute("href")){let d=i.location.href,f=d.indexOf("#");c=f===-1?d:d.slice(0,f)}return c+"#"+(typeof a=="string"?a:Al(a))}function r(i,a){Hr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return Y3(e,t,r,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Hr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function X3(){return Math.random().toString(36).substring(2,10)}function Sy(n,e){return{usr:n.state,key:n.key,idx:e}}function x0(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Xa(e):e,state:t,key:e&&e.key||r||X3()}}function Al({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Xa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Y3(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,c="POP",d=null,f=p();f==null&&(f=0,s.replaceState({...s.state,idx:f},""));function p(){return(s.state||{idx:null}).idx}function m(){c="POP";let S=p(),E=S==null?null:S-f;f=S,d&&d({action:c,location:_.location,delta:E})}function v(S,E){c="PUSH";let A=x0(_.location,S,E);t&&t(A,S),f=p()+1;let T=Sy(A,f),R=_.createHref(A);try{s.pushState(T,"",R)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(R)}a&&d&&d({action:c,location:_.location,delta:1})}function x(S,E){c="REPLACE";let A=x0(_.location,S,E);t&&t(A,S),f=p();let T=Sy(A,f),R=_.createHref(A);s.replaceState(T,"",R),a&&d&&d({action:c,location:_.location,delta:0})}function w(S){return K3(S)}let _={get action(){return c},get location(){return n(i,s)},listen(S){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(_y,m),d=S,()=>{i.removeEventListener(_y,m),d=null}},createHref(S){return e(i,S)},createURL:w,encodeLocation(S){let E=w(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:x,go(S){return s.go(S)}};return _}function K3(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Al(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function lb(n,e,t="/"){return Z3(n,e,t,!1)}function Z3(n,e,t,r){let i=typeof e=="string"?Xa(e):e,a=wi(i.pathname||"/",t);if(a==null)return null;let s=cb(n);Q3(s);let c=null;for(let d=0;c==null&&d<s.length;++d){let f=cC(a);c=sC(s[d],f,r)}return c}function cb(n,e=[],t=[],r="",i=!1){let a=(s,c,d=i,f)=>{let p={relativePath:f===void 0?s.path||"":f,caseSensitive:s.caseSensitive===!0,childrenIndex:c,route:s};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&d)return;Wt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=bi([r,p.relativePath]),v=t.concat(p);s.children&&s.children.length>0&&(Wt(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),cb(s.children,e,v,m,d)),!(s.path==null&&!s.index)&&e.push({path:m,score:aC(m,s.index),routesMeta:v})};return n.forEach((s,c)=>{if(s.path===""||!s.path?.includes("?"))a(s,c);else for(let d of ub(s.path))a(s,c,!0,d)}),e}function ub(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=ub(r.join("/")),c=[];return c.push(...s.map(d=>d===""?a:[a,d].join("/"))),i&&c.push(...s),c.map(d=>n.startsWith("/")&&d===""?"/":d)}function Q3(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:oC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var J3=/^:[\w-]+$/,eC=3,tC=2,nC=1,rC=10,iC=-2,Ey=n=>n==="*";function aC(n,e){let t=n.split("/"),r=t.length;return t.some(Ey)&&(r+=iC),e&&(r+=tC),t.filter(i=>!Ey(i)).reduce((i,a)=>i+(J3.test(a)?eC:a===""?nC:rC),r)}function oC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function sC(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",s=[];for(let c=0;c<r.length;++c){let d=r[c],f=c===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",m=Fu({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),v=d.route;if(!m&&f&&t&&!r[r.length-1].route.index&&(m=Fu({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),s.push({params:i,pathname:bi([a,m.pathname]),pathnameBase:hC(bi([a,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(a=bi([a,m.pathnameBase]))}return s}function Fu(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=lC(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:m},v)=>{if(p==="*"){let w=c[v]||"";s=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const x=c[v];return m&&!x?f[p]=void 0:f[p]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:s,pattern:n}}function lC(n,e=!1,t=!0){Hr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function cC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function wi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function uC(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Xa(n):n;return{pathname:t?t.startsWith("/")?t:dC(t,e):e,search:pC(r),hash:gC(i)}}function dC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Mh(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function db(n){let e=fC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function fb(n,e,t,r=!1){let i;typeof n=="string"?i=Xa(n):(i={...n},Wt(!i.pathname||!i.pathname.includes("?"),Mh("?","pathname","search",i)),Wt(!i.pathname||!i.pathname.includes("#"),Mh("#","pathname","hash",i)),Wt(!i.search||!i.search.includes("#"),Mh("#","search","hash",i)));let a=n===""||i.pathname==="",s=a?"/":i.pathname,c;if(s==null)c=t;else{let m=e.length-1;if(!r&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}c=m>=0?e[m]:"/"}let d=uC(i,c),f=s&&s!=="/"&&s.endsWith("/"),p=(a||s===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var bi=n=>n.join("/").replace(/\/\/+/g,"/"),hC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),pC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function mC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var hb=["POST","PUT","PATCH","DELETE"];new Set(hb);var vC=["GET",...hb];new Set(vC);var os=O.createContext(null);os.displayName="DataRouter";var rd=O.createContext(null);rd.displayName="DataRouterState";O.createContext(!1);var pb=O.createContext({isTransitioning:!1});pb.displayName="ViewTransition";var yC=O.createContext(new Map);yC.displayName="Fetchers";var xC=O.createContext(null);xC.displayName="Await";var ei=O.createContext(null);ei.displayName="Navigation";var Pl=O.createContext(null);Pl.displayName="Location";var Ci=O.createContext({outlet:null,matches:[],isDataRoute:!1});Ci.displayName="Route";var h1=O.createContext(null);h1.displayName="RouteError";function bC(n,{relative:e}={}){Wt(Bl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=O.useContext(ei),{hash:i,pathname:a,search:s}=Ll(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:bi([t,a])),r.createHref({pathname:c,search:s,hash:i})}function Bl(){return O.useContext(Pl)!=null}function Ai(){return Wt(Bl(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Pl).location}var gb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mb(n){O.useContext(ei).static||O.useLayoutEffect(n)}function id(){let{isDataRoute:n}=O.useContext(Ci);return n?kC():wC()}function wC(){Wt(Bl(),"useNavigate() may be used only in the context of a <Router> component.");let n=O.useContext(os),{basename:e,navigator:t}=O.useContext(ei),{matches:r}=O.useContext(Ci),{pathname:i}=Ai(),a=JSON.stringify(db(r)),s=O.useRef(!1);return mb(()=>{s.current=!0}),O.useCallback((d,f={})=>{if(Hr(s.current,gb),!s.current)return;if(typeof d=="number"){t.go(d);return}let p=fb(d,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:bi([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,a,i,n])}O.createContext(null);function Ll(n,{relative:e}={}){let{matches:t}=O.useContext(Ci),{pathname:r}=Ai(),i=JSON.stringify(db(t));return O.useMemo(()=>fb(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function _C(n,e){return vb(n,e)}function vb(n,e,t,r,i){Wt(Bl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=O.useContext(ei),{matches:s}=O.useContext(Ci),c=s[s.length-1],d=c?c.params:{},f=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let A=m&&m.path||"";yb(f,!m||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let v=Ai(),x;if(e){let A=typeof e=="string"?Xa(e):e;Wt(p==="/"||A.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${A.pathname}" was given in the \`location\` prop.`),x=A}else x=v;let w=x.pathname||"/",_=w;if(p!=="/"){let A=p.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(A.length).join("/")}let S=lb(n,{pathname:_});Hr(m||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Hr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=TC(S&&S.map(A=>Object.assign({},A,{params:Object.assign({},d,A.params),pathname:bi([p,a.encodeLocation?a.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?p:bi([p,a.encodeLocation?a.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),s,t,r,i);return e&&E?O.createElement(Pl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},E):E}function SC(){let n=DC(),e=mC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",n),s=O.createElement(O.Fragment,null,O.createElement("p",null,"💿 Hey developer 👋"),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:a},"ErrorBoundary")," or"," ",O.createElement("code",{style:a},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:i},t):null,s)}var EC=O.createElement(SC,null),CC=class extends O.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?O.createElement(Ci.Provider,{value:this.props.routeContext},O.createElement(h1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AC({routeContext:n,match:e,children:t}){let r=O.useContext(os);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(Ci.Provider,{value:n},t)}function TC(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,s=t?.errors;if(s!=null){let f=a.findIndex(p=>p.route.id&&s?.[p.route.id]!==void 0);Wt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,d=-1;if(t)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:m,errors:v}=t,x=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||x){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,p,m)=>{let v,x=!1,w=null,_=null;t&&(v=s&&p.route.id?s[p.route.id]:void 0,w=p.route.errorElement||EC,c&&(d<0&&m===0?(yb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,_=null):d===m&&(x=!0,_=p.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,m+1)),E=()=>{let A;return v?A=w:x?A=_:p.route.Component?A=O.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=f,O.createElement(AC,{match:p,routeContext:{outlet:f,matches:S,isDataRoute:t!=null},children:A})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?O.createElement(CC,{location:t.location,revalidation:t.revalidation,component:w,error:v,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:r}):E()},null)}function p1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OC(n){let e=O.useContext(os);return Wt(e,p1(n)),e}function RC(n){let e=O.useContext(rd);return Wt(e,p1(n)),e}function NC(n){let e=O.useContext(Ci);return Wt(e,p1(n)),e}function g1(n){let e=NC(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function IC(){return g1("useRouteId")}function DC(){let n=O.useContext(h1),e=RC("useRouteError"),t=g1("useRouteError");return n!==void 0?n:e.errors?.[t]}function kC(){let{router:n}=OC("useNavigate"),e=g1("useNavigate"),t=O.useRef(!1);return mb(()=>{t.current=!0}),O.useCallback(async(i,a={})=>{Hr(t.current,gb),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var Cy={};function yb(n,e,t){!e&&!Cy[n]&&(Cy[n]=!0,Hr(!1,t))}O.memo(jC);function jC({routes:n,future:e,state:t,unstable_onError:r}){return vb(n,void 0,t,r,e)}function Xr(n){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){Wt(!Bl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=n.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof t=="string"&&(t=Xa(t));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:v="default"}=t,x=O.useMemo(()=>{let w=wi(d,s);return w==null?null:{location:{pathname:w,search:f,hash:p,state:m,key:v},navigationType:r}},[s,d,f,p,m,v,r]);return Hr(x!=null,`<Router basename="${s}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:O.createElement(ei.Provider,{value:c},O.createElement(Pl.Provider,{children:e,value:x}))}function PC({children:n,location:e}){return _C(b0(n),e)}function b0(n,e=[]){let t=[];return O.Children.forEach(n,(r,i)=>{if(!O.isValidElement(r))return;let a=[...e,i];if(r.type===O.Fragment){t.push.apply(t,b0(r.props.children,a));return}Wt(r.type===Xr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=b0(r.props.children,a)),t.push(s)}),t}var Ou="get",Ru="application/x-www-form-urlencoded";function ad(n){return n!=null&&typeof n.tagName=="string"}function BC(n){return ad(n)&&n.tagName.toLowerCase()==="button"}function LC(n){return ad(n)&&n.tagName.toLowerCase()==="form"}function FC(n){return ad(n)&&n.tagName.toLowerCase()==="input"}function UC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function zC(n,e){return n.button===0&&(!e||e==="_self")&&!UC(n)}var lu=null;function VC(){if(lu===null)try{new FormData(document.createElement("form"),0),lu=!1}catch{lu=!0}return lu}var HC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ph(n){return n!=null&&!HC.has(n)?(Hr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ru}"`),null):n}function $C(n,e){let t,r,i,a,s;if(LC(n)){let c=n.getAttribute("action");r=c?wi(c,e):null,t=n.getAttribute("method")||Ou,i=Ph(n.getAttribute("enctype"))||Ru,a=new FormData(n)}else if(BC(n)||FC(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||c.getAttribute("action");if(r=d?wi(d,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Ou,i=Ph(n.getAttribute("formenctype"))||Ph(c.getAttribute("enctype"))||Ru,a=new FormData(c,n),!VC()){let{name:f,type:p,value:m}=n;if(p==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,m)}}else{if(ad(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ou,r=null,i=Ru,s=n}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function m1(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function GC(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&wi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function qC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function XC(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await qC(a,t);return s.links?s.links():[]}return[]}));return QC(r.flat(1).filter(WC).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Ay(n,e,t,r,i,a){let s=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,c=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,f)=>s(d,f)||c(d,f)):a==="data"?e.filter((d,f)=>{let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(s(d,f)||c(d,f))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function YC(n,e,{includeHydrateFallback:t}={}){return KC(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function KC(n){return[...new Set(n)]}function ZC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function QC(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(ZC(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function xb(){let n=O.useContext(os);return m1(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function JC(){let n=O.useContext(rd);return m1(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var v1=O.createContext(void 0);v1.displayName="FrameworkContext";function bb(){let n=O.useContext(v1);return m1(n,"You must render this element inside a <HydratedRouter> element"),n}function eA(n,e){let t=O.useContext(v1),[r,i]=O.useState(!1),[a,s]=O.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:m}=e,v=O.useRef(null);O.useEffect(()=>{if(n==="render"&&s(!0),n==="viewport"){let _=E=>{E.forEach(A=>{s(A.isIntersecting)})},S=new IntersectionObserver(_,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[n]),O.useEffect(()=>{if(r){let _=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(_)}}},[r]);let x=()=>{i(!0)},w=()=>{i(!1),s(!1)};return t?n!=="intent"?[a,v,{}]:[a,v,{onFocus:ll(c,x),onBlur:ll(d,w),onMouseEnter:ll(f,x),onMouseLeave:ll(p,w),onTouchStart:ll(m,x)}]:[!1,v,{}]}function ll(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function tA({page:n,...e}){let{router:t}=xb(),r=O.useMemo(()=>lb(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?O.createElement(rA,{page:n,matches:r,...e}):null}function nA(n){let{manifest:e,routeModules:t}=bb(),[r,i]=O.useState([]);return O.useEffect(()=>{let a=!1;return XC(n,e,t).then(s=>{a||i(s)}),()=>{a=!0}},[n,e,t]),r}function rA({page:n,matches:e,...t}){let r=Ai(),{manifest:i,routeModules:a}=bb(),{basename:s}=xb(),{loaderData:c,matches:d}=JC(),f=O.useMemo(()=>Ay(n,e,d,i,r,"data"),[n,e,d,i,r]),p=O.useMemo(()=>Ay(n,e,d,i,r,"assets"),[n,e,d,i,r]),m=O.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let w=new Set,_=!1;if(e.forEach(E=>{let A=i.routes[E.route.id];!A||!A.hasLoader||(!f.some(T=>T.route.id===E.route.id)&&E.route.id in c&&a[E.route.id]?.shouldRevalidate||A.hasClientLoader?_=!0:w.add(E.route.id))}),w.size===0)return[];let S=GC(n,s,"data");return _&&w.size>0&&S.searchParams.set("_routes",e.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[S.pathname+S.search]},[s,c,r,i,f,e,n,a]),v=O.useMemo(()=>YC(p,i),[p,i]),x=nA(p);return O.createElement(O.Fragment,null,m.map(w=>O.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),v.map(w=>O.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),x.map(({key:w,link:_})=>O.createElement("link",{key:w,nonce:t.nonce,..._})))}function iA(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var wb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wb&&(window.__reactRouterVersion="7.9.4")}catch{}function aA({basename:n,children:e,window:t}){let r=O.useRef();r.current==null&&(r.current=W3({window:t,v5Compat:!0}));let i=r.current,[a,s]=O.useState({action:i.action,location:i.location}),c=O.useCallback(d=>{O.startTransition(()=>s(d))},[s]);return O.useLayoutEffect(()=>i.listen(c),[i,c]),O.createElement(MC,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var _b=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sb=O.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:c,target:d,to:f,preventScrollReset:p,viewTransition:m,...v},x){let{basename:w}=O.useContext(ei),_=typeof f=="string"&&_b.test(f),S,E=!1;if(typeof f=="string"&&_&&(S=f,wb))try{let q=new URL(window.location.href),ae=f.startsWith("//")?new URL(q.protocol+f):new URL(f),ce=wi(ae.pathname,w);ae.origin===q.origin&&ce!=null?f=ce+ae.search+ae.hash:E=!0}catch{Hr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=bC(f,{relative:i}),[T,R,I]=eA(r,v),M=lA(f,{replace:s,state:c,target:d,preventScrollReset:p,relative:i,viewTransition:m});function U(q){e&&e(q),q.defaultPrevented||M(q)}let H=O.createElement("a",{...v,...I,href:S||A,onClick:E||a?e:U,ref:iA(x,R),target:d,"data-discover":!_&&t==="render"?"true":void 0});return T&&!_?O.createElement(O.Fragment,null,H,O.createElement(tA,{page:A})):H});Sb.displayName="Link";var Yr=O.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:c,children:d,...f},p){let m=Ll(s,{relative:f.relative}),v=Ai(),x=O.useContext(rd),{navigator:w,basename:_}=O.useContext(ei),S=x!=null&&hA(m)&&c===!0,E=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,A=v.pathname,T=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(A=A.toLowerCase(),T=T?T.toLowerCase():null,E=E.toLowerCase()),T&&_&&(T=wi(T,_)||T);const R=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let I=A===E||!i&&A.startsWith(E)&&A.charAt(R)==="/",M=T!=null&&(T===E||!i&&T.startsWith(E)&&T.charAt(E.length)==="/"),U={isActive:I,isPending:M,isTransitioning:S},H=I?e:void 0,q;typeof r=="function"?q=r(U):q=[r,I?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ae=typeof a=="function"?a(U):a;return O.createElement(Sb,{...f,"aria-current":H,className:q,ref:p,style:ae,to:s,viewTransition:c},typeof d=="function"?d(U):d)});Yr.displayName="NavLink";var oA=O.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:s=Ou,action:c,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:m,...v},x)=>{let w=dA(),_=fA(c,{relative:f}),S=s.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&_b.test(c),A=T=>{if(d&&d(T),T.defaultPrevented)return;T.preventDefault();let R=T.nativeEvent.submitter,I=R?.getAttribute("formmethod")||s;w(R||T.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:i,state:a,relative:f,preventScrollReset:p,viewTransition:m})};return O.createElement("form",{ref:x,method:S,action:_,onSubmit:r?d:A,...v,"data-discover":!E&&n==="render"?"true":void 0})});oA.displayName="Form";function sA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Eb(n){let e=O.useContext(os);return Wt(e,sA(n)),e}function lA(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let c=id(),d=Ai(),f=Ll(n,{relative:a});return O.useCallback(p=>{if(zC(p,e)){p.preventDefault();let m=t!==void 0?t:Al(d)===Al(f);c(n,{replace:m,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[d,c,f,t,r,e,n,i,a,s])}var cA=0,uA=()=>`__${String(++cA)}__`;function dA(){let{router:n}=Eb("useSubmit"),{basename:e}=O.useContext(ei),t=IC();return O.useCallback(async(r,i={})=>{let{action:a,method:s,encType:c,formData:d,body:f}=$C(r,e);if(i.navigate===!1){let p=i.fetcherKey||uA();await n.fetch(p,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:d,body:f,formMethod:i.method||s,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:d,body:f,formMethod:i.method||s,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function fA(n,{relative:e}={}){let{basename:t}=O.useContext(ei),r=O.useContext(Ci);Wt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Ll(n||".",{relative:e})},s=Ai();if(n==null){a.search=s.search;let c=new URLSearchParams(a.search),d=c.getAll("index");if(d.some(p=>p==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let p=c.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:bi([t,a.pathname])),Al(a)}function hA(n,{relative:e}={}){let t=O.useContext(pb);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Eb("useViewTransitionState"),i=Ll(n,{relative:e});if(!t.isTransitioning)return!1;let a=wi(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=wi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Fu(i.pathname,s)!=null||Fu(i.pathname,a)!=null}var pA=sb();const gA="modulepreload",mA=function(n){return"/IARE-Canteen-Web/"+n},Ty={},ss=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let d=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=s?.nonce||s?.getAttribute("nonce");i=d(t.map(f=>{if(f=mA(f),f in Ty)return;Ty[f]=!0;const p=f.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":gA,p||(v.as="script"),v.crossOrigin="",v.href=f,c&&v.setAttribute("nonce",c),document.head.appendChild(v),p)return new Promise((x,w)=>{v.addEventListener("load",x),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return i.then(s=>{for(const c of s||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};var w0=function(n,e){return w0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},w0(n,e)};function Cb(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");w0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Uu=function(){return Uu=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Uu.apply(this,arguments)};function ls(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Ab(n,e,t,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(s=n[c])&&(a=(i<3?s(a):i>3?s(e,t,a):s(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function Tb(n,e){return function(t,r){e(t,r,n)}}function Ob(n,e,t,r,i,a){function s(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var c=r.kind,d=c==="getter"?"get":c==="setter"?"set":"value",f=!e&&n?r.static?n:n.prototype:null,p=e||(f?Object.getOwnPropertyDescriptor(f,r.name):{}),m,v=!1,x=t.length-1;x>=0;x--){var w={};for(var _ in r)w[_]=_==="access"?{}:r[_];for(var _ in r.access)w.access[_]=r.access[_];w.addInitializer=function(E){if(v)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(E||null))};var S=(0,t[x])(c==="accessor"?{get:p.get,set:p.set}:p[d],w);if(c==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(m=s(S.get))&&(p.get=m),(m=s(S.set))&&(p.set=m),(m=s(S.init))&&i.unshift(m)}else(m=s(S))&&(c==="field"?i.unshift(m):p[d]=m)}f&&Object.defineProperty(f,r.name,p),v=!0}function Rb(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function Nb(n){return typeof n=="symbol"?n:"".concat(n)}function Ib(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Db(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function je(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{f(r.next(p))}catch(m){s(m)}}function d(p){try{f(r.throw(p))}catch(m){s(m)}}function f(p){p.done?a(p.value):i(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})}function kb(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(f){return function(p){return d([f,p])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(p){f=[6,p],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var od=Object.create?(function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}):(function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]});function jb(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&od(e,n,t)}function zu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function y1(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a}function Mb(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(y1(arguments[e]));return n}function Pb(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],s=0,c=a.length;s<c;s++,i++)r[i]=a[s];return r}function Bb(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function es(n){return this instanceof es?(this.v=n,this):new es(n)}function Lb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(x){return function(w){return Promise.resolve(w).then(x,m)}}function c(x,w){r[x]&&(i[x]=function(_){return new Promise(function(S,E){a.push([x,_,S,E])>1||d(x,_)})},w&&(i[x]=w(i[x])))}function d(x,w){try{f(r[x](w))}catch(_){v(a[0][3],_)}}function f(x){x.value instanceof es?Promise.resolve(x.value.v).then(p,m):v(a[0][2],x)}function p(x){d("next",x)}function m(x){d("throw",x)}function v(x,w){x(w),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Fb(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=n[i]?function(s){return(t=!t)?{value:es(n[i](s)),done:!1}:a?a(s):s}:a}}function Ub(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof zu=="function"?zu(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(s){return new Promise(function(c,d){s=n[a](s),i(c,d,s.done,s.value)})}}function i(a,s,c,d){Promise.resolve(d).then(function(f){a({value:f,done:c})},s)}}function zb(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var vA=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},_0=function(n){return _0=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},_0(n)};function Vb(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=_0(n),r=0;r<t.length;r++)t[r]!=="default"&&od(e,n,t[r]);return vA(e,n),e}function Hb(n){return n&&n.__esModule?n:{default:n}}function $b(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function Gb(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function qb(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function Wb(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var yA=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function Xb(n){function e(a){n.error=n.hasError?new yA(a,n.error,"An error was suppressed during disposal."):a,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var a=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(a).then(i,function(s){return e(s),i()})}else r|=1}catch(s){e(s)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function Yb(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,a,s){return r?e?".jsx":".js":i&&(!a||!s)?t:i+a+"."+s.toLowerCase()+"js"}):n}const xA={__extends:Cb,__assign:Uu,__rest:ls,__decorate:Ab,__param:Tb,__esDecorate:Ob,__runInitializers:Rb,__propKey:Nb,__setFunctionName:Ib,__metadata:Db,__awaiter:je,__generator:kb,__createBinding:od,__exportStar:jb,__values:zu,__read:y1,__spread:Mb,__spreadArrays:Pb,__spreadArray:Bb,__await:es,__asyncGenerator:Lb,__asyncDelegator:Fb,__asyncValues:Ub,__makeTemplateObject:zb,__importStar:Vb,__importDefault:Hb,__classPrivateFieldGet:$b,__classPrivateFieldSet:Gb,__classPrivateFieldIn:qb,__addDisposableResource:Wb,__disposeResources:Xb,__rewriteRelativeImportExtension:Yb},bA=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Wb,get __assign(){return Uu},__asyncDelegator:Fb,__asyncGenerator:Lb,__asyncValues:Ub,__await:es,__awaiter:je,__classPrivateFieldGet:$b,__classPrivateFieldIn:qb,__classPrivateFieldSet:Gb,__createBinding:od,__decorate:Ab,__disposeResources:Xb,__esDecorate:Ob,__exportStar:jb,__extends:Cb,__generator:kb,__importDefault:Hb,__importStar:Vb,__makeTemplateObject:zb,__metadata:Db,__param:Tb,__propKey:Nb,__read:y1,__rest:ls,__rewriteRelativeImportExtension:Yb,__runInitializers:Rb,__setFunctionName:Ib,__spread:Mb,__spreadArray:Bb,__spreadArrays:Pb,__values:zu,default:xA},Symbol.toStringTag,{value:"Module"})),wA=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ss(async()=>{const{default:r}=await Promise.resolve().then(()=>Ya);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class x1 extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Oy extends x1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ry extends x1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ny extends x1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var S0;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(S0||(S0={}));class _A{constructor(e,{headers:t={},customFetch:r,region:i=S0.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=wA(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return je(this,arguments,void 0,function*(t,r={}){var i;try{const{headers:a,method:s,body:c,signal:d}=r;let f={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${t}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let v;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(f["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(f["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;const x=yield this.fetch(m.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:v,signal:d}).catch(E=>{throw E.name==="AbortError"?E:new Oy(E)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new Ry(x);if(!x.ok)throw new Ny(x);let _=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return _==="application/json"?S=yield x.json():_==="application/octet-stream"||_==="application/pdf"?S=yield x.blob():_==="text/event-stream"?S=x:_==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new Oy(a)}:{data:null,error:a,response:a instanceof Ny||a instanceof Ry?a.context:void 0}}})}}var Mn={};const cs=ab(bA);var cu={},uu={},du={},fu={},hu={},SA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ts=SA();const EA=ts.fetch,Kb=ts.fetch.bind(ts),Zb=ts.Headers,CA=ts.Request,AA=ts.Response,Ya=Object.freeze(Object.defineProperty({__proto__:null,Headers:Zb,Request:CA,Response:AA,default:Kb,fetch:EA},Symbol.toStringTag,{value:"Module"})),TA=ab(Ya);var pu={},Iy;function Qb(){if(Iy)return pu;Iy=1,Object.defineProperty(pu,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return pu.default=n,pu}var Dy;function Jb(){if(Dy)return hu;Dy=1,Object.defineProperty(hu,"__esModule",{value:!0});const n=cs,e=n.__importDefault(TA),t=n.__importDefault(Qb());class r{constructor(a){var s,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(s=a.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,s){return this.headers=new Headers(this.headers),this.headers.set(a,s),this}then(a,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var p,m,v,x;let w=null,_=null,S=null,E=f.status,A=f.statusText;if(f.ok){if(this.method!=="HEAD"){const M=await f.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?_=M:_=JSON.parse(M))}const R=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),I=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");R&&I&&I.length>1&&(S=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(w={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,S=null,E=406,A="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const R=await f.text();try{w=JSON.parse(R),Array.isArray(w)&&f.status===404&&(_=[],w=null,E=200,A="OK")}catch{f.status===404&&R===""?(E=204,A="No Content"):w={message:R}}if(w&&this.isMaybeSingle&&(!((x=w?.details)===null||x===void 0)&&x.includes("0 rows"))&&(w=null,E=200,A="OK"),w&&this.shouldThrowOnError)throw new t.default(w)}return{error:w,data:_,count:S,status:E,statusText:A}});return this.shouldThrowOnError||(d=d.catch(f=>{var p,m,v;return{error:{message:`${(p=f?.name)!==null&&p!==void 0?p:"FetchError"}: ${f?.message}`,details:`${(m=f?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(v=f?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,s)}returns(){return this}overrideTypes(){return this}}return hu.default=r,hu}var ky;function ew(){if(ky)return fu;ky=1,Object.defineProperty(fu,"__esModule",{value:!0});const e=cs.__importDefault(Jb());class t extends e.default{select(i){let a=!1;const s=(i??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:s,foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.order`:"order",p=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${p?`${p},`:""}${i}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:s=a}={}){const c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,a,{foreignTable:s,referencedTable:c=s}={}){const d=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(f,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:s=!1,buffers:c=!1,wal:d=!1,format:f="text"}={}){var p;const m=[i?"analyze":null,a?"verbose":null,s?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${m};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return fu.default=t,fu}var jy;function b1(){if(jy)return du;jy=1,Object.defineProperty(du,"__esModule",{value:!0});const e=cs.__importDefault(ew());class t extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const s=Array.from(new Set(a)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${s})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:s,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const f=s===void 0?"":`(${s})`;return this.url.searchParams.append(i,`${d}fts${f}.${a}`),this}match(i){return Object.entries(i).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(i,a,s){return this.url.searchParams.append(i,`not.${a}.${s}`),this}or(i,{foreignTable:a,referencedTable:s=a}={}){const c=s?`${s}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,a,s){return this.url.searchParams.append(i,`${a}.${s}`),this}}return du.default=t,du}var My;function tw(){if(My)return uu;My=1,Object.defineProperty(uu,"__esModule",{value:!0});const e=cs.__importDefault(b1());class t{constructor(i,{headers:a={},schema:s,fetch:c}){this.url=i,this.headers=new Headers(a),this.schema=s,this.fetch=c}select(i,a){const{head:s=!1,count:c}=a??{},d=s?"HEAD":"GET";let f=!1;const p=(i??"*").split("").map(m=>/\s/.test(m)&&!f?"":(m==='"'&&(f=!f),m)).join("");return this.url.searchParams.set("select",p),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:s=!0}={}){var c;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:s=!1,count:c,defaultToNull:d=!0}={}){var f;const p="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(m.length>0){const v=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:a}={}){var s;const c="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var a;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return uu.default=t,uu}var Py;function OA(){if(Py)return cu;Py=1,Object.defineProperty(cu,"__esModule",{value:!0});const n=cs,e=n.__importDefault(tw()),t=n.__importDefault(b1());class r{constructor(a,{headers:s={},schema:c,fetch:d}={}){this.url=a,this.headers=new Headers(s),this.schemaName=c,this.fetch=d}from(a){const s=new URL(`${this.url}/${a}`);return new e.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,s={},{head:c=!1,get:d=!1,count:f}={}){var p;let m;const v=new URL(`${this.url}/rpc/${a}`);let x;c||d?(m=c?"HEAD":"GET",Object.entries(s).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{v.searchParams.append(_,S)})):(m="POST",x=s);const w=new Headers(this.headers);return f&&w.set("Prefer",`count=${f}`),new t.default({method:m,url:v,headers:w,schema:this.schemaName,body:x,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return cu.default=r,cu}var By;function RA(){if(By)return Mn;By=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.PostgrestError=Mn.PostgrestBuilder=Mn.PostgrestTransformBuilder=Mn.PostgrestFilterBuilder=Mn.PostgrestQueryBuilder=Mn.PostgrestClient=void 0;const n=cs,e=n.__importDefault(OA());Mn.PostgrestClient=e.default;const t=n.__importDefault(tw());Mn.PostgrestQueryBuilder=t.default;const r=n.__importDefault(b1());Mn.PostgrestFilterBuilder=r.default;const i=n.__importDefault(ew());Mn.PostgrestTransformBuilder=i.default;const a=n.__importDefault(Jb());Mn.PostgrestBuilder=a.default;const s=n.__importDefault(Qb());return Mn.PostgrestError=s.default,Mn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:s.default},Mn}var NA=RA();const IA=ib(NA),{PostgrestClient:DA,PostgrestQueryBuilder:d9,PostgrestFilterBuilder:f9,PostgrestTransformBuilder:h9,PostgrestBuilder:p9,PostgrestError:g9}=IA;class kA{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const jA="2.76.0",MA=`realtime-js/${jA}`,PA="1.0.0",E0=1e4,BA=1e3,LA=100;var yl;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(yl||(yl={}));var fn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(fn||(fn={}));var Fr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Fr||(Fr={}));var C0;(function(n){n.websocket="websocket"})(C0||(C0={}));var Fa;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Fa||(Fa={}));class FA{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const c=r.decode(e.slice(s,s+i));s=s+i;const d=r.decode(e.slice(s,s+a));s=s+a;const f=JSON.parse(r.decode(e.slice(s,e.byteLength)));return{ref:null,topic:c,event:d,payload:f}}}class nw{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var kt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(kt||(kt={}));const Ly=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,s)=>(a[s]=UA(s,n,e,i),a),{}):{}},UA=(n,e,t,r)=>{const i=e.find(c=>c.name===n),a=i?.type,s=t[n];return a&&!r.includes(a)?rw(a,s):A0(s)},rw=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return $A(e,t)}switch(n){case kt.bool:return zA(e);case kt.float4:case kt.float8:case kt.int2:case kt.int4:case kt.int8:case kt.numeric:case kt.oid:return VA(e);case kt.json:case kt.jsonb:return HA(e);case kt.timestamp:return GA(e);case kt.abstime:case kt.date:case kt.daterange:case kt.int4range:case kt.int8range:case kt.money:case kt.reltime:case kt.text:case kt.time:case kt.timestamptz:case kt.timetz:case kt.tsrange:case kt.tstzrange:return A0(e);default:return A0(e)}},A0=n=>n,zA=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},VA=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},HA=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},$A=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let a;const s=n.slice(1,t);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(c=>rw(e,c))}return n},GA=n=>typeof n=="string"?n.replace(" ","T"):n,iw=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Bh{constructor(e,t,r={},i=E0){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fy;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Fy||(Fy={}));class xl{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:s,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xl.syncState(this.state,i,a,s),this.pendingDiffs.forEach(d=>{this.state=xl.syncDiff(this.state,d,a,s)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=xl.syncDiff(this.state,i,a,s),c())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const a=this.cloneDeep(e),s=this.transformState(t),c={},d={};return this.map(a,(f,p)=>{s[f]||(d[f]=p)}),this.map(s,(f,p)=>{const m=a[f];if(m){const v=p.map(S=>S.presence_ref),x=m.map(S=>S.presence_ref),w=p.filter(S=>x.indexOf(S.presence_ref)<0),_=m.filter(S=>v.indexOf(S.presence_ref)<0);w.length>0&&(c[f]=w),_.length>0&&(d[f]=_)}else c[f]=p}),this.syncDiff(a,{joins:c,leaves:d},r,i)}static syncDiff(e,t,r,i){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(c,d)=>{var f;const p=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(d),p.length>0){const m=e[c].map(x=>x.presence_ref),v=p.filter(x=>m.indexOf(x.presence_ref)<0);e[c].unshift(...v)}r(c,p,d)}),this.map(s,(c,d)=>{let f=e[c];if(!f)return;const p=d.map(m=>m.presence_ref);f=f.filter(m=>p.indexOf(m.presence_ref)<0),e[c]=f,i(c,f,d),f.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Uy;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Uy||(Uy={}));var bl;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(bl||(bl={}));var xi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(xi||(xi={}));class w1{constructor(e,t={config:{}},r){var i,a;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=fn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Bh(this,Fr.join,this.params,this.timeout),this.rejoinTimer=new nw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=fn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fr.reply,{},(s,c)=>{this._trigger(this._replyEventName(c),s)}),this.presence=new xl(this),this.broadcastEndpointURL=iw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==fn.closed){const{config:{broadcast:s,presence:c,private:d}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[bl.PRESENCE]&&this.bindings[bl.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},v={broadcast:s,presence:Object.assign(Object.assign({},c),{enabled:p}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(x=>e?.(xi.CHANNEL_ERROR,x)),this._onClose(()=>e?.(xi.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:x})=>{var w;if(this.socket.setAuth(),x===void 0){e?.(xi.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(w=_?.length)!==null&&w!==void 0?w:0,E=[];for(let A=0;A<S;A++){const T=_[A],{filter:{event:R,schema:I,table:M,filter:U}}=T,H=x&&x[A];if(H&&H.event===R&&H.schema===I&&H.table===M&&H.filter===U)E.push(Object.assign(Object.assign({},T),{id:H.id}));else{this.unsubscribe(),this.state=fn.errored,e?.(xi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(xi.SUBSCRIBED);return}}).receive("error",x=>{this.state=fn.errored,e?.(xi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e?.(xi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===fn.joined&&e===bl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let d=c.statusText;try{const f=await c.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,c,d;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(s=this.params)===null||s===void 0?void 0:s.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=fn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Bh(this,Fr.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=fn.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),s}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Bh(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>LA){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,a;const s=e.toLocaleLowerCase(),{close:c,error:d,leave:f,join:p}=Fr;if(r&&[c,d,f,p].indexOf(s)>=0&&r!==this._joinRef())return;let v=this._onMessage(s,t,r);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var w,_,S;return((w=x.filter)===null||w===void 0?void 0:w.event)==="*"||((S=(_=x.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===s}).map(x=>x.callback(v,r)):(a=this.bindings[s])===null||a===void 0||a.filter(x=>{var w,_,S,E,A,T;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in x){const R=x.id,I=(w=x.filter)===null||w===void 0?void 0:w.event;return R&&((_=t.ids)===null||_===void 0?void 0:_.includes(R))&&(I==="*"||I?.toLocaleLowerCase()===((S=t.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const R=(A=(E=x?.filter)===null||E===void 0?void 0:E.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return R==="*"||R===((T=t?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===s}).map(x=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:_,table:S,commit_timestamp:E,type:A,errors:T}=w;v=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:E,eventType:A,new:{},old:{},errors:T}),this._getPayloadRecords(w))}x.callback(v,r)})}_isClosed(){return this.state===fn.closed}_isJoined(){return this.state===fn.joined}_isJoining(){return this.state===fn.joining}_isLeaving(){return this.state===fn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&w1.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Fr.close,{},e)}_onError(e){this._on(Fr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ly(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ly(e.columns,e.old_record)),t}}const Lh=()=>{},gu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},qA=[1e3,2e3,5e3,1e4],WA=1e4,XA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class YA{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=E0,this.transport=null,this.heartbeatIntervalMs=gu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lh,this.ref=0,this.reconnectTimer=null,this.logger=Lh,this.conn=null,this.sendBuffer=[],this.serializer=new FA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...s)=>ss(async()=>{const{default:c}=await Promise.resolve().then(()=>Ya);return{default:c}},void 0).then(({default:c})=>c(...s)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...s)=>a(...s)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${C0.websocket}`,this.httpEndpoint=iw(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:PA}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case yl.connecting:return Fa.Connecting;case yl.open:return Fa.Open;case yl.closing:return Fa.Closing;default:return Fa.Closed}}isConnected(){return this.connectionState()===Fa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new w1(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:r,payload:i,ref:a}=e,s=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${t} ${r} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(BA,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},gu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:s}=t,c=s?`(${s})`:"",d=a.status||"";this.log("receive",`${d} ${r} ${i} ${c}`.trim(),a),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,a,s)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Fr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([XA],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:MA};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Fr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new nw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,a,s,c,d,f,p;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:E0,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:gu.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=e?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(c=e?.heartbeatCallback)!==null&&c!==void 0?c:Lh,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e?.reconnectAfterMs)!==null&&d!==void 0?d:(m=>qA[m-1]||WA),this.encode=(f=e?.encode)!==null&&f!==void 0?f:((m,v)=>v(JSON.stringify(m))),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class _1 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Gt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class KA extends _1{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class T0 extends _1{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const S1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ss(async()=>{const{default:r}=await Promise.resolve().then(()=>Ya);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},ZA=()=>je(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ss(()=>Promise.resolve().then(()=>Ya),void 0)).Response:Response}),O0=n=>{if(Array.isArray(n))return n.map(t=>O0(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=O0(r)}),e},QA=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Fh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),JA=(n,e,t)=>je(void 0,void 0,void 0,function*(){const r=yield ZA();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{const a=n.status||500,s=i?.statusCode||a+"";e(new KA(Fh(i),a,s))}).catch(i=>{e(new T0(Fh(i),i))}):e(new T0(Fh(n),n))}),e4=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(QA(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Fl(n,e,t,r,i,a){return je(this,void 0,void 0,function*(){return new Promise((s,c)=>{n(t,e4(e,r,i,a)).then(d=>{if(!d.ok)throw d;return r?.noResolveJson?d:d.json()}).then(d=>s(d)).catch(d=>JA(d,c,r))})})}function Tl(n,e,t,r){return je(this,void 0,void 0,function*(){return Fl(n,"GET",e,t,r)})}function Lr(n,e,t,r,i){return je(this,void 0,void 0,function*(){return Fl(n,"POST",e,r,i,t)})}function R0(n,e,t,r,i){return je(this,void 0,void 0,function*(){return Fl(n,"PUT",e,r,i,t)})}function t4(n,e,t,r){return je(this,void 0,void 0,function*(){return Fl(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function E1(n,e,t,r,i){return je(this,void 0,void 0,function*(){return Fl(n,"DELETE",e,r,i,t)})}class n4{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return je(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Gt(e))return{data:null,error:e};throw e}})}}var aw;class r4{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[aw]="BlobDownloadBuilder",this.promise=null}asStream(){return new n4(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return je(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Gt(e))return{data:null,error:e};throw e}})}}aw=Symbol.toStringTag;const i4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class a4{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=S1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return je(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},zy),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const d=s.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",s.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=r,c["cache-control"]=`max-age=${s.cacheControl}`,c["content-type"]=s.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i?.headers&&(c=Object.assign(Object.assign({},c),i.headers));const f=this._removeEmptyFolders(t),p=this._getFinalPath(f),m=yield(e=="PUT"?R0:Lr)(this.fetch,`${this.url}/object/${p}`,a,Object.assign({headers:c},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:f,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Gt(a))return{data:null,error:a};throw a}})}upload(e,t,r){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return je(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${s}`);c.searchParams.set("token",t);try{let d;const f=Object.assign({upsert:zy.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",f.cacheControl)):(d=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const m=yield R0(this.fetch,c.toString(),d,{headers:p});return{data:{path:a,fullPath:m.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Gt(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return je(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const a=yield Lr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+a.url),c=s.searchParams.get("token");if(!c)throw new _1("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}})}update(e,t,r){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return je(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}copy(e,t,r){return je(this,void 0,void 0,function*(){try{return{data:{path:(yield Lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return je(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Lr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return je(this,void 0,void 0,function*(){try{const i=yield Lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),s=a?`?${a}`:"",c=this._getFinalPath(e),d=()=>Tl(this.fetch,`${this.url}/${i}/${c}${s}`,{headers:this.headers,noResolveJson:!0});return new r4(d,this.shouldThrowOnError)}info(e){return je(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Tl(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:O0(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}})}exists(e){return je(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield t4(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r)&&r instanceof T0){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const c=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&i.push(d);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${f}`)}}}remove(e){return je(this,void 0,void 0,function*(){try{return{data:yield E1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gt(t))return{data:null,error:t};throw t}})}list(e,t,r){return je(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},i4),t),{prefix:e||""});return{data:yield Lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}listV2(e,t){return je(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Lr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ow="2.76.0",sw={"X-Client-Info":`storage-js/${ow}`};class o4{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const a=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sw),t),this.fetch=S1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return je(this,void 0,void 0,function*(){try{return{data:yield Tl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Gt(e))return{data:null,error:e};throw e}})}getBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield Tl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gt(t))return{data:null,error:t};throw t}})}createBucket(e){return je(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Lr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return je(this,void 0,void 0,function*(){try{return{data:yield R0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield E1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gt(t))return{data:null,error:t};throw t}})}}class s4{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sw),t),this.fetch=S1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gt(t))return{data:null,error:t};throw t}})}listBuckets(e){return je(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,a=yield Tl(this.fetch,i,{headers:this.headers});return{data:Array.isArray(a)?a.filter(c=>c.type==="ANALYTICS"):[],error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield E1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gt(t))return{data:null,error:t};throw t}})}}const C1={"X-Client-Info":`storage-js/${ow}`,"Content-Type":"application/json"};class lw extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function cr(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class Uh extends lw{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class l4 extends lw{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Vy;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Vy||(Vy={}));const A1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ss(async()=>{const{default:r}=await Promise.resolve().then(()=>Ya);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},c4=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Hy=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),u4=(n,e,t)=>je(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!t?.noResolveJson){const i=n.status||500,a=n;if(typeof a.json=="function")a.json().then(s=>{const c=s?.statusCode||s?.code||i+"";e(new Uh(Hy(s),i,c))}).catch(()=>{const s=i+"",c=a.statusText||`HTTP ${i} error`;e(new Uh(c,i,s))});else{const s=i+"",c=a.statusText||`HTTP ${i} error`;e(new Uh(c,i,s))}}else e(new l4(Hy(n),n))}),d4=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return r?(c4(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t)):i};function f4(n,e,t,r,i,a){return je(this,void 0,void 0,function*(){return new Promise((s,c)=>{n(t,d4(e,r,i,a)).then(d=>{if(!d.ok)throw d;if(r?.noResolveJson)return d;const f=d.headers.get("content-type");return!f||!f.includes("application/json")?{}:d.json()}).then(d=>s(d)).catch(d=>u4(d,c,r))})})}function ur(n,e,t,r,i){return je(this,void 0,void 0,function*(){return f4(n,"POST",e,r,i,t)})}class h4{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},C1),t),this.fetch=A1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return je(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}})}getIndex(e,t){return je(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}})}listIndexes(e){return je(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return je(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}})}}class p4{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},C1),t),this.fetch=A1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return je(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ur(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}})}getVectors(e){return je(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}})}listVectors(e){return je(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ur(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}})}queryVectors(e){return je(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}})}deleteVectors(e){return je(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ur(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}})}}class g4{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},C1),t),this.fetch=A1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return je(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}})}getBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}})}listBuckets(){return je(this,arguments,void 0,function*(e={}){try{return{data:yield ur(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return je(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(cr(t))return{data:null,error:t};throw t}})}}class m4 extends g4{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new v4(this.url,this.headers,e,this.fetch)}}class v4 extends h4{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return je(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return je(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return je(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return je(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new y4(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class y4 extends p4{constructor(e,t,r,i,a){super(e,t,a),this.vectorBucketName=r,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return je(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return je(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return je(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return je(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return je(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class x4 extends o4{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new a4(this.url,this.headers,e,this.fetch)}get vectors(){return new m4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new s4(this.url+"/iceberg",this.headers,this.fetch)}}const b4="2.76.0";let hl="";typeof Deno<"u"?hl="deno":typeof document<"u"?hl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hl="react-native":hl="node";const w4={"X-Client-Info":`supabase-js-${hl}/${b4}`},_4={headers:w4},S4={schema:"public"},E4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},C4={},A4=n=>{let e;return n?e=n:typeof fetch>"u"?e=Kb:e=fetch,(...t)=>e(...t)},T4=()=>typeof Headers>"u"?Zb:Headers,O4=(n,e,t)=>{const r=A4(t),i=T4();return async(a,s)=>{var c;const d=(c=await e())!==null&&c!==void 0?c:n;let f=new i(s?.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(a,Object.assign(Object.assign({},s),{headers:f}))}};function R4(n){return n.endsWith("/")?n:n+"/"}function N4(n,e){var t,r;const{db:i,auth:a,realtime:s,global:c}=n,{db:d,auth:f,realtime:p,global:m}=e,v={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},p),s),storage:{},global:Object.assign(Object.assign(Object.assign({},m),c),{headers:Object.assign(Object.assign({},(t=m?.headers)!==null&&t!==void 0?t:{}),(r=c?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?v.accessToken=n.accessToken:delete v.accessToken,v}function I4(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(R4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const cw="2.76.0",zo=30*1e3,N0=3,zh=N0*zo,D4="http://localhost:9999",k4="supabase.auth.token",j4={"X-Client-Info":`gotrue-js/${cw}`},I0="X-Supabase-Api-Version",uw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},M4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,P4=600*1e3;class Ol extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Ve(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class B4 extends Ol{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function L4(n){return Ve(n)&&n.name==="AuthApiError"}class Ua extends Ol{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ca extends Ol{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class ta extends ca{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function F4(n){return Ve(n)&&n.name==="AuthSessionMissingError"}class Mo extends ca{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mu extends ca{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class vu extends ca{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function U4(n){return Ve(n)&&n.name==="AuthImplicitGrantRedirectError"}class $y extends ca{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class D0 extends ca{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Vh(n){return Ve(n)&&n.name==="AuthRetryableFetchError"}class Gy extends ca{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class k0 extends ca{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qy=` 	
\r=`.split(""),z4=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<qy.length;e+=1)n[qy[e].charCodeAt(0)]=-2;for(let e=0;e<Vu.length;e+=1)n[Vu[e].charCodeAt(0)]=e;return n})();function Wy(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Vu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Vu[r]),e.queuedBits-=6}}function dw(n,e,t){const r=z4[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Xy(n){const e=[],t=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{$4(s,r,t)};for(let s=0;s<n.length;s+=1)dw(n.charCodeAt(s),i,a);return e.join("")}function V4(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function H4(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}V4(r,e)}}function $4(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Qo(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)dw(n.charCodeAt(i),t,r);return new Uint8Array(e)}function G4(n){const e=[];return H4(n,t=>e.push(t)),new Uint8Array(e)}function za(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>Wy(i,t,r)),Wy(null,t,r),e.join("")}function q4(n){return Math.round(Date.now()/1e3)+n}function W4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const lr=()=>typeof window<"u"&&typeof document<"u",Na={tested:!1,writable:!1},fw=()=>{if(!lr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Na.tested)return Na.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Na.tested=!0,Na.writable=!0}catch{Na.tested=!0,Na.writable=!1}return Na.writable};function X4(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const hw=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ss(async()=>{const{default:r}=await Promise.resolve().then(()=>Ya);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Y4=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Vo=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Ia=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Qi=async(n,e)=>{await n.removeItem(e)};class sd{constructor(){this.promise=new sd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}sd.promiseConstructor=Promise;function Hh(n){const e=n.split(".");if(e.length!==3)throw new k0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!M4.test(e[r]))throw new k0("JWT not in base64url format");return{header:JSON.parse(Xy(e[0])),payload:JSON.parse(Xy(e[1])),signature:Qo(e[2]),raw:{header:e[0],payload:e[1]}}}async function K4(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Z4(n,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await n(a);if(!e(a,null,s)){r(s);return}}catch(s){if(!e(a,s)){i(s);return}}})()})}function Q4(n){return("0"+n.toString(16)).substr(-2)}function J4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Q4).join("")}async function e8(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function t8(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await e8(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Po(n,e,t=!1){const r=J4();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await Vo(n,`${e}-code-verifier`,i);const a=await t8(r);return[a,r===a?"plain":"s256"]}const n8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function r8(n){const e=n.headers.get(I0);if(!e||!e.match(n8))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function i8(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function a8(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const o8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bo(n){if(!o8.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $h(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Yy(n){return JSON.parse(JSON.stringify(n))}const Ma=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),s8=[502,503,504];async function Ky(n){var e;if(!Y4(n))throw new D0(Ma(n),0);if(s8.includes(n.status))throw new D0(Ma(n),n.status);let t;try{t=await n.json()}catch(a){throw new Ua(Ma(a),a)}let r;const i=r8(n);if(i&&i.getTime()>=uw["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Gy(Ma(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ta}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new Gy(Ma(t),n.status,t.weak_password.reasons);throw new B4(Ma(t),n.status||500,r)}const l8=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function We(n,e,t,r){var i;const a=Object.assign({},r?.headers);a[I0]||(a[I0]=uw["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const c=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",d=await c8(n,e,t+c,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(d):{data:Object.assign({},d),error:null}}async function c8(n,e,t,r,i,a){const s=l8(e,r,i,a);let c;try{c=await n(t,Object.assign({},s))}catch(d){throw console.error(d),new D0(Ma(d),0)}if(c.ok||await Ky(c),r?.noResolveJson)return c;try{return await c.json()}catch(d){await Ky(d)}}function Pr(n){var e;let t=null;f8(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=q4(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Zy(n){const e=Pr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ia(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function u8(n){return{data:n,error:null}}function d8(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a}=n,s=ls(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a},d=Object.assign({},s);return{data:{properties:c,user:d},error:null}}function Qy(n){return n}function f8(n){return n.access_token&&n.refresh_token&&n.expires_in}const Gh=["global","local","others"];class h8{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=hw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Gh[0]){if(Gh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gh.join(", ")}`);try{return await We(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await We(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ia})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=ls(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await We(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:d8,redirectTo:t?.redirectTo})}catch(t){if(Ve(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await We(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ia})}catch(t){if(Ve(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,a,s,c,d;try{const f={nextPage:null,lastPage:0,total:0},p=await We(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Qy});if(p.error)throw p.error;const m=await p.json(),v=(s=p.headers.get("x-total-count"))!==null&&s!==void 0?s:0,x=(d=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);f[`${S}Page`]=_}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(Ve(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Bo(e);try{return await We(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ia})}catch(t){if(Ve(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Bo(e);try{return await We(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ia})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Bo(e);try{return await We(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ia})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Bo(e.userId);try{const{data:t,error:r}=await We(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(Ve(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Bo(e.userId),Bo(e.id);try{return{data:await We(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ve(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,i,a,s,c,d;try{const f={nextPage:null,lastPage:0,total:0},p=await We(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Qy});if(p.error)throw p.error;const m=await p.json(),v=(s=p.headers.get("x-total-count"))!==null&&s!==void 0?s:0,x=(d=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);f[`${S}Page`]=_}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(Ve(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await We(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ve(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await We(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ve(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await We(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ve(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await We(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ve(t))return{data:null,error:t};throw t}}}function Jy(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Lo={debug:!!(globalThis&&fw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class p8 extends pw{}async function g8(n,e,t){Lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Lo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{Lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new p8(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Lo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function m8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function gw(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function v8(n){return parseInt(n,16)}function y8(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function x8(n){var e;const{chainId:t,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:c,requestId:d,resources:f,scheme:p,uri:m,version:v}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const x=gw(n.address),w=p?`${p}://${r}`:r,_=n.statement?`${n.statement}
`:"",S=`${w} wants you to sign in with your Ethereum account:
${x}

${_}`;let E=`URI: ${m}
Version: ${v}
Chain ID: ${t}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(E+=`
Expiration Time: ${i.toISOString()}`),c&&(E+=`
Not Before: ${c.toISOString()}`),d&&(E+=`
Request ID: ${d}`),f){let A=`
Resources:`;for(const T of f){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);A+=`
- ${T}`}E+=A}return`${S}
${E}`}class ln extends Error{constructor({message:e,code:t,cause:r,name:i}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=t}}class Hu extends ln{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function b8({error:n,options:e}){var t,r,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ln({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=a.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new ln({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ln({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ln({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new ln({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new ln({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return a.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new ln({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new ln({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(mw(s)){if(a.rp.id!==s)return new ln({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ln({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ln({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new ln({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ln({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function w8({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ln({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new ln({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(mw(r)){if(t.rpId!==r)return new ln({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ln({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new ln({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ln({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class _8{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const S8=new _8;function E8(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,i=ls(n,["challenge","user","excludeCredentials"]),a=Qo(e).buffer,s=Object.assign(Object.assign({},t),{id:Qo(t.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:a,user:s});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const f=r[d];c.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:Qo(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function C8(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=ls(n,["challenge","allowCredentials"]),i=Qo(e).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){a.allowCredentials=new Array(t.length);for(let s=0;s<t.length;s++){const c=t[s];a.allowCredentials[s]=Object.assign(Object.assign({},c),{id:Qo(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function A8(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:za(new Uint8Array(n.response.attestationObject)),clientDataJSON:za(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function T8(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:za(new Uint8Array(i.authenticatorData)),clientDataJSON:za(new Uint8Array(i.clientDataJSON)),signature:za(new Uint8Array(i.signature)),userHandle:i.userHandle?za(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function mw(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function ex(){var n,e;return!!(lr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function O8(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Hu("Browser returned unexpected credential type",e)}:{data:null,error:new Hu("Empty credential response",e)}}catch(e){return{data:null,error:b8({error:e,options:n})}}}async function R8(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Hu("Browser returned unexpected credential type",e)}:{data:null,error:new Hu("Empty credential response",e)}}catch(e){return{data:null,error:w8({error:e,options:n})}}}const N8={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},I8={userVerification:"preferred",hints:["security-key"]};function $u(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))r[a]=s;else if(t(s))r[a]=s;else if(e(s)){const c=r[a];e(c)?r[a]=$u(c,s):r[a]=$u(s)}else r[a]=s}return r}function D8(n,e){return $u(N8,n,e||{})}function k8(n,e){return $u(I8,n,e||{})}class j8{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},a){try{const{data:s,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!s)return{data:null,error:c};const d=i??S8.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:f}=s.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(s.webauthn.type){case"create":{const f=D8(s.webauthn.credential_options.publicKey,a?.create),{data:p,error:m}=await O8({publicKey:f,signal:d});return p?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}case"request":{const f=k8(s.webauthn.credential_options.publicKey,a?.request),{data:p,error:m}=await R8(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:f,signal:d}));return p?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}}}catch(s){return Ve(s)?{data:null,error:s}:{data:null,error:new Ua("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!t)return{data:null,error:new Ol("rpId is required for WebAuthn authentication")};try{if(!ex())return{data:null,error:new Ua("Browser does not support WebAuthn",null)};const{data:s,error:c}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:a});if(!s)return{data:null,error:c};const{webauthn:d}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:d.type,rpId:t,rpOrigins:r,credential_response:d.credential_response}})}catch(s){return Ve(s)?{data:null,error:s}:{data:null,error:new Ua("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!t)return{data:null,error:new Ol("rpId is required for WebAuthn registration")};try{if(!ex())return{data:null,error:new Ua("Browser does not support WebAuthn",null)};const{data:s,error:c}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:c};const{data:d,error:f}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:a});return d?this._verify({factorId:s.id,challengeId:d.challengeId,webauthn:{rpId:t,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(s){return Ve(s)?{data:null,error:s}:{data:null,error:new Ua("Unexpected error in register",s)}}}}m8();const M8={url:D4,storageKey:k4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:j4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function tx(n,e,t){return await t()}const Fo={};class Rl{get jwks(){var e,t;return(t=(e=Fo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Fo[this.storageKey]=Object.assign(Object.assign({},Fo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Fo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Fo[this.storageKey]=Object.assign(Object.assign({},Fo[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Rl.nextInstanceID,Rl.nextInstanceID+=1,this.instanceID>0&&lr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},M8),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new h8({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=hw(i.fetch),this.lock=i.lock||tx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:lr()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=g8:this.lock=tx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new j8(this)},this.persistSession?(i.storage?this.storage=i.storage:fw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jy(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Jy(this.memoryStorage)),lr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cw}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=X4(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),lr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),U4(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",c),await this._saveSession(s),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ve(t)?{error:t}:{error:new Ua("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Pr}),{data:s,error:c}=a;if(c||!s)return{data:{user:null,session:null},error:c};const d=s.session,f=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(Ve(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,i;try{let a;if("email"in e){const{email:p,password:m,options:v}=e;let x=null,w=null;this.flowType==="pkce"&&([x,w]=await Po(this.storage,this.storageKey)),a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:p,password:m,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:x,code_challenge_method:w},xform:Pr})}else if("phone"in e){const{phone:p,password:m,options:v}=e;a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(i=v?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Pr})}else throw new mu("You must provide either an email or phone number and a password");const{data:s,error:c}=a;if(c||!s)return{data:{user:null,session:null},error:c};const d=s.session,f=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(Ve(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:s,options:c}=e;t=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Zy})}else if("phone"in e){const{phone:a,password:s,options:c}=e;t=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Zy})}else throw new mu("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Mo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(Ve(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,a,s,c,d,f,p,m,v;let x,w;if("message"in e)x=e.message,w=e.signature;else{const{chain:_,wallet:S,statement:E,options:A}=e;let T;if(lr())if(typeof S=="object")T=S;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")T=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=S}const R=new URL((t=A?.url)!==null&&t!==void 0?t:window.location.href),I=await T.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=gw(I[0]);let U=(r=A?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!U){const q=await T.request({method:"eth_chainId"});U=v8(q)}const H={domain:R.host,address:M,statement:E,uri:R.href,version:"1",chainId:U,nonce:(i=A?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=A?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(c=A?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=A?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=A?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(p=A?.signInWithEthereum)===null||p===void 0?void 0:p.resources};x=x8(H),w=await T.request({method:"personal_sign",params:[y8(x),M]})}try{const{data:_,error:S}=await We(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:w},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Pr});if(S)throw S;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Mo}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:S})}catch(_){if(Ve(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var t,r,i,a,s,c,d,f,p,m,v,x;let w,_;if("message"in e)w=e.message,_=e.signature;else{const{chain:S,wallet:E,statement:A,options:T}=e;let R;if(lr())if(typeof E=="object")R=E;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))R=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=E}const I=new URL((t=T?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in R&&R.signIn){const M=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),A?{statement:A}:null));let U;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")U=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)U=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)w=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),_=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${I.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(i=(r=T?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=T?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((s=T?.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((d=T?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((f=T?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((m=(p=T?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...T.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const M=await R.signMessage(new TextEncoder().encode(w),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=M}}try{const{data:S,error:E}=await We(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:za(_)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Pr});if(E)throw E;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Mo}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:E})}catch(S){if(Ve(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(e){const t=await Ia(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:a,error:s}=await We(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Pr});if(await Qi(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Mo}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(Ve(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:a,nonce:s}=e,c=await We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Pr}),{data:d,error:f}=c;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Mo}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(t){if(Ve(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,a,s;try{if("email"in e){const{email:c,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Po(this.storage,this.storageKey));const{error:m}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=d?.data)!==null&&t!==void 0?t:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:c,options:d}=e,{data:f,error:p}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(s=d?.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:p}}throw new mu("You must provide either an email or phone number.")}catch(c){if(Ve(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:c}=await We(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Pr});if(c)throw c;if(!s)throw new Error("An error occurred on token verification.");const d=s.session,f=s.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(Ve(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let a=null,s=null;return this.flowType==="pkce"&&([a,s]=await Po(this.storage,this.storageKey)),await We(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:u8})}catch(a){if(Ve(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ta;const{error:i}=await We(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Ve(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:s}=await We(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:s,error:c}=await We(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:s?.message_id},error:c}}throw new mu("You must provide either an email or phone number and a type")}catch(t){if(Ve(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ia(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<zh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await Ia(this.userStorage,this.storageKey+"-user");s?.user?e.user=s.user:e.user=$h()}if(this.storage.isServer&&e.user){let s=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,p)=>(!s&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,p))})}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ia}):await this._useSession(async t=>{var r,i,a;const{data:s,error:c}=t;if(c)throw c;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ta}:await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:ia})})}catch(t){if(Ve(t))return F4(t)&&(await this._removeSession(),await Qi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new ta;const s=i.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await Po(this.storage,this.storageKey));const{data:f,error:p}=await We(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:s.access_token,xform:ia});if(p)throw p;return s.user=f.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ta;const t=Date.now()/1e3;let r=t,i=!0,a=null;const{payload:s}=Hh(e.access_token);if(s.exp&&(r=s.exp,i=r<=t),i){const{data:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Ve(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:s,error:c}=t;if(c)throw c;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new ta;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ve(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!lr())throw new vu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new vu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new $y("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vu("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $y("No code detected.");const{data:A,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:c,expires_at:d,token_type:f}=e;if(!a||!c||!s||!f)throw new vu("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(c);let v=p+m;d&&(v=parseInt(d));const x=v-p;x*1e3<=zo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${m}s`);const w=v-m;p-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,p):p-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,p);const{data:_,error:S}=await this._getUser(a);if(S)throw S;const E={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:v,refresh_token:s,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(r){if(Ve(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ia(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{error:a};const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:c}=await this.admin.signOut(s,e);if(c&&!(L4(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Qi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=W4(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:a},error:s}=t;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Po(this.storage,this.storageKey,!0));try{return await We(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Ve(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ve(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:i}=await this._useSession(async a=>{var s,c,d,f,p;const{data:m,error:v}=a;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await We(this.fetch,"GET",x,{headers:this.headers,jwt:(p=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return lr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(Ve(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:i,data:{session:a}}=t;if(i)throw i;const{options:s,provider:c,token:d,access_token:f,nonce:p}=e,m=await We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:d,access_token:f,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Pr}),{data:v,error:x}=m;return x?{data:{user:null,session:null},error:x}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new Mo}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:x})}catch(i){if(Ve(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:s}=t;if(s)throw s;return await We(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Ve(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Z4(async i=>(i>0&&await K4(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await We(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Pr})),(i,a)=>{const s=200*Math.pow(2,i);return a&&Vh(a)&&Date.now()+s-r<zo})}catch(r){if(this._debug(t,"error",r),Ve(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),lr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ia(this.storage,this.storageKey);if(i&&this.userStorage){let s=await Ia(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await Vo(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s?.user)!==null&&e!==void 0?e:$h()}else if(i&&!i.user&&!i.user){const s=await Ia(this.storage,this.storageKey+"-user");s&&s?.user?(i.user=s.user,await Qi(this.storage,this.storageKey+"-user"),await Vo(this.storage,this.storageKey,i)):i.user=$h()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<zh;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${zh}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),Vh(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:c}=await this._getUser(i.access_token);!c&&s?.user?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ta;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new sd;const{data:a,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!a.session)throw new ta;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),Ve(a)){const s={data:null,error:a};return Vh(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(d){a.push(d)}});if(await Promise.all(s),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Vo(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const a=Yy(i);await Vo(this.storage,this.storageKey,a)}else{const i=Yy(t);await Vo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Qi(this.storage,this.storageKey),await Qi(this.storage,this.storageKey+"-code-verifier"),await Qi(this.storage,this.storageKey+"-user"),this.userStorage&&await Qi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),zo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/zo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${zo}ms, refresh threshold is ${N0} ticks`),i<=N0&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,s]=await Po(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(c.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await We(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Ve(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:s}=t;if(s)return{data:null,error:s};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:f}=await We(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&d.type==="totp"&&(!((i=d?.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(t){if(Ve(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?A8(e.webauthn.credential_response):T8(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:d}=await We(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:d})})}catch(t){if(Ve(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const s=await We(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(s.error)return s;const{data:c}=s;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:E8(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:C8(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Ve(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=t?.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Hh(i.access_token);let c=null;s.aal&&(c=s.aal);let d=c;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const p=s.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+P4>i)return r;const{data:a,error:s}=await We(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:x,error:w}=await this.getSession();if(w||!x.session)return{data:null,error:w};r=x.session.access_token}const{header:i,payload:a,signature:s,raw:{header:c,payload:d}}=Hh(r);t?.allowExpired||i8(a.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!f){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:a,header:i,signature:s},error:null}}const p=a8(i.alg),m=await crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,s,G4(`${c}.${d}`)))throw new k0("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}}Rl.nextInstanceID=0;const P8=Rl;class B8 extends P8{constructor(e){super(e)}}class L8{constructor(e,t,r){var i,a,s;this.supabaseUrl=e,this.supabaseKey=t;const c=I4(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:S4,realtime:C4,auth:Object.assign(Object.assign({},E4),{storageKey:d}),global:_4},p=N4(r??{},f);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=p.auth)!==null&&s!==void 0?s:{},this.headers,p.global.fetch),this.fetch=O4(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new DA(new URL("rest/v1",c).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new x4(this.storageUrl.href,this.headers,this.fetch,r?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new _A(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:s,flowType:c,lock:d,debug:f},p,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new B8({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),p),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:a,flowType:c,lock:d,debug:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new YA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const F8=(n,e,t)=>new L8(n,e,t);function U8(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}U8()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const z8="https://znqhoohjugyblgwepovp.supabase.co",V8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY",xe=F8(z8,V8,{realtime:{params:{eventsPerSecond:10}}});function H8(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function $8(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var G8=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),q8=(function(n){G8(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),H8(a,i.prototype),$8(a),a}return e})(Error),W8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),er=(function(n){W8(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(q8),X8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),tn=(function(n){X8(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(er),Y8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ue=(function(n){Y8(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(er),vw=(function(){function n(e){if(this.binarizer=e,e===null)throw new Ue("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),K8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),un=(function(n){K8(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(er),Z8=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),jt=(function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),Q8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),T1=(function(n){Q8(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(er),J8=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),nx=(function(n){J8(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(T1),e6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vn=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Ue("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new nx(t);if(r>e)throw new nx(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=e6(e),s=a.next();!s.done;s=a.next()){var c=s.value;i=31*i+c}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return jt.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,c=r(t,e[s]);if(c>0)i=s+1;else if(c<0)a=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),rt=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Sn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);jt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=r[i]}var c=i*32+rt.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=~r[i]}var c=i*32+rt.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Ue;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=r;s<=i;s++){var c=s>r?0:e&31,d=s<i?31:t&31,f=(2<<d)-(1<<c);a[s]|=f}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Ue;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,c=i;c<=a;c++){var d=c>i?0:e&31,f=c<a?31:t&31,p=(2<<f)-(1<<d)&4294967295;if((s[c]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Ue("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Ue("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var s=0,c=0;c<8;c++)this.get(e)&&(s|=1<<7-c),e++;t[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==r*32){for(var c=r*32-this.size,d=e[0]>>>c,a=1;a<r;a++){var f=e[a];d|=f<<32-c,e[a-1]=d,d=f>>>c}e[r-1]=d}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&vn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+vn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),j0;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(j0||(j0={}));const Mt=j0;var t6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),be=(function(n){t6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(er),n6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Ct||(Ct={}));var mn=(function(){function n(e,t,r){for(var i,a,s=[],c=3;c<arguments.length;c++)s[c-3]=arguments[c];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var d=this.values,f=0,p=d.length;f!==p;f++){var m=d[f];n.VALUES_TO_ECI.set(m,this)}try{for(var v=n6(s),x=v.next();!x.done;x=v.next()){var w=x.value;n.NAME_TO_ECI.set(w,this)}}catch(_){i={error:_}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new be("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new be("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new be("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Ct.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Ct.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Ct.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Ct.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Ct.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Ct.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Ct.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Ct.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Ct.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Ct.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Ct.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Ct.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Ct.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Ct.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Ct.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Ct.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Ct.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Ct.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Ct.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Ct.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Ct.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Ct.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Ct.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Ct.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Ct.Big5,28,"Big5"),n.GB18030=new n(Ct.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Ct.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),r6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Nu=(function(n){r6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(er),Nr=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof mn?e:mn.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(mn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Nu("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(mn.UTF8)||e.equals(mn.ISO8859_1)||e.equals(mn.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),ht=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Nr.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Mt.CHARACTER_SET)!==void 0)return t.get(Mt.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,c=0,d=0,f=0,p=0,m=0,v=0,x=0,w=0,_=0,S=0,E=0,A=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,T=0;T<r&&(i||a||s);T++){var R=e[T]&255;s&&(c>0?(R&128)===0?s=!1:c--:(R&128)!==0&&((R&64)===0?s=!1:(c++,(R&32)===0?d++:(c++,(R&16)===0?f++:(c++,(R&8)===0?p++:s=!1))))),i&&(R>127&&R<160?i=!1:R>159&&(R<192||R===215||R===247)&&E++),a&&(m>0?R<64||R===127||R>252?a=!1:m--:R===128||R===160||R>239?a=!1:R>160&&R<224?(v++,w=0,x++,x>_&&(_=x)):R>127?(m++,x=0,w++,w>S&&(S=w)):(x=0,w=0))}return s&&c>0&&(s=!1),a&&m>0&&(a=!1),s&&(A||d+f+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||_>=3||S>=3)?n.SHIFT_JIS:i&&a?_===2&&v===2||E*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(c,d,f,p,m,v){if(c==="%%")return"%";if(t[++i]!==void 0){c=p?parseInt(p.substr(1)):void 0;var x=m?parseInt(m.substr(1)):void 0,w;switch(v){case"s":w=t[i];break;case"c":w=t[i][0];break;case"f":w=parseFloat(t[i]).toFixed(c);break;case"p":w=parseFloat(t[i]).toPrecision(c);break;case"e":w=parseFloat(t[i]).toExponential(c);break;case"x":w=parseInt(t[i]).toString(x||16);break;case"d":w=parseFloat(parseInt(t[i],x||10).toPrecision(c)).toFixed(0);break}w=typeof w=="object"?JSON.stringify(w):(+w).toString(x);for(var _=parseInt(f),S=f&&f[0]+""=="0"?"0":" ";w.length<_;)w=d!==void 0?w+S:S+w;return w}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},n.getBytes=function(e,t){return Nr.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=mn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=mn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=mn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),nt=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ht.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),Jr=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Ue("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var s=e[a],c=0;c<r;c++)s[c]&&i.set(c,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Ue("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,c=-1,d=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>s){if(c===-1)c=a-s;else if(a-s!==c)throw new Ue("row lengths do not match");s=a,d++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,i[a]=!0,a++;else if(e.substring(f,f+r.length)===r)f+=r.length,i[a]=!1,a++;else throw new Ue("illegal character encountered: "+e.substring(f));if(a>s){if(c===-1)c=a-s;else if(a-s!==c)throw new Ue("row lengths do not match");d++}for(var p=new n(c,d),m=0;m<a;m++)i[m]&&p.set(Math.floor(m%c),Math.floor(m/c));return p},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ue("input matrix dimensions do not match");for(var t=new Sn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var c=a*r,d=e.getRow(a,t).getBitArray(),f=0;f<r;f++)i[c+f]^=d[f]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Ue("Left and top must be nonnegative");if(i<1||r<1)throw new Ue("Height and width must be at least 1");var a=e+r,s=t+i;if(s>this.height||a>this.width)throw new Ue("The region must fit inside the matrix");for(var c=this.rowSize,d=this.bits,f=t;f<s;f++)for(var p=f*c,m=e;m<a;m++)d[p+Math.floor(m/32)]|=1<<(m&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Sn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)t.setBulk(s*32,i[a+s]);return t},n.prototype.setRow=function(e,t){jt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Sn(e),i=new Sn(e),a=0,s=Math.floor((t+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,s=t,c=-1,d=-1,f=0;f<t;f++)for(var p=0;p<r;p++){var m=i[f*r+p];if(m!==0){if(f<s&&(s=f),f>d&&(d=f),p*32<a){for(var v=0;(m<<31-v&4294967295)===0;)v++;p*32+v<a&&(a=p*32+v)}if(p*32+31>c){for(var v=31;!(m>>>v);)v--;p*32+v>c&&(c=p*32+v)}}}return c<a||d<s?null:Int32Array.from([a,s,c-a+1,d-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,s=t[r],c=0;(s<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=t[r],c=31;!(s>>>c);)c--;return a+=c,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&vn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+vn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new nt,a=0,s=this.height;a<s;a++){for(var c=0,d=this.width;c<d;c++)i.append(this.get(c,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),i6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ne=(function(n){i6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(er),a6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),o6=(function(n){a6(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Sn(a):r.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),c=this.buckets,d=0;d<a;d++)c[(s[d]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(c);if(a<3)for(var d=0;d<a;d++)(s[d]&255)<f&&r.set(d);else for(var p=s[0]&255,m=s[1]&255,d=1;d<a-1;d++){var v=s[d+1]&255;(m*4-p-v)/2<f&&r.set(d),p=m,m=v}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new Jr(r,i);this.initArrays(r);for(var s=this.buckets,c=1;c<5;c++)for(var d=Math.floor(i*c/5),f=t.getRow(d,this.luminances),p=Math.floor(r*4/5),m=Math.floor(r/5);m<p;m++){var v=f[m]&255;s[v>>e.LUMINANCE_SHIFT]++}for(var x=e.estimateBlackPoint(s),w=t.getMatrix(),c=0;c<i;c++)for(var _=c*r,m=0;m<r;m++){var v=w[_+m]&255;v<x&&a.set(m,c)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,s=0,c=0;c<r;c++)t[c]>s&&(a=c,s=t[c]),t[c]>i&&(i=t[c]);for(var d=0,f=0,c=0;c<r;c++){var p=c-a,m=t[c]*p*p;m>f&&(d=c,f=m)}if(a>d){var v=a;a=d,d=v}if(d-a<=r/16)throw new ne;for(var x=d-1,w=-1,c=d-1;c>a;c--){var _=c-a,m=_*_*(d-c)*(i-t[c]);m>w&&(x=c,w=m)}return x<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(Z8),s6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yw=(function(n){s6(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var c=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&c++;var d=e.calculateBlackPoints(a,s,c,r,i),f=new Jr(r,i);e.calculateThresholdForBlock(a,s,c,r,i,d,f),this.matrix=f}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,s,c,d){for(var f=s-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,m=0;m<i;m++){var v=m<<e.BLOCK_SIZE_POWER;v>f&&(v=f);for(var x=e.cap(m,2,i-3),w=0;w<r;w++){var _=w<<e.BLOCK_SIZE_POWER;_>p&&(_=p);for(var S=e.cap(w,2,r-3),E=0,A=-2;A<=2;A++){var T=c[x+A];E+=T[S-2]+T[S-1]+T[S]+T[S+1]+T[S+2]}var R=E/25;e.thresholdBlock(t,_,v,R,a,d)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,s,c){for(var d=0,f=i*s+r;d<e.BLOCK_SIZE;d++,f+=s)for(var p=0;p<e.BLOCK_SIZE;p++)(t[f+p]&255)<=a&&c.set(r+p,i+d)},e.calculateBlackPoints=function(t,r,i,a,s){for(var c=s-e.BLOCK_SIZE,d=a-e.BLOCK_SIZE,f=new Array(i),p=0;p<i;p++){f[p]=new Int32Array(r);var m=p<<e.BLOCK_SIZE_POWER;m>c&&(m=c);for(var v=0;v<r;v++){var x=v<<e.BLOCK_SIZE_POWER;x>d&&(x=d);for(var w=0,_=255,S=0,E=0,A=m*a+x;E<e.BLOCK_SIZE;E++,A+=a){for(var T=0;T<e.BLOCK_SIZE;T++){var R=t[A+T]&255;w+=R,R<_&&(_=R),R>S&&(S=R)}if(S-_>e.MIN_DYNAMIC_RANGE)for(E++,A+=a;E<e.BLOCK_SIZE;E++,A+=a)for(var T=0;T<e.BLOCK_SIZE;T++)w+=t[A+T]&255}var I=w>>e.BLOCK_SIZE_POWER*2;if(S-_<=e.MIN_DYNAMIC_RANGE&&(I=_/2,p>0&&v>0)){var M=(f[p-1][v]+2*f[p][v-1]+f[p-1][v-1])/4;_<M&&(I=M)}f[p][v]=I}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(o6),Ul=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Nu("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Nu("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Nu("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new nt,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,c=void 0;s<64?c="#":s<128?c="+":s<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()},n})(),l6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ld=(function(n){l6(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Ul),c6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),u6=(function(n){c6(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var c=0,d=0,f=t.length;c<f;c+=4,d++){var p=void 0,m=t[c+3];if(m===0)p=255;else{var v=t[c],x=t[c+1],w=t[c+2];p=306*v+601*x+117*w+512>>10}s[d]=p}else for(var c=0,d=0,_=t.length;c<_;c+=4,d++){var p=void 0,m=t[c+3];if(m===0)p=255;else{var v=t[c],x=t[c+1],w=t[c+2];p=306*v+601*x+117*w+512>>10}s[d]=255-p}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ue("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,c=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*c),f=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*c);return r.width=d,r.height=f,i.translate(d/2,f/2),i.rotate(a),i.drawImage(this.canvas,s/-2,c/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new ld(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Ul),d6=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),Un=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{f(r.next(p))}catch(m){s(m)}}function d(p){try{f(r.throw(p))}catch(m){s(m)}}function f(p){p.done?a(p.value):i(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})},zn=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(f){return function(p){return d([f,p])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(p){f=[6,p],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},f6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},us=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Un(this,void 0,void 0,function(){var e,t,r,i,a,s,c,d,f,p,m,v;return zn(this,function(x){switch(x.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=x.sent(),t=[];try{for(r=f6(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(c=a.deviceId||a.id,d=a.label||"Video device "+(t.length+1),f=a.groupId,p={deviceId:c,label:d,kind:s,groupId:f},t.push(p))}catch(w){m={error:w}}finally{try{i&&!i.done&&(v=r.return)&&v.call(r)}finally{if(m)throw m.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Un(this,void 0,void 0,function(){var e;return zn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new d6(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Un(this,void 0,void 0,function(){var t;return zn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Un(this,void 0,void 0,function(){return zn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Un(this,void 0,void 0,function(){var r,i;return zn(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Un(this,void 0,void 0,function(){var r;return zn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Un(this,void 0,void 0,function(){var r,i;return zn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Un(this,void 0,void 0,function(){return zn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Un(this,void 0,void 0,function(){var i,a;return zn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Un(this,void 0,void 0,function(){var i;return zn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Un(this,void 0,void 0,function(){var i;return zn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Un(this,void 0,void 0,function(){var r;return zn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Un(this,void 0,void 0,function(){return zn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new tn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new tn("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new tn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new tn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new tn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new tn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new tn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new tn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new tn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new tn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Un(this,void 0,void 0,function(){return zn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Un(this,void 0,void 0,function(){return zn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,c){if(i._stopAsyncDecode){c(new ne("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var d=i.decode(e);s(d)}catch(v){var f=t&&v instanceof ne,p=v instanceof un||v instanceof be,m=p&&r;if(f||m)return setTimeout(a,i._timeBetweenDecodingAttempts,s,c);c(v)}};return new Promise(function(s,c){return a(s,c)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(d){t(null,d);var s=d instanceof un||d instanceof be,c=d instanceof ne;(s||c)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new u6(r,t),a=new yw(i);return new vw(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),Ln=(function(){function n(e,t,r,i,a,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=jt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=jt.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);jt.arraycopy(t,0,r,0,t.length),jt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),M0;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(M0||(M0={}));const Fe=M0;var P0;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(P0||(P0={}));const Dn=P0;var cd=(function(){function n(e,t,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),pl=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ue;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),aa=(function(){function n(e,t){if(t.length===0)throw new Ue;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),jt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];r=pl.addOrSubtract(r,s)}return r}r=t[0];for(var c=t.length,d=this.field,i=1;i<c;i++)r=pl.addOrSubtract(d.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ue("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;jt.arraycopy(r,0,a,0,s);for(var c=s;c<r.length;c++)a[c]=pl.addOrSubtract(t[c-s],r[c]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ue("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),c=this.field,d=0;d<r;d++)for(var f=t[d],p=0;p<a;p++)s[d+p]=pl.addOrSubtract(s[d+p],c.multiply(f,i[p]));return new n(c,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(a[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ue;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,c=0;c<i;c++)a[c]=s.multiply(r[c],t);return new n(s,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ue("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ue("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var c=i.getDegree()-e.getDegree(),d=t.multiply(i.getCoefficient(i.getDegree()),s),f=e.multiplyByMonomial(c,d),p=t.buildMonomial(c,d);r=r.addOrSubtract(p),i=i.addOrSubtract(f)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),h6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xw=(function(n){h6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(er),p6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Qn=(function(n){p6(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),c=1,d=0;d<r;d++)s[d]=c,c*=2,c>=r&&(c^=t,c&=r-1);a.expTable=s;for(var f=new Int32Array(r),d=0;d<r-1;d++)f[s[d]]=d;return a.logTable=f,a.zero=new aa(a,Int32Array.from([0])),a.one=new aa(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ue;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new aa(this,i)},e.prototype.inverse=function(t){if(t===0)throw new xw;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+rt.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(pl),g6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yu=(function(n){g6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(er),m6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zl=(function(n){m6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(er),ud=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new aa(r,e),a=new Int32Array(t),s=!0,c=0;c<t;c++){var d=i.evaluateAt(r.exp(c+r.getGeneratorBase()));a[a.length-1-c]=d,d!==0&&(s=!1)}if(!s)for(var f=new aa(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(t,1),f,t),m=p[0],v=p[1],x=this.findErrorLocations(m),w=this.findErrorMagnitudes(v,x),c=0;c<x.length;c++){var _=e.length-1-r.log(x[c]);if(_<0)throw new yu("Bad error location");e[_]=Qn.addOrSubtract(e[_],w[c])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,c=t,d=a.getZero(),f=a.getOne();c.getDegree()>=(r/2|0);){var p=s,m=d;if(s=c,d=f,s.isZero())throw new yu("r_{i-1} was zero");c=p;for(var v=a.getZero(),x=s.getCoefficient(s.getDegree()),w=a.inverse(x);c.getDegree()>=s.getDegree()&&!c.isZero();){var _=c.getDegree()-s.getDegree(),S=a.multiply(c.getCoefficient(c.getDegree()),w);v=v.addOrSubtract(a.buildMonomial(_,S)),c=c.addOrSubtract(s.multiplyByMonomial(_,S))}if(f=v.multiply(d).addOrSubtract(m),c.getDegree()>=s.getDegree())throw new zl("Division algorithm failed to reduce polynomial?")}var E=f.getCoefficient(0);if(E===0)throw new yu("sigmaTilde(0) was zero");var A=a.inverse(E),T=f.multiplyScalar(A),R=c.multiplyScalar(A);return[T,R]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==t)throw new yu("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var c=a.inverse(t[s]),d=1,f=0;f<r;f++)if(s!==f){var p=a.multiply(t[f],c),m=(p&1)===0?p|1:p&-2;d=a.multiply(d,m)}i[s]=a.multiply(e.evaluateAt(c),a.inverse(d)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],c))}return i},n})(),Rn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Rn||(Rn={}));var rx=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),c=new cd(a,s,null,null);return c.setNumBits(i.length),c},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Rn.UPPER,i=Rn.UPPER,a="",s=0;s<t;)if(i===Rn.BINARY){if(t-s<5)break;var c=n.readCode(e,s,5);if(s+=5,c===0){if(t-s<11)break;c=n.readCode(e,s,11)+31,s+=11}for(var d=0;d<c;d++){if(t-s<8){s=t;break}var f=n.readCode(e,s,8);a+=ht.castAsNonUtf8Char(f),s+=8}i=r}else{var p=i===Rn.DIGIT?4:5;if(t-s<p)break;var f=n.readCode(e,s,p);s+=p;var m=n.getCharacter(i,f);m.startsWith("CTRL_")?(r=i,i=n.getTable(m.charAt(5)),m.charAt(6)==="L"&&(r=i)):(a+=m,i=r)}return a},n.getTable=function(e){switch(e){case"L":return Rn.LOWER;case"P":return Rn.PUNCT;case"M":return Rn.MIXED;case"D":return Rn.DIGIT;case"B":return Rn.BINARY;case"U":default:return Rn.UPPER}},n.getCharacter=function(e,t){switch(e){case Rn.UPPER:return n.UPPER_TABLE[t];case Rn.LOWER:return n.LOWER_TABLE[t];case Rn.MIXED:return n.MIXED_TABLE[t];case Rn.PUNCT:return n.PUNCT_TABLE[t];case Rn.DIGIT:return n.DIGIT_TABLE[t];default:throw new zl("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Qn.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Qn.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Qn.AZTEC_DATA_10):(r=12,t=Qn.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new be;for(var s=e.length%r,c=new Int32Array(a),d=0;d<a;d++,s+=r)c[d]=n.readCode(e,s,r);try{var f=new ud(t);f.decode(c,a-i)}catch(S){throw new be(S)}for(var p=(1<<r)-1,m=0,d=0;d<i;d++){var v=c[d];if(v===0||v===p)throw new be;(v===1||v===p-1)&&m++}for(var x=new Array(i*r-m),w=0,d=0;d<i;d++){var v=c[d];if(v===1||v===p-1)x.fill(v>1,w,w+r-1),w+=r-1;else for(var _=r-1;_>=0;--_)x[w++]=(v&1<<_)!==0}return x},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var c=0;c<a.length;c++)a[c]=c;else for(var d=i+1+2*rt.truncDivision(rt.truncDivision(i,2)-1,15),f=i/2,p=rt.truncDivision(d,2),c=0;c<f;c++){var m=c+rt.truncDivision(c,15);a[f-c-1]=p-m-1,a[f+c]=p+m+1}for(var c=0,v=0;c<r;c++){for(var x=(r-c)*4+(t?9:12),w=c*2,_=i-1-w,S=0;S<x;S++)for(var E=S*2,A=0;A<2;A++)s[v+E+A]=e.get(a[w+A],a[w+S]),s[v+2*x+E+A]=e.get(a[w+S],a[_-A]),s[v+4*x+E+A]=e.get(a[_-A],a[_-S]),s[v+6*x+E+A]=e.get(a[_-S],a[w+A]);v+=x*8}return s},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),vt=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,s=t-i;return Math.sqrt(a*a+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n})(),B0=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),De=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*B0.floatToIntBits(this.x)+B0.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,c;if(r>=t&&r>=i?(s=e[0],a=e[1],c=e[2]):i>=r&&i>=t?(s=e[1],a=e[0],c=e[2]):(s=e[2],a=e[0],c=e[1]),this.crossProductZ(a,s,c)<0){var d=a;a=c,c=d}e[0]=a,e[1]=s,e[2]=c},n.distance=function(e,t){return vt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n})(),O1=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),v6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),y6=(function(n){v6(e,n);function e(t,r,i,a,s){var c=n.call(this,t,r)||this;return c.compact=i,c.nbDatablocks=a,c.nbLayers=s,c}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(O1),L0=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,c=!1,d=!1,f=!1,p=!1,m=!1,v=this.width,x=this.height;s;){s=!1;for(var w=!0;(w||!d)&&t<v;)w=this.containsBlackPoint(r,i,t,!1),w?(t++,s=!0,d=!0):d||t++;if(t>=v){a=!0;break}for(var _=!0;(_||!f)&&i<x;)_=this.containsBlackPoint(e,t,i,!0),_?(i++,s=!0,f=!0):f||i++;if(i>=x){a=!0;break}for(var S=!0;(S||!p)&&e>=0;)S=this.containsBlackPoint(r,i,e,!1),S?(e--,s=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var E=!0;(E||!m)&&r>=0;)E=this.containsBlackPoint(e,t,r,!0),E?(r--,s=!0,m=!0):m||r--;if(r<0){a=!0;break}s&&(c=!0)}if(!a&&c){for(var A=t-e,T=null,R=1;T===null&&R<A;R++)T=this.getBlackPointOnSegment(e,i-R,e+R,i);if(T==null)throw new ne;for(var I=null,R=1;I===null&&R<A;R++)I=this.getBlackPointOnSegment(e,r+R,e+R,r);if(I==null)throw new ne;for(var M=null,R=1;M===null&&R<A;R++)M=this.getBlackPointOnSegment(t,r+R,t-R,r);if(M==null)throw new ne;for(var U=null,R=1;U===null&&R<A;R++)U=this.getBlackPointOnSegment(t,i-R,t-R,i);if(U==null)throw new ne;return this.centerEdges(U,T,M,I)}else throw new ne},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=vt.round(vt.distance(e,t,r,i)),s=(r-e)/a,c=(i-t)/a,d=this.image,f=0;f<a;f++){var p=vt.round(e+f*s),m=vt.round(t+f*c);if(d.get(p,m))return new De(p,m)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),s=e.getY(),c=t.getX(),d=t.getY(),f=r.getX(),p=r.getY(),m=i.getX(),v=i.getY(),x=n.CORR;return a<this.width/2?[new De(m-x,v+x),new De(c+x,d+x),new De(f-x,p-x),new De(a+x,s-x)]:[new De(m+x,v+x),new De(c+x,d-x),new De(f-x,p+x),new De(a-x,s-x)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,r))return!0}else for(var c=e;c<=t;c++)if(a.get(r,c))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),ix=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var c=Math.floor(t[s]),d=Math.floor(t[s+1]);if(c<-1||c>r||d<-1||d>i)throw new ne;a=!1,c===-1?(t[s]=0,a=!0):c===r&&(t[s]=r-1,a=!0),d===-1?(t[s+1]=0,a=!0):d===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var c=Math.floor(t[s]),d=Math.floor(t[s+1]);if(c<-1||c>r||d<-1||d>i)throw new ne;a=!1,c===-1?(t[s]=0,a=!0):c===r&&(t[s]=r-1,a=!0),d===-1?(t[s+1]=0,a=!0):d===i&&(t[s+1]=i-1,a=!0)}},n})(),bw=(function(){function n(e,t,r,i,a,s,c,d,f){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=c,this.a23=d,this.a33=f}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,s,c,d,f,p,m,v,x,w,_,S){var E=n.quadrilateralToSquare(e,t,r,i,a,s,c,d),A=n.squareToQuadrilateral(f,p,m,v,x,w,_,S);return A.times(E)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,c=this.a22,d=this.a23,f=this.a31,p=this.a32,m=this.a33,v=0;v<t;v+=2){var x=e[v],w=e[v+1],_=a*x+d*w+m;e[v]=(r*x+s*w+f)/_,e[v+1]=(i*x+c*w+p)/_}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,c=this.a22,d=this.a23,f=this.a31,p=this.a32,m=this.a33,v=e.length,x=0;x<v;x++){var w=e[x],_=t[x],S=a*w+d*_+m;e[x]=(r*w+s*_+f)/S,t[x]=(i*w+c*_+p)/S}},n.squareToQuadrilateral=function(e,t,r,i,a,s,c,d){var f=e-r+a-c,p=t-i+s-d;if(f===0&&p===0)return new n(r-e,a-r,e,i-t,s-i,t,0,0,1);var m=r-a,v=c-a,x=i-s,w=d-s,_=m*w-v*x,S=(f*w-v*p)/_,E=(m*p-f*x)/_;return new n(r-e+S*r,c-e+E*c,e,i-t+S*i,d-t+E*d,t,S,E,1)},n.quadrilateralToSquare=function(e,t,r,i,a,s,c,d){return n.squareToQuadrilateral(e,t,r,i,a,s,c,d).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),x6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),b6=(function(n){x6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,s,c,d,f,p,m,v,x,w,_,S,E,A,T,R){var I=bw.quadrilateralToQuadrilateral(a,s,c,d,f,p,m,v,x,w,_,S,E,A,T,R);return this.sampleGridWithTransform(t,r,i,I)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new ne;for(var s=new Jr(r,i),c=new Float32Array(2*r),d=0;d<i;d++){for(var f=c.length,p=d+.5,m=0;m<f;m+=2)c[m]=m/2+.5,c[m+1]=p;a.transformPoints(c),ix.checkAndNudgePoints(t,c);try{for(var m=0;m<f;m+=2)t.get(Math.floor(c[m]),Math.floor(c[m+1]))&&s.set(m/2,d)}catch{throw new ne}}return s},e})(ix),R1=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new b6,n})(),Zn=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new De(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),w6=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new y6(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ne;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var c=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,s,c){var d=(a>>t-2<<1)+(a&1);r=(r<<3)+d}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(rt.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ne},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),c=r-1;c>=0;--c)s[c]=e&15,e>>=4;try{var d=new ud(Qn.AZTEC_PARAM);d.decode(s,a)}catch{throw new ne}for(var f=0,c=0;c<i;c++)f=(f<<4)+s[c];return f},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var c=this.getFirstDifferent(t,s,1,-1),d=this.getFirstDifferent(r,s,1,1),f=this.getFirstDifferent(i,s,-1,1),p=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var m=this.distancePoint(p,c)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(m<.75||m>1.25||!this.isWhiteOrBlackRectangle(c,d,f,p))break}t=c,r=d,i=f,a=p,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;var v=new De(t.getX()+.5,t.getY()-.5),x=new De(r.getX()+.5,r.getY()+.5),w=new De(i.getX()-.5,i.getY()+.5),_=new De(a.getX()-.5,a.getY()-.5);return this.expandSquare([v,x,w,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new L0(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new Zn(s+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Zn(s+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Zn(s-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Zn(s-7,c-7),!1,-1,-1).toResultPoint()}var d=vt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=vt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new L0(this.image,15,d,f).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Zn(d+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Zn(d+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Zn(d-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Zn(d-7,f-7),!1,-1,-1).toResultPoint()}return d=vt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),f=vt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Zn(d,f)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var s=R1.getInstance(),c=this.getDimension(),d=c/2-this.nbCenterLayers,f=c/2+this.nbCenterLayers;return s.sampleGrid(e,c,c,d,d,f,d,f,f,d,f,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),s=a/r,c=e.getX(),d=e.getY(),f=s*(t.getX()-e.getX())/a,p=s*(t.getY()-e.getY())/a,m=0;m<r;m++)this.image.get(vt.round(c+m*f),vt.round(d+m*p))&&(i|=1<<r-m-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Zn(e.getX()-a,e.getY()+a),t=new Zn(t.getX()-a,t.getY()-a),r=new Zn(r.getX()+a,r.getY()-a),i=new Zn(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var c=this.getColor(e,t);return c!==s||(c=this.getColor(t,r),c!==s)?!1:(c=this.getColor(r,i),c===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,s=0,c=e.getX(),d=e.getY(),f=this.image.get(e.getX(),e.getY()),p=Math.ceil(r),m=0;m<p;m++)c+=i,d+=a,this.image.get(vt.round(c),vt.round(d))!==f&&s++;var v=s/r;return v>.1&&v<.9?0:v<=.1===f?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new Zn(a,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,d=(e[0].getY()+e[2].getY())/2,f=new De(c+i*a,d+i*s),p=new De(c-i*a,d-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,d=(e[1].getY()+e[3].getY())/2;var m=new De(c+i*a,d+i*s),v=new De(c-i*a,d-i*s),x=[f,m,p,v];return x},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=vt.round(e.getX()),r=vt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return vt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return vt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(rt.truncDivision(this.nbLayers-4,8)+1)+15},n})(),Gu=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new w6(e.getBlackMatrix()),a=null,s=null;try{var c=i.detectMirror(!1);a=c.getPoints(),this.reportFoundResultPoints(t,a),s=new rx().decode(c)}catch(m){r=m}if(s==null)try{var c=i.detectMirror(!0);a=c.getPoints(),this.reportFoundResultPoints(t,a),s=new rx().decode(c)}catch(m){throw r??m}var d=new Ln(s.getText(),s.getRawBytes(),s.getNumBits(),a,Fe.AZTEC,jt.currentTimeMillis()),f=s.getByteSegments();f!=null&&d.putMetadata(Dn.BYTE_SEGMENTS,f);var p=s.getECLevel();return p!=null&&d.putMetadata(Dn.ERROR_CORRECTION_LEVEL,p),d},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Mt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),_6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){_6(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Gu,t)||this}return e})(us);var yn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Mt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),c=270;s!==null&&s.get(Dn.ORIENTATION)===!0&&(c=c+s.get(Dn.ORIENTATION)%360),a.putMetadata(Dn.ORIENTATION,c);var d=a.getResultPoints();if(d!==null)for(var f=i.getHeight(),p=0;p<d.length;p++)d[p]=new De(f-d[p].getY()-1,d[p].getX());return a}else throw new ne}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Sn(r),s=t&&t.get(Mt.TRY_HARDER)===!0,c=Math.max(1,i>>(s?8:5)),d;s?d=i:d=15;for(var f=Math.trunc(i/2),p=0;p<d;p++){var m=Math.trunc((p+1)/2),v=(p&1)===0,x=f+c*(v?m:-m);if(x<0||x>=i)break;try{a=e.getBlackRow(x,a)}catch{continue}for(var w=function(A){if(A===1&&(a.reverse(),t&&t.get(Mt.NEED_RESULT_POINT_CALLBACK)===!0)){var T=new Map;t.forEach(function(M,U){return T.set(U,M)}),T.delete(Mt.NEED_RESULT_POINT_CALLBACK),t=T}try{var R=_.decodeRow(x,a,t);if(A===1){R.putMetadata(Dn.ORIENTATION,180);var I=R.getResultPoints();I!==null&&(I[0]=new De(r-I[0].getX()-1,I[0].getY()),I[1]=new De(r-I[1].getX()-1,I[1].getY()))}return{value:R}}catch{}},_=this,S=0;S<2;S++){var E=w(S);if(typeof E=="object")return E.value}}throw new ne},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(t>=s)throw new ne;for(var c=!e.get(t),d=0,f=t;f<s;){if(e.get(f)!==c)r[d]++;else{if(++d===i)break;r[d]=1,c=!c}f++}if(!(d===i||d===i-1&&f===s))throw new ne},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new ne;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,c=0;c<i;c++)a+=e[c],s+=t[c];if(a<s)return Number.POSITIVE_INFINITY;var d=a/s;r*=d;for(var f=0,p=0;p<i;p++){var m=e[p],v=t[p]*d,x=m>v?m-v:v-m;if(x>r)return Number.POSITIVE_INFINITY;f+=x}return f/a},n})(),S6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ax=(function(n){S6(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),c=i,d=!1,f=6,p=i;p<r;p++)if(t.get(p)!==d)s[a]++;else{if(a===f-1){for(var m=e.MAX_AVG_VARIANCE,v=-1,x=e.CODE_START_A;x<=e.CODE_START_C;x++){var w=yn.patternMatchVariance(s,e.CODE_PATTERNS[x],e.MAX_INDIVIDUAL_VARIANCE);w<m&&(m=w,v=x)}if(v>=0&&t.isRange(Math.max(0,c-(p-c)/2),c,!1))return Int32Array.from([c,p,v]);c+=s[0]+s[1],s=s.slice(2,s.length),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,d=!d}throw new ne},e.decodeCode=function(t,r,i){yn.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,c=0;c<e.CODE_PATTERNS.length;c++){var d=e.CODE_PATTERNS[c],f=this.patternMatchVariance(r,d,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,s=c)}if(s>=0)return s;throw new ne},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Mt.ASSUME_GS1)===!0,s=e.findStartPattern(r),c=s[2],d=0,f=new Uint8Array(20);f[d++]=c;var p;switch(c){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new be}for(var m=!1,v=!1,x="",w=s[0],_=s[1],S=Int32Array.from([0,0,0,0,0,0]),E=0,A=0,T=c,R=0,I=!0,M=!1,U=!1;!m;){var H=v;switch(v=!1,E=A,A=e.decodeCode(r,S,_),f[d++]=A,A!==e.CODE_STOP&&(I=!0),A!==e.CODE_STOP&&(R++,T+=R*A),w=_,_+=S.reduce(function(B,W){return B+W},0),A){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new be}switch(p){case e.CODE_CODE_A:if(A<64)U===M?x+=String.fromCharCode(32+A):x+=String.fromCharCode(32+A+128),U=!1;else if(A<96)U===M?x+=String.fromCharCode(A-64):x+=String.fromCharCode(A+64),U=!1;else switch(A!==e.CODE_STOP&&(I=!1),A){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!M&&U?(M=!0,U=!1):M&&U?(M=!1,U=!1):U=!0;break;case e.CODE_SHIFT:v=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:m=!0;break}break;case e.CODE_CODE_B:if(A<96)U===M?x+=String.fromCharCode(32+A):x+=String.fromCharCode(32+A+128),U=!1;else switch(A!==e.CODE_STOP&&(I=!1),A){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!M&&U?(M=!0,U=!1):M&&U?(M=!1,U=!1):U=!0;break;case e.CODE_SHIFT:v=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:m=!0;break}break;case e.CODE_CODE_C:if(A<100)A<10&&(x+="0"),x+=A;else switch(A!==e.CODE_STOP&&(I=!1),A){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:m=!0;break}break}H&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var q=_-w;if(_=r.getNextUnset(_),!r.isRange(_,Math.min(r.getSize(),_+(_-w)/2),!1))throw new ne;if(T-=R*E,T%103!==E)throw new un;var ae=x.length;if(ae===0)throw new ne;ae>0&&I&&(p===e.CODE_CODE_C?x=x.substring(0,ae-2):x=x.substring(0,ae-1));for(var ce=(s[1]+s[0])/2,F=w+q/2,ee=f.length,he=new Uint8Array(ee),_e=0;_e<ee;_e++)he[_e]=f[_e];var V=[new De(ce,t),new De(F,t)];return new Ln(x,he,0,V,Fe.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(yn),E6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ox=(function(n){E6(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,s,c,d,f=this.counters;f.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(r,f),m=r.getNextSet(p[1]),v=r.getSize(),x,w;do{e.recordPattern(r,m,f);var _=e.toNarrowWidePattern(f);if(_<0)throw new ne;x=e.patternToChar(_),this.decodeRowResult+=x,w=m;try{for(var S=(a=void 0,qh(f)),E=S.next();!E.done;E=S.next()){var A=E.value;m+=A}}catch(ee){a={error:ee}}finally{try{E&&!E.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}m=r.getNextSet(m)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var T=0;try{for(var R=qh(f),I=R.next();!I.done;I=R.next()){var A=I.value;T+=A}}catch(ee){c={error:ee}}finally{try{I&&!I.done&&(d=R.return)&&d.call(R)}finally{if(c)throw c.error}}var M=m-w-T;if(m!==v&&M*2<T)throw new ne;if(this.usingCheckDigit){for(var U=this.decodeRowResult.length-1,H=0,q=0;q<U;q++)H+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(q));if(this.decodeRowResult.charAt(U)!==e.ALPHABET_STRING.charAt(H%43))throw new un;this.decodeRowResult=this.decodeRowResult.substring(0,U)}if(this.decodeRowResult.length===0)throw new ne;var ae;this.extendedMode?ae=e.decodeExtended(this.decodeRowResult):ae=this.decodeRowResult;var ce=(p[1]+p[0])/2,F=w+T/2;return new Ln(ae,null,0,[new De(ce,t),new De(F,t)],Fe.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),s=0,c=a,d=!1,f=r.length,p=a;p<i;p++)if(t.get(p)!==d)r[s]++;else{if(s===f-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((p-c)/2)),c,!1))return[c,p];c+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,d=!d}throw new ne},e.toNarrowWidePattern=function(t){var r,i,a=t.length,s=0,c;do{var d=2147483647;try{for(var f=(r=void 0,qh(t)),p=f.next();!p.done;p=f.next()){var m=p.value;m<d&&m>s&&(d=m)}}catch(_){r={error:_}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}s=d,c=0;for(var v=0,x=0,w=0;w<a;w++){var m=t[w];m>s&&(x|=1<<a-1-w,c++,v+=m)}if(c===3){for(var w=0;w<a&&c>0;w++){var m=t[w];if(m>s&&(c--,m*2>=v))return-1}return x}}while(c>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ne},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var c=t.charAt(a+1),d="\0";switch(s){case"+":if(c>="A"&&c<="Z")d=String.fromCharCode(c.charCodeAt(0)+32);else throw new be;break;case"$":if(c>="A"&&c<="Z")d=String.fromCharCode(c.charCodeAt(0)-64);else throw new be;break;case"%":if(c>="A"&&c<="E")d=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")d=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")d=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")d=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")d="\0";else if(c==="V")d="@";else if(c==="W")d="`";else if(c==="X"||c==="Y"||c==="Z")d="";else throw new be;break;case"/":if(c>="A"&&c<="O")d=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")d=":";else throw new be;break}i+=d,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(yn),C6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Wh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sx=(function(n){C6(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,s,c,d,f=this.findAsteriskPattern(r),p=r.getNextSet(f[1]),m=r.getSize(),v=this.counters;v.fill(0),this.decodeRowResult="";var x,w;do{e.recordPattern(r,p,v);var _=this.toPattern(v);if(_<0)throw new ne;x=this.patternToChar(_),this.decodeRowResult+=x,w=p;try{for(var S=(a=void 0,Wh(v)),E=S.next();!E.done;E=S.next()){var A=E.value;p+=A}}catch(q){a={error:q}}finally{try{E&&!E.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var T=0;try{for(var R=Wh(v),I=R.next();!I.done;I=R.next()){var A=I.value;T+=A}}catch(q){c={error:q}}finally{try{I&&!I.done&&(d=R.return)&&d.call(R)}finally{if(c)throw c.error}}if(p===m||!r.get(p))throw new ne;if(this.decodeRowResult.length<2)throw new ne;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var M=this.decodeExtended(this.decodeRowResult),U=(f[1]+f[0])/2,H=w+T/2;return new Ln(M,null,0,[new De(U,t),new De(H,t)],Fe.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,c=!1,d=a.length,f=0,p=i;p<r;p++)if(t.get(p)!==c)a[f]++;else{if(f===d-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,p]);s+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,c=!c}throw new ne},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var s=Wh(t),c=s.next();!c.done;c=s.next()){var d=c.value;a+=d}}catch(w){r={error:w}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var f=0,p=t.length,m=0;m<p;m++){var v=Math.round(t[m]*9/a);if(v<1||v>4)return-1;if((m&1)===0)for(var x=0;x<v;x++)f=f<<1|1;else f<<=v}return f},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new ne},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new be;var c=t.charAt(a+1),d="\0";switch(s){case"d":if(c>="A"&&c<="Z")d=String.fromCharCode(c.charCodeAt(0)+32);else throw new be;break;case"a":if(c>="A"&&c<="Z")d=String.fromCharCode(c.charCodeAt(0)-64);else throw new be;break;case"b":if(c>="A"&&c<="E")d=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")d=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")d=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")d=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")d="\0";else if(c==="V")d="@";else if(c==="W")d="`";else if(c>="X"&&c<="Z")d="";else throw new be;break;case"c":if(c>="A"&&c<="O")d=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")d=":";else throw new be;break}i+=d,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,s=0,c=r-1;c>=0;c--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(c)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new un},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(yn),A6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),T6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lx=(function(n){A6(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,s,c=this.decodeStart(r),d=this.decodeEnd(r),f=new nt;e.decodeMiddle(r,c[1],d[0],f);var p=f.toString(),m=null;i!=null&&(m=i.get(Mt.ALLOWED_LENGTHS)),m==null&&(m=e.DEFAULT_ALLOWED_LENGTHS);var v=p.length,x=!1,w=0;try{for(var _=T6(m),S=_.next();!S.done;S=_.next()){var E=S.value;if(v===E){x=!0;break}E>w&&(w=E)}}catch(R){a={error:R}}finally{try{S&&!S.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}if(!x&&v>w&&(x=!0),!x)throw new be;var A=[new De(c[1],t),new De(d[0],t)],T=new Ln(p,null,0,A,Fe.ITF,new Date().getTime());return T},e.decodeMiddle=function(t,r,i,a){var s=new Int32Array(10),c=new Int32Array(5),d=new Int32Array(5);for(s.fill(0),c.fill(0),d.fill(0);r<i;){yn.recordPattern(t,r,s);for(var f=0;f<5;f++){var p=2*f;c[f]=s[p],d[f]=s[p+1]}var m=e.decodeDigit(c);a.append(m.toString()),m=this.decodeDigit(d),a.append(m.toString()),s.forEach(function(v){r+=v})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new ne},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ne;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof ne&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,s=new Int32Array(a),c=t.getSize(),d=!1,f=0,p=r;s.fill(0);for(var m=r;m<c;m++)if(t.get(m)!==d)s[f]++;else{if(f===a-1){if(yn.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,m];p+=s[0]+s[1],jt.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,d=!d}throw new ne},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var c=e.PATTERNS[s],d=yn.patternMatchVariance(t,c,e.MAX_INDIVIDUAL_VARIANCE);d<r?(r=d,i=s):d===r&&(i=-1)}if(i>=0)return i%10;throw new ne},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(yn),O6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ns=(function(n){O6(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var c=i[0];a=i[1];var d=c-(a-c);d>=0&&(r=t.isRange(d,c,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new be;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new be;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,s){var c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var d=0,f=r,p=a.length,m=i,v=r;v<c;v++)if(t.get(v)!==m)s[d]++;else{if(d===p-1){if(yn.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,v]);f+=s[0]+s[1];for(var x=s.slice(2,s.length),w=0;w<d-1;w++)s[w]=x[w];s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,m=!m}throw new ne},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,c=-1,d=a.length,f=0;f<d;f++){var p=a[f],m=yn.patternMatchVariance(r,p,e.MAX_INDIVIDUAL_VARIANCE);m<s&&(s=m,c=f)}if(c>=0)return c;throw new ne},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(yn),R6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N6=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),c=n.parseExtensionString(s),d=[new De((r[0]+r[1])/2,e),new De(a,e)],f=new Ln(s,null,0,d,Fe.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&f.putAllMetadata(c),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=e.getSize(),d=t[1],f=0,p=0;p<5&&d<c;p++){var m=ns.decodeDigit(e,s,d,ns.L_AND_G_PATTERNS);r+=String.fromCharCode(48+m%10);try{for(var v=(i=void 0,R6(s)),x=v.next();!x.done;x=v.next()){var w=x.value;d+=w}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}m>=10&&(f|=1<<4-p),p!==4&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(r.length!==5)throw new ne;var _=this.determineCheckDigit(f);if(n.extensionChecksum(r.toString())!==_)throw new ne;return d},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ne},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Dn.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},n})(),I6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D6=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),c=n.parseExtensionString(s),d=[new De((r[0]+r[1])/2,e),new De(a,e)],f=new Ln(s,null,0,d,Fe.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&f.putAllMetadata(c),f},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=e.getSize(),d=t[1],f=0,p=0;p<2&&d<c;p++){var m=ns.decodeDigit(e,s,d,ns.L_AND_G_PATTERNS);r+=String.fromCharCode(48+m%10);try{for(var v=(i=void 0,I6(s)),x=v.next();!x.done;x=v.next()){var w=x.value;d+=w}}catch(_){i={error:_}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}m>=10&&(f|=1<<1-p),p!==1&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(r.length!==2)throw new ne;if(parseInt(r.toString())%4!==f)throw new ne;return d},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Dn.ISSUE_NUMBER,parseInt(e)]])},n})(),k6=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=ns.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new N6;return a.decodeRow(e,t,i)}catch{var s=new D6;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),j6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gn=(function(n){j6(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(c){return Int32Array.from(c)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(Mt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var c=new De((a[0]+a[1])/2,t);s.foundPossibleResultPoint(c)}var d=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=d.rowOffset,p=d.resultString;if(s!=null){var m=new De(f,t);s.foundPossibleResultPoint(m)}var v=e.decodeEnd(r,f);if(s!=null){var x=new De((v[0]+v[1])/2,t);s.foundPossibleResultPoint(x)}var w=v[1],_=w+(w-v[0]);if(_>=r.getSize()||!r.isRange(w,_,!1))throw new ne;var S=p.toString();if(S.length<8)throw new be;if(!e.checkChecksum(S))throw new un;var E=(a[1]+a[0])/2,A=(v[1]+v[0])/2,T=this.getBarcodeFormat(),R=[new De(E,t),new De(A,t)],I=new Ln(S,null,0,R,T,new Date().getTime()),M=0;try{var U=k6.decodeRow(t,r,v[1]);I.putMetadata(Dn.UPC_EAN_EXTENSION,U.getText()),I.putAllMetadata(U.getResultMetadata()),I.addResultPoints(U.getResultPoints()),M=U.getText().length}catch{}var H=i==null?null:i.get(Mt.ALLOWED_EAN_EXTENSIONS);if(H!=null){var q=!1;for(var ae in H)if(M.toString()===ae){q=!0;break}if(!q)throw new ne}return T===Fe.EAN_13||Fe.UPC_A,I},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new be;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new be;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(ns),M6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),cx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F0=(function(n){M6(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,c,d,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var p=t.getSize(),m=r[1],v=0,x=0;x<6&&m<p;x++){var w=gn.decodeDigit(t,f,m,gn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+w%10);try{for(var _=(a=void 0,cx(f)),S=_.next();!S.done;S=_.next()){var E=S.value;m+=E}}catch(I){a={error:I}}finally{try{S&&!S.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}w>=10&&(v|=1<<5-x)}i=e.determineFirstDigit(i,v);var A=gn.findGuardPattern(t,m,!0,gn.MIDDLE_PATTERN,new Int32Array(gn.MIDDLE_PATTERN.length).fill(0));m=A[1];for(var x=0;x<6&&m<p;x++){var w=gn.decodeDigit(t,f,m,gn.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var T=(c=void 0,cx(f)),R=T.next();!R.done;R=T.next()){var E=R.value;m+=E}}catch(U){c={error:U}}finally{try{R&&!R.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}}return{rowOffset:m,resultString:i}},e.prototype.getBarcodeFormat=function(){return Fe.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ne},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(gn),P6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ux=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dx=(function(n){P6(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,c,d,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var p=t.getSize(),m=r[1],v=0;v<4&&m<p;v++){var x=gn.decodeDigit(t,f,m,gn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var w=(a=void 0,ux(f)),_=w.next();!_.done;_=w.next()){var S=_.value;m+=S}}catch(R){a={error:R}}finally{try{_&&!_.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}}var E=gn.findGuardPattern(t,m,!0,gn.MIDDLE_PATTERN,new Int32Array(gn.MIDDLE_PATTERN.length).fill(0));m=E[1];for(var v=0;v<4&&m<p;v++){var x=gn.decodeDigit(t,f,m,gn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var A=(c=void 0,ux(f)),T=A.next();!T.done;T=A.next()){var S=T.value;m+=S}}catch(M){c={error:M}}finally{try{T&&!T.done&&(d=A.return)&&d.call(A)}finally{if(c)throw c.error}}}return{rowOffset:m,resultString:i}},e.prototype.getBarcodeFormat=function(){return Fe.EAN_8},e})(gn),B6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fx=(function(n){B6(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new F0,t}return e.prototype.getBarcodeFormat=function(){return Fe.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Ln(r.substring(1),null,null,t.getResultPoints(),Fe.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ne},e.prototype.reset=function(){this.ean13Reader.reset()},e})(gn),L6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),F6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hx=(function(n){L6(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,c=this.decodeMiddleCounters.map(function(S){return S});c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var d=t.getSize(),f=r[1],p=0,m=0;m<6&&f<d;m++){var v=e.decodeDigit(t,c,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var x=(a=void 0,F6(c)),w=x.next();!w.done;w=x.next()){var _=w.value;f+=_}}catch(S){a={error:S}}finally{try{w&&!w.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}v>=10&&(p|=1<<5-m)}return e.determineNumSysAndCheckDigit(new nt(i),p),f},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return gn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw ne.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Fe.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new nt;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(gn),U6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),px=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xh=(function(n){U6(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Mt.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Fe.EAN_13)>-1&&a.push(new F0),i.indexOf(Fe.UPC_A)>-1&&a.push(new fx),i.indexOf(Fe.EAN_8)>-1&&a.push(new dx),i.indexOf(Fe.UPC_E)>-1&&a.push(new hx)),a.length===0&&(a.push(new F0),a.push(new fx),a.push(new dx),a.push(new hx)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,s;try{for(var c=px(this.readers),d=c.next();!d.done;d=c.next()){var f=d.value;try{var p=f.decodeRow(t,r,i),m=p.getBarcodeFormat()===Fe.EAN_13&&p.getText().charAt(0)==="0",v=i==null?null:i.get(Mt.POSSIBLE_FORMATS),x=v==null||v.includes(Fe.UPC_A);if(m&&x){var w=p.getRawBytes(),_=new Ln(p.getText().substring(1),w,w?w.length:null,p.getResultPoints(),Fe.UPC_A);return _.putAllMetadata(p.getResultMetadata()),_}return p}catch{}}}catch(S){a={error:S}}finally{try{d&&!d.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}throw new ne},e.prototype.reset=function(){var t,r;try{for(var i=px(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(yn),z6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),V6=(function(n){z6(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new ne;var s=this.codaBarDecodeRow(a.row);if(!s)throw new ne;return new Ln(s,null,0,[new De(a.left,t),new De(a.right,t)],Fe.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],c=r[0],d=1,f=1;f<r.length;f++)r[f]===c?d++:(c=r[f],s.push(d),d=1);return s.push(d),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(d,f){return(d+f)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(d){return d<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var c=r.join("");return this.validCodaBarString(c)?c:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(yn),H6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pa=(function(n){H6(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(yn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ne},e.count=function(t){return vt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]>a&&(a=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]<a&&(a=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],s=a+t[2]+t[3],c=a/s;if(c>=e.MIN_FINDER_PATTERN_RATIO&&c<=e.MAX_FINDER_PATTERN_RATIO){var d=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var p=$6(t),m=p.next();!m.done;m=p.next()){var v=m.value;v>f&&(f=v),v<d&&(d=v)}}catch(x){r={error:x}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return f<10*d}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(yn),qu=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),ww=(function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new De(r,a)),this.resultPoints.push(new De(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),G6=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ho=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,s=0;try{for(var c=G6(e),d=c.next();!d.done;d=c.next()){var f=d.value;s+=f}}catch(A){i={error:A}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}for(var p=0,m=0,v=e.length,x=0;x<v-1;x++){var w=void 0;for(w=1,m|=1<<x;w<e[x];w++,m&=~(1<<x)){var _=n.combins(s-w-1,v-x-2);if(r&&m===0&&s-w-(v-x-1)>=v-x-1&&(_-=n.combins(s-w-(v-x),v-x-2)),v-x-1>1){for(var S=0,E=s-w-(v-x-2);E>t;E--)S+=n.combins(s-w-E-1,v-x-3);_-=S*(v-1-x)}else s-w>t&&_--;p+=_}s-=w}return p},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,s=1,c=e;c>r;c--)a*=c,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n})(),q6=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Sn(r),a=0,s=e[0],c=s.getRightChar().getValue(),d=11;d>=0;--d)(c&1<<d)!==0&&i.set(a),a++;for(var d=1;d<e.length;++d){for(var f=e[d],p=f.getLeftChar().getValue(),m=11;m>=0;--m)(p&1<<m)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var v=f.getRightChar().getValue(),m=11;m>=0;--m)(v&1<<m)!==0&&i.set(a),a++}return i},n})(),Da=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),N1=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),W6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Mr=(function(n){W6(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(N1),X6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ka=(function(n){X6(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(N1),Y6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Uo=(function(n){Y6(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new be;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(N1),xu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K6=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,s,c,d,f;if(!e)return null;if(e.length<2)throw new ne;var p=e.substring(0,2);try{for(var m=xu(n.TWO_DIGIT_DATA_LENGTH),v=m.next();!v.done;v=m.next()){var x=v.value;if(x[0]===p)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,x[2],e):n.processFixedAI(2,x[1],e)}}catch(M){t={error:M}}finally{try{v&&!v.done&&(r=m.return)&&r.call(m)}finally{if(t)throw t.error}}if(e.length<3)throw new ne;var w=e.substring(0,3);try{for(var _=xu(n.THREE_DIGIT_DATA_LENGTH),S=_.next();!S.done;S=_.next()){var x=S.value;if(x[0]===w)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,x[2],e):n.processFixedAI(3,x[1],e)}}catch(M){i={error:M}}finally{try{S&&!S.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}try{for(var E=xu(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),A=E.next();!A.done;A=E.next()){var x=A.value;if(x[0]===w)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],e):n.processFixedAI(4,x[1],e)}}catch(M){s={error:M}}finally{try{A&&!A.done&&(c=E.return)&&c.call(E)}finally{if(s)throw s.error}}if(e.length<4)throw new ne;var T=e.substring(0,4);try{for(var R=xu(n.FOUR_DIGIT_DATA_LENGTH),I=R.next();!I.done;I=R.next()){var x=I.value;if(x[0]===T)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],e):n.processFixedAI(4,x[1],e)}}catch(M){d={error:M}}finally{try{I&&!I.done&&(f=R.return)&&f.call(R)}finally{if(d)throw d.error}}throw new ne},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ne;var i=r.substring(0,e);if(r.length<e+t)throw new ne;var a=r.substring(e,e+t),s=r.substring(e+t),c="("+i+")"+a,d=n.parseFieldsInGeneralPurpose(s);return d==null?c:c+d},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var s=r.substring(e,a),c=r.substring(a),d="("+i+")"+s,f=n.parseFieldsInGeneralPurpose(c);return f==null?d:d+f},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),Iu=(function(){function n(e){this.buffer=new nt,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=K6.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Uo(this.information.getSize(),Uo.FNC1,Uo.FNC1):new Uo(this.information.getSize(),t-1,Uo.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Uo(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new ka(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new ka(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new ka(this.current.getPosition(),this.buffer.toString()):t=new ka(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Da(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new ka(this.current.getPosition(),this.buffer.toString());return new Da(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Da(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ka(this.current.getPosition(),this.buffer.toString());return new Da(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Da(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ka(this.current.getPosition(),this.buffer.toString());return new Da(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Da(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Mr(e+5,Mr.FNC1);if(t>=5&&t<15)return new Mr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Mr(e+7,""+(r+1));if(r>=90&&r<116)return new Mr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new be}return new Mr(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Mr(e+5,Mr.FNC1);if(t>=5&&t<15)return new Mr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Mr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new zl("Decoding invalid alphanumeric value: "+r)}return new Mr(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),_w=(function(){function n(e){this.information=e,this.generalDecoder=new Iu(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),Z6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ur=(function(n){Z6(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(_w),Q6=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),J6=(function(n){Q6(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new nt;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(Ur),eT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),tT=(function(n){eT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new nt;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(_w),nT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Du=(function(n){nT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),c=1e5,d=0;d<5;++d)s/c===0&&t.append("0"),c/=10;t.append(s)},e})(Ur),rT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Sw=(function(n){rT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Du.GTIN_SIZE+e.WEIGHT_SIZE)throw new ne;var t=new nt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Du.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Du),iT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),aT=(function(n){iT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(Sw),oT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),sT=(function(n){oT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(Sw),lT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),cT=(function(n){lT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ur.GTIN_SIZE)throw new ne;var t=new nt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ur.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ur.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(Ur),uT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dT=(function(n){uT(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ur.GTIN_SIZE)throw new ne;var t=new nt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ur.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ur.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ur.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(Ur),fT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ji=(function(n){fT(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ne;var t=new nt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var c=i;c/10===0&&t.append("0"),t.append(c),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Du);function hT(n){try{if(n.get(1))return new J6(n);if(!n.get(2))return new tT(n);var e=Iu.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new aT(n);case 5:return new sT(n)}var t=Iu.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new cT(n);case 13:return new dT(n)}var r=Iu.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Ji(n,"310","11");case 57:return new Ji(n,"320","11");case 58:return new Ji(n,"310","13");case 59:return new Ji(n,"320","13");case 60:return new Ji(n,"310","15");case 61:return new Ji(n,"320","15");case 62:return new Ji(n,"310","17");case 63:return new Ji(n,"320","17")}}catch(i){throw console.log(i),new zl("unknown decoder: "+n)}}var gx=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),pT=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),gT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ea=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mT=(function(n){gT(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof ne){if(!this.pairs.length)throw new ne;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new ne},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,s=r;s<this.rows.length;s++){var c=this.rows[s];this.pairs.length=0;try{for(var d=(i=void 0,ea(t)),f=d.next();!f.done;f=d.next()){var p=f.value;this.pairs.push(p.getPairs())}}catch(v){i={error:v}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}if(this.pairs.push(c.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var m=new Array(t);m.push(c);try{return this.checkRows(m,s+1)}catch(v){console.log(v)}}}throw new ne},e.isValidSequence=function(t){var r,i;try{for(var a=ea(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var c=s.value;if(!(t.length>c.length)){for(var d=!0,f=0;f<t.length;f++)if(t[f].getFinderPattern().getValue()!==c[f]){d=!1;break}if(d)return!0}}}catch(p){r={error:p}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var c=this.rows[i];if(c.getRowNumber()>t){s=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new pT(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,s,c,d,f;try{for(var p=ea(r),m=p.next();!m.done;m=p.next()){var v=m.value;if(v.getPairs().length!==t.length){var x=!0;try{for(var w=(s=void 0,ea(v.getPairs())),_=w.next();!_.done;_=w.next()){var S=_.value,E=!1;try{for(var A=(d=void 0,ea(t)),T=A.next();!T.done;T=A.next()){var R=T.value;if(gx.equals(S,R)){E=!0;break}}}catch(I){d={error:I}}finally{try{T&&!T.done&&(f=A.return)&&f.call(A)}finally{if(d)throw d.error}}E||(x=!1)}}catch(I){s={error:I}}finally{try{_&&!_.done&&(c=w.return)&&c.call(w)}finally{if(s)throw s.error}}}}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,s,c,d,f;try{for(var p=ea(r),m=p.next();!m.done;m=p.next()){var v=m.value,x=!0;try{for(var w=(s=void 0,ea(t)),_=w.next();!_.done;_=w.next()){var S=_.value,E=!1;try{for(var A=(d=void 0,ea(v.getPairs())),T=A.next();!T.done;T=A.next()){var R=T.value;if(S.equals(R)){E=!0;break}}}catch(I){d={error:I}}finally{try{T&&!T.done&&(f=A.return)&&f.call(A)}finally{if(d)throw d.error}}if(!E){x=!1;break}}}catch(I){s={error:I}}finally{try{_&&!_.done&&(c=w.return)&&c.call(w)}finally{if(s)throw s.error}}if(x)return!0}}catch(I){i={error:I}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=q6.buildBitArray(t),i=hT(r),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),d=[s[0],s[1],c[0],c[1]];return new Ln(a,null,null,d,Fe.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,c=1;c<this.pairs.size();++c){var d=this.pairs.get(c);a+=d.getLeftChar().getChecksumPortion(),s++;var f=d.getRightChar();f!=null&&(a+=f.getChecksumPortion(),s++)}a%=211;var p=211*(s-4)+a;return p===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,c=!0,d=-1;do this.findNextPair(t,r,d),s=this.parseFoundFinderPattern(t,i,a),s===null?d=e.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);var f=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ne;var p;try{p=this.decodeDataCharacter(t,s,a,!1)}catch(m){p=null,console.log(m)}return new gx(f,p,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),c;if(i>=0)c=i;else if(this.isEmptyPair(r))c=0;else{var d=r[r.length-1];c=d.getFinderPattern().getStartEnd()[1]}var f=r.length%2!==0;this.startFromEven&&(f=!f);for(var p=!1;c<s&&(p=!t.get(c),!!p);)c++;for(var m=0,v=c,x=c;x<s;x++)if(t.get(x)!==p)a[m]++;else{if(m===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=v,this.startEnd[1]=x;return}f&&e.reverseCounters(a),v+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,p=!p}throw new ne},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,s,c;if(i){for(var d=this.startEnd[0]-1;d>=0&&!t.get(d);)d--;d++,a=this.startEnd[0]-d,s=d,c=this.startEnd[1]}else s=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];var f=this.getDecodeFinderCounters();jt.arraycopy(f,0,f,1,f.length-1),f[0]=a;var p;try{p=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new ww(p,[s,c],s,c,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var s=this.getDataCharacterCounters(),c=0;c<s.length;c++)s[c]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var d=0,f=s.length-1;d<f;d++,f--){var p=s[d];s[d]=s[f],s[f]=p}}var m=17,v=vt.sum(new Int32Array(s))/m,x=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(v-x)/x>.3)throw new ne;for(var w=this.getOddCounts(),_=this.getEvenCounts(),S=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors(),d=0;d<s.length;d++){var A=1*s[d]/v,T=A+.5;if(T<1){if(A<.3)throw new ne;T=1}else if(T>8){if(A>8.7)throw new ne;T=8}var R=d/2;(d&1)===0?(w[R]=T,S[R]=A-T):(_[R]=T,E[R]=A-T)}this.adjustOddEvenCounts(m);for(var I=4*r.getValue()+(i?0:2)+(a?0:1)-1,M=0,U=0,d=w.length-1;d>=0;d--){if(e.isNotA1left(r,i,a)){var H=e.WEIGHTS[I][2*d];U+=w[d]*H}M+=w[d]}for(var q=0,d=_.length-1;d>=0;d--)if(e.isNotA1left(r,i,a)){var H=e.WEIGHTS[I][2*d+1];q+=_[d]*H}var ae=U+q;if((M&1)!==0||M>13||M<4)throw new ne;var ce=(13-M)/2,F=e.SYMBOL_WIDEST[ce],ee=9-F,he=Ho.getRSSvalue(w,F,!0),_e=Ho.getRSSvalue(_,ee,!1),V=e.EVEN_TOTAL_SUBSET[ce],B=e.GSUM[ce],W=he*V+_e+B;return new qu(W,ae)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=vt.sum(new Int32Array(this.getOddCounts())),i=vt.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var c=!1,d=!1;i>13?d=!0:i<4&&(c=!0);var f=r+i-t,p=(r&1)===1,m=(i&1)===0;if(f===1)if(p){if(m)throw new ne;s=!0}else{if(!m)throw new ne;d=!0}else if(f===-1)if(p){if(m)throw new ne;a=!0}else{if(!m)throw new ne;c=!0}else if(f===0){if(p){if(!m)throw new ne;r<i?(a=!0,d=!0):(s=!0,c=!0)}else if(m)throw new ne}else throw new ne;if(a){if(s)throw new ne;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(d)throw new ne;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(Pa),vT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yT=(function(n){vT(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(qu),xT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Yh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mx=(function(n){xT(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,s,c,d,f=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,f),r.reverse();var p=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var m=Yh(this.possibleLeftPairs),v=m.next();!v.done;v=m.next()){var x=v.value;if(x.getCount()>1)try{for(var w=(c=void 0,Yh(this.possibleRightPairs)),_=w.next();!_.done;_=w.next()){var S=_.value;if(S.getCount()>1&&e.checkChecksum(x,S))return e.constructResult(x,S)}}catch(E){c={error:E}}finally{try{_&&!_.done&&(d=w.return)&&d.call(w)}finally{if(c)throw c.error}}}}catch(E){a={error:E}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}throw new ne},e.addOrTally=function(t,r){var i,a;if(r!=null){var s=!1;try{for(var c=Yh(t),d=c.next();!d.done;d=c.next()){var f=d.value;if(f.getValue()===r.getValue()){f.incrementCount(),s=!0;break}}}catch(p){i={error:p}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),s=new nt,c=13-a.length;c>0;c--)s.append("0");s.append(a);for(var d=0,c=0;c<13;c++){var f=s.charAt(c).charCodeAt(0)-48;d+=(c&1)===0?3*f:f}d=10-d%10,d===10&&(d=0),s.append(d.toString());var p=t.getFinderPattern().getResultPoints(),m=r.getFinderPattern().getResultPoints();return new Ln(s.toString(),null,0,[p[0],p[1],m[0],m[1]],Fe.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var s=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,s),d=a==null?null:a.get(Mt.NEED_RESULT_POINT_CALLBACK);if(d!=null){var f=(s[0]+s[1])/2;r&&(f=t.getSize()-1-f),d.foundPossibleResultPoint(new De(f,i))}var p=this.decodeDataCharacter(t,c,!0),m=this.decodeDataCharacter(t,c,!1);return new yT(1597*p.getValue()+m.getValue(),p.getChecksumPortion()+4*m.getChecksumPortion(),c)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)yn.recordPatternInReverse(t,r.getStartEnd()[0],a);else{yn.recordPattern(t,r.getStartEnd()[1]+1,a);for(var c=0,d=a.length-1;c<d;c++,d--){var f=a[c];a[c]=a[d],a[d]=f}}for(var p=i?16:15,m=vt.sum(new Int32Array(a))/p,v=this.getOddCounts(),x=this.getEvenCounts(),w=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),c=0;c<a.length;c++){var S=a[c]/m,E=Math.floor(S+.5);E<1?E=1:E>8&&(E=8);var A=Math.floor(c/2);(c&1)===0?(v[A]=E,w[A]=S-E):(x[A]=E,_[A]=S-E)}this.adjustOddEvenCounts(i,p);for(var T=0,R=0,c=v.length-1;c>=0;c--)R*=9,R+=v[c],T+=v[c];for(var I=0,M=0,c=x.length-1;c>=0;c--)I*=9,I+=x[c],M+=x[c];var U=R+3*I;if(i){if((T&1)!==0||T>12||T<4)throw new ne;var H=(12-T)/2,q=e.OUTSIDE_ODD_WIDEST[H],ae=9-q,ce=Ho.getRSSvalue(v,q,!1),F=Ho.getRSSvalue(x,ae,!0),ee=e.OUTSIDE_EVEN_TOTAL_SUBSET[H],he=e.OUTSIDE_GSUM[H];return new qu(ce*ee+F+he,U)}else{if((M&1)!==0||M>10||M<4)throw new ne;var H=(10-M)/2,q=e.INSIDE_ODD_WIDEST[H],ae=9-q,ce=Ho.getRSSvalue(v,q,!0),F=Ho.getRSSvalue(x,ae,!1),_e=e.INSIDE_ODD_TOTAL_SUBSET[H],he=e.INSIDE_GSUM[H];return new qu(F*_e+ce+he,U)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,c=0;c<a&&(s=!t.get(c),r!==s);)c++;for(var d=0,f=c,p=c;p<a;p++)if(t.get(p)!==s)i[d]++;else{if(d===3){if(Pa.isFinderPattern(i))return[f,p];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,d--}else d++;i[d]=1,s=!s}throw new ne},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var s=t.get(a[0]),c=a[0]-1;c>=0&&s!==t.get(c);)c--;c++;var d=a[0]-c,f=this.getDecodeFinderCounters(),p=new Int32Array(f.length);jt.arraycopy(f,0,p,1,f.length-1),p[0]=d;var m=this.parseFinderValue(p,e.FINDER_PATTERNS),v=c,x=a[1];return i&&(v=t.getSize()-1-v,x=t.getSize()-1-x),new ww(m,[c,a[1]],v,x,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=vt.sum(new Int32Array(this.getOddCounts())),a=vt.sum(new Int32Array(this.getEvenCounts())),s=!1,c=!1,d=!1,f=!1;t?(i>12?c=!0:i<4&&(s=!0),a>12?f=!0:a<4&&(d=!0)):(i>11?c=!0:i<5&&(s=!0),a>10?f=!0:a<4&&(d=!0));var p=i+a-r,m=(i&1)===(t?1:0),v=(a&1)===1;if(p===1)if(m){if(v)throw new ne;c=!0}else{if(!v)throw new ne;f=!0}else if(p===-1)if(m){if(v)throw new ne;s=!0}else{if(!v)throw new ne;d=!0}else if(p===0){if(m){if(!v)throw new ne;i<a?(s=!0,f=!0):(c=!0,d=!0)}else if(v)throw new ne}else throw new ne;if(s){if(c)throw new ne;Pa.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Pa.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(f)throw new ne;Pa.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Pa.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(Pa),bT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$o=(function(n){bT(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Mt.POSSIBLE_FORMATS):null,a=t&&t.get(Mt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(Mt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Fe.EAN_13)||i.includes(Fe.UPC_A)||i.includes(Fe.EAN_8)||i.includes(Fe.UPC_E))&&r.readers.push(new Xh(t)),i.includes(Fe.CODE_39)&&r.readers.push(new ox(a,s)),i.includes(Fe.CODE_93)&&r.readers.push(new sx),i.includes(Fe.CODE_128)&&r.readers.push(new ax),i.includes(Fe.ITF)&&r.readers.push(new lx),i.includes(Fe.CODABAR)&&r.readers.push(new V6),i.includes(Fe.RSS_14)&&r.readers.push(new mx),i.includes(Fe.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new mT))),r.readers.length===0&&(r.readers.push(new Xh(t)),r.readers.push(new ox),r.readers.push(new sx),r.readers.push(new Xh(t)),r.readers.push(new ax),r.readers.push(new lx),r.readers.push(new mx)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new ne},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(yn),wT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){wT(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new $o(r),t,r)||this}return e})(us);var vx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_t=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),xt=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),_T=(function(){function n(e,t,r,i,a,s){var c,d;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var f=0,p=s.getECCodewords(),m=s.getECBlocks();try{for(var v=vx(m),x=v.next();!x.done;x=v.next()){var w=x.value;f+=w.getCount()*(w.getDataCodewords()+p)}}catch(_){c={error:_}}finally{try{x&&!x.done&&(d=v.return)&&d.call(v)}finally{if(c)throw c.error}}this.totalCodewords=f}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new be;try{for(var a=vx(n.VERSIONS),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.symbolSizeRows===e&&c.symbolSizeColumns===t)return c}}catch(d){r={error:d}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new be},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new _t(5,new xt(1,3))),new n(2,12,12,10,10,new _t(7,new xt(1,5))),new n(3,14,14,12,12,new _t(10,new xt(1,8))),new n(4,16,16,14,14,new _t(12,new xt(1,12))),new n(5,18,18,16,16,new _t(14,new xt(1,18))),new n(6,20,20,18,18,new _t(18,new xt(1,22))),new n(7,22,22,20,20,new _t(20,new xt(1,30))),new n(8,24,24,22,22,new _t(24,new xt(1,36))),new n(9,26,26,24,24,new _t(28,new xt(1,44))),new n(10,32,32,14,14,new _t(36,new xt(1,62))),new n(11,36,36,16,16,new _t(42,new xt(1,86))),new n(12,40,40,18,18,new _t(48,new xt(1,114))),new n(13,44,44,20,20,new _t(56,new xt(1,144))),new n(14,48,48,22,22,new _t(68,new xt(1,174))),new n(15,52,52,24,24,new _t(42,new xt(2,102))),new n(16,64,64,14,14,new _t(56,new xt(2,140))),new n(17,72,72,16,16,new _t(36,new xt(4,92))),new n(18,80,80,18,18,new _t(48,new xt(4,114))),new n(19,88,88,20,20,new _t(56,new xt(4,144))),new n(20,96,96,22,22,new _t(68,new xt(4,174))),new n(21,104,104,24,24,new _t(56,new xt(6,136))),new n(22,120,120,18,18,new _t(68,new xt(6,175))),new n(23,132,132,20,20,new _t(62,new xt(8,163))),new n(24,144,144,22,22,new _t(62,new xt(8,156),new xt(2,155))),new n(25,8,18,6,16,new _t(7,new xt(1,5))),new n(26,8,32,6,14,new _t(11,new xt(1,10))),new n(27,12,26,10,24,new _t(14,new xt(1,16))),new n(28,12,36,10,16,new _t(18,new xt(1,22))),new n(29,16,36,14,16,new _t(24,new xt(1,32))),new n(30,16,48,14,22,new _t(28,new xt(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),ST=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new be;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Jr(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return _T.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),c=!1,d=!1,f=!1,p=!1;do if(r===a&&i===0&&!c)e[t++]=this.readCorner1(a,s)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!d)e[t++]=this.readCorner2(a,s)&255,r-=2,i+=2,d=!0;else if(r===a+4&&i===2&&(s&7)===0&&!f)e[t++]=this.readCorner3(a,s)&255,r-=2,i+=2,f=!0;else if(r===a-2&&i===0&&(s&7)===4&&!p)e[t++]=this.readCorner4(a,s)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(t!==this.version.getTotalCodewords())throw new be;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Ue("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,c=r/a|0,d=s*i,f=c*a,p=new Jr(f,d),m=0;m<s;++m)for(var v=m*i,x=0;x<c;++x)for(var w=x*a,_=0;_<i;++_)for(var S=m*(i+2)+1+_,E=v+_,A=0;A<a;++A){var T=x*(a+2)+1+A;if(e.get(T,S)){var R=w+A;p.set(R,E)}}return p},n})(),yx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ET=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,s,c=t.getECBlocks(),d=0,f=c.getECBlocks();try{for(var p=yx(f),m=p.next();!m.done;m=p.next()){var v=m.value;d+=v.getCount()}}catch(he){r={error:he}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var x=new Array(d),w=0;try{for(var _=yx(f),S=_.next();!S.done;S=_.next())for(var v=S.value,E=0;E<v.getCount();E++){var A=v.getDataCodewords(),T=c.getECCodewords()+A;x[w++]=new n(A,new Uint8Array(T))}}catch(he){a={error:he}}finally{try{S&&!S.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}for(var R=x[0].codewords.length,I=R-c.getECCodewords(),M=I-1,U=0,E=0;E<M;E++)for(var H=0;H<w;H++)x[H].codewords[E]=e[U++];for(var q=t.getVersionNumber()===24,ae=q?8:w,H=0;H<ae;H++)x[H].codewords[I-1]=e[U++];for(var ce=x[0].codewords.length,E=I;E<ce;E++)for(var H=0;H<w;H++){var F=q?(H+8)%w:H,ee=q&&F>7?E-1:E;x[F].codewords[ee]=e[U++]}if(U!==e.length)throw new Ue;return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),Ew=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ue(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,c=e<s?e:s,d=s-c,f=255>>8-c<<d;t=(a[i]&f)>>d,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var d=8-e,f=255>>d<<d;t=t<<e|(a[i]&f)>>d,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),hn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(hn||(hn={}));var CT=(function(){function n(){}return n.decode=function(e){var t=new Ew(e),r=new nt,i=new nt,a=new Array,s=hn.ASCII_ENCODE;do if(s===hn.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case hn.C40_ENCODE:this.decodeC40Segment(t,r);break;case hn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case hn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case hn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case hn.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new be}s=hn.ASCII_ENCODE}while(s!==hn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new cd(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new be;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),hn.ASCII_ENCODE;if(a===129)return hn.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return hn.C40_ENCODE;case 231:return hn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return hn.ANSIX12_ENCODE;case 239:return hn.TEXT_ENCODE;case 240:return hn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new be;break}}while(e.available()>0);return hn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var c=0;c<3;c++){var d=i[c];switch(a){case 0:if(d<3)a=d+1;else if(d<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[d];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new be;break;case 1:r?(t.append(String.fromCharCode(d+128)),r=!1):t.append(String.fromCharCode(d)),a=0;break;case 2:if(d<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[d];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(d){case 27:t.append("");break;case 30:r=!0;break;default:throw new be}a=0;break;case 3:r?(t.append(String.fromCharCode(d+224)),r=!1):t.append(String.fromCharCode(d+96)),a=0;break;default:throw new be}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var c=0;c<3;c++){var d=i[c];switch(a){case 0:if(d<3)a=d+1;else if(d<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[d];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else throw new be;break;case 1:r?(t.append(String.fromCharCode(d+128)),r=!1):t.append(String.fromCharCode(d)),a=0;break;case 2:if(d<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[d];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f)}else switch(d){case 27:t.append("");break;case 30:r=!0;break;default:throw new be}a=0;break;case 3:if(d<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[d];r?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),r=!1):t.append(f),a=0}else throw new be;break;default:throw new be}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new be;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new be;for(var c=new Uint8Array(s),d=0;d<s;d++){if(e.available()<8)throw new be;c[d]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{t.append(Nr.decode(c,ht.ISO88591))}catch(f){throw new zl("Platform does not support required encoding: "+f.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),AT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TT=(function(){function n(){this.rsDecoder=new ud(Qn.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new ST(e),a=i.getVersion(),s=i.readCodewords(),c=ET.getDataBlocks(s,a),d=0;try{for(var f=AT(c),p=f.next();!p.done;p=f.next()){var m=p.value;d+=m.getNumDataCodewords()}}catch(T){t={error:T}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}for(var v=new Uint8Array(d),x=c.length,w=0;w<x;w++){var _=c[w],S=_.getCodewords(),E=_.getNumDataCodewords();this.correctErrors(S,E);for(var A=0;A<E;A++)v[A*x+w]=S[A]}return CT.decode(v)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new un}for(var i=0;i<t;i++)e[i]=r[i]},n})(),OT=(function(){function n(e){this.image=e,this.rectangleDetector=new L0(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new ne;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],s=t[3],c=this.transitionsBetween(r,s)+1,d=this.transitionsBetween(a,s)+1;(c&1)===1&&(c+=1),(d&1)===1&&(d+=1),4*c<7*d&&4*d<7*c&&(c=d=Math.max(c,d));var f=n.sampleGrid(this.image,r,i,a,s,c,d);return new O1(f,[r,i,a,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new De(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new De(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,r),c=this.transitionsBetween(r,i),d=this.transitionsBetween(i,a),f=this.transitionsBetween(a,t),p=s,m=[a,t,r,i];return p>c&&(p=c,m[0]=t,m[1]=r,m[2]=i,m[3]=a),p>d&&(p=d,m[0]=r,m[1]=i,m[2]=a,m[3]=t),p>f&&(m[0]=i,m[1]=a,m[2]=t,m[3]=r),m},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),c=n.shiftPoint(r,i,(s+1)*4),d=n.shiftPoint(i,r,(s+1)*4),f=this.transitionsBetween(c,t),p=this.transitionsBetween(d,a);return f<p?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),c=this.transitionsBetween(r,a),d=n.shiftPoint(t,r,(c+1)*4),f=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(d,a),c=this.transitionsBetween(f,a);var p=new De(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),m=new De(a.getX()+(t.getX()-r.getX())/(c+1),a.getY()+(t.getY()-r.getY())/(c+1));if(!this.isValid(p))return this.isValid(m)?m:null;if(!this.isValid(m))return p;var v=this.transitionsBetween(d,p)+this.transitionsBetween(f,p),x=this.transitionsBetween(d,m)+this.transitionsBetween(f,m);return v>x?p:m},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,c=this.transitionsBetween(i,a)+1,d=n.shiftPoint(t,r,c*4),f=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(d,a)+1,c=this.transitionsBetween(f,a)+1,(s&1)===1&&(s+=1),(c&1)===1&&(c+=1);var p=(t.getX()+r.getX()+i.getX()+a.getX())/4,m=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,p,m),r=n.moveAway(r,p,m),i=n.moveAway(i,p,m),a=n.moveAway(a,p,m);var v,x;return d=n.shiftPoint(t,r,c*4),d=n.shiftPoint(d,a,s*4),v=n.shiftPoint(r,t,c*4),v=n.shiftPoint(v,i,s*4),f=n.shiftPoint(i,a,c*4),f=n.shiftPoint(f,r,s*4),x=n.shiftPoint(a,i,c*4),x=n.shiftPoint(x,t,s*4),[d,v,f,x]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,s,c){var d=R1.getInstance();return d.sampleGrid(e,s,c,.5,.5,s-.5,.5,s-.5,c-.5,.5,c-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),c=Math.abs(s-i)>Math.abs(a-r);if(c){var d=r;r=i,i=d,d=a,a=s,s=d}for(var f=Math.abs(a-r),p=Math.abs(s-i),m=-f/2,v=i<s?1:-1,x=r<a?1:-1,w=0,_=this.image.get(c?i:r,c?r:i),S=r,E=i;S!==a;S+=x){var A=this.image.get(c?E:S,c?S:E);if(A!==_&&(w++,_=A),m+=p,m>0){if(E===s)break;E+=v,m-=f}}return w},n})(),Wu=(function(){function n(){this.decoder=new TT}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Mt.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new OT(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var c=r.getRawBytes(),d=new Ln(r.getText(),c,8*c.length,i,Fe.DATA_MATRIX,jt.currentTimeMillis()),f=r.getByteSegments();f!=null&&d.putMetadata(Dn.BYTE_SEGMENTS,f);var p=r.getECLevel();return p!=null&&d.putMetadata(Dn.ERROR_CORRECTION_LEVEL,p),d},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ne;var i=this.moduleSize(t,e),a=t[1],s=r[1],c=t[0],d=r[0],f=(d-c+1)/i,p=(s-a+1)/i;if(f<=0||p<=0)throw new ne;var m=i/2;a+=m,c+=m;for(var v=new Jr(f,p),x=0;x<p;x++)for(var w=a+x*i,_=0;_<f;_++)e.get(c+_*i,w)&&v.set(_,x);return v},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new ne;var s=i-e[0];if(s===0)throw new ne;return s},n.NO_POINTS=[],n})(),RT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){RT(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Wu,t)||this}return e})(us);var Go;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Go||(Go={}));var NT=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new tn(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Ue;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Go.L,"L",1),n.M=new n(Go.M,"M",0),n.Q=new n(Go.Q,"Q",3),n.H=new n(Go.H,"H",2),n})(),IT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cw=(function(){function n(e){this.errorCorrectionLevel=NT.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return rt.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var c=IT(n.FORMAT_INFO_DECODE_LOOKUP),d=c.next();!d.done;d=c.next()){var f=d.value,p=f[0];if(p===e||p===t)return new n(f[1]);var m=n.numBitsDiffering(e,p);m<a&&(s=f[1],a=m),e!==t&&(m=n.numBitsDiffering(t,p),m<a&&(s=f[1],a=m))}}catch(v){r={error:v}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),DT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=DT(i),s=a.next();!s.done;s=a.next()){var c=s.value;r+=c.getCount()}}catch(d){e={error:d}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),k=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),kT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ga=(function(){function n(e,t){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var c=0,d=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var p=kT(f),m=p.next();!m.done;m=p.next()){var v=m.value;c+=v.getCount()*(v.getDataCodewords()+d)}}catch(x){r={error:x}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new be;try{return this.getVersionForNumber((e-17)/4)}catch{throw new be}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Ue;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var s=Cw.numBitsDiffering(e,a);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Jr(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new K(7,new k(1,19)),new K(10,new k(1,16)),new K(13,new k(1,13)),new K(17,new k(1,9))),new n(2,Int32Array.from([6,18]),new K(10,new k(1,34)),new K(16,new k(1,28)),new K(22,new k(1,22)),new K(28,new k(1,16))),new n(3,Int32Array.from([6,22]),new K(15,new k(1,55)),new K(26,new k(1,44)),new K(18,new k(2,17)),new K(22,new k(2,13))),new n(4,Int32Array.from([6,26]),new K(20,new k(1,80)),new K(18,new k(2,32)),new K(26,new k(2,24)),new K(16,new k(4,9))),new n(5,Int32Array.from([6,30]),new K(26,new k(1,108)),new K(24,new k(2,43)),new K(18,new k(2,15),new k(2,16)),new K(22,new k(2,11),new k(2,12))),new n(6,Int32Array.from([6,34]),new K(18,new k(2,68)),new K(16,new k(4,27)),new K(24,new k(4,19)),new K(28,new k(4,15))),new n(7,Int32Array.from([6,22,38]),new K(20,new k(2,78)),new K(18,new k(4,31)),new K(18,new k(2,14),new k(4,15)),new K(26,new k(4,13),new k(1,14))),new n(8,Int32Array.from([6,24,42]),new K(24,new k(2,97)),new K(22,new k(2,38),new k(2,39)),new K(22,new k(4,18),new k(2,19)),new K(26,new k(4,14),new k(2,15))),new n(9,Int32Array.from([6,26,46]),new K(30,new k(2,116)),new K(22,new k(3,36),new k(2,37)),new K(20,new k(4,16),new k(4,17)),new K(24,new k(4,12),new k(4,13))),new n(10,Int32Array.from([6,28,50]),new K(18,new k(2,68),new k(2,69)),new K(26,new k(4,43),new k(1,44)),new K(24,new k(6,19),new k(2,20)),new K(28,new k(6,15),new k(2,16))),new n(11,Int32Array.from([6,30,54]),new K(20,new k(4,81)),new K(30,new k(1,50),new k(4,51)),new K(28,new k(4,22),new k(4,23)),new K(24,new k(3,12),new k(8,13))),new n(12,Int32Array.from([6,32,58]),new K(24,new k(2,92),new k(2,93)),new K(22,new k(6,36),new k(2,37)),new K(26,new k(4,20),new k(6,21)),new K(28,new k(7,14),new k(4,15))),new n(13,Int32Array.from([6,34,62]),new K(26,new k(4,107)),new K(22,new k(8,37),new k(1,38)),new K(24,new k(8,20),new k(4,21)),new K(22,new k(12,11),new k(4,12))),new n(14,Int32Array.from([6,26,46,66]),new K(30,new k(3,115),new k(1,116)),new K(24,new k(4,40),new k(5,41)),new K(20,new k(11,16),new k(5,17)),new K(24,new k(11,12),new k(5,13))),new n(15,Int32Array.from([6,26,48,70]),new K(22,new k(5,87),new k(1,88)),new K(24,new k(5,41),new k(5,42)),new K(30,new k(5,24),new k(7,25)),new K(24,new k(11,12),new k(7,13))),new n(16,Int32Array.from([6,26,50,74]),new K(24,new k(5,98),new k(1,99)),new K(28,new k(7,45),new k(3,46)),new K(24,new k(15,19),new k(2,20)),new K(30,new k(3,15),new k(13,16))),new n(17,Int32Array.from([6,30,54,78]),new K(28,new k(1,107),new k(5,108)),new K(28,new k(10,46),new k(1,47)),new K(28,new k(1,22),new k(15,23)),new K(28,new k(2,14),new k(17,15))),new n(18,Int32Array.from([6,30,56,82]),new K(30,new k(5,120),new k(1,121)),new K(26,new k(9,43),new k(4,44)),new K(28,new k(17,22),new k(1,23)),new K(28,new k(2,14),new k(19,15))),new n(19,Int32Array.from([6,30,58,86]),new K(28,new k(3,113),new k(4,114)),new K(26,new k(3,44),new k(11,45)),new K(26,new k(17,21),new k(4,22)),new K(26,new k(9,13),new k(16,14))),new n(20,Int32Array.from([6,34,62,90]),new K(28,new k(3,107),new k(5,108)),new K(26,new k(3,41),new k(13,42)),new K(30,new k(15,24),new k(5,25)),new K(28,new k(15,15),new k(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new K(28,new k(4,116),new k(4,117)),new K(26,new k(17,42)),new K(28,new k(17,22),new k(6,23)),new K(30,new k(19,16),new k(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new K(28,new k(2,111),new k(7,112)),new K(28,new k(17,46)),new K(30,new k(7,24),new k(16,25)),new K(24,new k(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new K(30,new k(4,121),new k(5,122)),new K(28,new k(4,47),new k(14,48)),new K(30,new k(11,24),new k(14,25)),new K(30,new k(16,15),new k(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new K(30,new k(6,117),new k(4,118)),new K(28,new k(6,45),new k(14,46)),new K(30,new k(11,24),new k(16,25)),new K(30,new k(30,16),new k(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new K(26,new k(8,106),new k(4,107)),new K(28,new k(8,47),new k(13,48)),new K(30,new k(7,24),new k(22,25)),new K(30,new k(22,15),new k(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new K(28,new k(10,114),new k(2,115)),new K(28,new k(19,46),new k(4,47)),new K(28,new k(28,22),new k(6,23)),new K(30,new k(33,16),new k(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new K(30,new k(8,122),new k(4,123)),new K(28,new k(22,45),new k(3,46)),new K(30,new k(8,23),new k(26,24)),new K(30,new k(12,15),new k(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new K(30,new k(3,117),new k(10,118)),new K(28,new k(3,45),new k(23,46)),new K(30,new k(4,24),new k(31,25)),new K(30,new k(11,15),new k(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new K(30,new k(7,116),new k(7,117)),new K(28,new k(21,45),new k(7,46)),new K(30,new k(1,23),new k(37,24)),new K(30,new k(19,15),new k(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new K(30,new k(5,115),new k(10,116)),new K(28,new k(19,47),new k(10,48)),new K(30,new k(15,24),new k(25,25)),new K(30,new k(23,15),new k(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new K(30,new k(13,115),new k(3,116)),new K(28,new k(2,46),new k(29,47)),new K(30,new k(42,24),new k(1,25)),new K(30,new k(23,15),new k(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new K(30,new k(17,115)),new K(28,new k(10,46),new k(23,47)),new K(30,new k(10,24),new k(35,25)),new K(30,new k(19,15),new k(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new K(30,new k(17,115),new k(1,116)),new K(28,new k(14,46),new k(21,47)),new K(30,new k(29,24),new k(19,25)),new K(30,new k(11,15),new k(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new K(30,new k(13,115),new k(6,116)),new K(28,new k(14,46),new k(23,47)),new K(30,new k(44,24),new k(7,25)),new K(30,new k(59,16),new k(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new K(30,new k(12,121),new k(7,122)),new K(28,new k(12,47),new k(26,48)),new K(30,new k(39,24),new k(14,25)),new K(30,new k(22,15),new k(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new K(30,new k(6,121),new k(14,122)),new K(28,new k(6,47),new k(34,48)),new K(30,new k(46,24),new k(10,25)),new K(30,new k(2,15),new k(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new K(30,new k(17,122),new k(4,123)),new K(28,new k(29,46),new k(14,47)),new K(30,new k(49,24),new k(10,25)),new K(30,new k(24,15),new k(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new K(30,new k(4,122),new k(18,123)),new K(28,new k(13,46),new k(32,47)),new K(30,new k(48,24),new k(14,25)),new K(30,new k(42,15),new k(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new K(30,new k(20,117),new k(4,118)),new K(28,new k(40,47),new k(7,48)),new K(30,new k(43,24),new k(22,25)),new K(30,new k(10,15),new k(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new K(30,new k(19,118),new k(6,119)),new K(28,new k(18,47),new k(31,48)),new K(30,new k(34,24),new k(34,25)),new K(30,new k(20,15),new k(61,16)))],n})(),wn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(wn||(wn={}));var xx=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[wn.DATA_MASK_000,new n(wn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[wn.DATA_MASK_001,new n(wn.DATA_MASK_001,function(e,t){return(e&1)===0})],[wn.DATA_MASK_010,new n(wn.DATA_MASK_010,function(e,t){return t%3===0})],[wn.DATA_MASK_011,new n(wn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[wn.DATA_MASK_100,new n(wn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[wn.DATA_MASK_101,new n(wn.DATA_MASK_101,function(e,t){return e*t%6===0})],[wn.DATA_MASK_110,new n(wn.DATA_MASK_110,function(e,t){return e*t%6<3})],[wn.DATA_MASK_111,new n(wn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),jT=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new be;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=Cw.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new be},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Ga.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var c=Ga.decodeVersionInformation(r);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(c=Ga.decodeVersionInformation(r),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new be},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=xx.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,c=new Uint8Array(t.getTotalCodewords()),d=0,f=0,p=0,m=i-1;m>0;m-=2){m===6&&m--;for(var v=0;v<i;v++)for(var x=s?i-1-v:v,w=0;w<2;w++)a.get(m-w,x)||(p++,f<<=1,this.bitMatrix.get(m-w,x)&&(f|=1),p===8&&(c[d++]=f,p=0,f=0));s=!s}if(d!==t.getTotalCodewords())throw new be;return c},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=xx.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),bx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MT=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,s,c;if(e.length!==t.getTotalCodewords())throw new Ue;var d=t.getECBlocksForLevel(r),f=0,p=d.getECBlocks();try{for(var m=bx(p),v=m.next();!v.done;v=m.next()){var x=v.value;f+=x.getCount()}}catch(ee){i={error:ee}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}var w=new Array(f),_=0;try{for(var S=bx(p),E=S.next();!E.done;E=S.next())for(var x=E.value,A=0;A<x.getCount();A++){var T=x.getDataCodewords(),R=d.getECCodewordsPerBlock()+T;w[_++]=new n(T,new Uint8Array(R))}}catch(ee){s={error:ee}}finally{try{E&&!E.done&&(c=S.return)&&c.call(S)}finally{if(s)throw s.error}}for(var I=w[0].codewords.length,M=w.length-1;M>=0;){var U=w[M].codewords.length;if(U===I)break;M--}M++;for(var H=I-d.getECCodewordsPerBlock(),q=0,A=0;A<H;A++)for(var ae=0;ae<_;ae++)w[ae].codewords[A]=e[q++];for(var ae=M;ae<_;ae++)w[ae].codewords[H]=e[q++];for(var ce=w[0].codewords.length,A=H;A<ce;A++)for(var ae=0;ae<_;ae++){var F=ae<M?A:A+1;w[ae].codewords[F]=e[q++]}return w},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),Ar;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Ar||(Ar={}));var Ft=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Ue;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Ar.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Ar.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Ar.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Ar.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Ar.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Ar.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Ar.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Ar.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Ar.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Ar.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),PT=(function(){function n(){}return n.decode=function(e,t,r,i){var a=new Ew(e),s=new nt,c=new Array,d=-1,f=-1;try{var p=null,m=!1,v=void 0;do{if(a.available()<4)v=Ft.TERMINATOR;else{var x=a.readBits(4);v=Ft.forBits(x)}switch(v){case Ft.TERMINATOR:break;case Ft.FNC1_FIRST_POSITION:case Ft.FNC1_SECOND_POSITION:m=!0;break;case Ft.STRUCTURED_APPEND:if(a.available()<16)throw new be;d=a.readBits(8),f=a.readBits(8);break;case Ft.ECI:var w=n.parseECIValue(a);if(p=mn.getCharacterSetECIByValue(w),p===null)throw new be;break;case Ft.HANZI:var _=a.readBits(4),S=a.readBits(v.getCharacterCountBits(t));_===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,S);break;default:var E=a.readBits(v.getCharacterCountBits(t));switch(v){case Ft.NUMERIC:n.decodeNumericSegment(a,s,E);break;case Ft.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,E,m);break;case Ft.BYTE:n.decodeByteSegment(a,s,E,p,c,i);break;case Ft.KANJI:n.decodeKanjiSegment(a,s,E);break;default:throw new be}break}}while(v!==Ft.TERMINATOR)}catch{throw new be}return new cd(e,s.toString(),c.length===0?null:c,r===null?null:r.toString(),d,f)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new be;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),c=s/96<<8&4294967295|s%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{t.append(Nr.decode(i,ht.GB2312))}catch(d){throw new be(d)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new be;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),c=s/192<<8&4294967295|s%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{t.append(Nr.decode(i,ht.SHIFT_JIS))}catch(d){throw new be(d)}},n.decodeByteSegment=function(e,t,r,i,a,s){if(8*r>e.available())throw new be;for(var c=new Uint8Array(r),d=0;d<r;d++)c[d]=e.readBits(8);var f;i===null?f=ht.guessEncoding(c,s):f=i.getName();try{t.append(Nr.decode(c,f))}catch(p){throw new be(p)}a.push(c)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new be;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new be;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new be;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var c=a;c<t.length();c++)t.charAt(c)==="%"&&(c<t.length()-1&&t.charAt(c+1)==="%"?t.deleteCharAt(c+1):t.setCharAt(c,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new be;var i=e.readBits(10);if(i>=1e3)throw new be;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new be;var a=e.readBits(7);if(a>=100)throw new be;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new be;var s=e.readBits(4);if(s>=10)throw new be;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new be},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),Aw=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),wx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BT=(function(){function n(){this.rsDecoder=new ud(Qn.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Jr.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new jT(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new Aw(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,s,c=e.readVersion(),d=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),p=MT.getDataBlocks(f,c,d),m=0;try{for(var v=wx(p),x=v.next();!x.done;x=v.next()){var w=x.value;m+=w.getNumDataCodewords()}}catch(M){r={error:M}}finally{try{x&&!x.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}var _=new Uint8Array(m),S=0;try{for(var E=wx(p),A=E.next();!A.done;A=E.next()){var w=A.value,T=w.getCodewords(),R=w.getNumDataCodewords();this.correctErrors(T,R);for(var I=0;I<R;I++)_[S++]=T[I]}}catch(M){a={error:M}}finally{try{A&&!A.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}return PT.decode(_,c,d,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new un}for(var i=0;i<t;i++)e[i]=r[i]},n})(),LT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),FT=(function(n){LT(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,s=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new e(a,s,c)},e})(De),UT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zT=(function(){function n(e,t,r,i,a,s,c){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,s=new Int32Array(3),c=this.image,d=0;d<t;d++){var f=a+((d&1)===0?Math.floor((d+1)/2):-Math.floor((d+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var p=e;p<i&&!c.get(p,f);)p++;for(var m=0;p<i;){if(c.get(p,f))if(m===1)s[1]++;else if(m===2){if(this.foundPatternCross(s)){var v=this.handlePossibleCenter(s,f,p);if(v!==null)return v}s[0]=s[2],s[1]=1,s[2]=0,m=1}else s[++m]++;else m===1&&m++,s[m]++;p++}if(this.foundPatternCross(s)){var v=this.handlePossibleCenter(s,f,i);if(v!==null)return v}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,s=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;for(var d=e;d>=0&&a.get(t,d)&&c[1]<=r;)c[1]++,d--;if(d<0||c[1]>r)return NaN;for(;d>=0&&!a.get(t,d)&&c[0]<=r;)c[0]++,d--;if(c[0]>r)return NaN;for(d=e+1;d<s&&a.get(t,d)&&c[1]<=r;)c[1]++,d++;if(d===s||c[1]>r)return NaN;for(;d<s&&!a.get(t,d)&&c[2]<=r;)c[2]++,d++;if(c[2]>r)return NaN;var f=c[0]+c[1]+c[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(c)?n.centerFromEnd(c,d):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,s=e[0]+e[1]+e[2],c=n.centerFromEnd(e,r),d=this.crossCheckVertical(t,c,2*e[1],s);if(!isNaN(d)){var f=(e[0]+e[1]+e[2])/3;try{for(var p=UT(this.possibleCenters),m=p.next();!m.done;m=p.next()){var v=m.value;if(v.aboutEquals(f,d,c))return v.combineEstimate(d,c,f)}}catch(w){i={error:w}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new FT(c,d,f);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null},n})(),VT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),HT=(function(n){VT(e,n);function e(t,r,i,a){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,c=(this.count*this.getY()+t)/a,d=(this.count*this.estimatedModuleSize+i)/a;return new e(s,c,d,a)},e})(De),$T=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),cl=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GT=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Mt.TRY_HARDER)!==void 0,r=e!=null&&e.get(Mt.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),c=Math.floor(3*a/(4*n.MAX_MODULES));(c<n.MIN_SKIP||t)&&(c=n.MIN_SKIP);for(var d=!1,f=new Int32Array(5),p=c-1;p<a&&!d;p+=c){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var m=0,v=0;v<s;v++)if(i.get(v,p))(m&1)===1&&m++,f[m]++;else if((m&1)===0)if(m===4)if(n.foundPatternCross(f)){var x=this.handlePossibleCenter(f,p,v,r);if(x===!0)if(c=2,this.hasSkipped===!0)d=this.haveMultiplyConfirmedCenters();else{var w=this.findRowSkip();w>f[2]&&(p+=w-f[2]-c,v=s-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,m=3;continue}m=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,m=3;else f[++m]++;else f[m]++;if(n.foundPatternCross(f)){var x=this.handlePossibleCenter(f,p,s,r);x===!0&&(c=f[0],this.hasSkipped&&(d=this.haveMultiplyConfirmedCenters()))}}var _=this.selectBestPatterns();return De.orderBestPatterns(_),new $T(_)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),s=0,c=this.image;e>=s&&t>=s&&c.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!c.get(t-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||t<s||a[1]>r)return!1;for(;e>=s&&t>=s&&c.get(t-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var d=c.getHeight(),f=c.getWidth();for(s=1;e+s<d&&t+s<f&&c.get(t+s,e+s);)a[2]++,s++;if(e+s>=d||t+s>=f)return!1;for(;e+s<d&&t+s<f&&!c.get(t+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=d||t+s>=f||a[3]>=r)return!1;for(;e+s<d&&t+s<f&&c.get(t+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,s=a.getHeight(),c=this.getCrossCheckStateCount(),d=e;d>=0&&a.get(t,d);)c[2]++,d--;if(d<0)return NaN;for(;d>=0&&!a.get(t,d)&&c[1]<=r;)c[1]++,d--;if(d<0||c[1]>r)return NaN;for(;d>=0&&a.get(t,d)&&c[0]<=r;)c[0]++,d--;if(c[0]>r)return NaN;for(d=e+1;d<s&&a.get(t,d);)c[2]++,d++;if(d===s)return NaN;for(;d<s&&!a.get(t,d)&&c[3]<r;)c[3]++,d++;if(d===s||c[3]>=r)return NaN;for(;d<s&&a.get(t,d)&&c[4]<r;)c[4]++,d++;if(c[4]>=r)return NaN;var f=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(f-i)>=2*i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,d):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,s=a.getWidth(),c=this.getCrossCheckStateCount(),d=e;d>=0&&a.get(d,t);)c[2]++,d--;if(d<0)return NaN;for(;d>=0&&!a.get(d,t)&&c[1]<=r;)c[1]++,d--;if(d<0||c[1]>r)return NaN;for(;d>=0&&a.get(d,t)&&c[0]<=r;)c[0]++,d--;if(c[0]>r)return NaN;for(d=e+1;d<s&&a.get(d,t);)c[2]++,d++;if(d===s)return NaN;for(;d<s&&!a.get(d,t)&&c[3]<r;)c[3]++,d++;if(d===s||c[3]>=r)return NaN;for(;d<s&&a.get(d,t)&&c[4]<r;)c[4]++,d++;if(c[4]>=r)return NaN;var f=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(f-i)>=i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,d):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(c)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(c),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(s),e[2],a)))){for(var d=a/7,f=!1,p=this.possibleCenters,m=0,v=p.length;m<v;m++){var x=p[m];if(x.aboutEquals(d,c,s)){p[m]=x.combineEstimate(c,s,d),f=!0;break}}if(!f){var w=new HT(s,c,d);p.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=cl(this.possibleCenters),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.getCount()>=n.CENTER_QUORUM)if(i==null)i=c;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-c.getX())-Math.abs(i.getY()-c.getY()))/2)}}catch(d){e={error:d}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,s=0,c=this.possibleCenters.length;try{for(var d=cl(this.possibleCenters),f=d.next();!f.done;f=d.next()){var p=f.value;p.getCount()>=n.CENTER_QUORUM&&(a++,s+=p.getEstimatedModuleSize())}}catch(_){e={error:_}}finally{try{f&&!f.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}if(a<3)return!1;var m=s/c,v=0;try{for(var x=cl(this.possibleCenters),w=x.next();!w.done;w=x.next()){var p=w.value;v+=Math.abs(p.getEstimatedModuleSize()-m)}}catch(_){r={error:_}}finally{try{w&&!w.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}return v<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new ne;var s=this.possibleCenters,c;if(a>3){var d=0,f=0;try{for(var p=cl(this.possibleCenters),m=p.next();!m.done;m=p.next()){var v=m.value,x=v.getEstimatedModuleSize();d+=x,f+=x*x}}catch(I){e={error:I}}finally{try{m&&!m.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}c=d/a;var w=Math.sqrt(f/a-c*c);s.sort(function(I,M){var U=Math.abs(M.getEstimatedModuleSize()-c),H=Math.abs(I.getEstimatedModuleSize()-c);return U<H?-1:U>H?1:0});for(var _=Math.max(.2*c,w),S=0;S<s.length&&s.length>3;S++){var E=s[S];Math.abs(E.getEstimatedModuleSize()-c)>_&&(s.splice(S,1),S--)}}if(s.length>3){var d=0;try{for(var A=cl(s),T=A.next();!T.done;T=A.next()){var R=T.value;d+=R.getEstimatedModuleSize()}}catch(M){r={error:M}}finally{try{T&&!T.done&&(i=A.return)&&i.call(A)}finally{if(r)throw r.error}}c=d/s.length,s.sort(function(M,U){if(U.getCount()===M.getCount()){var H=Math.abs(U.getEstimatedModuleSize()-c),q=Math.abs(M.getEstimatedModuleSize()-c);return H<q?1:H>q?-1:0}else return U.getCount()-M.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),qT=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Mt.NEED_RESULT_POINT_CALLBACK);var t=new GT(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new ne("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,a),c=Ga.getProvisionalVersionForDimension(s),d=c.getDimensionForVersion()-7,f=null;if(c.getAlignmentPatternCenters().length>0)for(var p=r.getX()-t.getX()+i.getX(),m=r.getY()-t.getY()+i.getY(),v=1-3/d,x=Math.floor(t.getX()+v*(p-t.getX())),w=Math.floor(t.getY()+v*(m-t.getY())),_=4;_<=16;_<<=1)try{f=this.findAlignmentInRegion(a,x,w,_);break}catch(T){if(!(T instanceof ne))throw T}var S=n.createTransform(t,r,i,f,s),E=n.sampleGrid(this.image,S,s),A;return f===null?A=[i,t,r]:A=[i,t,r,f],new O1(E,A)},n.createTransform=function(e,t,r,i,a){var s=a-3.5,c,d,f,p;return i!==null?(c=i.getX(),d=i.getY(),f=s-3,p=f):(c=t.getX()-e.getX()+r.getX(),d=t.getY()-e.getY()+r.getY(),f=s,p=s),bw.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,f,p,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),c,d,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=R1.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=vt.round(De.distance(e,t)/i),s=vt.round(De.distance(e,r)/i),c=Math.floor((a+s)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new ne("Dimensions could be not found.")}return c},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,c=e-(r-e);c<0?(s=e/(e-c),c=0):c>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);var d=Math.floor(t-(i-t)*s);return s=1,d<0?(s=t/(t-d),d=0):d>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(d-t),d=this.image.getHeight()-1),c=Math.floor(e+(c-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,c,d),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var s=e;e=t,t=s,s=r,r=i,i=s}for(var c=Math.abs(r-e),d=Math.abs(i-t),f=-c/2,p=e<r?1:-1,m=t<i?1:-1,v=0,x=r+p,w=e,_=t;w!==x;w+=p){var S=a?_:w,E=a?w:_;if(v===1===this.image.get(S,E)){if(v===2)return vt.distance(w,_,e,t);v++}if(f+=d,f>0){if(_===i)break;_+=m,f-=c}}return v===2?vt.distance(r+p,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),s=Math.max(0,t-a),c=Math.min(this.image.getWidth()-1,t+a);if(c-s<e*3)throw new ne("Alignment top exceeds estimated module size.");var d=Math.max(0,r-a),f=Math.min(this.image.getHeight()-1,r+a);if(f-d<e*3)throw new ne("Alignment bottom exceeds estimated module size.");var p=new zT(this.image,s,d,c-s,f-d,e,this.resultPointCallback);return p.find()},n})(),Xu=(function(){function n(){this.decoder=new BT}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Mt.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var s=new qT(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof Aw&&r.getOther().applyMirroredCorrection(i);var c=new Ln(r.getText(),r.getRawBytes(),void 0,i,Fe.QR_CODE,void 0),d=r.getByteSegments();d!==null&&c.putMetadata(Dn.BYTE_SEGMENTS,d);var f=r.getECLevel();return f!==null&&c.putMetadata(Dn.ERROR_CORRECTION_LEVEL,f),r.hasStructuredAppend()&&(c.putMetadata(Dn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),c.putMetadata(Dn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ne;var i=this.moduleSize(t,e),a=t[1],s=r[1],c=t[0],d=r[0];if(c>=d||a>=s)throw new ne;if(s-a!==d-c&&(d=c+(s-a),d>=e.getWidth()))throw new ne;var f=Math.round((d-c+1)/i),p=Math.round((s-a+1)/i);if(f<=0||p<=0)throw new ne;if(p!==f)throw new ne;var m=Math.floor(i/2);a+=m,c+=m;var v=c+Math.floor((f-1)*i)-d;if(v>0){if(v>m)throw new ne;c-=v}var x=a+Math.floor((p-1)*i)-s;if(x>0){if(x>m)throw new ne;a-=x}for(var w=new Jr(f,p),_=0;_<p;_++)for(var S=a+Math.floor(_*i),E=0;E<f;E++)e.get(c+Math.floor(E*i),S)&&w.set(E,_);return w},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],c=!0,d=0;a<i&&s<r;){if(c!==t.get(a,s)){if(++d===5)break;c=!c}a++,s++}if(a===i||s===r)throw new ne;return(a-e[0])/7},n.NO_POINTS=new Array,n})(),WT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pt=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return vt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=WT(e),c=s.next();!c.done;c=s.next()){var d=c.value;i[a++]=d}}catch(f){t={error:f}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=vn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),XT=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),YT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KT=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new XT(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,s=0,c=0,d=!1;s<t.getHeight();){var f=n.findVertices(t,s,c);if(f[0]==null&&f[3]==null){if(!d)break;d=!1,c=0;try{for(var p=(r=void 0,YT(a)),m=p.next();!m.done;m=p.next()){var v=m.value;v[1]!=null&&(s=Math.trunc(Math.max(s,v[1].getY()))),v[3]!=null&&(s=Math.max(s,Math.trunc(v[3].getY())))}}catch(x){r={error:x}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(d=!0,a.push(f),!e)break;f[2]!=null?(c=Math.trunc(f[2].getX()),s=Math.trunc(f[2].getY())):(c=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,s){for(var c=new Array(4),d=!1,f=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var p=n.findGuardPattern(e,a,i,r,!1,s,f);if(p!=null){for(;i>0;){var m=n.findGuardPattern(e,a,--i,r,!1,s,f);if(m!=null)p=m;else{i++;break}}c[0]=new De(p[0],i),c[1]=new De(p[1],i),d=!0;break}}var v=i+1;if(d){for(var x=0,m=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);v<t;v++){var p=n.findGuardPattern(e,m[0],v,r,!1,s,f);if(p!=null&&Math.abs(m[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(m[1]-p[1])<n.MAX_PATTERN_DRIFT)m=p,x=0;else{if(x>n.SKIPPED_ROW_COUNT_MAX)break;x++}}v-=x+1,c[2]=new De(m[0],v),c[3]=new De(m[1],v)}return v-i<n.BARCODE_MIN_HEIGHT&&vn.fill(c,null),c},n.findGuardPattern=function(e,t,r,i,a,s,c){vn.fillWithin(c,0,c.length,0);for(var d=t,f=0;e.get(d,r)&&d>0&&f++<n.MAX_PIXEL_DRIFT;)d--;for(var p=d,m=0,v=s.length,x=a;p<i;p++){var w=e.get(p,r);if(w!==x)c[m]++;else{if(m===v-1){if(n.patternMatchVariance(c,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([d,p]);d+=c[0]+c[1],jt.arraycopy(c,2,c,0,m-1),c[m-1]=0,c[m]=0,m--}else m++;c[m]=1,x=!x}}return m===v-1&&n.patternMatchVariance(c,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([d,p-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,c=0;c<i;c++)a+=e[c],s+=t[c];if(a<s)return 1/0;var d=a/s;r*=d;for(var f=0,p=0;p<i;p++){var m=e[p],v=t[p]*d,x=m>v?m-v:v-m;if(x>r)return 1/0;f+=x}return f/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),ZT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Va=(function(){function n(e,t){if(t.length===0)throw new Ue;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),jt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=ZT(this.coefficients),s=a.next();!s.done;s=a.next()){var c=s.value;i=this.field.add(i,c)}}catch(m){t={error:m}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var d=this.coefficients[0],f=this.coefficients.length,p=1;p<f;p++)d=this.field.add(this.field.multiply(e,d),this.coefficients[p]);return d},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ue("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;jt.arraycopy(r,0,a,0,s);for(var c=s;c<r.length;c++)a[c]=this.field.add(t[c-s],r[c]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ue("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ue("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),c=0;c<r;c++)for(var d=t[c],f=0;f<a;f++)s[c+f]=this.field.add(s[c+f],this.field.multiply(d,i[f]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ue;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new nt,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),QT=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ue;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new xw;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),JT=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),eO=(function(n){JT(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Va(i,new Int32Array([0])),i.one=new Va(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ue;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Va(this,i)},e.PDF417_GF=new e(pt.NUMBER_OF_CODEWORDS,3),e})(QT),tO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nO=(function(){function n(){this.field=eO.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,s=new Va(this.field,e),c=new Int32Array(t),d=!1,f=t;f>0;f--){var p=s.evaluateAt(this.field.exp(f));c[t-f]=p,p!==0&&(d=!0)}if(!d)return 0;var m=this.field.getOne();if(r!=null)try{for(var v=tO(r),x=v.next();!x.done;x=v.next()){var w=x.value,_=this.field.exp(e.length-1-w),S=new Va(this.field,new Int32Array([this.field.subtract(0,_),1]));m=m.multiply(S)}}catch(H){i={error:H}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}for(var E=new Va(this.field,c),A=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),E,t),T=A[0],R=A[1],I=this.findErrorLocations(T),M=this.findErrorMagnitudes(R,T,I),f=0;f<I.length;f++){var U=e.length-1-this.field.log(I[f]);if(U<0)throw un.getChecksumInstance();e[U]=this.field.subtract(e[U],M[f])}return I.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,c=this.field.getZero(),d=this.field.getOne();s.getDegree()>=Math.round(r/2);){var f=a,p=c;if(a=s,c=d,a.isZero())throw un.getChecksumInstance();s=f;for(var m=this.field.getZero(),v=a.getCoefficient(a.getDegree()),x=this.field.inverse(v);s.getDegree()>=a.getDegree()&&!s.isZero();){var w=s.getDegree()-a.getDegree(),_=this.field.multiply(s.getCoefficient(s.getDegree()),x);m=m.add(this.field.buildMonomial(w,_)),s=s.subtract(a.multiplyByMonomial(w,_))}d=m.multiply(c).subtract(p).negative()}var S=d.getCoefficient(0);if(S===0)throw un.getChecksumInstance();var E=this.field.inverse(S),A=d.multiply(E),T=s.multiply(E);return[A,T]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw un.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var c=new Va(this.field,a),d=r.length,f=new Int32Array(d),s=0;s<d;s++){var p=this.field.inverse(r[s]),m=this.field.subtract(0,e.evaluateAt(p)),v=this.field.inverse(c.evaluateAt(p));f[s]=this.field.multiply(m,v)}return f},n})(),U0=(function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var s=t==null||r==null,c=i==null||a==null;if(s&&c)throw new ne;s?(t=new De(0,i.getY()),r=new De(0,a.getY())):c&&(i=new De(e.getWidth()-1,t.getY()),a=new De(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,c=this.bottomRight;if(e>0){var d=r?this.topLeft:this.topRight,f=Math.trunc(d.getY()-e);f<0&&(f=0);var p=new De(d.getX(),f);r?i=p:s=p}if(t>0){var m=r?this.bottomLeft:this.bottomRight,v=Math.trunc(m.getY()+t);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);var x=new De(m.getX(),v);r?a=x:c=x}return new n(this.image,i,a,s,c)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),rO=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),I1=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,c,d,f,p,m){if(s==="%%")return"%";if(t[++r]!==void 0){s=f?parseInt(f.substr(1)):void 0;var v=p?parseInt(p.substr(1)):void 0,x;switch(m){case"s":x=t[r];break;case"c":x=t[r][0];break;case"f":x=parseFloat(t[r]).toFixed(s);break;case"p":x=parseFloat(t[r]).toPrecision(s);break;case"e":x=parseFloat(t[r]).toExponential(s);break;case"x":x=parseInt(t[r]).toString(v||16);break;case"d":x=parseFloat(parseInt(t[r],v||10).toPrecision(s)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(v);for(var w=parseInt(d),_=d&&d[0]+""=="0"?"0":" ";x.length<w;)x=c!==void 0?x+_:_+x;return x}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),iO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tw=(function(){function n(e){this.boundingBox=new U0(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new I1,i=0;try{for(var a=iO(this.codewords),s=a.next();!s.done;s=a.next()){var c=s.value;if(c==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue())}}catch(d){e={error:d}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),aO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oO=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},gl=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(m,v){var x={getKey:function(){return m},getValue:function(){return v}};x.getValue()>r?(r=x.getValue(),i=[],i.push(x.getKey())):x.getValue()===r&&i.push(x.getKey())};try{for(var s=aO(this.values.entries()),c=s.next();!c.done;c=s.next()){var d=oO(c.value,2),f=d[0],p=d[1];a(f,p)}}catch(m){e={error:m}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return pt.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),sO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Kh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_x=(function(n){sO(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Kh(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(s.getY())),f=-1,p=1,m=0,v=c;v<d;v++)if(r[v]!=null){var x=r[v],w=x.getRowNumber()-f;if(w===0)m++;else if(w===1)p=Math.max(p,m),m=1,f=x.getRowNumber();else if(w<0||x.getRowNumber()>=t.getRowCount()||w>v)r[v]=null;else{var _=void 0;p>2?_=(p-2)*w:_=w;for(var S=_>=v,E=1;E<=_&&!S;E++)S=r[v-E]!=null;S?r[v]=null:(f=x.getRowNumber(),m=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=Kh(this.getCodewords()),c=s.next();!c.done;c=s.next()){var d=c.value;if(d!=null){var f=d.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.getCodewords(),f=-1,p=s;p<c;p++)if(d[p]!=null){var m=d[p];m.setRowNumberAsRowIndicatorColumn();var v=m.getRowNumber()-f;v===0||(v===1?f=m.getRowNumber():m.getRowNumber()>=t.getRowCount()?d[p]=null:f=m.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new gl,s=new gl,c=new gl,d=new gl;try{for(var f=Kh(i),p=f.next();!p.done;p=f.next()){var m=p.value;if(m!=null){m.setRowNumberAsRowIndicatorColumn();var v=m.getValue()%30,x=m.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:s.setValue(v*3+1);break;case 1:d.setValue(v/3),c.setValue(v%3);break;case 2:a.setValue(v+1);break}}}}catch(_){t={error:_}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||c.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+c.getValue()[0]<pt.MIN_ROWS_IN_BARCODE||s.getValue()[0]+c.getValue()[0]>pt.MAX_ROWS_IN_BARCODE)return null;var w=new rO(a.getValue()[0],s.getValue()[0],c.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(i,w),w},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,c=a.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(Tw),lO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cO=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=pt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var c=this.detectionResultColumns[s].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var c=this.detectionResultColumns[s].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[t],c=this.detectionResultColumns[e-1].getCodewords(),d=c;this.detectionResultColumns[e+1]!=null&&(d=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=c[t],f[3]=d[t],t>0&&(f[0]=r[t-1],f[4]=c[t-1],f[5]=d[t-1]),t>1&&(f[8]=r[t-2],f[10]=c[t-2],f[11]=d[t-2]),t<r.length-1&&(f[1]=r[t+1],f[6]=c[t+1],f[7]=d[t+1]),t<r.length-2&&(f[9]=r[t+2],f[12]=c[t+2],f[13]=d[t+2]);try{for(var p=lO(f),m=p.next();!m.done;m=p.next()){var v=m.value;if(n.adjustRowNumber(s,v))return}}catch(x){i={error:x}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new I1,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n})(),uO=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),dO=(function(){function n(){}return n.initialize=function(){for(var e=0;e<pt.SYMBOL_TABLE.length;e++)for(var t=pt.SYMBOL_TABLE[e],r=t&1,i=0;i<pt.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(pt.BARS_IN_MODULE)),n.RATIOS_TABLE[e][pt.BARS_IN_MODULE-i-1]=Math.fround(a/pt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=vt.sum(e),r=new Int32Array(pt.BARS_IN_MODULE),i=0,a=0,s=0;s<pt.MODULES_IN_CODEWORD;s++){var c=t/(2*pt.MODULES_IN_CODEWORD)+s*t/pt.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return pt.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=vt.sum(e),r=new Array(pt.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=B0.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var c=0;c<n.RATIOS_TABLE.length;c++){for(var d=0,f=n.RATIOS_TABLE[c],p=0;p<pt.BARS_IN_MODULE;p++){var m=Math.fround(f[p]-r[p]);if(d+=Math.fround(m*m),d>=a)break}d<a&&(a=d,s=pt.SYMBOL_TABLE[c])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(pt.SYMBOL_TABLE.length).map(function(e){return new Array(pt.BARS_IN_MODULE)}),n})(),fO=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),Sx=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),hO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pO=(function(n){hO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(er),gO=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new pO;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new T1;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),mO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vO=(function(n){mO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(er),yO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xO=(function(n){yO(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Ue("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new vO;i=rt.MAX_VALUE}this.buf=vn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new T1;this.ensureCapacity(this.count+i),jt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return vn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(gO),Nt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Nt||(Nt={}));function Ow(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var bu;function ra(n){if(typeof bu>"u"&&(bu=Ow()),bu===null)throw new Error("BigInt is not supported!");return bu(n)}function bO(){var n=[];n[0]=ra(1);var e=ra(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var wO=(function(){function n(){}return n.decode=function(e,t){var r=new nt(""),i=mn.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],c=new fO;a<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:mn.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,c);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new be;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw be.getFormatInstance()}if(r.length()===0)throw be.getFormatInstance();var d=new cd(null,r.toString(),null,t);return d.setOther(c),d},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw be.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(rt.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new nt;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var c=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var d=new nt;t=n.textCompaction(e,t+1,d),r.setFileName(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new nt;t=n.textCompaction(e,t+1,f),r.setSender(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new nt;t=n.textCompaction(e,t+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var m=new nt;t=n.numericCompaction(e,t+1,m),r.setSegmentCount(rt.parseInt(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var v=new nt;t=n.numericCompaction(e,t+1,v),r.setTimestamp(Sx.parseLong(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var x=new nt;t=n.numericCompaction(e,t+1,x),r.setChecksum(rt.parseInt(x.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var w=new nt;t=n.numericCompaction(e,t+1,w),r.setFileSize(Sx.parseLong(w.toString()));break;default:throw be.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw be.getFormatInstance()}if(c!==-1){var _=t-c;r.isLastSegment()&&_--,r.setOptionalData(vn.copyOfRange(e,c,c+_))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,c=!1;t<e[0]&&!c;){var d=e[t++];if(d<n.TEXT_COMPACTION_MODE_LATCH)i[s]=d/30,i[s+1]=d%30,s+=2;else switch(d){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,d=e[t++],a[s]=d,s++;break}}return n.decodeTextCompaction(i,a,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=Nt.ALPHA,s=Nt.ALPHA,c=0;c<r;){var d=e[c],f="";switch(a){case Nt.ALPHA:if(d<26)f=String.fromCharCode(65+d);else switch(d){case 26:f=" ";break;case n.LL:a=Nt.LOWER;break;case n.ML:a=Nt.MIXED;break;case n.PS:s=a,a=Nt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break;case Nt.LOWER:if(d<26)f=String.fromCharCode(97+d);else switch(d){case 26:f=" ";break;case n.AS:s=a,a=Nt.ALPHA_SHIFT;break;case n.ML:a=Nt.MIXED;break;case n.PS:s=a,a=Nt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break;case Nt.MIXED:if(d<n.PL)f=n.MIXED_CHARS[d];else switch(d){case n.PL:a=Nt.PUNCT;break;case 26:f=" ";break;case n.LL:a=Nt.LOWER;break;case n.AL:a=Nt.ALPHA;break;case n.PS:s=a,a=Nt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break;case Nt.PUNCT:if(d<n.PAL)f=n.PUNCT_CHARS[d];else switch(d){case n.PAL:a=Nt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break;case Nt.ALPHA_SHIFT:if(a=s,d<26)f=String.fromCharCode(65+d);else switch(d){case 26:f=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break;case Nt.PUNCT_SHIFT:if(a=s,d<n.PAL)f=n.PUNCT_CHARS[d];else switch(d){case n.PAL:a=Nt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break}f!==""&&i.append(f),c++}},n.byteCompaction=function(e,t,r,i,a){var s=new xO,c=0,d=0,f=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),m=t[i++];i<t[0]&&!f;)switch(p[c++]=m,d=900*d+m,m=t[i++],m){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(c%5===0&&c>0){for(var v=0;v<6;++v)s.write(Number(ra(d)>>ra(8*(5-v))));d=0,c=0}break}i===t[0]&&m<n.TEXT_COMPACTION_MODE_LATCH&&(p[c++]=m);for(var x=0;x<c;x++)s.write(p[x]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!f;){var w=t[i++];if(w<n.TEXT_COMPACTION_MODE_LATCH)c++,d=900*d+w;else switch(w){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(c%5===0&&c>0){for(var v=0;v<6;++v)s.write(Number(ra(d)>>ra(8*(5-v))));d=0,c=0}}break}return a.append(Nr.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var c=e[t++];if(t===e[0]&&(a=!0),c<n.TEXT_COMPACTION_MODE_LATCH)s[i]=c,i++;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||c===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=ra(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*ra(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new be;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=Ow()?bO():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),ul=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_O=(function(){function n(){}return n.decode=function(e,t,r,i,a,s,c){for(var d=new U0(e,t,r,i,a),f=null,p=null,m,v=!0;;v=!1){if(t!=null&&(f=n.getRowIndicatorColumn(e,d,t,!0,s,c)),i!=null&&(p=n.getRowIndicatorColumn(e,d,i,!1,s,c)),m=n.merge(f,p),m==null)throw ne.getNotFoundInstance();var x=m.getBoundingBox();if(v&&x!=null&&(x.getMinY()<d.getMinY()||x.getMaxY()>d.getMaxY()))d=x;else break}m.setBoundingBox(d);var w=m.getBarcodeColumnCount()+1;m.setDetectionResultColumn(0,f),m.setDetectionResultColumn(w,p);for(var _=f!=null,S=1;S<=w;S++){var E=_?S:w-S;if(m.getDetectionResultColumn(E)===void 0){var A=void 0;E===0||E===w?A=new _x(d,E===0):A=new Tw(d),m.setDetectionResultColumn(E,A);for(var T=-1,R=T,I=d.getMinY();I<=d.getMaxY();I++){if(T=n.getStartColumn(m,E,I,_),T<0||T>d.getMaxX()){if(R===-1)continue;T=R}var M=n.detectCodeword(e,d.getMinX(),d.getMaxX(),_,T,I,s,c);M!=null&&(A.setCodeword(I,M),R=T,s=Math.min(s,M.getWidth()),c=Math.max(c,M.getWidth()))}}}return n.createDecoderResult(m)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=U0.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new cO(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var c=ul(i),d=c.next();!d.done;d=c.next()){var f=d.value;if(s+=a-f,f>0)break}}catch(x){t={error:x}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),m=0;s>0&&p[m]==null;m++)s--;for(var v=0,m=i.length-1;m>=0&&(v+=a-i[m],!(i[m]>0));m--);for(var m=p.length-1;v>0&&p[m]==null;m--)v--;return e.getBoundingBox().addMissingRows(s,v,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=ul(e),s=a.next();!s.done;s=a.next()){var c=s.value;i=Math.max(i,c)}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,s){for(var c=new _x(t,i),d=0;d<2;d++)for(var f=d===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),m=Math.trunc(Math.trunc(r.getY()));m<=t.getMaxY()&&m>=t.getMinY();m+=f){var v=n.detectCodeword(e,0,e.getWidth(),i,p,m,a,s);v!=null&&(c.setCodeword(m,v),i?p=v.getStartX():p=v.getEndX())}return c},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>pt.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,c=0;c<e.getBarcodeRowCount();c++)for(var d=0;d<e.getBarcodeColumnCount();d++){var f=t[c][d+1].getValue(),p=c*e.getBarcodeColumnCount()+d;f.length===0?r.push(p):f.length===1?i[p]=f[0]:(s.push(p),a.push(f))}for(var m=new Array(a.length),v=0;v<m.length;v++)m[v]=a[v];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,pt.toIntArray(r),pt.toIntArray(s),m)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var s=new Int32Array(i.length),c=100;c-- >0;){for(var d=0;d<s.length;d++)t[i[d]]=a[d][s[d]];try{return n.decodeCodewords(t,e,r)}catch(p){var f=p instanceof un;if(!f)throw p}if(s.length===0)throw un.getChecksumInstance();for(var d=0;d<s.length;d++)if(s[d]<a[d].length-1){s[d]++;break}else if(s[d]=0,d===s.length-1)throw un.getChecksumInstance()}throw un.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),c=0;c<s.length;c++)for(var d=0;d<s[c].length;d++)s[c][d]=new gl;var f=0;try{for(var p=ul(e.getDetectionResultColumns()),m=p.next();!m.done;m=p.next()){var v=m.value;if(v!=null)try{for(var x=(i=void 0,ul(v.getCodewords())),w=x.next();!w.done;w=x.next()){var _=w.value;if(_!=null){var S=_.getRowNumber();if(S>=0){if(S>=s.length)continue;s[S][f].setValue(_.getValue())}}}}catch(E){i={error:E}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}f++}}catch(E){t={error:E}}finally{try{m&&!m.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,s,c=i?1:-1,d=null;if(n.isValidBarcodeColumn(e,t-c)&&(d=e.getDetectionResultColumn(t-c).getCodeword(r)),d!=null)return i?d.getEndX():d.getStartX();if(d=e.getDetectionResultColumn(t).getCodewordNearby(r),d!=null)return i?d.getStartX():d.getEndX();if(n.isValidBarcodeColumn(e,t-c)&&(d=e.getDetectionResultColumn(t-c).getCodewordNearby(r)),d!=null)return i?d.getEndX():d.getStartX();for(var f=0;n.isValidBarcodeColumn(e,t-c);){t-=c;try{for(var p=(a=void 0,ul(e.getDetectionResultColumn(t).getCodewords())),m=p.next();!m.done;m=p.next()){var v=m.value;if(v!=null)return(i?v.getEndX():v.getStartX())+c*f*(v.getEndX()-v.getStartX())}}catch(x){a={error:x}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,s,c,d){a=n.adjustCodewordStartColumn(e,t,r,i,a,s);var f=n.getModuleBitCount(e,t,r,i,a,s);if(f==null)return null;var p,m=vt.sum(f);if(i)p=a+m;else{for(var v=0;v<f.length/2;v++){var x=f[v];f[v]=f[f.length-1-v],f[f.length-1-v]=x}p=a,a=p-m}if(!n.checkCodewordSkew(m,c,d))return null;var w=dO.getDecodedValue(f),_=pt.getCodeword(w);return _===-1?null:new uO(a,p,n.getCodewordBucketNumber(w),_)},n.getModuleBitCount=function(e,t,r,i,a,s){for(var c=a,d=new Int32Array(8),f=0,p=i?1:-1,m=i;(i?c<r:c>=t)&&f<d.length;)e.get(c,s)===m?(d[f]++,c+=p):(f++,m=!m);return f===d.length||c===(i?r:t)&&f===d.length-1?d:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,s){for(var c=a,d=i?-1:1,f=0;f<2;f++){for(;(i?c>=t:c<r)&&i===e.get(c,s);){if(Math.abs(a-c)>n.CODEWORD_SKEW_SIZE)return a;c+=d}d=-d,i=!i}return c},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw be.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=wO.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw un.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw be.getFormatInstance();var r=e[0];if(r>e.length)throw be.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw be.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new I1,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new nO,n})(),SO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yu=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ne.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof be||r instanceof un?ne.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,s=new Array,c=KT.detectMultiple(e,t,r);try{for(var d=SO(c.getPoints()),f=d.next();!f.done;f=d.next()){var p=f.value,m=_O.decode(c.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),v=new Ln(m.getText(),m.getRawBytes(),void 0,p,Fe.PDF_417);v.putMetadata(Dn.ERROR_CORRECTION_LEVEL,m.getECLevel());var x=m.getOther();x!=null&&v.putMetadata(Dn.PDF417_EXTRA_METADATA,x),s.push(v)}}catch(w){i={error:w}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return s.map(function(w){return w})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?rt.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*pt.MODULES_IN_CODEWORD/pt.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*pt.MODULES_IN_CODEWORD/pt.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*pt.MODULES_IN_CODEWORD/pt.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*pt.MODULES_IN_CODEWORD/pt.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),EO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ex=(function(n){EO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(er),Cx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rw=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Mt.TRY_HARDER)!==void 0,r=e==null?null:e.get(Mt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===Fe.UPC_A||s===Fe.UPC_E||s===Fe.EAN_13||s===Fe.EAN_8||s===Fe.CODABAR||s===Fe.CODE_39||s===Fe.CODE_93||s===Fe.CODE_128||s===Fe.ITF||s===Fe.RSS_14||s===Fe.RSS_EXPANDED});a&&!t&&i.push(new $o(e)),r.includes(Fe.QR_CODE)&&i.push(new Xu),r.includes(Fe.DATA_MATRIX)&&i.push(new Wu),r.includes(Fe.AZTEC)&&i.push(new Gu),r.includes(Fe.PDF_417)&&i.push(new Yu),a&&t&&i.push(new $o(e))}i.length===0&&(t||i.push(new $o(e)),i.push(new Xu),i.push(new Wu),i.push(new Gu),i.push(new Yu),t&&i.push(new $o(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=Cx(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new Ex("No readers where selected, nothing can be read.");try{for(var i=Cx(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(c){if(c instanceof Ex)continue}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ne("No MultiFormat Readers were able to detect the code.")},n})(),CO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){CO(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new Rw;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(us);var AO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){AO(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Yu,t)||this}return e})(us);var TO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){TO(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Xu,t)||this}return e})(us);var z0;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(z0||(z0={}));const wu=z0;var Nw=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new aa(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=r.multiply(new aa(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Ue("No error correction bytes");var r=e.length-t;if(r<=0)throw new Ue("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);jt.arraycopy(e,0,a,0,r);var s=new aa(this.field,a);s=s.multiplyByMonomial(t,1);for(var c=s.divide(i)[1],d=c.getCoefficients(),f=t-d.length,p=0;p<f;p++)e[r+p]=0;jt.arraycopy(d,0,e,r+f,d.length)},n})(),ml=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var c=r[s],d=0;d<i-1;d++){var f=c[d];f===c[d+1]&&f===r[s+1][d]&&f===r[s+1][d+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var c=0;c<i;c++){var d=r[s];c+6<i&&d[c]===1&&d[c+1]===0&&d[c+2]===1&&d[c+3]===1&&d[c+4]===1&&d[c+5]===0&&d[c+6]===1&&(n.isWhiteHorizontal(d,c-4,c)||n.isWhiteHorizontal(d,c+7,c+11))&&t++,s+6<a&&r[s][c]===1&&r[s+1][c]===0&&r[s+2][c]===1&&r[s+3][c]===1&&r[s+4][c]===1&&r[s+5][c]===0&&r[s+6][c]===1&&(n.isWhiteVertical(r,c,s-4,s)||n.isWhiteVertical(r,c,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var c=r[s],d=0;d<i;d++)c[d]===1&&t++;var f=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-f)*10/f);return p*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Ue("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),c=0;c<i;c++){for(var d=0,f=-1,p=0;p<a;p++){var m=t?s[c][p]:s[p][c];m===f?d++:(d>=5&&(r+=n.N1+(d-5)),d=1,f=m)}d>=5&&(r+=n.N1+(d-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),OO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RO=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=OO(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;vn.fill(s,e)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=t.bytes[r],c=0,d=this.width;c<d;++c)if(a[c]!==s[c])return!1;return!0},n.prototype.toString=function(){for(var e=new nt,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),V0=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new nt;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),NO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Lt=(function(n){NO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(er),Ax=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Sn;n.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var c=i.get(i.getSize()-1-a),d=n.TYPE_INFO_COORDINATES[a],f=d[0],p=d[1];if(r.setBoolean(f,p,c),a<8){var m=r.getWidth()-a-1,v=8;r.setBoolean(m,v,c)}else{var m=8,v=r.getHeight()-7+(a-8);r.setBoolean(m,v,c)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Sn;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var c=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,c),t.setBoolean(t.getHeight()-11+s,a,c)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,s=r.getWidth()-1,c=r.getHeight()-1;s>0;){for(s===6&&(s-=1);c>=0&&c<r.getHeight();){for(var d=0;d<2;++d){var f=s-d;if(n.isEmpty(r.get(f,c))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&ml.getDataMaskBit(t,f,c)&&(p=!p),r.setBoolean(f,c,p)}}c+=a}a=-a,c+=a,s-=2}if(i!==e.getSize())throw new Lt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-rt.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Ue("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!V0.isValidMaskPattern(t))throw new Lt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new Sn;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Lt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Lt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Lt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Lt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Lt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var c=i[a];if(c>=0)for(var d=0;d!==s;d++){var f=i[d];f>=0&&n.isEmpty(t.get(f,c))&&n.embedPositionAdjustmentPattern(f-2,c-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),IO=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),Tx=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return ml.applyMaskPenaltyRule1(e)+ml.applyMaskPenaltyRule2(e)+ml.applyMaskPenaltyRule3(e)+ml.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(wu.CHARACTER_SET)!==void 0;a&&(i=r.get(wu.CHARACTER_SET).toString());var s=this.chooseMode(e,i),c=new Sn;if(s===Ft.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var d=mn.getCharacterSetECIByName(i);d!==void 0&&this.appendECI(d,c)}this.appendModeInfo(s,c);var f=new Sn;this.appendBytes(e,s,f,i);var p;if(r!==null&&r.get(wu.QR_VERSION)!==void 0){var m=Number.parseInt(r.get(wu.QR_VERSION).toString(),10);p=Ga.getVersionForNumber(m);var v=this.calculateBitsNeeded(s,c,f,p);if(!this.willFit(v,p,t))throw new Lt("Data too big for requested version")}else p=this.recommendVersion(t,s,c,f);var x=new Sn;x.appendBitArray(c);var w=s===Ft.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(w,p,s,x),x.appendBitArray(f);var _=p.getECBlocksForLevel(t),S=p.getTotalCodewords()-_.getTotalECCodewords();this.terminateBits(S,x);var E=this.interleaveWithECBytes(x,p.getTotalCodewords(),S,_.getNumBlocks()),A=new V0;A.setECLevel(t),A.setMode(s),A.setVersion(p);var T=p.getDimensionForVersion(),R=new RO(T,T),I=this.chooseMaskPattern(E,t,p,R);return A.setMaskPattern(I),Ax.buildMatrix(E,t,p,I,R),A.setMatrix(R),A},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Ga.getVersionForNumber(1)),s=this.chooseVersion(a,e),c=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(c,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),mn.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Ft.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var c=e.charAt(a);if(n.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return Ft.BYTE}return i?Ft.ALPHANUMERIC:r?Ft.NUMERIC:Ft.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Nr.encode(e,mn.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,c=0;c<V0.NUM_MASK_PATTERNS;c++){Ax.buildMatrix(e,t,r,c,i);var d=this.calculateMaskPenalty(i);d<a&&(a=d,s=c)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Ga.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Lt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),s=a.getTotalECCodewords(),c=i-s,d=(e+7)/8;return c>=d},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Lt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Lt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,s){if(i>=r)throw new Lt("Block ID too large");var c=e%r,d=r-c,f=Math.floor(e/r),p=f+1,m=Math.floor(t/r),v=m+1,x=f-m,w=p-v;if(x!==w)throw new Lt("EC bytes mismatch");if(r!==d+c)throw new Lt("RS blocks mismatch");if(e!==(m+x)*d+(v+w)*c)throw new Lt("Total bytes mismatch");i<d?(a[0]=m,s[0]=x):(a[0]=v,s[0]=w)},n.interleaveWithECBytes=function(e,t,r,i){var a,s,c,d;if(e.getSizeInBytes()!==r)throw new Lt("Number of bits and data bytes does not match");for(var f=0,p=0,m=0,v=new Array,x=0;x<i;++x){var w=new Int32Array(1),_=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,x,w,_);var S=w[0],E=new Uint8Array(S);e.toBytes(8*f,E,0,S);var A=n.generateECBytes(E,_[0]);v.push(new IO(E,A)),p=Math.max(p,S),m=Math.max(m,A.length),f+=w[0]}if(r!==f)throw new Lt("Data bytes does not match offset");for(var T=new Sn,x=0;x<p;++x)try{for(var R=(a=void 0,Tx(v)),I=R.next();!I.done;I=R.next()){var M=I.value,E=M.getDataBytes();x<E.length&&T.appendBits(E[x],8)}}catch(ae){a={error:ae}}finally{try{I&&!I.done&&(s=R.return)&&s.call(R)}finally{if(a)throw a.error}}for(var x=0;x<m;++x)try{for(var U=(c=void 0,Tx(v)),H=U.next();!H.done;H=U.next()){var M=H.value,A=M.getErrorCorrectionBytes();x<A.length&&T.appendBits(A[x],8)}}catch(ae){c={error:ae}}finally{try{H&&!H.done&&(d=U.return)&&d.call(U)}finally{if(c)throw c.error}}if(t!==T.getSizeInBytes())throw new Lt("Interleaving error: "+t+" and "+T.getSizeInBytes()+" differ.");return T},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new Nw(Qn.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Lt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Ft.NUMERIC:n.appendNumericBytes(e,r);break;case Ft.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Ft.BYTE:n.append8BitBytes(e,r,i);break;case Ft.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Lt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),c=n.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+c,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Lt;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new Lt;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Nr.encode(e,r)}catch(d){throw new Lt(d)}for(var a=0,s=i.length;a!==s;a++){var c=i[a];t.appendBits(c,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Nr.encode(e,mn.SJIS)}catch(m){throw new Lt(m)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,c=r[a+1]&255,d=s<<8&4294967295|c,f=-1;if(d>=33088&&d<=40956?f=d-33088:d>=57408&&d<=60351&&(f=d-49472),f===-1)throw new Lt("Invalid byte sequence");var p=(f>>8)*192+(f&255);t.appendBits(p,13)}},n.appendECI=function(e,t){t.appendBits(Ft.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=mn.UTF8.getName(),n})();var DO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){DO(e,n);function e(t,r,i,a,s,c,d,f){var p=n.call(this,c,d)||this;if(p.yuvData=t,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=s,a+c>r||s+d>i)throw new Ue("Crop rectangle does not fit within image data.");return f&&p.reverseHorizontal(c,d),p}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ue("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return jt.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return jt.arraycopy(this.yuvData,s,a,0,i),a;for(var c=0;c<r;c++){var d=c*t;jt.arraycopy(this.yuvData,s,a,d,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,c=0;c<r;c++){for(var d=c*t,f=0;f<t;f++){var p=a[s+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[d+f]=4278190080|p*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var c=s+t/2,d=s,f=s+t-1;d<c;d++,f--){var p=i[d];i[d]=i[f],i[f]=p}},e.prototype.invert=function(){return new ld(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Ul);var kO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){kO(e,n);function e(t,r,i,a,s,c,d){var f=n.call(this,r,i)||this;if(f.dataWidth=a,f.dataHeight=s,f.left=c,f.top=d,t.BYTES_PER_ELEMENT===4){for(var p=r*i,m=new Uint8ClampedArray(p),v=0;v<p;v++){var x=t[v],w=x>>16&255,_=x>>7&510,S=x&255;m[v]=(w+_+S)/4&255}f.luminances=m}else f.luminances=t;if(a===void 0&&(f.dataWidth=r),s===void 0&&(f.dataHeight=i),c===void 0&&(f.left=0),d===void 0&&(f.top=0),f.left+r>f.dataWidth||f.top+i>f.dataHeight)throw new Ue("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ue("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return jt.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return jt.arraycopy(this.luminances,s,a,0,i),a;for(var c=0;c<r;c++){var d=c*t;jt.arraycopy(this.luminances,s,a,d,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new ld(this)},e})(Ul);var jO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),MO=(function(n){jO(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(mn),PO=(function(){function n(){}return n.ISO_8859_1=mn.ISO8859_1,n})(),H0,BO=301,LO=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=BO);return{LOG:n,ALOG:e}};H0=LO([],[]),H0.LOG;H0.ALOG;var Ox;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Ox||(Ox={}));var Rx=129,Iw=230,FO=231,UO=235,zO=236,VO=237,HO=238,$O=239,GO=240,Zh=254,qO=254,Nx="[)>05",Ix="[)>06",Dx="",At=0,Nn=1,Vn=2,pn=3,_n=4,Pn=5,WO=(function(){function n(){}return n.prototype.getEncodingMode=function(){return At},n.prototype.encode=function(e){var t=zr.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Pn:e.writeCodeword(FO),e.signalEncoderChange(Pn);return;case Nn:e.writeCodeword(Iw),e.signalEncoderChange(Nn);return;case pn:e.writeCodeword(HO),e.signalEncoderChange(pn);break;case Vn:e.writeCodeword($O),e.signalEncoderChange(Vn);break;case _n:e.writeCodeword(GO),e.signalEncoderChange(_n);break;default:throw new Error("Illegal mode: "+i)}else zr.isExtendedASCII(r)?(e.writeCodeword(UO),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(zr.isDigit(e)&&zr.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),XO=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Pn},n.prototype.encode=function(e){var t=new nt;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(At);break}}var a=t.length()-1,s=1,c=e.getCodewordCount()+a+s;e.updateSymbolInfo(c);var d=e.getSymbolInfo().getDataCapacity()-c>0;if(e.hasMoreCharacters()||d)if(a<=249)t.setCharAt(0,ht.getCharAt(a));else if(a<=1555)t.setCharAt(0,ht.getCharAt(Math.floor(a/250)+249)),t.insert(1,ht.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,r=t.length();f<r;f++)e.writeCodeword(this.randomize255State(t.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),D1=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Nn},n.prototype.encodeMaximal=function(e){for(var t=new nt,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var c=Math.floor(t.length()/3*2),d=Math.floor(e.getCodewordCount()+c+1);e.updateSymbolInfo(d);var f=e.getSymbolInfo().getDataCapacity()-d,p=Math.floor(t.length()%3);(p===2&&f!==2||p===1&&(r>3||f!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Iw),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new nt;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var d=new nt;for(t.length()%3===2&&c!==2&&(i=this.backtrackOneCharacter(e,t,d,i));t.length()%3===1&&(i>3||c!==1);)i=this.backtrackOneCharacter(e,t,d,i);break}var f=t.length();if(f%3===0){var p=zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(At);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var c=e.getCurrentChar();return i=this.encodeChar(c,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Zh)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Zh),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(Zh)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(At)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new nt;return a.append(r),a.append(i),a.toString()},n})(),YO=(function(){function n(){}return n.prototype.getEncodingMode=function(){return _n},n.prototype.encode=function(e){for(var t=new nt;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(At);break}}}t.append(ht.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,c=this.encodeToCodewords(t.toString()),d=!e.hasMoreCharacters(),f=d&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+c.length))}f?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(c)}finally{e.signalEncoderChange(At)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(ht.getCharAt(e-64)):zr.illegalCharacter(ht.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,c=(r<<18)+(i<<12)+(a<<6)+s,d=c>>16&255,f=c>>8&255,p=c&255,m=new nt;return m.append(d),t>=2&&m.append(f),t>=3&&m.append(p),m.toString()},n})(),KO=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ZO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bt=(function(){function n(e,t,r,i,a,s,c,d){c===void 0&&(c=0),d===void 0&&(d=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=c,this.rsBlockError=d}return n.lookup=function(e,t,r,i,a){var s,c;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var d=ZO(JO),f=d.next();!f.done;f=d.next()){var p=f.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(m){s={error:m}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),QO=(function(n){KO(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(bt),JO=[new bt(!1,3,5,8,8,1),new bt(!1,5,7,10,10,1),new bt(!0,5,7,16,6,1),new bt(!1,8,10,12,12,1),new bt(!0,10,11,14,6,2),new bt(!1,12,12,14,14,1),new bt(!0,16,14,24,10,1),new bt(!1,18,14,16,16,1),new bt(!1,22,18,18,18,1),new bt(!0,22,18,16,10,2),new bt(!1,30,20,20,20,1),new bt(!0,32,24,16,14,2),new bt(!1,36,24,22,22,1),new bt(!1,44,28,24,24,1),new bt(!0,49,28,22,14,2),new bt(!1,62,36,14,14,4),new bt(!1,86,42,16,16,4),new bt(!1,114,48,18,18,4),new bt(!1,144,56,20,20,4),new bt(!1,174,68,22,22,4),new bt(!1,204,84,24,24,4,102,42),new bt(!1,280,112,14,14,16,140,56),new bt(!1,368,144,16,16,16,92,36),new bt(!1,456,192,18,18,16,114,48),new bt(!1,576,224,20,20,16,144,56),new bt(!1,696,272,22,22,16,174,68),new bt(!1,816,336,24,24,16,136,56),new bt(!1,1050,408,18,18,36,175,68),new bt(!1,1304,496,20,20,36,163,62),new QO],e5=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(c){return c.charCodeAt(0)}),r=new nt,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new nt,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=bt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),t5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),n5=(function(n){t5(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return pn},e.prototype.encode=function(t){for(var r=new nt;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var s=zr.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(At);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):zr.illegalCharacter(ht.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(qO),t.getNewEncoding()<0&&t.signalEncoderChange(At)},e})(D1),r5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),i5=(function(n){r5(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Vn},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(D1),zr=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=Rx+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new D1,c=[new WO,s,new i5,new n5,new YO,new XO],d=new e5(e);d.setSymbolShape(t),d.setSizeConstraints(r,i),e.startsWith(Nx)&&e.endsWith(Dx)?(d.writeCodeword(zO),d.setSkipAtEnd(2),d.pos+=Nx.length):e.startsWith(Ix)&&e.endsWith(Dx)&&(d.writeCodeword(VO),d.setSkipAtEnd(2),d.pos+=Ix.length);var f=At;for(a&&(s.encodeMaximal(d),f=d.getNewEncoding(),d.resetEncoderSignal());d.hasMoreCharacters();)c[f].encode(d),d.getNewEncoding()>=0&&(f=d.getNewEncoding(),d.resetEncoderSignal());var p=d.getCodewordCount();d.updateSymbolInfo();var m=d.getSymbolInfo().getDataCapacity();p<m&&f!==At&&f!==Pn&&f!==_n&&d.writeCodeword("þ");var v=d.getCodewords();for(v.length()<m&&v.append(Rx);v.length()<m;)v.append(this.randomize253State(v.length()+1));return d.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===pn&&i===pn){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return At}else if(r===_n&&i===_n){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return At}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===At?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),c=[];;){if(t+a===e.length){vn.fill(s,0),vn.fill(c,0);var d=this.findMinimums(i,c,rt.MAX_VALUE,s),f=this.getMinimumCount(s);if(c[At]===d)return At;if(f===1){if(s[Pn]>0)return Pn;if(s[_n]>0)return _n;if(s[Vn]>0)return Vn;if(s[pn]>0)return pn}return Nn}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[At]+=.5:this.isExtendedASCII(p)?(i[At]=Math.ceil(i[At]),i[At]+=2):(i[At]=Math.ceil(i[At]),i[At]++),this.isNativeC40(p)?i[Nn]+=2/3:this.isExtendedASCII(p)?i[Nn]+=8/3:i[Nn]+=4/3,this.isNativeText(p)?i[Vn]+=2/3:this.isExtendedASCII(p)?i[Vn]+=8/3:i[Vn]+=4/3,this.isNativeX12(p)?i[pn]+=2/3:this.isExtendedASCII(p)?i[pn]+=13/3:i[pn]+=10/3,this.isNativeEDIFACT(p)?i[_n]+=3/4:this.isExtendedASCII(p)?i[_n]+=17/4:i[_n]+=13/4,this.isSpecialB256(p)?i[Pn]+=4:i[Pn]++,a>=4){if(vn.fill(s,0),vn.fill(c,0),this.findMinimums(i,c,rt.MAX_VALUE,s),c[At]<this.min(c[Pn],c[Nn],c[Vn],c[pn],c[_n]))return At;if(c[Pn]<c[At]||c[Pn]+1<this.min(c[Nn],c[Vn],c[pn],c[_n]))return Pn;if(c[_n]+1<this.min(c[Pn],c[Nn],c[Vn],c[pn],c[At]))return _n;if(c[Vn]+1<this.min(c[Pn],c[Nn],c[_n],c[pn],c[At]))return Vn;if(c[pn]+1<this.min(c[Pn],c[Nn],c[_n],c[Vn],c[At]))return pn;if(c[Nn]+1<this.min(c[At],c[Pn],c[_n],c[Vn])){if(c[Nn]<c[pn])return Nn;if(c[Nn]===c[pn]){for(var m=t+a+1;m<e.length;){var v=e.charCodeAt(m);if(this.isX12TermSep(v))return pn;if(!this.isNativeX12(v))break;m++}return Nn}}}}},n.min=function(e,t,r,i,a){var s=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);r>s&&(r=s,vn.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=rt.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),Qh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kx=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Nr.encode(e,this.charset)!=null}catch{return!1}},n})(),a5=(function(){function n(e,t,r){var i,a,s,c,d,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(q){return new kx(MO.forName(q))}),this.encoders=[];var p=[];p.push(new kx(PO.ISO_8859_1));for(var m=t!=null&&t.name.startsWith("UTF"),v=0;v<e.length;v++){var x=!1;try{for(var w=(i=void 0,Qh(p)),_=w.next();!_.done;_=w.next()){var S=_.value,E=e.charAt(v),A=E.charCodeAt(0);if(A===r||S.canEncode(E)){x=!0;break}}}catch(q){i={error:q}}finally{try{_&&!_.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}if(!x)try{for(var T=(s=void 0,Qh(this.ENCODERS)),R=T.next();!R.done;R=T.next()){var S=R.value;if(S.canEncode(e.charAt(v))){p.push(S),x=!0;break}}}catch(q){s={error:q}}finally{try{R&&!R.done&&(c=T.return)&&c.call(T)}finally{if(s)throw s.error}}x||(m=!0)}if(p.length===1&&!m)this.encoders=[p[0]];else{this.encoders=[];var I=0;try{for(var M=Qh(p),U=M.next();!U.done;U=M.next()){var S=U.value;this.encoders[I++]=S}}catch(q){d={error:q}}finally{try{U&&!U.done&&(f=M.return)&&f.call(M)}finally{if(d)throw d.error}}}var H=-1;if(t!=null){for(var v=0;v<this.encoders.length;v++)if(this.encoders[v]!=null&&t.name===this.encoders[v].name){H=v;break}}this.priorityEncoderIndex=H}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Nr.encode(ht.getCharAt(e),this.encoders[t].name)},n})(),o5=3,s5=(function(){function n(e,t,r){this.fnc1=r;var i=new a5(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new nt,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,s){var c=e.charAt(i).charCodeAt(0),d=0,f=t.length();t.getPriorityEncoderIndex()>=0&&(c===s||t.canEncode(c,t.getPriorityEncoderIndex()))&&(d=t.getPriorityEncoderIndex(),f=d+1);for(var p=d;p<f;p++)(c===s||t.canEncode(c,p))&&this.addEdge(r,i+1,new jx(c,t,p,a,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new jx[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var s=1;s<=i;s++){for(var c=0;c<t.length();c++)a[s][c]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][c],r);for(var c=0;c<t.length();c++)a[s-1][c]=null}for(var d=-1,f=rt.MAX_VALUE,c=0;c<t.length();c++)if(a[i][c]!=null){var p=a[i][c];p.cachedTotalSize<f&&(f=p.cachedTotalSize,d=c)}if(d<0)throw new Error('Failed to encode "'+e+'"');for(var m=[],v=a[i][d];v!=null;){if(v.isFNC1())m.unshift(1e3);else for(var x=t.encode(v.c,v.encoderIndex),s=x.length-1;s>=0;s--)m.unshift(x[s]&255);var w=v.previous===null?0:v.previous.encoderIndex;w!==v.encoderIndex&&m.unshift(256+t.getECIValue(v.encoderIndex)),v=v.previous}for(var _=[],s=0;s<_.length;s++)_[s]=m[s];return _},n})(),jx=(function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,c=i===null?0:i.encoderIndex;c!==r&&(s+=o5),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),l5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var Mx;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(Mx||(Mx={}));(function(n){l5(e,n);function e(t,r,i,a,s){var c=n.call(this,t,r,i)||this;return c.shape=a,c.macroId=s,c}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(s5);var c5=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),Px=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),u5=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),d5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),k1=(function(n){d5(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+rt.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(u5),f5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),h5=(function(n){f5(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(k1);function p5(n,e,t){return new h5(n,e,t)}function dl(n,e,t){return new k1(n,e,t)}var g5=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],oa=0,Ku=1,Or=2,Dw=3,Kr=4,m5=new k1(null,0,0),Jh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],v5=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function y5(n){var e,t;try{for(var r=v5(n),i=r.next();!i.done;i=r.next()){var a=i.value;vn.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[oa][Kr]=0,n[Ku][Kr]=0,n[Ku][oa]=28,n[Dw][Kr]=0,n[Or][Kr]=0,n[Or][oa]=15,n}var kw=y5(vn.createInt32Array(6,6)),x5=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b5=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Jh[this.mode][e];i=dl(i,a&65535,a>>16),r+=a>>16}var s=e===Or?4:5;return i=dl(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===Or?4:5;return r=dl(r,kw[this.mode][e],i),r=dl(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Kr||this.mode===Or){var a=Jh[r][oa];t=dl(t,a&65535,a>>16),i+=a>>16,r=oa}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new n(t,r,this.binaryShiftByteCount+1,i+s);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=p5(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Jh[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new Sn;try{for(var c=x5(i),d=c.next();!d.done;d=c.next()){var f=d.value;f.appendTo(s,e)}}catch(p){t={error:p}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return ht.format("%s bits=%d bytes=%d",g5[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(m5,oa,0,0),n})();function w5(n){var e=ht.getCharCode(" "),t=ht.getCharCode("."),r=ht.getCharCode(",");n[oa][e]=1;for(var i=ht.getCharCode("Z"),a=ht.getCharCode("A"),s=a;s<=i;s++)n[oa][s]=s-a+2;n[Ku][e]=1;for(var c=ht.getCharCode("z"),d=ht.getCharCode("a"),s=d;s<=c;s++)n[Ku][s]=s-d+2;n[Or][e]=1;for(var f=ht.getCharCode("9"),p=ht.getCharCode("0"),s=p;s<=f;s++)n[Or][s]=s-p+2;n[Or][r]=12,n[Or][t]=13;for(var m=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],v=0;v<m.length;v++)n[Dw][ht.getCharCode(m[v])]=v;for(var x=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],v=0;v<x.length;v++)ht.getCharCode(x[v])>0&&(n[Kr][ht.getCharCode(x[v])]=v);return n}var e0=w5(vn.createInt32Array(5,256)),_u=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_5=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=ht.getCharCode(" "),t=ht.getCharCode(`
`),r=Px.singletonList(b5.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ht.getCharCode("\r"):a=s===t?2:0;break;case ht.getCharCode("."):a=s===e?3:0;break;case ht.getCharCode(","):a=s===e?4:0;break;case ht.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var c=Px.min(r,function(d,f){return d.getBitCount()-f.getBitCount()});return c.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var s=_u(e),c=s.next();!c.done;c=s.next()){var d=c.value;this.updateStateForChar(d,t,a)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=e0[e.getMode()][i]>0,s=null,c=0;c<=Kr;c++){var d=e0[c][i];if(d>0){if(s==null&&(s=e.endBinaryShift(t)),!a||c===e.getMode()||c===Or){var f=s.latchAndAppend(c,d);r.push(f)}if(!a&&kw[e.getMode()][c]>=0){var p=s.shiftAndAppend(c,d);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||e0[e.getMode()][i]===0){var m=e.addBinaryShiftChar(t);r.push(m)}},n.updateStateListForPair=function(e,t,r){var i,a,s=[];try{for(var c=_u(e),d=c.next();!d.done;d=c.next()){var f=d.value;this.updateStateForPair(f,t,r,s)}}catch(p){i={error:p}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Kr,r)),e.getMode()!==Kr&&i.push(a.shiftAndAppend(Kr,r)),r===3||r===4){var s=a.latchAndAppend(Or,16-r).latchAndAppend(Or,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var c=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(c)}},n.simplifyStates=function(e){var t,r,i,a,s=[];try{for(var c=_u(e),d=c.next();!d.done;d=c.next()){var f=d.value,p=!0,m=function(S){if(S.isBetterThanOrEqualTo(f))return p=!1,"break";f.isBetterThanOrEqualTo(S)&&(s=s.filter(function(E){return E!==S}))};try{for(var v=(i=void 0,_u(s)),x=v.next();!x.done;x=v.next()){var w=x.value,_=m(w);if(_==="break")break}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}p&&s.push(f)}}catch(S){t={error:S}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return s},n})(),S5=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new _5(e).encode(),a=rt.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,c,d,f,p,m;if(r!==n.DEFAULT_AZTEC_LAYERS){if(c=r<0,d=Math.abs(r),d>(c?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Ue(ht.format("Illegal value %s for layers",r));f=n.totalBitsInLayer(d,c),p=n.WORD_SIZE[d];var v=f-f%p;if(m=n.stuffBits(i,p),m.getSize()+a>v)throw new Ue("Data to large for user specified layer");if(c&&m.getSize()>p*64)throw new Ue("Data to large for user specified layer")}else{p=0,m=null;for(var x=0;;x++){if(x>n.MAX_NB_BITS)throw new Ue("Data too large for an Aztec code");if(c=x<=3,d=c?x+1:x,f=n.totalBitsInLayer(d,c),!(s>f)){(m==null||p!==n.WORD_SIZE[d])&&(p=n.WORD_SIZE[d],m=n.stuffBits(i,p));var v=f-f%p;if(!(c&&m.getSize()>p*64)&&m.getSize()+a<=v)break}}}var w=n.generateCheckWords(m,f,p),_=m.getSize()/p,S=n.generateModeMessage(c,d,_),E=(c?11:14)+d*4,A=new Int32Array(E),T;if(c){T=E;for(var x=0;x<A.length;x++)A[x]=x}else{T=E+1+2*rt.truncDivision(rt.truncDivision(E,2)-1,15);for(var R=rt.truncDivision(E,2),I=rt.truncDivision(T,2),x=0;x<R;x++){var M=x+rt.truncDivision(x,15);A[R-x-1]=I-M-1,A[R+x]=I+M+1}}for(var U=new Jr(T),x=0,H=0;x<d;x++){for(var q=(d-x)*4+(c?9:12),ae=0;ae<q;ae++)for(var ce=ae*2,F=0;F<2;F++)w.get(H+ce+F)&&U.set(A[x*2+F],A[x*2+ae]),w.get(H+q*2+ce+F)&&U.set(A[x*2+ae],A[E-1-x*2-F]),w.get(H+q*4+ce+F)&&U.set(A[E-1-x*2-F],A[E-1-x*2-ae]),w.get(H+q*6+ce+F)&&U.set(A[E-1-x*2-ae],A[x*2+F]);H+=q*8}if(n.drawModeMessage(U,c,T,S),c)n.drawBullsEye(U,rt.truncDivision(T,2),5);else{n.drawBullsEye(U,rt.truncDivision(T,2),7);for(var x=0,ae=0;x<rt.truncDivision(E,2)-1;x+=15,ae+=16)for(var F=rt.truncDivision(T,2)&1;F<T;F+=2)U.set(rt.truncDivision(T,2)-ae,F),U.set(rt.truncDivision(T,2)+ae,F),U.set(F,rt.truncDivision(T,2)-ae),U.set(F,rt.truncDivision(T,2)+ae)}var ee=new c5;return ee.setCompact(c),ee.setSize(T),ee.setLayers(d),ee.setCodeWords(_),ee.setMatrix(U),ee},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Sn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=rt.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var c=a-3+s;i.get(s)&&e.set(c,a-5),i.get(s+7)&&e.set(a+5,c),i.get(20-s)&&e.set(c,a+5),i.get(27-s)&&e.set(a-5,c)}else for(var s=0;s<10;s++){var c=a-5+s+rt.truncDivision(s,5);i.get(s)&&e.set(c,a-7),i.get(s+10)&&e.set(a+7,c),i.get(29-s)&&e.set(c,a+7),i.get(39-s)&&e.set(a-7,c)}},n.generateCheckWords=function(e,t,r){var i,a,s=e.getSize()/r,c=new Nw(n.getGF(r)),d=rt.truncDivision(t,r),f=n.bitsToWords(e,r,d);c.encode(f,d-s);var p=t%r,m=new Sn;m.appendBits(0,p);try{for(var v=S5(Array.from(f)),x=v.next();!x.done;x=v.next()){var w=x.value;m.appendBits(w,r)}}catch(_){i={error:_}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}return m},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var c=0,d=0;d<t;d++)c|=e.get(a*t+d)?1<<t-d-1:0;i[a]=c}return i},n.getGF=function(e){switch(e){case 4:return Qn.AZTEC_PARAM;case 6:return Qn.AZTEC_DATA_6;case 8:return Qn.AZTEC_DATA_8;case 10:return Qn.AZTEC_DATA_10;case 12:return Qn.AZTEC_DATA_12;default:throw new Ue("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Sn,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var c=0,d=0;d<t;d++)(s+d>=i||e.get(s+d))&&(c|=1<<t-1-d);(c&a)===a?(r.appendBits(c&a,t),s--):(c&a)===0?(r.appendBits(c|1,t),s--):r.appendBits(c,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var E5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),C5=(function(n){E5(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),s=0,c=0,d=t.length;s<d;s+=4,c++){var f=void 0,p=t[s+3];if(p===0)f=255;else{var m=t[s],v=t[s+1],x=t[s+2];f=306*m+601*v+117*x+512>>10}a[c]=f}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ue("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new ld(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*s),d=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*s);r.width=c,r.height=d;var f=r.getContext("2d");if(!f)throw new Error("Could not create a Canvas Context element.");return f.translate(c/2,d/2),f.rotate(i),f.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(Ul);function jw(){return typeof navigator<"u"}function A5(){return jw()&&!!navigator.mediaDevices}function T5(){return!!(A5()&&navigator.mediaDevices.enumerateDevices)}var qo=function(){return qo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},qo.apply(this,arguments)},Ht=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function c(p){try{f(r.next(p))}catch(m){s(m)}}function d(p){try{f(r.throw(p))}catch(m){s(m)}}function f(p){p.done?a(p.value):i(p.value).then(c,d)}f((r=r.apply(n,e||[])).next())})},$t=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(f){return function(p){return d([f,p])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(p){f=[6,p],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},t0=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O5={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},ds=(function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=qo(qo({},O5),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(Mt.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return Ht(this,void 0,void 0,function(){return $t(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=t0(i),s=a.next();!s.done;s=a.next()){var c=s.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new tn("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new tn("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new C5(e),r=new yw(t);return new vw(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new tn("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return Ht(this,void 0,void 0,function(){var t;return $t(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return Ht(this,void 0,void 0,function(){var e,t,r,i,a,s,c,d,f,p,m,v;return $t(this,function(x){switch(x.label){case 0:if(!jw())throw new Error("Can't enumerate devices, navigator is not present.");if(!T5())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=x.sent(),t=[];try{for(r=t0(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(c=a.deviceId||a.id,d=a.label||"Video device ".concat(t.length+1),f=a.groupId,p={deviceId:c,label:d,kind:s,groupId:f},t.push(p))}catch(w){m={error:w}}finally{try{i&&!i.done&&(v=r.return)&&v.call(r)}finally{if(m)throw m.error}}return[2,t]}})})},n.findDeviceById=function(e){return Ht(this,void 0,void 0,function(){var t;return $t(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return Ht(this,void 0,void 0,function(){var r;return $t(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,s){var c=setTimeout(function(){n.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",d))},t),d=function(){n.tryPlayVideo(e).then(function(f){clearTimeout(c),e.removeEventListener("canplay",d),a(f)})};e.addEventListener("canplay",d)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),Ht(this,void 0,void 0,function(){var i;return $t(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",s),r())},i),s=function(){clearTimeout(a),e.removeEventListener("load",s),t()};e.addEventListener("load",s)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new tn("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return Ht(this,void 0,void 0,function(){var t;return $t(this,function(r){switch(r.label){case 0:if(!e)throw new tn("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return Ht(this,void 0,void 0,function(){var t;return $t(this,function(r){switch(r.label){case 0:if(!e)throw new tn("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Ht(this,void 0,void 0,function(){var i,a;return $t(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,s.sent()];case 4:throw a=s.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return Ht(this,void 0,void 0,function(){var i,a,s,c,d,f,p,m,v,x=this;return $t(this,function(w){switch(w.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=w.sent(),s=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},c=this.scan(a,r,s),d=e.getVideoTracks(),f=qo(qo({},c),{stop:function(){c.stop()},streamVideoConstraintsApply:function(_,S){return Ht(this,void 0,void 0,function(){var E,A,T,R,I,M,U;return $t(this,function(H){switch(H.label){case 0:E=S?d.filter(S):d,H.label=1;case 1:H.trys.push([1,6,7,8]),A=t0(E),T=A.next(),H.label=2;case 2:return T.done?[3,5]:(R=T.value,[4,R.applyConstraints(_)]);case 3:H.sent(),H.label=4;case 4:return T=A.next(),[3,2];case 5:return[3,8];case 6:return I=H.sent(),M={error:I},[3,8];case 7:try{T&&!T.done&&(U=A.return)&&U.call(A)}finally{if(M)throw M.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(_){return d.find(_).getConstraints()},streamVideoSettingsGet:function(_){return d.find(_).getSettings()},streamVideoCapabilitiesGet:function(_){return d.find(_).getCapabilities()}}),p=n.mediaStreamIsTorchCompatible(e),p&&(m=d?.find(function(_){return n.mediaStreamIsTorchCompatibleTrack(_)}),v=function(_){return Ht(x,void 0,void 0,function(){return $t(this,function(S){switch(S.label){case 0:return[4,n.mediaStreamSetTorch(m,_)];case 1:return S.sent(),[2]}})})},f.switchTorch=v,f.stop=function(){return Ht(x,void 0,void 0,function(){return $t(this,function(_){switch(_.label){case 0:return c.stop(),[4,v(!1)];case 1:return _.sent(),[2]}})})}),[2,f]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Ht(this,void 0,void 0,function(){var i,a;return $t(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return Ht(this,void 0,void 0,function(){var r,i;return $t(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new tn("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return Ht(this,void 0,void 0,function(){var r,i,a,s;return $t(this,function(c){switch(c.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new tn("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return c.sent(),s=this.scan(r,t,i),[2,s]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Ht(this,void 0,void 0,function(){var r;return $t(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Ht(this,void 0,void 0,function(){var r,i,a;return $t(this,function(s){switch(s.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=s.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Ht(this,void 0,void 0,function(){var r,i;return $t(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return Ht(this,void 0,void 0,function(){var t,r;return $t(this,function(i){switch(i.label){case 0:if(!e)throw new tn("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return Ht(this,void 0,void 0,function(){var t,r;return $t(this,function(i){switch(i.label){case 0:if(!e)throw new tn("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(s,c){a.scan(e,function(d,f,p){if(d){s(d),p.stop();return}if(f){if(f instanceof ne&&t||f instanceof un&&r||f instanceof be&&i)return;p.stop(),c(f)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),s;try{s=a.getContext("2d",{willReadFrequently:!0})}catch{s=a.getContext("2d")}if(!s)throw new Error("Couldn't create canvas for visual element scan.");var c=function(){s=void 0,a=void 0},d=!1,f,p=function(){d=!0,clearTimeout(f),c(),r&&r()},m={stop:p},v=function(){if(!d)try{n.drawImageOnCanvas(s,e);var x=i.decodeFromCanvas(a);t(x,void 0,m),f=setTimeout(v,i.options.delayBetweenScanSuccess)}catch(E){t(void 0,E,m);var w=E instanceof un,_=E instanceof be,S=E instanceof ne;if(w||_||S){f=setTimeout(v,i.options.delayBetweenScanAttempts);return}c(),r&&r(E)}};return v(),m},n.prototype._decodeOnLoadImage=function(e){return Ht(this,void 0,void 0,function(){var t;return $t(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return Ht(this,void 0,void 0,function(){var t;return $t(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n})(),R5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){R5(e,n);function e(t,r){return n.call(this,new Gu,t,r)||this}return e})(ds);var N5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){N5(e,n);function e(t,r){return n.call(this,new $o(t),t,r)||this}return e})(ds);var I5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){I5(e,n);function e(t,r){return n.call(this,new Wu,t,r)||this}return e})(ds);var D5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){D5(e,n);function e(t,r){var i=this,a=new Rw;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Mt.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(ds);var k5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){k5(e,n);function e(t,r){return n.call(this,new Yu,t,r)||this}return e})(ds);var j5=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Mw=(function(n){j5(e,n);function e(t,r){return n.call(this,new Xu,t,r)||this}return e})(ds);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P5=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Bx=n=>{const e=P5(n);return e.charAt(0).toUpperCase()+e.slice(1)},Pw=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),B5=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=O.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...c},d)=>O.createElement("svg",{ref:d,...L5,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Pw("lucide",i),...!a&&!B5(c)&&{"aria-hidden":"true"},...c},[...s.map(([f,p])=>O.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(n,e)=>{const t=O.forwardRef(({className:r,...i},a)=>O.createElement(F5,{ref:a,iconNode:e,className:Pw(`lucide-${M5(Bx(n))}`,`lucide-${n}`,r),...i}));return t.displayName=Bx(n),t};/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ku=Ye("bell",U5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],V5=Ye("brain",z5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M14.564 14.558a3 3 0 1 1-4.122-4.121",key:"1rnrzw"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M20 20H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 .819-.175",key:"1x3arw"}],["path",{d:"M9.695 4.024A2 2 0 0 1 10.004 4h3.993a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v7.344",key:"1i84u0"}]],Lx=Ye("camera-off",H5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Fx=Ye("camera",$5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],q5=Ye("chevron-left",G5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],X5=Ye("chevron-right",W5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],fr=Ye("circle-alert",Y5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rs=Ye("circle-check-big",K5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Q5=Ye("circle-plus",Z5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v.832",key:"1ujtp2"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h2",key:"qvpao1"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],Ux=Ye("clipboard-clock",J5);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Bw=Ye("clipboard-list",eR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Lw=Ye("clock-4",tR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M12 6v6l1.56.78",key:"14ed3g"}],["path",{d:"M13.227 21.925a10 10 0 1 1 8.767-9.588",key:"jwkls1"}],["path",{d:"m14 18 4-4 4 4",key:"ftkppy"}],["path",{d:"M18 22v-8",key:"su0gjh"}]],Fw=Ye("clock-arrow-up",nR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],iR=Ye("clock",rR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],oR=Ye("graduation-cap",aR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]],lR=Ye("hand-coins",sR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],uR=Ye("house",cR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],j1=Ye("image",dR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],M1=Ye("list",fR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],_i=Ye("loader",hR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M5 12h14",key:"1ays0h"}]],gR=Ye("minus",pR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],vR=Ye("moon",mR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Uw=Ye("package",yR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bR=Ye("plus",xR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_R=Ye("refresh-cw",wR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Su=Ye("rotate-ccw",SR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],CR=Ye("save",ER);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],TR=Ye("scan-line",AR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],RR=Ye("settings",OR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Ba=Ye("shopping-cart",NR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],DR=Ye("sun",IR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ju=Ye("trash-2",kR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],MR=Ye("undo-2",jR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],BR=Ye("upload",PR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],FR=Ye("user-check",LR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$0=Ye("user",UR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],zw=Ye("utensils-crossed",zR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],HR=Ye("utensils",VR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],GR=Ye("volume-2",$R);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],WR=Ye("volume-x",qR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dt=Ye("x",XR);/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],KR=Ye("zap",YR),Vw=O.createContext(),Hw=()=>{const n=O.useContext(Vw);if(!n)throw new Error("useCanteenStatus must be used within a CanteenStatusProvider");return n},ZR=({children:n})=>{const[e,t]=O.useState("closed"),[r,i]=O.useState(!0),[a,s]=O.useState(!1),[c,d]=O.useState(null);O.useEffect(()=>{f()},[]);const f=async(S=!1)=>{if(!S&&c&&Date.now()-c<2e3){console.log("⏭️ Skipping fetch - recent update detected");return}console.log("🔍 Fetching canteen status from database...");try{const{data:E,error:A}=await xe.from("canteen_status").select("is_open, updated_at").eq("id",1).single();if(A)throw console.error("❌ Error fetching canteen status:",A),A;const T=E?.is_open?"open":"closed";console.log("📊 Fetched status from database:",T),console.log("📊 Raw data:",E),console.log("📊 is_open value:",E?.is_open,"type:",typeof E?.is_open),t(T)}catch(E){console.error("❌ Error fetching canteen status:",E),t("closed")}finally{i(!1)}},p=async S=>{console.log("🔄 updateStatus called! New status:",S),s(!0);const E=e;console.log("📝 Setting optimistic status to:",S),t(S),d(Date.now());try{console.log(`💾 Updating database: is_open = ${S==="open"}`),console.log("🔍 Checking current database state...");const{data:A,error:T}=await xe.from("canteen_status").select("*").eq("id",1).single();if(T)throw console.error("❌ Error fetching current data:",T),new Error(`Cannot fetch current data: ${T.message}`);console.log("📊 Current database data:",A),console.log(`🔄 Attempting to update is_open to: ${S==="open"}`);const{data:R,error:I}=await xe.from("canteen_status").update({is_open:S==="open",updated_at:new Date().toISOString()}).eq("id",1).select();if(I)throw console.error("❌ Database update error:",I),console.error("❌ Full error details:",JSON.stringify(I,null,2)),I;console.log("✅ Database update response:",R),console.log("✅ Database update response length:",R?.length),R&&R.length>0?(console.log("✅ Updated row data:",R[0]),console.log("✅ Updated is_open value:",R[0].is_open)):console.warn("⚠️ Update response is empty - this might indicate the update failed"),console.log(`✅ Database updated successfully! is_open = ${S==="open"}`);const{data:M,error:U}=await xe.from("canteen_status").select("is_open").eq("id",1).single();U?console.warn("Could not verify database update:",U):console.log(`🔍 Database verification: is_open = ${M.is_open}`),console.log("✅ Update completed successfully - UI should reflect the change")}catch(A){throw console.error("❌ Error updating canteen status:",A),console.log("🔄 Reverting to previous status:",E),t(E),A}finally{s(!1)}},_={status:e,loading:r,updating:a,isOpen:e==="open",isClosed:e==="closed",updateStatus:p,toggleStatus:async()=>{const S=e==="open"?"closed":"open";console.log("🔄 toggleStatus called! Current:",e,"New:",S),await p(S)},fetchCanteenStatus:f,refreshStatus:async()=>{console.log("🔄 Manual refresh requested"),i(!0),await f(!0)}};return g.jsx(Vw.Provider,{value:_,children:n})},P1=O.createContext({});function B1(n){const e=O.useRef(null);return e.current===null&&(e.current=n()),e.current}const L1=typeof window<"u",$w=L1?O.useLayoutEffect:O.useEffect,dd=O.createContext(null);function F1(n,e){n.indexOf(e)===-1&&n.push(e)}function U1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Si=(n,e,t)=>t>e?e:t<n?n:t;let z1=()=>{};const Ei={},Gw=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function qw(n){return typeof n=="object"&&n!==null}const Ww=n=>/^0[^.\s]+$/u.test(n);function V1(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ir=n=>n,QR=(n,e)=>t=>e(n(t)),Vl=(...n)=>n.reduce(QR),Nl=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class H1{constructor(){this.subscriptions=[]}add(e){return F1(this.subscriptions,e),()=>U1(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Zr=n=>n*1e3,Rr=n=>n/1e3;function Xw(n,e){return e?n*(1e3/e):0}const Yw=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,JR=1e-7,eN=12;function tN(n,e,t,r,i){let a,s,c=0;do s=e+(t-e)/2,a=Yw(s,r,i)-n,a>0?t=s:e=s;while(Math.abs(a)>JR&&++c<eN);return s}function Hl(n,e,t,r){if(n===e&&t===r)return Ir;const i=a=>tN(a,0,1,n,t);return a=>a===0||a===1?a:Yw(i(a),e,r)}const Kw=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Zw=n=>e=>1-n(1-e),Qw=Hl(.33,1.53,.69,.99),$1=Zw(Qw),Jw=Kw($1),e_=n=>(n*=2)<1?.5*$1(n):.5*(2-Math.pow(2,-10*(n-1))),G1=n=>1-Math.sin(Math.acos(n)),t_=Zw(G1),n_=Kw(G1),nN=Hl(.42,0,1,1),rN=Hl(0,0,.58,1),r_=Hl(.42,0,.58,1),iN=n=>Array.isArray(n)&&typeof n[0]!="number",i_=n=>Array.isArray(n)&&typeof n[0]=="number",aN={linear:Ir,easeIn:nN,easeInOut:r_,easeOut:rN,circIn:G1,circInOut:n_,circOut:t_,backIn:$1,backInOut:Jw,backOut:Qw,anticipate:e_},oN=n=>typeof n=="string",zx=n=>{if(i_(n)){z1(n.length===4);const[e,t,r,i]=n;return Hl(e,t,r,i)}else if(oN(n))return aN[n];return n},Eu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function sN(n,e){let t=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(p){s.has(p)&&(f.schedule(p),n()),p(c)}const f={schedule:(p,m=!1,v=!1)=>{const w=v&&i?t:r;return m&&s.add(p),w.has(p)||w.add(p),p},cancel:p=>{r.delete(p),s.delete(p)},process:p=>{if(c=p,i){a=!0;return}i=!0,[t,r]=[r,t],t.forEach(d),t.clear(),i=!1,a&&(a=!1,f.process(p))}};return f}const lN=40;function a_(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,s=Eu.reduce((T,R)=>(T[R]=sN(a),T),{}),{setup:c,read:d,resolveKeyframes:f,preUpdate:p,update:m,preRender:v,render:x,postRender:w}=s,_=()=>{const T=Ei.useManualTiming?i.timestamp:performance.now();t=!1,Ei.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,lN),1)),i.timestamp=T,i.isProcessing=!0,c.process(i),d.process(i),f.process(i),p.process(i),m.process(i),v.process(i),x.process(i),w.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(_))},S=()=>{t=!0,r=!0,i.isProcessing||n(_)};return{schedule:Eu.reduce((T,R)=>{const I=s[R];return T[R]=(M,U=!1,H=!1)=>(t||S(),I.schedule(M,U,H)),T},{}),cancel:T=>{for(let R=0;R<Eu.length;R++)s[Eu[R]].cancel(T)},state:i,steps:s}}const{schedule:zt,cancel:sa,state:In,steps:n0}=a_(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ir,!0);let Mu;function cN(){Mu=void 0}const Jn={now:()=>(Mu===void 0&&Jn.set(In.isProcessing||Ei.useManualTiming?In.timestamp:performance.now()),Mu),set:n=>{Mu=n,queueMicrotask(cN)}},o_=n=>e=>typeof e=="string"&&e.startsWith(n),q1=o_("--"),uN=o_("var(--"),W1=n=>uN(n)?dN.test(n.split("/*")[0].trim()):!1,dN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fs={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Il={...fs,transform:n=>Si(0,1,n)},Cu={...fs,default:1},wl=n=>Math.round(n*1e5)/1e5,X1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fN(n){return n==null}const hN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Y1=(n,e)=>t=>!!(typeof t=="string"&&hN.test(t)&&t.startsWith(n)||e&&!fN(t)&&Object.prototype.hasOwnProperty.call(t,e)),s_=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,a,s,c]=r.match(X1);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(s),alpha:c!==void 0?parseFloat(c):1}},pN=n=>Si(0,255,n),r0={...fs,transform:n=>Math.round(pN(n))},Ha={test:Y1("rgb","red"),parse:s_("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+r0.transform(n)+", "+r0.transform(e)+", "+r0.transform(t)+", "+wl(Il.transform(r))+")"};function gN(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const G0={test:Y1("#"),parse:gN,transform:Ha.transform},$l=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),na=$l("deg"),Qr=$l("%"),Ge=$l("px"),mN=$l("vh"),vN=$l("vw"),Vx={...Qr,parse:n=>Qr.parse(n)/100,transform:n=>Qr.transform(n*100)},Wo={test:Y1("hsl","hue"),parse:s_("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Qr.transform(wl(e))+", "+Qr.transform(wl(t))+", "+wl(Il.transform(r))+")"},cn={test:n=>Ha.test(n)||G0.test(n)||Wo.test(n),parse:n=>Ha.test(n)?Ha.parse(n):Wo.test(n)?Wo.parse(n):G0.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ha.transform(n):Wo.transform(n),getAnimatableNone:n=>{const e=cn.parse(n);return e.alpha=0,cn.transform(e)}},yN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function xN(n){return isNaN(n)&&typeof n=="string"&&(n.match(X1)?.length||0)+(n.match(yN)?.length||0)>0}const l_="number",c_="color",bN="var",wN="var(",Hx="${}",_N=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Dl(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(_N,d=>(cn.test(d)?(r.color.push(a),i.push(c_),t.push(cn.parse(d))):d.startsWith(wN)?(r.var.push(a),i.push(bN),t.push(d)):(r.number.push(a),i.push(l_),t.push(parseFloat(d))),++a,Hx)).split(Hx);return{values:t,split:c,indexes:r,types:i}}function u_(n){return Dl(n).values}function d_(n){const{split:e,types:t}=Dl(n),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const c=t[s];c===l_?a+=wl(i[s]):c===c_?a+=cn.transform(i[s]):a+=i[s]}return a}}const SN=n=>typeof n=="number"?0:cn.test(n)?cn.getAnimatableNone(n):n;function EN(n){const e=u_(n);return d_(n)(e.map(SN))}const la={test:xN,parse:u_,createTransformer:d_,getAnimatableNone:EN};function i0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function CN({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,a=0,s=0;if(!e)i=a=s=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;i=i0(d,c,n+1/3),a=i0(d,c,n),s=i0(d,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Zu(n,e){return t=>t>0?e:n}const qt=(n,e,t)=>n+(e-n)*t,a0=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},AN=[G0,Ha,Wo],TN=n=>AN.find(e=>e.test(n));function $x(n){const e=TN(n);if(!e)return!1;let t=e.parse(n);return e===Wo&&(t=CN(t)),t}const Gx=(n,e)=>{const t=$x(n),r=$x(e);if(!t||!r)return Zu(n,e);const i={...t};return a=>(i.red=a0(t.red,r.red,a),i.green=a0(t.green,r.green,a),i.blue=a0(t.blue,r.blue,a),i.alpha=qt(t.alpha,r.alpha,a),Ha.transform(i))},q0=new Set(["none","hidden"]);function ON(n,e){return q0.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function RN(n,e){return t=>qt(n,e,t)}function K1(n){return typeof n=="number"?RN:typeof n=="string"?W1(n)?Zu:cn.test(n)?Gx:DN:Array.isArray(n)?f_:typeof n=="object"?cn.test(n)?Gx:NN:Zu}function f_(n,e){const t=[...n],r=t.length,i=n.map((a,s)=>K1(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)t[s]=i[s](a);return t}}function NN(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=K1(n[i])(n[i],e[i]));return i=>{for(const a in r)t[a]=r[a](i);return t}}function IN(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=n.indexes[a][r[a]],c=n.values[s]??0;t[i]=c,r[a]++}return t}const DN=(n,e)=>{const t=la.createTransformer(e),r=Dl(n),i=Dl(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?q0.has(n)&&!i.values.length||q0.has(e)&&!r.values.length?ON(n,e):Vl(f_(IN(r,i),i.values),t):Zu(n,e)};function h_(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?qt(n,e,t):K1(n)(n,e)}const kN=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>zt.update(e,t),stop:()=>sa(e),now:()=>In.isProcessing?In.timestamp:Jn.now()}},p_=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)r+=Math.round(n(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Qu=2e4;function Z1(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Qu;)e+=t,r=n.next(e);return e>=Qu?1/0:e}function jN(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(Z1(r),Qu);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Rr(i)}}const MN=5;function g_(n,e,t){const r=Math.max(e-MN,0);return Xw(t-n(r),e-r)}const Kt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},o0=.001;function PN({duration:n=Kt.duration,bounce:e=Kt.bounce,velocity:t=Kt.velocity,mass:r=Kt.mass}){let i,a,s=1-e;s=Si(Kt.minDamping,Kt.maxDamping,s),n=Si(Kt.minDuration,Kt.maxDuration,Rr(n)),s<1?(i=f=>{const p=f*s,m=p*n,v=p-t,x=W0(f,s),w=Math.exp(-m);return o0-v/x*w},a=f=>{const m=f*s*n,v=m*t+t,x=Math.pow(s,2)*Math.pow(f,2)*n,w=Math.exp(-m),_=W0(Math.pow(f,2),s);return(-i(f)+o0>0?-1:1)*((v-x)*w)/_}):(i=f=>{const p=Math.exp(-f*n),m=(f-t)*n+1;return-o0+p*m},a=f=>{const p=Math.exp(-f*n),m=(t-f)*(n*n);return p*m});const c=5/n,d=LN(i,a,c);if(n=Zr(n),isNaN(d))return{stiffness:Kt.stiffness,damping:Kt.damping,duration:n};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:s*2*Math.sqrt(r*f),duration:n}}}const BN=12;function LN(n,e,t){let r=t;for(let i=1;i<BN;i++)r=r-n(r)/e(r);return r}function W0(n,e){return n*Math.sqrt(1-e*e)}const FN=["duration","bounce"],UN=["stiffness","damping","mass"];function qx(n,e){return e.some(t=>n[t]!==void 0)}function zN(n){let e={velocity:Kt.velocity,stiffness:Kt.stiffness,damping:Kt.damping,mass:Kt.mass,isResolvedFromDuration:!1,...n};if(!qx(n,UN)&&qx(n,FN))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,a=2*Si(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Kt.mass,stiffness:i,damping:a}}else{const t=PN(n);e={...e,...t,mass:Kt.mass},e.isResolvedFromDuration=!0}return e}function Ju(n=Kt.visualDuration,e=Kt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const a=t.keyframes[0],s=t.keyframes[t.keyframes.length-1],c={done:!1,value:a},{stiffness:d,damping:f,mass:p,duration:m,velocity:v,isResolvedFromDuration:x}=zN({...t,velocity:-Rr(t.velocity||0)}),w=v||0,_=f/(2*Math.sqrt(d*p)),S=s-a,E=Rr(Math.sqrt(d/p)),A=Math.abs(S)<5;r||(r=A?Kt.restSpeed.granular:Kt.restSpeed.default),i||(i=A?Kt.restDelta.granular:Kt.restDelta.default);let T;if(_<1){const I=W0(E,_);T=M=>{const U=Math.exp(-_*E*M);return s-U*((w+_*E*S)/I*Math.sin(I*M)+S*Math.cos(I*M))}}else if(_===1)T=I=>s-Math.exp(-E*I)*(S+(w+E*S)*I);else{const I=E*Math.sqrt(_*_-1);T=M=>{const U=Math.exp(-_*E*M),H=Math.min(I*M,300);return s-U*((w+_*E*S)*Math.sinh(H)+I*S*Math.cosh(H))/I}}const R={calculatedDuration:x&&m||null,next:I=>{const M=T(I);if(x)c.done=I>=m;else{let U=I===0?w:0;_<1&&(U=I===0?Zr(w):g_(T,I,M));const H=Math.abs(U)<=r,q=Math.abs(s-M)<=i;c.done=H&&q}return c.value=c.done?s:M,c},toString:()=>{const I=Math.min(Z1(R),Qu),M=p_(U=>R.next(I*U).value,I,30);return I+"ms "+M},toTransition:()=>{}};return R}Ju.applyToOptions=n=>{const e=jN(n,100,Ju);return n.ease=e.ease,n.duration=Zr(e.duration),n.type="keyframes",n};function X0({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:c,max:d,restDelta:f=.5,restSpeed:p}){const m=n[0],v={done:!1,value:m},x=H=>c!==void 0&&H<c||d!==void 0&&H>d,w=H=>c===void 0?d:d===void 0||Math.abs(c-H)<Math.abs(d-H)?c:d;let _=t*e;const S=m+_,E=s===void 0?S:s(S);E!==S&&(_=E-m);const A=H=>-_*Math.exp(-H/r),T=H=>E+A(H),R=H=>{const q=A(H),ae=T(H);v.done=Math.abs(q)<=f,v.value=v.done?E:ae};let I,M;const U=H=>{x(v.value)&&(I=H,M=Ju({keyframes:[v.value,w(v.value)],velocity:g_(T,H,v.value),damping:i,stiffness:a,restDelta:f,restSpeed:p}))};return U(0),{calculatedDuration:null,next:H=>{let q=!1;return!M&&I===void 0&&(q=!0,R(H),U(H)),I!==void 0&&H>=I?M.next(H-I):(!q&&R(H),v)}}}function VN(n,e,t){const r=[],i=t||Ei.mix||h_,a=n.length-1;for(let s=0;s<a;s++){let c=i(n[s],n[s+1]);if(e){const d=Array.isArray(e)?e[s]||Ir:e;c=Vl(d,c)}r.push(c)}return r}function HN(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const a=n.length;if(z1(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=VN(e,r,i),d=c.length,f=p=>{if(s&&p<n[0])return e[0];let m=0;if(d>1)for(;m<n.length-2&&!(p<n[m+1]);m++);const v=Nl(n[m],n[m+1],p);return c[m](v)};return t?p=>f(Si(n[0],n[a-1],p)):f}function $N(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Nl(0,e,r);n.push(qt(t,1,i))}}function GN(n){const e=[0];return $N(e,n.length-1),e}function qN(n,e){return n.map(t=>t*e)}function WN(n,e){return n.map(()=>e||r_).splice(0,n.length-1)}function _l({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=iN(r)?r.map(zx):zx(r),a={done:!1,value:e[0]},s=qN(t&&t.length===e.length?t:GN(e),n),c=HN(s,e,{ease:Array.isArray(i)?i:WN(e,i)});return{calculatedDuration:n,next:d=>(a.value=c(d),a.done=d>=n,a)}}const XN=n=>n!==null;function Q1(n,{repeat:e,repeatType:t="loop"},r,i=1){const a=n.filter(XN),c=i<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const YN={decay:X0,inertia:X0,tween:_l,keyframes:_l,spring:Ju};function m_(n){typeof n.type=="string"&&(n.type=YN[n.type])}class J1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const KN=n=>n/100;class ep extends J1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Jn.now()&&this.tick(Jn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;m_(e);const{type:t=_l,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:c}=e;const d=t||_l;d!==_l&&typeof c[0]!="number"&&(this.mixKeyframes=Vl(KN,h_(c[0],c[1])),c=[0,100]);const f=d({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-s})),f.calculatedDuration===null&&(f.calculatedDuration=Z1(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:p,repeat:m,repeatType:v,repeatDelay:x,type:w,onUpdate:_,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const E=this.currentTime-f*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let T=this.currentTime,R=r;if(m){const H=Math.min(this.currentTime,i)/c;let q=Math.floor(H),ae=H%1;!ae&&H>=1&&(ae=1),ae===1&&q--,q=Math.min(q,m+1),!!(q%2)&&(v==="reverse"?(ae=1-ae,x&&(ae-=x/c)):v==="mirror"&&(R=s)),T=Si(0,1,ae)*c}const I=A?{done:!1,value:p[0]}:R.next(T);a&&(I.value=a(I.value));let{done:M}=I;!A&&d!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const U=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return U&&w!==X0&&(I.value=Q1(p,this.options,S,this.speed)),_&&_(I.value),U&&this.finish(),I}then(e,t){return this.finished.then(e,t)}get duration(){return Rr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Rr(e)}get time(){return Rr(this.currentTime)}set time(e){e=Zr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Jn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Rr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=kN,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Jn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function ZN(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const $a=n=>n*180/Math.PI,Y0=n=>{const e=$a(Math.atan2(n[1],n[0]));return K0(e)},QN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Y0,rotateZ:Y0,skewX:n=>$a(Math.atan(n[1])),skewY:n=>$a(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},K0=n=>(n=n%360,n<0&&(n+=360),n),Wx=Y0,Xx=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Yx=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),JN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Xx,scaleY:Yx,scale:n=>(Xx(n)+Yx(n))/2,rotateX:n=>K0($a(Math.atan2(n[6],n[5]))),rotateY:n=>K0($a(Math.atan2(-n[2],n[0]))),rotateZ:Wx,rotate:Wx,skewX:n=>$a(Math.atan(n[4])),skewY:n=>$a(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Z0(n){return n.includes("scale")?1:0}function Q0(n,e){if(!n||n==="none")return Z0(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=JN,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=QN,i=c}if(!i)return Z0(e);const a=r[e],s=i[1].split(",").map(tI);return typeof a=="function"?a(s):s[a]}const eI=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Q0(t,e)};function tI(n){return parseFloat(n.trim())}const hs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ps=new Set(hs),Kx=n=>n===fs||n===Ge,nI=new Set(["x","y","z"]),rI=hs.filter(n=>!nI.has(n));function iI(n){const e=[];return rI.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const qa={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Q0(e,"x"),y:(n,{transform:e})=>Q0(e,"y")};qa.translateX=qa.x;qa.translateY=qa.y;const Wa=new Set;let J0=!1,e1=!1,t1=!1;function v_(){if(e1){const n=Array.from(Wa).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=iI(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}e1=!1,J0=!1,Wa.forEach(n=>n.complete(t1)),Wa.clear()}function y_(){Wa.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(e1=!0)})}function aI(){t1=!0,y_(),v_(),t1=!1}class tp{constructor(e,t,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Wa.add(this),J0||(J0=!0,zt.read(y_),zt.resolveKeyframes(v_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const c=r.readValue(t,s);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}ZN(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Wa.delete(this)}cancel(){this.state==="scheduled"&&(Wa.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oI=n=>n.startsWith("--");function sI(n,e,t){oI(e)?n.style.setProperty(e,t):n.style[e]=t}const lI=V1(()=>window.ScrollTimeline!==void 0),cI={};function uI(n,e){const t=V1(n);return()=>cI[e]??t()}const x_=uI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),vl=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Zx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vl([0,.65,.55,1]),circOut:vl([.55,0,1,.45]),backIn:vl([.31,.01,.66,-.59]),backOut:vl([.33,1.53,.69,.99])};function b_(n,e){if(n)return typeof n=="function"?x_()?p_(n,e):"ease-out":i_(n)?vl(n):Array.isArray(n)?n.map(t=>b_(t,e)||Zx.easeOut):Zx[n]}function dI(n,e,t,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:c="easeOut",times:d}={},f=void 0){const p={[e]:t};d&&(p.offset=d);const m=b_(c,i);Array.isArray(m)&&(p.easing=m);const v={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),n.animate(p,v)}function w_(n){return typeof n=="function"&&"applyToOptions"in n}function fI({type:n,...e}){return w_(n)&&x_()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class hI extends J1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,z1(typeof e.type!="string");const f=fI(e);this.animation=dI(t,r,i,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=Q1(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):sI(t,r,p),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Rr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Rr(e)}get time(){return Rr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Zr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&lI()?(this.animation.timeline=e,Ir):t(this)}}const __={anticipate:e_,backInOut:Jw,circInOut:n_};function pI(n){return n in __}function gI(n){typeof n.ease=="string"&&pI(n.ease)&&(n.ease=__[n.ease])}const Qx=10;class mI extends hI{constructor(e){gI(e),m_(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new ep({...s,autoplay:!1}),d=Zr(this.finishedTime??this.time);t.setWithVelocity(c.sample(d-Qx).value,c.sample(d).value,Qx),c.stop()}}const Jx=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(la.test(n)||n==="0")&&!n.startsWith("url("));function vI(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function yI(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],s=Jx(i,e),c=Jx(a,e);return!s||!c?!1:vI(n)||(t==="spring"||w_(t))&&r}function n1(n){n.duration=0,n.type="keyframes"}const xI=new Set(["opacity","clipPath","filter","transform"]),bI=V1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function wI(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:a,type:s}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return bI()&&t&&xI.has(t)&&(t!=="transform"||!f)&&!d&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const _I=40;class SI extends J1{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:c,name:d,motionValue:f,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Jn.now();const v={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:a,repeatType:s,name:d,motionValue:f,element:p,...m},x=p?.KeyframeResolver||tp;this.keyframeResolver=new x(c,(w,_,S)=>this.onKeyframesResolved(w,_,v,!S),d,f,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:c,delay:d,isHandoff:f,onUpdate:p}=r;this.resolvedAt=Jn.now(),yI(e,a,s,c)||((Ei.instantAnimations||!d)&&p?.(Q1(e,r,t)),e[0]=e[e.length-1],n1(r),r.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>_I?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},x=!f&&wI(v)?new mI({...v,element:v.motionValue.owner.current}):new ep(v);x.finished.then(()=>this.notifyFinished()).catch(Ir),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),aI()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const EI=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CI(n){const e=EI.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function S_(n,e,t=1){const[r,i]=CI(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return Gw(s)?parseFloat(s):s}return W1(i)?S_(i,e,t+1):i}function np(n,e){return n?.[e]??n?.default??n}const E_=new Set(["width","height","top","left","right","bottom",...hs]),AI={test:n=>n==="auto",parse:n=>n},C_=n=>e=>e.test(n),A_=[fs,Ge,Qr,na,vN,mN,AI],e2=n=>A_.find(C_(n));function TI(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Ww(n):!0}const OI=new Set(["brightness","contrast","saturate","opacity"]);function RI(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(X1)||[];if(!r)return n;const i=t.replace(r,"");let a=OI.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+i+")"}const NI=/\b([a-z-]*)\(.*?\)/gu,r1={...la,getAnimatableNone:n=>{const e=n.match(NI);return e?e.map(RI).join(" "):n}},t2={...fs,transform:Math.round},II={rotate:na,rotateX:na,rotateY:na,rotateZ:na,scale:Cu,scaleX:Cu,scaleY:Cu,scaleZ:Cu,skew:na,skewX:na,skewY:na,distance:Ge,translateX:Ge,translateY:Ge,translateZ:Ge,x:Ge,y:Ge,z:Ge,perspective:Ge,transformPerspective:Ge,opacity:Il,originX:Vx,originY:Vx,originZ:Ge},rp={borderWidth:Ge,borderTopWidth:Ge,borderRightWidth:Ge,borderBottomWidth:Ge,borderLeftWidth:Ge,borderRadius:Ge,radius:Ge,borderTopLeftRadius:Ge,borderTopRightRadius:Ge,borderBottomRightRadius:Ge,borderBottomLeftRadius:Ge,width:Ge,maxWidth:Ge,height:Ge,maxHeight:Ge,top:Ge,right:Ge,bottom:Ge,left:Ge,padding:Ge,paddingTop:Ge,paddingRight:Ge,paddingBottom:Ge,paddingLeft:Ge,margin:Ge,marginTop:Ge,marginRight:Ge,marginBottom:Ge,marginLeft:Ge,backgroundPositionX:Ge,backgroundPositionY:Ge,...II,zIndex:t2,fillOpacity:Il,strokeOpacity:Il,numOctaves:t2},DI={...rp,color:cn,backgroundColor:cn,outlineColor:cn,fill:cn,stroke:cn,borderColor:cn,borderTopColor:cn,borderRightColor:cn,borderBottomColor:cn,borderLeftColor:cn,filter:r1,WebkitFilter:r1},T_=n=>DI[n];function O_(n,e){let t=T_(n);return t!==r1&&(t=la),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const kI=new Set(["auto","none","0"]);function jI(n,e,t){let r=0,i;for(;r<n.length&&!i;){const a=n[r];typeof a=="string"&&!kI.has(a)&&Dl(a).values.length&&(i=n[r]),r++}if(i&&t)for(const a of e)n[a]=O_(t,i)}class MI extends tp{constructor(e,t,r,i,a){super(e,t,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),W1(f))){const p=S_(f,t.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!E_.has(r)||e.length!==2)return;const[i,a]=e,s=e2(i),c=e2(a);if(s!==c)if(Kx(s)&&Kx(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else qa[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||TI(e[i]))&&r.push(i);r.length&&jI(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qa[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=qa[t](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function PI(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=t?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const R_=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function N_(n){return qw(n)&&"offsetHeight"in n}const n2=30,BI=n=>!isNaN(parseFloat(n));class LI{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Jn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Jn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=BI(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new H1);const r=this.events[e].add(t);return e==="change"?()=>{r(),zt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>n2)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,n2);return Xw(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function is(n,e){return new LI(n,e)}const{schedule:ip}=a_(queueMicrotask,!1),Br={x:!1,y:!1};function I_(){return Br.x||Br.y}function FI(n){return n==="x"||n==="y"?Br[n]?null:(Br[n]=!0,()=>{Br[n]=!1}):Br.x||Br.y?null:(Br.x=Br.y=!0,()=>{Br.x=Br.y=!1})}function D_(n,e){const t=PI(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function r2(n){return!(n.pointerType==="touch"||I_())}function UI(n,e,t={}){const[r,i,a]=D_(n,t),s=c=>{if(!r2(c))return;const{target:d}=c,f=e(d,c);if(typeof f!="function"||!d)return;const p=m=>{r2(m)&&(f(m),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,i)};return r.forEach(c=>{c.addEventListener("pointerenter",s,i)}),a}const k_=(n,e)=>e?n===e?!0:k_(n,e.parentElement):!1,ap=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,zI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function VI(n){return zI.has(n.tagName)||n.tabIndex!==-1}const Pu=new WeakSet;function i2(n){return e=>{e.key==="Enter"&&n(e)}}function s0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const HI=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=i2(()=>{if(Pu.has(t))return;s0(t,"down");const i=i2(()=>{s0(t,"up")}),a=()=>s0(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function a2(n){return ap(n)&&!I_()}function $I(n,e,t={}){const[r,i,a]=D_(n,t),s=c=>{const d=c.currentTarget;if(!a2(c))return;Pu.add(d);const f=e(d,c),p=(x,w)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),Pu.has(d)&&Pu.delete(d),a2(x)&&typeof f=="function"&&f(x,{success:w})},m=x=>{p(x,d===window||d===document||t.useGlobalTarget||k_(d,x.target))},v=x=>{p(x,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",v,i)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",s,i),N_(c)&&(c.addEventListener("focus",f=>HI(f,i)),!VI(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function j_(n){return qw(n)&&"ownerSVGElement"in n}function GI(n){return j_(n)&&n.tagName==="svg"}const Bn=n=>!!(n&&n.getVelocity),qI=[...A_,cn,la],WI=n=>qI.find(C_(n)),op=O.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function o2(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function XI(...n){return e=>{let t=!1;const r=n.map(i=>{const a=o2(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():o2(n[i],null)}}}}function YI(...n){return O.useCallback(XI(...n),n)}class KI extends O.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=N_(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ZI({children:n,isPresent:e,anchorX:t,root:r}){const i=O.useId(),a=O.useRef(null),s=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=O.useContext(op),d=YI(a,n?.ref);return O.useInsertionEffect(()=>{const{width:f,height:p,top:m,left:v,right:x}=s.current;if(e||!a.current||!f||!p)return;const w=t==="left"?`left: ${v}`:`right: ${x}`;a.current.dataset.motionPopId=i;const _=document.createElement("style");c&&(_.nonce=c);const S=r??document.head;return S.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${p}px !important;
            ${w}px !important;
            top: ${m}px !important;
          }
        `),()=>{S.contains(_)&&S.removeChild(_)}},[e]),g.jsx(KI,{isPresent:e,childRef:a,sizeRef:s,children:O.cloneElement(n,{ref:d})})}const QI=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:c,root:d})=>{const f=B1(JI),p=O.useId();let m=!0,v=O.useMemo(()=>(m=!1,{id:p,initial:e,isPresent:t,custom:i,onExitComplete:x=>{f.set(x,!0);for(const w of f.values())if(!w)return;r&&r()},register:x=>(f.set(x,!1),()=>f.delete(x))}),[t,f,r]);return a&&m&&(v={...v}),O.useMemo(()=>{f.forEach((x,w)=>f.set(w,!1))},[t]),O.useEffect(()=>{!t&&!f.size&&r&&r()},[t]),s==="popLayout"&&(n=g.jsx(ZI,{isPresent:t,anchorX:c,root:d,children:n})),g.jsx(dd.Provider,{value:v,children:n})};function JI(){return new Map}function M_(n=!0){const e=O.useContext(dd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,a=O.useId();O.useEffect(()=>{if(n)return i(a)},[n]);const s=O.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,s]:[!0]}const Au=n=>n.key||"";function s2(n){const e=[];return O.Children.forEach(n,t=>{O.isValidElement(t)&&e.push(t)}),e}const kn=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:c="left",root:d})=>{const[f,p]=M_(s),m=O.useMemo(()=>s2(n),[n]),v=s&&!f?[]:m.map(Au),x=O.useRef(!0),w=O.useRef(m),_=B1(()=>new Map),[S,E]=O.useState(m),[A,T]=O.useState(m);$w(()=>{x.current=!1,w.current=m;for(let M=0;M<A.length;M++){const U=Au(A[M]);v.includes(U)?_.delete(U):_.get(U)!==!0&&_.set(U,!1)}},[A,v.length,v.join("-")]);const R=[];if(m!==S){let M=[...m];for(let U=0;U<A.length;U++){const H=A[U],q=Au(H);v.includes(q)||(M.splice(U,0,H),R.push(H))}return a==="wait"&&R.length&&(M=R),T(s2(M)),E(m),null}const{forceRender:I}=O.useContext(P1);return g.jsx(g.Fragment,{children:A.map(M=>{const U=Au(M),H=s&&!f?!1:m===A||v.includes(U),q=()=>{if(_.has(U))_.set(U,!0);else return;let ae=!0;_.forEach(ce=>{ce||(ae=!1)}),ae&&(I?.(),T(w.current),s&&p?.(),r&&r())};return g.jsx(QI,{isPresent:H,initial:!x.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:d,onExitComplete:H?void 0:q,anchorX:c,children:M},U)})})},P_=O.createContext({strict:!1}),l2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},as={};for(const n in l2)as[n]={isEnabled:e=>l2[n].some(t=>!!e[t])};function eD(n){for(const e in n)as[e]={...as[e],...n[e]}}const tD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ed(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||tD.has(n)}let B_=n=>!ed(n);function nD(n){typeof n=="function"&&(B_=e=>e.startsWith("on")?!ed(e):n(e))}try{nD(require("@emotion/is-prop-valid").default)}catch{}function rD(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(B_(i)||t===!0&&ed(i)||!e&&!ed(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const fd=O.createContext({});function hd(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function kl(n){return typeof n=="string"||Array.isArray(n)}const sp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lp=["initial",...sp];function pd(n){return hd(n.animate)||lp.some(e=>kl(n[e]))}function L_(n){return!!(pd(n)||n.variants)}function iD(n,e){if(pd(n)){const{initial:t,animate:r}=n;return{initial:t===!1||kl(t)?t:void 0,animate:kl(r)?r:void 0}}return n.inherit!==!1?e:{}}function aD(n){const{initial:e,animate:t}=iD(n,O.useContext(fd));return O.useMemo(()=>({initial:e,animate:t}),[c2(e),c2(t)])}function c2(n){return Array.isArray(n)?n.join(" "):n}const jl={};function oD(n){for(const e in n)jl[e]=n[e],q1(e)&&(jl[e].isCSSVariable=!0)}function F_(n,{layout:e,layoutId:t}){return ps.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!jl[n]||n==="opacity")}const sD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lD=hs.length;function cD(n,e,t){let r="",i=!0;for(let a=0;a<lD;a++){const s=hs[a],c=n[s];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(s.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||t){const f=R_(c,rp[s]);if(!d){i=!1;const p=sD[s]||s;r+=`${p}(${f}) `}t&&(e[s]=f)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function cp(n,e,t){const{style:r,vars:i,transformOrigin:a}=n;let s=!1,c=!1;for(const d in e){const f=e[d];if(ps.has(d)){s=!0;continue}else if(q1(d)){i[d]=f;continue}else{const p=R_(f,rp[d]);d.startsWith("origin")?(c=!0,a[d]=p):r[d]=p}}if(e.transform||(s||t?r.transform=cD(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=a;r.transformOrigin=`${d} ${f} ${p}`}}const up=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function U_(n,e,t){for(const r in e)!Bn(e[r])&&!F_(r,t)&&(n[r]=e[r])}function uD({transformTemplate:n},e){return O.useMemo(()=>{const t=up();return cp(t,e,n),Object.assign({},t.vars,t.style)},[e])}function dD(n,e){const t=n.style||{},r={};return U_(r,t,n),Object.assign(r,uD(n,e)),r}function fD(n,e){const t={},r=dD(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const hD={offset:"stroke-dashoffset",array:"stroke-dasharray"},pD={offset:"strokeDashoffset",array:"strokeDasharray"};function gD(n,e,t=1,r=0,i=!0){n.pathLength=1;const a=i?hD:pD;n[a.offset]=Ge.transform(-r);const s=Ge.transform(e),c=Ge.transform(t);n[a.array]=`${s} ${c}`}function z_(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...c},d,f,p){if(cp(n,c,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:v}=n;m.transform&&(v.transform=m.transform,delete m.transform),(v.transform||m.transformOrigin)&&(v.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),v.transform&&(v.transformBox=p?.transformBox??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),r!==void 0&&(m.scale=r),i!==void 0&&gD(m,i,a,s,!1)}const V_=()=>({...up(),attrs:{}}),H_=n=>typeof n=="string"&&n.toLowerCase()==="svg";function mD(n,e,t,r){const i=O.useMemo(()=>{const a=V_();return z_(a,e,H_(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};U_(a,n.style,n),i.style={...a,...i.style}}return i}const vD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dp(n){return typeof n!="string"||n.includes("-")?!1:!!(vD.indexOf(n)>-1||/[A-Z]/u.test(n))}function yD(n,e,t,{latestValues:r},i,a=!1){const c=(dp(n)?mD:fD)(e,r,i,n),d=rD(e,typeof n=="string",a),f=n!==O.Fragment?{...d,...c,ref:t}:{},{children:p}=e,m=O.useMemo(()=>Bn(p)?p.get():p,[p]);return O.createElement(n,{...f,children:m})}function u2(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function fp(n,e,t,r){if(typeof e=="function"){const[i,a]=u2(r);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=u2(r);e=e(t!==void 0?t:n.custom,i,a)}return e}function Bu(n){return Bn(n)?n.get():n}function xD({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:bD(t,r,i,n),renderState:e()}}function bD(n,e,t,r){const i={},a=r(n,{});for(const v in a)i[v]=Bu(a[v]);let{initial:s,animate:c}=n;const d=pd(n),f=L_(n);e&&f&&!d&&n.inherit!==!1&&(s===void 0&&(s=e.initial),c===void 0&&(c=e.animate));let p=t?t.initial===!1:!1;p=p||s===!1;const m=p?c:s;if(m&&typeof m!="boolean"&&!hd(m)){const v=Array.isArray(m)?m:[m];for(let x=0;x<v.length;x++){const w=fp(n,v[x]);if(w){const{transitionEnd:_,transition:S,...E}=w;for(const A in E){let T=E[A];if(Array.isArray(T)){const R=p?T.length-1:0;T=T[R]}T!==null&&(i[A]=T)}for(const A in _)i[A]=_[A]}}}return i}const $_=n=>(e,t)=>{const r=O.useContext(fd),i=O.useContext(dd),a=()=>xD(n,e,r,i);return t?a():B1(a)};function hp(n,e,t){const{style:r}=n,i={};for(const a in r)(Bn(r[a])||e.style&&Bn(e.style[a])||F_(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const wD=$_({scrapeMotionValuesFromProps:hp,createRenderState:up});function G_(n,e,t){const r=hp(n,e,t);for(const i in n)if(Bn(n[i])||Bn(e[i])){const a=hs.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=n[i]}return r}const _D=$_({scrapeMotionValuesFromProps:G_,createRenderState:V_}),SD=Symbol.for("motionComponentSymbol");function Xo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function ED(n,e,t){return O.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Xo(t)&&(t.current=r))},[e])}const pp=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),CD="framerAppearId",q_="data-"+pp(CD),W_=O.createContext({});function AD(n,e,t,r,i){const{visualElement:a}=O.useContext(fd),s=O.useContext(P_),c=O.useContext(dd),d=O.useContext(op).reducedMotion,f=O.useRef(null);r=r||s.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,m=O.useContext(W_);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&TD(f.current,t,i,m);const v=O.useRef(!1);O.useInsertionEffect(()=>{p&&v.current&&p.update(t,c)});const x=t[q_],w=O.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return $w(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),w.current&&p.animationState&&p.animationState.animateChanges())}),O.useEffect(()=>{p&&(!w.current&&p.animationState&&p.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),w.current=!1),p.enteringChildren=void 0)}),p}function TD(n,e,t,r){const{layoutId:i,layout:a,drag:s,dragConstraints:c,layoutScroll:d,layoutRoot:f,layoutCrossfade:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:X_(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||c&&Xo(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:d,layoutRoot:f})}function X_(n){if(n)return n.options.allowProjection!==!1?n.projection:X_(n.parent)}function l0(n,{forwardMotionProps:e=!1}={},t,r){t&&eD(t);const i=dp(n)?_D:wD;function a(c,d){let f;const p={...O.useContext(op),...c,layoutId:OD(c)},{isStatic:m}=p,v=aD(c),x=i(c,m);if(!m&&L1){RD();const w=ND(p);f=w.MeasureLayout,v.visualElement=AD(n,x,p,r,w.ProjectionNode)}return g.jsxs(fd.Provider,{value:v,children:[f&&v.visualElement?g.jsx(f,{visualElement:v.visualElement,...p}):null,yD(n,c,ED(x,v.visualElement,d),x,m,e)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const s=O.forwardRef(a);return s[SD]=n,s}function OD({layoutId:n}){const e=O.useContext(P1).id;return e&&n!==void 0?e+"-"+n:n}function RD(n,e){O.useContext(P_).strict}function ND(n){const{drag:e,layout:t}=as;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function ID(n,e){if(typeof Proxy>"u")return l0;const t=new Map,r=(a,s)=>l0(a,s,n,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(t.has(s)||t.set(s,l0(s,void 0,n,e)),t.get(s))})}function Y_({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function DD({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function kD(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function c0(n){return n===void 0||n===1}function i1({scale:n,scaleX:e,scaleY:t}){return!c0(n)||!c0(e)||!c0(t)}function La(n){return i1(n)||K_(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function K_(n){return d2(n.x)||d2(n.y)}function d2(n){return n&&n!=="0%"}function td(n,e,t){const r=n-t,i=e*r;return t+i}function f2(n,e,t,r,i){return i!==void 0&&(n=td(n,i,r)),td(n,t,r)+e}function a1(n,e=0,t=1,r,i){n.min=f2(n.min,e,t,r,i),n.max=f2(n.max,e,t,r,i)}function Z_(n,{x:e,y:t}){a1(n.x,e.translate,e.scale,e.originPoint),a1(n.y,t.translate,t.scale,t.originPoint)}const h2=.999999999999,p2=1.0000000000001;function jD(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,s;for(let c=0;c<i;c++){a=t[c],s=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ko(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,Z_(n,s)),r&&La(a.latestValues)&&Ko(n,a.latestValues))}e.x<p2&&e.x>h2&&(e.x=1),e.y<p2&&e.y>h2&&(e.y=1)}function Yo(n,e){n.min=n.min+e,n.max=n.max+e}function g2(n,e,t,r,i=.5){const a=qt(n.min,n.max,i);a1(n,e,t,a,r)}function Ko(n,e){g2(n.x,e.x,e.scaleX,e.scale,e.originX),g2(n.y,e.y,e.scaleY,e.scale,e.originY)}function Q_(n,e){return Y_(kD(n.getBoundingClientRect(),e))}function MD(n,e,t){const r=Q_(n,t),{scroll:i}=e;return i&&(Yo(r.x,i.offset.x),Yo(r.y,i.offset.y)),r}const m2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zo=()=>({x:m2(),y:m2()}),v2=()=>({min:0,max:0}),Jt=()=>({x:v2(),y:v2()}),o1={current:null},J_={current:!1};function PD(){if(J_.current=!0,!!L1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>o1.current=n.matches;n.addEventListener("change",e),e()}else o1.current=!1}const BD=new WeakMap;function LD(n,e,t){for(const r in e){const i=e[r],a=t[r];if(Bn(i))n.addValue(r,i);else if(Bn(a))n.addValue(r,is(i,{owner:n}));else if(a!==i)if(n.hasValue(r)){const s=n.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=n.getStaticValue(r);n.addValue(r,is(s!==void 0?s:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const y2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class FD{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=tp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Jn.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,zt.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=s;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=pd(t),this.isVariantNode=L_(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in m){const x=m[v];d[v]!==void 0&&Bn(x)&&x.set(d[v])}}mount(e){this.current=e,BD.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),J_.current||PD(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:o1.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),sa(this.notifyUpdate),sa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ps.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&zt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in as){const t=as[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Jt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<y2.length;r++){const i=y2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=LD(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=is(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Gw(r)||Ww(r))?r=parseFloat(r):!WI(r)&&la.test(t)&&(r=O_(e,t)),this.setBaseTarget(e,Bn(r)?r.get():r)),Bn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const a=fp(this.props,t,this.presenceContext?.custom);a&&(r=a[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Bn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new H1),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){ip.render(this.render)}}class eS extends FD{constructor(){super(...arguments),this.KeyframeResolver=MI}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Bn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function tS(n,{style:e,vars:t},r,i){const a=n.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in t)a.setProperty(s,t[s])}function UD(n){return window.getComputedStyle(n)}class zD extends eS{constructor(){super(...arguments),this.type="html",this.renderInstance=tS}readValueFromInstance(e,t){if(ps.has(t))return this.projection?.isProjecting?Z0(t):eI(e,t);{const r=UD(e),i=(q1(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Q_(e,t)}build(e,t,r){cp(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return hp(e,t,r)}}const nS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function VD(n,e,t,r){tS(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(nS.has(i)?i:pp(i),e.attrs[i])}class HD extends eS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Jt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ps.has(t)){const r=T_(t);return r&&r.default||0}return t=nS.has(t)?t:pp(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return G_(e,t,r)}build(e,t,r){z_(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){VD(e,t,r,i)}mount(e){this.isSVGTag=H_(e.tagName),super.mount(e)}}const $D=(n,e)=>dp(n)?new HD(e):new zD(e,{allowProjection:n!==O.Fragment});function Jo(n,e,t){const r=n.getProps();return fp(r,e,t!==void 0?t:r.custom,n)}const s1=n=>Array.isArray(n);function GD(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,is(t))}function qD(n){return s1(n)?n[n.length-1]||0:n}function WD(n,e){const t=Jo(n,e);let{transitionEnd:r={},transition:i={},...a}=t||{};a={...a,...r};for(const s in a){const c=qD(a[s]);GD(n,s,c)}}function XD(n){return!!(Bn(n)&&n.add)}function l1(n,e){const t=n.getValue("willChange");if(XD(t))return t.add(e);if(!t&&Ei.WillChange){const r=new Ei.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function rS(n){return n.props[q_]}const YD=n=>n!==null;function KD(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(YD),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[a]}const ZD={type:"spring",stiffness:500,damping:25,restSpeed:10},QD=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),JD={type:"keyframes",duration:.8},e7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},t7=(n,{keyframes:e})=>e.length>2?JD:ps.has(n)?n.startsWith("scale")?QD(e[1]):ZD:e7;function n7({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:c,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const gp=(n,e,t,r={},i,a)=>s=>{const c=np(r,n)||{},d=c.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Zr(d);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{s(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:a?void 0:i};n7(c)||Object.assign(p,t7(n,p)),p.duration&&(p.duration=Zr(p.duration)),p.repeatDelay&&(p.repeatDelay=Zr(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(n1(p),p.delay===0&&(m=!0)),(Ei.instantAnimations||Ei.skipAnimations)&&(m=!0,n1(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,m&&!a&&e.get()!==void 0){const v=KD(p.keyframes,c);if(v!==void 0){zt.update(()=>{p.onUpdate(v),p.onComplete()});return}}return c.isSync?new ep(p):new SI(p)};function r7({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function iS(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:s,...c}=e;r&&(a=r);const d=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const p in c){const m=n.getValue(p,n.latestValues[p]??null),v=c[p];if(v===void 0||f&&r7(f,p))continue;const x={delay:t,...np(a||{},p)},w=m.get();if(w!==void 0&&!m.isAnimating&&!Array.isArray(v)&&v===w&&!x.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const E=rS(n);if(E){const A=window.MotionHandoffAnimation(E,p,zt);A!==null&&(x.startTime=A,_=!0)}}l1(n,p),m.start(gp(p,m,v,n.shouldReduceMotion&&E_.has(p)?{type:!1}:x,n,_));const S=m.animation;S&&d.push(S)}return s&&Promise.all(d).then(()=>{zt.update(()=>{s&&WD(n,s)})}),d}function aS(n,e,t,r=0,i=1){const a=Array.from(n).sort((f,p)=>f.sortNodePosition(p)).indexOf(e),s=n.size,c=(s-1)*r;return typeof t=="function"?t(a,s):i===1?a*r:c-a*r}function c1(n,e,t={}){const r=Jo(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const a=r?()=>Promise.all(iS(n,r,t)):()=>Promise.resolve(),s=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:m}=i;return i7(n,e,d,f,p,m,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,f]=c==="beforeChildren"?[a,s]:[s,a];return d().then(()=>f())}else return Promise.all([a(),s(t.delay)])}function i7(n,e,t=0,r=0,i=0,a=1,s){const c=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),c.push(c1(d,e,{...s,delay:t+(typeof r=="function"?0:r)+aS(n.variantChildren,d,r,i,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(c)}function a7(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>c1(n,a,t));r=Promise.all(i)}else if(typeof e=="string")r=c1(n,e,t);else{const i=typeof e=="function"?Jo(n,e,t.custom):e;r=Promise.all(iS(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function oS(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const o7=lp.length;function sS(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?sS(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<o7;t++){const r=lp[t],i=n.props[r];(kl(i)||i===!1)&&(e[r]=i)}return e}const s7=[...sp].reverse(),l7=sp.length;function c7(n){return e=>Promise.all(e.map(({animation:t,options:r})=>a7(n,t,r)))}function u7(n){let e=c7(n),t=x2(),r=!0;const i=d=>(f,p)=>{const m=Jo(n,p,d==="exit"?n.presenceContext?.custom:void 0);if(m){const{transition:v,transitionEnd:x,...w}=m;f={...f,...w,...x}}return f};function a(d){e=d(n)}function s(d){const{props:f}=n,p=sS(n.parent)||{},m=[],v=new Set;let x={},w=1/0;for(let S=0;S<l7;S++){const E=s7[S],A=t[E],T=f[E]!==void 0?f[E]:p[E],R=kl(T),I=E===d?A.isActive:null;I===!1&&(w=S);let M=T===p[E]&&T!==f[E]&&R;if(M&&r&&n.manuallyAnimateOnMount&&(M=!1),A.protectedKeys={...x},!A.isActive&&I===null||!T&&!A.prevProp||hd(T)||typeof T=="boolean")continue;const U=d7(A.prevProp,T);let H=U||E===d&&A.isActive&&!M&&R||S>w&&R,q=!1;const ae=Array.isArray(T)?T:[T];let ce=ae.reduce(i(E),{});I===!1&&(ce={});const{prevResolvedValues:F={}}=A,ee={...F,...ce},he=B=>{H=!0,v.has(B)&&(q=!0,v.delete(B)),A.needsAnimating[B]=!0;const W=n.getValue(B);W&&(W.liveStyle=!1)};for(const B in ee){const W=ce[B],de=F[B];if(x.hasOwnProperty(B))continue;let pe=!1;s1(W)&&s1(de)?pe=!oS(W,de):pe=W!==de,pe?W!=null?he(B):v.add(B):W!==void 0&&v.has(B)?he(B):A.protectedKeys[B]=!0}A.prevProp=T,A.prevResolvedValues=ce,A.isActive&&(x={...x,...ce}),r&&n.blockInitialAnimation&&(H=!1);const _e=M&&U;H&&(!_e||q)&&m.push(...ae.map(B=>{const W={type:E};if(typeof B=="string"&&r&&!_e&&n.manuallyAnimateOnMount&&n.parent){const{parent:de}=n,pe=Jo(de,B);if(de.enteringChildren&&pe){const{delayChildren:j}=pe.transition||{};W.delay=aS(de.enteringChildren,n,j)}}return{animation:B,options:W}}))}if(v.size){const S={};if(typeof f.initial!="boolean"){const E=Jo(n,Array.isArray(f.initial)?f.initial[0]:f.initial);E&&E.transition&&(S.transition=E.transition)}v.forEach(E=>{const A=n.getBaseTarget(E),T=n.getValue(E);T&&(T.liveStyle=!0),S[E]=A??null}),m.push({animation:S})}let _=!!m.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(m):Promise.resolve()}function c(d,f){if(t[d].isActive===f)return Promise.resolve();n.variantChildren?.forEach(m=>m.animationState?.setActive(d,f)),t[d].isActive=f;const p=s(d);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:s,setActive:c,setAnimateFunction:a,getState:()=>t,reset:()=>{t=x2()}}}function d7(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!oS(e,n):!1}function ja(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function x2(){return{animate:ja(!0),whileInView:ja(),whileHover:ja(),whileTap:ja(),whileDrag:ja(),whileFocus:ja(),exit:ja()}}class ua{constructor(e){this.isMounted=!1,this.node=e}update(){}}class f7 extends ua{constructor(e){super(e),e.animationState||(e.animationState=u7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();hd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let h7=0;class p7 extends ua{constructor(){super(...arguments),this.id=h7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const g7={animation:{Feature:f7},exit:{Feature:p7}};function Ml(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Gl(n){return{point:{x:n.pageX,y:n.pageY}}}const m7=n=>e=>ap(e)&&n(e,Gl(e));function Sl(n,e,t,r){return Ml(n,e,m7(t),r)}const lS=1e-4,v7=1-lS,y7=1+lS,cS=.01,x7=0-cS,b7=0+cS;function Hn(n){return n.max-n.min}function w7(n,e,t){return Math.abs(n-e)<=t}function b2(n,e,t,r=.5){n.origin=r,n.originPoint=qt(e.min,e.max,n.origin),n.scale=Hn(t)/Hn(e),n.translate=qt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=v7&&n.scale<=y7||isNaN(n.scale))&&(n.scale=1),(n.translate>=x7&&n.translate<=b7||isNaN(n.translate))&&(n.translate=0)}function El(n,e,t,r){b2(n.x,e.x,t.x,r?r.originX:void 0),b2(n.y,e.y,t.y,r?r.originY:void 0)}function w2(n,e,t){n.min=t.min+e.min,n.max=n.min+Hn(e)}function _7(n,e,t){w2(n.x,e.x,t.x),w2(n.y,e.y,t.y)}function _2(n,e,t){n.min=e.min-t.min,n.max=n.min+Hn(e)}function Cl(n,e,t){_2(n.x,e.x,t.x),_2(n.y,e.y,t.y)}function Tr(n){return[n("x"),n("y")]}const uS=({current:n})=>n?n.ownerDocument.defaultView:null,S2=(n,e)=>Math.abs(n-e);function S7(n,e){const t=S2(n.x,e.x),r=S2(n.y,e.y);return Math.sqrt(t**2+r**2)}class dS{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=d0(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,w=S7(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!w)return;const{point:_}=v,{timestamp:S}=In;this.history.push({..._,timestamp:S});const{onStart:E,onMove:A}=this.handlers;x||(E&&E(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,v)},this.handlePointerMove=(v,x)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=u0(x,this.transformPagePoint),zt.update(this.updatePoint,!0)},this.handlePointerUp=(v,x)=>{this.end();const{onEnd:w,onSessionEnd:_,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=d0(v.type==="pointercancel"?this.lastMoveEventInfo:u0(x,this.transformPagePoint),this.history);this.startEvent&&w&&w(v,E),_&&_(v,E)},!ap(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const c=Gl(e),d=u0(c,this.transformPagePoint),{point:f}=d,{timestamp:p}=In;this.history=[{...f,timestamp:p}];const{onSessionStart:m}=t;m&&m(e,d0(d,this.history)),this.removeListeners=Vl(Sl(this.contextWindow,"pointermove",this.handlePointerMove),Sl(this.contextWindow,"pointerup",this.handlePointerUp),Sl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),sa(this.updatePoint)}}function u0(n,e){return e?{point:e(n.point)}:n}function E2(n,e){return{x:n.x-e.x,y:n.y-e.y}}function d0({point:n},e){return{point:n,delta:E2(n,fS(e)),offset:E2(n,E7(e)),velocity:C7(e,.1)}}function E7(n){return n[0]}function fS(n){return n[n.length-1]}function C7(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=fS(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Zr(e)));)t--;if(!r)return{x:0,y:0};const a=Rr(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function A7(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?qt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?qt(t,n,r.max):Math.min(n,t)),n}function C2(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function T7(n,{top:e,left:t,bottom:r,right:i}){return{x:C2(n.x,t,i),y:C2(n.y,e,r)}}function A2(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function O7(n,e){return{x:A2(n.x,e.x),y:A2(n.y,e.y)}}function R7(n,e){let t=.5;const r=Hn(n),i=Hn(e);return i>r?t=Nl(e.min,e.max-r,n.min):r>i&&(t=Nl(n.min,n.max-i,e.min)),Si(0,1,t)}function N7(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const u1=.35;function I7(n=u1){return n===!1?n=0:n===!0&&(n=u1),{x:T2(n,"left","right"),y:T2(n,"top","bottom")}}function T2(n,e,t){return{min:O2(n,e),max:O2(n,t)}}function O2(n,e){return typeof n=="number"?n:n[e]||0}const D7=new WeakMap;class k7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Gl(m).point)},s=(m,v)=>{const{drag:x,dragPropagation:w,onDragStart:_}=this.getProps();if(x&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=FI(x),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Tr(E=>{let A=this.getAxisMotionValue(E).get()||0;if(Qr.test(A)){const{projection:T}=this.visualElement;if(T&&T.layout){const R=T.layout.layoutBox[E];R&&(A=Hn(R)*(parseFloat(A)/100))}}this.originPoint[E]=A}),_&&zt.postRender(()=>_(m,v)),l1(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v;const{dragPropagation:x,dragDirectionLock:w,onDirectionLock:_,onDrag:S}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:E}=v;if(w&&this.currentDirection===null){this.currentDirection=j7(E),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",v.point,E),this.updateAxis("y",v.point,E),this.visualElement.render(),S&&S(m,v)},d=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v,this.stop(m,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Tr(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new dS(e,{onSessionStart:a,onStart:s,onMove:c,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:uS(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:c}=this.getProps();c&&zt.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Tu(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=A7(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Xo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=T7(r.layoutBox,e):this.constraints=!1,this.elastic=I7(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Tr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=N7(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Xo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=MD(r,i.root,this.visualElement.getTransformPagePoint());let s=O7(i.layout.layoutBox,a);if(t){const c=t(DD(s));this.hasMutatedConstraints=!!c,c&&(s=Y_(c))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=Tr(p=>{if(!Tu(p,t,this.currentDirection))return;let m=d&&d[p]||{};s&&(m={min:0,max:0});const v=i?200:1e6,x=i?40:1e7,w={type:"inertia",velocity:r?e[p]:0,bounceStiffness:v,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(p,w)});return Promise.all(f).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return l1(this.visualElement,e),r.start(gp(e,r,0,t,this.visualElement,!1))}stopAnimation(){Tr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Tr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Tr(t=>{const{drag:r}=this.getProps();if(!Tu(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:s,max:c}=i.layout.layoutBox[t];a.set(e[t]-qt(s,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Xo(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Tr(s=>{const c=this.getAxisMotionValue(s);if(c&&this.constraints!==!1){const d=c.get();i[s]=R7({min:d,max:d},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Tr(s=>{if(!Tu(s,e,null))return;const c=this.getAxisMotionValue(s),{min:d,max:f}=this.constraints[s];c.set(qt(d,f,i[s]))})}addListeners(){if(!this.visualElement.current)return;D7.set(this.visualElement,this);const e=this.visualElement.current,t=Sl(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Xo(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),zt.read(r);const s=Ml(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Tr(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=d[p].translate,m.set(m.get()+d[p].translate))}),this.visualElement.render())}));return()=>{s(),t(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=u1,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:c}}}function Tu(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function j7(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class M7 extends ua{constructor(e){super(e),this.removeGroupControls=Ir,this.removeListeners=Ir,this.controls=new k7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ir}unmount(){this.removeGroupControls(),this.removeListeners()}}const R2=n=>(e,t)=>{n&&zt.postRender(()=>n(e,t))};class P7 extends ua{constructor(){super(...arguments),this.removePointerDownListener=Ir}onPointerDown(e){this.session=new dS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:R2(e),onStart:R2(t),onMove:r,onEnd:(a,s)=>{delete this.session,i&&zt.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Sl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Lu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function N2(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const fl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ge.test(n))n=parseFloat(n);else return n;const t=N2(n,e.target.x),r=N2(n,e.target.y);return`${t}% ${r}%`}},B7={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=la.parse(n);if(i.length>5)return r;const a=la.createTransformer(n),s=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;i[0+s]/=c,i[1+s]/=d;const f=qt(c,d,.5);return typeof i[2+s]=="number"&&(i[2+s]/=f),typeof i[3+s]=="number"&&(i[3+s]/=f),a(i)}};let f0=!1;class L7 extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;oD(F7),a&&(t.group&&t.group.add(a),r&&r.register&&i&&r.register(a),f0&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Lu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,f0=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||zt.postRender(()=>{const c=s.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ip.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;f0=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function hS(n){const[e,t]=M_(),r=O.useContext(P1);return g.jsx(L7,{...n,layoutGroup:r,switchLayoutGroup:O.useContext(W_),isPresent:e,safeToRemove:t})}const F7={borderRadius:{...fl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fl,borderTopRightRadius:fl,borderBottomLeftRadius:fl,borderBottomRightRadius:fl,boxShadow:B7};function U7(n,e,t){const r=Bn(n)?n:is(n);return r.start(gp("",r,e,t)),r.animation}const z7=(n,e)=>n.depth-e.depth;class V7{constructor(){this.children=[],this.isDirty=!1}add(e){F1(this.children,e),this.isDirty=!0}remove(e){U1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(z7),this.isDirty=!1,this.children.forEach(e)}}function H7(n,e){const t=Jn.now(),r=({timestamp:i})=>{const a=i-t;a>=e&&(sa(r),n(a-e))};return zt.setup(r,!0),()=>sa(r)}const pS=["TopLeft","TopRight","BottomLeft","BottomRight"],$7=pS.length,I2=n=>typeof n=="string"?parseFloat(n):n,D2=n=>typeof n=="number"||Ge.test(n);function G7(n,e,t,r,i,a){i?(n.opacity=qt(0,t.opacity??1,q7(r)),n.opacityExit=qt(e.opacity??1,0,W7(r))):a&&(n.opacity=qt(e.opacity??1,t.opacity??1,r));for(let s=0;s<$7;s++){const c=`border${pS[s]}Radius`;let d=k2(e,c),f=k2(t,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||D2(d)===D2(f)?(n[c]=Math.max(qt(I2(d),I2(f),r),0),(Qr.test(f)||Qr.test(d))&&(n[c]+="%")):n[c]=f}(e.rotate||t.rotate)&&(n.rotate=qt(e.rotate||0,t.rotate||0,r))}function k2(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const q7=gS(0,.5,t_),W7=gS(.5,.95,Ir);function gS(n,e,t){return r=>r<n?0:r>e?1:t(Nl(n,e,r))}function j2(n,e){n.min=e.min,n.max=e.max}function Cr(n,e){j2(n.x,e.x),j2(n.y,e.y)}function M2(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function P2(n,e,t,r,i){return n-=e,n=td(n,1/t,r),i!==void 0&&(n=td(n,1/i,r)),n}function X7(n,e=0,t=1,r=.5,i,a=n,s=n){if(Qr.test(e)&&(e=parseFloat(e),e=qt(s.min,s.max,e/100)-s.min),typeof e!="number")return;let c=qt(a.min,a.max,r);n===a&&(c-=e),n.min=P2(n.min,e,t,c,i),n.max=P2(n.max,e,t,c,i)}function B2(n,e,[t,r,i],a,s){X7(n,e[t],e[r],e[i],e.scale,a,s)}const Y7=["x","scaleX","originX"],K7=["y","scaleY","originY"];function L2(n,e,t,r){B2(n.x,e,Y7,t?t.x:void 0,r?r.x:void 0),B2(n.y,e,K7,t?t.y:void 0,r?r.y:void 0)}function F2(n){return n.translate===0&&n.scale===1}function mS(n){return F2(n.x)&&F2(n.y)}function U2(n,e){return n.min===e.min&&n.max===e.max}function Z7(n,e){return U2(n.x,e.x)&&U2(n.y,e.y)}function z2(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function vS(n,e){return z2(n.x,e.x)&&z2(n.y,e.y)}function V2(n){return Hn(n.x)/Hn(n.y)}function H2(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class Q7{constructor(){this.members=[]}add(e){F1(this.members,e),e.scheduleRender()}remove(e){if(U1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function J7(n,e,t){let r="";const i=n.x.translate/e.x,a=n.y.translate/e.y,s=t?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:p,rotateX:m,rotateY:v,skewX:x,skewY:w}=t;f&&(r=`perspective(${f}px) ${r}`),p&&(r+=`rotate(${p}deg) `),m&&(r+=`rotateX(${m}deg) `),v&&(r+=`rotateY(${v}deg) `),x&&(r+=`skewX(${x}deg) `),w&&(r+=`skewY(${w}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const h0=["","X","Y","Z"],ek=1e3;let tk=0;function p0(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function yS(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=rS(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",zt,!(i||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&yS(r)}function xS({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},c=e?.()){this.id=tk++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ik),this.nodes.forEach(lk),this.nodes.forEach(ck),this.nodes.forEach(ak)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new V7)}addEventListener(s,c){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new H1),this.eventHandlers.get(s).add(c)}notifyListeners(s,...c){const d=this.eventHandlers.get(s);d&&d.notify(...c)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=j_(s)&&!GI(s),this.instance=s;const{layoutId:c,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),n){let p,m=0;const v=()=>this.root.updateBlockedByResize=!1;zt.read(()=>{m=window.innerWidth}),n(s,()=>{const x=window.innerWidth;x!==m&&(m=x,this.root.updateBlockedByResize=!0,p&&p(),p=H7(v,250),Lu.hasAnimatedSinceResize&&(Lu.hasAnimatedSinceResize=!1,this.nodes.forEach(q2)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:v,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||pk,{onLayoutAnimationStart:_,onLayoutAnimationComplete:S}=f.getProps(),E=!this.targetLayout||!vS(this.targetLayout,x),A=!m&&v;if(this.options.layoutRoot||this.resumeFrom||A||m&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...np(w,"layout"),onPlay:_,onComplete:S};(f.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(p,A)}else m||q2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),sa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uk),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(G2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(sk),this.nodes.forEach(nk),this.nodes.forEach(rk)):this.nodes.forEach(G2),this.clearAllSnapshots();const c=Jn.now();In.delta=Si(0,1e3/60,c-In.timestamp),In.timestamp=c,In.isProcessing=!0,n0.update.process(In),n0.preRender.process(In),n0.render.process(In),In.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ip.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ok),this.sharedNodes.forEach(dk)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,zt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){zt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Hn(this.snapshot.measuredBox.x)&&!Hn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(c=!1),c&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!mS(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;s&&this.instance&&(c||La(this.latestValues)||p)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return s&&(d=this.removeTransform(d)),gk(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Jt();const c=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(mk))){const{scroll:f}=this.root;f&&(Yo(c.x,f.offset.x),Yo(c.y,f.offset.y))}return c}removeElementScroll(s){const c=Jt();if(Cr(c,s),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:p,options:m}=f;f!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&Cr(c,s),Yo(c.x,p.offset.x),Yo(c.y,p.offset.y))}return c}applyTransform(s,c=!1){const d=Jt();Cr(d,s);for(let f=0;f<this.path.length;f++){const p=this.path[f];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Ko(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),La(p.latestValues)&&Ko(d,p.latestValues)}return La(this.latestValues)&&Ko(d,this.latestValues),d}removeTransform(s){const c=Jt();Cr(c,s);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!La(f.latestValues))continue;i1(f.latestValues)&&f.updateSnapshot();const p=Jt(),m=f.measurePageBox();Cr(p,m),L2(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return La(this.latestValues)&&L2(c,this.latestValues),c}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==In.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(s||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=In.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jt(),this.relativeTargetOrigin=Jt(),Cl(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Cr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Jt(),this.targetWithTransforms=Jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cr(this.target,this.layout.layoutBox),Z_(this.target,this.targetDelta)):Cr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jt(),this.relativeTargetOrigin=Jt(),Cl(this.relativeTargetOrigin,this.target,v.target),Cr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||i1(this.parent.latestValues)||K_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),c=!!this.resumingFrom||this!==s;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===In.timestamp&&(d=!1),d)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Cr(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,v=this.treeScale.y;jD(this.layoutCorrected,this.treeScale,this.path,c),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Jt());const{target:x}=s;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(M2(this.prevProjectionDelta.x,this.projectionDelta.x),M2(this.prevProjectionDelta.y,this.projectionDelta.y)),El(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==v||!H2(this.projectionDelta.x,this.prevProjectionDelta.x)||!H2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zo(),this.projectionDelta=Zo(),this.projectionDeltaWithTransform=Zo()}setAnimationOrigin(s,c=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},m=Zo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=Jt(),x=d?d.source:void 0,w=this.layout?this.layout.source:void 0,_=x!==w,S=this.getStack(),E=!S||S.members.length<=1,A=!!(_&&!E&&this.options.crossfade===!0&&!this.path.some(hk));this.animationProgress=0;let T;this.mixTargetDelta=R=>{const I=R/1e3;W2(m.x,s.x,I),W2(m.y,s.y,I),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cl(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fk(this.relativeTarget,this.relativeTargetOrigin,v,I),T&&Z7(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Jt()),Cr(T,this.relativeTarget)),_&&(this.animationValues=p,G7(p,f,this.latestValues,I,A,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(sa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zt.update(()=>{Lu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=is(0)),this.currentAnimation=U7(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),s.onUpdate&&s.onUpdate(c)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ek),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:p}=s;if(!(!c||!d||!f)){if(this!==s&&this.layout&&f&&bS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Jt();const m=Hn(this.layout.layoutBox.x);d.x.min=s.target.x.min,d.x.max=d.x.min+m;const v=Hn(this.layout.layoutBox.y);d.y.min=s.target.y.min,d.y.max=d.y.min+v}Cr(c,d),Ko(c,p),El(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(s,c){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Q7),this.sharedNodes.get(s).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),s&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let c=!1;const{latestValues:d}=s;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&p0("z",s,f,this.animationValues);for(let p=0;p<h0.length;p++)p0(`rotate${h0[p]}`,s,f,this.animationValues),p0(`skew${h0[p]}`,s,f,this.animationValues);s.render();for(const p in f)s.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);s.scheduleRender()}applyProjectionStyles(s,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=Bu(c?.pointerEvents)||"",s.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=Bu(c?.pointerEvents)||""),this.hasProjected&&!La(this.latestValues)&&(s.transform=d?d({},""):"none",this.hasProjected=!1);return}s.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let m=J7(this.projectionDeltaWithTransform,this.treeScale,p);d&&(m=d(p,m)),s.transform=m;const{x:v,y:x}=this.projectionDelta;s.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,f.animationValues?s.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:s.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in jl){if(p[w]===void 0)continue;const{correct:_,applyTo:S,isCSSVariable:E}=jl[w],A=m==="none"?p[w]:_(p[w],f);if(S){const T=S.length;for(let R=0;R<T;R++)s[S[R]]=A}else E?this.options.visualElement.renderState.vars[w]=A:s[w]=A}this.options.layoutId&&(s.pointerEvents=f===this?Bu(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach($2),this.root.sharedNodes.clear()}}}function nk(n){n.updateLayout()}function rk(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:i}=n.options,a=e.source!==n.layout.source;i==="size"?Tr(p=>{const m=a?e.measuredBox[p]:e.layoutBox[p],v=Hn(m);m.min=t[p].min,m.max=m.min+v}):bS(i,e.layoutBox,t)&&Tr(p=>{const m=a?e.measuredBox[p]:e.layoutBox[p],v=Hn(t[p]);m.max=m.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+v)});const s=Zo();El(s,t,e.layoutBox);const c=Zo();a?El(c,n.applyTransform(r,!0),e.measuredBox):El(c,t,e.layoutBox);const d=!mS(s);let f=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:v}=p;if(m&&v){const x=Jt();Cl(x,e.layoutBox,m.layoutBox);const w=Jt();Cl(w,t,v.layoutBox),vS(x,w)||(f=!0),p.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=x,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:s,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function ik(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function ak(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function ok(n){n.clearSnapshot()}function $2(n){n.clearMeasurements()}function G2(n){n.isLayoutDirty=!1}function sk(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function q2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function lk(n){n.resolveTargetDelta()}function ck(n){n.calcProjection()}function uk(n){n.resetSkewAndRotation()}function dk(n){n.removeLeadSnapshot()}function W2(n,e,t){n.translate=qt(e.translate,0,t),n.scale=qt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function X2(n,e,t,r){n.min=qt(e.min,t.min,r),n.max=qt(e.max,t.max,r)}function fk(n,e,t,r){X2(n.x,e.x,t.x,r),X2(n.y,e.y,t.y,r)}function hk(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const pk={duration:.45,ease:[.4,0,.1,1]},Y2=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),K2=Y2("applewebkit/")&&!Y2("chrome/")?Math.round:Ir;function Z2(n){n.min=K2(n.min),n.max=K2(n.max)}function gk(n){Z2(n.x),Z2(n.y)}function bS(n,e,t){return n==="position"||n==="preserve-aspect"&&!w7(V2(e),V2(t),.2)}function mk(n){return n!==n.root&&n.scroll?.wasRoot}const vk=xS({attachResizeListener:(n,e)=>Ml(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),g0={current:void 0},wS=xS({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!g0.current){const n=new vk({});n.mount(window),n.setOptions({layoutScroll:!0}),g0.current=n}return g0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),yk={pan:{Feature:P7},drag:{Feature:M7,ProjectionNode:wS,MeasureLayout:hS}};function Q2(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=r[i];a&&zt.postRender(()=>a(e,Gl(e)))}class xk extends ua{mount(){const{current:e}=this.node;e&&(this.unmount=UI(e,(t,r)=>(Q2(this.node,r,"Start"),i=>Q2(this.node,i,"End"))))}unmount(){}}class bk extends ua{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vl(Ml(this.node.current,"focus",()=>this.onFocus()),Ml(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function J2(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=r[i];a&&zt.postRender(()=>a(e,Gl(e)))}class wk extends ua{mount(){const{current:e}=this.node;e&&(this.unmount=$I(e,(t,r)=>(J2(this.node,r,"Start"),(i,{success:a})=>J2(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const d1=new WeakMap,m0=new WeakMap,_k=n=>{const e=d1.get(n.target);e&&e(n)},Sk=n=>{n.forEach(_k)};function Ek({root:n,...e}){const t=n||document;m0.has(t)||m0.set(t,{});const r=m0.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Sk,{root:n,...e})),r[i]}function Ck(n,e,t){const r=Ek(e);return d1.set(n,t),r.observe(n),()=>{d1.delete(n),r.unobserve(n)}}const Ak={some:0,all:1};class Tk extends ua{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:a}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Ak[i]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),v=f?p:m;v&&v(d)};return Ck(this.node.current,s,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Ok(e,t))&&this.startObserver()}unmount(){}}function Ok({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Rk={inView:{Feature:Tk},tap:{Feature:wk},focus:{Feature:bk},hover:{Feature:xk}},Nk={layout:{ProjectionNode:wS,MeasureLayout:hS}},Ik={...g7,...Rk,...yk,...Nk},Je=ID(Ik,$D),Dk=()=>{const{status:n,loading:e,updating:t,toggleStatus:r}=Hw(),[i,a]=O.useState({show:!1,message:"",type:"success"}),s=(f,p="success")=>{a({show:!0,message:f,type:p}),setTimeout(()=>{a({show:!1,message:"",type:"success"})},3e3)},c=async()=>{try{const f=n==="open"?"closed":"open";await r(),s(`Canteen ${f==="open"?"opened":"closed"} successfully!`)}catch(f){console.error("Toggle failed:",f),s("Failed to update canteen status. Please try again.","error")}},d=n==="open";return e?g.jsxs("div",{style:sn.container,children:[g.jsx("div",{style:sn.loadingSpinner}),g.jsx("span",{style:sn.loadingText,children:"Loading..."})]}):g.jsxs(g.Fragment,{children:[g.jsxs(Je.button,{onClick:c,disabled:t,style:{...sn.toggleContainer,...d?sn.containerOpen:sn.containerClosed,...t&&sn.containerDisabled},whileHover:t?{}:{scale:1.02},whileTap:t?{}:{scale:.98},transition:{duration:.2},children:[g.jsx(Je.div,{style:sn.iconWrapper,animate:{rotate:d?0:180},transition:{type:"spring",stiffness:200,damping:20},children:d?g.jsx(HR,{style:sn.icon,strokeWidth:2.5}):g.jsx(zw,{style:sn.icon,strokeWidth:2.5})}),g.jsxs("div",{style:sn.textContent,children:[g.jsx("span",{style:sn.statusLabel,children:"Status"}),g.jsx("span",{style:sn.statusText,children:d?"Open":"Closed"})]}),g.jsx(Je.div,{style:{...sn.indicator,...d?sn.indicatorOpen:sn.indicatorClosed},animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),g.jsx(kn,{children:i.show&&g.jsx(Je.div,{style:sn.toastContainer,initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3},children:g.jsx("div",{style:{...sn.toast,...i.type==="success"?sn.toastSuccess:sn.toastError},children:i.message})})})]})},sn={container:{display:"flex",alignItems:"center",gap:"12px",padding:"8px 16px",background:"white",border:"1px solid #e5e7eb",borderRadius:"12px"},loadingSpinner:{width:"16px",height:"16px",border:"2px solid #e5e7eb",borderTop:"2px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"},loadingText:{fontSize:"14px",fontWeight:"500",color:"#6b7280"},toggleContainer:{display:"flex",alignItems:"center",gap:"16px",padding:"12px 20px",border:"2px solid",borderRadius:"12px",background:"white",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)",position:"relative",overflow:"hidden"},containerOpen:{borderColor:"#10b981",background:"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)"},containerClosed:{borderColor:"#ef4444",background:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)"},containerDisabled:{opacity:.6,cursor:"not-allowed"},iconWrapper:{display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",borderRadius:"10px",background:"white",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.1)"},icon:{width:"24px",height:"24px",color:"#1f2937"},textContent:{display:"flex",flexDirection:"column",gap:"2px",flex:1},statusLabel:{fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",color:"#6b7280"},statusText:{fontSize:"16px",fontWeight:"700",color:"#111827",lineHeight:"1"},indicator:{width:"10px",height:"10px",borderRadius:"50%",boxShadow:"0 0 10px"},indicatorOpen:{background:"#10b981",boxShadow:"0 0 10px rgba(16, 185, 129, 0.6)"},indicatorClosed:{background:"#ef4444",boxShadow:"0 0 10px rgba(239, 68, 68, 0.6)"},toastContainer:{position:"fixed",bottom:"20px",right:"20px",zIndex:9999},toast:{padding:"16px 24px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",color:"white",fontSize:"14px",fontWeight:"600"},toastSuccess:{background:"linear-gradient(135deg, #10b981, #059669)"},toastError:{background:"linear-gradient(135deg, #ef4444, #dc2626)"}},kk=()=>{const[n,e]=O.useState([]),[t,r]=O.useState(!0),[i,a]=O.useState(new Set),[s,c]=O.useState({}),[d,f]=O.useState({}),[p,m]=O.useState(null),v=async()=>{try{r(!0);const{data:S,error:E}=await xe.from("food_items").select("id, name, price, available_quantity, pending_deliver_count, ready_to_deliver_count");if(E)throw console.error("Food items error:",E),E;const A=(S||[]).map(R=>({...R,pendingCount:R.pending_deliver_count||0,readyCount:R.ready_to_deliver_count||0}));A.sort((R,I)=>I.pendingCount!==R.pendingCount?I.pendingCount-R.pendingCount:R.name.localeCompare(I.name)),console.log("🍽️ Food items with counts (sorted by priority):",A.map(R=>({name:R.name,pendingCount:R.pendingCount}))),e(A);const T={};A.forEach(R=>{T[R.id]=""}),c(T)}catch(S){console.error("Error fetching food items:",S),_("Error loading food items","error")}finally{r(!1)}},x=(S,E)=>{const A=n.find(R=>R.id===S),T=parseInt(E)||0;f(R=>{const I={...R};return delete I[S],I}),E!==""&&(T<0||T>A.pendingCount)&&f(R=>({...R,[S]:`Must be between 0 and ${A.pendingCount}`})),c(R=>({...R,[S]:E}))},w=async S=>{const E=n.find(T=>T.id===S),A=parseInt(s[S])||0;if(A<=0||A>E.pendingCount){f(T=>({...T,[S]:`Must be between 1 and ${E.pendingCount}`}));return}try{a(I=>new Set([...I,S]));const{data:T,error:R}=await xe.rpc("allocate_ready_items",{p_food_item_id:S,p_add_count:A});if(R)throw console.error("❌ RPC allocate_ready_items error:",R),R;_(`✅ Marked ${T?.fulfilled||0} orders ready • ${T?.remaining||0} remaining`,"success"),c(I=>({...I,[S]:""})),await v()}catch(T){console.error("❌ FATAL ERROR in markOrdersReady:",T),console.error("❌ Error stack:",T.stack),_(`Error: ${T.message||"Failed to update orders"}`,"error")}finally{a(T=>{const R=new Set(T);return R.delete(S),R})}},_=(S,E="success")=>{m({message:S,type:E}),setTimeout(()=>m(null),3e3)};return O.useEffect(()=>{v()},[]),t?g.jsx("div",{className:"home-dashboard",children:g.jsxs("div",{className:"card",children:[g.jsx("div",{className:"card-title",children:"Manage Orders"}),g.jsxs("div",{className:"flex items-center justify-center py-12",children:[g.jsx(_i,{className:"w-8 h-8 animate-spin text-primary-500"}),g.jsx("span",{className:"ml-3 text-muted",children:"Loading food items..."})]})]})}):g.jsxs("div",{className:"home-dashboard",children:[g.jsxs("div",{className:"card",children:[g.jsx("div",{className:"card-title",children:"Manage Orders"}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"muted",children:"Mark orders as ready for each food item"}),g.jsxs("button",{onClick:v,disabled:t,className:"btn btn-primary",children:[g.jsx(_R,{className:`w-4 h-4 mr-2 ${t?"animate-spin":""}`}),"Refresh"]})]})]}),g.jsx("div",{className:"food-items-grid",children:n.map(S=>g.jsxs(Je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"card compact-card",children:[g.jsxs("div",{className:"card-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[g.jsx("h3",{className:"food-item-name",children:S.name}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[S.readyCount>0&&g.jsxs("span",{className:"pending-badge",style:{backgroundColor:"#22c55e"},children:[S.readyCount," ready"]}),g.jsxs("span",{className:"pending-badge",children:[S.pendingCount," pending"]})]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:"Orders Ready"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"number",min:"0",max:S.pendingCount,value:s[S.id]||"",onChange:E=>x(S.id,E.target.value),placeholder:"0",className:"flex-1 input",disabled:S.pendingCount===0||i.has(S.id)}),g.jsx("button",{onClick:()=>w(S.id),disabled:S.pendingCount===0||i.has(S.id)||!s[S.id]||d[S.id],className:"btn btn-success",children:i.has(S.id)?g.jsx(_i,{className:"w-4 h-4 animate-spin"}):g.jsx(rs,{className:"w-4 h-4"})})]})]}),g.jsx(kn,{children:d[S.id]&&g.jsxs(Je.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center text-sm text-red-500",children:[g.jsx(fr,{className:"w-4 h-4 mr-1"}),d[S.id]]})})]})]},S.id))}),g.jsx(kn,{children:p&&g.jsx(Je.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg z-50 ${p.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:g.jsxs("div",{className:"flex items-center",children:[p.type==="success"?g.jsx(rs,{className:"w-5 h-5 mr-2"}):g.jsx(fr,{className:"w-5 h-5 mr-2"}),p.message]})})})]})},jk=()=>g.jsx("div",{className:"home-dashboard",children:g.jsx("div",{className:"dashboard-content",children:g.jsx(Je.div,{className:"card coming-soon-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:g.jsxs("div",{className:"coming-soon-content",children:[g.jsx(Je.div,{className:"coming-soon-icon",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:"🚀"}),g.jsx("h2",{className:"coming-soon-title",children:"Pre-Order Feature"}),g.jsx("p",{className:"coming-soon-description",children:"We're working on an exciting pre-order system that will allow you to reserve your favorite meals in advance. Stay tuned for updates!"}),g.jsx("div",{className:"coming-soon-status",children:g.jsxs("div",{className:"status-indicator",children:[g.jsx(_i,{className:"w-4 h-4 animate-spin"}),g.jsx("span",{children:"In Development"})]})}),g.jsxs("div",{className:"features-preview",children:[g.jsx("h3",{className:"features-title",children:"What to Expect:"}),g.jsxs("div",{className:"features-list",children:[g.jsxs("div",{className:"feature-item",children:[g.jsx(iR,{className:"w-5 h-5 text-primary"}),g.jsx("span",{children:"Schedule orders in advance"})]}),g.jsxs("div",{className:"feature-item",children:[g.jsx(Uw,{className:"w-5 h-5 text-primary"}),g.jsx("span",{children:"Pickup time slots"})]})]})]})]})})})}),Mk=({isOpen:n,onClose:e,onItemRestored:t})=>{const[r,i]=O.useState([]),[a,s]=O.useState(!1),[c,d]=O.useState(new Set),[f,p]=O.useState(null),[m,v]=O.useState(null),[x,w]=O.useState(null),_=async()=>{try{s(!0);const{data:I,error:M}=await xe.from("food_items").select("*").eq("is_active",!1).order("name");if(M){console.error("Error fetching removed items:",M),R("Failed to load removed items","error");return}i(I||[])}catch(I){console.error("Error fetching removed items:",I),R("Failed to load removed items","error")}finally{s(!1)}},S=(I,M)=>{w({itemId:I,itemName:M})},E=async(I,M)=>{try{d(H=>new Set([...H,I])),w(null);const{error:U}=await xe.from("food_items").update({is_active:!0}).eq("id",I);if(U){console.error("Error restoring item:",U),R(`Failed to restore ${M}`,"error");return}R(`${M} has been restored successfully!`,"success"),await _(),t&&t()}catch(U){console.error("Error restoring item:",U),R(`Failed to restore ${M}`,"error")}finally{d(U=>{const H=new Set(U);return H.delete(I),H})}},A=(I,M)=>{v({itemId:I,itemName:M})},T=async(I,M)=>{try{d(H=>new Set([...H,I])),v(null);const{error:U}=await xe.from("food_items").delete().eq("id",I);if(U){console.error("Error permanently deleting item:",U),R(`Failed to delete ${M}`,"error");return}R(`${M} has been permanently deleted`,"success"),await _(),t&&t()}catch(U){console.error("Error permanently deleting item:",U),R(`Failed to delete ${M}`,"error")}finally{d(U=>{const H=new Set(U);return H.delete(I),H})}},R=(I,M="success")=>{p({message:I,type:M}),setTimeout(()=>p(null),3e3)};return O.useEffect(()=>{n&&_()},[n]),O.useEffect(()=>{const I=M=>{M.key==="Escape"&&e()};if(n)return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[n,e]),g.jsx(kn,{children:n&&g.jsxs(g.Fragment,{children:[g.jsx(Je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999}}),g.jsxs(Je.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:{position:"fixed",right:0,top:0,height:"100vh",width:"400px",backgroundColor:"#ffffff",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.3)",zIndex:1e3,display:"flex",flexDirection:"column",opacity:1},className:"dark:!bg-gray-800",children:[g.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:!bg-gray-900",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",backgroundColor:"#f9fafb"},children:[g.jsxs("div",{children:[g.jsx("h2",{className:"dark:!text-white",style:{fontSize:"20px",fontWeight:"600",margin:0,color:"#111827"},children:"Removed Items"}),g.jsxs("p",{className:"dark:!text-gray-300",style:{fontSize:"14px",marginTop:"4px",color:"#6b7280"},children:[r.length," item",r.length!==1?"s":""," removed"]})]}),g.jsx("button",{onClick:e,className:"hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",style:{padding:"8px",borderRadius:"8px",border:"none",cursor:"pointer",background:"transparent"},children:g.jsx(Dt,{size:20,className:"dark:!text-gray-300",style:{color:"#6b7280"}})})]}),g.jsx("div",{className:"bg-white dark:!bg-gray-800",style:{flex:1,overflowY:"auto",padding:"24px",backgroundColor:"#ffffff"},children:a?g.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"48px 0"},children:[g.jsx(_i,{style:{width:"32px",height:"32px",color:"#3b82f6"},className:"animate-spin"}),g.jsx("span",{className:"dark:!text-gray-300",style:{marginLeft:"12px",color:"#6b7280"},children:"Loading removed items..."})]}):r.length===0?g.jsxs("div",{style:{textAlign:"center",padding:"48px 0"},children:[g.jsx("div",{className:"dark:!text-gray-400",style:{marginBottom:"16px",color:"#9ca3af"},children:g.jsx(fr,{size:48,style:{margin:"0 auto"}})}),g.jsx("h3",{className:"dark:!text-white",style:{fontSize:"18px",fontWeight:"500",marginBottom:"8px",color:"#111827"},children:"No Removed Items"}),g.jsx("p",{className:"dark:!text-gray-300",style:{color:"#6b7280"},children:"All items are currently active in your inventory."})]}):g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:r.map(I=>g.jsx(Je.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-gray-50 dark:!bg-gray-700 border border-gray-200 dark:border-gray-600",style:{borderRadius:"12px",padding:"16px",backgroundColor:"#f9fafb"},children:g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[g.jsxs("div",{style:{flex:1},children:[g.jsx("h4",{className:"dark:!text-white",style:{fontWeight:"500",marginBottom:"4px",color:"#111827"},children:I.name}),g.jsxs("p",{className:"dark:!text-gray-300",style:{fontSize:"14px",marginTop:"4px",color:"#6b7280"},children:["Price: ₹",I.price||I.cost||"N/A"]}),I.description&&g.jsx("p",{className:"dark:!text-gray-400",style:{fontSize:"12px",marginTop:"4px",color:"#9ca3af"},children:I.description})]}),g.jsxs("div",{style:{display:"flex",gap:"8px"},children:[g.jsxs("button",{onClick:()=>S(I.id,I.name),disabled:c.has(I.id),style:{flex:1,padding:"8px 12px",backgroundColor:c.has(I.id)?"#d1d5db":"#10b981",color:"#ffffff",fontSize:"14px",borderRadius:"8px",border:"none",cursor:c.has(I.id)?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500"},onMouseEnter:M=>{c.has(I.id)||(M.currentTarget.style.backgroundColor="#059669")},onMouseLeave:M=>{c.has(I.id)||(M.currentTarget.style.backgroundColor="#10b981")},children:[c.has(I.id)?g.jsx(_i,{size:16,className:"animate-spin",style:{color:"#ffffff"}}):g.jsx(Su,{size:16,style:{color:"#ffffff"}}),g.jsx("span",{style:{color:"#ffffff"},children:c.has(I.id)?"Restoring...":"Add Back"})]}),g.jsxs("button",{onClick:()=>A(I.id,I.name),disabled:c.has(I.id),style:{flex:1,padding:"8px 12px",backgroundColor:c.has(I.id)?"#d1d5db":"#ef4444",color:"#ffffff",fontSize:"14px",borderRadius:"8px",border:"none",cursor:c.has(I.id)?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"500"},onMouseEnter:M=>{c.has(I.id)||(M.currentTarget.style.backgroundColor="#dc2626")},onMouseLeave:M=>{c.has(I.id)||(M.currentTarget.style.backgroundColor="#ef4444")},children:[g.jsx(Dt,{size:16,style:{color:"#ffffff"}}),g.jsx("span",{style:{color:"#ffffff"},children:"Delete"})]})]})]})},I.id))})}),g.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-white dark:!bg-gray-800",style:{padding:"24px",backgroundColor:"#ffffff"},children:g.jsxs("button",{onClick:_,disabled:a,className:"bg-gray-100 hover:bg-gray-200 dark:!bg-gray-700 dark:hover:!bg-gray-600 dark:!text-gray-200 transition-colors",style:{width:"100%",padding:"10px 16px",borderRadius:"8px",border:"none",cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:[g.jsx(Su,{size:16,className:`${a?"animate-spin":""} dark:!text-gray-200`,style:{color:"#374151"}}),g.jsx("span",{style:{color:"#374151"},className:"dark:!text-gray-200",children:"Refresh List"})]})})]}),g.jsx(kn,{children:m&&g.jsxs(g.Fragment,{children:[g.jsx(Je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>v(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),g.jsxs(Je.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:I=>I.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[g.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:g.jsx(fr,{size:24,style:{color:"#dc2626"}})}),g.jsx("div",{children:g.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Permanently Delete Item?"})})]}),g.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["Are you sure you want to permanently delete ",g.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',m.itemName,'"']}),"? This action cannot be undone and the item will be removed from the database."]}),g.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[g.jsx("button",{onClick:()=>v(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},className:"dark:!bg-gray-700 dark:!text-gray-200",onMouseEnter:I=>{I.target.style.backgroundColor="#e5e7eb"},onMouseLeave:I=>{I.target.style.backgroundColor="#f3f4f6"},children:"Cancel"}),g.jsxs("button",{onClick:()=>T(m.itemId,m.itemName),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#dc2626",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:I=>{I.target.style.backgroundColor="#b91c1c"},onMouseLeave:I=>{I.target.style.backgroundColor="#dc2626"},children:[g.jsx(Dt,{size:16}),"Delete Permanently"]})]})]})]})}),g.jsx(kn,{children:x&&g.jsxs(g.Fragment,{children:[g.jsx(Je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>w(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),g.jsxs(Je.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:I=>I.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[g.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#d1fae5",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:g.jsx(Su,{size:24,style:{color:"#059669"}})}),g.jsx("div",{children:g.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Restore Item?"})})]}),g.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["Are you sure you want to restore ",g.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',x.itemName,'"']})," back to the active inventory? This item will be available for ordering again."]}),g.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[g.jsx("button",{onClick:()=>w(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},className:"dark:!bg-gray-700 dark:!text-gray-200",onMouseEnter:I=>{I.target.style.backgroundColor="#e5e7eb"},onMouseLeave:I=>{I.target.style.backgroundColor="#f3f4f6"},children:"Cancel"}),g.jsxs("button",{onClick:()=>E(x.itemId,x.itemName),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#10b981",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:I=>{I.target.style.backgroundColor="#059669"},onMouseLeave:I=>{I.target.style.backgroundColor="#10b981"},children:[g.jsx(Su,{size:16}),"Restore Item"]})]})]})]})}),g.jsx(kn,{children:f&&g.jsx(Je.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},style:{position:"fixed",bottom:"20px",right:"20px",padding:"16px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",zIndex:9999,backgroundColor:f.type==="success"?"#10b981":"#ef4444",color:"white"},children:g.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[f.type==="success"?g.jsx(rs,{style:{width:"20px",height:"20px",marginRight:"8px"}}):g.jsx(fr,{style:{width:"20px",height:"20px",marginRight:"8px"}}),f.message]})})})]})})},eb=({value:n,onChange:e,disabled:t=!1,maxSize:r=10*1024*1024,acceptedTypes:i=["image/jpeg","image/jpg","image/png","image/gif","image/webp"],className:a=""})=>{const[s,c]=O.useState(!1),[d,f]=O.useState(""),p=O.useRef(null),m=E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?c(!0):E.type==="dragleave"&&c(!1)},v=E=>{if(E.preventDefault(),E.stopPropagation(),c(!1),t)return;const A=E.dataTransfer.files;A&&A[0]&&w(A[0])},x=E=>{if(t)return;const A=E.target.files?.[0];A&&w(A)},w=E=>{if(f(""),!i.includes(E.type)){f(`Invalid file type. Allowed types: ${i.join(", ")}`);return}if(E.size>r){f(`File too large. Maximum size is ${(r/1024/1024).toFixed(1)}MB`);return}e(E)},_=()=>{e(null),f(""),p.current&&(p.current.value="")},S=E=>{if(E===0)return"0 Bytes";const A=1024,T=["Bytes","KB","MB","GB"],R=Math.floor(Math.log(E)/Math.log(A));return parseFloat((E/Math.pow(A,R)).toFixed(2))+" "+T[R]};return g.jsxs("div",{className:`image-upload-container ${a}`,children:[g.jsx("input",{ref:p,type:"file",accept:i.join(","),onChange:x,style:{display:"none"},disabled:t}),g.jsx("div",{className:`upload-area ${s?"drag-active":""} ${t?"disabled":""}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:v,onClick:()=>!t&&p.current?.click(),children:n?g.jsxs("div",{className:"file-selected",children:[g.jsx("div",{className:"file-preview",children:g.jsx("img",{src:URL.createObjectURL(n),alt:"Preview",className:"preview-image"})}),g.jsxs("div",{className:"file-info",children:[g.jsx("div",{className:"file-name",children:n.name}),g.jsx("div",{className:"file-size",children:S(n.size)})]}),g.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),_()},className:"remove-file-btn",disabled:t,children:g.jsx(Dt,{size:16})})]}):g.jsxs("div",{className:"upload-empty",children:[g.jsx("div",{className:"upload-icon",children:g.jsx(j1,{size:32})}),g.jsxs("div",{className:"upload-text",children:[g.jsx("div",{className:"upload-title",children:s?"Drop image here":"Click or drag to upload"}),g.jsxs("div",{className:"upload-subtitle",children:["Supports: JPG, PNG, GIF, WebP (max ",S(r),")"]})]}),g.jsx(BR,{size:20,className:"upload-arrow"})]})}),d&&g.jsxs(Je.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"upload-error",children:[g.jsx(fr,{size:16}),g.jsx("span",{children:d})]})]})};let dr=!1;const Pk=(n=800,e=200,t=.3)=>{if(dr){console.log("🔇 Beep skipped (already playing)");return}try{dr=!0;const r=window.AudioContext||window.webkitAudioContext;if(!r){console.warn("⚠️ Web Audio API not supported");return}const i=new r,a=i.createOscillator(),s=i.createGain();a.connect(s),s.connect(i.destination),a.frequency.setValueAtTime(n,i.currentTime),a.type="sine",s.gain.setValueAtTime(0,i.currentTime),s.gain.linearRampToValueAtTime(t,i.currentTime+.01),s.gain.exponentialRampToValueAtTime(.01,i.currentTime+e/1e3),a.start(i.currentTime),a.stop(i.currentTime+e/1e3),setTimeout(()=>{dr=!1},e+100),console.log("🔊 Notification beep played")}catch(r){console.warn("⚠️ Failed to generate notification beep:",r),dr=!1}},Bk=(n=.3)=>{if(dr){console.log("🔇 Double beep skipped (already playing)");return}try{dr=!0;const e=window.AudioContext||window.webkitAudioContext,t=new e,r=t.createOscillator(),i=t.createGain();r.connect(i),i.connect(t.destination),r.frequency.setValueAtTime(800,t.currentTime),r.type="sine",i.gain.setValueAtTime(0,t.currentTime),i.gain.linearRampToValueAtTime(n,t.currentTime+.01),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),r.start(t.currentTime),r.stop(t.currentTime+.1),setTimeout(()=>{const a=t.createOscillator(),s=t.createGain();a.connect(s),s.connect(t.destination),a.frequency.setValueAtTime(1e3,t.currentTime),a.type="sine",s.gain.setValueAtTime(0,t.currentTime),s.gain.linearRampToValueAtTime(n,t.currentTime+.01),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.15),a.start(t.currentTime),a.stop(t.currentTime+.15)},150),setTimeout(()=>{dr=!1},400),console.log("🔊 Double notification beep played")}catch(e){console.warn("⚠️ Failed to generate double beep:",e),dr=!1}},Lk=(n=.3,e=null)=>{if(dr){console.log("🔇 Notification skipped (already playing)");return}try{if(dr=!0,!e){const a=window.AudioContext||window.webkitAudioContext;if(!a){console.warn("⚠️ Web Audio API not supported"),dr=!1;return}e=new a}const t=[523,659,784],r=[],i=[];t.forEach((a,s)=>{const c=e.createOscillator(),d=e.createGain();c.connect(d),d.connect(e.destination),c.frequency.setValueAtTime(a,e.currentTime),c.type="sine";const f=e.currentTime+s*.02,p=f+.3;d.gain.setValueAtTime(0,f),d.gain.linearRampToValueAtTime(n*.3,f+.01),d.gain.exponentialRampToValueAtTime(.01,p),c.start(f),c.stop(p),r.push(c),i.push(d)}),setTimeout(()=>{dr=!1},400),console.log("🔊 Pleasant notification sound played")}catch(t){console.warn("⚠️ Failed to generate pleasant notification:",t),dr=!1}};let v0=null,tb=!1;const ql=()=>{const n=O.useRef(null),e=O.useRef(!1),t=O.useCallback(async()=>{if(e.current||tb){n.current=v0,e.current=!0;return}try{const c=window.AudioContext||window.webkitAudioContext;n.current=new c,v0=n.current,n.current.state==="suspended"&&await n.current.resume(),e.current=!0,tb=!0,console.log("🔊 Sound notification system initialized")}catch(c){console.warn("⚠️ Failed to initialize audio:",c)}},[]),r=O.useCallback(async()=>{try{e.current||await t();const c=v0||n.current;if(!c){console.warn("⚠️ Audio context not available");return}c.state==="suspended"&&await c.resume(),console.log("🔊 Calling generatePleasantNotification with audio context:",c),Lk(.3,c)}catch(c){console.warn("⚠️ Failed to play notification sound:",c)}},[t]),i=O.useCallback(async()=>{try{e.current||await t(),await r()}catch(c){console.warn("⚠️ Failed to play notification with interaction:",c)}},[t,r]),a=O.useCallback(()=>{Bk(.3)},[]),s=O.useCallback(()=>{Pk(800,200,.3)},[]);return O.useEffect(()=>()=>{n.current&&(n.current.close(),n.current=null)},[]),{playNotification:r,playNotificationWithInteraction:i,playDoubleBeep:a,playSimpleBeep:s,initializeAudio:t}},y0="dd856fdc-905b-4de3-a7e3-771ad81df52c",_S=O.createContext(),gd=()=>{const n=O.useContext(_S);if(!n)throw new Error("useNotification must be used within a NotificationProvider");return n},Fk=({children:n})=>{const{playNotification:e,initializeAudio:t}=ql(),[r,i]=O.useState(!0),[a,s]=O.useState(0),[c,d]=O.useState(!1),[f,p]=O.useState(0),[m,v]=O.useState(null),x=O.useRef(null),w=O.useRef(null),_=O.useRef(3e3),S=O.useRef(null),E=O.useRef(null),A=O.useRef(new Set);O.useEffect(()=>{const q=async()=>{if(!c){console.log("🔊 Initializing audio on first user interaction...");try{await t(),d(!0),console.log("✅ Audio initialization successful")}catch(ae){console.error("❌ Audio initialization failed:",ae)}document.removeEventListener("click",q),document.removeEventListener("keydown",q)}};return document.addEventListener("click",q),document.addEventListener("keydown",q),document.addEventListener("touchstart",q),()=>{document.removeEventListener("click",q),document.removeEventListener("keydown",q),document.removeEventListener("touchstart",q)}},[t,c,e]);const T=O.useCallback(q=>{S.current&&clearTimeout(S.current);const ae=q.isCancellation||q.order_type==="cancelled",ce=q.isAvailabilityChange,F=q.isError;let ee={id:Date.now(),timestamp:new Date().toISOString(),orderData:q};F?(ee.type="error",ee.title="Error!",ee.message=q.item_name||"An error occurred"):ce?(ee.type="availability_change",ee.title="Item Availability Updated!",ee.message=q.item_name||"Item availability has been changed"):ae?(ee.type="order_cancelled",ee.title="Order Cancelled!",ee.message=`${q.item_name||"Order"} has been cancelled`):(ee.type="new_order",ee.title="New Order Received!",ee.message=`Order #${q.order_token||q.token_no||"N/A"} - ${q.item_name||"Unknown Item"}`),v(ee),S.current=setTimeout(()=>{v(null)},5e3)},[]),R=O.useCallback(async q=>{if(console.log("🔔 showOrderNotification called with:",q),console.log("🔔 Current state:",{isEnabled:r,isInitialized:c,timeSinceLastNotification:Date.now()-f,cooldown:_.current}),!r){console.log("🔇 Notifications disabled");return}if(!c){console.log("🔇 Audio not initialized yet");return}const ae=Date.now(),ce=ae-f,F=[q?.id,q?.order_id,q?.token_no,q?.order_token].filter(Boolean);for(const he of F)if(A.current.has(he)){console.log("🔇 Notification suppressed for local order:",he),A.current.delete(he);return}const ee=q.id||q.order_id||q.token_no;if(E.current===ee){console.log("🔇 Notification skipped (duplicate order ID):",ee);return}if(ce<_.current){console.log("🔇 Notification skipped (cooldown active):",ce,"ms <",_.current,"ms");return}console.log("🔔 Showing order notification...",q),p(ae),E.current=ee,console.log("📱 Showing popup notification..."),T(q),console.log("🔊 Attempting to play notification sound...");try{await e(),console.log("✅ Sound notification played successfully")}catch(he){console.error("❌ Failed to play sound notification:",he)}},[e,f,T,r,c]),I=O.useCallback(()=>{v(null),S.current&&clearTimeout(S.current)},[]);O.useEffect(()=>{if(!r||!c)return;const q=async()=>{try{const{data:ae,error:ce}=await xe.from("orders").select("id, status, user_id").in("status",["pending","PENDING"]).neq("user_id",y0).gte("created_at",new Date(Date.now()-6e4).toISOString());if(ce){console.warn("⚠️ Failed to check for new orders:",ce);return}const F=ae?.length||0;if(F>a&&a>0){console.log("🔔 New order detected via polling!");try{const{data:ee}=await xe.from("orders").select("*").in("status",["pending","PENDING"]).neq("user_id",y0).order("created_at",{ascending:!1}).limit(1).single();ee?await R(ee):await R({item_name:"New Order",order_token:"N/A"})}catch(ee){console.warn("⚠️ Failed to get latest order details:",ee),await R({item_name:"New Order",order_token:"N/A"})}}s(F)}catch(ae){console.warn("⚠️ Error checking for new orders:",ae)}};return x.current=setInterval(q,5e3),()=>{x.current&&clearInterval(x.current)}},[r,c,a,R]),O.useEffect(()=>{if(!(!r||!c))return w.current&&w.current.unsubscribe(),w.current=xe.channel("orders-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},async q=>{console.log("🔔 NotificationContext: New order inserted via real-time:",q.new),console.log("🔍 Order details:",{status:q.new.status,user_id:q.new.user_id,item_name:q.new.item_name,created_at:q.new.created_at,id:q.new.id});const ae=q.new.status==="pending"||q.new.status==="PENDING",ce=q.new.user_id!==y0;if(console.log("🔍 Filter check:",{isPending:ae,isNotAppOrder:ce,willNotify:ae&&ce,statusValue:q.new.status,userIdValue:q.new.user_id}),ae&&ce){console.log("✅ NotificationContext: Showing notification for counter order!");try{await R(q.new),console.log("✅ NotificationContext: Notification triggered successfully")}catch(F){console.error("❌ NotificationContext: Error showing notification:",F)}}else console.log("❌ NotificationContext: Notification filtered out:",{reason:ae?"App order":"Not pending status",status:q.new.status,user_id:q.new.user_id})}).subscribe(),()=>{w.current&&(w.current.unsubscribe(),w.current=null)}},[r,c,R]),O.useEffect(()=>{if(!r||!c)return;const q=async ae=>{console.log("🔔 NotificationContext: Received orderInserted event from Orders Panel:",ae.detail),console.log("🔍 Event details:",{orderData:ae.detail,isEnabled:r,isInitialized:c});try{const ce=ae.detail;console.log("✅ NotificationContext: Triggering notification from Orders Panel event!"),await R(ce),console.log("✅ NotificationContext: Orders Panel notification triggered successfully")}catch(ce){console.warn("⚠️ NotificationContext: Error handling orderInserted event:",ce)}};return window.addEventListener("orderInserted",q),()=>{window.removeEventListener("orderInserted",q)}},[r,c,R]);const H={isEnabled:r,toggleNotifications:()=>{i(!r)},playTestSound:async()=>{await e()},isInitialized:c,popupNotification:m,closePopupNotification:I,showOrderNotification:R,suppressNotificationForOrder:q=>{if(q)try{A.current.add(q),setTimeout(()=>A.current.delete(q),6e4)}catch{}}};return g.jsx(_S.Provider,{value:H,children:n})};function Uk(){const[n,e]=O.useState(null),[t,r]=O.useState(!1),[i,a]=O.useState(""),{playNotification:s}=ql();O.useRef(""),O.useRef(null);const c=O.useRef({code:"",time:0}),d=O.useCallback(x=>{if(!x)return null;const w=String(x).trim();if(w)return w;try{const S=new URL(w).searchParams,E=S.get("qr_code")||S.get("order_qr_code")||S.get("code");if(E)return E}catch{}return null},[]),f=O.useCallback(async x=>{try{console.log("🔍 Fetching order for QR code:",x);const{data:w,error:_}=await xe.from("orders").select("id,item_name,qr_code,order_token,created_at,status,total_amount,user_id,order_type").eq("qr_code",x).limit(1).maybeSingle();if(_)throw console.error("Error fetching order:",_),_;return w&&w.qr_code===x?(console.log("✅ Order found:",w),w):(console.log("❌ No order found for QR code:",x),null)}catch(w){return console.error("Failed to fetch order:",w),null}},[]),p=O.useCallback(async x=>{const w=Date.now();if(c.current.code===x&&w-c.current.time<2e3){console.log("⏭️ Duplicate scan ignored");return}c.current={code:x,time:w};const _=d(x);if(!_){console.log("❌ Invalid QR code format"),a("Invalid QR code"),setTimeout(()=>a(""),2e3);return}if(t||n){console.log("📋 Already processing an order, ignoring new scan"),a("Please complete current order first"),setTimeout(()=>a(""),2e3);return}r(!0);const S=await f(_);if(S){e(S),a("✅ Order scanned successfully");try{await s()}catch(E){console.log("Sound failed:",E)}setTimeout(()=>a(""),2e3)}else a("❌ Order not found"),setTimeout(()=>a(""),2e3);r(!1)},[n,t,d,f,s]),m=O.useCallback(()=>{e(null),a("")},[]),v=O.useCallback(x=>{p(x)},[p]);return{scannedOrder:n,isProcessing:t,scanMessage:i,closeModal:m,scanQRCode:v,processQRCode:p}}const zk="dd856fdc-905b-4de3-a7e3-771ad81df52c";function Vk(n){const e=String(n||"").toLowerCase();return e==="pending"?"PENDING":e==="preparing"?"PREPARING":e==="ready"?"READY":e==="delivered"?"DELIVERED":e==="cancelled"?"CANCELLED":e.toUpperCase()}function Hk({order:n,onClose:e}){const{playNotification:t}=ql(),[r,i]=O.useState(!1),[a,s]=O.useState(""),c=async()=>{if(n){i(!0),s("");try{const{error:f}=await xe.rpc("update_order_status_flexible",{p_order_id:n.id,p_new_status:"delivered"});if(f)throw f;try{await t()}catch(p){console.log("Sound failed:",p)}s("✅ Order marked as delivered"),setTimeout(()=>{e(),s("")},1e3)}catch(f){console.error("Failed to update order:",f),s(`❌ Failed: ${f.message||"Unknown error"}`),setTimeout(()=>s(""),3e3)}finally{i(!1)}}},d=async()=>{if(n&&window.confirm("Are you sure you want to cancel this order?")){i(!0),s("");try{const{error:f}=await xe.rpc("update_order_status_flexible",{p_order_id:n.id,p_new_status:"cancelled"});if(f)throw f;try{await t()}catch(p){console.log("Sound failed:",p)}s("✅ Order cancelled"),setTimeout(()=>{e(),s("")},1e3)}catch(f){console.error("Failed to cancel order:",f),s(`❌ Failed: ${f.message||"Unknown error"}`),setTimeout(()=>s(""),3e3)}finally{i(!1)}}};return n?g.jsx(kn,{children:g.jsxs(Je.div,{initial:{opacity:0,x:40},animate:{opacity:1,x:0},exit:{opacity:0,x:40},transition:{type:"spring",stiffness:300,damping:25},style:{position:"fixed",top:16,right:16,bottom:16,width:420,backgroundColor:"#ffffff",borderRadius:16,padding:24,zIndex:1e5,overflow:"auto",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"2px solid #e5e7eb",paddingBottom:"16px",position:"sticky",top:0,background:"#ffffff",zIndex:1},children:[g.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:"📦 Order Scanned"}),g.jsx("button",{onClick:e,disabled:r,style:{background:"none",border:"none",cursor:r?"not-allowed":"pointer",padding:"4px",display:"flex",alignItems:"center",color:"#6b7280",opacity:r?.5:1},children:g.jsx(Dt,{size:24})})]}),g.jsxs("div",{style:{backgroundColor:"#f9fafb",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid #e5e7eb"},children:[g.jsx("span",{style:{color:"#6b7280",fontSize:"14px",fontWeight:"500"},children:"Token Number:"}),g.jsxs("span",{style:{fontSize:"32px",fontWeight:"700",color:"#1f2937",backgroundColor:"#fff",padding:"8px 16px",borderRadius:"10px",border:"3px solid #3b82f6",letterSpacing:"2px"},children:["#",n.order_token||"N/A"]})]}),g.jsxs("div",{style:{marginBottom:"12px"},children:[g.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Items:"}),g.jsx("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:n.item_name||"Order Items"})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[g.jsxs("div",{children:[g.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Total Amount:"}),g.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"18px"},children:["₹",n.total_amount!=null?n.total_amount:"-"]})]}),g.jsxs("div",{children:[g.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Current Status:"}),g.jsx("div",{style:{fontWeight:"600",fontSize:"16px",color:n.status==="pending"?"#f59e0b":n.status==="preparing"?"#3b82f6":n.status==="ready"?"#10b981":n.status==="delivered"?"#6b7280":"#dc2626"},children:Vk(n.status)})]})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[g.jsxs("div",{children:[g.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Order Type:"}),g.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"14px"},children:n.order_type?"🥡 Takeaway":"🍽️ Dine In"})]}),g.jsxs("div",{children:[g.jsx("span",{style:{color:"#6b7280",fontSize:"14px",display:"block",marginBottom:"4px"},children:"Placed Via:"}),g.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"14px"},children:n.user_id===zk?"📱 App":"🏪 Counter"})]})]})]}),a&&g.jsx("div",{style:{marginBottom:"16px",padding:"12px",borderRadius:"8px",backgroundColor:a.includes("✅")?"#d1fae5":"#fee2e2",color:a.includes("✅")?"#065f46":"#991b1b",fontSize:"14px",fontWeight:"500",textAlign:"center"},children:a}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[n.status!=="delivered"&&n.status!=="cancelled"&&g.jsxs("button",{onClick:c,disabled:r,style:{width:"100%",padding:"16px 20px",fontSize:"16px",fontWeight:"600",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"10px",cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",opacity:r?.6:1},onMouseEnter:f=>{r||(f.target.style.backgroundColor="#059669")},onMouseLeave:f=>{r||(f.target.style.backgroundColor="#10b981")},children:[r?g.jsx(_i,{size:18,className:"spin"}):g.jsx(rs,{size:18}),r?"Updating...":"Mark as Delivered"]}),n.status==="delivered"&&g.jsx("div",{style:{padding:"16px",backgroundColor:"#d1fae5",color:"#065f46",borderRadius:"10px",textAlign:"center",fontWeight:"600"},children:"✅ This order has already been delivered"}),g.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.status!=="delivered"&&n.status!=="cancelled"&&g.jsx("button",{onClick:d,disabled:r,title:"Cancel order","aria-label":"Cancel order",style:{width:40,height:40,padding:0,fontSize:"14px",fontWeight:"500",backgroundColor:"#ffffff",color:"#dc2626",border:"1px solid #dc2626",borderRadius:"8px",cursor:r?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0px",transition:"all 0.2s ease",opacity:r?.6:1},onMouseEnter:f=>{r||(f.target.style.backgroundColor="#fef2f2")},onMouseLeave:f=>{r||(f.target.style.backgroundColor="#ffffff")},children:g.jsx(Dt,{size:16})}),g.jsx("button",{onClick:e,disabled:r,style:{flex:1,padding:"12px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:r?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:r?.6:1},onMouseEnter:f=>{r||(f.target.style.backgroundColor="#e5e7eb")},onMouseLeave:f=>{r||(f.target.style.backgroundColor="#f3f4f6")},children:"Close"})]})]}),g.jsx("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:g.jsxs("details",{style:{cursor:"pointer"},children:[g.jsx("summary",{style:{fontSize:"12px",color:"#6b7280",userSelect:"none",cursor:"pointer"},children:"Order Code Reference"}),g.jsx("code",{style:{fontSize:"11px",backgroundColor:"#f3f4f6",padding:"6px 10px",borderRadius:"4px",display:"block",marginTop:"8px",wordBreak:"break-all",color:"#374151",fontFamily:"monospace"},children:n.qr_code||"Not available"})]})})]})}):null}function $k({onScan:n,isEnabled:e=!1}){const t=O.useRef(""),r=O.useRef(null),i=O.useRef({code:"",time:0});return O.useEffect(()=>{if(!e)return;const a=s=>{if(!(s.target.tagName==="INPUT"||s.target.tagName==="TEXTAREA")){if(r.current&&clearTimeout(r.current),s.key==="Enter"&&t.current.length>0){const c=t.current;t.current="",console.log("📱 QR Scanned:",c);const d=Date.now();if(i.current.code===c&&d-i.current.time<2e3){console.log("⏭️ Duplicate scan ignored");return}i.current={code:c,time:d},n(c),s.preventDefault();return}s.key.length===1&&(t.current+=s.key),r.current=setTimeout(()=>{t.current=""},100)}};return window.addEventListener("keypress",a),()=>{window.removeEventListener("keypress",a),r.current&&clearTimeout(r.current)}},[e,n]),null}function Gk({onScan:n,onClose:e,isOpen:t}){const r=O.useRef(null),i=O.useRef(null),a=O.useRef(null),[s,c]=O.useState(!1),[d,f]=O.useState(null),[p,m]=O.useState(!1),v=async()=>{try{f(null);const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});m(!0);const _=new Mw;i.current=_,c(!0),await _.decodeFromVideoDevice(null,r.current,async(S,E,A)=>{try{A&&!a.current&&(a.current=A)}catch{}if(S){const T=String(S.getText()||"");T&&(console.log("📱 Camera scanned QR:",T),n(T),x())}E&&E.name})}catch(w){console.error("Camera error:",w),f(w.message||"Camera access denied"),m(!1)}},x=async()=>{try{c(!1),a.current&&(a.current.stop(),a.current=null),i.current&&(await i.current.reset(),i.current=null),r.current&&r.current.srcObject&&(r.current.srcObject.getTracks().forEach(_=>_.stop()),r.current.srcObject=null)}catch(w){console.error("Error stopping camera:",w)}};return O.useEffect(()=>(t?v():x(),()=>{x()}),[t]),t?g.jsx(kn,{children:g.jsx(Je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsxs(Je.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onClick:w=>w.stopPropagation(),style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"20px",maxWidth:"500px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[g.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"📱 Scan Student's QR Code"}),g.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",color:"#6b7280"},children:g.jsx(Dt,{size:24})})]}),g.jsxs("div",{style:{position:"relative",marginBottom:"20px"},children:[g.jsx("video",{ref:r,style:{width:"100%",maxHeight:300,background:"#000",borderRadius:"12px",display:s?"block":"none"},muted:!0,playsInline:!0}),!s&&!d&&g.jsxs("div",{style:{width:"100%",height:"300px",background:"#1f2937",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#9ca3af",gap:"12px"},children:[g.jsx(Fx,{size:48}),g.jsx("div",{children:"Starting camera..."})]}),d&&g.jsxs("div",{style:{width:"100%",minHeight:"300px",background:"#fee2e2",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#991b1b",gap:"12px",padding:"20px",boxSizing:"border-box"},children:[g.jsx(Lx,{size:48}),g.jsxs("div",{style:{textAlign:"center",width:"100%",wordWrap:"break-word",overflowWrap:"break-word"},children:[g.jsx("div",{style:{fontWeight:"600",marginBottom:"8px",wordWrap:"break-word",overflowWrap:"break-word"},children:"Camera Error"}),g.jsx("div",{style:{fontSize:"14px",lineHeight:"1.4",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"100%"},children:d})]})]}),s&&g.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"200px",height:"200px",border:"3px solid #3b82f6",borderRadius:"12px",background:"rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsx("div",{style:{color:"#ffffff",fontSize:"14px",fontWeight:"600",textAlign:"center",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"8px 16px",borderRadius:"8px"},children:"📱 Point at QR Code"})})]}),g.jsxs("div",{style:{backgroundColor:"#f3f4f6",borderRadius:"8px",padding:"16px",fontSize:"14px",color:"#374151"},children:[g.jsx("div",{style:{fontWeight:"600",marginBottom:"8px"},children:"Instructions:"}),g.jsx("div",{children:"1. Ask student to show their QR code on their phone"}),g.jsx("div",{children:"2. Point camera at the QR code"}),g.jsx("div",{children:"3. QR code will be scanned automatically"}),g.jsx("div",{children:"4. Order details will appear in a popup"})]}),g.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[g.jsxs("button",{onClick:s?x:v,style:{flex:1,padding:"12px 16px",backgroundColor:s?"#dc2626":"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px",fontWeight:"500"},children:[s?g.jsx(Lx,{size:16}):g.jsx(Fx,{size:16}),s?"Stop Camera":"Start Camera"]}),g.jsx("button",{onClick:e,style:{padding:"12px 16px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Cancel"})]})]})})}):null}function qk({onAuthSuccess:n}){const[e,t]=O.useState(""),[r,i]=O.useState(""),[a,s]=O.useState(!1),[c,d]=O.useState(""),[f,p]=O.useState("login"),m=async v=>{v.preventDefault(),s(!0),d("");try{let x;f==="login"?x=await xe.auth.signInWithPassword({email:e,password:r}):x=await xe.auth.signUp({email:e,password:r}),x.error?d(x.error.message):n&&n(x.data.user)}catch(x){d(x.message)}finally{s(!1)}};return g.jsx("div",{className:"auth-screen",children:g.jsxs("div",{className:"auth-container",children:[g.jsxs("div",{className:"auth-header",children:[g.jsx("div",{className:"auth-icon",children:g.jsx($0,{size:48})}),g.jsx("h1",{children:"IARE Canteen"}),g.jsx("p",{children:"Please sign in to continue"})]}),g.jsxs("form",{onSubmit:m,className:"auth-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"email",children:"Email"}),g.jsx("input",{id:"email",type:"email",value:e,onChange:v=>t(v.target.value),placeholder:"Enter your email",required:!0,autoFocus:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"password",children:"Password"}),g.jsx("input",{id:"password",type:"password",value:r,onChange:v=>i(v.target.value),placeholder:"Enter your password",required:!0})]}),c&&g.jsx("div",{className:"error-message",children:c}),g.jsx("button",{type:"submit",disabled:a,className:"auth-button",children:a?"Loading...":f==="login"?"Sign In":"Sign Up"}),g.jsx("div",{className:"auth-footer",children:g.jsx("button",{type:"button",onClick:()=>p(f==="login"?"signup":"login"),className:"toggle-mode",children:f==="login"?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})}const SS=O.createContext(null);function Wk({children:n}){const[e,t]=O.useState(null),[r,i]=O.useState(!0);O.useEffect(()=>{xe.auth.getSession().then(({data:{session:d}})=>{t(d?.user??null),i(!1)});const{data:{subscription:c}}=xe.auth.onAuthStateChange((d,f)=>{t(f?.user??null)});return()=>c.unsubscribe()},[]);const s={user:e,loading:r,signOut:async()=>{await xe.auth.signOut()}};return g.jsx(SS.Provider,{value:s,children:n})}function ES(){const n=O.useContext(SS);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}const nd={BASE_URL:"/IARE-Canteen-Web/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE:"/IARE-Canteen-Web/",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY",VITE_SUPABASE_URL:"https://znqhoohjugyblgwepovp.supabase.co"},ut=n=>String(n||"").toUpperCase(),Vr="dd856fdc-905b-4de3-a7e3-771ad81df52c",nb="1e47a19b-baf5-4dd7-86b5-c02243c00d58",Xk=async()=>{try{const{data:{session:n}}=await xe.auth.getSession();if(n)return n;const e=nd?.VITE_COUNTER_EMAIL,t=nd?.VITE_COUNTER_PASSWORD;if(e&&t){const{data:r,error:i}=await xe.auth.signInWithPassword({email:e,password:t});if(i)throw i;return r.session}return null}catch{return null}},Yk=async()=>{const{data:{session:n}}=await xe.auth.getSession();if(n?.user?.id){const e=nd?.VITE_COUNTER_EMAIL;return e&&n.user.email===e?nb:n.user.id}return await Xk(),nb},rb=n=>{switch(String(n).toUpperCase()){case"PENDING":case"PREPARING":return"Preparing";case"READY":return"Ready for Pickup";case"DELIVERED":return"Delivered";case"CANCELLED":case"CANCELED":return"Cancelled";default:return"Preparing"}};let en=null;function Kk(){return g.jsx(Qk,{children:g.jsx(Wk,{children:g.jsx(ZR,{children:g.jsx(Fk,{children:g.jsx(Zk,{})})})})})}function Zk(){const{user:n,loading:e}=ES(),[t,r]=O.useState(!1);return e?g.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[g.jsxs("div",{style:{background:"white",padding:"40px",borderRadius:"16px",textAlign:"center",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[g.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),g.jsx("p",{style:{margin:0,color:"#6b7280"},children:"Loading..."})]}),g.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]}):g.jsxs(g.Fragment,{children:[g.jsx(e9,{onShowAuth:()=>r(!0)}),t&&g.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},children:g.jsxs("div",{style:{position:"relative",background:"white",borderRadius:"16px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[g.jsx("button",{onClick:()=>r(!1),style:{position:"absolute",top:"16px",right:"16px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280",zIndex:1},children:"×"}),g.jsx(qk,{onAuthSuccess:()=>r(!1)})]})})]})}class Qk extends ob.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Unhandled error in App:",e,t)}render(){return this.state.hasError?g.jsxs("div",{style:{padding:24},children:[g.jsx("h2",{children:"Application error"}),g.jsx("pre",{style:{whiteSpace:"pre-wrap",color:"crimson"},children:String(this.state.error)})]}):this.props.children}}function Jk({onShowAuth:n}){const{user:e,signOut:t}=ES(),[r,i]=O.useState(!1);return e?g.jsxs("div",{style:{position:"relative"},children:[g.jsxs("button",{onClick:()=>i(!r),style:{display:"flex",alignItems:"center",gap:"8px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",boxShadow:"0 2px 8px rgba(102, 126, 234, 0.3)",transition:"all 0.2s"},onMouseEnter:a=>{a.target.style.transform="translateY(-1px)",a.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.4)"},onMouseLeave:a=>{a.target.style.transform="translateY(0)",a.target.style.boxShadow="0 2px 8px rgba(102, 126, 234, 0.3)"},children:[g.jsx($0,{size:16}),g.jsx("span",{children:e.email})]}),r&&g.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"8px",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",zIndex:1e3,minWidth:"200px"},children:[g.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #f3f4f6"},children:[g.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:e.email}),g.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:"Signed in"})]}),g.jsxs("button",{onClick:async()=>{await t(),i(!1)},style:{width:"100%",padding:"12px 16px",background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"14px",textAlign:"left",display:"flex",alignItems:"center",gap:"8px",transition:"background-color 0.2s"},onMouseEnter:a=>{a.target.style.backgroundColor="#fef2f2"},onMouseLeave:a=>{a.target.style.backgroundColor="transparent"},children:[g.jsx(LogOut,{size:16}),"Sign Out"]})]}),r&&g.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:()=>i(!1)})]}):g.jsxs("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:"8px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",fontSize:"14px",fontWeight:"500",boxShadow:"0 2px 8px rgba(102, 126, 234, 0.3)",transition:"all 0.2s"},onMouseEnter:a=>{a.target.style.transform="translateY(-1px)",a.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.4)"},onMouseLeave:a=>{a.target.style.transform="translateY(0)",a.target.style.boxShadow="0 2px 8px rgba(102, 126, 234, 0.3)"},children:[g.jsx($0,{size:16}),g.jsx("span",{children:"Sign In"})]})}function e9({onShowAuth:n}){const e=Ai();id();const[t,r]=O.useState("checking"),{showOrderNotification:i}=gd();O.useEffect(()=>{const se=setTimeout(()=>{t==="checking"&&(console.log("🔄 Fallback timer: showing main content"),r("connected"))},15e3);return()=>clearTimeout(se)},[t]);const{scannedOrder:a,scanMessage:s,closeModal:c,processQRCode:d}=Uk(),[f,p]=O.useState(!1),m=O.useRef(""),v=O.useRef(null),x=O.useRef(0);O.useEffect(()=>{const se=()=>{m.current=""},we=Ce=>{if(Ce.altKey||Ce.ctrlKey||Ce.metaKey)return;const Me=Date.now(),dt=Me-(x.current||0);if(x.current=Me,dt>120&&(m.current=""),Ce.key==="Enter"){const Ne=m.current.trim();se(),/^\d{16}$/.test(Ne)&&d(Ne);return}Ce.key&&Ce.key.length===1&&/\d/.test(Ce.key)&&(m.current+=Ce.key,v.current&&clearTimeout(v.current),v.current=setTimeout(se,500))};return window.addEventListener("keydown",we),()=>{window.removeEventListener("keydown",we),v.current&&clearTimeout(v.current)}},[d]);const[w,_]=O.useState(()=>localStorage.getItem("theme")||"light"),[S,E]=O.useState(()=>{const se=localStorage.getItem("sidebarExpanded");return se!==null?JSON.parse(se):!0});O.useEffect(()=>{document.documentElement.setAttribute("data-theme",w),document.documentElement.classList.toggle("dark",w==="dark"),localStorage.setItem("theme",w)},[w]),O.useEffect(()=>{localStorage.setItem("sidebarExpanded",JSON.stringify(S))},[S]);const T=["/","/orders","/place-order","/manage-orders"].includes(e.pathname),I={"/":"Dashboard","/place-order":"Place Order","/orders":"Orders","/inventory":"Inventory Management","/manage-orders":"Manage Orders","/pre-order":"Pre-Order","/scan":"Scan QR","/ai":"AI Predictions","/settings":"Settings"}[e.pathname]||"Dashboard",[M,U]=O.useState("live"),[H,q]=O.useState(!1),[ae,ce]=O.useState([]),[F,ee]=O.useState([]),[he,_e]=O.useState([]),[V,B]=O.useState([]),[W,de]=O.useState({}),[pe,j]=O.useState(null),G=async(se,we)=>{const Ce=[...F];ee(Me=>Me.map(Ne=>Ne.id===se?{...Ne,status:we}:Ne).sort((Ne,Te)=>new Date(Ne.created_at)-new Date(Te.created_at))),de(Me=>({...Me,[se]:!0}));try{const{data:Me,error:dt}=await xe.rpc("update_order_status_flexible",{p_order_id:se,p_new_status:String(we).toLowerCase()});if(dt)throw dt;try{const P=rb(we);await xe.from("order_items").update({status:P}).eq("order_id",se)}catch(P){console.warn("⚠️ Failed to sync order_items.status:",P)}const Ne=Ce.find(P=>P.id===se)||F.find(P=>P.id===se);if(!Ne)return;const Te=Ne.status,D=new Date().toLocaleString();if(we==="READY"){ee(P=>P.map(fe=>fe.id===se?{...fe,status:"READY"}:fe).sort((fe,Ae)=>new Date(fe.created_at)-new Date(Ae.created_at))),ce(P=>{const Y=P.filter(fe=>!(fe.orderId===se&&fe.to==="PREPARING"));return[{orderId:se,itemName:Ne.item_name,from:Te,to:"READY",ts:Date.now()},...Y]}),B(P=>[{orderId:se,itemName:Ne.item_name,from:Te,to:"READY",at:D,ts:Date.now(),prevLoc:"live",nextLoc:"live"},...P.filter(Y=>!(Y.orderId===se&&Y.to==="PREPARING"))]);return}if(we==="DELIVERED"){ee(P=>P.filter(Y=>Y.id!==se)),_e(P=>[{...Ne,status:"DELIVERED",deliveredAt:Date.now()},...P]),ce(P=>{const Y=P.filter(fe=>!(fe.orderId===se&&fe.to==="PREPARING"));return[{orderId:se,itemName:Ne.item_name,from:Te,to:"DELIVERED",ts:Date.now()},...Y]}),B(P=>[{orderId:se,itemName:Ne.item_name,from:Te,to:"DELIVERED",at:D,ts:Date.now(),prevLoc:"live",nextLoc:"delivered"},...P.filter(Y=>!(Y.orderId===se&&Y.to==="PREPARING"))]),console.log("📦 Order marked as delivered - stock was already reduced on order placement");return}ee(P=>P.map(fe=>fe.id===se?{...fe,status:we}:fe).sort((fe,Ae)=>new Date(fe.created_at)-new Date(Ae.created_at))),ce(P=>[{orderId:se,itemName:Ne.item_name,from:Te,to:we,ts:Date.now()},...P]),B(P=>[{orderId:se,itemName:Ne.item_name,from:Te,to:we,at:D,ts:Date.now(),prevLoc:"live",nextLoc:"live"},...P])}catch(Me){console.error("Failed to update order status:",Me);try{ee(Ce)}catch{}alert("Failed to update order status: "+(Me.message||Me))}finally{de(Me=>{const dt={...Me};return delete dt[se],dt})}},ie=async se=>{const we=F.find(Ce=>Ce.id===se);we&&j({orderId:se,itemName:we.item_name})},ge=async se=>{j(null);try{console.log("🔄 Starting order cancellation for ID:",se);const{data:we,error:Ce}=await xe.from("orders").select("item_name, status, id").eq("id",se).single();if(Ce){console.error("❌ Could not fetch order details:",Ce),alert(`Failed to fetch order details: ${Ce.message}`);return}if(console.log("📋 Order data retrieved:",we),ut(we.status)==="DELIVERED"){alert('Cannot cancel delivered orders. Use "Revert" instead.');return}const{error:dt}=await xe.from("orders").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",se);if(dt){console.error("❌ Failed to update order status:",dt),alert(`Failed to cancel order: ${dt.message}`);return}console.log("✅ Order status updated to CANCELLED");try{await xe.from("order_items").update({status:rb("CANCELLED")}).eq("order_id",se)}catch(Ne){console.warn("⚠️ Failed to sync order_items.status on cancel:",Ne)}if(we.item_name){console.log("📦 Order canceled, restoring stock for:",we.item_name);try{const{data:Ne,error:Te}=await xe.from("food_items").select("available_quantity").eq("name",we.item_name).single();if(Te)console.error("❌ Could not fetch current stock for restore:",Te),console.warn("⚠️ Order canceled but stock not restored. Please update manually.");else{const D=Ne.available_quantity+1,{error:P}=await xe.from("food_items").update({available_quantity:D,is_available:!0,updated_at:new Date().toISOString()}).eq("name",we.item_name);P?(console.error("❌ Failed to restore stock on cancel:",P),console.warn("⚠️ Order canceled but stock not restored. Please update manually.")):(console.log("✅ Stock restored on cancel (marked as available)"),en&&en())}}catch(Ne){console.error("❌ Stock restoration error:",Ne)}}ee(Ne=>Ne.filter(Te=>Te.id!==se));try{await i({item_name:we.item_name||"Order",order_token:"CANCELLED",total_amount:0,order_type:"cancelled",user_id:Vr,isCancellation:!0})}catch(Ne){console.warn("⚠️ Failed to show notification:",Ne)}console.log("✅ Order cancellation completed successfully")}catch(we){console.error("❌ Error canceling order:",we),alert(`Failed to cancel order: ${we.message||"Unknown error"}`)}};O.useEffect(()=>{console.log("🚀 DashboardShell useEffect triggered");const se=setTimeout(()=>{t==="checking"&&(console.log("⏰ Connection timeout, proceeding anyway"),r("connected"))},1e4),we=async()=>{console.log("📡 fetchOrders called");try{const Ne="https://znqhoohjugyblgwepovp.supabase.co",Te="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpucWhvb2hqdWd5Ymxnd2Vwb3ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0OTk0OTAsImV4cCI6MjA3MDA3NTQ5MH0.dEWUpJtDbzLKRv9UtxpJLEmSMT6M_QChI3eu8EjO3dY";r("connecting");const D=1e3;let P=0,Y=[];for(;;){const Ee=P+D-1,{data:He,error:et}=await xe.from("orders").select("*").order("created_at",{ascending:!0}).range(P,Ee);if(et)throw et;const ft=He||[];if(console.log("Fetched batch:",ft.length,"orders"),Y=Y.concat(ft),ft.length<D)break;P+=D}try{const Ee=Array.from(new Set((Y||[]).map(He=>He.item_id||He.itemId||He.item).filter(Boolean)));if(Ee.length>0){let He=Object.create(null);try{const{data:et,error:ft}=await xe.from("order_items").select("*").in("id",Ee);if(ft)throw ft;for(const Ke of et||[]){const z=Ke.id||Ke.item_id||Ke.code||Ke.slug,le=Ke.price??Ke.cost??Ke.rate??Ke.amount;z&&typeof le=="number"&&(He[z]=le)}const it=Ee.filter(Ke=>He[Ke]==null);if(it.length>0){const{data:Ke}=await xe.from("order_items").select("*").in("item_id",it);for(const z of Ke||[]){const le=z.item_id||z.id||z.code||z.slug,ve=z.price??z.cost??z.rate??z.amount;le&&typeof ve=="number"&&(He[le]=ve)}}}catch{const{data:ft,error:it}=await xe.from("food_items").select("*").in("id",Ee);if(!it)for(const Ke of ft||[]){const z=Ke.id||Ke.item_id||Ke.code||Ke.slug,le=Ke.price??Ke.cost??Ke.rate??Ke.amount;z&&typeof le=="number"&&(He[z]=le)}}Y=Y.map(et=>{const ft=et.item_id||et.itemId||et.item,it=He[ft];return it!=null&&(et.total_amount==null||Number.isNaN(et.total_amount))?{...et,total_amount:it}:et})}}catch(Ee){console.warn("Price merge skipped:",Ee?.message||Ee)}const fe=(Y||[]).filter(Ee=>{const He=ut(Ee.status);return He!=="DELIVERED"&&He!=="CANCELLED"}),Be=(Y||[]).filter(Ee=>{const He=ut(Ee.status);return He==="DELIVERED"||He==="CANCELLED"}).sort((Ee,He)=>new Date(He.created_at)-new Date(Ee.created_at)),Ie=fe.sort((Ee,He)=>{const et=new Date(Ee.created_at),ft=new Date(He.created_at);return et-ft});console.log("Total orders fetched:",Y.length),console.log("Live orders:",Ie.length),console.log("Past orders:",Be.length),console.log("Sample order:",Y[0]),ee(Ie),_e(Be),r("connected"),clearTimeout(se)}catch(Ne){console.error("Supabase orders fetch failed:",Ne),r("error"),Ne.message?.includes("JWT")?console.error("Authentication error - check your Supabase anon key"):Ne.message?.includes('relation "orders" does not exist')&&console.error("Orders table does not exist - run the SQL script in Supabase")}};we();let Ce=setInterval(we,1e3),Me=!1;const dt=xe.channel("public:orders").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},async Ne=>{console.log("🔄 Orders Panel: New order received via real-time:",Ne.new),Me||(Me=!0,Ce&&(clearInterval(Ce),Ce=null));let Te=Ne.new;try{if(Te&&(Te.total==null||Number.isNaN(Te.total))){const D=Te.item_id||Te.itemId||Te.item;if(D){let P=null;try{const{data:Y,error:fe}=await xe.from("order_items").select("*").or(`id.eq.${D},item_id.eq.${D}`);if(!fe){const Ae=(Y||[])[0];P=Ae?Ae.price??Ae.cost??Ae.rate??Ae.amount??null:null}}catch{}if(P==null)try{const{data:Y,error:fe}=await xe.from("food_items").select("*").or(`id.eq.${D},item_id.eq.${D}`);if(!fe){const Ae=(Y||[])[0];P=Ae?Ae.price??Ae.cost??Ae.rate??Ae.amount??null:null}}catch{}typeof P=="number"&&(Te={...Te,total_amount:P})}}}catch{}ee(D=>[Te,...D].sort((Y,fe)=>{const Ae=ut(Y.status),Be=ut(fe.status),Ie=et=>{switch(et){case"PENDING":return 1;case"READY":return 2;case"CANCELLED":return 3;default:return 4}},Ee=Ie(Ae),He=Ie(Be);return Ee!==He?Ee-He:new Date(Y.created_at)-new Date(fe.created_at)}));try{console.log("🔔 Orders Panel: Checking if notification should be triggered for order:",Te);const D=Te.status==="preparing"||Te.status==="PREPARING",P=Te.user_id!==Vr;if(console.log("🔍 Orders Panel: Filter check:",{status:Te.status,user_id:Te.user_id,isPreparing:D,isNotAppOrder:P,willNotify:D&&P}),D&&P){console.log("✅ Orders Panel: Triggering notification for new order!");const Y=new CustomEvent("orderInserted",{detail:Te});window.dispatchEvent(Y)}else console.log("❌ Orders Panel: Notification filtered out:",{reason:isPending?"Admin/staff order":"Not pending status"})}catch(D){console.warn("⚠️ Orders Panel: Error triggering notification:",D)}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},async Ne=>{Me||(Me=!0,Ce&&(clearInterval(Ce),Ce=null));let Te=Ne.new;try{ee(D=>{const P=D.find(Be=>Be.id===Ne.new.id),Y=P&&(P.order_token||P.token_no);let fe={...Ne.new};return Y&&(fe.token_no=Y,fe.order_token=Y),ut(fe.status)==="DELIVERED"||ut(fe.status)==="CANCELLED"?D.filter(Be=>Be.id!==fe.id):D.map(Be=>Be.id===fe.id?fe:Be).sort((Be,Ie)=>new Date(Be.created_at)-new Date(Ie.created_at))}),(ut(Ne.new.status)==="DELIVERED"||ut(Ne.new.status)==="CANCELLED")&&_e(D=>[{...Te,deliveredAt:Date.now()},...D.filter(P=>P.id!==Te.id)]);return}catch{ut(Te.status)==="DELIVERED"||ut(Te.status)==="CANCELLED"?(ee(P=>P.filter(Y=>Y.id!==Te.id)),_e(P=>[{...Te,deliveredAt:Date.now()},...P.filter(Y=>Y.id!==Te.id)])):ee(P=>P.map(fe=>fe.id===Te.id?Te:fe).sort((fe,Ae)=>new Date(fe.created_at)-new Date(Ae.created_at)))}}).subscribe();return()=>{clearTimeout(se),Ce&&clearInterval(Ce);try{dt.unsubscribe()}catch{}}},[]);const ze=async se=>{if(!se)return;const{orderId:we,from:Ce,to:Me,prevLoc:dt,nextLoc:Ne}=se;if(dt==="live"&&Ne==="delivered"){const Te=he.find(D=>D.id===we);if(!Te)return;_e(D=>D.filter(P=>P.id!==we)),ee(D=>[{...Te,status:Ce},...D]),ce(D=>[{orderId:we,itemName:Te.item_name,from:Me,to:Ce,ts:Date.now()},...D]);try{await xe.rpc("update_order_status_flexible",{p_order_id:we,p_new_status:String(Ce).toLowerCase()})}catch{}}else if(dt==="live"&&Ne==="live"){ee(Te=>Te.map(D=>D.id===we?{...D,status:Ce}:D));try{const D=F.find(P=>P.id===we)?.item_name||"Order Item";ce(P=>[{orderId:we,itemName:D,from:Me,to:Ce,ts:Date.now()},...P])}catch{}try{await xe.rpc("update_order_status_flexible",{p_order_id:we,p_new_status:String(Ce).toLowerCase()})}catch{}}B(Te=>Te.filter(D=>D!==se))};return O.useEffect(()=>{const se=setInterval(()=>{ce(we=>we.filter(Ce=>Date.now()-Ce.ts<25e3)),B(we=>we.filter(Ce=>Ce.ts?Date.now()-Ce.ts<25e3:!0))},1e3);return()=>clearInterval(se)},[]),O.useEffect(()=>{window.__IARE_ORDERS__=F,window.__IARE_DELIVERED__=he},[F,he]),g.jsxs("div",{className:"app",children:[g.jsxs("aside",{className:`sidebar ${S?"expanded":"collapsed"}`,children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[S&&g.jsx("h2",{className:"brand",style:{margin:0},children:"IARE Canteen"}),g.jsx("button",{onClick:()=>E(!S),className:"sidebar-toggle-btn",style:{padding:"8px",borderRadius:"8px",border:"1px solid #e5e7eb",backgroundColor:w==="dark"?"#374151":"#f9fafb",color:w==="dark"?"#ffffff":"#1f2937",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",marginLeft:S?"0":"auto",marginRight:S?"0":"auto",width:"36px",height:"36px"},title:S?"Collapse sidebar":"Expand sidebar",children:S?g.jsx(q5,{size:20}):g.jsx(X5,{size:20})})]}),g.jsxs("nav",{className:"nav",children:[g.jsxs(Yr,{to:"/",end:!0,title:"Home",children:[g.jsx(uR,{size:20}),S&&g.jsx("span",{children:"Home"})]}),g.jsxs(Yr,{to:"/place-order",title:"Place Order",children:[g.jsx(Ba,{size:20}),S&&g.jsx("span",{children:"Place Order"})]}),g.jsxs(Yr,{to:"/orders",title:"Orders",children:[g.jsx(Bw,{size:20}),S&&g.jsx("span",{children:"Orders"})]}),g.jsxs(Yr,{to:"/inventory",title:"Inventory Management",children:[g.jsx(Uw,{size:20}),S&&g.jsx("span",{children:"Inventory Management"})]}),g.jsxs(Yr,{to:"/manage-orders",title:"Manage Orders",children:[g.jsx(Ux,{size:20}),S&&g.jsx("span",{children:"Manage Orders"})]}),g.jsxs(Yr,{to:"/scan",title:"Scan QR",children:[g.jsx(TR,{size:20}),S&&g.jsx("span",{children:"Scan QR"})]}),g.jsxs(Yr,{to:"/ai",title:"AI Predictions",children:[g.jsx(V5,{size:20}),S&&g.jsx("span",{children:"AI Predictions"})]}),g.jsxs(Yr,{to:"/pre-order",title:"Pre-Order",children:[g.jsx(Fw,{size:20}),S&&g.jsx("span",{children:"Pre-Order"})]}),g.jsxs(Yr,{to:"/settings",title:"Settings",children:[g.jsx(RR,{size:20}),S&&g.jsx("span",{children:"Settings"})]})]})]}),g.jsxs("main",{className:"main",children:[g.jsxs("header",{className:"topbar",children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[g.jsx("h1",{style:{margin:0},children:I}),T&&g.jsx("button",{onClick:()=>p(!0),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:se=>se.target.style.backgroundColor="#2563eb",onMouseLeave:se=>se.target.style.backgroundColor="#3b82f6",children:"📷 Scan QR Code"}),s&&g.jsx("div",{style:{padding:"6px 12px",backgroundColor:s.includes("✅")?"#d1fae5":s.includes("📋")?"#fef3c7":"#fee2e2",color:s.includes("✅")?"#065f46":s.includes("📋")?"#92400e":"#991b1b",borderRadius:"20px",fontSize:"12px",fontWeight:"500",animation:"fadeIn 0.3s ease"},children:s})]}),g.jsxs("div",{className:"header-actions",children:[e.pathname==="/orders"&&g.jsxs(g.Fragment,{children:[g.jsxs("button",{className:`btn orders-btn recent-btn ${M==="activity"?"active":""}`,onClick:()=>{U("activity"),console.log("📋 Recent orders view activated")},disabled:M==="activity",title:"View recent order activity",children:[g.jsx(Lw,{className:"w-4 h-4"}),"Recent"]}),g.jsxs("button",{className:`btn orders-btn live-btn ${M==="live"?"active":""}`,onClick:()=>{U("live"),console.log("🔴 Live orders view activated")},disabled:M==="live",title:"View live orders in real-time",children:[g.jsx(KR,{className:"w-4 h-4"}),"Live"]}),g.jsxs("button",{className:`btn orders-btn past-btn ${M==="past"?"active":""}`,onClick:()=>{U("past"),console.log("📜 Past orders view activated")},disabled:M==="past",title:"View completed orders history",children:[g.jsx(Ux,{className:"w-4 h-4"}),"Past"]}),M==="live"&&g.jsxs("button",{className:`btn orders-btn picture-btn ${H?"active":""}`,onClick:()=>{q(se=>!se),console.log(`🖼 Switched to ${H?"List":"Picture"} mode`)},title:`Switch to ${H?"List":"Picture"} view`,children:[H?g.jsx(M1,{className:"w-4 h-4"}):g.jsx(j1,{className:"w-4 h-4"}),H?"List Mode":"Picture Mode"]})]}),e.pathname==="/manage-orders"&&g.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px 16px",backgroundColor:"#fef3c7",color:"#92400e",borderRadius:"8px",fontSize:"14px",fontWeight:"500",border:"1px solid #f59e0b",marginRight:"12px"},children:[g.jsx("span",{style:{marginRight:"8px"},children:"🚧"}),"Under Development, Coming Soon!"]}),g.jsx(Je.button,{className:"theme-toggle-btn bg-white dark:bg-gray-800 text-black dark:text-white transition-colors duration-300",onClick:()=>_(w==="dark"?"light":"dark"),title:"Toggle Dark Mode",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:g.jsx(Je.div,{animate:{rotate:w==="dark"?180:0,scale:w==="dark"?1.1:1},transition:{duration:.3,ease:"easeInOut"},className:"text-black dark:text-white",children:w==="dark"?g.jsx(vR,{size:20}):g.jsx(DR,{size:20})})}),e.pathname==="/"&&g.jsx(Dk,{}),g.jsx(Jk,{onShowAuth:n})]})]}),t==="not-configured"?g.jsx("div",{className:"home-dashboard",children:g.jsxs("div",{className:"card",children:[g.jsx("h2",{style:{marginTop:0,color:"#ef4444"},children:"⚠️ Supabase Not Configured"}),g.jsxs("div",{style:{marginBottom:"16px"},children:[g.jsx("p",{children:"The app needs Supabase credentials to work properly."}),g.jsx("p",{children:"Please follow these steps:"})]}),g.jsxs("div",{style:{marginBottom:"16px"},children:[g.jsx("h3",{children:"1. Get Your Supabase Credentials"}),g.jsxs("p",{children:["Go to ",g.jsx("a",{href:"https://supabase.com/dashboard",target:"_blank",rel:"noopener noreferrer",children:"Supabase Dashboard"})," → Your Project → Settings → API"]}),g.jsx("p",{children:"Copy your Project URL and anon public key"})]}),g.jsxs("div",{style:{marginBottom:"16px"},children:[g.jsx("h3",{children:"2. Create .env File"}),g.jsxs("p",{children:["Create a file named ",g.jsx("code",{children:".env"})," in the project root with:"]}),g.jsx("pre",{style:{backgroundColor:"#f3f4f6",padding:"12px",borderRadius:"4px",fontSize:"14px",overflow:"auto"},children:`VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key_here
VITE_DISABLE_AUTH=true`})]}),g.jsxs("div",{style:{marginBottom:"16px"},children:[g.jsx("h3",{children:"3. Restart Development Server"}),g.jsx("p",{children:"After creating the .env file, restart the server:"}),g.jsx("code",{children:"npm run dev"})]}),g.jsxs("div",{style:{marginBottom:"16px"},children:[g.jsx("h3",{children:"4. Check Console"}),g.jsx("p",{children:"Open browser console (F12) to see connection status and any errors."})]}),g.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"🔄 Refresh Page"})]})}):t==="checking"?g.jsx("div",{className:"home-dashboard",children:g.jsxs("div",{className:"card",children:[g.jsx("h2",{style:{marginTop:0},children:"🔄 Connecting to Supabase..."}),g.jsx("p",{children:"Please wait while we connect to the database."}),g.jsx("div",{style:{textAlign:"center",marginTop:"20px"},children:g.jsx("div",{className:"spinner",style:{margin:"0 auto"}})}),g.jsx("button",{className:"btn btn-primary",onClick:()=>r("connected"),style:{marginTop:"20px"},children:"Continue Anyway (Skip Connection Check)"})]})}):t==="error"?g.jsx("div",{className:"home-dashboard",children:g.jsxs("div",{className:"card",children:[g.jsx("h2",{style:{marginTop:0,color:"#ef4444"},children:"❌ Connection Error"}),g.jsx("p",{children:"Failed to connect to Supabase. Please check:"}),g.jsxs("ul",{style:{marginLeft:"20px"},children:[g.jsx("li",{children:"Your Supabase credentials in .env file"}),g.jsx("li",{children:"Internet connection"}),g.jsx("li",{children:"Supabase project status"})]}),g.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"🔄 Try Again"})]})}):g.jsxs(PC,{children:[g.jsx(Xr,{path:"/",element:g.jsx(t9,{recent:ae,orders:F,onUpdateStatus:G,updatingIds:W})}),g.jsx(Xr,{path:"/place-order",element:g.jsx(r9,{})}),g.jsx(Xr,{path:"/orders",element:g.jsx(a9,{orders:F,deliveredOrders:he,activity:V,onUpdateStatus:G,onRevert:ze,onCancel:ie,onCancelOrder:ge,view:M,pictureMode:H,updatingIds:W})}),g.jsx(Xr,{path:"/inventory",element:g.jsx(o9,{})}),g.jsx(Xr,{path:"/manage-orders",element:g.jsx(kk,{})}),g.jsx(Xr,{path:"/pre-order",element:g.jsx(jk,{})}),g.jsx(Xr,{path:"/scan",element:g.jsx(c9,{})}),g.jsx(Xr,{path:"/ai",element:g.jsx(s9,{})}),g.jsx(Xr,{path:"/settings",element:g.jsx(l9,{})})]}),g.jsx(u9,{}),g.jsx($k,{isEnabled:T,onScan:d}),g.jsx(Hk,{order:a,onClose:c}),g.jsx(Gk,{isOpen:f,onScan:d,onClose:()=>p(!1)}),g.jsx(kn,{children:pe&&g.jsxs(g.Fragment,{children:[g.jsx(Je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>j(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),g.jsxs(Je.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:se=>se.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[g.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:g.jsx(fr,{size:24,style:{color:"#dc2626"}})}),g.jsx("div",{children:g.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Cancel Order?"})})]}),g.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["Are you sure you want to cancel the order for ",g.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',pe.itemName,'"']}),"? This action will restore the stock for this item."]}),g.jsxs("div",{style:{backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"12px",marginBottom:"24px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[g.jsx(fr,{size:16,style:{color:"#f59e0b",marginTop:"2px",flexShrink:0}}),g.jsx("p",{style:{margin:0,fontSize:"13px",color:"#92400e",lineHeight:"1.4"},children:"This will mark the order as cancelled and the customer will need to place a new order."})]}),g.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[g.jsx("button",{onClick:()=>j(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},className:"dark:!bg-gray-700 dark:!text-gray-200",onMouseEnter:se=>{se.target.style.backgroundColor="#e5e7eb"},onMouseLeave:se=>{se.target.style.backgroundColor="#f3f4f6"},children:"Keep Order"}),g.jsxs("button",{onClick:()=>ge(pe.orderId),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ef4444",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:se=>{se.target.style.backgroundColor="#dc2626"},onMouseLeave:se=>{se.target.style.backgroundColor="#ef4444"},children:[g.jsx(Dt,{size:16}),"Cancel Order"]})]})]})]})})]})]})}function hr({title:n,children:e,titleAction:t}){return g.jsxs("section",{className:"card bg-white dark:bg-gray-800 transition-colors duration-300",children:[n?g.jsxs("div",{className:"card-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[g.jsx("h2",{className:"text-black dark:text-white",style:{margin:0},children:n}),t&&g.jsx("div",{className:"card-title-action",style:{marginLeft:"auto"},children:t})]}):null,e]})}function t9({orders:n,recent:e=[],onUpdateStatus:t,updatingIds:r={}}){const i=id();[...n].sort((V,B)=>(B.createdAt??0)-(V.createdAt??0)).slice(0,5);const a=window.__IARE_DELIVERED__||[],s=n.length+a.length,c=n.filter(V=>ut(V.status)!=="READY").length,d=a.length,f=a.reduce((V,B)=>V+(B.total_amount||B.amount||0),0);ob.useMemo(()=>{const V=[...n,...a],B={};V.forEach(pe=>{const j=pe.item_name||pe.item||pe.name||"Unknown Item";B[j]=(B[j]||0)+1});const W=Object.entries(B).map(([pe,j])=>({name:pe,orders:j})).sort((pe,j)=>j.orders-pe.orders).slice(0,4),de=W[0]?.orders||1;return W.map(pe=>({...pe,percentage:Math.round(pe.orders/de*100)}))},[n,a]);const[p,m]=O.useState([]),[v,x]=O.useState(!1),[w,_]=O.useState(!1),[S,E]=O.useState(!1),[A,T]=O.useState([]),[R,I]=O.useState([]),[M,U]=O.useState(!1),[H,q]=O.useState(!1),ae=()=>{const V=["Order Token","Item","Total","Received At","Delivered At"],B=ge=>'"'+String(ge).replace(/"/g,'""')+'"',W=ge=>ge?new Date(ge).toISOString().slice(0,19).replace("T"," "):"",de=a.map(ge=>{const ze=new Date(ge.createdAt).getTime(),se=new Date(ge.deliveredAt).getTime(),we=ge.token||ge.id?.slice(-4);return[B(we?"#"+we:""),B(ge.item_name||"Food Item"),B(ge.total_amount||ge.amount||0),B(W(ze)),B(W(se))].join(",")}),pe=[V.join(","),...de].join(`
`),j=new Blob([pe],{type:"text/csv;charset=utf-8;"}),G=URL.createObjectURL(j),ie=document.createElement("a");ie.href=G,ie.download=`reports_${new Date().toISOString().slice(0,10)}.csv`,ie.click(),URL.revokeObjectURL(G)},ce=()=>{const V=`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body>
      <table border="1">
        <tr><th>Order Token</th><th>Item</th><th>Total</th><th>Received At</th><th>Delivered At</th></tr>
        ${a.map(pe=>{const j=pe.token||pe.id?.slice(-4);return`<tr>
            <td>${j?"#"+j:""}</td>
            <td>${pe.item_name||"Food Item"}</td>
            <td>₹${pe.total_amount||pe.amount||0}</td>
            <td>${new Date(pe.createdAt).toLocaleString()}</td>
            <td>${new Date(pe.deliveredAt).toLocaleString()}</td>
          </tr>`}).join("")}
      </table></body></html>`,B=new Blob(["\uFEFF",V],{type:"application/vnd.ms-excel"}),W=URL.createObjectURL(B),de=document.createElement("a");de.href=W,de.download=`reports_${new Date().toISOString().slice(0,10)}.xls`,de.click(),URL.revokeObjectURL(W)};O.useEffect(()=>{(async()=>{try{let W=0,de=[];for(;;){const j=W+1e3-1,{data:G,error:ie}=await xe.from("food_items").select("*").range(W,j);if(ie)throw ie;const ge=G||[];if(de=de.concat(ge),ge.length<1e3)break;W+=1e3}const pe=de.map(j=>{const G=j.name??j.item_name??j.title??j.label??"Item",ie=(typeof j.available_quantity=="number"?j.available_quantity>0:void 0)??j.in_stock??j.available??j.is_available??(typeof j.stock=="number"?j.stock>0:void 0)??(typeof j.status=="string"?String(j.status).toLowerCase()==="in":void 0)??!0;return{name:G,inStock:!!ie}});m(pe.filter(j=>!j.inStock))}catch{m([])}})()},[]),O.useEffect(()=>{v&&F()},[v]),O.useEffect(()=>{w&&ee()},[w]);const F=async()=>{try{U(!0);const{data:V,error:B}=await xe.from("food_items").select("*").eq("is_active",!0).order("name");if(B)throw B;T(V||[])}catch(V){console.error("Error fetching menu items:",V),alert("Failed to load menu items")}finally{U(!1)}},ee=async()=>{try{q(!0);const{data:V,error:B}=await xe.from("orders").select("*").eq("status","delivered").order("created_at",{ascending:!1}).limit(10);if(B)throw B;I(V||[])}catch(V){console.error("Error fetching delivered orders:",V),alert("Failed to load delivered orders")}finally{q(!1)}},he=async(V,B)=>{try{const W=!B,de=A.find(ie=>ie.id===V),pe={is_available:W,available_quantity:W?de?.available_quantity||10:0},{error:j}=await xe.from("food_items").update(pe).eq("id",V);if(j)throw j;T(ie=>ie.map(ge=>ge.id===V?{...ge,is_available:W,available_quantity:pe.available_quantity}:ge));const G=`${de?.name||"Item"} ${W?"enabled":"disabled"} successfully!`;await showAvailabilityNotification(G,!1)}catch(W){console.error("Error updating item availability:",W),await showAvailabilityNotification("Failed to update item availability",!0)}},_e=async V=>{if(confirm("Are you sure you want to revert this order?"))try{const{data:B,error:W}=await xe.from("orders").select("item_name").eq("id",V).single();if(W)throw console.error("❌ Could not fetch order details:",W),W;const{error:de}=await xe.from("orders").update({status:"pending"}).eq("id",V);if(de)throw de;console.log("📦 Order reverted, restoring stock for:",B.item_name);try{const{data:pe,error:j}=await xe.from("food_items").select("available_quantity").eq("name",B.item_name).single();if(j){console.error("❌ Could not fetch current stock for restore:",j);return}const G=pe.available_quantity+1,{error:ie}=await xe.from("food_items").update({available_quantity:G,is_available:!0,updated_at:new Date().toISOString()}).eq("name",B.item_name);ie?(console.error("❌ Failed to restore stock on revert:",ie),console.warn("⚠️ Order reverted but stock not restored. Please update manually.")):(console.log("✅ Stock restored on revert (marked as available)"),en&&en())}catch(pe){console.error("❌ Stock restoration error:",pe)}I(pe=>pe.filter(j=>j.id!==V)),alert("Order reverted successfully! Stock has been restored.")}catch(B){console.error("Error reverting order:",B),alert("Failed to revert order")}};return g.jsxs("div",{className:"home-dashboard",children:[g.jsxs("div",{className:"summary-cards",children:[g.jsxs("div",{className:"summary-card",children:[g.jsx("div",{className:"summary-icon",children:g.jsx(Bw,{className:"w-6 h-6"})}),g.jsxs("div",{className:"summary-content",children:[g.jsx("div",{className:"summary-value",children:s}),g.jsx("div",{className:"summary-label",children:"Total Orders"})]})]}),g.jsxs("div",{className:"summary-card",children:[g.jsx("div",{className:"summary-icon",children:g.jsx(Fw,{className:"w-6 h-6"})}),g.jsxs("div",{className:"summary-content",children:[g.jsx("div",{className:"summary-value",children:c}),g.jsx("div",{className:"summary-label",children:"Pending"})]})]}),g.jsxs("div",{className:"summary-card",children:[g.jsx("div",{className:"summary-icon",children:g.jsx(rs,{className:"w-6 h-6"})}),g.jsxs("div",{className:"summary-content",children:[g.jsx("div",{className:"summary-value",children:d}),g.jsx("div",{className:"summary-label",children:"Completed"})]})]}),g.jsxs("div",{className:"summary-card",children:[g.jsx("div",{className:"summary-icon",children:g.jsx(lR,{className:"w-6 h-6"})}),g.jsxs("div",{className:"summary-content",children:[g.jsxs("div",{className:"summary-value",children:["₹",f]}),g.jsx("div",{className:"summary-label",children:"Revenue"})]})]})]}),g.jsx("div",{className:"charts-section",children:g.jsx(hr,{title:"Quick Actions",children:g.jsxs("div",{className:"quick-actions-grid",children:[g.jsxs("button",{className:"quick-action-btn pending-orders-btn bg-gray-100 dark:bg-gray-700 text-black dark:text-white transition-colors duration-300",onClick:()=>{i("/orders?status=pending")},children:[g.jsx(M1,{className:"btn-icon text-black dark:text-white",size:24}),g.jsx("div",{className:"btn-text text-black dark:text-white",children:"View Pending Orders"})]}),g.jsxs("button",{className:"quick-action-btn toggle-availability-btn bg-gray-100 dark:bg-gray-700 text-black dark:text-white transition-colors duration-300",onClick:()=>x(!0),children:[g.jsx(zw,{className:"btn-icon text-black dark:text-white",size:24}),g.jsx("div",{className:"btn-text text-black dark:text-white",children:"Toggle Item Availability"})]}),g.jsxs("button",{className:"quick-action-btn revert-delivered-btn bg-gray-100 dark:bg-gray-700 text-black dark:text-white transition-colors duration-300",onClick:()=>_(!0),children:[g.jsx(MR,{className:"btn-icon text-black dark:text-white",size:24}),g.jsx("div",{className:"btn-text text-black dark:text-white",children:"Revert Delivered Order"})]})]})})}),g.jsx("div",{className:"reports-section",children:g.jsx(hr,{title:"Reports",titleAction:g.jsx("button",{className:"reports-shortcut-btn",onClick:()=>E(!0),children:"View Full Reports"}),children:g.jsx("div",{className:"reports-preview",children:g.jsxs("div",{className:"reports-buttons",children:[g.jsx("button",{className:"reports-btn export-csv-btn",onClick:ae,children:"Export CSV"}),g.jsx("button",{className:"reports-btn export-excel-btn",onClick:ce,children:"Export Excel"})]})})})}),v&&g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-content",children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h3",{children:"Toggle Item Availability"}),g.jsx("button",{className:"modal-close",onClick:()=>x(!1),children:g.jsx(Dt,{size:20})})]}),g.jsx("div",{className:"modal-body",children:M?g.jsx("div",{className:"loading",children:"Loading items..."}):g.jsx("div",{className:"items-list",children:A.map(V=>g.jsxs("div",{className:"item-row",children:[g.jsx("span",{className:"item-name",children:V.name}),g.jsxs("label",{className:"toggle-switch",children:[g.jsx("input",{type:"checkbox",checked:V.is_available||!1,onChange:()=>he(V.id,V.is_available||!1)}),g.jsx("span",{className:"slider"})]})]},V.id))})})]})}),w&&g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-content",children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h3",{children:"Revert Delivered Orders"}),g.jsx("button",{className:"modal-close",onClick:()=>_(!1),children:g.jsx(Dt,{size:20})})]}),g.jsx("div",{className:"modal-body",children:H?g.jsx("div",{className:"loading",children:"Loading orders..."}):g.jsx("div",{className:"orders-list",children:R.length===0?g.jsx("div",{className:"no-orders",children:"No delivered orders found"}):R.map(V=>g.jsxs("div",{className:"order-row",children:[g.jsxs("div",{className:"order-info",children:[g.jsxs("div",{className:"order-id",children:["Order #",V.id?.slice(-4)]}),g.jsx("div",{className:"order-item",children:V.item_name||"Food Item"}),g.jsx("div",{className:"order-time",children:new Date(V.created_at).toLocaleString()})]}),g.jsx("button",{className:"revert-btn",onClick:()=>_e(V.id),children:"Revert"})]},V.id))})})]})}),S&&g.jsx("div",{className:"modal-overlay",children:g.jsxs("div",{className:"modal-content reports-modal",children:[g.jsxs("div",{className:"modal-header",children:[g.jsx("h3",{children:"Reports"}),g.jsx("button",{className:"modal-close",onClick:()=>E(!1),children:g.jsx(Dt,{size:20})})]}),g.jsx("div",{className:"modal-body",children:g.jsx(n9,{})})]})})]})}function n9(){const[n,e]=O.useState(()=>new Date(Date.now()-864e5).toISOString().slice(0,10)),[t,r]=O.useState(()=>new Date().toISOString().slice(0,10)),[i,a]=O.useState([]);O.useEffect(()=>{(async()=>{try{if(window.__IARE_DELIVERED__&&window.__IARE_DELIVERED__.length>0)a(window.__IARE_DELIVERED__);else{const{data:v,error:x}=await xe.from("orders").select("*").eq("status","DELIVERED").order("created_at",{ascending:!1});if(x)throw x;a(v||[])}}catch(v){console.error("Failed to fetch delivered orders:",v),a([])}})()},[]);const s=m=>{const v=new Date(m);return isNaN(v)?null:v.getTime()},c=i.filter(m=>{const v=s(m.created_at||m.createdAt||m.received_at);s(m.delivered_at||m.deliveredAt||m.updated_at);const x=new Date(n).getTime(),w=new Date(t).getTime()+1440*60*1e3-1;return v&&v>=x&&v<=w}).map(m=>{const v=s(m.created_at||m.createdAt||m.received_at),x=s(m.delivered_at||m.deliveredAt||m.updated_at),w=m.token_no??m.order_token??m.token??m.token_number??m.id??null;return{id:m.id,token:w,item:m.item_name||m.item||"Food Item",total_amount:m.total_amount||m.total||m.price||0,receivedTs:v,deliveredTs:x}}),d=c.reduce((m,v)=>({orders:m.orders+1,revenue:m.revenue+(v.total_amount||0),items:m.items+1,PENDING:m.PENDING+(ut(v.status)==="PENDING"?1:0),PREPARING:m.PREPARING+(ut(v.status)==="PREPARING"?1:0),READY:m.READY+(ut(v.status)==="READY"?1:0)}),{orders:0,revenue:0,items:0,PENDING:0,PREPARING:0,READY:0}),f=()=>{const m=["Order Token","Item","Total","Received At","Delivered At"],v=R=>'"'+String(R).replace(/"/g,'""')+'"',x=R=>R?new Date(R).toISOString().slice(0,19).replace("T"," "):"",w=c.map(R=>[v(R.token?"#"+R.token:""),v(R.item),v(R.total_amount||0),v(x(R.receivedTs)),v(x(R.deliveredTs))].join(",")),_=["",v("Total Revenue"),v(d.revenue)].join(","),S=[m.join(","),...w,"",_].join(`
`),E=new Blob([S],{type:"text/csv;charset=utf-8;"}),A=URL.createObjectURL(E),T=document.createElement("a");T.href=A,T.download=`reports_${n}_to_${t}.csv`,T.click(),URL.revokeObjectURL(A)},p=()=>{const m=`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body>
      <table border="1">
        <tr><th>Order Token</th><th>Item</th><th>Total</th><th>Received At</th><th>Delivered At</th></tr>
        ${c.map(_=>`<tr>
          <td>${_.token?"#"+_.token:""}</td>
          <td>${_.item}</td>
          <td>₹${_.total_amount||0}</td>
          <td>${new Date(_.receivedTs).toLocaleString()}</td>
          <td>${new Date(_.deliveredTs).toLocaleString()}</td>
        </tr>`).join("")}
        <tr><td colspan="2"><strong>Total Revenue</strong></td><td><strong>₹${d.revenue}</strong></td><td colspan="2"></td></tr>
      </table></body></html>`,v=new Blob(["\uFEFF",m],{type:"application/vnd.ms-excel"}),x=URL.createObjectURL(v),w=document.createElement("a");w.href=x,w.download=`reports_${n}_to_${t}.xls`,w.click(),URL.revokeObjectURL(x)};return g.jsxs("div",{className:"reports-modal-content",children:[g.jsxs("div",{className:"reports-filters",children:[g.jsxs("div",{className:"field",style:{minWidth:220},children:[g.jsx("label",{className:"label",children:"From"}),g.jsx("input",{type:"date",className:"input",value:n,onChange:m=>e(m.target.value)})]}),g.jsxs("div",{className:"field",style:{minWidth:220},children:[g.jsx("label",{className:"label",children:"To"}),g.jsx("input",{type:"date",className:"input",value:t,onChange:m=>r(m.target.value)})]}),g.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[g.jsx("button",{className:"btn",onClick:f,children:"Export CSV"}),g.jsx("button",{className:"btn",onClick:p,children:"Export Excel"})]})]}),g.jsxs("div",{className:"reports-table",children:[g.jsxs("table",{className:"table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Order Token"}),g.jsx("th",{children:"Item"}),g.jsx("th",{children:"Total"}),g.jsx("th",{children:"Received"}),g.jsx("th",{children:"Delivered"})]})}),g.jsx("tbody",{children:c.slice(0,10).map(m=>g.jsxs("tr",{children:[g.jsx("td",{children:m.token?"#"+m.token:""}),g.jsx("td",{children:m.item}),g.jsxs("td",{children:["₹",m.total_amount||0]}),g.jsx("td",{children:new Date(m.receivedTs).toLocaleString()}),g.jsx("td",{children:new Date(m.deliveredTs).toLocaleString()})]},m.id))})]}),c.length>10&&g.jsxs("div",{className:"table-note",children:["Showing first 10 of ",c.length," orders. Export to see all data."]})]})]})}function r9(){const[n,e]=O.useState(null),[t,r]=O.useState(null),[i,a]=O.useState([]),[s,c]=O.useState([]),[d,f]=O.useState(!1),[p,m]=O.useState(""),[v,x]=O.useState([]),[w,_]=O.useState("all"),[S,E]=O.useState("button"),[A,T]=O.useState(0),R=O.useRef(null),{status:I,updateStatus:M,refreshStatus:U}=Hw(),[H,q]=O.useState([]),[ae,ce]=O.useState(!1),[F,ee]=O.useState("dine_in"),[he,_e]=O.useState(null);ql();const{suppressNotificationForOrder:V,showOrderNotification:B}=gd(),W=D=>{if(w==="all")return!0;if(w==="lunch"){const P=v.find(fe=>fe.name.toLowerCase()==="cuisine"),Y=v.find(fe=>fe.name.toLowerCase()==="lunch");return D.categoryId===P?.id||D.categoryId===Y?.id}if(w==="breakfast"){const P=v.find(fe=>fe.name.toLowerCase()==="snacks"),Y=v.find(fe=>fe.name.toLowerCase()==="breakfast");return D.categoryId===P?.id||D.categoryId===Y?.id}return D.categoryId===w},de=()=>i.filter(W).sort((D,P)=>{const Y=D.inStock?1:0,fe=P.inStock?1:0;if(Y!==fe)return fe-Y;const Ae=p.trim().toLowerCase(),Be=String(D.name||"").toLowerCase(),Ie=String(P.name||"").toLowerCase();if(Ae){const Ee=Be.startsWith(Ae),He=Ie.startsWith(Ae);if(Ee&&!He)return-1;if(!Ee&&He)return 1}return Be.localeCompare(Ie)}).map((D,P)=>({...D,displayNumber:P+1})).filter(D=>{const P=p.trim().toLowerCase();return P?String(D.name||"").toLowerCase().includes(P)||String(D.displayNumber).includes(P):!0});O.useEffect(()=>{R.current&&R.current.focus()},[]),O.useEffect(()=>{T(0)},[p,w]);const[pe,j]=O.useState(null),G=(D,P=1)=>{q(Y=>Y.find(Ae=>Ae.id===D.id)?Y.map(Ae=>Ae.id===D.id?{...Ae,quantity:Ae.quantity+P}:Ae):[...Y,{...D,quantity:P}])},ie=(D,P)=>{const Y=Math.max(1,P||1);q(fe=>fe.map(Ae=>Ae.id===D?{...Ae,quantity:Y}:Ae))},ge=D=>{q(P=>P.filter(Y=>Y.id!==D))},ze=()=>{q([])},se=()=>{const P=F==="takeaway";return H.reduce((Y,fe)=>{const Ae=P?fe.price+10:fe.price;return Y+Ae*fe.quantity},0)},we=()=>H.reduce((D,P)=>D+P.price*P.quantity,0),Ce=()=>F!=="takeaway"?0:H.reduce((P,Y)=>P+10*Y.quantity,0),Me=()=>H.reduce((D,P)=>D+P.quantity,0);O.useEffect(()=>{const D=async()=>{try{let Y=0,fe=[];for(;;){const Ie=Y+1e3-1,{data:Ee,error:He}=await xe.from("food_items").select("*").eq("is_active",!0).range(Y,Ie);if(He)throw He;const et=Ee||[];if(fe=fe.concat(et),et.length<1e3)break;Y+=1e3}const Be=fe.map(Ie=>({id:Ie.id??Ie.item_id??Ie.slug??String(Math.random()).slice(2),name:Ie.name??Ie.item_name??"Item",price:Ie.price??Ie.cost??0,image:Ie.image_url??Ie.image??Ie.photo??"https://via.placeholder.com/300?text=Food",description:Ie.description??"",availableQuantity:Ie.available_quantity??0,isAvailable:Ie.is_available??!0,inStock:Ie.is_available!==!1&&Ie.available_quantity>0,categoryId:Ie.category_id??null,serialNumber:Ie.serial_number??null})).sort((Ie,Ee)=>Ie.serialNumber!=null&&Ee.serialNumber!=null?Ie.serialNumber-Ee.serialNumber:Ie.serialNumber!=null&&Ee.serialNumber==null?-1:Ie.serialNumber==null&&Ee.serialNumber!=null?1:(Ie.name||"").localeCompare(Ee.name||""));Be.length===0?(console.log("No food items found in database, using fallback items"),a([{id:"fallback_1",name:"Veg Biryani",price:180,image:"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg",description:"Delicious vegetarian biryani",serialNumber:1},{id:"fallback_2",name:"Masala Dosa",price:80,image:"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg",description:"Crispy dosa with potato filling",serialNumber:2},{id:"fallback_3",name:"Samosa",price:40,image:"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg",description:"Spicy potato and pea samosa",serialNumber:3}])):a(Be)}catch(P){console.error("Failed to load food_items:",P),a([{id:"fallback_1",name:"Veg Biryani",price:180,image:"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg",description:"Delicious vegetarian biryani",serialNumber:1},{id:"fallback_2",name:"Masala Dosa",price:80,image:"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg",description:"Crispy dosa with potato filling",serialNumber:2},{id:"fallback_3",name:"Samosa",price:40,image:"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg",description:"Spicy potato and pea samosa",serialNumber:3}])}};en=D,D()},[]),O.useEffect(()=>{(async()=>{try{const{data:P,error:Y}=await xe.from("categories").select("*").order("name",{ascending:!0});if(Y)throw Y;x(P||[])}catch(P){console.error("Failed to load categories:",P),x([])}})()},[]);const dt=async()=>{f(!0);try{let P=0,Y=[];for(;;){const fe=P+1e3-1,{data:Ae,error:Be}=await xe.from("orders").select("id, item_name, status, user_id, created_at, order_token").neq("user_id",Vr).order("created_at",{ascending:!1}).range(P,fe);if(Be)throw Be;const Ie=Ae||[];if(Y=Y.concat(Ie),Ie.length<1e3)break;P+=1e3}c(Y)}catch(D){console.error("Failed to fetch Counter tokens:",D)}finally{f(!1)}};O.useEffect(()=>{dt()},[]);const Ne=async(D,P=1,Y=0)=>{try{const Be=Math.max(0,Number(P)||0);if(!D||Be===0)return;const Ie=new Promise((et,ft)=>{setTimeout(()=>ft(new Error("Stock update timeout")),8e3)}),Ee=async()=>{const{data:et,error:ft}=await xe.from("food_items").select("available_quantity, is_available").eq("id",D).single();if(ft)throw ft;const it=et.available_quantity||0,Ke=Math.max(0,it-Be),z=Ke>0,{data:le,error:ve}=await xe.from("food_items").update({available_quantity:Ke,is_available:z,updated_at:new Date().toISOString()}).eq("id",D).select("available_quantity, is_available");if(ve)throw ve;return le},He=await Promise.race([Ee(),Ie]);return console.log(`✅ Stock reduced atomically: ${He[0]?.available_quantity} remaining`),en&&en(),He}catch(Be){if(console.error(`❌ Stock update failed (attempt ${Y+1}):`,Be),Y<3){const Ie=Math.pow(2,Y)*1e3;return console.log(`🔄 Retrying stock update in ${Ie}ms...`),await new Promise(Ee=>setTimeout(Ee,Ie)),Ne(D,P,Y+1)}throw new Error(`Failed to update stock after 3 attempts: ${Be.message}`)}},Te=async D=>{if(H.length===0){j({type:"error",message:"Your cart is empty!"}),setTimeout(()=>j(null),2e3);return}try{console.log("🛒 Starting optimized checkout process for:",H.length,"items - creating separate orders");const P=[],Y=12e3,fe=10,Ae=D==="takeaway";for(const Ee of H){console.log("📝 Creating separate order for:",Ee.name,"Qty:",Ee.quantity);const He=new Promise((ft,it)=>{setTimeout(()=>it(new Error(`Timeout processing ${Ee.name}`)),Y)}),et=async()=>{const ft=Ae?Ee.price+fe:Ee.price,it=ft*Ee.quantity;console.log(`💰 Price: Base ${Ee.price} + Takeaway ${Ae?fe:0} = ${ft} × ${Ee.quantity} = ${it}`);const Ke=crypto.randomUUID(),z=Math.floor(1e3+Math.random()*9e3).toString();console.log("🆔 Generated order ID:",Ke,"Token:",z);const le=await Yk(),{data:ve,error:Oe}=await xe.from("orders").insert({id:Ke,order_id:Ke,user_id:le,item_name:Ee.name,total_amount:it,status:"preparing",order_type:Ae,order_token:z,qr_code:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(V(Ke),Oe)throw console.error("❌ Failed to create order for item:",Ee.name,Oe),new Error(`Failed to create order for ${Ee.name}: ${Oe.message}`);console.log("✅ Order created for item:",Ee.name,ve);const{error:Se}=await xe.from("order_items").insert({order_id:Ke,food_item_id:Ee.id,quantity:Ee.quantity,price_per_unit:ft,total_price:it,created_at:new Date().toISOString()});if(Se)throw console.error("❌ Failed to create order item for:",Ee.name,Se),new Error(`Failed to add item ${Ee.name} to order: ${Se.message}`);await Ne(Ee.id,Ee.quantity),console.log("🔍 Fetching QR code from database for cart order:",Ke);let me=null;try{const{data:ye,error:Ze}=await xe.from("orders").select("qr_code").eq("id",Ke).single();if(Ze)throw console.error("❌ Failed to fetch QR code from database:",Ze),new Error("Failed to fetch QR code from database");const tt=ye.qr_code;console.log("📱 QR Code fetched from database:",tt),!tt||tt==="undefined"?(console.warn("⚠️ QR Code from database is invalid, using fallback"),me=(Ke.replace(/\D/g,"")+"0000000000000000").slice(0,16),console.log("🔄 Using fallback QR code:",me)):(me=tt,console.log("✅ Using QR code from database for barcode generation"))}catch(ye){console.error("❌ Error fetching QR code from database:",ye),me=(Ke.replace(/\D/g,"")+"0000000000000000").slice(0,16),console.log("🔄 Using fallback QR code due to database error:",me)}return{item:Ee.name,token:z,orderId:Ke,qrCode:me}};try{const ft=await Promise.race([et(),He]);P.push(ft),console.log("✅ Item processed successfully:",Ee.name)}catch(ft){throw console.error(`❌ Failed to process ${Ee.name}:`,ft),new Error(`Failed to add item ${Ee.name} to order: ${ft.message}`)}}q([]),ce(!1),r(P[P.length-1]?.token);const Be=D==="dine_in"?"Dine In":"Takeaway",Ie=P.map(Ee=>`#${Ee.token}`).join(", ");j({type:"success",message:`✅ Checkout successful! ${P.length} order(s) created • Tokens: ${Ie} • ${Be}`}),setTimeout(()=>j(null),3500),en&&en(),dt(),console.log("🎉 Checkout completed successfully!")}catch(P){console.error("❌ Checkout failed:",P),j({type:"error",message:`❌ Checkout failed: ${P.message}`}),setTimeout(()=>j(null),3500)}};return g.jsxs("div",{className:"home-dashboard",children:[g.jsxs(hr,{title:"Menu - Place Order (Counter)",titleAction:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.jsxs("button",{onClick:()=>E("list"),style:{padding:"8px 12px",fontSize:"13px",fontWeight:"600",backgroundColor:S==="list"?"#3b82f6":"#f3f4f6",color:S==="list"?"#ffffff":"#374151",border:S==="list"?"1px solid #2563eb":"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},title:"List Mode",children:[g.jsx(M1,{size:16}),g.jsx("span",{children:"List"})]}),g.jsxs("button",{onClick:()=>E("card"),style:{padding:"8px 12px",fontSize:"13px",fontWeight:"600",backgroundColor:S==="card"?"#3b82f6":"#f3f4f6",color:S==="card"?"#ffffff":"#374151",border:S==="card"?"1px solid #2563eb":"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},title:"Card Mode",children:[g.jsx(j1,{size:16}),g.jsx("span",{children:"Card"})]}),g.jsxs("button",{onClick:()=>E("button"),style:{padding:"8px 12px",fontSize:"13px",fontWeight:"600",backgroundColor:S==="button"?"#3b82f6":"#f3f4f6",color:S==="button"?"#ffffff":"#374151",border:S==="button"?"1px solid #2563eb":"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},title:"Button Mode",children:[g.jsx(Q5,{size:16}),g.jsx("span",{children:"Button"})]})]}),children:[g.jsx("div",{className:"search-section",children:g.jsx("div",{className:"form",children:g.jsxs("div",{className:"field",style:{position:"relative",flex:1},children:[g.jsx("input",{ref:R,className:"input search-input",placeholder:"Search menu items or serial number...",value:p,onChange:D=>m(D.target.value),onKeyDown:D=>{const P=de();if(D.key==="Enter"){if(D.preventDefault(),P.length>0){const Y=P[A];if(I!=="closed"&&Y.inStock){const fe=H.find(Ae=>Ae.id===Y.id)?.quantity||0;fe===0?G(Y,1):ie(Y.id,fe+1),m(""),R.current&&R.current.focus()}}}else if(D.key==="ArrowDown")D.preventDefault(),T(Y=>Y<P.length-1?Y+1:0);else if(D.key==="ArrowUp")D.preventDefault(),T(Y=>Y>0?Y-1:P.length-1);else if(D.key==="ArrowRight"){D.preventDefault();const Y=5,fe=A+Y;if(fe<P.length)T(fe);else{const Ae=Math.floor(A/Y);T(Ae*Y)}}else if(D.key==="ArrowLeft"){D.preventDefault();const Y=5,fe=A-Y;if(fe>=0)T(fe);else{const Ae=Math.floor((P.length-1)/Y)*Y;T(Math.min(Ae+(P.length-1)%Y,P.length-1))}}},style:{paddingRight:p?"40px":"12px"}}),p&&g.jsx("button",{onClick:()=>{m(""),R.current&&R.current.focus()},style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",color:"#6b7280",borderRadius:"4px",transition:"all 0.2s"},onMouseEnter:D=>{D.target.style.backgroundColor="#f3f4f6",D.target.style.color="#374151"},onMouseLeave:D=>{D.target.style.backgroundColor="transparent",D.target.style.color="#6b7280"},children:g.jsx(Dt,{size:18})})]})})}),g.jsxs("div",{style:{marginTop:"16px",marginBottom:"8px",display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[g.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text-primary)"},children:"Quick Search:"}),["Biryani","Dosa","Idli","Paratha","Manchuria","Noodles","Rice","Omlette","Egg","Chicken"].map(D=>g.jsxs("button",{onClick:()=>m(D),style:{padding:"6px 12px",fontSize:"13px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:D&&p&&p.toLowerCase()===D.toLowerCase()?"1px solid #3b82f6":"1px solid #e5e7eb",borderRadius:"16px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:P=>{P.target.style.backgroundColor="#e5e7eb",P.target.style.borderColor="#3b82f6",P.target.style.color="#3b82f6"},onMouseLeave:P=>{p&&p.toLowerCase()===D.toLowerCase()||(P.target.style.backgroundColor="#f3f4f6",P.target.style.borderColor="#e5e7eb",P.target.style.color="#374151")},children:["🔍 ",D]},D))]}),v.length>0&&g.jsxs("div",{style:{marginTop:"16px",marginBottom:"8px",display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[g.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text-primary)",marginRight:"4px"},children:"Special Categories:"}),g.jsxs("button",{onClick:()=>_("all"),style:{padding:"6px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:w==="all"?"#3b82f6":"#f3f4f6",color:w==="all"?"#ffffff":"#374151",border:"none",borderRadius:"20px",cursor:"pointer",transition:"all 0.2s",boxShadow:w==="all"?"0 2px 8px rgba(59, 130, 246, 0.3)":"none"},onMouseEnter:D=>{w!=="all"&&(D.target.style.backgroundColor="#e5e7eb")},onMouseLeave:D=>{w!=="all"&&(D.target.style.backgroundColor="#f3f4f6")},children:["All (",i.length,")"]}),v.map(D=>({...D,itemCount:i.filter(P=>P.categoryId===D.id).length})).filter(D=>D.itemCount>0).reduce((D,P)=>{if(P.name.toLowerCase()==="cuisine"||P.name.toLowerCase()==="lunch"){const Y=D.find(fe=>fe.name==="Lunch");Y?Y.itemCount+=P.itemCount:D.push({...P,name:"Lunch",id:"lunch",originalIds:[P.id]})}else if(P.name.toLowerCase()==="snacks"||P.name.toLowerCase()==="breakfast"){const Y=D.find(fe=>fe.name==="Breakfast");Y?Y.itemCount+=P.itemCount:D.push({...P,name:"Breakfast",id:"breakfast",originalIds:[P.id]})}else D.push(P);return D},[]).map(D=>g.jsxs("button",{onClick:()=>_(D.id),style:{padding:"6px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:w===D.id?"#3b82f6":"#f3f4f6",color:w===D.id?"#ffffff":"#374151",border:"none",borderRadius:"20px",cursor:"pointer",transition:"all 0.2s",boxShadow:w===D.id?"0 2px 8px rgba(59, 130, 246, 0.3)":"none"},onMouseEnter:P=>{w!==D.id&&(P.target.style.backgroundColor="#e5e7eb")},onMouseLeave:P=>{w!==D.id&&(P.target.style.backgroundColor="#f3f4f6")},children:[D.name," (",D.itemCount,")"]},D.id))]}),S==="list"?g.jsx("div",{className:"menu-items-grid",style:{marginTop:"20px",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"20px"},children:i.filter(W).sort((D,P)=>{const Y=D.inStock?1:0,fe=P.inStock?1:0;if(Y!==fe)return fe-Y;const Ae=p.trim().toLowerCase(),Be=String(D.name||"").toLowerCase(),Ie=String(P.name||"").toLowerCase();if(Ae){const Ee=Be.startsWith(Ae),He=Ie.startsWith(Ae);if(Ee&&!He)return-1;if(!Ee&&He)return 1}return Be.localeCompare(Ie)}).map((D,P)=>({...D,displayNumber:P+1})).filter(D=>{const P=p.trim().toLowerCase();return P?String(D.name||"").toLowerCase().includes(P)||String(D.displayNumber).includes(P):!0}).map(D=>g.jsxs("div",{className:"menu-item-card",style:{padding:"14px",border:"1px solid #e5e7eb",borderRadius:"12px",backgroundColor:"#ffffff",opacity:D.inStock?1:.6,minHeight:"220px",display:"flex",flexDirection:"column",boxSizing:"border-box",position:"relative"},children:[g.jsxs("div",{style:{position:"absolute",top:"8px",left:"8px",backgroundColor:"#3b82f6",color:"white",padding:"4px 10px",borderRadius:"20px",fontSize:"11px",fontWeight:"700",zIndex:1},children:["#",D.displayNumber]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",minWidth:0},children:[g.jsx("img",{src:D.image,alt:D.name,loading:"lazy",style:{width:"46px",height:"46px",borderRadius:"10px",objectFit:"cover",backgroundColor:"#f3f4f6",flexShrink:0},onError:P=>{const Y=P.currentTarget;Y.src!=="https://via.placeholder.com/80?text=Food"&&(Y.src="https://via.placeholder.com/80?text=Food")}}),g.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:700,color:"#111827",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:D.name})]}),g.jsxs("div",{style:{fontSize:"16px",fontWeight:700,color:"#111827"},children:["₹",D.price]})]}),!D.inStock&&g.jsx("div",{style:{marginBottom:"10px",padding:"8px",backgroundColor:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"8px",textAlign:"center",color:"#991b1b",fontWeight:"500",fontSize:"12px"},children:"⚠️ Currently Unavailable"}),g.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginTop:"12px"},children:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx("button",{onClick:()=>{const P=H.find(Y=>Y.id===D.id)?.quantity||0;P>1?ie(D.id,P-1):P===1&&ge(D.id)},disabled:I==="closed"||!D.inStock,style:{width:"34px",height:"34px",borderRadius:"50%",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:I==="closed"||!D.inStock?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:I==="closed"||!D.inStock?.5:1},children:"-"}),g.jsx("span",{style:{minWidth:"56px",textAlign:"center",fontWeight:"700",fontSize:"15px"},children:H.find(P=>P.id===D.id)?.quantity||0}),g.jsx("button",{onClick:()=>{const P=H.find(Y=>Y.id===D.id)?.quantity||0;P===0?G(D,1):ie(D.id,P+1)},disabled:I==="closed"||!D.inStock,style:{width:"34px",height:"34px",borderRadius:"50%",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:I==="closed"||!D.inStock?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:I==="closed"||!D.inStock?.5:1},children:"+"})]})}),g.jsx("button",{className:`order-btn ${I==="closed"||!D.inStock?"btn-disabled":"btn-primary"}`,onClick:()=>{const P=H.find(Y=>Y.id===D.id)?.quantity||0;P===0?G(D,1):ie(D.id,P+1)},disabled:I==="closed"||!D.inStock,style:{padding:"12px 14px",fontSize:"13px",marginTop:"14px",width:"100%"},children:I==="closed"?"🔴 Closed":D.inStock?H.find(P=>P.id===D.id)?.quantity>0?"🛒 Add More":"🛒 Add to Cart":"⚠️ Out of Stock"})]},D.id))}):S==="card"?g.jsx("div",{className:"menu-items-grid",children:i.filter(W).sort((D,P)=>{const Y=D.inStock?1:0,fe=P.inStock?1:0;if(Y!==fe)return fe-Y;const Ae=p.trim().toLowerCase(),Be=String(D.name||"").toLowerCase(),Ie=String(P.name||"").toLowerCase();if(Ae){const Ee=Be.startsWith(Ae),He=Ie.startsWith(Ae);if(Ee&&!He)return-1;if(!Ee&&He)return 1}return Be.localeCompare(Ie)}).map((D,P)=>({...D,displayNumber:P+1})).filter(D=>{const P=p.trim().toLowerCase();return P?String(D.name||"").toLowerCase().includes(P)||String(D.displayNumber).includes(P):!0}).map(D=>g.jsxs("div",{className:"menu-item-card",style:{opacity:D.inStock?1:.6,position:"relative"},children:[g.jsxs("div",{className:"menu-item-image",style:{backgroundImage:`url(${D.image})`},children:[g.jsxs("div",{style:{position:"absolute",top:"8px",left:"8px",backgroundColor:"#3b82f6",color:"white",padding:"4px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:"700",zIndex:1,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:["#",D.displayNumber]}),g.jsxs("div",{className:"price-badge",children:["₹",D.price]}),!D.inStock&&g.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(239, 68, 68, 0.95)",color:"white",padding:"8px 16px",borderRadius:"8px",fontWeight:"bold",fontSize:"14px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:2},children:"🔴 OUT OF STOCK"})]}),g.jsxs("div",{className:"menu-item-content",children:[g.jsx("h3",{className:"menu-item-title",children:D.name}),g.jsx("p",{className:"menu-item-description",children:D.description}),D.inStock?g.jsx(g.Fragment,{children:g.jsxs("div",{style:{marginTop:"12px"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",justifyContent:"center"},children:[g.jsx("button",{onClick:()=>{const P=H.find(Y=>Y.id===D.id)?.quantity||0;P>1?ie(D.id,P-1):P===1&&ge(D.id)},disabled:I==="closed",style:{width:"28px",height:"28px",borderRadius:"50%",border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-primary)",cursor:I==="closed"?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:I==="closed"?.5:1},children:"-"}),g.jsx("span",{style:{minWidth:"40px",textAlign:"center",fontWeight:"500",color:"var(--text-primary)",fontSize:"16px"},children:H.find(P=>P.id===D.id)?.quantity||0}),g.jsx("button",{onClick:()=>{const P=H.find(Y=>Y.id===D.id)?.quantity||0;P===0?G(D,1):ie(D.id,P+1)},disabled:I==="closed",style:{width:"28px",height:"28px",borderRadius:"50%",border:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)",color:"var(--text-primary)",cursor:I==="closed"?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:I==="closed"?.5:1},children:"+"})]}),g.jsx("button",{className:`order-btn ${I==="closed"?"btn-disabled":"btn-primary"}`,onClick:()=>{const P=H.find(Y=>Y.id===D.id)?.quantity||0;P===0?G(D,1):ie(D.id,P+1)},disabled:I==="closed",style:{width:"100%"},children:I==="closed"?"🔴 Canteen Closed":H.find(P=>P.id===D.id)?.quantity>0?"🛒 Add More":"🛒 Add to Cart"})]})}):g.jsx("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"8px",textAlign:"center",color:"#991b1b",fontWeight:"500",fontSize:"14px"},children:"⚠️ Currently Unavailable"})]})]},D.id))}):S==="button"?g.jsxs("div",{style:{marginTop:"20px",display:"flex",gap:"20px"},children:[g.jsx("div",{style:{flex:"1",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px",alignContent:"start"},children:de().map((D,P)=>g.jsxs("button",{onClick:()=>{if(I==="closed"||!D.inStock)return;const Y=H.find(fe=>fe.id===D.id)?.quantity||0;Y===0?G(D,1):ie(D.id,Y+1)},disabled:I==="closed"||!D.inStock,style:{padding:"10px",fontSize:"14px",fontWeight:"600",backgroundColor:D.inStock?H.find(Y=>Y.id===D.id)?.quantity>0?"#3b82f6":P===A?"#e0f2fe":"#ffffff":"#f3f4f6",color:D.inStock?H.find(Y=>Y.id===D.id)?.quantity>0?"#ffffff":P===A?"#0369a1":"#374151":"#9ca3af",border:D.inStock?H.find(Y=>Y.id===D.id)?.quantity>0?"2px solid #2563eb":P===A?"2px solid #0ea5e9":"2px solid #e5e7eb":"2px dashed #d1d5db",borderRadius:"12px",cursor:I==="closed"||!D.inStock?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",position:"relative",opacity:D.inStock?1:.5,minHeight:"64px",justifyContent:"center",textAlign:"center",wordBreak:"break-word",boxShadow:H.find(Y=>Y.id===D.id)?.quantity>0?"0 4px 12px rgba(59, 130, 246, 0.3)":P===A?"0 4px 12px rgba(14, 165, 233, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.05)"},onMouseEnter:Y=>{I!=="closed"&&D.inStock&&!H.find(fe=>fe.id===D.id)?.quantity&&(Y.currentTarget.style.backgroundColor="#f9fafb",Y.currentTarget.style.borderColor="#3b82f6")},onMouseLeave:Y=>{I!=="closed"&&D.inStock&&!H.find(fe=>fe.id===D.id)?.quantity&&(Y.currentTarget.style.backgroundColor="#ffffff",Y.currentTarget.style.borderColor="#e5e7eb")},children:[H.find(Y=>Y.id===D.id)?.quantity>0&&g.jsx("div",{style:{position:"absolute",top:"6px",right:"6px",backgroundColor:"#ef4444",color:"white",padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"700",zIndex:1,minWidth:"24px",textAlign:"center"},children:H.find(Y=>Y.id===D.id)?.quantity}),g.jsx("span",{style:{fontSize:"14px",lineHeight:"1.3",fontWeight:"600",marginTop:"6px"},children:D.name})]},D.id))}),g.jsxs("div",{style:{width:"350px",flexShrink:0,backgroundColor:"#ffffff",borderRadius:"12px",border:"2px solid #e5e7eb",display:"flex",flexDirection:"column",maxHeight:"600px",position:"sticky",top:"20px",alignSelf:"start"},children:[g.jsx("div",{style:{padding:"16px 20px",borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},children:g.jsxs("h3",{style:{margin:0,color:"#1f2937",display:"flex",alignItems:"center",gap:"8px",fontSize:"18px",fontWeight:"700"},children:[g.jsx(Ba,{size:20}),"Your Cart",H.length>0&&g.jsx("span",{style:{backgroundColor:"#ef4444",color:"white",borderRadius:"20px",padding:"2px 8px",fontSize:"12px",fontWeight:"700",marginLeft:"4px"},children:Me()})]})}),g.jsx("div",{style:{flex:1,padding:"16px",overflowY:"auto",display:"flex",flexDirection:"column"},children:H.length===0?g.jsxs("div",{style:{textAlign:"center",color:"#6b7280",padding:"40px 20px",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[g.jsx(Ba,{size:48,style:{opacity:.3,color:"#9ca3af"}}),g.jsx("div",{style:{fontSize:"15px",fontWeight:"500",color:"#374151"},children:"Your cart is empty"}),g.jsx("div",{style:{fontSize:"13px",color:"#6b7280"},children:"Click on items to add"})]}):g.jsx("div",{style:{flex:1},children:H.map(D=>g.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px",backgroundColor:"#f9fafb",borderRadius:"10px",marginBottom:"10px",border:"1px solid #e5e7eb",gap:"10px"},children:[g.jsxs("div",{style:{flex:1,minWidth:0},children:[g.jsx("div",{style:{fontWeight:"600",color:"#1f2937",marginBottom:"4px",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:D.name}),g.jsxs("div",{style:{fontSize:"13px",color:"#6b7280"},children:["₹",D.price," each"]})]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexShrink:0},children:[g.jsx("button",{onClick:()=>{D.quantity<=1?ge(D.id):ie(D.id,D.quantity-1)},style:{width:"28px",height:"28px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:"600"},children:g.jsx(ju,{size:18,color:"#111827",strokeWidth:2})}),g.jsx("span",{style:{fontWeight:"700",fontSize:"14px",minWidth:"30px",textAlign:"center",color:"#1f2937"},children:D.quantity}),g.jsx("button",{onClick:()=>ie(D.id,D.quantity+1),style:{width:"28px",height:"28px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:"600"},children:"+"}),D.quantity>1&&g.jsx("button",{onClick:()=>ge(D.id),style:{width:"28px",height:"28px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"4px"},children:g.jsx(ju,{size:18,color:"#111827",strokeWidth:2})})]})]},D.id))})}),H.length>0&&g.jsxs("div",{style:{padding:"16px",borderTop:"2px solid #e5e7eb",backgroundColor:"#f9fafb",borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px"},children:[g.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[g.jsx("button",{onClick:()=>ee("dine_in"),style:{flex:1,padding:"8px",fontSize:"13px",fontWeight:"600",backgroundColor:F==="dine_in"?"#3b82f6":"#ffffff",color:F==="dine_in"?"#ffffff":"#374151",border:F==="dine_in"?"2px solid #2563eb":"2px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:"🍽️ Dine In"}),g.jsx("button",{onClick:()=>ee("takeaway"),style:{flex:1,padding:"8px",fontSize:"13px",fontWeight:"600",backgroundColor:F==="takeaway"?"#3b82f6":"#ffffff",color:F==="takeaway"?"#ffffff":"#374151",border:F==="takeaway"?"2px solid #2563eb":"2px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:"📦 Takeaway"})]}),g.jsxs("div",{style:{marginBottom:"12px"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"13px",color:"#6b7280"},children:[g.jsx("span",{children:"Subtotal:"}),g.jsxs("span",{children:["₹",we()]})]}),g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"13px",color:"#6b7280"},children:[g.jsx("span",{children:"Takeaway Charges:"}),g.jsxs("span",{children:["₹",Ce()]})]}),g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"700",color:"#1f2937",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[g.jsx("span",{children:"Total:"}),g.jsxs("span",{children:["₹",se()]})]})]}),g.jsx("button",{onClick:()=>Te(F),disabled:I==="closed",style:{width:"100%",padding:"12px",fontSize:"15px",fontWeight:"700",backgroundColor:I==="closed"?"#d1d5db":"#10b981",color:"#ffffff",border:"none",borderRadius:"8px",cursor:I==="closed"?"not-allowed":"pointer",transition:"all 0.2s",boxShadow:I==="closed"?"none":"0 2px 8px rgba(16, 185, 129, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:I==="closed"?"🔴 Canteen Closed":"✅ Checkout"}),g.jsx("button",{onClick:()=>{_e({title:"Clear Cart?",message:"This will remove all items from the cart. You cannot undo this action.",confirmText:"Clear Cart",confirmStyle:"danger",onConfirm:()=>{ze(),j({type:"success",message:"Cart cleared!"}),setTimeout(()=>j(null),2e3)}})},style:{width:"100%",padding:"8px",marginTop:"8px",fontSize:"13px",fontWeight:"600",backgroundColor:"#ffffff",color:"#ef4444",border:"1px solid #fca5a5",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:"Clear Cart"})]})]})]}):null,t&&g.jsxs("div",{className:"success-message",children:[g.jsx("div",{className:"success-title",children:"🎉 Order Placed Successfully!"}),g.jsxs("div",{className:"token-number",children:["Token No: #",t]}),g.jsx("div",{className:"success-description",children:"Please note this token number for order tracking"})]}),g.jsxs("div",{className:"instructions-section",children:[g.jsx("strong",{children:"Instructions:"})," Click on any menu item to place an order for cash payment. Each order will be created with a unique token number and automatically appear in the Orders panel."]})]}),g.jsx(hr,{title:"Counter Tokens (Placed by Counter)",children:d?g.jsx("div",{className:"muted",children:"Loading..."}):s.length===0?g.jsx("div",{className:"muted",children:"No Counter orders yet."}):g.jsxs("table",{className:"table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Token"}),g.jsx("th",{children:"Item"}),g.jsx("th",{children:"Status"}),g.jsx("th",{children:"Time"})]})}),g.jsx("tbody",{children:s.slice(0,10).map(D=>g.jsxs("tr",{children:[g.jsx("td",{children:g.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#10b981",fontSize:"16px",backgroundColor:"#f0fdf4",padding:"4px 8px",borderRadius:"4px",border:"1px solid #bbf7d0"},children:D.token_no||D.order_token?"#"+(D.token_no||D.order_token):"N/A"})}),g.jsx("td",{children:D.item_name}),g.jsxs("td",{children:[ut(D.status)==="PENDING"&&g.jsx("span",{className:"badge pending",children:"PENDING"}),ut(D.status)==="PREPARING"&&g.jsx("span",{className:"badge preparing",children:"PREPARING"}),ut(D.status)==="READY"&&g.jsx("span",{className:"badge ready",children:"READY"}),ut(D.status)==="DELIVERED"&&g.jsx("span",{className:"badge ready",children:"DELIVERED"})]}),g.jsx("td",{children:D.created_at?new Date(D.created_at).toLocaleTimeString():"-"})]},D.id))})]})}),t&&g.jsx(hr,{title:"Your Token",children:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[g.jsxs("div",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666",fontSize:"1.1em"},children:["#",t]}),g.jsx("div",{className:"muted",children:"Please share this token at the counter."})]})}),S!=="button"&&g.jsx("div",{className:"floating-cart-icon",style:{position:"fixed",bottom:"20px",right:"40px",zIndex:9999},children:g.jsxs("button",{onClick:()=>ce(!ae),className:"cart-icon-button",style:{width:"70px",height:"70px",borderRadius:"50%",backgroundColor:"#3b82f6",border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease",position:"relative"},onMouseEnter:D=>{D.target.style.transform="scale(1.1)",D.target.style.boxShadow="0 6px 20px rgba(0, 0, 0, 0.25)",D.target.style.backgroundColor="#2563eb"},onMouseLeave:D=>{D.target.style.transform="scale(1)",D.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",D.target.style.backgroundColor="#3b82f6"},children:[g.jsx(Ba,{size:28}),Me()>0&&g.jsx("div",{className:"cart-badge",style:{position:"absolute",top:"-8px",right:"-8px",backgroundColor:"#ef4444",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",border:"2px solid white"},children:Me()})]})}),S!=="button"&&g.jsx(kn,{children:ae&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"cart-backdrop",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998},onClick:()=>ce(!1)}),g.jsxs(Je.div,{className:"cart-side-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:{position:"fixed",top:0,right:0,width:"400px",height:"100vh",backgroundColor:"#ffffff",borderLeft:"1px solid #e5e7eb",zIndex:9999,display:"flex",flexDirection:"column",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.15)"},children:[g.jsxs("div",{className:"cart-header",style:{padding:"20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9fafb"},children:[g.jsxs("h3",{style:{margin:0,color:"#1f2937",display:"flex",alignItems:"center",gap:"8px",fontSize:"18px",fontWeight:"600"},children:[g.jsx(Ba,{size:20}),"Your Cart"]}),g.jsx("button",{onClick:()=>ce(!1),className:"cart-close-btn",style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:D=>{D.target.style.backgroundColor="#f3f4f6",D.target.style.borderColor="#9ca3af"},onMouseLeave:D=>{D.target.style.backgroundColor="#ffffff",D.target.style.borderColor="#d1d5db"},children:g.jsx(Dt,{size:16})})]}),g.jsx("div",{className:"cart-content",style:{flex:1,padding:"20px",overflowY:"auto",display:"flex",flexDirection:"column",backgroundColor:"#ffffff"},children:H.length===0?g.jsxs("div",{className:"cart-empty-state",style:{textAlign:"center",color:"#6b7280",padding:"40px 20px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[g.jsx(Ba,{size:48,style:{opacity:.3,color:"#9ca3af"}}),g.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#374151"},children:"Your cart is empty"}),g.jsx("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Add some items to get started!"})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{style:{flex:1},children:H.map(D=>g.jsxs("div",{className:"cart-item",style:{display:"flex",alignItems:"center",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"12px",marginBottom:"12px",border:"1px solid #e5e7eb",gap:"12px"},children:[g.jsxs("div",{style:{flex:1,minWidth:0},children:[g.jsx("div",{style:{fontWeight:"500",color:"#1f2937",marginBottom:"4px",fontSize:"16px",wordWrap:"break-word",overflowWrap:"break-word"},children:D.name}),g.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:["₹",D.price," each"]})]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx("button",{onClick:()=>ie(D.id,D.quantity-1),className:"quantity-btn",style:{width:"32px",height:"32px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:"16px",fontWeight:"bold"},onMouseEnter:P=>{P.target.style.backgroundColor="#f3f4f6",P.target.style.borderColor="#9ca3af",P.target.style.color="#1f2937"},onMouseLeave:P=>{P.target.style.backgroundColor="#ffffff",P.target.style.borderColor="#d1d5db",P.target.style.color="#374151"},children:g.jsx(gR,{size:16})}),g.jsx("input",{type:"number",min:"0",value:D.quantity,onChange:P=>{const Y=parseInt(P.target.value)||0;ie(D.id,Y)},onBlur:P=>{const Y=P.target.value.trim(),fe=parseInt(Y)||0;Y==="0"||fe<=0&&Y!==""?ge(D.id):(Y===""||fe<1)&&ie(D.id,1)},onKeyDown:P=>{P.key==="Backspace"&&P.target.value===""&&(P.preventDefault(),P.target.value="1",ie(D.id,1)),P.key==="Enter"&&P.target.blur()},style:{width:"50px",height:"32px",textAlign:"center",fontWeight:"500",color:"#1f2937",fontSize:"16px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#ffffff",outline:"none",padding:"0 4px"},onFocus:P=>P.target.select()}),g.jsx("button",{onClick:()=>ie(D.id,D.quantity+1),className:"quantity-btn",style:{width:"32px",height:"32px",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:"#ffffff",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:"16px",fontWeight:"bold"},onMouseEnter:P=>{P.target.style.backgroundColor="#f3f4f6",P.target.style.borderColor="#9ca3af",P.target.style.color="#1f2937"},onMouseLeave:P=>{P.target.style.backgroundColor="#ffffff",P.target.style.borderColor="#d1d5db",P.target.style.color="#374151"},children:g.jsx(bR,{size:16})})]}),g.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",minWidth:"60px",textAlign:"right",fontSize:"16px"},children:["₹",D.price*D.quantity]}),g.jsx("button",{onClick:()=>ge(D.id),className:"remove-btn",style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"#ef4444",color:"white",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",marginLeft:"8px"},onMouseEnter:P=>{P.target.style.backgroundColor="#dc2626"},onMouseLeave:P=>{P.target.style.backgroundColor="#ef4444"},children:g.jsx(ju,{size:14})})]})]},D.id))}),g.jsxs("div",{className:"cart-footer",style:{borderTop:"1px solid #e5e7eb",paddingTop:"20px",marginTop:"20px"},children:[g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[g.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:F==="takeaway"&&H.length>0?g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:["₹",we()," + ₹",Ce()," ="]}),g.jsxs("div",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",lineHeight:1.2},children:["Total: ₹",se()]})]}):g.jsxs("div",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937"},children:["Total: ₹",se()]})}),g.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[Me()," items"]})]}),F==="takeaway"&&H.length>0&&g.jsxs("div",{style:{fontSize:"12px",color:"#f59e0b",backgroundColor:"#fef3c7",padding:"8px 12px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",border:"1px solid #fbbf24"},children:[g.jsx("span",{children:"💼"}),g.jsx("span",{children:"Takeaway surcharge: +₹10 per item included"})]})]}),g.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"12px",alignItems:"center"},children:[g.jsx("span",{style:{fontSize:"14px",color:"#374151",fontWeight:500},children:"Order Type:"}),g.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[g.jsx("input",{type:"radio",name:"orderType",value:"dine_in",checked:F==="dine_in",onChange:()=>ee("dine_in")}),g.jsx("span",{children:"🍽️ Dine In"})]}),g.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[g.jsx("input",{type:"radio",name:"orderType",value:"takeaway",checked:F==="takeaway",onChange:()=>ee("takeaway")}),g.jsx("span",{children:"🥡 Takeaway"})]})]}),g.jsxs("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[g.jsxs("button",{onClick:()=>{_e({title:"Clear Cart?",message:"This will remove all items from the cart. You cannot undo this action.",confirmText:"Clear Cart",confirmStyle:"danger",onConfirm:()=>{q([]),j({type:"success",message:"Cart cleared!"}),setTimeout(()=>j(null),2e3)}})},className:"clear-cart-btn",style:{width:"100%",padding:"10px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ffffff",color:"#dc2626",border:"1px solid #dc2626",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:D=>{D.target.style.backgroundColor="#fef2f2"},onMouseLeave:D=>{D.target.style.backgroundColor="#ffffff"},children:[g.jsx(Dt,{size:16}),"Clear Cart"]}),g.jsxs("button",{onClick:()=>{Te(F)},className:"checkout-btn",style:{width:"100%",padding:"12px 16px",fontSize:"16px",fontWeight:"600",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseEnter:D=>{D.target.style.backgroundColor="#2563eb"},onMouseLeave:D=>{D.target.style.backgroundColor="#3b82f6"},children:[g.jsx(Ba,{size:18}),"Checkout"]})]})]})]})})]})]})}),g.jsx(kn,{children:pe&&g.jsx(Je.div,{initial:{opacity:0,y:-40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-40,scale:.98},transition:{type:"spring",stiffness:300,damping:24},style:{position:"fixed",top:16,left:0,right:0,margin:"0 auto",zIndex:1e4,background:pe.type==="success"?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",padding:"12px 16px",borderRadius:10,boxShadow:"0 14px 30px rgba(0,0,0,0.22)",fontWeight:700,maxWidth:520,width:"calc(100% - 32px)",textAlign:"center",border:"1px solid rgba(255,255,255,0.15)",backdropFilter:"blur(6px)"},children:pe.message})}),g.jsx(kn,{children:he&&g.jsxs(g.Fragment,{children:[g.jsx(Je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>_e(null),style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e4,backdropFilter:"blur(2px)"}}),g.jsxs(Je.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:300,damping:24},style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",color:"#111827",borderRadius:12,width:"90%",maxWidth:420,padding:20,zIndex:10001,boxShadow:"0 20px 40px rgba(0,0,0,0.2)"},onClick:D=>D.stopPropagation(),children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[g.jsx("div",{style:{width:40,height:40,borderRadius:8,backgroundColor:he.confirmStyle==="danger"?"#fee2e2":"#eff6ff",display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsx(fr,{size:20,style:{color:he.confirmStyle==="danger"?"#dc2626":"#2563eb"}})}),g.jsx("h3",{style:{margin:0,fontSize:18,fontWeight:700},children:he.title||"Are you sure?"})]}),g.jsx("p",{style:{margin:"0 0 16px 0",fontSize:14,color:"#4b5563"},children:he.message||"Please confirm your action."}),g.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:10},children:[g.jsx("button",{onClick:()=>_e(null),style:{padding:"8px 14px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:8,cursor:"pointer",fontWeight:500},children:"Cancel"}),g.jsx("button",{onClick:()=>{try{he.onConfirm&&he.onConfirm()}finally{_e(null)}},style:{padding:"8px 14px",backgroundColor:he.confirmStyle==="danger"?"#ef4444":"#3b82f6",color:"#ffffff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600},children:he.confirmText||"Confirm"})]})]})]})})]})}function i9({withTitle:n=!0,orders:e=[],orderItems:t=[],onUpdateStatus:r=()=>{},onCancel:i=()=>{},idHeader:a="Order ID",updatingIds:s={}}){const[c,d]=O.useState(Date.now()),[f,p]=O.useState(""),m=O.useRef(null);O.useEffect(()=>{const E=setInterval(()=>d(Date.now()),1e3);return()=>clearInterval(E)},[]),O.useEffect(()=>{m.current&&m.current.focus()},[]);const v=E=>{const A=E?new Date(E).getTime():0,T=Math.max(0,Math.floor(((c||Date.now())-(isFinite(A)?A:0))/1e3)),R=Math.floor(T/3600),I=Math.floor(T%3600/60),M=T%60;return R>0?`${R}:${String(I).padStart(2,"0")}:${String(M).padStart(2,"0")}`:`${I}:${String(M).padStart(2,"0")}`},x=E=>t.filter(A=>A.order_id===E),w=E=>typeof E=="boolean"?E?"🥡 Takeaway":"🍽️ Dine In":E==="takeaway"?"🥡 Takeaway":"🍽️ Dine In",_=f.trim()?e.filter(E=>String(E.token_no||E.order_token||"").includes(f.trim())):e,S=g.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:g.jsx("input",{value:f,onChange:E=>p(E.target.value),placeholder:"Search Token Number",ref:m,style:{width:180,padding:"6px 10px",border:"1px solid #e5e7eb",borderRadius:6,fontSize:12}})});return g.jsx(hr,{title:n?"Orders":void 0,titleAction:S,children:g.jsxs("table",{className:"table orders-table",children:[g.jsxs("thead",{children:[g.jsxs("tr",{children:[g.jsx("th",{style:{width:"8%"},children:a}),g.jsx("th",{style:{width:"30%"},children:"Items"}),g.jsx("th",{style:{width:"10%"},children:"Total"}),g.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Status"}),g.jsx("th",{style:{width:"10%",textAlign:"center"},children:"Type"}),g.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Placed By"}),g.jsx("th",{style:{width:"22%",textAlign:"center"},children:"Actions"})]}),g.jsxs("tr",{children:[g.jsx("th",{}),g.jsx("th",{}),g.jsx("th",{}),g.jsx("th",{}),g.jsx("th",{}),g.jsx("th",{}),g.jsx("th",{style:{textAlign:"center",paddingTop:6,paddingBottom:6},children:g.jsx("input",{value:f,onChange:E=>p(E.target.value),placeholder:"Search Token Number",style:{width:160,padding:"6px 10px",border:"1px solid #e5e7eb",borderRadius:6,fontSize:12}})})]})]}),g.jsx("tbody",{children:_.map(E=>{const A=x(E.id),T=A.length>0;return g.jsxs("tr",{children:[g.jsx("td",{style:{verticalAlign:"middle"},children:g.jsx("span",{style:{fontFamily:"monospace",fontWeight:"800",color:"#111827"},children:E.token_no||E.order_token?"#"+(E.token_no||E.order_token):"Not available"})}),g.jsx("td",{style:{position:"relative",verticalAlign:"middle"},children:T?g.jsx("div",{className:"order-items-cell",style:{minWidth:"200px",maxWidth:"300px"},children:A.map((R,I)=>g.jsx("div",{style:{marginBottom:I<A.length-1?"4px":"0",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:g.jsx("strong",{children:R.food_items?.name||"Unknown Item"})},I))}):g.jsx("div",{children:g.jsx("strong",{children:E.item_name||"Unknown Item"})})}),g.jsx("td",{style:{verticalAlign:"middle"},children:E.total_amount!=null?`₹${E.total_amount}`:"-"}),g.jsx("td",{style:{verticalAlign:"middle",textAlign:"center"},children:g.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},children:[g.jsxs("div",{children:[ut(E.status)==="PENDING"&&g.jsx("span",{className:"badge pending",children:"PENDING"}),ut(E.status)==="PREPARING"&&g.jsx("span",{className:"badge preparing",children:"PREPARING"}),ut(E.status)==="READY"&&g.jsx("span",{className:"badge ready",children:"READY"})]}),g.jsxs("div",{title:E.created_at?`Started: ${new Date(E.created_at).toLocaleString()}`:"",style:{display:"flex",alignItems:"center",gap:6,fontSize:12,color:"#374151",fontVariantNumeric:"tabular-nums"},children:[g.jsx(Lw,{size:14}),g.jsx("span",{children:v(E.created_at)})]})]})}),g.jsx("td",{style:{verticalAlign:"middle",textAlign:"center"},children:g.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:w(E.order_type)})}),g.jsx("td",{style:{verticalAlign:"middle"},children:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:[E.user_id===Vr?g.jsx(oR,{className:"w-5 h-5 text-gray-700 dark:text-white"}):g.jsx(FR,{className:"w-5 h-5 text-gray-700 dark:text-white"}),E.user_id===Vr?g.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:"App"}):g.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:"Counter"})]})}),g.jsx("td",{style:{verticalAlign:"middle",textAlign:"center"},children:g.jsx("div",{className:"actions",style:{justifyContent:"center"},children:s[E.id]?g.jsxs("button",{className:"btn",disabled:!0,style:{minWidth:"140px"},children:[g.jsx("span",{className:"spinner",style:{marginRight:6}}),"Updating..."]}):g.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",justifyContent:"center"},children:[ut(E.status)==="PENDING"&&g.jsxs(g.Fragment,{children:[g.jsx("button",{className:"btn",onClick:()=>r(E.id,"PREPARING"),style:{minWidth:"140px"},children:"Mark Preparing"}),g.jsx("button",{className:"btn",onClick:()=>i(E.id),title:"Cancel order","aria-label":"Cancel order",style:{backgroundColor:"#ef4444",color:"white",border:"none",width:36,height:36,minWidth:36,padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:g.jsx(Dt,{size:16})})]}),ut(E.status)==="PREPARING"&&g.jsxs(g.Fragment,{children:[g.jsx("button",{className:"btn",onClick:()=>r(E.id,"READY"),style:{minWidth:"120px"},children:"Mark Ready"}),g.jsx("button",{className:"btn",onClick:()=>i(E.id),title:"Cancel order","aria-label":"Cancel order",style:{backgroundColor:"#ef4444",color:"white",border:"none",width:36,height:36,minWidth:36,padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:g.jsx(Dt,{size:16})})]}),ut(E.status)==="READY"&&g.jsxs(g.Fragment,{children:[g.jsx("button",{className:"btn",onClick:()=>r(E.id,"DELIVERED"),style:{minWidth:"140px"},children:"Mark Delivered"}),g.jsx("button",{className:"btn",onClick:()=>i(E.id),title:"Cancel order","aria-label":"Cancel order",style:{backgroundColor:"#ef4444",color:"white",border:"none",width:36,height:36,minWidth:36,padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:g.jsx(Dt,{size:16})})]})]})})})]},E.id)})})]})})}function a9({orders:n,deliveredOrders:e=[],activity:t=[],onUpdateStatus:r,onRevert:i,onCancel:a,onCancelOrder:s,view:c="live",pictureMode:d=!1,updatingIds:f={}}){const p=c==="live",[m,v]=O.useState([]),[x,w]=O.useState([]),[_,S]=O.useState(!1),[E,A]=O.useState(""),[T,R]=O.useState(!1),[I,M]=O.useState({text:"",type:""}),U=F=>{switch(ut(F)){case"PENDING":return{nextStatus:"PREPARING",buttonText:"Start Preparing",buttonClass:"btn-primary"};case"PREPARING":return{nextStatus:"READY",buttonText:"Mark Ready",buttonClass:"btn-success"};case"READY":return{nextStatus:"DELIVERED",buttonText:"Mark Delivered",buttonClass:"btn-primary"};default:return null}};O.useEffect(()=>{(async()=>{try{let he=0,_e=[];for(;;){const W=he+1e3-1,{data:de,error:pe}=await xe.from("food_items").select("*").range(he,W);if(pe)throw pe;const j=de||[];if(_e=_e.concat(j),j.length<1e3)break;he+=1e3}v(_e);const{data:V,error:B}=await xe.from("order_items").select(`
            *,
            food_items (
              name,
              image_url,
              price
            )
          `);B?console.error("Failed to fetch order_items:",B):w(V||[])}catch(ee){console.error("Failed to fetch data for orders:",ee),v([]),w([])}})()},[]);const H=F=>{try{const ee=n.find(_e=>_e.id===F)||e.find(_e=>_e.id===F),he=ee&&(ee.token_no||ee.order_token);return he?"#"+he:"Not available"}catch{return"Not available"}},q=F=>x.filter(ee=>ee.order_id===F),ae=F=>{const ee=q(F.id);if(ee.length>0){const V=ee[0];if(V.food_items&&V.food_items.image_url)return V.food_items.image_url}const he=(F.item_name||"").toLowerCase(),_e=m.find(V=>{const B=(V.name||V.item_name||"").toLowerCase();return B===he||B.includes(he)||he.includes(B)});return _e&&_e.image_url?_e.image_url:he.includes("samosa")?"https://as2.ftcdn.net/v2/jpg/15/85/73/65/1000_F_1585736532_NFMq8z0vAjbker6w9vuzoF8FmsxVRGPI.jpg":he.includes("biryani")?"https://as1.ftcdn.net/v2/jpg/04/59/27/88/1000_F_459278894_92eSlejnR7NSwJRCbVyy9ZZibSmjbF8q.jpg":he.includes("dosa")?"https://as2.ftcdn.net/v2/jpg/14/45/94/59/1000_F_1445945944_eBUM7ot1AWezNkqknKsRImNvLvFbmr7z.jpg":"https://via.placeholder.com/300?text=Food"},ce=async()=>{if(!E.trim()){M({text:"Please enter token numbers",type:"error"});return}R(!0),M({text:"",type:""});try{const F=E.split(/[,\s\n]+/).map(B=>B.trim().replace(/^#/,"")).filter(B=>B.length>0);if(F.length===0){M({text:"No valid token numbers found",type:"error"}),R(!1);return}console.log("🔍 Bulk Cancel: Looking for orders with tokens:",F);const ee=n.filter(B=>{const W=B.token_no||B.order_token;return W&&F.includes(String(W))});if(ee.length===0){M({text:`No orders found with token numbers: ${F.join(", ")}`,type:"error"}),R(!1);return}console.log(`✅ Found ${ee.length} orders to cancel`);let he=0,_e=0;const V=[];for(const B of ee)try{const W=B.token_no||B.order_token;console.log(`Cancelling order with token #${W}`),await s(B.id),he++}catch(W){console.error(`Failed to cancel order ${B.id}:`,W),_e++,V.push(B.token_no||B.order_token)}he===ee.length?(M({text:`✅ Successfully cancelled ${he} order(s)`,type:"success"}),A(""),setTimeout(()=>{S(!1),M({text:"",type:""})},2e3)):M({text:`⚠️ Cancelled ${he} order(s). Failed: ${_e} (Tokens: ${V.join(", ")})`,type:"warning"})}catch(F){console.error("❌ Bulk cancel error:",F),M({text:`Error: ${F.message}`,type:"error"})}finally{R(!1)}};return g.jsxs("div",{className:"home-dashboard",children:[c==="activity"?g.jsx(hr,{title:void 0,children:g.jsxs("table",{className:"table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{style:{width:"25%"},children:"Item Name"}),g.jsx("th",{style:{width:"15%",textAlign:"center"},children:"Token No"}),g.jsx("th",{style:{width:"20%",textAlign:"center"},children:"From → To"}),g.jsx("th",{style:{width:"20%",textAlign:"center"},children:"At"}),g.jsx("th",{style:{width:"20%",textAlign:"center"},children:"Actions"})]})}),g.jsx("tbody",{children:t.slice(0,20).map((F,ee)=>{const _e=F.ts&&Date.now()-F.ts<3e5;return g.jsxs("tr",{children:[g.jsx("td",{style:{verticalAlign:"middle"},children:g.jsx("strong",{children:F.itemName||"Order Item"})}),g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:g.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666"},children:H(F.orderId)})}),g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:g.jsxs("span",{style:{whiteSpace:"nowrap"},children:[F.from," → ",F.to]})}),g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",fontSize:"13px"},children:F.at}),g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:_e?g.jsx("button",{className:"btn btn-secondary",onClick:()=>i(F),style:{minWidth:"80px",margin:"0 auto"},children:"Revert"}):g.jsx("span",{style:{fontSize:"12px",color:"#9ca3af",fontStyle:"italic",whiteSpace:"nowrap"},children:"Expired"})})]},ee)})})]})}):p?d?g.jsx(hr,{title:void 0,children:g.jsx("div",{className:"cards-grid",children:n.map(F=>{const ee=q(F.id);return g.jsx("div",{className:"order-card",style:{gridColumn:`span ${Math.max(1,Math.min(3,ee&&ee.length?ee.length:1))}`},children:ee&&ee.length>1?g.jsx("div",{className:"pm-subcards-row",children:ee.map((he,_e)=>{he.food_items?.price||he.price;const V=he.food_items?.image_url||ae(F);return g.jsxs("div",{className:`pm-subcard${_e>0?" v-sep":""}`,children:[g.jsx("div",{className:"avatar",children:g.jsx("img",{src:V,alt:he.food_items?.name||"Order Item",loading:"lazy",style:{objectFit:"cover",width:"100%",height:"100%",transition:"opacity 0.2s ease-in-out",backgroundColor:"#f3f4f6"},onLoad:B=>{B.currentTarget.style.opacity="1"},onError:B=>{const W=B.currentTarget;W.src!=="https://via.placeholder.com/300?text=Food"&&(W.style.opacity="0.5",setTimeout(()=>{W.src="https://via.placeholder.com/300?text=Food",W.style.opacity="1"},100))}})}),g.jsx("div",{style:{fontFamily:"monospace",fontWeight:800,color:"#111827",fontSize:"0.95em",marginBottom:4},children:F.token_no||F.order_token?"#"+(F.token_no||F.order_token):"Not available"}),g.jsx("div",{className:"pm-item-name",style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:he.food_items?.name||"Unknown Item"}),g.jsx("div",{style:{margin:"8px 0"},children:F.user_id===Vr?g.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:"📱 App"}):g.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:"🧑‍💻 Counter"})}),g.jsxs("div",{style:{marginBottom:12},children:[ut(F.status)==="PENDING"&&g.jsx("span",{className:"badge pending",children:"PENDING"}),ut(F.status)==="PREPARING"&&g.jsx("span",{className:"badge preparing",children:"PREPARING"}),ut(F.status)==="READY"&&g.jsx("span",{className:"badge ready",children:"READY"}),ut(F.status)==="DELIVERED"&&g.jsx("span",{className:"badge ready",children:"DELIVERED"})]}),g.jsx("div",{className:"actions",style:{justifyContent:"center",display:"flex",flexDirection:"column",gap:"8px",minHeight:0},children:f&&f[F.id]?g.jsxs("button",{className:"btn",disabled:!0,style:{minWidth:"140px"},children:[g.jsx("span",{className:"spinner",style:{marginRight:6}}),"Updating..."]}):g.jsx(g.Fragment,{children:(()=>{const B=U(F.status);return B?g.jsxs(g.Fragment,{children:[g.jsx("button",{className:`btn ${B.buttonClass}`,onClick:()=>r(F.id,B.nextStatus),style:{minWidth:"140px"},children:B.buttonText}),g.jsx("button",{className:"btn btn-danger",onClick:()=>a(F.id),title:"Cancel order","aria-label":"Cancel order",style:{width:36,height:36,minWidth:36,padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:g.jsx(Dt,{size:16})})]}):null})()})})]},_e)})}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"avatar",children:g.jsx("img",{src:ae(F),alt:F.item_name||"Order Item",loading:"lazy",style:{objectFit:"cover",width:"100%",height:"100%",transition:"opacity 0.2s ease-in-out",backgroundColor:"#f3f4f6"},onLoad:he=>{he.currentTarget.style.opacity="1"},onError:he=>{const _e=he.currentTarget;_e.src!=="https://via.placeholder.com/300?text=Food"&&(_e.style.opacity="0.5",setTimeout(()=>{_e.src="https://via.placeholder.com/300?text=Food",_e.style.opacity="1"},100))}})}),g.jsx("div",{style:{fontFamily:"monospace",fontWeight:800,color:"#111827",fontSize:"0.95em",marginBottom:4},children:F.token_no||F.order_token?"#"+(F.token_no||F.order_token):"Not available"}),g.jsx("div",{className:"pm-item-name",children:F.item_name}),g.jsx("div",{style:{margin:"8px 0"},children:F.user_id===Vr?g.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:"📱 App"}):g.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",fontWeight:"500"},children:"🧑‍💻 Counter"})}),g.jsxs("div",{style:{marginBottom:12},children:[ut(F.status)==="PENDING"&&g.jsx("span",{className:"badge pending",children:"PENDING"}),ut(F.status)==="PREPARING"&&g.jsx("span",{className:"badge preparing",children:"PREPARING"}),ut(F.status)==="READY"&&g.jsx("span",{className:"badge ready",children:"READY"}),ut(F.status)==="DELIVERED"&&g.jsx("span",{className:"badge ready",children:"DELIVERED"})]}),g.jsx("div",{className:"actions",style:{justifyContent:"center",display:"flex",flexDirection:"column",gap:"8px",minHeight:0},children:f&&f[F.id]?g.jsxs("button",{className:"btn",disabled:!0,style:{minWidth:"140px"},children:[g.jsx("span",{className:"spinner",style:{marginRight:6}}),"Updating..."]}):g.jsx(g.Fragment,{children:(()=>{const he=U(F.status);return he?g.jsxs(g.Fragment,{children:[g.jsx("button",{className:`btn ${he.buttonClass}`,onClick:()=>r(F.id,he.nextStatus),style:{minWidth:"140px"},children:he.buttonText}),g.jsx("button",{className:"btn btn-danger",onClick:()=>a(F.id),title:"Cancel order","aria-label":"Cancel order",style:{width:36,height:36,minWidth:36,padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:8},children:g.jsx(Dt,{size:16})})]}):null})()})})]})},F.id)})})}):g.jsx(i9,{withTitle:!1,idHeader:"Token No",orders:n,orderItems:x,onUpdateStatus:r,onCancel:a,updatingIds:f}):g.jsx(hr,{title:void 0,children:g.jsxs("table",{className:"table past-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Token No"}),g.jsx("th",{style:{width:"20%"},children:"Item Name"}),g.jsx("th",{style:{width:"10%",textAlign:"right"},children:"Price"}),g.jsx("th",{style:{width:"10%",textAlign:"center"},children:"ETA"}),g.jsx("th",{style:{width:"24%",textAlign:"center"},children:"Delivered At"}),g.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Placed By"}),g.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Status"})]})}),g.jsx("tbody",{children:e.map(F=>{const ee=F.created_at?new Date(F.created_at):null,he=F.delivered_at?new Date(F.delivered_at):ee,_e=q(F.id),V=_e.length>0;return g.jsxs("tr",{children:[g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:g.jsx("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"#666"},children:F.token_no||F.order_token?"#"+(F.token_no||F.order_token):"N/A"})}),g.jsx("td",{style:{position:"relative",verticalAlign:"middle"},children:V?g.jsx("div",{className:"order-items-cell",style:{minWidth:"200px",maxWidth:"300px"},children:_e.map((B,W)=>g.jsx("div",{style:{marginBottom:W<_e.length-1?"4px":"0",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:g.jsx("strong",{children:B.food_items?.name||"Unknown Item"})},W))}):g.jsx("strong",{children:F.item_name||"Unknown Item"})}),g.jsx("td",{style:{textAlign:"right",verticalAlign:"middle"},children:F.total_amount!=null?`₹${F.total_amount}`:"-"}),g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",fontSize:"13px",fontVariantNumeric:"tabular-nums",whiteSpace:"nowrap"},children:(()=>{const B=ee?ee.getTime():null,W=F.delivered_at?new Date(F.delivered_at).getTime():F.updated_at?new Date(F.updated_at).getTime():null;if(!B||!W||!isFinite(B)||!isFinite(W)||W<B)return"-";const de=Math.floor((W-B)/1e3),pe=Math.floor(de/3600),j=Math.floor(de%3600/60),G=de%60;return pe>0?`${pe}:${String(j).padStart(2,"0")}:${String(G).padStart(2,"0")}`:`${j}:${String(G).padStart(2,"0")}`})()}),g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",fontSize:"13px",whiteSpace:"nowrap"},children:he?he.toLocaleString():"-"}),g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:F.user_id===Vr?g.jsx("span",{style:{backgroundColor:"#6b7280",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:"App"}):g.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap"},children:"Counter"})}),g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:g.jsx("span",{className:"badge ready",children:"DELIVERED"})})]},F.id)})})]})}),p&&g.jsx("div",{style:{position:"fixed",bottom:"24px",right:"24px",zIndex:100},children:g.jsxs("button",{onClick:()=>S(!0),style:{padding:"14px 24px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.4)",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},onMouseEnter:F=>{F.currentTarget.style.backgroundColor="#dc2626",F.currentTarget.style.transform="scale(1.05)"},onMouseLeave:F=>{F.currentTarget.style.backgroundColor="#ef4444",F.currentTarget.style.transform="scale(1)"},children:[g.jsx(Dt,{size:20}),"Bulk Cancel"]})}),_&&pA.createPortal(g.jsx("div",{style:{position:"fixed",top:0,right:0,bottom:0,zIndex:999999,display:"flex",alignItems:"flex-start",justifyContent:"flex-end",padding:"20px",pointerEvents:"none"},children:g.jsxs("div",{onClick:F=>F.stopPropagation(),style:{position:"relative",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",width:"400px",height:"fit-content",maxHeight:"80vh",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",zIndex:1e6,marginTop:"20px",pointerEvents:"auto"},className:"dark:!bg-gray-800",children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[g.jsx("button",{onClick:()=>S(!1),disabled:T,style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px",border:"none",cursor:T?"not-allowed":"pointer",opacity:T?.5:1,transition:"all 0.2s"},onMouseEnter:F=>{T||(F.target.style.backgroundColor="#fecaca")},onMouseLeave:F=>{T||(F.target.style.backgroundColor="#fee2e2")},children:g.jsx(Dt,{size:32,style:{color:"#dc2626"}})}),g.jsx("div",{children:g.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Cancel Multiple Orders?"})})]}),g.jsx("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:"Are you sure you want to cancel multiple orders? Enter token numbers separated by commas, spaces, or new lines. This action will restore stock for all cancelled items."}),g.jsx("div",{style:{backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",padding:"12px",marginBottom:"20px"},children:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx("div",{style:{color:"#d97706",fontSize:"16px"},children:"⚠️"}),g.jsx("span",{style:{fontSize:"13px",color:"#92400e",fontWeight:"500"},children:"This action cannot be undone. All selected orders will be cancelled and stock will be restored."})]})}),g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("label",{className:"dark:!text-gray-200",style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Token Numbers"}),g.jsx("textarea",{value:E,onChange:F=>A(F.target.value),disabled:T,style:{width:"100%",height:"120px",padding:"12px",fontSize:"14px",border:"2px solid #e5e7eb",borderRadius:"8px",fontFamily:"monospace",resize:"none",opacity:T?.6:1},className:"dark:!bg-gray-700 dark:!text-white dark:!border-gray-600"}),g.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"6px"},className:"dark:!text-gray-400",children:"Tip: You can include or exclude the # symbol"})]}),I.text&&g.jsx(Je.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{padding:"12px 16px",borderRadius:"8px",marginBottom:"20px",backgroundColor:I.type==="success"?"#d1fae5":I.type==="error"?"#fee2e2":"#fff3cd",color:I.type==="success"?"#065f46":I.type==="error"?"#991b1b":"#92400e",fontSize:"14px",fontWeight:"500"},children:I.text}),g.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[g.jsx("button",{onClick:()=>S(!1),disabled:T,style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:T?"not-allowed":"pointer",transition:"all 0.2s"},className:"dark:!bg-gray-700 dark:!text-gray-200",onMouseEnter:F=>{T||(F.target.style.backgroundColor="#e5e7eb")},onMouseLeave:F=>{T||(F.target.style.backgroundColor="#f3f4f6")},children:"Keep Orders"}),g.jsx("button",{onClick:ce,disabled:T||!E.trim(),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:T||!E.trim()?"#9ca3af":"#ef4444",color:"#ffffff",border:"none",borderRadius:"8px",cursor:T||!E.trim()?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:F=>{!T&&E.trim()&&(F.target.style.backgroundColor="#dc2626")},onMouseLeave:F=>{!T&&E.trim()&&(F.target.style.backgroundColor="#ef4444")},children:T?g.jsxs(g.Fragment,{children:[g.jsx(_i,{className:"w-4 h-4 animate-spin"}),"Cancelling..."]}):g.jsxs(g.Fragment,{children:[g.jsx(Dt,{size:16}),"Cancel Orders"]})})]})]})}),document.body)]})}function o9(){id();const[n,e]=O.useState([]),[t,r]=O.useState({id:"",name:"",removeItemName:""}),[i,a]=O.useState(""),[s,c]=O.useState("all"),[d,f]=O.useState(!1),[p,m]=O.useState(!1),[v,x]=O.useState({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),[w,_]=O.useState(!1),[S,E]=O.useState(""),[A,T]=O.useState("id"),[R,I]=O.useState("available_quantity"),[M,U]=O.useState(null),[H,q]=O.useState(null),[ae,ce]=O.useState({show:!1,message:"",type:"success"}),[F,ee]=O.useState("all"),[he,_e]=O.useState(!1),[V,B]=O.useState(null),[W,de]=O.useState(null),[pe,j]=O.useState(!1),[G,ie]=O.useState({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),[ge,ze]=O.useState([]),[se,we]=O.useState(!1),Ce=async()=>{try{we(!0);const{data:z,error:le}=await xe.from("categories").select("*").order("name");if(le){console.error("Error fetching categories:",le);return}ze(z||[]),console.log("✅ Loaded categories:",z)}catch(z){console.error("Error fetching categories:",z)}finally{we(!1)}},Me=async()=>{try{let le=0,ve=[];for(;;){const Le=le+1e3-1,{data:wt,error:Vt}=await xe.from("food_items").select("*").range(le,Le);if(Vt)throw Vt;const pr=wt||[];if(ve=ve.concat(pr),pr.length<1e3)break;le+=1e3}ve=ve.filter(Le=>Le.is_active!==!1);const Oe=ve[0]||{},Se=["id","item_id","slug","code"],me=["available_quantity","in_stock","available","is_available","stock","status"],ye=Se.find(Le=>Object.prototype.hasOwnProperty.call(Oe,Le))||"id",Ze=me.find(Le=>Object.prototype.hasOwnProperty.call(Oe,Le))||"in_stock";T(ye),I(Ze);const tt=ve.map(Le=>{const wt=Le[ye]??String(Math.random()).slice(2),Vt=Le.name??Le.item_name??Le.title??Le.label??"Item",pr=Le.price??Le.cost??0,da=Le.available_quantity??Le.quantity??Le.stock??0,Ti=(typeof da=="number"?da>0:void 0)??Le.in_stock??Le.available??Le.is_available??(typeof Le.stock=="number"?Le.stock>0:void 0)??(typeof Le.status=="string"?String(Le.status).toLowerCase()==="in":void 0)??!0;return{id:wt,name:Vt,price:pr,availableQuantity:da,inStock:!!Ti,image_url:Le.image_url,description:Le.description,originalData:Le}});e(tt)}catch(z){console.error("Error fetching items:",z)}},dt=()=>{Me()},Ne=z=>{if(!z)return null;const le=n.find(ve=>ve.name.toLowerCase().trim()===z.toLowerCase().trim());return console.log("Searching for:",z,"Found:",le,"Items:",n.map(ve=>ve.name)),le},Te=()=>F==="all"?n:n.filter(z=>{switch(F){case"in-stock":return z.inStock&&z.availableQuantity>20;case"low-stock":return z.inStock&&z.availableQuantity<=20&&z.availableQuantity>5;case"very-low":return z.inStock&&z.availableQuantity<=5&&z.availableQuantity>0;case"out-of-stock":return!z.inStock||z.availableQuantity===0;default:return!0}}),D=async()=>{try{console.log("🔍 Checking if food_images bucket exists...");const{data:z,error:le}=await xe.storage.listBuckets();if(le)return console.error("❌ Error listing buckets:",le),!1;if(z.find(Oe=>Oe.name==="food_images"))return console.log("✅ food_images bucket already exists"),!0;{console.log("📦 food_images bucket not found, attempting to create...");const{error:Oe}=await xe.rpc("create_food_images_bucket");if(Oe){console.log("⚠️ RPC method failed, trying direct SQL...");const{error:Se}=await xe.from("storage.buckets").insert([{id:"food_images",name:"food_images",public:!0,file_size_limit:52428800,allowed_mime_types:["image/jpeg","image/png","image/gif","image/webp"]}]);if(Se)return console.error("❌ Failed to create bucket:",Se),!1}return console.log("✅ food_images bucket created successfully!"),!0}}catch(z){return console.error("❌ Error creating bucket:",z),!1}};O.useEffect(()=>{(async()=>{try{if(console.log("🧪 Testing Supabase Storage connection..."),!await D()){console.warn("⚠️ Could not ensure food_images bucket exists");return}const{data:ve,error:Oe}=await xe.storage.listBuckets();if(Oe){console.error("❌ Error listing buckets:",Oe);return}if(console.log("📋 Available buckets:",ve.map(me=>me.name)),ve.find(me=>me.name==="food_images")){console.log("✅ food_images bucket ready for use!");const{data:me,error:ye}=await xe.storage.from("food_images").list();ye?console.warn("⚠️ Could not list files in bucket:",ye.message):console.log("📁 Files in food_images bucket:",me.length)}}catch(le){console.error("❌ Storage connection test failed:",le)}})()},[]),O.useEffect(()=>{Me(),Ce()},[]);const P=async()=>{console.log("🔄 Using direct Supabase upload fallback...");let z=null,le=!1;if(v.image)try{console.log("🚀 Uploading image to Supabase Storage..."),console.log("📎 Image file details:",{name:v.image.name,size:v.image.size,type:v.image.type});const ye=Date.now(),Ze=v.image.name.split(".").pop().toLowerCase(),tt=v.name.replace(/[^a-zA-Z0-9]/g,"_"),Le=`items/${ye}-${tt}.${Ze}`;console.log("📁 Generated filename:",Le);const{data:wt,error:Vt}=await xe.storage.from("images_food").upload(Le,v.image,{cacheControl:"3600",upsert:!1,contentType:v.image.type});if(Vt)throw console.error("❌ Upload error:",Vt),console.error("❌ Upload error details:",{message:Vt.message,statusCode:Vt.statusCode,error:Vt.error}),new Error(`Upload failed: ${Vt.message}`);console.log("✅ Upload successful:",wt);const{data:pr}=xe.storage.from("images_food").getPublicUrl(Le);z=pr.publicUrl,le=!0,console.log("🔗 Public URL generated:",z)}catch(ye){console.error("❌ Image upload failed:",ye),console.error("❌ Upload error details:",ye)}else console.log("ℹ️ No image provided for upload");const ve={name:v.name.trim(),price:parseFloat(v.cost),available_quantity:100,is_active:!0};v.description.trim()&&(ve.description=v.description.trim()),v.category_id.trim()&&(ve.category_id=v.category_id.trim()),z&&(ve.image_url=z),v.serialNumber&&(ve.serial_number=parseInt(v.serialNumber)),console.log("📝 Inserting item data:",ve);const{data:Oe,error:Se}=await xe.from("food_items").insert([ve]).select();if(Se)throw console.error("❌ Database insert error:",Se),console.error("❌ Database error details:",{message:Se.message,details:Se.details,hint:Se.hint,code:Se.code}),new Error(`Database error: ${Se.message}`);console.log("✅ Item inserted successfully:",Oe);const me=le?`Item "${v.name}" added successfully with image!`:`Item "${v.name}" added successfully!`;ce({show:!0,message:me,type:"success"}),x({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),m(!1),r({id:"",name:"",removeItemName:""}),E(""),Me(),en&&en()},Y=async z=>{z.preventDefault(),_(!0),E("");try{if(!v.name.trim())throw new Error("Item name is required");if(!v.cost||parseFloat(v.cost)<=0)throw new Error("Valid cost is required");console.log("🚀 Creating FormData for API request...");const le=new FormData;le.append("name",v.name.trim()),le.append("price",v.cost),le.append("description",v.description.trim()),le.append("category_id",v.category_id.trim()),v.serialNumber&&le.append("serial_number",v.serialNumber),v.image&&(le.append("image",v.image),console.log("📎 Added image file to FormData:",v.image.name)),console.log("📤 Sending request to /api/items...");let ve,Oe;try{ve=await fetch("/api/items",{method:"POST",body:le}),console.log("📡 Response status:",ve.status),console.log("📡 Response headers:",Object.fromEntries(ve.headers.entries()));const Se=ve.headers.get("content-type");if(!Se||!Se.includes("application/json")){const me=await ve.text();throw console.error("❌ Non-JSON response:",me),new Error(`Server returned non-JSON response (${ve.status}): ${me.substring(0,200)}`)}try{Oe=await ve.json()}catch(me){console.error("❌ JSON parsing error:",me);const ye=await ve.text();throw console.error("❌ Raw response:",ye),new Error(`Invalid JSON response: ${me.message}`)}if(console.log("📋 Parsed response:",Oe),!ve.ok)throw new Error(Oe.error||`HTTP ${ve.status}: ${ve.statusText}`);if(!Oe.success)throw new Error(Oe.error||"API request failed");console.log("✅ API response:",Oe)}catch(Se){console.warn("⚠️ API server not available, using direct Supabase upload:",Se.message),await P();return}ce({show:!0,message:Oe.message,type:"success"}),x({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),m(!1),r({id:"",name:"",removeItemName:""}),E(""),Me(),en&&en()}catch(le){console.error("❌ Failed to add item:",le);const ve=le.message||"Failed to add item";E(ve),alert(`❌ Error: ${ve}`)}finally{_(!1)}},fe=()=>{m(!1),x({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),E(""),_(!1)},Ae=z=>{de(z),ie({name:z.name||"",cost:z.price||"",description:z.description||"",category_id:z.category_id||"",image:null,serialNumber:z.serial_number||z.serialNumber||""}),j(!0)},Be=()=>{j(!1),de(null),ie({name:"",cost:"",description:"",category_id:"",image:null,serialNumber:""}),E(""),_(!1)},Ie=async z=>{z.preventDefault(),_(!0),E("");try{if(!G.name.trim())throw new Error("Item name is required");if(!G.cost||parseFloat(G.cost)<=0)throw new Error("Valid cost is required");console.log("🚀 Updating item:",W.name);const le=new FormData;le.append("name",G.name.trim()),le.append("price",G.cost),le.append("description",G.description.trim()),le.append("category_id",G.category_id.trim()),le.append("id",W.id),G.serialNumber&&le.append("serial_number",G.serialNumber),G.image&&(le.append("image",G.image),console.log("📎 Added new image file to FormData:",G.image.name)),console.log("📤 Sending update request to /api/items...");let ve,Oe;try{ve=await fetch("/api/items",{method:"PUT",body:le}),console.log("📡 Response status:",ve.status);const Se=ve.headers.get("content-type");if(!Se||!Se.includes("application/json")){const ye=await ve.text();throw console.error("❌ Non-JSON response:",ye),new Error(`Server returned non-JSON response (${ve.status}): ${ye.substring(0,200)}`)}try{Oe=await ve.json()}catch(ye){console.error("❌ JSON parsing error:",ye);const Ze=await ve.text();throw console.error("❌ Raw response:",Ze),new Error(`Invalid JSON response: ${ye.message}`)}if(console.log("📋 Parsed response:",Oe),!Oe.success)throw new Error(Oe.error||"Update failed");console.log("✅ Item updated successfully via API:",Oe.data);const me=G.image?`Item "${G.name}" updated successfully with new image!`:`Item "${G.name}" updated successfully!`;ce({show:!0,message:me,type:"success"})}catch(Se){console.warn("⚠️ API update failed, trying direct Supabase update:",Se),await Ee()}Be(),Me(),en&&en()}catch(le){console.error("❌ Edit item failed:",le),E(le.message),ce({show:!0,message:`Update failed: ${le.message}`,type:"error"})}finally{_(!1)}},Ee=async()=>{console.log("🔄 Using direct Supabase update fallback...");let z=W.image_url,le=!1;if(G.image)try{console.log("🚀 Uploading new image to Supabase Storage..."),console.log("📎 Image file details:",{name:G.image.name,size:G.image.size,type:G.image.type});const ye=Date.now(),Ze=G.image.name.split(".").pop().toLowerCase(),tt=G.name.replace(/[^a-zA-Z0-9]/g,"_"),Le=`items/${ye}-${tt}.${Ze}`;console.log("📁 Generated filename:",Le);const{data:wt,error:Vt}=await xe.storage.from("images_food").upload(Le,G.image,{cacheControl:"3600",upsert:!1,contentType:G.image.type});if(Vt)throw console.error("❌ Upload error:",Vt),console.error("❌ Upload error details:",{message:Vt.message,statusCode:Vt.statusCode,error:Vt.error}),new Error(`Image upload failed: ${Vt.message}`);console.log("✅ Image uploaded successfully:",wt);const{data:pr}=xe.storage.from("images_food").getPublicUrl(Le);z=pr.publicUrl,le=!0,console.log("✅ Public URL generated:",z)}catch(ye){throw console.error("❌ Image upload failed:",ye),new Error(`Image upload failed: ${ye.message}`)}const ve={name:G.name.trim(),price:parseFloat(G.cost),description:G.description?.trim()||null,image_url:z,updated_at:new Date().toISOString()};G.serialNumber&&(ve.serial_number=parseInt(G.serialNumber)),console.log("📝 Updating item data in food_items:",ve);const{data:Oe,error:Se}=await xe.from("food_items").update(ve).eq("id",W.id).select();if(Se)throw console.error("❌ Database update error:",Se),console.error("❌ Database error details:",{message:Se.message,details:Se.details,hint:Se.hint,code:Se.code}),new Error(`Database error: ${Se.message}`);console.log("✅ Item updated successfully:",Oe);const me=le?`Item "${G.name}" updated successfully with new image!`:`Item "${G.name}" updated successfully!`;ce({show:!0,message:me,type:"success"})};O.useEffect(()=>{const z=le=>{le.key==="Escape"&&p&&fe(),le.key==="Escape"&&pe&&Be()};if(p||pe)return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[p,pe]);const He=async(z,le)=>{const ve=n,Oe=n.find(me=>me.id===z);let Se=0;if(le){const me=prompt(`Enter the quantity for ${Oe?.name||"this item"}:`,"10");if(me===null)return;const ye=parseInt(me);if(isNaN(ye)||ye<0){alert("Invalid quantity. Please enter a positive number.");return}Se=ye}e(me=>me.map(ye=>ye.id===z?{...ye,inStock:le,availableQuantity:Se}:ye));try{if(Oe&&Oe._local)return;let me={};R==="stock"?me[R]=Se:R==="status"?me[R]=le?"in":"out":R==="available_quantity"?me[R]=Se:me[R]=!!le,console.log("📦 Updating stock status:",{id:z,inStock:le,newQuantity:Se,update:me,field:R});const{data:ye,error:Ze}=await xe.from("food_items").update(me).eq(A,z).select();if(Ze)throw Ze;console.log("✅ Stock status updated successfully:",ye),ce({show:!0,message:`Item marked as ${le?`In Stock (Qty: ${Se})`:"Out of Stock"}`,type:"success"}),setTimeout(()=>ce({show:!1,message:"",type:"success"}),3e3),en&&en()}catch(me){console.error("❌ Failed to update stock in Supabase:",me),e(ve),ce({show:!0,message:`Failed to update stock: ${me.message}`,type:"error"}),setTimeout(()=>ce({show:!1,message:"",type:"success"}),3e3)}},et=async(z,le)=>{if(le<0||isNaN(le)){ce({show:!0,message:"Quantity must be a positive number or zero",type:"error"}),setTimeout(()=>ce({show:!1,message:"",type:"success"}),3e3);return}const ve=n;e(Oe=>Oe.map(Se=>Se.id===z?{...Se,availableQuantity:le,inStock:le>0}:Se));try{const Oe=n.find(Ze=>Ze.id===z);if(Oe&&Oe._local){ce({show:!0,message:"Quantity updated successfully",type:"success"}),setTimeout(()=>ce({show:!1,message:"",type:"success"}),3e3);return}const Se={available_quantity:le,is_available:le>0},{error:me}=await xe.from("food_items").update(Se).eq(A,z);if(me)throw me;ce({show:!0,message:le===0?"Quantity updated to 0 (marked unavailable)":"Quantity updated successfully",type:"success"}),setTimeout(()=>ce({show:!1,message:"",type:"success"}),3e3),en&&en()}catch(Oe){console.error("Failed to update quantity in Supabase:",Oe),e(ve),ce({show:!0,message:"Error updating quantity",type:"error"}),setTimeout(()=>ce({show:!1,message:"",type:"success"}),3e3)}},ft=async(z,le)=>{if(le<0||isNaN(le)){ce({show:!0,message:"Price must be a positive number or zero",type:"error"}),setTimeout(()=>ce({show:!1,message:"",type:"success"}),3e3);return}const ve=n;e(Oe=>Oe.map(Se=>Se.id===z?{...Se,price:le}:Se));try{const Oe=n.find(me=>me.id===z);if(Oe&&Oe._local){ce({show:!0,message:"Price updated successfully",type:"success"}),setTimeout(()=>ce({show:!1,message:"",type:"success"}),3e3);return}const{error:Se}=await xe.from("food_items").update({price:le}).eq(A,z);if(Se)throw Se;ce({show:!0,message:"Price updated successfully",type:"success"}),setTimeout(()=>ce({show:!1,message:"",type:"success"}),3e3)}catch(Oe){console.error("Failed to update price in Supabase:",Oe),e(ve),ce({show:!0,message:"Error updating price",type:"error"}),setTimeout(()=>ce({show:!1,message:"",type:"success"}),3e3)}},it=async z=>{const le=n;e(ve=>ve.filter(Oe=>Oe.id!==z));try{const ve=n.find(me=>me.id===z);if(ve&&ve._local)return;console.log("🗑️ Attempting to soft delete item:",{id:z,idField:A,target:ve});const{data:Oe,error:Se}=await xe.from("food_items").update({is_active:!1}).eq(A,z).select();if(Se){console.error("❌ Error from Supabase:",Se),console.error("Error details:",{message:Se.message,details:Se.details,hint:Se.hint,code:Se.code}),e(le),alert(`Failed to remove item.

Error: ${Se.message}

Details: ${Se.details||"Check console for more info"}`);return}console.log("✅ Item soft deleted successfully:",Oe),ce({show:!0,message:"Item moved to Removed Items",type:"success"}),setTimeout(()=>ce({show:!1,message:"",type:"success"}),3e3),en&&en()}catch(ve){console.error("❌ Exception during soft delete:",ve),e(le),alert(`Failed to remove item.

Error: ${ve.message||"Unknown error"}`)}},Ke=Te().filter(z=>{const le=i.trim().toLowerCase(),ve=le?String(z.name||"").toLowerCase().includes(le):!0,Oe=s==="all"||(s==="in"?z.inStock:!z.inStock);return ve&&Oe}).sort((z,le)=>{const ve=i.trim().toLowerCase(),Oe=String(z.name||"").toLowerCase(),Se=String(le.name||"").toLowerCase(),me=z.availableQuantity||0,ye=le.availableQuantity||0;if(me!==ye)return me-ye;if(ve){const Ze=Oe.startsWith(ve),tt=Se.startsWith(ve);if(Ze&&!tt)return-1;if(!Ze&&tt)return 1;if(Ze===tt)return Oe.localeCompare(Se)}return Oe.localeCompare(Se)});return g.jsxs("div",{style:{display:"grid",gap:16},children:[g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"12px",marginBottom:"16px"},children:[g.jsxs("div",{style:{backgroundColor:F==="all"?"#e2e8f0":"#f8fafc",border:F==="all"?"2px solid #64748b":"1px solid #e2e8f0",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:F==="all"?"scale(1.02)":"scale(1)",boxShadow:F==="all"?"0 4px 12px rgba(100, 116, 139, 0.3)":"none"},onClick:()=>ee("all"),children:[g.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1e293b"},children:n.length}),g.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Total"})]}),g.jsxs("div",{style:{backgroundColor:F==="in-stock"?"#bbf7d0":"#f0fdf4",border:F==="in-stock"?"2px solid #16a34a":"1px solid #bbf7d0",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:F==="in-stock"?"scale(1.02)":"scale(1)",boxShadow:F==="in-stock"?"0 4px 12px rgba(22, 163, 74, 0.3)":"none"},onClick:()=>ee(F==="in-stock"?"all":"in-stock"),children:[g.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#166534"},children:n.filter(z=>z.inStock&&z.availableQuantity>20).length}),g.jsx("div",{style:{fontSize:"12px",color:"#16a34a"},children:"In Stock"})]}),g.jsxs("div",{style:{backgroundColor:F==="low-stock"?"#fef3c7":"#fefce8",border:F==="low-stock"?"2px solid #ca8a04":"1px solid #fde047",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:F==="low-stock"?"scale(1.02)":"scale(1)",boxShadow:F==="low-stock"?"0 4px 12px rgba(202, 138, 4, 0.3)":"none"},onClick:()=>ee(F==="low-stock"?"all":"low-stock"),children:[g.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#a16207"},children:n.filter(z=>z.inStock&&z.availableQuantity<=20&&z.availableQuantity>5).length}),g.jsx("div",{style:{fontSize:"12px",color:"#ca8a04"},children:"Low Stock"})]}),g.jsxs("div",{style:{backgroundColor:F==="very-low"?"#fecaca":"#fef2f2",border:F==="very-low"?"2px solid #dc2626":"1px solid #fca5a5",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:F==="very-low"?"scale(1.02)":"scale(1)",boxShadow:F==="very-low"?"0 4px 12px rgba(220, 38, 38, 0.3)":"none"},onClick:()=>ee(F==="very-low"?"all":"very-low"),children:[g.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#991b1b"},children:n.filter(z=>z.inStock&&z.availableQuantity<=5&&z.availableQuantity>0).length}),g.jsx("div",{style:{fontSize:"12px",color:"#dc2626"},children:"Very Low"})]}),g.jsxs("div",{style:{backgroundColor:F==="out-of-stock"?"#e2e8f0":"#f1f5f9",border:F==="out-of-stock"?"2px solid #64748b":"1px solid #cbd5e1",borderRadius:"8px",padding:"12px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",transform:F==="out-of-stock"?"scale(1.02)":"scale(1)",boxShadow:F==="out-of-stock"?"0 4px 12px rgba(100, 116, 139, 0.3)":"none"},onClick:()=>ee(F==="out-of-stock"?"all":"out-of-stock"),children:[g.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#475569"},children:n.filter(z=>!z.inStock||z.availableQuantity===0).length}),g.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:"Out of Stock"})]})]}),g.jsx(hr,{title:"Inventory Controls",titleAction:g.jsxs("button",{onClick:()=>_e(!0),className:"btn btn-secondary",style:{padding:"8px 16px",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx(ju,{size:16}),"Removed Items"]}),children:g.jsxs("div",{className:"inventory-controls-vertical",children:[g.jsx("div",{className:"search-section",children:g.jsx("div",{className:"add-item-container",children:g.jsx("input",{className:"search-input",placeholder:"Search food items...",value:i,onChange:z=>a(z.target.value)})})}),g.jsx("div",{className:"add-section",children:g.jsxs("div",{className:"add-item-container",children:[g.jsx("input",{className:"add-input",placeholder:"Add Item",value:t.name,onChange:z=>r({...t,name:z.target.value})}),g.jsx(Je.button,{className:"dynamic-btn add-btn",onClick:()=>{const z=t.name.trim();z&&(x({...v,name:z}),m(!0),f(!1))},disabled:!t.name.trim(),whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300,damping:20},children:g.jsx("span",{children:"+"})})]})}),g.jsx("div",{className:"remove-section",children:g.jsxs("div",{className:"add-item-container",children:[g.jsx("input",{className:"add-input",placeholder:"Remove Item",value:t.removeItemName||"",onChange:z=>r({...t,removeItemName:z.target.value})}),g.jsx(Je.button,{className:"dynamic-btn remove-btn",onClick:()=>{const z=(t.removeItemName||"").trim();if(!z)return;const le=Ne(z);le?(console.log("Removing item:",le),it(le.id),r({...t,removeItemName:""})):B({itemName:z})},disabled:!(t.removeItemName||"").trim(),whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300,damping:20},children:g.jsx("span",{children:"−"})})]})})]})}),g.jsxs(hr,{title:"Inventory Items",children:[F!=="all"&&g.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"6px",fontSize:"14px",color:"#0369a1"},children:[g.jsx("strong",{children:"🔍 Filter Active:"})," Showing ",F==="in-stock"?"In Stock":F==="low-stock"?"Low Stock":F==="very-low"?"Very Low":"Out of Stock"," items only",g.jsx("button",{onClick:()=>ee("all"),style:{marginLeft:"8px",padding:"2px 8px",fontSize:"12px",backgroundColor:"#0ea5e9",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear Filter"})]}),g.jsxs("table",{className:"table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{style:{width:"80px",textAlign:"center"},children:"Image"}),g.jsx("th",{style:{width:"25%"},children:"Item Name"}),g.jsx("th",{style:{width:"12%",textAlign:"right"},children:"Price"}),g.jsx("th",{style:{width:"12%",textAlign:"center"},children:"Quantity"}),g.jsx("th",{style:{width:"15%",textAlign:"center"},children:"Stock Status"}),g.jsx("th",{style:{width:"20%",textAlign:"center"},children:"Actions"})]})}),g.jsx("tbody",{children:Ke.map(z=>g.jsxs("tr",{children:[g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle",padding:"8px"},children:g.jsxs("div",{style:{width:"50px",height:"50px",borderRadius:"8px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",margin:"0 auto"},children:[z.image_url?g.jsx("img",{src:z.image_url,alt:z.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:le=>{le.target.style.display="none",le.target.nextSibling.style.display="flex"}}):null,g.jsx("div",{style:{display:z.image_url?"none":"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",fontSize:"20px",color:"#6b7280"},children:"📷"})]})}),g.jsx("td",{style:{verticalAlign:"middle"},children:g.jsx("strong",{children:z.name})}),g.jsx("td",{style:{textAlign:"right",verticalAlign:"middle"},children:M===z.id?g.jsx("input",{type:"number",className:"price-input",value:z.price,onChange:le=>e(n.map(ve=>ve.id===z.id?{...ve,price:Number(le.target.value)}:ve)),onBlur:()=>{ft(z.id,z.price),U(null)},onKeyDown:le=>{le.key==="Enter"?(ft(z.id,z.price),U(null)):le.key==="Escape"&&U(null)},min:"0",step:"0.01",autoFocus:!0,style:{MozAppearance:"textfield"}}):g.jsxs("span",{className:"price-cell",onClick:()=>U(z.id),children:["₹",z.price]})}),g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:H===z.id?g.jsx("input",{type:"number",className:"quantity-input",value:z.availableQuantity,onChange:le=>e(n.map(ve=>ve.id===z.id?{...ve,availableQuantity:Number(le.target.value)}:ve)),onBlur:()=>{et(z.id,z.availableQuantity),q(null)},onKeyDown:le=>{le.key==="Enter"?(et(z.id,z.availableQuantity),q(null)):le.key==="Escape"&&q(null)},min:"0",autoFocus:!0}):g.jsx("span",{className:"quantity-cell",onClick:()=>q(z.id),style:{cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s ease",display:"inline-block",minWidth:"40px",textAlign:"center",fontSize:"14px",fontWeight:"600",color:z.availableQuantity>20?"#10b981":z.availableQuantity>5?"#f59e0b":z.availableQuantity>0?"#ef4444":"#6b7280"},children:z.availableQuantity})}),g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:g.jsx("span",{className:"stock-status-badge",style:{backgroundColor:z.availableQuantity>20?"#dcfce7":z.availableQuantity>5?"#fef3c7":z.availableQuantity>0?"#fee2e2":"#f3f4f6",color:z.availableQuantity>20?"#166534":z.availableQuantity>5?"#92400e":z.availableQuantity>0?"#991b1b":"#6b7280"},children:z.availableQuantity>20?"🟢 In Stock":z.availableQuantity>5?"🟡 Low Stock":z.availableQuantity>0?"🟠 Very Low":"🔴 Out of Stock"})}),g.jsx("td",{style:{textAlign:"center",verticalAlign:"middle"},children:g.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",flexWrap:"nowrap"},children:[g.jsx("button",{className:"btn btn-secondary",onClick:()=>Ae(z),style:{padding:"6px 10px",fontSize:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",minWidth:"50px",whiteSpace:"nowrap"},children:"Edit"}),z.inStock?g.jsx("button",{className:"btn",onClick:()=>He(z.id,!1),style:{padding:"6px 10px",fontSize:"12px",minWidth:"75px",whiteSpace:"nowrap"},children:"Mark Out"}):g.jsx("button",{className:"btn",onClick:()=>He(z.id,!0),style:{padding:"6px 10px",fontSize:"12px",minWidth:"75px",whiteSpace:"nowrap"},children:"Mark In"})]})})]},z.id))})]})]}),p&&g.jsx("div",{className:"add-item-panel-overlay",onClick:fe,children:g.jsxs(Je.div,{className:"add-item-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},onClick:z=>z.stopPropagation(),children:[g.jsxs("div",{className:"add-item-panel-header",children:[g.jsx("h3",{children:"Add New Item"}),g.jsx("button",{className:"add-item-panel-close",onClick:fe,children:g.jsx(Dt,{size:20})})]}),g.jsxs("form",{onSubmit:Y,className:"add-item-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"item-name",children:"Item Name *"}),g.jsx("input",{id:"item-name",type:"text",className:"form-input",value:v.name,onChange:z=>x({...v,name:z.target.value}),placeholder:"Enter item name",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"item-cost",children:"Cost (₹) *"}),g.jsx("input",{id:"item-cost",type:"number",className:"form-input",value:v.cost,onChange:z=>x({...v,cost:z.target.value}),placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"item-description",children:"Description"}),g.jsx("textarea",{id:"item-description",className:"form-textarea",value:v.description,onChange:z=>x({...v,description:z.target.value}),placeholder:"Enter item description (optional)",rows:"3"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"item-category",children:"Category"}),g.jsxs("select",{id:"item-category",className:"form-input",value:v.category_id,onChange:z=>x({...v,category_id:z.target.value}),disabled:se,style:{cursor:se?"wait":"pointer"},children:[g.jsx("option",{value:"",children:"Select a category..."}),ge.map(z=>g.jsx("option",{value:z.id,children:z.name},z.id))]}),se&&g.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Loading categories..."}),!se&&ge.length===0&&g.jsx("div",{style:{fontSize:"12px",color:"#ef4444",marginTop:"4px"},children:"No categories found. Please add categories first."})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"item-serial",children:"Serial Number (Display Order)"}),g.jsx("input",{id:"item-serial",type:"number",className:"form-input",value:v.serialNumber,onChange:z=>x({...v,serialNumber:z.target.value}),placeholder:"e.g., 1, 2, 3...",min:"1",step:"1"}),g.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Controls the display order in Place Order panel (lower numbers appear first)"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Image Upload (Optional)"}),g.jsx(eb,{value:v.image,onChange:z=>x({...v,image:z}),disabled:w}),g.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"10px"},children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:async()=>{console.log("=== TESTING SUPABASE STORAGE CONNECTION ===");try{console.log("🔍 Step 1: Testing bucket access...");const{data:z,error:le}=await xe.storage.listBuckets();if(le){console.error("❌ Bucket list failed:",le),alert(`❌ Bucket access failed: ${le.message}`);return}console.log("✅ Available buckets:",z.map(tt=>tt.name));const ve=z.find(tt=>tt.name==="food_images");if(!ve){console.log("📦 food_images bucket not found, attempting to create...");try{const{data:tt,error:Le}=await xe.storage.createBucket("food_images",{public:!0,fileSizeLimit:52428800,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp"]});if(Le){console.error("❌ Failed to create bucket:",Le),alert(`❌ Cannot create bucket automatically: ${Le.message}

Please create it manually in Supabase Dashboard:
1. Go to Storage
2. Click "New bucket"
3. Name: food_images
4. Check "Public bucket"
5. Click "Create bucket"`);return}console.log("✅ Bucket created successfully:",tt),alert(`✅ food_images bucket created successfully!

Now setting up permissions...`);try{alert(`✅ Bucket created! Now you need to set up permissions:

1. Go to Supabase Dashboard → SQL Editor
2. Run these commands:

`+[`CREATE POLICY "Public Access" ON storage.objects FOR SELECT USING (bucket_id = 'food_images')`,`CREATE POLICY "Public Upload" ON storage.objects FOR INSERT WITH CHECK (bucket_id = 'food_images')`,`CREATE POLICY "Public Update" ON storage.objects FOR UPDATE USING (bucket_id = 'food_images')`,`CREATE POLICY "Public Delete" ON storage.objects FOR DELETE USING (bucket_id = 'food_images')`].join(`

`)+`

3. Then test storage access again!`);return}catch(wt){console.error("❌ Policy setup failed:",wt),alert("✅ Bucket created but policy setup failed. Please set up permissions manually in Supabase Dashboard.");return}}catch(tt){console.error("❌ Bucket creation failed:",tt),alert(`❌ Failed to create bucket: ${tt.message}

Please create it manually in Supabase Dashboard.`);return}}console.log("✅ food_images bucket found:",ve),console.log("🔍 Step 2: Testing file listing...");const{data:Oe,error:Se}=await xe.storage.from("food_images").list();if(Se){console.error("❌ File listing failed:",Se),alert(`❌ Cannot access files in bucket: ${Se.message}

This is likely a permissions issue. Check bucket policies.`);return}console.log("✅ Files in bucket:",Oe.length),console.log("🔍 Step 3: Testing upload permissions...");const me=new File(["test"],"test.txt",{type:"text/plain"}),{data:ye,error:Ze}=await xe.storage.from("food_images").upload(`test_${Date.now()}.txt`,me);if(Ze){console.error("❌ Upload test failed:",Ze),alert(`❌ Upload test failed: ${Ze.message}

Bucket exists but upload permissions are missing.`);return}console.log("✅ Upload test successful:",ye),await xe.storage.from("food_images").remove([ye.path]),alert(`✅ Storage test successful!

- Buckets: ${z.length} found
- food_images bucket: ✅ Accessible
- File listing: ✅ Working
- Upload: ✅ Working

Your storage is ready!`)}catch(z){console.error("❌ Storage test error:",z),alert(`❌ Storage test error: ${z.message}`)}},style:{fontSize:"12px",padding:"6px 12px"},children:"Test Storage Access"}),v.image&&g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{x({...v,image:null}),document.getElementById("item-image").value=""},style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#ef4444",color:"white"},children:"Remove Image"}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{const z=`
-- Copy and paste these SQL commands in your Supabase SQL Editor:

-- 1. Create storage policies for food_images bucket
CREATE POLICY "Public Access" ON storage.objects
FOR SELECT USING (bucket_id = 'food_images');

CREATE POLICY "Public Upload" ON storage.objects
FOR INSERT WITH CHECK (bucket_id = 'food_images');

CREATE POLICY "Public Update" ON storage.objects
FOR UPDATE USING (bucket_id = 'food_images');

CREATE POLICY "Public Delete" ON storage.objects
FOR DELETE USING (bucket_id = 'food_images');

-- 2. If the above fails, try this alternative:
INSERT INTO storage.policies (id, bucket_id, name, definition, check_expression)
VALUES 
  ('food_images_select', 'food_images', 'Public Access', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_insert', 'food_images', 'Public Upload', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_update', 'food_images', 'Public Update', 'bucket_id = ''food_images''', 'bucket_id = ''food_images'''),
  ('food_images_delete', 'food_images', 'Public Delete', 'bucket_id = ''food_images''', 'bucket_id = ''food_images''')
ON CONFLICT (id) DO NOTHING;
                      `;navigator.clipboard.writeText(z).then(()=>{alert(`📋 SQL commands copied to clipboard!

1. Go to Supabase Dashboard → SQL Editor
2. Paste and run the commands
3. Test storage access again`)}).catch(()=>{alert(`📋 SQL Commands:

`+z+`

Copy these and run in Supabase SQL Editor`)})},style:{fontSize:"12px",padding:"6px 12px",backgroundColor:"#3b82f6",color:"white"},children:"Fix Permissions"})]})]}),S&&g.jsxs("div",{className:"form-error",style:{backgroundColor:"#fef2f2",border:"2px solid #fecaca",borderRadius:"8px",padding:"12px",marginTop:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx(fr,{size:20,style:{color:"#dc2626"}}),g.jsxs("div",{children:[g.jsx("div",{style:{fontWeight:"600",color:"#dc2626",marginBottom:"4px"},children:"❌ Upload Failed"}),g.jsx("div",{style:{color:"#991b1b",fontSize:"14px"},children:S}),g.jsx("div",{style:{color:"#6b7280",fontSize:"12px",marginTop:"4px"},children:"Check the browser console (F12) for more details"}),g.jsx("button",{type:"button",onClick:()=>E(""),style:{marginTop:"8px",padding:"4px 8px",fontSize:"12px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear Error & Try Again"})]})]}),g.jsxs("div",{className:"form-actions",children:[g.jsx("button",{type:"button",className:"btn btn-secondary",onClick:fe,disabled:w,children:"Cancel"}),g.jsx("button",{type:"submit",className:"btn btn-primary",disabled:w,children:w?g.jsxs(g.Fragment,{children:[g.jsx(_i,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):g.jsxs(g.Fragment,{children:[g.jsx(CR,{size:16}),"Add Item"]})})]})]})]})}),pe&&g.jsx("div",{className:"add-item-panel-overlay",onClick:Be,children:g.jsxs(Je.div,{className:"add-item-panel",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},onClick:z=>z.stopPropagation(),children:[g.jsxs("div",{className:"add-item-panel-header",children:[g.jsx("h3",{children:"Edit Item"}),g.jsx("button",{className:"add-item-panel-close",onClick:Be,children:g.jsx(Dt,{size:20})})]}),g.jsxs("form",{onSubmit:Ie,className:"add-item-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"edit-item-name",children:"Item Name *"}),g.jsx("input",{id:"edit-item-name",type:"text",className:"form-input",value:G.name,onChange:z=>ie({...G,name:z.target.value}),placeholder:"Enter item name",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"edit-item-cost",children:"Cost (₹) *"}),g.jsx("input",{id:"edit-item-cost",type:"number",className:"form-input",value:G.cost,onChange:z=>ie({...G,cost:z.target.value}),placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"edit-item-description",children:"Description"}),g.jsx("textarea",{id:"edit-item-description",className:"form-textarea",value:G.description,onChange:z=>ie({...G,description:z.target.value}),placeholder:"Enter item description (optional)",rows:"3"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"edit-item-category",children:"Category"}),g.jsxs("select",{id:"edit-item-category",className:"form-input",value:G.category_id,onChange:z=>ie({...G,category_id:z.target.value}),disabled:se,style:{cursor:se?"wait":"pointer"},children:[g.jsx("option",{value:"",children:"Select a category..."}),ge.map(z=>g.jsx("option",{value:z.id,children:z.name},z.id))]}),se&&g.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Loading categories..."}),!se&&ge.length===0&&g.jsx("div",{style:{fontSize:"12px",color:"#ef4444",marginTop:"4px"},children:"No categories found. Please add categories first."})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"edit-item-serial",children:"Serial Number (Display Order)"}),g.jsx("input",{id:"edit-item-serial",type:"number",className:"form-input",value:G.serialNumber,onChange:z=>ie({...G,serialNumber:z.target.value}),placeholder:"e.g., 1, 2, 3...",min:"1",step:"1"}),g.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Controls the display order in Place Order panel (lower numbers appear first)"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Current Image"}),W?.image_url&&g.jsxs("div",{style:{marginBottom:"10px"},children:[g.jsx("img",{src:W.image_url,alt:W.name,style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb"}}),g.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Current image"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"New Image Upload (Optional)"}),g.jsx(eb,{value:G.image,onChange:z=>ie({...G,image:z}),disabled:w}),g.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:"Upload a new image to replace the current one, or leave empty to keep current image"})]}),S&&g.jsxs("div",{className:"form-error",style:{backgroundColor:"#fef2f2",border:"2px solid #fecaca",borderRadius:"8px",padding:"12px",marginTop:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx(fr,{size:20,style:{color:"#dc2626"}}),g.jsxs("div",{children:[g.jsx("div",{style:{fontWeight:"600",color:"#dc2626",marginBottom:"4px"},children:"❌ Update Failed"}),g.jsx("div",{style:{color:"#991b1b",fontSize:"14px"},children:S}),g.jsx("div",{style:{color:"#6b7280",fontSize:"12px",marginTop:"4px"},children:"Check the browser console (F12) for more details"})]})]}),g.jsxs("div",{className:"form-actions",style:{display:"flex",gap:"12px",marginTop:"20px"},children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:Be,disabled:w,style:{flex:1},children:"Cancel"}),g.jsx("button",{type:"submit",className:"btn-primary",disabled:w,style:{flex:1},children:w?"Updating...":"Update Item"})]})]})]})}),g.jsx(kn,{children:ae.show&&g.jsx(Je.div,{className:"fixed bottom-4 right-4 z-50",initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{duration:.3},children:g.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${ae.type==="success"?"bg-green-500":"bg-red-500"}`,children:ae.message})})}),g.jsx(Mk,{isOpen:he,onClose:()=>_e(!1),onItemRestored:dt}),g.jsx(kn,{children:V&&g.jsxs(g.Fragment,{children:[g.jsx(Je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>B(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99998,backdropFilter:"blur(4px)"}}),g.jsxs(Je.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:z=>z.stopPropagation(),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:99999,maxWidth:"450px",width:"90%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:"dark:!bg-gray-800",children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[g.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#fef3c7",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:g.jsx(fr,{size:24,style:{color:"#f59e0b"}})}),g.jsx("div",{children:g.jsx("h3",{className:"dark:!text-white",style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#111827"},children:"Item Not Found"})})]}),g.jsxs("p",{className:"dark:!text-gray-300",style:{margin:"0 0 24px 0",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["The item ",g.jsxs("strong",{style:{color:"#111827"},className:"dark:!text-white",children:['"',V.itemName,'"']})," was not found in the inventory. Please check the spelling and try again."]}),g.jsxs("div",{style:{backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"8px",padding:"12px",marginBottom:"24px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[g.jsx(fr,{size:16,style:{color:"#0284c7",marginTop:"2px",flexShrink:0}}),g.jsx("p",{style:{margin:0,fontSize:"13px",color:"#075985",lineHeight:"1.4"},children:"Tip: Item names are case-insensitive. Make sure you're using the exact name as it appears in the inventory list."})]}),g.jsx("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:g.jsx("button",{onClick:()=>B(null),style:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",backgroundColor:"#3b82f6",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:z=>{z.target.style.backgroundColor="#2563eb"},onMouseLeave:z=>{z.target.style.backgroundColor="#3b82f6"},children:"Got It"})})]})]})})]})}function s9(){const[n,e]=O.useState([]),[t,r]=O.useState([]),[i,a]=O.useState(null),[s,c]=O.useState(null),[d,f]=O.useState(!1),[p,m]=O.useState(!0),[v,x]=O.useState(new Date),[w,_]=O.useState("english"),[S,E]=O.useState("tomorrow"),[A,T]=O.useState(new Date),R=async()=>{f(!0);try{console.log("🤖 AI Predictions: Fetching orders data...");const ee=new Date;ee.setDate(ee.getDate()-30);const{data:he,error:_e}=await xe.from("orders").select("*").gte("created_at",ee.toISOString()).order("created_at",{ascending:!1});if(_e)throw _e;const{data:V,error:B}=await xe.from("food_items").select("*");if(B)throw B;e(he||[]),r(V||[]),c(new Date),console.log("🤖 AI Predictions: Fetched",he?.length||0,"orders and",V?.length||0,"food items"),F(he||[],V||[])}catch(ee){console.error("❌ AI Predictions: Failed to fetch data:",ee),alert("Failed to fetch data for predictions: "+ee.message)}finally{f(!1)}},I=["చైత్రం","వైశాఖం","జ్యేష్ఠం","ఆషాఢం","శ్రావణం","భాద్రపదం","ఆశ్వీజం","కార్తీకం","మార్గశిరం","పుష్యం","మాఘం","ఫాల్గుణం"],M=["ఆదివారం","సోమవారం","మంగళవారం","బుధవారం","గురువారం","శుక్రవారం","శనివారం"],U={seasonal:{summer:{"Curd Rice":1.4,Rasam:1.3,Pulihora:1.2,Biryani:.8},monsoon:{Haleem:1.6,Sambar:1.2,Rasam:1.3,Dosa:1.1},winter:{Biryani:1.3,Kebabs:1.2,Pongal:1.4,Haleem:1.2}}},H=ee=>{const he=ee.getMonth()+1;return he>=3&&he<=5?"summer":he>=6&&he<=9?"monsoon":"winter"},q=ee=>{const he=ee.getFullYear()-78,_e=I[ee.getMonth()],V=M[ee.getDay()];return{year:he,month:_e,day:V,date:ee.getDate()}},ae={"2025-03-30":{name:"Ugadi",reduction:.7,duration:1},"2026-03-20":{name:"Ugadi",reduction:.7,duration:1},"2025-04-06":{name:"Sri Rama Navami",reduction:.8,duration:1},"2025-05-22":{name:"Hanuman Jayanti",reduction:.8,duration:1},"2025-05-15":{name:"Saraswati Pushkaralu",reduction:.6,duration:12},"2025-08-08":{name:"Varalakshmi Vratam",reduction:.7,duration:1},"2025-08-16":{name:"Krishna Janmashtami",reduction:.8,duration:1},"2025-08-27":{name:"Ganesh Chaturthi",reduction:.6,duration:9},"2025-09-21":{name:"Indira Ekadashi",reduction:.8,duration:1},"2025-09-22":{name:"Navaratri / Dasara",reduction:.6,duration:11},"2025-10-20":{name:"Deepavali",reduction:.7,duration:1}},ce=ee=>{const he=ee.toISOString().split("T")[0];if(ae[he])return ae[he];for(const[_e,V]of Object.entries(ae)){const B=new Date(_e),W=new Date(B);if(W.setDate(W.getDate()+V.duration),ee>=B&&ee<=W)return V}return null},F=(ee,he)=>{console.log("🤖 AI Predictions: Generating predictions...");const _e=new Date,V=new Date(_e.getFullYear(),_e.getMonth(),_e.getDate()),B=new Date(V);B.setDate(B.getDate()-1);const W=new Date(V);W.setDate(W.getDate()-7);const de=new Date(V);de.setDate(de.getDate()-30);const pe=ee.filter(me=>new Date(me.created_at)>=V),j=ee.filter(me=>{const ye=new Date(me.created_at);return ye>=B&&ye<V}),G=ee.filter(me=>new Date(me.created_at)>=W),ie=ee.filter(me=>new Date(me.created_at)>=de),ge=pe.length,ze=j.length,se=G.length/7,we=ie.length/30,Ce={};ee.forEach(me=>{const ye=me.item_name;Ce[ye]||(Ce[ye]={totalOrders:0,totalRevenue:0,avgPrice:0,lastOrdered:null}),Ce[ye].totalOrders++,Ce[ye].totalRevenue+=me.total_amount||me.price||0,Ce[ye].avgPrice=Ce[ye].totalRevenue/Ce[ye].totalOrders;const Ze=new Date(me.created_at);(!Ce[ye].lastOrdered||Ze>Ce[ye].lastOrdered)&&(Ce[ye].lastOrdered=Ze)});const Me=Object.entries(Ce).sort(([,me],[,ye])=>ye.totalOrders-me.totalOrders).slice(0,10),dt={};ee.forEach(me=>{const ye=new Date(me.created_at).getHours();dt[ye]||(dt[ye]=0),dt[ye]++});const Ne=Object.entries(dt).sort(([,me],[,ye])=>ye-me).slice(0,3).map(([me])=>`${me}:00`),Te=H(V),D=q(V),P=ce(V),Y=new Date(V);Y.setDate(Y.getDate()+1);const fe=ce(Y);H(Y);const Ae=new Date(V);Ae.setDate(Ae.getDate()+2),ce(Ae),H(Ae);const Be=[];for(let me=1;me<=7;me++){const ye=new Date(V);ye.setDate(V.getDate()+me);const Ze=ce(ye),tt=H(ye),Le=ye.getDay()===0||ye.getDay()===6;let wt=se;Le&&(ye.getDay()===0?wt=0:wt*=.75),Ze&&(wt*=1-Ze.reduction+.3);const Vt=U.seasonal[tt]||{},pr=Object.values(Vt).reduce((da,Ti)=>da+Ti,0)/Math.max(Object.keys(Vt).length,1);wt*=pr||1,Be.push({date:ye,day:M[ye.getDay()],predicted:Math.round(wt),festival:Ze,season:tt,isWeekend:Le,isHoliday:ye.getDay()===0})}const Ie=Be[0].predicted,Ee=Be[1].predicted,He=Math.round(Be.reduce((me,ye)=>me+ye.predicted,0)/7),et=[];he.forEach(me=>{const ye=me.available_quantity||me.stock||0,Ze=Ce[me.name]?.totalOrders||0;ye<=5&&Ze>0?et.push({type:"low_stock",priority:"high",message:`${me.name} is running low (${ye} left) but is popular (${Ze} orders)`,action:"Restock immediately"}):ye<=10&&Ze>5&&et.push({type:"low_stock",priority:"medium",message:`${me.name} has ${ye} units left and moderate demand`,action:"Consider restocking soon"})}),Me.length>0&&et.push({type:"popular_item",priority:"medium",message:`${Me[0][0]} is your most popular item (${Me[0][1].totalOrders} orders)`,action:"Ensure adequate stock"}),Ne.length>0&&et.push({type:"peak_hours",priority:"low",message:`Peak ordering hours: ${Ne.join(", ")}`,action:"Prepare extra staff during these hours"}),fe&&et.push({type:"festival_nonveg_reduction",priority:"high",message:`Tomorrow is ${fe.name} - Non-veg consumption will be ${Math.round(fe.reduction*100)}% lower`,action:`Reduce non-veg items by ${Math.round(fe.reduction*100)}%. Focus on vegetarian options like Dosa, Idli, Sambar, Curd Rice`});const ft=U.seasonal[Te]||{},it=Object.entries(ft).sort(([,me],[,ye])=>ye-me)[0];it&&it[1]>1.2&&et.push({type:"seasonal_boost",priority:"medium",message:`Current season (${Te}) favors ${it[0]} - demand is ${Math.round(it[1]*100)}% higher`,action:`Increase ${it[0]} preparation for seasonal demand`});const Ke=Be.find(me=>me.isHoliday),z=Be.find(me=>me.isWeekend&&!me.isHoliday);Ke&&et.push({type:"holiday_planning",priority:"medium",message:"Sunday is college holiday - no orders expected (0 orders)",action:"College closed on Sunday. Focus on maintenance and preparation for Monday"}),z&&et.push({type:"saturday_pattern",priority:"medium",message:"Saturday shows 25% lower demand due to Telangana college non-veg consumption patterns",action:"Reduce non-veg items by 20-30%. Focus on vegetarian options and lighter meals"});const le=ee.reduce((me,ye)=>me+(ye.total_amount||ye.price||0),0)/ee.length,ve=Ie*le,Oe=Ee*le,Se=He*7*le;a({summary:{todayOrders:ge,yesterdayOrders:ze,weekAverage:Math.round(se),monthAverage:Math.round(we),predictedTomorrow:Ie,predictedDayAfter:Ee,weeklyAverage:He,predictedRevenue:Math.round(ve),predictedRevenueDayAfter:Math.round(Oe),predictedWeeklyRevenue:Math.round(Se),totalItems:he.length,totalOrders:ee.length},popularItems:Me.slice(0,5),peakHours:Ne,recommendations:et,itemStats:Ce,weeklyPredictions:Be,teluguDate:D,currentSeason:Te,festival:P,lastUpdated:new Date}),console.log("🤖 AI Predictions: Generated predictions successfully")};return O.useEffect(()=>{if(p){R();const ee=setInterval(()=>{console.log("🤖 AI Predictions: Auto-refreshing data..."),R()},3600*1e3);return()=>clearInterval(ee)}},[p]),g.jsx("div",{className:"home-dashboard",children:g.jsx("div",{className:"card coming-soon-card",children:g.jsxs("div",{className:"coming-soon-content",children:[g.jsx("div",{className:"coming-soon-icon",children:"🤖"}),g.jsx("h1",{className:"coming-soon-title",children:"AI Predictions"}),g.jsx("p",{className:"coming-soon-description",children:"Get intelligent insights and predictions about your canteen operations powered by advanced AI algorithms."}),g.jsx("div",{className:"coming-soon-status",children:g.jsxs("div",{className:"status-indicator",children:[g.jsx("span",{style:{marginRight:"8px"},children:"🚧"}),"Coming Soon"]})}),g.jsxs("div",{className:"features-preview",children:[g.jsx("h3",{className:"features-title",children:"Planned Features:"}),g.jsxs("div",{className:"features-list",children:[g.jsxs("div",{className:"feature-item",children:[g.jsx("span",{children:"📈"}),g.jsx("span",{children:"Order volume predictions for tomorrow and next week"})]}),g.jsxs("div",{className:"feature-item",children:[g.jsx("span",{children:"💰"}),g.jsx("span",{children:"Revenue forecasting based on historical data"})]}),g.jsxs("div",{className:"feature-item",children:[g.jsx("span",{children:"🔥"}),g.jsx("span",{children:"Popular items analysis and recommendations"})]}),g.jsxs("div",{className:"feature-item",children:[g.jsx("span",{children:"⏰"}),g.jsx("span",{children:"Peak hours identification for better staffing"})]}),g.jsxs("div",{className:"feature-item",children:[g.jsx("span",{children:"📊"}),g.jsx("span",{children:"Trend analysis with seasonal adjustments"})]})]})]})]})})})}function l9(){const{isEnabled:n,toggleNotifications:e,playTestSound:t,isInitialized:r,showOrderNotification:i}=gd();return g.jsxs("div",{className:"home-dashboard",children:[g.jsxs("div",{className:"card",children:[g.jsx("h2",{style:{marginTop:0},children:"Account"}),g.jsx("div",{className:"actions",style:{justifyContent:"flex-start"},children:g.jsx("button",{className:"btn btn-danger",onClick:()=>{try{localStorage.clear()}catch{}const a=import.meta&&nd&&"/IARE-Canteen-Web/"||"/";window.location.href=a},children:"Log out"})})]}),g.jsxs("div",{className:"card",children:[g.jsx("h2",{children:"Sound Notifications"}),g.jsx("div",{className:"form",children:g.jsxs("div",{className:"field",children:[g.jsx("label",{className:"label",children:"Order Notifications"}),g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsx("button",{className:`btn ${n?"btn-primary":"btn-secondary"}`,onClick:e,disabled:!r,children:n?g.jsxs(g.Fragment,{children:[g.jsx(GR,{className:"w-4 h-4"}),"Enabled"]}):g.jsxs(g.Fragment,{children:[g.jsx(WR,{className:"w-4 h-4"}),"Disabled"]})}),g.jsxs("button",{className:"btn btn-secondary",onClick:()=>{console.log("🔊 Test sound button clicked"),console.log("🔊 isInitialized:",r),console.log("🔊 isEnabled:",n),t()},disabled:!r||!n,children:[g.jsx(ku,{className:"w-4 h-4"}),"Test Sound"]}),g.jsxs("button",{className:"btn btn-secondary",onClick:()=>i({item_name:"Test Order - Chicken Biryani",order_token:"1234",total_amount:150,order_type:"dine_in",user_id:"test-user-id"}),disabled:!r||!n,children:[g.jsx(ku,{className:"w-4 h-4"}),"Test Popup"]}),g.jsxs("button",{className:"btn btn-secondary",onClick:async()=>{console.log("🔍 Checking recent orders from app...");try{const{data:a,error:s}=await xe.from("orders").select("*").order("created_at",{ascending:!1}).limit(5);if(s){console.error("❌ Error fetching recent orders:",s);return}console.log("📋 Recent orders:",a);const c=a.filter(d=>{const f=d.status==="pending"||d.status==="PENDING",p=d.user_id!==Vr;return f&&p});if(console.log("🔔 Orders that should trigger notifications:",c),c.length>0){const d=c[0];console.log("📢 Triggering notification for latest order:",d),await i(d)}else console.log("❌ No recent orders found that should trigger notifications")}catch(a){console.error("❌ Error in check recent orders:",a)}},disabled:!r||!n,children:[g.jsx(ku,{className:"w-4 h-4"}),"Check Recent"]})]}),g.jsxs("div",{className:"muted",style:{marginTop:"8px"},children:[g.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px"},children:[g.jsx("strong",{children:"Status:"})," ",r?"✅ Audio Initialized":"⏳ Waiting for user interaction",g.jsx("br",{}),g.jsx("strong",{children:"Notifications:"})," ",n?"🔊 Enabled":"🔇 Disabled",g.jsx("br",{}),g.jsx("strong",{children:"Real-time:"})," ✅ Connected (Dual subscription system)",g.jsx("br",{}),g.jsx("strong",{children:"Sources:"})," NotificationContext + Orders Panel subscriptions",g.jsx("br",{}),g.jsx("strong",{children:"Filter:"})," Shows notifications for PENDING orders from customers (not admin/staff)",g.jsx("br",{}),g.jsx("strong",{children:"Deduplication:"})," ✅ Prevents duplicate notifications"]}),r?n?"You will hear a notification sound and see popup alerts when new orders are placed.":"Notifications are disabled. Enable to hear sounds and see popup alerts for new orders.":"Click anywhere on the page to initialize audio permissions."]})]})})]})]})}function c9(){const n=O.useRef(null),e=O.useRef(null),t=O.useRef(null),[r,i]=O.useState(!1),[a,s]=O.useState(""),[c,d]=O.useState(null),[f,p]=O.useState(null),[m,v]=O.useState(!1),[x,w]=O.useState(!1),[_,S]=O.useState(""),[E,A]=O.useState(0),[T,R]=O.useState(""),[I,M]=O.useState(!1),[U,H]=O.useState(!1),{playNotification:q}=ql();O.useEffect(()=>{(async()=>{try{if(!I){console.log("📷 Requesting camera permission...");const W=navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),de=new Promise((j,G)=>{setTimeout(()=>G(new Error("Permission request timeout - user may have dismissed popup")),1e4)});(await Promise.race([W,de])).getTracks().forEach(j=>j.stop()),console.log("✅ Camera permission granted"),M(!0),H(!0)}}catch(W){console.log("❌ Camera permission denied, dismissed, or error:",W.message),M(!0),H(!1),W.message.includes("timeout")||d(new Error("Camera permission is required to scan QR codes. Please allow camera access and refresh the page."))}})()},[]),O.useEffect(()=>()=>{ce()},[]);const ae=Ai();O.useEffect(()=>{ae.pathname!=="/scan"&&(ce(),M(!1))},[ae.pathname]),O.useEffect(()=>{const B=()=>{document.hidden&&r&&(console.log("📱 Page hidden, stopping camera..."),ce())};return document.addEventListener("visibilitychange",B),()=>{document.removeEventListener("visibilitychange",B)}},[r]);const ce=async()=>{try{console.log("🛑 Stopping camera and QR scanner...");try{t.current&&typeof t.current.stop=="function"&&(t.current.stop(),console.log("✅ Scanner controls stopped"))}catch(W){console.warn("⚠️ Error stopping scanner controls:",W)}t.current=null;try{e.current&&typeof e.current.reset=="function"&&(await e.current.reset(),console.log("✅ QR code reader reset"))}catch(W){console.warn("⚠️ Error resetting QR code reader:",W)}e.current=null;const B=n.current;B&&B.srcObject&&(B.srcObject.getTracks().forEach(de=>{de.stop(),console.log("✅ Camera track stopped:",de.kind)}),B.srcObject=null,console.log("✅ Camera stream cleared"));try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const W=await navigator.mediaDevices.enumerateDevices();console.log("🔍 Found media devices:",W.length)}}catch(W){console.warn("⚠️ Error enumerating devices:",W)}try{const W=[];document.querySelectorAll("video, audio").forEach(de=>{if(de.srcObject){const pe=de.srcObject.getTracks();W.push(...pe)}}),W.length>0&&(console.log("🛑 Found remaining tracks, stopping them:",W.length),W.forEach(de=>{de.readyState!=="ended"&&(de.stop(),console.log("✅ Additional track stopped:",de.kind))}))}catch(W){console.warn("⚠️ Error stopping additional tracks:",W)}B&&(B.pause(),B.currentTime=0,B.load(),console.log("✅ Video element reset")),i(!1),R("Camera stopped"),setScannedCode(null),d(null),setTimeout(()=>{console.log("🛑 Camera cleanup completed - final check"),B&&B.srcObject&&(console.log("🔧 Force clearing remaining video source"),B.srcObject=null)},100),console.log("🛑 Camera cleanup completed")}catch(B){console.error("❌ Error during camera cleanup:",B),i(!1),R("Camera stopped")}},F=async()=>{d(null),p(null),s(""),R("");try{if(r)return;await ce();try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})).getTracks().forEach(de=>de.stop()),H(!0)}catch{H(!1),d(new Error("Camera permission is required. Please allow camera access and try again."));return}const B=new Mw;e.current=B,i(!0),R("Camera started - ready to scan"),await B.decodeFromVideoDevice(null,n.current,async(W,de,pe)=>{try{pe&&!t.current&&(t.current=pe),pe&&R("")}catch{}if(W){const j=String(W.getText()||"");if(!j||x)return;const G=Date.now();if(_===j&&G-E<1500)return;w(!0),S(j),A(G);try{if(await he(j)){R("Successfully scanned");try{await q()}catch(ge){console.log("Sound playback failed:",ge)}}else R("")}finally{w(!1)}}de&&de.name})}catch(B){console.error("Camera start error:",B),d(B),i(!1)}},ee=B=>{if(!B)return{};const W=String(B).trim();console.log("Parsing scanned text:",W);try{const pe=new URL(W).searchParams,j=pe.get("qr_code")||pe.get("order_qr_code")||pe.get("code");if(j){const G=j.toString().trim().toUpperCase(),ie=G.startsWith("ORD-")?G.substring(4):G;return console.log("Found QR code in URL params:",ie),{qrCode:ie}}}catch{}if(W){const de=W.toString().trim().toUpperCase(),pe=de.startsWith("ORD-")?de.substring(4):de;return console.log("Found QR code:",pe),{qrCode:pe}}return console.log("No valid QR code found in:",W),{}},he=async B=>{d(null),p(null);const{qrCode:W}=ee(B);console.log("Parsed QR code:",W);try{if(!W){const G="Invalid QR. Please scan the order QR code.";return console.log(G),d(new Error(G)),null}console.log("Searching by QR code:",W);const{data:de,error:pe}=await xe.from("orders").select("id,item_name,qr_code,order_token,created_at,status,total_amount,user_id").eq("qr_code",W).limit(1).maybeSingle();if(pe)throw console.error("Error searching by QR code:",pe),pe;if(de&&de.qr_code===W)return console.log("Setting order:",de),p(de),de;const j="No order found for this QR code. Please verify and try again.";return console.log(j),d(new Error(j)),null}catch(de){return console.error("Scan lookup failed:",de),d(de),null}},_e=async B=>{if(f){v(!0);try{const{error:W}=await xe.rpc("update_order_status_flexible",{p_order_id:f.id,p_new_status:String(B).toLowerCase()});if(W)throw W;p(de=>({...de,status:B}));try{await q()}catch(de){console.log("Sound playback failed:",de)}R(`✅ Order updated to ${B}`),setTimeout(()=>R(""),2e3),B==="DELIVERED"&&setTimeout(()=>{p(null)},1500)}catch(W){R(`❌ Failed: ${W.message||W}`),setTimeout(()=>R(""),3e3)}finally{v(!1)}}},V=async()=>{if(f&&window.confirm("Are you sure you want to cancel this order?")){v(!0);try{const{error:B}=await xe.rpc("update_order_status_flexible",{p_order_id:f.id,p_new_status:"cancelled"});if(B)throw B;try{await q()}catch(W){console.log("Sound playback failed:",W)}R("✅ Order cancelled successfully"),setTimeout(()=>{R(""),p(null)},1500)}catch(B){R(`❌ Failed to cancel: ${B.message||B}`),setTimeout(()=>R(""),3e3)}finally{v(!1)}}};return O.useEffect(()=>(F(),()=>{ce()}),[]),g.jsxs("div",{className:"qr-scan-page",style:{display:"flex",gap:16,alignItems:"flex-start",flexWrap:"wrap"},children:[g.jsx("div",{style:{flex:"1 1 300px",minWidth:"300px"},children:g.jsxs(hr,{title:"QR Scanner",children:[!I&&g.jsx("div",{style:{padding:"12px",backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"8px",marginBottom:"16px",color:"#92400e"},children:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx("span",{children:"📷"}),g.jsx("span",{children:"Requesting camera permission..."})]})}),I&&!U&&g.jsx("div",{style:{padding:"12px",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"8px",marginBottom:"16px",color:"#991b1b"},children:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.jsx("span",{children:"⚠️"}),g.jsx("span",{children:'Camera permission not granted. Click "Start Camera" to request permission again.'})]})}),g.jsx("div",{className:"actions",style:{marginBottom:16,justifyContent:"flex-start"},children:g.jsxs("button",{className:"btn",onClick:r?ce:F,children:[r?"Stop":"Start"," Camera"]})}),T&&g.jsx("div",{className:"muted",style:{marginTop:16,color:T.includes("✅")?"#10b981":"#ef4444",textAlign:"center",fontSize:"16px",fontWeight:"500"},children:T}),c&&g.jsx("div",{className:"muted",style:{color:"crimson",marginTop:16,textAlign:"center"},children:String(c.message||c)}),g.jsx("div",{className:"muted",style:{marginTop:16,textAlign:"center"},children:"💡 Scan a QR code - The order panel will open automatically"})]})}),g.jsx("div",{className:"scan-window",style:{width:"400px",minWidth:"350px",position:"sticky",top:"20px",flex:"0 0 400px"},children:g.jsx(hr,{title:"Scan Window",children:g.jsxs("div",{style:{position:"relative"},children:[g.jsx("video",{ref:n,style:{width:"100%",maxHeight:300,background:"#000",borderRadius:8,display:r?"block":"none",opacity:r?1:0,visibility:r?"visible":"hidden"},muted:!0,playsInline:!0}),!r&&g.jsxs("div",{style:{width:"100%",height:"300px",background:"#1f2937",borderRadius:8,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#9ca3af",gap:"12px"},children:[g.jsx("div",{style:{fontSize:"48px"},children:"📷"}),g.jsx("div",{style:{fontSize:"14px"},children:"Camera Stopped"}),g.jsx("div",{style:{fontSize:"12px",opacity:.7},children:'Click "Start Camera" to begin scanning'})]})]})})}),g.jsx(kn,{children:f&&g.jsx(g.Fragment,{children:g.jsx(Je.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>p(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998,backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:g.jsxs(Je.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:30},style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",zIndex:9999,maxWidth:"500px",width:"100%",maxHeight:"70vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",display:"flex",flexDirection:"column"},onClick:B=>B.stopPropagation(),children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"2px solid #e5e7eb",paddingBottom:"16px"},children:[g.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:"#1f2937"},children:"📦 Order Details"}),g.jsx("button",{onClick:()=>p(null),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",color:"#6b7280"},children:g.jsx(Dt,{size:24})})]}),g.jsxs("div",{style:{backgroundColor:"#f9fafb",borderRadius:"12px",padding:"16px",marginBottom:"20px",display:"grid",gap:"12px"},children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Token Number:"}),g.jsxs("span",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937",backgroundColor:"#fff",padding:"4px 12px",borderRadius:"8px",border:"2px solid #3b82f6"},children:["#",f.order_token||"N/A"]})]}),g.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"12px"},children:[g.jsxs("div",{style:{marginBottom:"8px"},children:[g.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Items:"}),g.jsx("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px",marginTop:"4px"},children:f.item_name||"Order Items"})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"12px"},children:[g.jsxs("div",{children:[g.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Total:"}),g.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:["₹",f.total_amount!=null?f.total_amount:"-"]})]}),g.jsxs("div",{children:[g.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Status:"}),g.jsx("div",{style:{fontWeight:"600",fontSize:"16px",color:f.status==="pending"?"#f59e0b":f.status==="preparing"?"#3b82f6":f.status==="ready"?"#10b981":"#6b7280"},children:ut(f.status)})]})]}),g.jsxs("div",{style:{marginTop:"12px"},children:[g.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Placed By:"}),g.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"14px",marginTop:"4px"},children:f.user_id===Vr?"📱 App":"🏪 Counter"})]})]})]}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[g.jsxs("button",{onClick:()=>_e("DELIVERED"),disabled:m,style:{width:"100%",padding:"14px 20px",fontSize:"16px",fontWeight:"600",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"10px",cursor:m?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease",opacity:m?.6:1},onMouseEnter:B=>{m||(B.target.style.backgroundColor="#059669")},onMouseLeave:B=>{m||(B.target.style.backgroundColor="#10b981")},children:[m?g.jsx(_i,{size:18,className:"spin"}):g.jsx(rs,{size:18}),m?"Updating...":"Mark as Delivered"]}),g.jsxs("div",{style:{display:"flex",gap:"10px"},children:[g.jsxs("button",{onClick:V,disabled:m,style:{flex:1,padding:"12px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:"#ffffff",color:"#dc2626",border:"1px solid #dc2626",borderRadius:"8px",cursor:m?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s ease",opacity:m?.6:1},onMouseEnter:B=>{m||(B.target.style.backgroundColor="#fef2f2")},onMouseLeave:B=>{m||(B.target.style.backgroundColor="#ffffff")},children:[g.jsx(Dt,{size:16}),"Cancel Order"]}),g.jsx("button",{onClick:()=>p(null),disabled:m,style:{flex:1,padding:"12px 16px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:m?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:m?.6:1},onMouseEnter:B=>{m||(B.target.style.backgroundColor="#e5e7eb")},onMouseLeave:B=>{m||(B.target.style.backgroundColor="#f3f4f6")},children:"Close"})]})]}),g.jsx("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:g.jsxs("details",{style:{cursor:"pointer"},children:[g.jsx("summary",{style:{fontSize:"12px",color:"#6b7280",userSelect:"none"},children:"Order Code Reference"}),g.jsx("code",{style:{fontSize:"11px",backgroundColor:"#f3f4f6",padding:"4px 8px",borderRadius:"4px",display:"block",marginTop:"8px",wordBreak:"break-all",color:"#374151"},children:f.qr_code||"Not available"})]})})]})})})})]})}function u9(){const{popupNotification:n,closePopupNotification:e}=gd();if(!n)return null;const t=n.type==="order_cancelled",r=n.type==="availability_change",i=n.type==="error";let a;return i?a={border:"border-red-200 dark:border-red-700",borderLeft:"#ef4444",shadow:"rgba(239, 68, 68, 0.1)",bgHeader:"bg-red-50 dark:bg-red-900/20",bgIcon:"bg-red-500",textTitle:"text-red-800 dark:text-red-200",textTime:"text-red-600 dark:text-red-300",textBtn:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",bgProgress:"bg-red-200 dark:bg-red-800",progress:"bg-red-500"}:r?a={border:"border-blue-200 dark:border-blue-700",borderLeft:"#3b82f6",shadow:"rgba(59, 130, 246, 0.1)",bgHeader:"bg-blue-50 dark:bg-blue-900/20",bgIcon:"bg-blue-500",textTitle:"text-blue-800 dark:text-blue-200",textTime:"text-blue-600 dark:text-blue-300",textBtn:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",bgProgress:"bg-blue-200 dark:bg-blue-800",progress:"bg-blue-500"}:t?a={border:"border-red-200 dark:border-red-700",borderLeft:"#ef4444",shadow:"rgba(239, 68, 68, 0.1)",bgHeader:"bg-red-50 dark:bg-red-900/20",bgIcon:"bg-red-500",textTitle:"text-red-800 dark:text-red-200",textTime:"text-red-600 dark:text-red-300",textBtn:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",bgProgress:"bg-red-200 dark:bg-red-800",progress:"bg-red-500"}:a={border:"border-green-200 dark:border-green-700",borderLeft:"#10b981",shadow:"rgba(16, 185, 129, 0.1)",bgHeader:"bg-green-50 dark:bg-green-900/20",bgIcon:"bg-green-500",textTitle:"text-green-800 dark:text-green-200",textTime:"text-green-600 dark:text-green-300",textBtn:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200",bgProgress:"bg-green-200 dark:bg-green-800",progress:"bg-green-500"},g.jsx(kn,{children:g.jsx(Je.div,{className:"fixed top-4 right-4 z-50 max-w-sm w-full",initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{type:"spring",stiffness:300,damping:25,duration:.3},children:g.jsxs("div",{className:`bg-white dark:bg-gray-800 border ${a.border} rounded-lg shadow-lg overflow-hidden`,style:{borderLeft:`4px solid ${a.borderLeft}`,boxShadow:`0 10px 25px rgba(0, 0, 0, 0.1), 0 0 0 1px ${a.shadow}`},children:[g.jsxs("div",{className:`flex items-center justify-between p-4 ${a.bgHeader}`,children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:`w-8 h-8 ${a.bgIcon} rounded-full flex items-center justify-center`,children:g.jsx(ku,{className:"w-4 h-4 text-white"})}),g.jsxs("div",{children:[g.jsx("h4",{className:`font-semibold ${a.textTitle} text-sm`,children:n.title}),g.jsx("p",{className:`text-xs ${a.textTime}`,children:new Date(n.timestamp).toLocaleTimeString()})]})]}),g.jsx("button",{onClick:e,className:`${a.textBtn} transition-colors`,children:g.jsx(Dt,{className:"w-4 h-4"})})]}),g.jsxs("div",{className:"p-4",children:[g.jsx("p",{className:"text-gray-800 dark:text-gray-200 text-sm leading-relaxed",children:n.message}),n.orderData&&!t&&g.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:g.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[n.orderData.total_amount&&g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"Amount:"}),g.jsxs("span",{className:"font-medium",children:["₹",n.orderData.total_amount]})]}),n.orderData.order_type&&n.orderData.order_type!=="cancelled"&&g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"Type:"}),g.jsx("span",{className:"font-medium capitalize",children:n.orderData.order_type})]}),n.orderData.user_id&&g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"Placed by:"}),g.jsx("span",{className:"font-medium capitalize",children:n.orderData.user_id===Vr?"App":"Counter"})]})]})})]}),g.jsx("div",{className:`h-1 ${a.bgProgress}`,children:g.jsx(Je.div,{className:`h-full ${a.progress}`,initial:{width:"100%"},animate:{width:"0%"},transition:{duration:5,ease:"linear"}})})]})})})}q3.createRoot(document.getElementById("root")).render(g.jsx(O.StrictMode,{children:g.jsx(aA,{children:g.jsx(Kk,{})})}));
